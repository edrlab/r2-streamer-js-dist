(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function sortObject(obj){if(obj instanceof Array){for(let i=0;i<obj.length;i++){obj[i]=sortObject(obj[i])}return obj}else if(typeof obj!=="object"){return obj}const newObj={};Object.keys(obj).sort().forEach(key=>{newObj[key]=sortObject(obj[key])});return newObj}exports.sortObject=sortObject;function traverseJsonObjects_(parent,keyInParent,obj,func){func(obj,parent,keyInParent);if(obj instanceof Array){for(let index=0;index<obj.length;index++){const item=obj[index];if(typeof item!=="undefined"){traverseJsonObjects_(obj,index,item,func)}}}else if(typeof obj==="object"){Object.keys(obj).forEach(key=>{if(obj.hasOwnProperty(key)){const item=obj[key];if(typeof item!=="undefined"){traverseJsonObjects_(obj,key,item,func)}}})}}function traverseJsonObjects(obj,func){traverseJsonObjects_(undefined,undefined,obj,func)}exports.traverseJsonObjects=traverseJsonObjects},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function parseRangeHeader(rangeHeader){let ranges=[];if(!rangeHeader){return ranges}let rHeader;if(rangeHeader instanceof Array){rHeader=rangeHeader}else{rHeader=[rangeHeader]}rHeader.forEach(rh=>{const arr=parseRangeHeader_(rh);ranges=ranges.concat(arr)});return ranges}exports.parseRangeHeader=parseRangeHeader;function parseRangeHeader_(rangeHeader){const ranges=[];const iEqual=rangeHeader.indexOf("=");if(iEqual<=0){return ranges}const rangesStr=rangeHeader.substr(iEqual+1);const rangeStrArray=rangesStr.split(",");rangeStrArray.forEach(rangeStr=>{const beginEndArray=rangeStr.split("-");const beginStr=beginEndArray[0];const endStr=beginEndArray[1];let begin=-1;if(beginStr&&beginStr.length){begin=parseInt(beginStr,10)}let end=-1;if(endStr&&endStr.length){end=parseInt(endStr,10)}const rangeObj={begin:begin,end:end};ranges.push(rangeObj)});return ranges}function combineRanges(ranges){const orderedRanges=ranges.map((range,index)=>{return{begin:range.begin,end:range.end,index:index}}).sort((a,b)=>{return a.begin-b.begin});let j=0;let i=1;for(j=0,i=1;i<orderedRanges.length;i++){const orderedRange=orderedRanges[i];const currentRange=orderedRanges[j];if(orderedRange.begin>currentRange.end+1){orderedRanges[++j]=orderedRange}else if(orderedRange.end>currentRange.end){currentRange.end=orderedRange.end;currentRange.index=Math.min(currentRange.index,orderedRange.index)}}orderedRanges.length=j+1;return orderedRanges.sort((a,b)=>{return a.index-b.index}).map(range=>{return{begin:range.begin,end:range.end}})}exports.combineRanges=combineRanges},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=require("path");const querystring=require("querystring");function isHTTP(urlOrPath){return urlOrPath.indexOf("http")===0}exports.isHTTP=isHTTP;function encodeURIComponent_RFC3986(str){return encodeURIComponent(str).replace(/[!'()*]/g,c=>{return"%"+c.charCodeAt(0).toString(16)})}exports.encodeURIComponent_RFC3986=encodeURIComponent_RFC3986;function encodeURIComponent_RFC5987(str){return encodeURIComponent(str).replace(/['()]/g,querystring.escape).replace(/\*/g,"%2A").replace(/%(?:7C|60|5E)/g,querystring.unescape)}exports.encodeURIComponent_RFC5987=encodeURIComponent_RFC5987;function ensureAbsolute(rootUrl,linkHref){let url=linkHref;if(!isHTTP(url)&&url.indexOf("data:")!==0){if(url.indexOf("//")===0){if(rootUrl.indexOf("https://")===0){url="https:"+url}else{url="http:"+url}return url}if(url[0]==="/"){const j=rootUrl.replace(/:\/\//g,":__").indexOf("/");const rootUrlOrigin=rootUrl.substr(0,j);url=path.join(rootUrlOrigin,url)}else{const i=rootUrl.indexOf("?");let rootUrlWithoutQuery=rootUrl;if(i>=0){rootUrlWithoutQuery=rootUrlWithoutQuery.substr(0,i)}if(rootUrlWithoutQuery.substr(-1)==="/"){url=path.join(rootUrlWithoutQuery,url)}else{url=path.join(path.dirname(rootUrlWithoutQuery),url)}}url=url.replace(/\\/g,"/").replace(/^https:\//g,"https://").replace(/^http:\//g,"http://")}return url}exports.ensureAbsolute=ensureAbsolute},{path:undefined,querystring:undefined}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const stream_1=require("stream");class BufferReadableStream extends stream_1.Readable{constructor(buffer){super();this.buffer=buffer;this.alreadyRead=0}_read(size){if(this.alreadyRead>=this.buffer.length){this.push(null);return}let chunk=this.alreadyRead?this.buffer.slice(this.alreadyRead):this.buffer;if(size){let l=size;if(size>chunk.length){l=chunk.length}chunk=chunk.slice(0,l)}this.alreadyRead+=chunk.length;this.push(chunk)}}exports.BufferReadableStream=BufferReadableStream},{stream:undefined}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const BufferReadableStream_1=require("./BufferReadableStream");function bufferToStream(buffer){return new BufferReadableStream_1.BufferReadableStream(buffer)}exports.bufferToStream=bufferToStream;async function streamToBufferPromise_READABLE(readStream){return new Promise((resolve,reject)=>{const buffers=[];readStream.on("error",reject);readStream.on("readable",()=>{let chunk;do{chunk=readStream.read();if(chunk){buffers.push(chunk)}}while(chunk)});readStream.on("end",()=>{resolve(Buffer.concat(buffers))})})}exports.streamToBufferPromise_READABLE=streamToBufferPromise_READABLE;async function streamToBufferPromise(readStream){return new Promise((resolve,reject)=>{const buffers=[];readStream.on("error",reject);readStream.on("data",data=>{buffers.push(data)});readStream.on("end",()=>{resolve(Buffer.concat(buffers))})})}exports.streamToBufferPromise=streamToBufferPromise},{"./BufferReadableStream":4}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const debug_=require("debug");const stream_1=require("stream");const debug=debug_("r2:RangeStream");class RangeStream extends stream_1.Transform{constructor(streamBegin,streamEnd,streamLength){super();this.streamBegin=streamBegin;this.streamEnd=streamEnd;this.streamLength=streamLength;this.bytesReceived=0;this.finished=false;this.closed=false;this.on("end",()=>{});this.on("finish",()=>{})}_flush(callback){callback()}_transform(chunk,_encoding,callback){this.bytesReceived+=chunk.length;if(this.finished){if(!this.closed){debug("???? CLOSING...");this.closed=true;this.push(null)}else{debug("???? STILL PIPE CALLING _transform ??!");this.end()}}else{if(this.bytesReceived>this.streamBegin){let chunkBegin=0;let chunkEnd=chunk.length-1;chunkBegin=this.streamBegin-(this.bytesReceived-chunk.length);if(chunkBegin<0){chunkBegin=0}if(this.bytesReceived>this.streamEnd){this.finished=true;chunkEnd=chunk.length-(this.bytesReceived-this.streamEnd)}this.push(chunk.slice(chunkBegin,chunkEnd+1));if(this.finished){this.closed=true;this.push(null);this.end()}}else{}}callback()}}exports.RangeStream=RangeStream},{debug:267,stream:undefined}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class JsonDateConverter{serialize(property){return property.toISOString()}deserialize(value){return new Date(value)}collapseArrayWithSingleItem(){return false}}exports.JsonDateConverter=JsonDateConverter},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class JsonStringConverter{serialize(property){return property}deserialize(value){return value}collapseArrayWithSingleItem(){return true}}exports.JsonStringConverter=JsonStringConverter},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const property_definition_1=require("./property-definition");class ObjectDefinition{constructor(){this.ctr=(()=>undefined);this.beforeDeserialized=(()=>undefined);this.onDeserialized=(()=>undefined);this.properties=new Map}getProperty(key){let property=this.properties.get(key);if(!property){property=new property_definition_1.PropertyDefinition;this.properties.set(key,property)}return property}}exports.ObjectDefinition=ObjectDefinition;exports.objectDefinitions=new Map;function getDefinition(objectType){let definition=exports.objectDefinitions.get(objectType);if(!definition){definition=new ObjectDefinition;exports.objectDefinitions.set(objectType,definition)}return definition}exports.getDefinition=getDefinition;function getInheritanceChain(objectType){if(!objectType){return[]}const parent=Object.getPrototypeOf(objectType);return[objectType.constructor].concat(getInheritanceChain(parent))}exports.getInheritanceChain=getInheritanceChain;function getChildObjectTypeDefinitions(parentObjectType){const childDefs=[];exports.objectDefinitions.forEach((def,objectType)=>{const superObjectType=Object.getPrototypeOf(objectType.prototype).constructor;if(superObjectType===parentObjectType){childDefs.push({functionType:objectType,objectDefinition:def})}});return childDefs}function getTypedInheritanceChain(objectType,objectInstance){const parentDef=exports.objectDefinitions.get(objectType);let childDefs=[];if(objectInstance&&parentDef&&parentDef.discriminatorProperty){childDefs=childDefs.concat(getChildObjectTypeDefinitions(objectType))}let actualObjectType;while(childDefs.length!==0&&!actualObjectType){const ifo=childDefs.shift();const objectType2=ifo?ifo.functionType:undefined;const def=ifo?ifo.objectDefinition:undefined;if(def&&def.hasOwnProperty("discriminatorValue")){if(objectInstance&&parentDef&&def.discriminatorValue===objectInstance[parentDef.discriminatorProperty]){if(def.hasOwnProperty("discriminatorProperty")){return getTypedInheritanceChain(objectType2,objectInstance)}actualObjectType=objectType2}}else{childDefs=childDefs.concat(getChildObjectTypeDefinitions(objectType2))}}if(!actualObjectType){actualObjectType=objectType}const inheritanceChain=new Set(getInheritanceChain(Object.create(actualObjectType.prototype)));return Array.from(inheritanceChain).filter(t=>exports.objectDefinitions.has(t))}exports.getTypedInheritanceChain=getTypedInheritanceChain},{"./property-definition":10}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class PropertyDefinition{constructor(){this.array=false;this.set=false;this.readonly=false;this.writeonly=false}}exports.PropertyDefinition=PropertyDefinition},{}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class BufferConverter{constructor(){this.encoding="utf8"}serialize(property){return property.toString(this.encoding)}deserialize(value){return Buffer.from(value,this.encoding)}collapseArrayWithSingleItem(){return false}}exports.BufferConverter=BufferConverter},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const buffer_converter_1=require("./buffer-converter");const date_converter_1=require("./date-converter");exports.propertyConverters=new Map;exports.propertyConverters.set(Buffer,new buffer_converter_1.BufferConverter);exports.propertyConverters.set(Date,new date_converter_1.DateConverter)},{"./buffer-converter":11,"./date-converter":13}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class DateConverter{serialize(property){return property.toISOString()}deserialize(value){return new Date(value)}collapseArrayWithSingleItem(){return false}}exports.DateConverter=DateConverter},{}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");tslib_1.__exportStar(require("./converter"),exports);tslib_1.__exportStar(require("./buffer-converter"),exports);tslib_1.__exportStar(require("./date-converter"),exports)},{"./buffer-converter":11,"./converter":12,"./date-converter":13,tslib:554}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function BeforeDeserialized(){return(target,key)=>{const definition=object_definition_1.getDefinition(target.constructor);definition.beforeDeserialized=target[key]}}exports.BeforeDeserialized=BeforeDeserialized},{"../classes/object-definition":9}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");tslib_1.__exportStar(require("./xml-object"),exports);tslib_1.__exportStar(require("./xml-xpathselector"),exports);tslib_1.__exportStar(require("./xml-type"),exports);tslib_1.__exportStar(require("./xml-item-type"),exports);tslib_1.__exportStar(require("./xml-converter"),exports);tslib_1.__exportStar(require("./xml-readonly"),exports);tslib_1.__exportStar(require("./xml-writeonly"),exports);tslib_1.__exportStar(require("./xml-discriminator-property"),exports);tslib_1.__exportStar(require("./xml-discriminator-value"),exports);tslib_1.__exportStar(require("./xml-constructor"),exports);tslib_1.__exportStar(require("./before-deserialized"),exports);tslib_1.__exportStar(require("./on-deserialized"),exports)},{"./before-deserialized":15,"./on-deserialized":17,"./xml-constructor":18,"./xml-converter":19,"./xml-discriminator-property":20,"./xml-discriminator-value":21,"./xml-item-type":22,"./xml-object":23,"./xml-readonly":24,"./xml-type":25,"./xml-writeonly":26,"./xml-xpathselector":27,tslib:554}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function OnDeserialized(){return(target,key)=>{const definition=object_definition_1.getDefinition(target.constructor);definition.onDeserialized=target[key]}}exports.OnDeserialized=OnDeserialized},{"../classes/object-definition":9}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlConstructor(){return(target,key)=>{const definition=object_definition_1.getDefinition(target.constructor);definition.ctr=target[key]}}exports.XmlConstructor=XmlConstructor},{"../classes/object-definition":9}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlConverter(converter){return(target,key)=>{const property=object_definition_1.getDefinition(target.constructor).getProperty(key);if(typeof converter==="function"){property.converter=new converter}else{property.converter=converter}}}exports.XmlConverter=XmlConverter},{"../classes/object-definition":9}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlDiscriminatorProperty(property){return objectType=>{object_definition_1.getDefinition(objectType).discriminatorProperty=property}}exports.XmlDiscriminatorProperty=XmlDiscriminatorProperty},{"../classes/object-definition":9}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlDiscriminatorValue(value){return objectType=>{object_definition_1.getDefinition(objectType).discriminatorValue=value}}exports.XmlDiscriminatorValue=XmlDiscriminatorValue},{"../classes/object-definition":9}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlItemType(objectType){return(target,key)=>{const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.objectType=objectType}}exports.XmlItemType=XmlItemType},{"../classes/object-definition":9}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlObject(namespaces){return objectType=>{const def=object_definition_1.getDefinition(objectType);if(namespaces){def.namespaces=namespaces}if(def.namespaces&&def.properties){def.properties.forEach(propDef=>{if(def.namespaces){for(const prop in def.namespaces){if(def.namespaces.hasOwnProperty(prop)){if(!propDef.namespaces||!propDef.namespaces[prop]){if(!propDef.namespaces){propDef.namespaces={}}propDef.namespaces[prop]=def.namespaces[prop]}}}if(propDef.xpathSelectorParsed){propDef.xpathSelectorParsed.forEach(xp=>{if(xp.namespacePrefix&&!xp.namespaceUri){xp.namespaceUri=propDef.namespaces?propDef.namespaces[xp.namespacePrefix]:undefined}})}}})}}}exports.XmlObject=XmlObject},{"../classes/object-definition":9}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlReadonly(){return(target,key)=>{const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.readonly=true}}exports.XmlReadonly=XmlReadonly},{"../classes/object-definition":9}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlType(objectType){return(target,key)=>{const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.objectType=objectType}}exports.XmlType=XmlType},{"../classes/object-definition":9}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function XmlWriteonly(){return(target,key)=>{const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.writeonly=true}}exports.XmlWriteonly=XmlWriteonly},{"../classes/object-definition":9}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});require("reflect-metadata");const object_definition_1=require("../classes/object-definition");function XmlXPathSelector(selector,namespaces){return(target,key)=>{const objectType=Reflect.getMetadata("design:type",target,key);const objDef=object_definition_1.getDefinition(target.constructor);const property=objDef.getProperty(key);property.xpathSelector=selector;if(namespaces){property.namespaces=namespaces}property.array=objectType===Array;property.set=objectType===Set;if(!property.array&&!property.set&&!property.objectType){property.objectType=objectType}if(property.xpathSelector.indexOf("|")<0&&property.xpathSelector.indexOf(">")<0&&property.xpathSelector.indexOf("*")<0&&property.xpathSelector.indexOf("||")<0&&property.xpathSelector.indexOf("[")<0&&property.xpathSelector.indexOf("]")<0){property.xpathSelectorParsed=[];const items=property.xpathSelector.split("/");items.forEach(item=>{if(!item.length){return}const subitems=item.split(":");const isAttribute=item[0]==="@";const isText=item==="text()";const localName=subitems.length>1?subitems[1]:isAttribute?subitems[0].substr(1):subitems[0];const namespacePrefix=subitems.length>1?isAttribute?subitems[0].substr(1):subitems[0]:undefined;const namespaceUri=namespacePrefix?namespaces?namespaces[namespacePrefix]:undefined:undefined;const xItem={isAttribute:isAttribute,isText:isText,localName:localName,namespacePrefix:namespacePrefix,namespaceUri:namespaceUri};property.xpathSelectorParsed.push(xItem)})}}}exports.XmlXPathSelector=XmlXPathSelector},{"../classes/object-definition":9,"reflect-metadata":464}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");tslib_1.__exportStar(require("./xml"),exports);tslib_1.__exportStar(require("./decorators"),exports);tslib_1.__exportStar(require("./converters"),exports)},{"./converters":14,"./decorators":16,"./xml":30,tslib:554}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const xpath=require("xpath");const object_definition_1=require("../classes/object-definition");const converter_1=require("../converters/converter");function deserialize(objectInstance,objectType,options={runConstructor:false}){return deserializeRootObject(objectInstance,objectType,options)}exports.deserialize=deserialize;function deserializeRootObject(objectInstance,objectType=Object,options){if(!object_definition_1.objectDefinitions.has(objectType)){return undefined}const[objectType2,...superTypes]=object_definition_1.getTypedInheritanceChain(objectType,objectInstance);const output=Object.create(objectType2.prototype);const definitions=[...superTypes.reverse(),objectType2].map(t=>object_definition_1.objectDefinitions.get(t)).filter(t=>!!t);definitions.forEach(d=>{if(!d){return}if(options.runConstructor){d.ctr.call(output)}d.beforeDeserialized.call(output);d.properties.forEach((p,key)=>{if(!p.objectType){throw new Error(`Cannot deserialize property "${key}" without type!`)}if(p.readonly){return}if(p.xpathSelectorParsed){const xpathMatched=[];let currentNodes=[objectInstance];p.xpathSelectorParsed.forEach((item,index)=>{const nextCurrentNodes=[];currentNodes.forEach(currentNode=>{if(item.isText){let textNode=currentNode.firstChild;if(currentNode.childNodes&&currentNode.childNodes.length){for(let i=0;i<currentNode.childNodes.length;i++){const childNode=currentNode.childNodes.item(i);if(childNode.nodeType===3){textNode=childNode;break}}}if(textNode){xpathMatched.push(textNode)}}else if(item.isAttribute){if(currentNode.attributes){const attr=item.namespaceUri?currentNode.attributes.getNamedItemNS(item.namespaceUri,item.localName):currentNode.attributes.getNamedItem(item.localName);if(attr){xpathMatched.push(attr)}}}else{if(currentNode.childNodes&&currentNode.childNodes.length){for(let i=0;i<currentNode.childNodes.length;i++){const childNode=currentNode.childNodes.item(i);if(childNode.nodeType!==1){continue}if(childNode.localName!==item.localName){continue}if(item.namespaceUri&&item.namespaceUri!==childNode.namespaceURI){continue}nextCurrentNodes.push(childNode)}}}});currentNodes=nextCurrentNodes;if(index===p.xpathSelectorParsed.length-1){currentNodes.forEach(node=>{xpathMatched.push(node)})}});if(xpathMatched&&xpathMatched.length){if(p.array||p.set){output[key]=[];xpathMatched.forEach(item=>{output[key].push(deserializeObject(item,p,options))});if(p.set){output[key]=new Set(output[key])}return}output[key]=deserializeObject(xpathMatched[0],p,options)}}else{const select=xpath.useNamespaces(p.namespaces||{});const xPathSelected=select(p.xpathSelector,objectInstance);if(xPathSelected&&xPathSelected.length){const xpathMatched=[];if(!(xPathSelected instanceof Array)){xpathMatched.push(xPathSelected)}else{xPathSelected.forEach(item=>{xpathMatched.push(item)})}if(p.array||p.set){output[key]=[];xpathMatched.forEach(item=>{output[key].push(deserializeObject(item,p,options))});if(p.set){output[key]=new Set(output[key])}return}output[key]=deserializeObject(xpathMatched[0],p,options)}}});d.onDeserialized.call(output)});return output}function deserializeObject(objectInstance,definition,_options){const primitive=definition.objectType===String||definition.objectType===Boolean||definition.objectType===Number;const value=objectInstance.nodeType===3?objectInstance.data:objectInstance.nodeType===2?objectInstance.value:objectInstance.nodeType===1?objectInstance.localName:objectInstance.nodeValue;const converter=definition.converter||converter_1.propertyConverters.get(definition.objectType);if(converter){return converter.deserialize(value)}if(!primitive){const objDefinition=object_definition_1.objectDefinitions.get(definition.objectType);if(objDefinition){return deserialize(objectInstance,definition.objectType)}}return value}},{"../classes/object-definition":9,"../converters/converter":12,xpath:576}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const deserialize_1=require("./methods/deserialize");class XML{static deserialize(objectInstance,objectType,options){if(objectInstance.nodeType===9){objectInstance=objectInstance.documentElement}return deserialize_1.deserialize(objectInstance,objectType,options)}}exports.XML=XML},{"./methods/deserialize":29}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const RangeStream_1=require("../stream/RangeStream");class Zip{async entryStreamRangePromise(entryPath,begin,end){let streamAndLength;try{streamAndLength=await this.entryStreamPromise(entryPath)}catch(err){console.log(err);return Promise.reject(err)}streamAndLength=streamAndLength;const b=begin<0?0:begin;const e=end<0?streamAndLength.length-1:end;const stream=new RangeStream_1.RangeStream(b,e,streamAndLength.length);streamAndLength.stream.pipe(stream);const sal={length:streamAndLength.length,reset:async()=>{return this.entryStreamRangePromise(entryPath,begin,end)},stream:stream};return sal}}exports.Zip=Zip},{"../stream/RangeStream":6}],32:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const debug_=require("debug");const StreamZip=require("node-stream-zip");const zip_1=require("./zip");const debug=debug_("r2:zip1");class Zip1 extends zip_1.Zip{constructor(filePath,zip){super();this.filePath=filePath;this.zip=zip}static async loadPromise(filePath){return new Promise((resolve,reject)=>{const zip=new StreamZip({file:filePath,storeEntries:true});zip.on("error",err=>{debug("--ZIP error: "+filePath);debug(err);reject(err)});zip.on("entry",_entry=>{});zip.on("extract",(entry,file)=>{debug("--ZIP extract:");debug(entry.name);debug(file)});zip.on("ready",()=>{resolve(new Zip1(filePath,zip))})})}freeDestroy(){debug("freeDestroy: Zip1 -- "+this.filePath);if(this.zip){this.zip.close()}}entriesCount(){return this.zip.entriesCount}hasEntries(){return this.entriesCount()>0}hasEntry(entryPath){return this.hasEntries()&&this.zip.entries()[entryPath]}forEachEntry(callback){if(!this.hasEntries()){return}Object.keys(this.zip.entries()).forEach(entryName=>{callback(entryName)})}async entryStreamPromise(entryPath){if(!this.hasEntries()||!this.hasEntry(entryPath)){return Promise.reject("no such path in zip: "+entryPath)}return new Promise((resolve,reject)=>{this.zip.stream(entryPath,(err,stream)=>{if(err){reject(err);return}const entry=this.zip.entries()[entryPath];const streamAndLength={length:entry.size,reset:async()=>{return this.entryStreamPromise(entryPath)},stream:stream};resolve(streamAndLength)})})}}exports.Zip1=Zip1},{"./zip":31,debug:267,"node-stream-zip":445}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const debug_=require("debug");const request=require("request");const requestPromise=require("request-promise-native");const yauzl=require("yauzl");const UrlUtils_1=require("../http/UrlUtils");const BufferUtils_1=require("../stream/BufferUtils");const zip_1=require("./zip");const zip2RandomAccessReader_Http_1=require("./zip2RandomAccessReader_Http");const debug=debug_("r2:zip2");class Zip2 extends zip_1.Zip{constructor(filePath,zip){super();this.filePath=filePath;this.zip=zip;this.entries={}}static async loadPromise(filePath){if(UrlUtils_1.isHTTP(filePath)){return Zip2.loadPromiseHTTP(filePath)}return new Promise((resolve,reject)=>{yauzl.open(filePath,{lazyEntries:true,autoClose:false},(err,zip)=>{if(err){debug("yauzl init ERROR");debug(err);reject(err);return}const zip2=new Zip2(filePath,zip);zip.on("error",erro=>{debug("yauzl ERROR");debug(erro);reject(erro)});zip.readEntry();zip.on("entry",entry=>{if(entry.fileName[entry.fileName.length-1]==="/"){}else{zip2.addEntry(entry)}zip.readEntry()});zip.on("end",()=>{debug("yauzl END");resolve(zip2)});zip.on("close",()=>{debug("yauzl CLOSE")})})})}static async loadPromiseHTTP(filePath){const needsStreamingResponse=true;return new Promise(async(resolve,reject)=>{const failure=err=>{debug(err);reject(err)};const success=async res=>{if(res.statusCode&&(res.statusCode<200||res.statusCode>=300)){failure("HTTP CODE "+res.statusCode);return}debug(filePath);debug(res.headers);if(!res.headers["content-length"]){reject("content-length not supported!");return}const httpZipByteLength=parseInt(res.headers["content-length"],10);debug(`Content-Length: ${httpZipByteLength}`);if(!res.headers["accept-ranges"]||res.headers["accept-ranges"]!=="bytes"){if(httpZipByteLength>2*1024*1024){reject("accept-ranges not supported, file too big to download: "+httpZipByteLength);return}debug("Downloading: "+filePath);const failure_=err=>{debug(err);reject(err)};const success_=async ress=>{if(ress.statusCode&&(ress.statusCode<200||ress.statusCode>=300)){failure_("HTTP CODE "+ress.statusCode);return}let buffer;try{buffer=await BufferUtils_1.streamToBufferPromise(ress)}catch(err){debug(err);reject(err);return}yauzl.fromBuffer(buffer,{lazyEntries:true},(err,zip)=>{if(err){debug("yauzl init ERROR");debug(err);reject(err);return}const zip2=new Zip2(filePath,zip);zip.on("error",erro=>{debug("yauzl ERROR");debug(erro);reject(erro)});zip.readEntry();zip.on("entry",entry=>{if(entry.fileName[entry.fileName.length-1]==="/"){}else{zip2.addEntry(entry)}zip.readEntry()});zip.on("end",()=>{debug("yauzl END");resolve(zip2)});zip.on("close",()=>{debug("yauzl CLOSE")})})};if(needsStreamingResponse){request.get({headers:{},method:"GET",uri:filePath}).on("response",success_).on("error",failure_)}else{let ress;try{ress=await requestPromise({headers:{},method:"GET",resolveWithFullResponse:true,uri:filePath})}catch(err){failure_(err);return}await success_(ress)}return}const httpZipReader=new zip2RandomAccessReader_Http_1.HttpZipReader(filePath,httpZipByteLength);yauzl.fromRandomAccessReader(httpZipReader,httpZipByteLength,{lazyEntries:true,autoClose:false},(err,zip)=>{if(err){debug("yauzl init ERROR");debug(err);reject(err);return}zip.httpZipReader=httpZipReader;const zip2=new Zip2(filePath,zip);zip.on("error",erro=>{debug("yauzl ERROR");debug(erro);reject(erro)});zip.readEntry();zip.on("entry",entry=>{if(entry.fileName[entry.fileName.length-1]==="/"){}else{zip2.addEntry(entry)}zip.readEntry()});zip.on("end",()=>{debug("yauzl END");resolve(zip2)});zip.on("close",()=>{debug("yauzl CLOSE")})})};if(needsStreamingResponse){request.get({headers:{},method:"HEAD",uri:filePath}).on("response",success).on("error",failure)}else{let res;try{res=await requestPromise({headers:{},method:"HEAD",resolveWithFullResponse:true,uri:filePath})}catch(err){failure(err);return}await success(res)}})}freeDestroy(){debug("freeDestroy: Zip2 -- "+this.filePath);if(this.zip){this.zip.close()}}entriesCount(){return this.zip.entryCount}hasEntries(){return this.entriesCount()>0}hasEntry(entryPath){return this.hasEntries()&&this.entries[entryPath]}forEachEntry(callback){if(!this.hasEntries()){return}Object.keys(this.entries).forEach(entryName=>{callback(entryName)})}async entryStreamPromise(entryPath){if(!this.hasEntries()||!this.hasEntry(entryPath)){return Promise.reject("no such path in zip: "+entryPath)}const entry=this.entries[entryPath];return new Promise((resolve,reject)=>{this.zip.openReadStream(entry,(err,stream)=>{if(err){debug("yauzl openReadStream ERROR");debug(err);reject(err);return}const streamAndLength={length:entry.uncompressedSize,reset:async()=>{return this.entryStreamPromise(entryPath)},stream:stream};resolve(streamAndLength)})})}addEntry(entry){this.entries[entry.fileName]=entry}}exports.Zip2=Zip2},{"../http/UrlUtils":3,"../stream/BufferUtils":5,"./zip":31,"./zip2RandomAccessReader_Http":34,debug:267,request:469,"request-promise-native":468,yauzl:577}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const stream_1=require("stream");const util=require("util");const debug_=require("debug");const request=require("request");const requestPromise=require("request-promise-native");const yauzl=require("yauzl");const BufferUtils_1=require("../stream/BufferUtils");const debug=debug_("r2:httpStream");class HttpZipReader{constructor(url,byteLength){this.url=url;this.byteLength=byteLength;this.firstBuffer=undefined;this.firstBufferStart=0;this.firstBufferEnd=0;yauzl.RandomAccessReader.call(this)}_readStreamForRange(start,end){if(this.firstBuffer&&start>=this.firstBufferStart&&end<=this.firstBufferEnd){const begin=start-this.firstBufferStart;const stop=end-this.firstBufferStart;return BufferUtils_1.bufferToStream(this.firstBuffer.slice(begin,stop))}const stream=new stream_1.PassThrough;const lastByteIndex=end-1;const range=`${start}-${lastByteIndex}`;const failure=err=>{debug(err)};const success=async res=>{if(res.statusCode&&(res.statusCode<200||res.statusCode>=300)){failure("HTTP CODE "+res.statusCode);return}if(this.firstBuffer){res.pipe(stream)}else{let buffer;try{buffer=await BufferUtils_1.streamToBufferPromise(res)}catch(err){debug(err);stream.end();return}this.firstBuffer=buffer;this.firstBufferStart=start;this.firstBufferEnd=end;stream.write(buffer);stream.end()}};const needsStreamingResponse=true;if(needsStreamingResponse){request.get({headers:{Range:`bytes=${range}`},method:"GET",uri:this.url}).on("response",success).on("error",failure)}else{(async()=>{let res;try{res=await requestPromise({headers:{Range:`bytes=${range}`},method:"GET",resolveWithFullResponse:true,uri:this.url})}catch(err){failure(err);return}await success(res)})()}return stream}}exports.HttpZipReader=HttpZipReader;util.inherits(HttpZipReader,yauzl.RandomAccessReader)},{"../stream/BufferUtils":5,debug:267,request:469,"request-promise-native":468,stream:undefined,util:undefined,yauzl:577}],35:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const UrlUtils_1=require("../http/UrlUtils");const zip1_1=require("./zip1");const zip2_1=require("./zip2");async function zipLoadPromise(filePath){if(UrlUtils_1.isHTTP(filePath)){return zip2_1.Zip2.loadPromise(filePath)}return zip1_1.Zip1.loadPromise(filePath)}exports.zipLoadPromise=zipLoadPromise},{"../http/UrlUtils":3,"./zip1":32,"./zip2":33}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=require("path");const transformer_1=require("../transform/transformer");const RangeUtils_1=require("../_utils/http/RangeUtils");const BufferUtils_1=require("../_utils/stream/BufferUtils");const debug_=require("debug");const express=require("express");const mime=require("mime-types");const debug=debug_("r2:server:assets");function serverAssets(server,routerPathBase64){const routerAssets=express.Router({strict:false});routerAssets.get("/",async(req,res)=>{if(!req.params.pathBase64){req.params.pathBase64=req.pathBase64}if(!req.params.asset){req.params.asset=req.asset}if(!req.params.lcpPass64){req.params.lcpPass64=req.lcpPass64}const isShow=req.query.show;const isHead=req.method.toLowerCase()==="head";if(isHead){debug("HEAD !!!!!!!!!!!!!!!!!!!")}const pathBase64Str=new Buffer(req.params.pathBase64,"base64").toString("utf8");let publication;try{publication=await server.loadOrGetCachedPublication(pathBase64Str)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}const zipInternal=publication.findFromInternal("zip");if(!zipInternal){const err="No publication zip!";debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}const zip=zipInternal.Value;const pathInZip=req.params.asset;if(!zip.hasEntry(pathInZip)){const err="Asset not in zip! "+pathInZip;debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}let link;if((publication.Resources||publication.Spine)&&pathInZip.indexOf("META-INF/")!==0&&!pathInZip.endsWith(".opf")){const relativePath=pathInZip;if(publication.Resources){link=publication.Resources.find(l=>{if(l.Href===relativePath){return true}return false})}if(!link){if(publication.Spine){link=publication.Spine.find(l=>{if(l.Href===relativePath){return true}return false})}}if(!link){const err="Asset not declared in publication spine/resources!"+relativePath;debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}}let mediaType=mime.lookup(pathInZip);if(link&&link.TypeLink){mediaType=link.TypeLink}const isText=mediaType&&(mediaType.indexOf("text/")===0||mediaType.indexOf("application/xhtml")===0||mediaType.indexOf("application/xml")===0||mediaType.indexOf("application/json")===0||mediaType.indexOf("application/svg")===0||mediaType.indexOf("application/smil")===0||mediaType.indexOf("+json")>0||mediaType.indexOf("+smil")>0||mediaType.indexOf("+svg")>0||mediaType.indexOf("+xhtml")>0||mediaType.indexOf("+xml")>0);const isEncrypted=link&&link.Properties&&link.Properties.Encrypted;const isObfuscatedFont=isEncrypted&&link&&(link.Properties.Encrypted.Algorithm==="http://ns.adobe.com/pdf/enc#RC"||link.Properties.Encrypted.Algorithm==="http://www.idpf.org/2008/embedding");const isPartialByteRangeRequest=req.headers&&req.headers.range?true:false;let partialByteBegin=0;let partialByteEnd=-1;let partialByteLength=0;if(isPartialByteRangeRequest){debug(req.headers.range);const ranges=RangeUtils_1.parseRangeHeader(req.headers.range);if(ranges&&ranges.length){if(ranges.length>1){const err="Too many HTTP ranges: "+req.headers.range;debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}partialByteBegin=ranges[0].begin;partialByteEnd=ranges[0].end;if(partialByteBegin<0){partialByteBegin=0}}}let zipStream_;try{zipStream_=isPartialByteRangeRequest&&!isEncrypted?await zip.entryStreamRangePromise(pathInZip,partialByteBegin,partialByteEnd):await zip.entryStreamPromise(pathInZip)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}if(isEncrypted&&(isObfuscatedFont||!server.disableDecryption)&&link){let decryptFail=false;let transformedStream;try{transformedStream=await transformer_1.Transformers.tryStream(publication,link,zipStream_,isPartialByteRangeRequest,partialByteBegin,partialByteEnd)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}if(transformedStream){zipStream_=transformedStream}else{decryptFail=true}if(decryptFail){const err="Encryption scheme not supported.";debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}}if(partialByteEnd<0){partialByteEnd=zipStream_.length-1}partialByteLength=isPartialByteRangeRequest?partialByteEnd-partialByteBegin+1:zipStream_.length;if(isShow){let zipData;try{zipData=await BufferUtils_1.streamToBufferPromise(zipStream_.stream)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}if(zipData){debug("CHECK: "+zipStream_.length+" ==> "+zipData.length)}res.status(200).send("<html><body>"+"<h1>"+path.basename(pathBase64Str)+"</h1>"+"<h2>"+mediaType+"</h2>"+(isText&&zipData?"<p><pre>"+zipData.toString("utf8").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</pre></p>":"<p>BINARY</p>")+"</body></html>");return}server.setResponseCORS(res);res.setHeader("Cache-Control","public,max-age=86400");if(mediaType){res.set("Content-Type",mediaType)}res.setHeader("Accept-Ranges","bytes");if(isPartialByteRangeRequest){res.setHeader("Content-Length",`${partialByteLength}`);const rangeHeader=`bytes ${partialByteBegin}-${partialByteEnd}/${zipStream_.length}`;res.setHeader("Content-Range",rangeHeader);res.status(206)}else{res.setHeader("Content-Length",`${zipStream_.length}`);res.status(200)}if(isHead){res.end()}else{zipStream_.stream.pipe(res).on("close",()=>{res.end()})}});routerPathBase64.param("asset",(req,_res,next,value,_name)=>{req.asset=value;next()});routerPathBase64.use("/:pathBase64/:asset(*)",routerAssets)}exports.serverAssets=serverAssets},{"../_utils/http/RangeUtils":2,"../_utils/stream/BufferUtils":5,"../transform/transformer":136,debug:267,express:283,"mime-types":429,path:undefined}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const fs=require("fs");const path=require("path");const debug_=require("debug");const filehound=require("filehound");const lcp_1=require("../parser/epub/lcp");const init_globals_1=require("../init-globals");const server_1=require("./server");init_globals_1.initGlobals();lcp_1.setLcpNativePluginPath(path.join(process.cwd(),"LCP","lcp.node"));const debug=debug_("r2:server:cli");debug(`process.cwd(): ${process.cwd()}`);debug(`__dirname: ${__dirname}`);const args=process.argv.slice(2);debug("process.argv.slice(2): %o",args);if(!args[0]){debug("FILEPATH ARGUMENT IS MISSING.");process.exit(1)}const argPath=args[0].trim();let filePath=argPath;debug(`path: ${filePath}`);if(!fs.existsSync(filePath)){filePath=path.join(__dirname,argPath);debug(`path: ${filePath}`);if(!fs.existsSync(filePath)){filePath=path.join(process.cwd(),argPath);debug(`path: ${filePath}`);if(!fs.existsSync(filePath)){debug("FILEPATH DOES NOT EXIST.");process.exit(1)}}}filePath=fs.realpathSync(filePath);debug(`path (normalized): ${filePath}`);const stats=fs.lstatSync(filePath);if(!stats.isFile()&&!stats.isDirectory()){debug("FILEPATH MUST BE FILE OR DIRECTORY.");process.exit(1)}if(stats.isDirectory()){debug("Analysing directory...");(async()=>{const files=await filehound.create().discard("node_modules").depth(5).paths(filePath).ext([".epub",".epub3",".cbz"]).find();const server=new server_1.Server;server.addPublications(files);server.start(0)})()}else{const server=new server_1.Server;server.addPublications([filePath]);server.start(0)}},{"../init-globals":47,"../parser/epub/lcp":107,"./server":46,debug:267,filehound:308,fs:undefined,path:undefined}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const crypto=require("crypto");const path=require("path");const epub_1=require("../parser/epub");const UrlUtils_1=require("../_utils/http/UrlUtils");const JsonUtils_1=require("../_utils/JsonUtils");const css2json=require("css2json");const debug_=require("debug");const express=require("express");const jsonMarkup=require("json-markup");const ta_json_1=require("ta-json");const debug=debug_("r2:server:manifestjson");function serverManifestJson(server,routerPathBase64){const jsonStyle=`\n.json-markup {\n    line-height: 17px;\n    font-size: 13px;\n    font-family: monospace;\n    white-space: pre;\n}\n.json-markup-key {\n    font-weight: bold;\n}\n.json-markup-bool {\n    color: firebrick;\n}\n.json-markup-string {\n    color: green;\n}\n.json-markup-null {\n    color: gray;\n}\n.json-markup-number {\n    color: blue;\n}\n`;const routerManifestJson=express.Router({strict:false});routerManifestJson.get(["/","/show/:jsonPath?"],async(req,res)=>{if(!req.params.pathBase64){req.params.pathBase64=req.pathBase64}if(!req.params.lcpPass64){req.params.lcpPass64=req.lcpPass64}const isShow=req.url.indexOf("/show")>=0||req.query.show;if(!req.params.jsonPath&&req.query.show){req.params.jsonPath=req.query.show}const isHead=req.method.toLowerCase()==="head";if(isHead){debug("HEAD !!!!!!!!!!!!!!!!!!!")}const isCanonical=req.query.canonical&&req.query.canonical==="true";const isSecureHttp=req.secure||req.protocol==="https"||req.get("X-Forwarded-Proto")==="https";const pathBase64Str=new Buffer(req.params.pathBase64,"base64").toString("utf8");let publication;try{publication=await server.loadOrGetCachedPublication(pathBase64Str)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}if(req.params.lcpPass64&&!server.disableDecryption){const lcpPass=new Buffer(req.params.lcpPass64,"base64").toString("utf8");if(publication.LCP){let okay=false;try{okay=await publication.LCP.setUserPassphrase(lcpPass)}catch(err){debug(err);okay=false}if(!okay){const errMsg="FAIL publication.LCP.setUserPassphrase()";debug(errMsg);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+errMsg+"</p></body></html>");return}}}const rootUrl=(isSecureHttp?"https://":"http://")+req.headers.host+"/pub/"+(req.params.lcpPass64?server.lcpBeginToken+UrlUtils_1.encodeURIComponent_RFC3986(req.params.lcpPass64)+server.lcpEndToken:"")+UrlUtils_1.encodeURIComponent_RFC3986(req.params.pathBase64);const manifestURL=rootUrl+"/"+"manifest.json";const selfLink=publication.searchLinkByRel("self");if(!selfLink){publication.AddLink("application/webpub+json",["self"],manifestURL,false)}function absoluteURL(href){return rootUrl+"/"+href}function absolutizeURLs(jsonObj){JsonUtils_1.traverseJsonObjects(jsonObj,obj=>{if(obj.href&&typeof obj.href==="string"&&!UrlUtils_1.isHTTP(obj.href)){obj.href=absoluteURL(obj.href)}if(obj["media-overlay"]&&typeof obj["media-overlay"]==="string"&&!UrlUtils_1.isHTTP(obj["media-overlay"])){obj["media-overlay"]=absoluteURL(obj["media-overlay"])}})}let hasMO=false;if(publication.Spine){const link=publication.Spine.find(l=>{if(l.Properties&&l.Properties.MediaOverlay){return true}return false});if(link){hasMO=true}}if(hasMO){const moLink=publication.searchLinkByRel("media-overlay");if(!moLink){const moURL=epub_1.mediaOverlayURLPath+"?"+epub_1.mediaOverlayURLParam+"={path}";publication.AddLink("application/vnd.readium.mo+json",["media-overlay"],moURL,true)}}let coverImage;const coverLink=publication.GetCover();if(coverLink){coverImage=coverLink.Href;if(coverImage&&!UrlUtils_1.isHTTP(coverImage)){coverImage=absoluteURL(coverImage)}}if(isShow){let objToSerialize=null;if(req.params.jsonPath){switch(req.params.jsonPath){case"all":{objToSerialize=publication;break}case"cover":{objToSerialize=publication.GetCover();break}case"mediaoverlays":{try{objToSerialize=await epub_1.getAllMediaOverlays(publication)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}break}case"spine":{objToSerialize=publication.Spine;break}case"pagelist":{objToSerialize=publication.PageList;break}case"landmarks":{objToSerialize=publication.Landmarks;break}case"links":{objToSerialize=publication.Links;break}case"resources":{objToSerialize=publication.Resources;break}case"toc":{objToSerialize=publication.TOC;break}case"metadata":{objToSerialize=publication.Metadata;break}default:{objToSerialize=null}}}else{objToSerialize=publication}if(!objToSerialize){objToSerialize={}}const jsonObj=ta_json_1.JSON.serialize(objToSerialize);absolutizeURLs(jsonObj);const jsonPretty=jsonMarkup(jsonObj,css2json(jsonStyle));res.status(200).send("<html>"+'<head><script type="application/ld+json" href="'+manifestURL+'"><\/script></head>'+"<body>"+"<h1>"+path.basename(pathBase64Str)+"</h1>"+(coverImage?'<img src="'+coverImage+'" alt=""/>':"")+"<hr><p><pre>"+jsonPretty+"</pre></p>"+"</body></html>")}else{server.setResponseCORS(res);res.set("Content-Type","application/webpub+json; charset=utf-8");const publicationJsonObj=ta_json_1.JSON.serialize(publication);if(isCanonical){if(publicationJsonObj.links){delete publicationJsonObj.links}}const publicationJsonStr=isCanonical?global.JSON.stringify(JsonUtils_1.sortObject(publicationJsonObj),null,""):global.JSON.stringify(publicationJsonObj,null,"  ");const checkSum=crypto.createHash("sha256");checkSum.update(publicationJsonStr);const hash=checkSum.digest("hex");const match=req.header("If-None-Match");if(match===hash){debug("manifest.json cache");res.status(304);res.end();return}res.setHeader("ETag",hash);const links=publication.GetPreFetchResources();if(links&&links.length){let prefetch="";links.forEach(l=>{const href=absoluteURL(l.Href);prefetch+="<"+href+">;"+"rel=prefetch,"});res.setHeader("Link",prefetch)}res.status(200);if(isHead){res.end()}else{res.send(publicationJsonStr)}}});routerPathBase64.use("/:pathBase64/manifest.json",routerManifestJson)}exports.serverManifestJson=serverManifestJson},{"../_utils/JsonUtils":1,"../_utils/http/UrlUtils":3,"../parser/epub":87,crypto:undefined,css2json:264,debug:267,express:283,"json-markup":406,path:undefined,"ta-json":541}],39:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const crypto=require("crypto");const path=require("path");const epub_1=require("../parser/epub");const UrlUtils_1=require("../_utils/http/UrlUtils");const JsonUtils_1=require("../_utils/JsonUtils");const css2json=require("css2json");const debug_=require("debug");const express=require("express");const jsonMarkup=require("json-markup");const ta_json_1=require("ta-json");const debug=debug_("r2:server:mediaoverlays");function serverMediaOverlays(server,routerPathBase64){const jsonStyle=`\n.json-markup {\n    line-height: 17px;\n    font-size: 13px;\n    font-family: monospace;\n    white-space: pre;\n}\n.json-markup-key {\n    font-weight: bold;\n}\n.json-markup-bool {\n    color: firebrick;\n}\n.json-markup-string {\n    color: green;\n}\n.json-markup-null {\n    color: gray;\n}\n.json-markup-number {\n    color: blue;\n}\n`;const routerMediaOverlays=express.Router({strict:false});routerMediaOverlays.get(["/","/show/:"+epub_1.mediaOverlayURLParam+"?"],async(req,res)=>{if(!req.params.pathBase64){req.params.pathBase64=req.pathBase64}if(!req.params.lcpPass64){req.params.lcpPass64=req.lcpPass64}const isShow=req.url.indexOf("/show")>=0||req.query.show;const isHead=req.method.toLowerCase()==="head";if(isHead){debug("HEAD !!!!!!!!!!!!!!!!!!!")}const isCanonical=req.query.canonical&&req.query.canonical==="true";const isSecureHttp=req.secure||req.protocol==="https"||req.get("X-Forwarded-Proto")==="https";const pathBase64Str=new Buffer(req.params.pathBase64,"base64").toString("utf8");let publication;try{publication=await server.loadOrGetCachedPublication(pathBase64Str)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}const rootUrl=(isSecureHttp?"https://":"http://")+req.headers.host+"/pub/"+(req.params.lcpPass64?server.lcpBeginToken+UrlUtils_1.encodeURIComponent_RFC3986(req.params.lcpPass64)+server.lcpEndToken:"")+UrlUtils_1.encodeURIComponent_RFC3986(req.params.pathBase64);function absoluteURL(href){return rootUrl+"/"+href}function absolutizeURLs(jsonObject){JsonUtils_1.traverseJsonObjects(jsonObject,obj=>{if(obj.text&&typeof obj.text==="string"&&!UrlUtils_1.isHTTP(obj.text)){obj.text=absoluteURL(obj.text)}if(obj.audio&&typeof obj.audio==="string"&&!UrlUtils_1.isHTTP(obj.audio)){obj.audio=absoluteURL(obj.audio)}})}let objToSerialize=null;const resource=isShow?req.query.show?req.query.show:req.params[epub_1.mediaOverlayURLParam]:req.query[epub_1.mediaOverlayURLParam];if(resource&&resource!=="all"){try{objToSerialize=await epub_1.getMediaOverlay(publication,resource)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}}else{try{objToSerialize=await epub_1.getAllMediaOverlays(publication)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}}if(!objToSerialize){objToSerialize=[]}let jsonObj=ta_json_1.JSON.serialize(objToSerialize);jsonObj={"media-overlay":jsonObj};if(isShow){absolutizeURLs(jsonObj);const jsonPretty=jsonMarkup(jsonObj,css2json(jsonStyle));res.status(200).send("<html><body>"+"<h1>"+path.basename(pathBase64Str)+"</h1>"+"<p><pre>"+jsonPretty+"</pre></p>"+"</body></html>")}else{server.setResponseCORS(res);res.set("Content-Type","application/vnd.readium.mo+json; charset=utf-8");const jsonStr=isCanonical?global.JSON.stringify(JsonUtils_1.sortObject(jsonObj),null,""):global.JSON.stringify(jsonObj,null,"  ");const checkSum=crypto.createHash("sha256");checkSum.update(jsonStr);const hash=checkSum.digest("hex");const match=req.header("If-None-Match");if(match===hash){debug("smil cache");res.status(304);res.end();return}res.setHeader("ETag",hash);res.status(200);if(isHead){res.end()}else{res.send(jsonStr)}}});routerPathBase64.use("/:pathBase64/"+epub_1.mediaOverlayURLPath,routerMediaOverlays)}exports.serverMediaOverlays=serverMediaOverlays},{"../_utils/JsonUtils":1,"../_utils/http/UrlUtils":3,"../parser/epub":87,crypto:undefined,css2json:264,debug:267,express:283,"json-markup":406,path:undefined,"ta-json":541}],40:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const opds_1=require("../opds/opds1/opds");const opds_entry_1=require("../opds/opds1/opds-entry");const UrlUtils_1=require("../_utils/http/UrlUtils");const BufferUtils_1=require("../_utils/stream/BufferUtils");const xml_js_mapper_1=require("../_utils/xml-js-mapper");const debug_=require("debug");const express=require("express");const morgan=require("morgan");const request=require("request");const requestPromise=require("request-promise-native");const xmldom=require("xmldom");const server_trailing_slash_redirect_1=require("./server-trailing-slash-redirect");const debug=debug_("r2:server:opds");function serverOPDS(_server,topRouter){const routerOPDS=express.Router({strict:false});routerOPDS.use(morgan("combined"));routerOPDS.use(server_trailing_slash_redirect_1.trailingSlashRedirect);routerOPDS.get("/",(_req,res)=>{let html="<html><head>";html+=`<script type="text/javascript">function encodeURIComponent_RFC3986(str) { `+`return encodeURIComponent(str).replace(/[!'()*]/g, (c) => { `+`return "%" + c.charCodeAt(0).toString(16); }); }`+`function go(evt) {`+`if (evt) { evt.preventDefault(); } var url = `+`location.origin +`+` '/opds/' +`+` encodeURIComponent_RFC3986(document.getElementById("url").value);`+`location.href = url;}<\/script>`;html+="</head>";html+="<body><h1>OPDS feed browser</h1>";html+=`<form onsubmit="go();return false;">`+`<input type="text" name="url" id="url" size="80">`+`<input type="submit" value="Go!"></form>`;html+="</body></html>";res.status(200).send(html)});routerOPDS.param("urlEncoded",(req,_res,next,value,_name)=>{req.urlEncoded=value;next()});routerOPDS.get("/:urlEncoded(*)",async(req,res)=>{if(!req.params.urlEncoded){req.params.urlEncoded=req.urlEncoded}const urlDecoded=req.params.urlEncoded;debug(urlDecoded);const failure=err=>{debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>")};const success=async response=>{if(response.statusCode&&(response.statusCode<200||response.statusCode>=300)){failure("HTTP CODE "+response.statusCode);return}let responseData;try{responseData=await BufferUtils_1.streamToBufferPromise(response)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}const responseStr=responseData.toString("utf8");const responseXml=(new xmldom.DOMParser).parseFromString(responseStr);const isEntry=responseXml.documentElement.localName==="entry";let opds;let opdsEntry;if(isEntry){opdsEntry=xml_js_mapper_1.XML.deserialize(responseXml,opds_entry_1.Entry)}else{opds=xml_js_mapper_1.XML.deserialize(responseXml,opds_1.OPDS)}let html="<html><head>";html+="</head>";html+="<body><h1>"+urlDecoded+"</h1>";if(opds&&opds.Title){html+="<h2>"+opds.Title+"</h2>"}if(opdsEntry&&opdsEntry.Title){html+="<h2>"+opdsEntry.Title+"</h2>"}if(opds&&opds.Icon){const iconUrl=UrlUtils_1.ensureAbsolute(urlDecoded,opds.Icon);html+="<img src='"+iconUrl+"' alt='' />"}const links=opds?opds.Links:opdsEntry?opdsEntry.Links:undefined;if(links&&links.length){html+="<p>";links.forEach(link=>{if(link.Type&&(link.Type.indexOf("opds-catalog")>=0||link.Type==="application/atom+xml")){const linkUrl=UrlUtils_1.ensureAbsolute(urlDecoded,link.Href);const opdsUrl=req.originalUrl.substr(0,req.originalUrl.indexOf("/opds/"))+"/opds/"+UrlUtils_1.encodeURIComponent_RFC3986(linkUrl);html+="<a href='"+opdsUrl+"'>"+link.Href+"</a> (TITLE: "+link.Title+") [REL: "+link.Rel+"]<br/>"}});html+="</p>"}function processEntry(entry){html+="<hr/>";html+="<div>";if(opds){html+="<h3>"+entry.Title+"</h3>"}if(entry.Summary){if(!entry.SummaryType||entry.SummaryType==="text"){html+="<strong>"+entry.Summary+"</strong>"}else if(entry.SummaryType==="html"){html+="<div>"+entry.Summary+"</div>"}html+="<br/>"}if(entry.Content){if(!entry.ContentType||entry.ContentType==="text"){html+="<strong>"+entry.Content+"</strong>"}else if(entry.ContentType==="html"){html+="<div>"+entry.Content+"</div>"}html+="<br/>"}if(entry.Links&&entry.Links.length){let image;let imageThumbnail;let epub;entry.Links.forEach(link=>{if(link.Type==="application/epub+zip"){epub=link.Href}if(link.HasRel("http://opds-spec.org/image")||link.HasRel("x-stanza-cover-image")){image=link.Href}if(link.HasRel("http://opds-spec.org/image/thumbnail")||link.HasRel("http://opds-spec.org/thumbnail")||link.HasRel("x-stanza-cover-image-thumbnail")){imageThumbnail=link.Href}if(opds&&link.Type&&(link.Type.indexOf("opds-catalog")>=0||link.Type==="application/atom+xml")){const linkUrl=UrlUtils_1.ensureAbsolute(urlDecoded,link.Href);const opdsUrl=req.originalUrl.substr(0,req.originalUrl.indexOf("/opds/"))+"/opds/"+UrlUtils_1.encodeURIComponent_RFC3986(linkUrl);html+="<a href='"+opdsUrl+"'>"+link.Href+"</a> (TITLE: "+link.Title+") [REL: "+link.Rel+"]<br/>"}});if(imageThumbnail){const imageThumbnailUrl=UrlUtils_1.ensureAbsolute(urlDecoded,imageThumbnail);if(image){const imageUrl=UrlUtils_1.ensureAbsolute(urlDecoded,image);html+="<a href='"+imageUrl+"'><img src='"+imageThumbnailUrl+"' alt='' /></a><br/>"}else{html+="<img src='"+imageThumbnailUrl+"' alt='' /><br/>"}}else if(image){const imageUrl=UrlUtils_1.ensureAbsolute(urlDecoded,image);html+="<img src='"+imageUrl+"' alt='' /><br/>"}if(epub){const epub_=UrlUtils_1.ensureAbsolute(urlDecoded,epub);const epubUrl=req.originalUrl.substr(0,req.originalUrl.indexOf("/opds/"))+"/url/"+UrlUtils_1.encodeURIComponent_RFC3986(epub_);html+="<strong><a href='"+epubUrl+"'>"+epub+"</a></strong>"}}html+="</div>"}if(opds&&opds.Entries&&opds.Entries.length){opds.Entries.forEach(entry=>{processEntry(entry)})}if(opdsEntry){processEntry(opdsEntry)}html+="</body></html>";res.status(200).send(html)};const needsStreamingResponse=true;if(needsStreamingResponse){request.get({headers:{},method:"GET",uri:urlDecoded}).on("response",success).on("error",failure)}else{let response;try{response=await requestPromise({headers:{},method:"GET",resolveWithFullResponse:true,uri:urlDecoded})}catch(err){failure(err);return}await success(response)}});topRouter.use("/opds",routerOPDS)}exports.serverOPDS=serverOPDS},{"../_utils/http/UrlUtils":3,"../_utils/stream/BufferUtils":5,"../_utils/xml-js-mapper":28,"../opds/opds1/opds":68,"../opds/opds1/opds-entry":64,"./server-trailing-slash-redirect":44,debug:267,express:283,morgan:434,request:469,"request-promise-native":468,xmldom:573}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const converter_1=require("../opds/converter");const opds_1=require("../opds/opds1/opds");const UrlUtils_1=require("../_utils/http/UrlUtils");const JsonUtils_1=require("../_utils/JsonUtils");const BufferUtils_1=require("../_utils/stream/BufferUtils");const xml_js_mapper_1=require("../_utils/xml-js-mapper");const css2json=require("css2json");const debug_=require("debug");const express=require("express");const jsonMarkup=require("json-markup");const morgan=require("morgan");const request=require("request");const requestPromise=require("request-promise-native");const ta_json_1=require("ta-json");const xmldom=require("xmldom");const server_trailing_slash_redirect_1=require("./server-trailing-slash-redirect");const debug=debug_("r2:server:opds");function serverOPDS12(_server,topRouter){const jsonStyle=`\n.json-markup {\n    line-height: 17px;\n    font-size: 13px;\n    font-family: monospace;\n    white-space: pre;\n}\n.json-markup-key {\n    font-weight: bold;\n}\n.json-markup-bool {\n    color: firebrick;\n}\n.json-markup-string {\n    color: green;\n}\n.json-markup-null {\n    color: gray;\n}\n.json-markup-number {\n    color: blue;\n}\n`;const routerOPDS12=express.Router({strict:false});routerOPDS12.use(morgan("combined"));routerOPDS12.use(server_trailing_slash_redirect_1.trailingSlashRedirect);routerOPDS12.get("/",(_req,res)=>{let html="<html><head>";html+=`<script type="text/javascript">function encodeURIComponent_RFC3986(str) { `+`return encodeURIComponent(str).replace(/[!'()*]/g, (c) => { `+`return "%" + c.charCodeAt(0).toString(16); }); }`+`function go(evt) {`+`if (evt) { evt.preventDefault(); } var url = `+`location.origin +`+` '/opds12/' +`+` encodeURIComponent_RFC3986(document.getElementById("url").value);`+`location.href = url;}<\/script>`;html+="</head>";html+="<body><h1>OPDS 1 -> 2 converter</h1>";html+=`<form onsubmit="go();return false;">`+`<input type="text" name="url" id="url" size="80">`+`<input type="submit" value="Go!"></form>`;html+="</body></html>";res.status(200).send(html)});routerOPDS12.param("urlEncoded",(req,_res,next,value,_name)=>{req.urlEncoded=value;next()});routerOPDS12.get("/:urlEncoded(*)",async(req,res)=>{if(!req.params.urlEncoded){req.params.urlEncoded=req.urlEncoded}const urlDecoded=req.params.urlEncoded;debug(urlDecoded);const isSecureHttp=req.secure||req.protocol==="https"||req.get("X-Forwarded-Proto")==="https";const rootUrl=(isSecureHttp?"https://":"http://")+req.headers.host;const failure=err=>{debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>")};const success=async response=>{if(response.statusCode&&(response.statusCode<200||response.statusCode>=300)){failure("HTTP CODE "+response.statusCode);return}let responseData;try{responseData=await BufferUtils_1.streamToBufferPromise(response)}catch(err){debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}const responseStr=responseData.toString("utf8");const responseXml=(new xmldom.DOMParser).parseFromString(responseStr);const isEntry=responseXml.documentElement.localName==="entry";let opds1;let opds2;if(isEntry){const err="OPDS Entry as top-level feed, not supported.";debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}else{opds1=xml_js_mapper_1.XML.deserialize(responseXml,opds_1.OPDS);try{opds2=converter_1.convertOpds1ToOpds2(opds1)}catch(err){debug("OPDS 1 -> 2 conversion FAILED");debug(err);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}}const funk=obj=>{if(obj.href&&typeof obj.href==="string"&&obj.type&&obj.type.indexOf("application/atom+xml")>=0||obj.Href&&typeof obj.Href==="string"&&obj.Type&&obj.Type.indexOf("application/atom+xml")>=0){let fullHref=obj.href?obj.href:obj.Href;if(!UrlUtils_1.isHTTP(fullHref)){fullHref=UrlUtils_1.ensureAbsolute(urlDecoded,fullHref)}obj.__href__=rootUrl+req.originalUrl.substr(0,req.originalUrl.indexOf("/opds12/"))+"/opds12/"+UrlUtils_1.encodeURIComponent_RFC3986(fullHref)}};const jsonObjOPDS1=ta_json_1.JSON.serialize(opds1);JsonUtils_1.traverseJsonObjects(jsonObjOPDS1,funk);const jsonObjOPDS2=ta_json_1.JSON.serialize(opds2);JsonUtils_1.traverseJsonObjects(jsonObjOPDS2,funk);const css=css2json(jsonStyle);const jsonPrettyOPDS1=jsonMarkup(jsonObjOPDS1,css);const jsonPrettyOPDS2=jsonMarkup(jsonObjOPDS2,css);res.status(200).send("<html><body>"+"<h1>OPDS2 JSON feed (converted from OPDS1 XML/ATOM)</h1>"+'<h2><a href="'+urlDecoded+'">'+urlDecoded+"</a></h2>"+"<hr>"+'<table border="0" cellpadding="0" cellspacing="0" width="90%" '+'style="table-layout:fixed;width:90%">'+"<thead><tr><th>OPDS1</th><th>OPDS2</th></tr></thead>"+"<tbody><tr>"+'<td valign="top" width="50%">'+'<div style="overflow-x: auto;margin:0;padding:0;width:100%;height:auto;">'+jsonPrettyOPDS1+"</div></td>"+'<td valign="top" width="50%">'+'<div style="overflow-x: auto;margin:0;padding:0;width:100%;height:auto;">'+jsonPrettyOPDS2+"</div></td>"+"</tbody></tr>"+"</table>"+"</body></html>")};const needsStreamingResponse=true;if(needsStreamingResponse){request.get({headers:{},method:"GET",uri:urlDecoded}).on("response",success).on("error",failure)}else{let response;try{response=await requestPromise({headers:{},method:"GET",resolveWithFullResponse:true,uri:urlDecoded})}catch(err){failure(err);return}await success(response)}});topRouter.use("/opds12",routerOPDS12)}exports.serverOPDS12=serverOPDS12},{"../_utils/JsonUtils":1,"../_utils/http/UrlUtils":3,"../_utils/stream/BufferUtils":5,"../_utils/xml-js-mapper":28,"../opds/converter":61,"../opds/opds1/opds":68,"./server-trailing-slash-redirect":44,css2json:264,debug:267,express:283,"json-markup":406,morgan:434,request:469,"request-promise-native":468,"ta-json":541,xmldom:573}],42:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const crypto=require("crypto");const opds2_link_1=require("../opds/opds2/opds2-link");const UrlUtils_1=require("../_utils/http/UrlUtils");const JsonUtils_1=require("../_utils/JsonUtils");const css2json=require("css2json");const debug_=require("debug");const express=require("express");const jsonMarkup=require("json-markup");const ta_json_1=require("ta-json");const server_trailing_slash_redirect_1=require("./server-trailing-slash-redirect");const debug=debug_("r2:server:opds2");function serverOPDS2(server,topRouter){const jsonStyle=`\n.json-markup {\n    line-height: 17px;\n    font-size: 13px;\n    font-family: monospace;\n    white-space: pre;\n}\n.json-markup-key {\n    font-weight: bold;\n}\n.json-markup-bool {\n    color: firebrick;\n}\n.json-markup-string {\n    color: green;\n}\n.json-markup-null {\n    color: gray;\n}\n.json-markup-number {\n    color: blue;\n}\n`;const routerOPDS2=express.Router({strict:false});routerOPDS2.get(["/","/show/:jsonPath?"],(req,res)=>{const isShow=req.url.indexOf("/show")>=0||req.query.show;if(!req.params.jsonPath&&req.query.show){req.params.jsonPath=req.query.show}const isCanonical=req.query.canonical&&req.query.canonical==="true";const isSecureHttp=req.secure||req.protocol==="https"||req.get("X-Forwarded-Proto")==="https";const rootUrl=(isSecureHttp?"https://":"http://")+req.headers.host;const selfURL=rootUrl+"/opds2/publications.json";const feed=server.publicationsOPDS();if(!feed){const err="Publications OPDS2 feed not available yet, try again later.";debug(err);res.status(503).send("<html><body><p>Resource temporarily unavailable</p><p>"+err+"</p></body></html>");return}if(!feed.findFirstLinkByRel("self")){feed.Links=[];const selfLink=new opds2_link_1.OPDSLink;selfLink.Href=selfURL;selfLink.TypeLink="application/opds+json";selfLink.AddRel("self");feed.Links.push(selfLink)}function absoluteURL(href){return rootUrl+"/pub/"+href}function absolutizeURLs(jsonObj){JsonUtils_1.traverseJsonObjects(jsonObj,obj=>{if(obj.href&&typeof obj.href==="string"&&!UrlUtils_1.isHTTP(obj.href)){obj.href=absoluteURL(obj.href)}})}if(isShow){let objToSerialize=null;if(req.params.jsonPath){switch(req.params.jsonPath){case"all":{objToSerialize=feed;break}case"metadata":{objToSerialize=feed.Metadata;break}case"links":{objToSerialize=feed.Links;break}case"publications":{objToSerialize=feed.Publications;break}default:{objToSerialize=null}}}else{objToSerialize=feed}if(!objToSerialize){objToSerialize={}}const jsonObj=ta_json_1.JSON.serialize(objToSerialize);absolutizeURLs(jsonObj);const jsonPretty=jsonMarkup(jsonObj,css2json(jsonStyle));res.status(200).send("<html><body>"+"<h1>OPDS2 JSON feed</h1>"+"<hr><p><pre>"+jsonPretty+"</pre></p>"+"</body></html>")}else{server.setResponseCORS(res);res.set("Content-Type","application/opds+json; charset=utf-8");const publicationsJsonObj=ta_json_1.JSON.serialize(feed);absolutizeURLs(publicationsJsonObj);const publicationsJsonStr=isCanonical?global.JSON.stringify(JsonUtils_1.sortObject(publicationsJsonObj),null,""):global.JSON.stringify(publicationsJsonObj,null,"  ");const checkSum=crypto.createHash("sha256");checkSum.update(publicationsJsonStr);const hash=checkSum.digest("hex");const match=req.header("If-None-Match");if(match===hash){debug("publications.json cache");res.status(304);res.end();return}res.setHeader("ETag",hash);res.status(200).send(publicationsJsonStr)}});const routerOPDS2_=express.Router({strict:false});routerOPDS2_.use(server_trailing_slash_redirect_1.trailingSlashRedirect);routerOPDS2_.get("/",(req,res)=>{const i=req.originalUrl.indexOf("?");let pathWithoutQuery=req.originalUrl;if(i>=0){pathWithoutQuery=pathWithoutQuery.substr(0,i)}let redirect=pathWithoutQuery+(pathWithoutQuery.substr(-1)==="/"?"":"/")+"publications.json/show";if(i>=0){redirect+=req.originalUrl.substr(i)}debug(`REDIRECT: ${req.originalUrl} ==> ${redirect}`);res.redirect(301,redirect)});routerOPDS2_.use("/publications.json",routerOPDS2);topRouter.use("/opds2",routerOPDS2_)}exports.serverOPDS2=serverOPDS2},{"../_utils/JsonUtils":1,"../_utils/http/UrlUtils":3,"../opds/opds2/opds2-link":76,"./server-trailing-slash-redirect":44,crypto:undefined,css2json:264,debug:267,express:283,"json-markup":406,"ta-json":541}],43:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=require("path");const querystring=require("querystring");const debug_=require("debug");const express=require("express");const morgan=require("morgan");const UrlUtils_1=require("../_utils/http/UrlUtils");const server_trailing_slash_redirect_1=require("./server-trailing-slash-redirect");const debug=debug_("r2:server:pub");function serverPub(server,topRouter){const urlBook="/pub/PATH_BASE64/manifest.json";const urlBookShowAll="./manifest.json/show/all";const urlReaderNYPL="/readerNYPL/?url=PREFIX"+querystring.escape(urlBook);const urlReaderHADRIEN="/readerHADRIEN/?manifest=true&href=PREFIX"+querystring.escape(urlBook);const urlReaderEPUBJS="https://s3.amazonaws.com/epubjs-manifest/examples/manifest.html?href=PREFIZ"+urlBook;const urlReaderHADRIENbasic="https://hadriengardeur.github.io/webpub-manifest/examples/viewer/?manifest=true&href=PREFIX"+querystring.escape(urlBook);const urlReaderREADIUM1="http://readium-2.surge.sh/?epub=PREFIX"+querystring.escape(urlBook);const htmlLanding="<html><body><h1>PATH_STR</h1><h2><a href='"+urlBookShowAll+"'>"+urlBookShowAll+"</a></h2>"+(server.disableReaders?"":"<p>Reader NYPL:<br><a href='"+urlReaderNYPL+"'>"+urlReaderNYPL+"</a></p><p>Reader HADRIEN:<br><a href='"+urlReaderHADRIEN+"'>"+urlReaderHADRIEN+"</a></p><p>Reader EPUB.js:<br><a href='"+urlReaderEPUBJS+"'>"+urlReaderEPUBJS+"</a></p><p>Reader HADRIEN BASIC:<br><a href='"+urlReaderHADRIENbasic+"'>"+urlReaderHADRIENbasic+"</a></p><p>Reader READIUM-1:<br><a href='"+urlReaderREADIUM1+"'>"+urlReaderREADIUM1+"</a></p>")+"</body></html>";const routerPathBase64=express.Router({strict:false});routerPathBase64.use(morgan("combined"));routerPathBase64.use(server_trailing_slash_redirect_1.trailingSlashRedirect);routerPathBase64.param("pathBase64",(req,res,next,value,_name)=>{if(value.indexOf(server.lcpBeginToken)===0&&value.indexOf(server.lcpEndToken)>0){const i=value.indexOf(server.lcpEndToken);const pass64=value.substr(server.lcpBeginToken.length,i-server.lcpBeginToken.length);req.lcpPass64=pass64;value=value.substr(i+server.lcpEndToken.length);req.params.pathBase64=value;debug(value)}const valueStr=new Buffer(value,"base64").toString("utf8");debug(valueStr);if(UrlUtils_1.isHTTP(valueStr)){req.pathBase64=value;next();return}const found=server.getPublications().find(filePath=>{const filePathBase64=new Buffer(filePath).toString("base64");return value===filePathBase64});if(found){req.pathBase64=value;next()}else{res.status(403).send("<html><body><p>Forbidden</p><p>INVALID parameter: <code>"+req.params.pathBase64+"</code></p></body></html>")}});routerPathBase64.get("/:pathBase64",(req,res)=>{if(!req.params.pathBase64){req.params.pathBase64=req.pathBase64}const pathBase64Str=new Buffer(req.params.pathBase64,"base64").toString("utf8");debug(`Publication: ${pathBase64Str}`);const isSecureHttp=req.secure||req.protocol==="https"||req.get("X-Forwarded-Proto")==="https";res.status(200).send(htmlLanding.replace(/PATH_STR/g,path.basename(pathBase64Str)).replace(/PATH_BASE64/g,UrlUtils_1.encodeURIComponent_RFC3986(req.params.pathBase64)).replace(/PREFIX/g,(isSecureHttp?querystring.escape("https://"):querystring.escape("http://"))+req.headers.host).replace(/PREFIZ/g,(isSecureHttp?"https://":"http://")+req.headers.host))});topRouter.use("/pub",routerPathBase64);return routerPathBase64}exports.serverPub=serverPub},{"../_utils/http/UrlUtils":3,"./server-trailing-slash-redirect":44,debug:267,express:283,morgan:434,path:undefined,querystring:undefined}],44:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const debug_=require("debug");const debug=debug_("r2:server:main");function trailingSlashRedirect(req,res,next){const i=req.originalUrl.indexOf("?");let pathWithoutQuery=req.originalUrl;if(i>=0){pathWithoutQuery=pathWithoutQuery.substr(0,i)}if(pathWithoutQuery.substr(-1)==="/"||pathWithoutQuery.indexOf(".")>=0){return next()}let redirect=pathWithoutQuery+"/";if(i>=0){redirect+=req.originalUrl.substr(i)}debug(`REDIRECT: ${req.originalUrl} ==> ${redirect}`);res.redirect(301,redirect)}exports.trailingSlashRedirect=trailingSlashRedirect},{debug:267}],45:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const debug_=require("debug");const express=require("express");const morgan=require("morgan");const server_trailing_slash_redirect_1=require("./server-trailing-slash-redirect");const debug=debug_("r2:server:url");function serverUrl(_server,topRouter){const routerUrl=express.Router({strict:false});routerUrl.use(morgan("combined"));routerUrl.use(server_trailing_slash_redirect_1.trailingSlashRedirect);routerUrl.get("/",(_req,res)=>{let html="<html><head>";html+=`<script type="text/javascript">function encodeURIComponent_RFC3986(str) { `+`return encodeURIComponent(str).replace(/[!'()*]/g, (c) => { `+`return "%" + c.charCodeAt(0).toString(16); }); }`+`function go(evt) {`+`if (evt) { evt.preventDefault(); } var url = `+`location.origin +`+` '/url/' +`+` encodeURIComponent_RFC3986(document.getElementById("url").value);`+`location.href = url;}<\/script>`;html+="</head>";html+="<body><h1>Publication URL</h1>";html+=`<form onsubmit="go();return false;">`+`<input type="text" name="url" id="url" size="80">`+`<input type="submit" value="Go!"></form>`;html+="</body></html>";res.status(200).send(html)});routerUrl.param("urlEncoded",(req,_res,next,value,_name)=>{req.urlEncoded=value;next()});routerUrl.get("/:urlEncoded(*)",(req,res)=>{if(!req.params.urlEncoded){req.params.urlEncoded=req.urlEncoded}const urlDecoded=req.params.urlEncoded;debug(urlDecoded);const urlDecodedBase64=new Buffer(urlDecoded).toString("base64");const redirect=req.originalUrl.substr(0,req.originalUrl.indexOf("/url/"))+"/pub/"+urlDecodedBase64+"/";debug(`REDIRECT: ${req.originalUrl} ==> ${redirect}`);res.redirect(301,redirect)});topRouter.use("/url",routerUrl)}exports.serverUrl=serverUrl},{"./server-trailing-slash-redirect":44,debug:267,express:283,morgan:434}],46:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const child_process=require("child_process");const crypto=require("crypto");const fs=require("fs");const path=require("path");const opds2_1=require("../opds/opds2/opds2");const UrlUtils_1=require("../_utils/http/UrlUtils");const css2json=require("css2json");const debug_=require("debug");const express=require("express");const jsonMarkup=require("json-markup");const ta_json_1=require("ta-json");const tmp_1=require("tmp");const publication_parser_1=require("../parser/publication-parser");const server_assets_1=require("./server-assets");const server_manifestjson_1=require("./server-manifestjson");const server_mediaoverlays_1=require("./server-mediaoverlays");const server_opds_1=require("./server-opds");const server_opds1_2_1=require("./server-opds1-2");const server_opds2_1=require("./server-opds2");const server_pub_1=require("./server-pub");const server_url_1=require("./server-url");const debug=debug_("r2:server:main");const jsonStyle=`\n.json-markup {\n    line-height: 17px;\n    font-size: 13px;\n    font-family: monospace;\n    white-space: pre;\n}\n.json-markup-key {\n    font-weight: bold;\n}\n.json-markup-bool {\n    color: firebrick;\n}\n.json-markup-string {\n    color: green;\n}\n.json-markup-null {\n    color: gray;\n}\n.json-markup-number {\n    color: blue;\n}\n`;class Server{constructor(options){this.lcpBeginToken="*-";this.lcpEndToken="-*";this.disableReaders=options&&options.disableReaders?options.disableReaders:false;this.disableDecryption=options&&options.disableDecryption?options.disableDecryption:false;this.publications=[];this.pathPublicationMap={};this.publicationsOPDSfeed=undefined;this.publicationsOPDSfeedNeedsUpdate=true;this.creatingPublicationsOPDS=false;this.opdsJsonFilePath=tmp_1.tmpNameSync({prefix:"readium2-OPDS2-",postfix:".json"});this.started=false;this.expressApp=express();const staticOptions={etag:false};if(!this.disableReaders){this.expressApp.use("/readerNYPL",express.static("misc/readers/reader-NYPL",staticOptions));this.expressApp.use("/readerHADRIEN",express.static("misc/readers/reader-HADRIEN",staticOptions))}this.expressApp.get("/",(_req,res)=>{let html="<html><body><h1>Publications</h1>";this.publications.forEach(pub=>{const filePathBase64=new Buffer(pub).toString("base64");html+="<p><strong>"+(UrlUtils_1.isHTTP(pub)?pub:path.basename(pub))+"</strong><br> => <a href='./pub/"+UrlUtils_1.encodeURIComponent_RFC3986(filePathBase64)+"'>"+"./pub/"+filePathBase64+"</a></p>"});html+="<h1>OPDS2 feed</h1><p><a href='./opds2'>CLICK HERE</a></p>";html+="<h1>Load HTTP publication URL</h1><p><a href='./url'>CLICK HERE</a></p>";html+="<h1>Browse HTTP OPDS1 feed</h1><p><a href='./opds'>CLICK HERE</a></p>";html+="<h1>Convert OPDS feed v1 to v2</h1><p><a href='./opds12'>CLICK HERE</a></p>";html+="<h1>Server version</h1><p><a href='./version/show'>CLICK HERE</a></p>";html+="</body></html>";res.status(200).send(html)});this.expressApp.get(["/version","/version/show/:jsonPath?"],(req,res)=>{const isShow=req.url.indexOf("/show")>=0||req.query.show;if(!req.params.jsonPath&&req.query.show){req.params.jsonPath=req.query.show}const gitRevJson="../../../gitrev.json";if(!fs.existsSync(path.resolve(path.join(__dirname,gitRevJson)))){const err="Missing Git rev JSON! ";debug(err+gitRevJson);res.status(500).send("<html><body><p>Internal Server Error</p><p>"+err+"</p></body></html>");return}const jsonObj=require(gitRevJson);if(isShow){const jsonPretty=jsonMarkup(jsonObj,css2json(jsonStyle));res.status(200).send("<html><body>"+"<h1>R2-STREAMER-JS VERSION INFO</h1>"+"<hr><p><pre>"+jsonPretty+"</pre></p>"+"</body></html>")}else{this.setResponseCORS(res);res.set("Content-Type","application/json; charset=utf-8");const jsonStr=JSON.stringify(jsonObj,null,"  ");const checkSum=crypto.createHash("sha256");checkSum.update(jsonStr);const hash=checkSum.digest("hex");const match=req.header("If-None-Match");if(match===hash){debug("publications.json cache");res.status(304);res.end();return}res.setHeader("ETag",hash);res.status(200).send(jsonStr)}});server_url_1.serverUrl(this,this.expressApp);server_opds_1.serverOPDS(this,this.expressApp);server_opds2_1.serverOPDS2(this,this.expressApp);server_opds1_2_1.serverOPDS12(this,this.expressApp);const routerPathBase64=server_pub_1.serverPub(this,this.expressApp);server_manifestjson_1.serverManifestJson(this,routerPathBase64);server_mediaoverlays_1.serverMediaOverlays(this,routerPathBase64);server_assets_1.serverAssets(this,routerPathBase64)}expressUse(pathf,func){this.expressApp.use(pathf,func)}expressGet(paths,func){this.expressApp.get(paths,func)}start(port){if(this.started){return this.url()}const p=port||process.env.PORT||3e3;debug(`PORT: ${p} || ${process.env.PORT} || 3000 => ${p}`);this.httpServer=this.expressApp.listen(p,()=>{debug(`http://localhost:${p}`)});this.started=true;return`http://127.0.0.1:${p}`}stop(){if(this.started){this.httpServer.close();this.started=false;this.uncachePublications()}}url(){return this.started?`http://127.0.0.1:${this.httpServer.address().port}`:undefined}setResponseCORS(res){res.setHeader("Access-Control-Allow-Origin","*");res.setHeader("Access-Control-Allow-Methods","GET, HEAD, OPTIONS");res.setHeader("Access-Control-Allow-Headers","Content-Type, Content-Length, Accept-Ranges, Link, Transfer-Encoding")}addPublications(pubs){pubs.forEach(pub=>{if(this.publications.indexOf(pub)<0){this.publicationsOPDSfeedNeedsUpdate=true;this.publications.push(pub)}});return pubs.map(pub=>{const pubid=new Buffer(pub).toString("base64");return`/pub/${pubid}/manifest.json`})}removePublications(pubs){pubs.forEach(pub=>{this.uncachePublication(pub);const i=this.publications.indexOf(pub);if(i>=0){this.publicationsOPDSfeedNeedsUpdate=true;this.publications.splice(i,1)}});return pubs.map(pub=>{const pubid=new Buffer(pub).toString("base64");return`/pub/${pubid}/manifest.json`})}getPublications(){return this.publications}async loadOrGetCachedPublication(filePath){let publication=this.cachedPublication(filePath);if(!publication){try{publication=await publication_parser_1.PublicationParsePromise(filePath)}catch(err){debug(err);return Promise.reject(err)}this.cachePublication(filePath,publication)}return publication}isPublicationCached(filePath){return typeof this.cachedPublication(filePath)!=="undefined"}cachedPublication(filePath){return this.pathPublicationMap[filePath]}cachePublication(filePath,pub){if(!this.isPublicationCached(filePath)){this.pathPublicationMap[filePath]=pub}}uncachePublication(filePath){if(this.isPublicationCached(filePath)){const pub=this.cachedPublication(filePath);if(pub){pub.freeDestroy()}this.pathPublicationMap[filePath]=undefined;delete this.pathPublicationMap[filePath]}}uncachePublications(){Object.keys(this.pathPublicationMap).forEach(filePath=>{this.uncachePublication(filePath)})}publicationsOPDS(){if(this.publicationsOPDSfeedNeedsUpdate){this.publicationsOPDSfeed=undefined;if(fs.existsSync(this.opdsJsonFilePath)){fs.unlinkSync(this.opdsJsonFilePath)}}if(this.publicationsOPDSfeed){return this.publicationsOPDSfeed}debug(`OPDS2.json => ${this.opdsJsonFilePath}`);if(!fs.existsSync(this.opdsJsonFilePath)){if(!this.creatingPublicationsOPDS){this.creatingPublicationsOPDS=true;this.publicationsOPDSfeedNeedsUpdate=false;const jsFile=path.join(__dirname,"opds2-create-cli.js");const args=[jsFile,this.opdsJsonFilePath];this.publications.forEach(pub=>{const filePathBase64=new Buffer(pub).toString("base64");args.push(filePathBase64)});debug(`SPAWN OPDS2-create: ${args[0]}`);const child=child_process.spawn("node",args,{cwd:process.cwd(),env:process.env});child.stdout.on("data",data=>{debug(data.toString())});child.stderr.on("data",data=>{debug(data.toString())})}return undefined}this.creatingPublicationsOPDS=false;const jsonStr=fs.readFileSync(this.opdsJsonFilePath,{encoding:"utf8"});if(!jsonStr){return undefined}const json=global.JSON.parse(jsonStr);this.publicationsOPDSfeed=ta_json_1.JSON.deserialize(json,opds2_1.OPDSFeed);return this.publicationsOPDSfeed}}exports.Server=Server},{"../_utils/http/UrlUtils":3,"../opds/opds2/opds2":83,"../parser/publication-parser":132,"./server-assets":36,"./server-manifestjson":38,"./server-mediaoverlays":39,"./server-opds":40,"./server-opds1-2":41,"./server-opds2":42,"./server-pub":43,"./server-url":45,child_process:undefined,crypto:undefined,css2json:264,debug:267,express:283,fs:undefined,"json-markup":406,path:undefined,"ta-json":541,tmp:546}],47:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const metadata_collection_1=require("./models/metadata-collection");const metadata_collection_json_converter_1=require("./models/metadata-collection-json-converter");const metadata_contributor_1=require("./models/metadata-contributor");const metadata_contributor_json_converter_1=require("./models/metadata-contributor-json-converter");const opds2_collection_1=require("./opds/opds2/opds2-collection");const opds2_collection_json_converter_1=require("./opds/opds2/opds2-collection-json-converter");const ta_json_date_converter_1=require("./_utils/ta-json-date-converter");const xml_js_mapper_1=require("./_utils/xml-js-mapper");const ta_json_1=require("ta-json");function initGlobals(){ta_json_1.propertyConverters.set(Buffer,new ta_json_1.BufferConverter);ta_json_1.propertyConverters.set(Date,new ta_json_date_converter_1.JsonDateConverter);ta_json_1.propertyConverters.set(metadata_contributor_1.Contributor,new metadata_contributor_json_converter_1.JsonContributorConverter);ta_json_1.propertyConverters.set(metadata_collection_1.Collection,new metadata_collection_json_converter_1.JsonCollectionConverter);ta_json_1.propertyConverters.set(opds2_collection_1.OPDSCollection,new opds2_collection_json_converter_1.JsonOPDSCollectionConverter);xml_js_mapper_1.propertyConverters.set(Buffer,new xml_js_mapper_1.BufferConverter);xml_js_mapper_1.propertyConverters.set(Date,new xml_js_mapper_1.DateConverter)}exports.initGlobals=initGlobals},{"./_utils/ta-json-date-converter":7,"./_utils/xml-js-mapper":28,"./models/metadata-collection":51,"./models/metadata-collection-json-converter":50,"./models/metadata-contributor":53,"./models/metadata-contributor-json-converter":52,"./opds/opds2/opds2-collection":71,"./opds/opds2/opds2-collection-json-converter":70,"ta-json":541}],48:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");function timeStrToSeconds(timeStr){if(!timeStr){return 0}let hours=0;let minutes=0;let seconds=0;try{const iMin=timeStr.indexOf("min");if(iMin>0){const minsStr=timeStr.substr(0,iMin);minutes=parseFloat(minsStr)}else{const iMs=timeStr.indexOf("ms");if(iMs>0){const msStr=timeStr.substr(0,iMs);const ms=parseFloat(msStr);seconds=ms/1e3}else{const iS=timeStr.indexOf("s");if(iS>0){const sStr=timeStr.substr(0,iS);seconds=parseFloat(sStr)}else{const iH=timeStr.indexOf("h");if(iH>0){const hStr=timeStr.substr(0,iH);hours=parseFloat(hStr)}else{const arr=timeStr.split(":");if(arr.length===1){seconds=parseFloat(arr[0])}else if(arr.length===2){minutes=parseFloat(arr[0]);seconds=parseFloat(arr[1])}else if(arr.length===3){hours=parseFloat(arr[0]);minutes=parseFloat(arr[1]);seconds=parseFloat(arr[2])}else{console.log("SMIL TIME CLOCK SYNTAX PARSING ERROR ??");console.log(timeStr)}}}}}}catch(err){console.log(err);console.log("SMIL TIME CLOCK SYNTAX PARSING ERROR!");console.log(timeStr);return 0}return hours*3600+minutes*60+seconds}exports.timeStrToSeconds=timeStrToSeconds;let MediaOverlayNode=MediaOverlayNode_1=class MediaOverlayNode{};tslib_1.__decorate([ta_json_1.JsonProperty("text"),tslib_1.__metadata("design:type",String)],MediaOverlayNode.prototype,"Text",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("audio"),tslib_1.__metadata("design:type",String)],MediaOverlayNode.prototype,"Audio",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("role"),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],MediaOverlayNode.prototype,"Role",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("children"),ta_json_1.JsonElementType(MediaOverlayNode_1),tslib_1.__metadata("design:type",Array)],MediaOverlayNode.prototype,"Children",void 0);MediaOverlayNode=MediaOverlayNode_1=tslib_1.__decorate([ta_json_1.JsonObject()],MediaOverlayNode);exports.MediaOverlayNode=MediaOverlayNode;var MediaOverlayNode_1},{"ta-json":541,tslib:554}],49:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const metadata_collection_1=require("./metadata-collection");let BelongsTo=class BelongsTo{};tslib_1.__decorate([ta_json_1.JsonProperty("series"),ta_json_1.JsonElementType(metadata_collection_1.Collection),tslib_1.__metadata("design:type",Array)],BelongsTo.prototype,"Series",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("collection"),ta_json_1.JsonElementType(metadata_collection_1.Collection),tslib_1.__metadata("design:type",Array)],BelongsTo.prototype,"Collection",void 0);BelongsTo=tslib_1.__decorate([ta_json_1.JsonObject()],BelongsTo);exports.BelongsTo=BelongsTo},{"./metadata-collection":51,"ta-json":541,tslib:554}],50:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const ta_json_1=require("ta-json");const metadata_collection_1=require("./metadata-collection");class JsonCollectionConverter{serialize(property){return ta_json_1.JSON.serialize(property)}deserialize(value){if(typeof value==="string"){const c=new metadata_collection_1.Collection;c.Name=value;return c}else{return ta_json_1.JSON.deserialize(value,metadata_collection_1.Collection)}}collapseArrayWithSingleItem(){return true}}exports.JsonCollectionConverter=JsonCollectionConverter},{"./metadata-collection":51,"ta-json":541}],51:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let Collection=class Collection{_OnDeserialized(){if(!this.Name){console.log("Collection.Name is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("name"),tslib_1.__metadata("design:type",String)],Collection.prototype,"Name",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("sort_as"),tslib_1.__metadata("design:type",String)],Collection.prototype,"SortAs",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("identifier"),tslib_1.__metadata("design:type",String)],Collection.prototype,"Identifier",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("position"),tslib_1.__metadata("design:type",Number)],Collection.prototype,"Position",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],Collection.prototype,"_OnDeserialized",null);Collection=tslib_1.__decorate([ta_json_1.JsonObject()],Collection);exports.Collection=Collection},{"ta-json":541,tslib:554}],52:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const ta_json_1=require("ta-json");const metadata_contributor_1=require("./metadata-contributor");class JsonContributorConverter{serialize(property){return ta_json_1.JSON.serialize(property)}deserialize(value){if(typeof value==="string"){const c=new metadata_contributor_1.Contributor;c.Name=value;return c}else{return ta_json_1.JSON.deserialize(value,metadata_contributor_1.Contributor)}}collapseArrayWithSingleItem(){return true}}exports.JsonContributorConverter=JsonContributorConverter},{"./metadata-contributor":53,"ta-json":541}],53:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let Contributor=class Contributor{};tslib_1.__decorate([ta_json_1.JsonProperty("name"),tslib_1.__metadata("design:type",Object)],Contributor.prototype,"Name",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("sort_as"),tslib_1.__metadata("design:type",String)],Contributor.prototype,"SortAs",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("identifier"),tslib_1.__metadata("design:type",String)],Contributor.prototype,"Identifier",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("role"),tslib_1.__metadata("design:type",String)],Contributor.prototype,"Role",void 0);Contributor=tslib_1.__decorate([ta_json_1.JsonObject()],Contributor);exports.Contributor=Contributor},{"ta-json":541,tslib:554}],54:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let Encrypted=class Encrypted{constructor(){this.DecryptedLengthBeforeInflate=-1;this.CypherBlockPadding=-1}};tslib_1.__decorate([ta_json_1.JsonProperty("scheme"),tslib_1.__metadata("design:type",String)],Encrypted.prototype,"Scheme",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("profile"),tslib_1.__metadata("design:type",String)],Encrypted.prototype,"Profile",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("algorithm"),tslib_1.__metadata("design:type",String)],Encrypted.prototype,"Algorithm",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("compression"),tslib_1.__metadata("design:type",String)],Encrypted.prototype,"Compression",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("original-length"),tslib_1.__metadata("design:type",Number)],Encrypted.prototype,"OriginalLength",void 0);Encrypted=tslib_1.__decorate([ta_json_1.JsonObject()],Encrypted);exports.Encrypted=Encrypted},{"ta-json":541,tslib:554}],55:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let MediaOverlay=class MediaOverlay{};tslib_1.__decorate([ta_json_1.JsonProperty("active-class"),tslib_1.__metadata("design:type",String)],MediaOverlay.prototype,"ActiveClass",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("playback-active-class"),tslib_1.__metadata("design:type",String)],MediaOverlay.prototype,"PlaybackActiveClass",void 0);MediaOverlay=tslib_1.__decorate([ta_json_1.JsonObject()],MediaOverlay);exports.MediaOverlay=MediaOverlay},{"ta-json":541,tslib:554}],56:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const metadata_encrypted_1=require("./metadata-encrypted");let Properties=class Properties{};tslib_1.__decorate([ta_json_1.JsonProperty("contains"),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],Properties.prototype,"Contains",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("layout"),tslib_1.__metadata("design:type",String)],Properties.prototype,"Layout",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("media-overlay"),tslib_1.__metadata("design:type",String)],Properties.prototype,"MediaOverlay",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("orientation"),tslib_1.__metadata("design:type",String)],Properties.prototype,"Orientation",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("overflow"),tslib_1.__metadata("design:type",String)],Properties.prototype,"Overflow",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("page"),tslib_1.__metadata("design:type",String)],Properties.prototype,"Page",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("spread"),tslib_1.__metadata("design:type",String)],Properties.prototype,"Spread",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("encrypted"),tslib_1.__metadata("design:type",metadata_encrypted_1.Encrypted)],Properties.prototype,"Encrypted",void 0);Properties=tslib_1.__decorate([ta_json_1.JsonObject()],Properties);exports.Properties=Properties},{"./metadata-encrypted":54,"ta-json":541,tslib:554}],57:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let Subject=class Subject{_OnDeserialized(){if(!this.Name){console.log("Subject.Name is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("name"),tslib_1.__metadata("design:type",String)],Subject.prototype,"Name",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("sort_as"),tslib_1.__metadata("design:type",String)],Subject.prototype,"SortAs",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("scheme"),tslib_1.__metadata("design:type",String)],Subject.prototype,"Scheme",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("code"),tslib_1.__metadata("design:type",String)],Subject.prototype,"Code",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],Subject.prototype,"_OnDeserialized",null);Subject=tslib_1.__decorate([ta_json_1.JsonObject()],Subject);exports.Subject=Subject},{"ta-json":541,tslib:554}],58:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const metadata_belongsto_1=require("./metadata-belongsto");const metadata_contributor_1=require("./metadata-contributor");const metadata_media_overlay_1=require("./metadata-media-overlay");const metadata_properties_1=require("./metadata-properties");const metadata_subject_1=require("./metadata-subject");let Metadata=class Metadata{_OnDeserialized(){if(!this.Title){console.log("Metadata.Title is not set!")}if(!this.Identifier){console.log("Metadata.Identifier is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("@type"),tslib_1.__metadata("design:type",String)],Metadata.prototype,"RDFType",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("title"),tslib_1.__metadata("design:type",Object)],Metadata.prototype,"Title",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("identifier"),tslib_1.__metadata("design:type",String)],Metadata.prototype,"Identifier",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("author"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Author",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("translator"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Translator",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("editor"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Editor",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("artist"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Artist",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("illustrator"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Illustrator",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("letterer"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Letterer",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("penciler"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Penciler",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("colorist"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Colorist",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("inker"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Inker",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("narrator"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Narrator",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("contributor"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Contributor",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("publisher"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Publisher",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("imprint"),ta_json_1.JsonElementType(metadata_contributor_1.Contributor),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Imprint",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("language"),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Language",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("modified"),tslib_1.__metadata("design:type",Date)],Metadata.prototype,"Modified",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("published"),tslib_1.__metadata("design:type",Date)],Metadata.prototype,"PublicationDate",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("description"),tslib_1.__metadata("design:type",String)],Metadata.prototype,"Description",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("direction"),tslib_1.__metadata("design:type",String)],Metadata.prototype,"Direction",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("rendition"),tslib_1.__metadata("design:type",metadata_properties_1.Properties)],Metadata.prototype,"Rendition",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("source"),tslib_1.__metadata("design:type",String)],Metadata.prototype,"Source",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("epub-type"),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"EpubType",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("rights"),tslib_1.__metadata("design:type",String)],Metadata.prototype,"Rights",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("subject"),ta_json_1.JsonElementType(metadata_subject_1.Subject),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Subject",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("belongs_to"),tslib_1.__metadata("design:type",metadata_belongsto_1.BelongsTo)],Metadata.prototype,"BelongsTo",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("duration"),tslib_1.__metadata("design:type",Number)],Metadata.prototype,"Duration",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("media-overlay"),tslib_1.__metadata("design:type",metadata_media_overlay_1.MediaOverlay)],Metadata.prototype,"MediaOverlay",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],Metadata.prototype,"_OnDeserialized",null);Metadata=tslib_1.__decorate([ta_json_1.JsonObject()],Metadata);exports.Metadata=Metadata},{"./metadata-belongsto":49,"./metadata-contributor":53,"./metadata-media-overlay":55,"./metadata-properties":56,"./metadata-subject":57,"ta-json":541,tslib:554}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_string_converter_1=require("../_utils/ta-json-string-converter");const ta_json_1=require("ta-json");const metadata_properties_1=require("./metadata-properties");let Link=Link_1=class Link{AddRels(rels){rels.forEach(rel=>{this.AddRel(rel)})}AddRel(rel){if(this.HasRel(rel)){return}if(!this.Rel){this.Rel=[rel]}else{this.Rel.push(rel)}}HasRel(rel){return this.Rel&&this.Rel.indexOf(rel)>=0}_OnDeserialized(){if(!this.Href){console.log("Link.Href is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("href"),tslib_1.__metadata("design:type",String)],Link.prototype,"Href",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("type"),tslib_1.__metadata("design:type",String)],Link.prototype,"TypeLink",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("height"),tslib_1.__metadata("design:type",Number)],Link.prototype,"Height",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("width"),tslib_1.__metadata("design:type",Number)],Link.prototype,"Width",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("title"),tslib_1.__metadata("design:type",String)],Link.prototype,"Title",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("properties"),tslib_1.__metadata("design:type",metadata_properties_1.Properties)],Link.prototype,"Properties",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("duration"),tslib_1.__metadata("design:type",Number)],Link.prototype,"Duration",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("bitrate"),tslib_1.__metadata("design:type",Number)],Link.prototype,"Bitrate",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("templated"),tslib_1.__metadata("design:type",Boolean)],Link.prototype,"Templated",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("children"),ta_json_1.JsonElementType(Link_1),tslib_1.__metadata("design:type",Array)],Link.prototype,"Children",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("rel"),ta_json_1.JsonConverter(ta_json_string_converter_1.JsonStringConverter),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],Link.prototype,"Rel",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],Link.prototype,"_OnDeserialized",null);Link=Link_1=tslib_1.__decorate([ta_json_1.JsonObject()],Link);exports.Link=Link;var Link_1},{"../_utils/ta-json-string-converter":8,"./metadata-properties":56,"ta-json":541,tslib:554}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_string_converter_1=require("../_utils/ta-json-string-converter");const ta_json_1=require("ta-json");const metadata_1=require("./metadata");const publication_link_1=require("./publication-link");let Publication=class Publication{freeDestroy(){console.log("freeDestroy: Publication");if(this.Internal){const zipInternal=this.findFromInternal("zip");if(zipInternal){const zip=zipInternal.Value;zip.freeDestroy()}}}findFromInternal(key){if(this.Internal){const found=this.Internal.find(internal=>{return internal.Name===key});if(found){return found}}return undefined}AddToInternal(key,value){const existing=this.findFromInternal(key);if(existing){existing.Value=value}else{if(!this.Internal){this.Internal=[]}const internal={Name:key,Value:value};this.Internal.push(internal)}}GetCover(){return this.searchLinkByRel("cover")}GetNavDoc(){return this.searchLinkByRel("contents")}searchLinkByRel(rel){if(this.Resources){const ll=this.Resources.find(link=>{return link.HasRel(rel)});if(ll){return ll}}if(this.Spine){const ll=this.Spine.find(link=>{return link.HasRel(rel)});if(ll){return ll}}if(this.Links){const ll=this.Links.find(link=>{return link.HasRel(rel)});if(ll){return ll}}return undefined}AddLink(typeLink,rel,url,templated){const link=new publication_link_1.Link;link.AddRels(rel);link.Href=url;link.TypeLink=typeLink;link.Templated=templated;if(!this.Links){this.Links=[]}this.Links.push(link)}GetPreFetchResources(){const links=[];if(this.Resources){const mediaTypes=["text/css","application/vnd.ms-opentype","text/javascript"];this.Resources.forEach(link=>{mediaTypes.forEach(mediaType=>{if(link.TypeLink===mediaType){links.push(link)}})})}return links}_OnDeserialized(){if(!this.Metadata){console.log("Publication.Metadata is not set!")}if(!this.Links){console.log("Publication.Links is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("@context"),ta_json_1.JsonConverter(ta_json_string_converter_1.JsonStringConverter),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],Publication.prototype,"Context",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("metadata"),tslib_1.__metadata("design:type",metadata_1.Metadata)],Publication.prototype,"Metadata",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("links"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"Links",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("spine"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"Spine",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("resources"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"Resources",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("toc"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"TOC",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("page-list"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"PageList",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("landmarks"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"Landmarks",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("loi"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"LOI",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("loa"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"LOA",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("lov"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"LOV",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("lot"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"LOT",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("images"),ta_json_1.JsonElementType(publication_link_1.Link),tslib_1.__metadata("design:type",Array)],Publication.prototype,"Images",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],Publication.prototype,"_OnDeserialized",null);Publication=tslib_1.__decorate([ta_json_1.JsonObject()],Publication);exports.Publication=Publication},{"../_utils/ta-json-string-converter":8,"./metadata":58,"./publication-link":59,"ta-json":541,tslib:554}],61:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const opds2_1=require("./opds2/opds2");const opds2_belongsTo_1=require("./opds2/opds2-belongsTo");const opds2_collection_1=require("./opds2/opds2-collection");const opds2_contributor_1=require("./opds2/opds2-contributor");const opds2_indirectAcquisition_1=require("./opds2/opds2-indirectAcquisition");const opds2_link_1=require("./opds2/opds2-link");const opds2_metadata_1=require("./opds2/opds2-metadata");const opds2_price_1=require("./opds2/opds2-price");const opds2_properties_1=require("./opds2/opds2-properties");const opds2_publication_1=require("./opds2/opds2-publication");const opds2_publicationMetadata_1=require("./opds2/opds2-publicationMetadata");const opds2_subject_1=require("./opds2/opds2-subject");function convertOpds1ToOpds2(feed){const opds2feed=new opds2_1.OPDSFeed;opds2feed.Metadata=new opds2_metadata_1.OPDSMetadata;opds2feed.Metadata.Title=feed.Title;opds2feed.Metadata.Modified=feed.Updated;if(feed.OpensearchTotalResults){opds2feed.Metadata.NumberOfItems=feed.OpensearchTotalResults}if(feed.OpensearchItemsPerPage){opds2feed.Metadata.ItemsPerPage=feed.OpensearchItemsPerPage}if(feed.Authors){feed.Authors.forEach(aut=>{const cont=new opds2_contributor_1.OPDSContributor;cont.Name=aut.Name;cont.Identifier=aut.Uri;if(!opds2feed.Metadata.Author){opds2feed.Metadata.Author=[]}opds2feed.Metadata.Author.push(cont)})}if(feed.Entries){feed.Entries.forEach(entry=>{let isAnNavigation=true;const collLink=new opds2_link_1.OPDSLink;if(entry.Links){entry.Links.forEach(l=>{if(l.HasRel("http://opds-spec.org/acquisition")){isAnNavigation=false}if(l.HasRel("collection")||l.HasRel("http://opds-spec.org/group")){collLink.AddRel("collection");collLink.Href=l.Href;collLink.Title=l.Title}})}if(!isAnNavigation){const p=new opds2_publication_1.OPDSPublication;p.Metadata=new opds2_publicationMetadata_1.OPDSPublicationMetadata;p.Metadata.Title=entry.Title;if(entry.DcIdentifier){p.Metadata.Identifier=entry.DcIdentifier}else{p.Metadata.Identifier=entry.Id}p.Metadata.Language=[entry.DcLanguage];p.Metadata.Modified=entry.Updated;p.Metadata.PublicationDate=entry.Published;p.Metadata.Rights=entry.DcRights;if(entry.Series){entry.Series.forEach(s=>{const coll=new opds2_collection_1.OPDSCollection;coll.Name=s.Name;coll.Position=s.Position;const link=new opds2_link_1.OPDSLink;link.Href=s.Url;coll.Links=[];coll.Links.push(link);if(!p.Metadata.BelongsTo){p.Metadata.BelongsTo=new opds2_belongsTo_1.OPDSBelongsTo}if(!p.Metadata.BelongsTo.Series){p.Metadata.BelongsTo.Series=[]}p.Metadata.BelongsTo.Series.push(coll)})}if(entry.DcPublisher){const c=new opds2_contributor_1.OPDSContributor;c.Name=entry.DcPublisher;if(!p.Metadata.Publisher){p.Metadata.Publisher=[]}p.Metadata.Publisher.push(c)}if(entry.Categories){entry.Categories.forEach(cat=>{const subj=new opds2_subject_1.OPDSSubject;subj.Code=cat.Term;subj.Name=cat.Label;subj.Scheme=cat.Scheme;if(!p.Metadata.Subject){p.Metadata.Subject=[]}p.Metadata.Subject.push(subj)})}if(entry.Authors){entry.Authors.forEach(aut=>{const cont=new opds2_contributor_1.OPDSContributor;cont.Name=aut.Name;cont.Identifier=aut.Uri;if(!p.Metadata.Author){p.Metadata.Author=[]}p.Metadata.Author.push(cont)})}if(entry.Content){p.Metadata.Description=entry.Content}else if(entry.Summary){p.Metadata.Description=entry.Summary}if(entry.Links){entry.Links.forEach(link=>{const l=new opds2_link_1.OPDSLink;l.Href=link.Href;l.TypeLink=link.Type;l.AddRel(link.Rel);l.Title=link.Title;if(link.OpdsIndirectAcquisitions&&link.OpdsIndirectAcquisitions.length){if(!l.Properties){l.Properties=new opds2_properties_1.OPDSProperties}link.OpdsIndirectAcquisitions.forEach(ia=>{const ind=new opds2_indirectAcquisition_1.OPDSIndirectAcquisition;ind.TypeAcquisition=ia.OpdsIndirectAcquisitionType;if(ia.OpdsIndirectAcquisitions&&ia.OpdsIndirectAcquisitions.length){ia.OpdsIndirectAcquisitions.forEach(iac=>{const cia=new opds2_indirectAcquisition_1.OPDSIndirectAcquisition;cia.TypeAcquisition=iac.OpdsIndirectAcquisitionType;if(!ind.Children){ind.Children=[]}ind.Children.push(cia)})}if(!l.Properties.IndirectAcquisitions){l.Properties.IndirectAcquisitions=[]}l.Properties.IndirectAcquisitions.push(ind)})}if(link.OpdsPrice&&link.OpdsPriceCurrencyCode){if(!l.Properties){l.Properties=new opds2_properties_1.OPDSProperties}l.Properties.Price=new opds2_price_1.OPDSPrice;l.Properties.Price.Currency=link.OpdsPriceCurrencyCode;l.Properties.Price.Value=link.OpdsPrice}if(link.HasRel("collection")||link.HasRel("http://opds-spec.org/group")){}else if(link.HasRel("http://opds-spec.org/image")||link.HasRel("http://opds-spec.org/image/thumbnail")){if(!p.Images){p.Images=[]}p.Images.push(l)}else{if(!p.Links){p.Links=[]}p.Links.push(l)}})}if(collLink.Href){opds2feed.AddPublicationInGroup(p,collLink)}else{if(!opds2feed.Publications){opds2feed.Publications=[]}opds2feed.Publications.push(p)}}else{const linkNav=new opds2_link_1.OPDSLink;linkNav.Title=entry.Title;if(entry.Links&&entry.Links[0]){linkNav.AddRel(entry.Links[0].Rel);linkNav.TypeLink=entry.Links[0].Type;linkNav.Href=entry.Links[0].Href}if(collLink.Href){opds2feed.AddNavigationInGroup(linkNav,collLink)}else{if(!opds2feed.Navigation){opds2feed.Navigation=[]}opds2feed.Navigation.push(linkNav)}}})}if(feed.Links){feed.Links.forEach(l=>{const linkFeed=new opds2_link_1.OPDSLink;linkFeed.Href=l.Href;linkFeed.AddRel(l.Rel);linkFeed.TypeLink=l.Type;linkFeed.Title=l.Title;if(l.HasRel("http://opds-spec.org/facet")){linkFeed.Properties=new opds2_properties_1.OPDSProperties;linkFeed.Properties.NumberOfItems=l.ThrCount;opds2feed.AddFacet(linkFeed,l.FacetGroup)}else{if(!opds2feed.Links){opds2feed.Links=[]}opds2feed.Links.push(linkFeed)}})}return opds2feed}exports.convertOpds1ToOpds2=convertOpds1ToOpds2},{"./opds2/opds2":83,"./opds2/opds2-belongsTo":69,"./opds2/opds2-collection":71,"./opds2/opds2-contributor":72,"./opds2/opds2-indirectAcquisition":75,"./opds2/opds2-link":76,"./opds2/opds2-metadata":77,"./opds2/opds2-price":78,"./opds2/opds2-properties":79,"./opds2/opds2-publication":80,"./opds2/opds2-publicationMetadata":81,"./opds2/opds2-subject":82}],62:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Author=class Author{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:name/text()"),tslib_1.__metadata("design:type",String)],Author.prototype,"Name",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:uri/text()"),tslib_1.__metadata("design:type",String)],Author.prototype,"Uri",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:email/text()"),tslib_1.__metadata("design:type",String)],Author.prototype,"Email",void 0);Author=tslib_1.__decorate([xml_js_mapper_1.XmlObject({app:"http://www.w3.org/2007/app",atom:"http://www.w3.org/2005/Atom",bibframe:"http://bibframe.org/vocab/",dcterms:"http://purl.org/dc/terms/",odl:"http://opds-spec.org/odl",opds:"http://opds-spec.org/2010/catalog",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",schema:"http://schema.org",thr:"http://purl.org/syndication/thread/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],Author);exports.Author=Author},{"../../_utils/xml-js-mapper":28,tslib:554}],63:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Category=class Category{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@term"),tslib_1.__metadata("design:type",String)],Category.prototype,"Term",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@scheme"),tslib_1.__metadata("design:type",String)],Category.prototype,"Scheme",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@label"),tslib_1.__metadata("design:type",String)],Category.prototype,"Label",void 0);Category=tslib_1.__decorate([xml_js_mapper_1.XmlObject({app:"http://www.w3.org/2007/app",atom:"http://www.w3.org/2005/Atom",bibframe:"http://bibframe.org/vocab/",dcterms:"http://purl.org/dc/terms/",odl:"http://opds-spec.org/odl",opds:"http://opds-spec.org/2010/catalog",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",schema:"http://schema.org",thr:"http://purl.org/syndication/thread/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],Category);exports.Category=Category},{"../../_utils/xml-js-mapper":28,tslib:554}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const opds_author_1=require("./opds-author");const opds_category_1=require("./opds-category");const opds_link_1=require("./opds-link");const opds_serie_1=require("./opds-serie");let Entry=class Entry{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("schema:Rating/@schema:ratingValue"),tslib_1.__metadata("design:type",String)],Entry.prototype,"SchemaRatingValue",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("schema:Rating/@schema:additionalType"),tslib_1.__metadata("design:type",String)],Entry.prototype,"SchemaRatingAdditionalType",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@schema:additionalType"),tslib_1.__metadata("design:type",String)],Entry.prototype,"SchemaAdditionalType",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:title/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"Title",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:author"),xml_js_mapper_1.XmlItemType(opds_author_1.Author),tslib_1.__metadata("design:type",Array)],Entry.prototype,"Authors",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:id/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"Id",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:summary/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"Summary",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:summary/@type"),tslib_1.__metadata("design:type",String)],Entry.prototype,"SummaryType",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dcterms:language/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"DcLanguage",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dcterms:extent/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"DcExtent",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dcterms:publisher/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"DcPublisher",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dcterms:rights/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"DcRights",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dcterms:issued/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"DcIssued",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dcterms:identifier/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"DcIdentifier",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dcterms:identifier/@xsi:type"),tslib_1.__metadata("design:type",String)],Entry.prototype,"DcIdentifierType",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("bibframe:distribution/@bibframe:ProviderName"),tslib_1.__metadata("design:type",String)],Entry.prototype,"BibFrameDistributionProviderName",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:category"),xml_js_mapper_1.XmlItemType(opds_category_1.Category),tslib_1.__metadata("design:type",Array)],Entry.prototype,"Categories",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:content/text()"),tslib_1.__metadata("design:type",String)],Entry.prototype,"Content",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:content/@type"),tslib_1.__metadata("design:type",String)],Entry.prototype,"ContentType",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:updated/text()"),tslib_1.__metadata("design:type",Date)],Entry.prototype,"Updated",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:published/text()"),tslib_1.__metadata("design:type",Date)],Entry.prototype,"Published",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:link"),xml_js_mapper_1.XmlItemType(opds_link_1.Link),tslib_1.__metadata("design:type",Array)],Entry.prototype,"Links",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("schema:Series"),xml_js_mapper_1.XmlItemType(opds_serie_1.Serie),tslib_1.__metadata("design:type",Array)],Entry.prototype,"Series",void 0);Entry=tslib_1.__decorate([xml_js_mapper_1.XmlObject({app:"http://www.w3.org/2007/app",atom:"http://www.w3.org/2005/Atom",bibframe:"http://bibframe.org/vocab/",dcterms:"http://purl.org/dc/terms/",odl:"http://opds-spec.org/odl",opds:"http://opds-spec.org/2010/catalog",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",schema:"http://schema.org",thr:"http://purl.org/syndication/thread/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],Entry);exports.Entry=Entry},{"../../_utils/xml-js-mapper":28,"./opds-author":62,"./opds-category":63,"./opds-link":66,"./opds-serie":67,tslib:554}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let IndirectAcquisition=IndirectAcquisition_1=class IndirectAcquisition{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@type"),tslib_1.__metadata("design:type",String)],IndirectAcquisition.prototype,"OpdsIndirectAcquisitionType",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opds:indirectAcquisition"),xml_js_mapper_1.XmlItemType(IndirectAcquisition_1),tslib_1.__metadata("design:type",Array)],IndirectAcquisition.prototype,"OpdsIndirectAcquisitions",void 0);IndirectAcquisition=IndirectAcquisition_1=tslib_1.__decorate([xml_js_mapper_1.XmlObject({app:"http://www.w3.org/2007/app",atom:"http://www.w3.org/2005/Atom",bibframe:"http://bibframe.org/vocab/",dcterms:"http://purl.org/dc/terms/",odl:"http://opds-spec.org/odl",opds:"http://opds-spec.org/2010/catalog",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",schema:"http://schema.org",thr:"http://purl.org/syndication/thread/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],IndirectAcquisition);exports.IndirectAcquisition=IndirectAcquisition;var IndirectAcquisition_1},{"../../_utils/xml-js-mapper":28,tslib:554}],66:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const opds_indirectAcquisition_1=require("./opds-indirectAcquisition");let Link=class Link{HasRel(rel){return this.Rel===rel}SetRel(rel){this.Rel=rel}};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opds:price/text()"),tslib_1.__metadata("design:type",Number)],Link.prototype,"OpdsPrice",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opds:price/@currencycode"),tslib_1.__metadata("design:type",String)],Link.prototype,"OpdsPriceCurrencyCode",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opds:indirectAcquisition"),xml_js_mapper_1.XmlItemType(opds_indirectAcquisition_1.IndirectAcquisition),tslib_1.__metadata("design:type",Array)],Link.prototype,"OpdsIndirectAcquisitions",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@type"),tslib_1.__metadata("design:type",String)],Link.prototype,"Type",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@thr:count"),tslib_1.__metadata("design:type",Number)],Link.prototype,"ThrCount",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@opds:facetGroup"),tslib_1.__metadata("design:type",String)],Link.prototype,"FacetGroup",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@href"),tslib_1.__metadata("design:type",String)],Link.prototype,"Href",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@title"),tslib_1.__metadata("design:type",String)],Link.prototype,"Title",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@rel"),tslib_1.__metadata("design:type",String)],Link.prototype,"Rel",void 0);Link=tslib_1.__decorate([xml_js_mapper_1.XmlObject({app:"http://www.w3.org/2007/app",atom:"http://www.w3.org/2005/Atom",bibframe:"http://bibframe.org/vocab/",dcterms:"http://purl.org/dc/terms/",odl:"http://opds-spec.org/odl",opds:"http://opds-spec.org/2010/catalog",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",schema:"http://schema.org",thr:"http://purl.org/syndication/thread/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],Link);exports.Link=Link},{"../../_utils/xml-js-mapper":28,"./opds-indirectAcquisition":65,tslib:554}],67:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Serie=class Serie{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@schema:name"),tslib_1.__metadata("design:type",String)],Serie.prototype,"Name",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@schema:url"),tslib_1.__metadata("design:type",String)],Serie.prototype,"Url",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@schema:position"),tslib_1.__metadata("design:type",Number)],Serie.prototype,"Position",void 0);Serie=tslib_1.__decorate([xml_js_mapper_1.XmlObject({app:"http://www.w3.org/2007/app",atom:"http://www.w3.org/2005/Atom",bibframe:"http://bibframe.org/vocab/",dcterms:"http://purl.org/dc/terms/",odl:"http://opds-spec.org/odl",opds:"http://opds-spec.org/2010/catalog",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",schema:"http://schema.org",thr:"http://purl.org/syndication/thread/1.0",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],Serie);exports.Serie=Serie},{"../../_utils/xml-js-mapper":28,tslib:554}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const opds_author_1=require("./opds-author");const opds_entry_1=require("./opds-entry");const opds_link_1=require("./opds-link");let OPDS=class OPDS{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opensearch:totalResults/text()"),tslib_1.__metadata("design:type",Number)],OPDS.prototype,"OpensearchTotalResults",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opensearch:itemsPerPage/text()"),tslib_1.__metadata("design:type",Number)],OPDS.prototype,"OpensearchItemsPerPage",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:id/text()"),tslib_1.__metadata("design:type",String)],OPDS.prototype,"Id",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:title/text()"),tslib_1.__metadata("design:type",String)],OPDS.prototype,"Title",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:subtitle/text()"),tslib_1.__metadata("design:type",String)],OPDS.prototype,"SubTitle",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:updated/text()"),tslib_1.__metadata("design:type",Date)],OPDS.prototype,"Updated",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:icon/text()"),tslib_1.__metadata("design:type",String)],OPDS.prototype,"Icon",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:author"),xml_js_mapper_1.XmlItemType(opds_author_1.Author),tslib_1.__metadata("design:type",Array)],OPDS.prototype,"Authors",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@lang | @xml:lang"),tslib_1.__metadata("design:type",String)],OPDS.prototype,"Lang",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:link"),xml_js_mapper_1.XmlItemType(opds_link_1.Link),tslib_1.__metadata("design:type",Array)],OPDS.prototype,"Links",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("atom:entry"),xml_js_mapper_1.XmlItemType(opds_entry_1.Entry),tslib_1.__metadata("design:type",Array)],OPDS.prototype,"Entries",void 0);OPDS=tslib_1.__decorate([xml_js_mapper_1.XmlObject({app:"http://www.w3.org/2007/app",atom:"http://www.w3.org/2005/Atom",bibframe:"http://bibframe.org/vocab/",dcterms:"http://purl.org/dc/terms/",odl:"http://opds-spec.org/odl",opds:"http://opds-spec.org/2010/catalog",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",schema:"http://schema.org",thr:"http://purl.org/syndication/thread/1.0",xml:"http://www.w3.org/XML/1998/namespace",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],OPDS);exports.OPDS=OPDS},{"../../_utils/xml-js-mapper":28,"./opds-author":62,"./opds-entry":64,"./opds-link":66,tslib:554}],69:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_collection_1=require("./opds2-collection");let OPDSBelongsTo=class OPDSBelongsTo{};tslib_1.__decorate([ta_json_1.JsonProperty("series"),ta_json_1.JsonElementType(opds2_collection_1.OPDSCollection),tslib_1.__metadata("design:type",Array)],OPDSBelongsTo.prototype,"Series",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("collection"),ta_json_1.JsonElementType(opds2_collection_1.OPDSCollection),tslib_1.__metadata("design:type",Array)],OPDSBelongsTo.prototype,"Collection",void 0);OPDSBelongsTo=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSBelongsTo);exports.OPDSBelongsTo=OPDSBelongsTo},{"./opds2-collection":71,"ta-json":541,tslib:554}],70:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const ta_json_1=require("ta-json");const opds2_collection_1=require("./opds2-collection");class JsonOPDSCollectionConverter{serialize(property){return ta_json_1.JSON.serialize(property)}deserialize(value){if(typeof value==="string"){const c=new opds2_collection_1.OPDSCollection;c.Name=value;return c}else{return ta_json_1.JSON.deserialize(value,opds2_collection_1.OPDSCollection)}}collapseArrayWithSingleItem(){return true}}exports.JsonOPDSCollectionConverter=JsonOPDSCollectionConverter},{"./opds2-collection":71,"ta-json":541}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_link_1=require("./opds2-link");let OPDSCollection=class OPDSCollection{_OnDeserialized(){if(!this.Name){console.log("OPDSCollection.Name is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("name"),tslib_1.__metadata("design:type",String)],OPDSCollection.prototype,"Name",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("sort_as"),tslib_1.__metadata("design:type",String)],OPDSCollection.prototype,"SortAs",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("identifier"),tslib_1.__metadata("design:type",String)],OPDSCollection.prototype,"Identifier",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("position"),tslib_1.__metadata("design:type",Number)],OPDSCollection.prototype,"Position",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("links"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSCollection.prototype,"Links",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSCollection.prototype,"_OnDeserialized",null);OPDSCollection=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSCollection);exports.OPDSCollection=OPDSCollection},{"./opds2-link":76,"ta-json":541,tslib:554}],72:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_link_1=require("./opds2-link");let OPDSContributor=class OPDSContributor{};tslib_1.__decorate([ta_json_1.JsonProperty("name"),tslib_1.__metadata("design:type",Object)],OPDSContributor.prototype,"Name",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("sort_as"),tslib_1.__metadata("design:type",String)],OPDSContributor.prototype,"SortAs",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("identifier"),tslib_1.__metadata("design:type",String)],OPDSContributor.prototype,"Identifier",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("role"),tslib_1.__metadata("design:type",String)],OPDSContributor.prototype,"Role",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("links"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSContributor.prototype,"Links",void 0);OPDSContributor=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSContributor);exports.OPDSContributor=OPDSContributor},{"./opds2-link":76,"ta-json":541,tslib:554}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_link_1=require("./opds2-link");const opds2_metadata_1=require("./opds2-metadata");let OPDSFacet=class OPDSFacet{_OnDeserialized(){if(!this.Metadata){console.log("OPDSFacet.Metadata is not set!")}if(!this.Links){console.log("OPDSFacet.Links is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("metadata"),tslib_1.__metadata("design:type",opds2_metadata_1.OPDSMetadata)],OPDSFacet.prototype,"Metadata",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("links"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSFacet.prototype,"Links",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSFacet.prototype,"_OnDeserialized",null);OPDSFacet=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSFacet);exports.OPDSFacet=OPDSFacet},{"./opds2-link":76,"./opds2-metadata":77,"ta-json":541,tslib:554}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_link_1=require("./opds2-link");const opds2_metadata_1=require("./opds2-metadata");const opds2_publication_1=require("./opds2-publication");let OPDSGroup=class OPDSGroup{_OnDeserialized(){if(!this.Metadata){console.log("OPDSGroup.Metadata is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("metadata"),tslib_1.__metadata("design:type",opds2_metadata_1.OPDSMetadata)],OPDSGroup.prototype,"Metadata",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("publications"),ta_json_1.JsonElementType(opds2_publication_1.OPDSPublication),tslib_1.__metadata("design:type",Array)],OPDSGroup.prototype,"Publications",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("links"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSGroup.prototype,"Links",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("navigation"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSGroup.prototype,"Navigation",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSGroup.prototype,"_OnDeserialized",null);OPDSGroup=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSGroup);exports.OPDSGroup=OPDSGroup},{"./opds2-link":76,"./opds2-metadata":77,"./opds2-publication":80,"ta-json":541,tslib:554}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let OPDSIndirectAcquisition=OPDSIndirectAcquisition_1=class OPDSIndirectAcquisition{_OnDeserialized(){if(!this.TypeAcquisition){console.log("OPDSIndirectAcquisition.TypeAcquisition is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("type"),tslib_1.__metadata("design:type",String)],OPDSIndirectAcquisition.prototype,"TypeAcquisition",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("child"),ta_json_1.JsonElementType(OPDSIndirectAcquisition_1),tslib_1.__metadata("design:type",Array)],OPDSIndirectAcquisition.prototype,"Children",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSIndirectAcquisition.prototype,"_OnDeserialized",null);OPDSIndirectAcquisition=OPDSIndirectAcquisition_1=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSIndirectAcquisition);exports.OPDSIndirectAcquisition=OPDSIndirectAcquisition;var OPDSIndirectAcquisition_1},{"ta-json":541,tslib:554}],76:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_string_converter_1=require("../../_utils/ta-json-string-converter");const ta_json_1=require("ta-json");const opds2_properties_1=require("./opds2-properties");let OPDSLink=OPDSLink_1=class OPDSLink{AddRels(rels){rels.forEach(rel=>{this.AddRel(rel)})}AddRel(rel){if(this.HasRel(rel)){return}if(!this.Rel){this.Rel=[rel]}else{this.Rel.push(rel)}}HasRel(rel){return this.Rel&&this.Rel.indexOf(rel)>=0}_OnDeserialized(){if(!this.Href){console.log("Link.Href is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("href"),tslib_1.__metadata("design:type",String)],OPDSLink.prototype,"Href",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("type"),tslib_1.__metadata("design:type",String)],OPDSLink.prototype,"TypeLink",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("height"),tslib_1.__metadata("design:type",Number)],OPDSLink.prototype,"Height",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("width"),tslib_1.__metadata("design:type",Number)],OPDSLink.prototype,"Width",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("title"),tslib_1.__metadata("design:type",String)],OPDSLink.prototype,"Title",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("properties"),tslib_1.__metadata("design:type",opds2_properties_1.OPDSProperties)],OPDSLink.prototype,"Properties",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("duration"),tslib_1.__metadata("design:type",Number)],OPDSLink.prototype,"Duration",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("templated"),tslib_1.__metadata("design:type",Boolean)],OPDSLink.prototype,"Templated",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("children"),ta_json_1.JsonElementType(OPDSLink_1),tslib_1.__metadata("design:type",Array)],OPDSLink.prototype,"Children",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("bitrate"),tslib_1.__metadata("design:type",Number)],OPDSLink.prototype,"Bitrate",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("rel"),ta_json_1.JsonConverter(ta_json_string_converter_1.JsonStringConverter),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],OPDSLink.prototype,"Rel",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSLink.prototype,"_OnDeserialized",null);OPDSLink=OPDSLink_1=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSLink);exports.OPDSLink=OPDSLink;var OPDSLink_1},{"../../_utils/ta-json-string-converter":8,"./opds2-properties":79,"ta-json":541,tslib:554}],77:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_contributor_1=require("./opds2-contributor");let OPDSMetadata=class OPDSMetadata{_OnDeserialized(){if(!this.Title){console.log("OPDSMetadata.Title is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("author"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSMetadata.prototype,"Author",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("@type"),tslib_1.__metadata("design:type",String)],OPDSMetadata.prototype,"RDFType",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("title"),tslib_1.__metadata("design:type",String)],OPDSMetadata.prototype,"Title",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("numberOfItems"),tslib_1.__metadata("design:type",Number)],OPDSMetadata.prototype,"NumberOfItems",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("itemsPerPage"),tslib_1.__metadata("design:type",Number)],OPDSMetadata.prototype,"ItemsPerPage",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("currentPage"),tslib_1.__metadata("design:type",Number)],OPDSMetadata.prototype,"CurrentPage",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("modified"),tslib_1.__metadata("design:type",Date)],OPDSMetadata.prototype,"Modified",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSMetadata.prototype,"_OnDeserialized",null);OPDSMetadata=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSMetadata);exports.OPDSMetadata=OPDSMetadata},{"./opds2-contributor":72,"ta-json":541,tslib:554}],78:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let OPDSPrice=class OPDSPrice{_OnDeserialized(){if(!this.Currency){console.log("OPDSPrice.Currency is not set!")}if(!this.Value){console.log("OPDSPrice.Value is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("currency"),tslib_1.__metadata("design:type",String)],OPDSPrice.prototype,"Currency",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("value"),tslib_1.__metadata("design:type",Number)],OPDSPrice.prototype,"Value",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSPrice.prototype,"_OnDeserialized",null);OPDSPrice=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSPrice);exports.OPDSPrice=OPDSPrice},{"ta-json":541,tslib:554}],79:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_indirectAcquisition_1=require("./opds2-indirectAcquisition");const opds2_price_1=require("./opds2-price");let OPDSProperties=class OPDSProperties{};tslib_1.__decorate([ta_json_1.JsonProperty("numberOfItems"),tslib_1.__metadata("design:type",Number)],OPDSProperties.prototype,"NumberOfItems",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("price"),tslib_1.__metadata("design:type",opds2_price_1.OPDSPrice)],OPDSProperties.prototype,"Price",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("indirectAcquisition"),ta_json_1.JsonElementType(opds2_indirectAcquisition_1.OPDSIndirectAcquisition),tslib_1.__metadata("design:type",Array)],OPDSProperties.prototype,"IndirectAcquisitions",void 0);OPDSProperties=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSProperties);exports.OPDSProperties=OPDSProperties},{"./opds2-indirectAcquisition":75,"./opds2-price":78,"ta-json":541,tslib:554}],80:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_belongsTo_1=require("./opds2-belongsTo");const opds2_collection_1=require("./opds2-collection");const opds2_contributor_1=require("./opds2-contributor");const opds2_link_1=require("./opds2-link");const opds2_publicationMetadata_1=require("./opds2-publicationMetadata");let OPDSPublication=class OPDSPublication{findFirstLinkByRel(rel){return this.Links?this.Links.find(l=>{return l.HasRel(rel)}):undefined}AddImage(href,typeImage,height,width){const i=new opds2_link_1.OPDSLink;i.Href=href;i.TypeLink=typeImage;if(height){i.Height=height}if(width){i.Width=width}if(!this.Images){this.Images=[]}this.Images.push(i)}AddLink(href,typeLink,rel,title){const l=new opds2_link_1.OPDSLink;l.Href=href;l.TypeLink=typeLink;if(rel){l.AddRel(rel)}if(title){l.Title=title}if(!this.Links){this.Links=[]}this.Links.push(l)}AddAuthor(name,identifier,sortAs,href,typeLink){const c=new opds2_contributor_1.OPDSContributor;c.Name=name;if(identifier){c.Identifier=identifier}if(sortAs){c.SortAs=sortAs}const l=new opds2_link_1.OPDSLink;if(href){l.Href=href}if(typeLink){l.TypeLink=typeLink}if(href){c.Links=[];c.Links.push(l)}if(!this.Metadata){this.Metadata=new opds2_publicationMetadata_1.OPDSPublicationMetadata}if(!this.Metadata.Author){this.Metadata.Author=[]}this.Metadata.Author.push(c)}AddSerie(name,position,href,typeLink){const c=new opds2_collection_1.OPDSCollection;c.Name=name;c.Position=position;const l=new opds2_link_1.OPDSLink;if(href){l.Href=href}if(typeLink){l.TypeLink=typeLink}if(href){c.Links=[];c.Links.push(l)}if(!this.Metadata){this.Metadata=new opds2_publicationMetadata_1.OPDSPublicationMetadata}if(!this.Metadata.BelongsTo){this.Metadata.BelongsTo=new opds2_belongsTo_1.OPDSBelongsTo}if(!this.Metadata.BelongsTo.Series){this.Metadata.BelongsTo.Series=[]}this.Metadata.BelongsTo.Series.push(c)}AddPublisher(name,href,typeLink){const c=new opds2_contributor_1.OPDSContributor;c.Name=name;const l=new opds2_link_1.OPDSLink;if(href){l.Href=href}if(typeLink){l.TypeLink=typeLink}if(href){c.Links=[];c.Links.push(l)}if(!this.Metadata){this.Metadata=new opds2_publicationMetadata_1.OPDSPublicationMetadata}if(!this.Metadata.Publisher){this.Metadata.Publisher=[]}this.Metadata.Publisher.push(c)}_OnDeserialized(){if(!this.Metadata){console.log("OPDSPublication.Metadata is not set!")}if(!this.Links){console.log("OPDSPublication.Links is not set!")}if(!this.Images){console.log("OPDSPublication.Images is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("metadata"),tslib_1.__metadata("design:type",opds2_publicationMetadata_1.OPDSPublicationMetadata)],OPDSPublication.prototype,"Metadata",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("links"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSPublication.prototype,"Links",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("images"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSPublication.prototype,"Images",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSPublication.prototype,"_OnDeserialized",null);OPDSPublication=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSPublication);exports.OPDSPublication=OPDSPublication},{"./opds2-belongsTo":69,"./opds2-collection":71,"./opds2-contributor":72,"./opds2-link":76,"./opds2-publicationMetadata":81,"ta-json":541,tslib:554}],81:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const opds2_belongsTo_1=require("./opds2-belongsTo");const opds2_contributor_1=require("./opds2-contributor");const opds2_subject_1=require("./opds2-subject");let OPDSPublicationMetadata=class OPDSPublicationMetadata{_OnDeserialized(){if(!this.Title){console.log("OPDSPublicationMetadata.Title is not set!")}if(!this.Identifier){console.log("OPDSPublicationMetadata.Identifier is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("@type"),tslib_1.__metadata("design:type",String)],OPDSPublicationMetadata.prototype,"RDFType",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("title"),tslib_1.__metadata("design:type",Object)],OPDSPublicationMetadata.prototype,"Title",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("identifier"),tslib_1.__metadata("design:type",String)],OPDSPublicationMetadata.prototype,"Identifier",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("author"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Author",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("translator"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Translator",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("editor"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Editor",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("artist"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Artist",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("illustrator"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Illustrator",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("letterer"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Letterer",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("penciler"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Penciler",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("colorist"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Colorist",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("inker"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Inker",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("narrator"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Narrator",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("contributor"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"OPDSContributor",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("publisher"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Publisher",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("imprint"),ta_json_1.JsonElementType(opds2_contributor_1.OPDSContributor),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Imprint",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("language"),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Language",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("modified"),tslib_1.__metadata("design:type",Date)],OPDSPublicationMetadata.prototype,"Modified",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("published"),tslib_1.__metadata("design:type",Date)],OPDSPublicationMetadata.prototype,"PublicationDate",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("description"),tslib_1.__metadata("design:type",String)],OPDSPublicationMetadata.prototype,"Description",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("source"),tslib_1.__metadata("design:type",String)],OPDSPublicationMetadata.prototype,"Source",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("rights"),tslib_1.__metadata("design:type",String)],OPDSPublicationMetadata.prototype,"Rights",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("subject"),ta_json_1.JsonElementType(opds2_subject_1.OPDSSubject),tslib_1.__metadata("design:type",Array)],OPDSPublicationMetadata.prototype,"Subject",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("belongs_to"),tslib_1.__metadata("design:type",opds2_belongsTo_1.OPDSBelongsTo)],OPDSPublicationMetadata.prototype,"BelongsTo",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("duration"),tslib_1.__metadata("design:type",Number)],OPDSPublicationMetadata.prototype,"Duration",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSPublicationMetadata.prototype,"_OnDeserialized",null);OPDSPublicationMetadata=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSPublicationMetadata);exports.OPDSPublicationMetadata=OPDSPublicationMetadata},{"./opds2-belongsTo":69,"./opds2-contributor":72,"./opds2-subject":82,"ta-json":541,tslib:554}],82:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let OPDSSubject=class OPDSSubject{_OnDeserialized(){if(!this.Name){console.log("OPDSSubject.Name is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("name"),tslib_1.__metadata("design:type",String)],OPDSSubject.prototype,"Name",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("sort_as"),tslib_1.__metadata("design:type",String)],OPDSSubject.prototype,"SortAs",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("scheme"),tslib_1.__metadata("design:type",String)],OPDSSubject.prototype,"Scheme",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("code"),tslib_1.__metadata("design:type",String)],OPDSSubject.prototype,"Code",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSSubject.prototype,"_OnDeserialized",null);OPDSSubject=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSSubject);exports.OPDSSubject=OPDSSubject},{"ta-json":541,tslib:554}],83:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_string_converter_1=require("../../_utils/ta-json-string-converter");const ta_json_1=require("ta-json");const opds2_facet_1=require("./opds2-facet");const opds2_group_1=require("./opds2-group");const opds2_link_1=require("./opds2-link");const opds2_metadata_1=require("./opds2-metadata");const opds2_publication_1=require("./opds2-publication");let OPDSFeed=class OPDSFeed{findFirstLinkByRel(rel){return this.Links?this.Links.find(l=>{return l.HasRel(rel)}):undefined}AddLink(href,rel,typeLink,templated){const l=new opds2_link_1.OPDSLink;l.Href=href;l.AddRel(rel);l.TypeLink=typeLink;if(templated){l.Templated=true}if(!this.Links){this.Links=[]}this.Links.push(l)}AddNavigation(title,href,rel,typeLink){const l=new opds2_link_1.OPDSLink;l.Href=href;l.TypeLink=typeLink;l.AddRel(rel);if(title){l.Title=title}if(!this.Navigation){this.Navigation=[]}this.Navigation.push(l)}AddPagination(numberItems,itemsPerPage,currentPage,nextLink,prevLink,firstLink,lastLink){if(!this.Metadata){this.Metadata=new opds2_metadata_1.OPDSMetadata}this.Metadata.CurrentPage=currentPage;this.Metadata.ItemsPerPage=itemsPerPage;this.Metadata.NumberOfItems=numberItems;if(nextLink){this.AddLink(nextLink,"next","application/opds+json",false)}if(prevLink){this.AddLink(prevLink,"previous","application/opds+json",false)}if(firstLink){this.AddLink(firstLink,"first","application/opds+json",false)}if(lastLink){this.AddLink(lastLink,"last","application/opds+json",false)}}AddFacet(link,group){if(this.Facets){const found=this.Facets.find(f=>{if(f.Metadata&&f.Metadata.Title===group){if(!f.Links){f.Links=[]}f.Links.push(link);return true}return false});if(found){return}}const facet=new opds2_facet_1.OPDSFacet;facet.Metadata=new opds2_metadata_1.OPDSMetadata;facet.Metadata.Title=group;facet.Links=[];facet.Links.push(link);if(!this.Facets){this.Facets=[]}this.Facets.push(facet)}AddPublicationInGroup(publication,collLink){if(this.Groups){const found1=this.Groups.find(g=>{if(g.Links){const found2=g.Links.find(l=>{if(l.Href===collLink.Href){if(!g.Publications){g.Publications=[]}g.Publications.push(publication);return true}return false});if(found2){return true}}return false});if(found1){return}}const group=new opds2_group_1.OPDSGroup;group.Metadata=new opds2_metadata_1.OPDSMetadata;group.Metadata.Title=collLink.Title;group.Publications=[];group.Publications.push(publication);const linkSelf=new opds2_link_1.OPDSLink;linkSelf.AddRel("self");linkSelf.Title=collLink.Title;linkSelf.Href=collLink.Href;group.Links=[];group.Links.push(linkSelf);if(!this.Groups){this.Groups=[]}this.Groups.push(group)}AddNavigationInGroup(link,collLink){if(this.Groups){const found1=this.Groups.find(g=>{if(g.Links){const found2=g.Links.find(l=>{if(l.Href===collLink.Href){if(!g.Navigation){g.Navigation=[]}g.Navigation.push(link);return true}return false});if(found2){return true}}return false});if(found1){return}}const group=new opds2_group_1.OPDSGroup;group.Metadata=new opds2_metadata_1.OPDSMetadata;group.Metadata.Title=collLink.Title;group.Navigation=[];group.Navigation.push(link);const linkSelf=new opds2_link_1.OPDSLink;linkSelf.AddRel("self");linkSelf.Title=collLink.Title;linkSelf.Href=collLink.Href;group.Links=[];group.Links.push(link);if(!this.Groups){this.Groups=[]}this.Groups.push(group)}_OnDeserialized(){if(!this.Metadata){console.log("OPDS2Feed.Metadata is not set!")}if(!this.Links){console.log("OPDS2Feed.Links is not set!")}}};tslib_1.__decorate([ta_json_1.JsonProperty("@context"),ta_json_1.JsonConverter(ta_json_string_converter_1.JsonStringConverter),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],OPDSFeed.prototype,"Context",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("metadata"),tslib_1.__metadata("design:type",opds2_metadata_1.OPDSMetadata)],OPDSFeed.prototype,"Metadata",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("links"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSFeed.prototype,"Links",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("publications"),ta_json_1.JsonElementType(opds2_publication_1.OPDSPublication),tslib_1.__metadata("design:type",Array)],OPDSFeed.prototype,"Publications",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("navigation"),ta_json_1.JsonElementType(opds2_link_1.OPDSLink),tslib_1.__metadata("design:type",Array)],OPDSFeed.prototype,"Navigation",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("facets"),ta_json_1.JsonElementType(opds2_facet_1.OPDSFacet),tslib_1.__metadata("design:type",Array)],OPDSFeed.prototype,"Facets",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("groups"),ta_json_1.JsonElementType(opds2_group_1.OPDSGroup),tslib_1.__metadata("design:type",Array)],OPDSFeed.prototype,"Groups",void 0);tslib_1.__decorate([ta_json_1.OnDeserialized(),tslib_1.__metadata("design:type",Function),tslib_1.__metadata("design:paramtypes",[]),tslib_1.__metadata("design:returntype",void 0)],OPDSFeed.prototype,"_OnDeserialized",null);OPDSFeed=tslib_1.__decorate([ta_json_1.JsonObject()],OPDSFeed);exports.OPDSFeed=OPDSFeed},{"../../_utils/ta-json-string-converter":8,"./opds2-facet":73,"./opds2-group":74,"./opds2-link":76,"./opds2-metadata":77,"./opds2-publication":80,"ta-json":541,tslib:554}],84:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=require("path");const metadata_1=require("../models/metadata");const metadata_contributor_1=require("../models/metadata-contributor");const publication_1=require("../models/publication");const publication_link_1=require("../models/publication-link");const BufferUtils_1=require("../_utils/stream/BufferUtils");const xml_js_mapper_1=require("../_utils/xml-js-mapper");const zipFactory_1=require("../_utils/zip/zipFactory");const mime=require("mime-types");const slugify=require("slugify");const xmldom=require("xmldom");const comicrack_1=require("./comicrack/comicrack");const epub_1=require("./epub");async function CbzParsePromise(filePath){let zip;try{zip=await zipFactory_1.zipLoadPromise(filePath)}catch(err){return Promise.reject(err)}if(!zip.hasEntries()){return Promise.reject("CBZ zip empty")}const publication=new publication_1.Publication;publication.Context=["http://readium.org/webpub/default.jsonld"];publication.Metadata=new metadata_1.Metadata;publication.Metadata.RDFType="http://schema.org/ComicIssue";publication.Metadata.Identifier=filePathToTitle(filePath);publication.AddToInternal("type","cbz");publication.AddToInternal("zip",zip);let comicInfoEntryName;zip.forEachEntry(entryName=>{const link=new publication_link_1.Link;link.Href=entryName;const mediaType=mime.lookup(entryName);if(mediaType){link.TypeLink=mediaType}else{console.log("!!!!!! NO MEDIA TYPE?!")}if(link.TypeLink&&link.TypeLink.startsWith("image/")){if(!publication.Spine){publication.Spine=[]}publication.Spine.push(link)}else if(entryName.endsWith("ComicInfo.xml")){comicInfoEntryName=entryName}});if(!publication.Metadata.Title){publication.Metadata.Title=path.basename(filePath)}if(comicInfoEntryName){try{const _b=await comicRackMetadata(zip,comicInfoEntryName,publication);console.log(_b)}catch(err){console.log(err)}}return publication}exports.CbzParsePromise=CbzParsePromise;const filePathToTitle=filePath=>{const fileName=path.basename(filePath);return slugify(fileName,"_").replace(/[\.]/g,"_")};const comicRackMetadata=async(zip,entryName,publication)=>{let comicZipStream_;try{comicZipStream_=await zip.entryStreamPromise(entryName)}catch(err){console.log(err);return}const comicZipStream=comicZipStream_.stream;let comicZipData;try{comicZipData=await BufferUtils_1.streamToBufferPromise(comicZipStream)}catch(err){console.log(err);return}const comicXmlStr=comicZipData.toString("utf8");const comicXmlDoc=(new xmldom.DOMParser).parseFromString(comicXmlStr);const comicMeta=xml_js_mapper_1.XML.deserialize(comicXmlDoc,comicrack_1.ComicInfo);comicMeta.ZipPath=entryName;if(!publication.Metadata){publication.Metadata=new metadata_1.Metadata}if(comicMeta.Writer){const cont=new metadata_contributor_1.Contributor;cont.Name=comicMeta.Writer;if(!publication.Metadata.Author){publication.Metadata.Author=[]}publication.Metadata.Author.push(cont)}if(comicMeta.Penciller){const cont=new metadata_contributor_1.Contributor;cont.Name=comicMeta.Writer;if(!publication.Metadata.Penciler){publication.Metadata.Penciler=[]}publication.Metadata.Penciler.push(cont)}if(comicMeta.Colorist){const cont=new metadata_contributor_1.Contributor;cont.Name=comicMeta.Writer;if(!publication.Metadata.Colorist){publication.Metadata.Colorist=[]}publication.Metadata.Colorist.push(cont)}if(comicMeta.Inker){const cont=new metadata_contributor_1.Contributor;cont.Name=comicMeta.Writer;if(!publication.Metadata.Inker){publication.Metadata.Inker=[]}publication.Metadata.Inker.push(cont)}if(comicMeta.Title){publication.Metadata.Title=comicMeta.Title}if(!publication.Metadata.Title){if(comicMeta.Series){let title=comicMeta.Series;if(comicMeta.Number){title=title+" - "+comicMeta.Number}publication.Metadata.Title=title}}if(comicMeta.Pages){for(const p of comicMeta.Pages){const l=new publication_link_1.Link;if(p.Type==="FrontCover"){l.AddRel("cover");await epub_1.addCoverDimensions(publication,l)}l.Href=publication.Spine[p.Image].Href;if(p.ImageHeight){l.Height=p.ImageHeight}if(p.ImageWidth){l.Width=p.ImageWidth}if(p.Bookmark){l.Title=p.Bookmark}if(!publication.TOC){publication.TOC=[]}publication.TOC.push(l)}}}},{"../_utils/stream/BufferUtils":5,"../_utils/xml-js-mapper":28,"../_utils/zip/zipFactory":35,"../models/metadata":58,"../models/metadata-contributor":53,"../models/publication":60,"../models/publication-link":59,"./comicrack/comicrack":86,"./epub":87,"mime-types":429,path:undefined,slugify:492,xmldom:573}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Page=class Page{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@Image"),tslib_1.__metadata("design:type",Number)],Page.prototype,"Image",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@Bookmark"),tslib_1.__metadata("design:type",String)],Page.prototype,"Bookmark",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@Type"),tslib_1.__metadata("design:type",String)],Page.prototype,"Type",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@ImageSize"),tslib_1.__metadata("design:type",Number)],Page.prototype,"ImageSize",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@ImageWidth"),tslib_1.__metadata("design:type",Number)],Page.prototype,"ImageWidth",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@ImageHeight"),tslib_1.__metadata("design:type",Number)],Page.prototype,"ImageHeight",void 0);Page=tslib_1.__decorate([xml_js_mapper_1.XmlObject({xsd:"http://www.w3.org/2001/XMLSchema",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],Page);exports.Page=Page},{"../../_utils/xml-js-mapper":28,tslib:554}],86:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const comicrack_page_1=require("./comicrack-page");let ComicInfo=class ComicInfo{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Title"),tslib_1.__metadata("design:type",String)],ComicInfo.prototype,"Title",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Series"),tslib_1.__metadata("design:type",String)],ComicInfo.prototype,"Series",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Volume"),tslib_1.__metadata("design:type",Number)],ComicInfo.prototype,"Volume",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Number"),tslib_1.__metadata("design:type",Number)],ComicInfo.prototype,"Number",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Writer"),tslib_1.__metadata("design:type",String)],ComicInfo.prototype,"Writer",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Penciller"),tslib_1.__metadata("design:type",String)],ComicInfo.prototype,"Penciller",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Inker"),tslib_1.__metadata("design:type",String)],ComicInfo.prototype,"Inker",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Colorist"),tslib_1.__metadata("design:type",String)],ComicInfo.prototype,"Colorist",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ScanInformation"),tslib_1.__metadata("design:type",String)],ComicInfo.prototype,"ScanInformation",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Summary"),tslib_1.__metadata("design:type",String)],ComicInfo.prototype,"Summary",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Year"),tslib_1.__metadata("design:type",Number)],ComicInfo.prototype,"Year",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("PageCount"),tslib_1.__metadata("design:type",Number)],ComicInfo.prototype,"PageCount",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("Pages/Page"),xml_js_mapper_1.XmlItemType(comicrack_page_1.Page),tslib_1.__metadata("design:type",Array)],ComicInfo.prototype,"Pages",void 0);ComicInfo=tslib_1.__decorate([xml_js_mapper_1.XmlObject({xsd:"http://www.w3.org/2001/XMLSchema",xsi:"http://www.w3.org/2001/XMLSchema-instance"})],ComicInfo);exports.ComicInfo=ComicInfo},{"../../_utils/xml-js-mapper":28,"./comicrack-page":85,tslib:554}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=require("path");const querystring=require("querystring");const media_overlay_1=require("../models/media-overlay");const metadata_1=require("../models/metadata");const metadata_belongsto_1=require("../models/metadata-belongsto");const metadata_collection_1=require("../models/metadata-collection");const metadata_contributor_1=require("../models/metadata-contributor");const metadata_encrypted_1=require("../models/metadata-encrypted");const metadata_media_overlay_1=require("../models/metadata-media-overlay");const metadata_properties_1=require("../models/metadata-properties");const metadata_subject_1=require("../models/metadata-subject");const publication_1=require("../models/publication");const publication_link_1=require("../models/publication-link");const transformer_1=require("../transform/transformer");const BufferUtils_1=require("../_utils/stream/BufferUtils");const xml_js_mapper_1=require("../_utils/xml-js-mapper");const zipFactory_1=require("../_utils/zip/zipFactory");const debug_=require("debug");const sizeOf=require("image-size");const moment=require("moment");const ta_json_1=require("ta-json");const xmldom=require("xmldom");const xpath=require("xpath");const container_1=require("./epub/container");const encryption_1=require("./epub/encryption");const lcp_1=require("./epub/lcp");const ncx_1=require("./epub/ncx");const opf_1=require("./epub/opf");const opf_author_1=require("./epub/opf-author");const smil_1=require("./epub/smil");const smil_seq_1=require("./epub/smil-seq");const debug=debug_("r2:epub");const epub3="3.0";const epub301="3.0.1";const epub31="3.1";const autoMeta="auto";const noneMeta="none";const reflowableMeta="reflowable";exports.mediaOverlayURLPath="media-overlay.json";exports.mediaOverlayURLParam="resource";exports.addCoverDimensions=(async(publication,coverLink)=>{const zipInternal=publication.findFromInternal("zip");if(zipInternal){const zip=zipInternal.Value;if(zip.hasEntry(coverLink.Href)){let zipStream;try{zipStream=await zip.entryStreamPromise(coverLink.Href)}catch(err){debug(coverLink.Href);debug(coverLink.TypeLink);debug(err);return}let zipData;try{zipData=await BufferUtils_1.streamToBufferPromise(zipStream.stream);const imageInfo=sizeOf(zipData);if(imageInfo){coverLink.Width=imageInfo.width;coverLink.Height=imageInfo.height;if(coverLink.TypeLink&&coverLink.TypeLink.replace("jpeg","jpg").replace("+xml","")!=="image/"+imageInfo.type){debug(`Wrong image type? ${coverLink.TypeLink} -- ${imageInfo.type}`)}}}catch(err){debug(coverLink.Href);debug(coverLink.TypeLink);debug(err)}}}});async function EpubParsePromise(filePath){let zip;try{zip=await zipFactory_1.zipLoadPromise(filePath)}catch(err){debug(err);return Promise.reject(err)}if(!zip.hasEntries()){return Promise.reject("EPUB zip empty")}const publication=new publication_1.Publication;publication.Context=["http://readium.org/webpub/default.jsonld"];publication.Metadata=new metadata_1.Metadata;publication.Metadata.RDFType="http://schema.org/Book";publication.Metadata.Modified=moment(Date.now()).toDate();publication.AddToInternal("filename",path.basename(filePath));publication.AddToInternal("type","epub");publication.AddToInternal("zip",zip);let lcpl;const lcplZipPath="META-INF/license.lcpl";if(zip.hasEntry(lcplZipPath)){let lcplZipStream_;try{lcplZipStream_=await zip.entryStreamPromise(lcplZipPath)}catch(err){debug(err);return Promise.reject(err)}const lcplZipStream=lcplZipStream_.stream;let lcplZipData;try{lcplZipData=await BufferUtils_1.streamToBufferPromise(lcplZipStream)}catch(err){debug(err);return Promise.reject(err)}const lcplStr=lcplZipData.toString("utf8");const lcplJson=global.JSON.parse(lcplStr);debug(lcplJson);lcpl=ta_json_1.JSON.deserialize(lcplJson,lcp_1.LCP);lcpl.ZipPath=lcplZipPath;lcpl.JsonSource=lcplStr;lcpl.init();publication.LCP=lcpl;publication.AddLink("application/vnd.readium.lcp.license-1.0+json",["license"],lcpl.ZipPath,false)}let encryption;const encZipPath="META-INF/encryption.xml";if(zip.hasEntry(encZipPath)){let encryptionXmlZipStream_;try{encryptionXmlZipStream_=await zip.entryStreamPromise(encZipPath)}catch(err){debug(err);return Promise.reject(err)}const encryptionXmlZipStream=encryptionXmlZipStream_.stream;let encryptionXmlZipData;try{encryptionXmlZipData=await BufferUtils_1.streamToBufferPromise(encryptionXmlZipStream)}catch(err){debug(err);return Promise.reject(err)}const encryptionXmlStr=encryptionXmlZipData.toString("utf8");const encryptionXmlDoc=(new xmldom.DOMParser).parseFromString(encryptionXmlStr);encryption=xml_js_mapper_1.XML.deserialize(encryptionXmlDoc,encryption_1.Encryption);encryption.ZipPath=encZipPath}const containerZipPath="META-INF/container.xml";let containerXmlZipStream_;try{containerXmlZipStream_=await zip.entryStreamPromise(containerZipPath)}catch(err){debug(err);return Promise.reject(err)}const containerXmlZipStream=containerXmlZipStream_.stream;let containerXmlZipData;try{containerXmlZipData=await BufferUtils_1.streamToBufferPromise(containerXmlZipStream)}catch(err){debug(err);return Promise.reject(err)}const containerXmlStr=containerXmlZipData.toString("utf8");const containerXmlDoc=(new xmldom.DOMParser).parseFromString(containerXmlStr);const container=xml_js_mapper_1.XML.deserialize(containerXmlDoc,container_1.Container);container.ZipPath=containerZipPath;const rootfile=container.Rootfile[0];let opfZipStream_;try{opfZipStream_=await zip.entryStreamPromise(rootfile.Path)}catch(err){debug(err);return Promise.reject(err)}const opfZipStream=opfZipStream_.stream;let opfZipData;try{opfZipData=await BufferUtils_1.streamToBufferPromise(opfZipStream)}catch(err){debug(err);return Promise.reject(err)}const opfStr=opfZipData.toString("utf8");const opfDoc=(new xmldom.DOMParser).parseFromString(opfStr);const opf=xml_js_mapper_1.XML.deserialize(opfDoc,opf_1.OPF);opf.ZipPath=rootfile.Path;let ncx;if(opf.Spine.Toc){const ncxManItem=opf.Manifest.find(manifestItem=>{return manifestItem.ID===opf.Spine.Toc});if(ncxManItem){const ncxFilePath=path.join(path.dirname(opf.ZipPath),ncxManItem.Href).replace(/\\/g,"/");let ncxZipStream_;try{ncxZipStream_=await zip.entryStreamPromise(ncxFilePath)}catch(err){debug(err);return Promise.reject(err)}const ncxZipStream=ncxZipStream_.stream;let ncxZipData;try{ncxZipData=await BufferUtils_1.streamToBufferPromise(ncxZipStream)}catch(err){debug(err);return Promise.reject(err)}const ncxStr=ncxZipData.toString("utf8");const ncxDoc=(new xmldom.DOMParser).parseFromString(ncxStr);ncx=xml_js_mapper_1.XML.deserialize(ncxDoc,ncx_1.NCX);ncx.ZipPath=ncxFilePath}}addTitle(publication,rootfile,opf);addIdentifier(publication,rootfile,opf);if(opf.Metadata){if(opf.Metadata.Language){publication.Metadata.Language=opf.Metadata.Language}if(opf.Metadata.Rights&&opf.Metadata.Rights.length){publication.Metadata.Rights=opf.Metadata.Rights.join(" ")}if(opf.Metadata.Description&&opf.Metadata.Description.length){publication.Metadata.Description=opf.Metadata.Description[0]}if(opf.Metadata.Publisher&&opf.Metadata.Publisher.length){publication.Metadata.Publisher=[];opf.Metadata.Publisher.forEach(pub=>{const contrib=new metadata_contributor_1.Contributor;contrib.Name=pub;publication.Metadata.Publisher.push(contrib)})}if(opf.Metadata.Source&&opf.Metadata.Source.length){publication.Metadata.Source=opf.Metadata.Source[0]}if(opf.Metadata.Contributor&&opf.Metadata.Contributor.length){opf.Metadata.Contributor.forEach(cont=>{addContributor(publication,rootfile,opf,cont,undefined)})}if(opf.Metadata.Creator&&opf.Metadata.Creator.length){opf.Metadata.Creator.forEach(cont=>{addContributor(publication,rootfile,opf,cont,"aut")})}if(opf.Metadata.Meta){const metasDuration=[];const metasNarrator=[];const metasActiveClass=[];const metasPlaybackActiveClass=[];opf.Metadata.Meta.forEach(metaTag=>{if(metaTag.Property==="media:duration"){metasDuration.push(metaTag)}if(metaTag.Property==="media:narrator"){metasNarrator.push(metaTag)}if(metaTag.Property==="media:active-class"){metasActiveClass.push(metaTag)}if(metaTag.Property==="media:playback-active-class"){metasPlaybackActiveClass.push(metaTag)}});if(metasDuration.length){publication.Metadata.Duration=media_overlay_1.timeStrToSeconds(metasDuration[0].Data)}if(metasNarrator.length){if(!publication.Metadata.Narrator){publication.Metadata.Narrator=[]}metasNarrator.forEach(metaNarrator=>{const cont=new metadata_contributor_1.Contributor;cont.Name=metaNarrator.Data;publication.Metadata.Narrator.push(cont)})}if(metasActiveClass.length){if(!publication.Metadata.MediaOverlay){publication.Metadata.MediaOverlay=new metadata_media_overlay_1.MediaOverlay}publication.Metadata.MediaOverlay.ActiveClass=metasActiveClass[0].Data}if(metasPlaybackActiveClass.length){if(!publication.Metadata.MediaOverlay){publication.Metadata.MediaOverlay=new metadata_media_overlay_1.MediaOverlay}publication.Metadata.MediaOverlay.PlaybackActiveClass=metasPlaybackActiveClass[0].Data}}}if(opf.Spine&&opf.Spine.PageProgression){publication.Metadata.Direction=opf.Spine.PageProgression}if(isEpub3OrMore(rootfile,opf)){findContributorInMeta(publication,rootfile,opf)}await fillSpineAndResource(publication,rootfile,opf);addRendition(publication,rootfile,opf);await addCoverRel(publication,rootfile,opf);if(encryption){fillEncryptionInfo(publication,rootfile,opf,encryption,lcpl)}await fillTOCFromNavDoc(publication,rootfile,opf,zip);if(!publication.TOC||!publication.TOC.length){if(ncx){fillTOCFromNCX(publication,rootfile,opf,ncx);fillPageListFromNCX(publication,rootfile,opf,ncx)}fillLandmarksFromGuide(publication,rootfile,opf)}fillCalibreSerieInfo(publication,rootfile,opf);fillSubject(publication,rootfile,opf);fillPublicationDate(publication,rootfile,opf);await fillMediaOverlay(publication,rootfile,opf,zip);return publication}exports.EpubParsePromise=EpubParsePromise;async function getAllMediaOverlays(publication){const mos=[];if(publication.Spine){for(const link of publication.Spine){if(link.MediaOverlays){for(const mo of link.MediaOverlays){try{await fillMediaOverlayParse(publication,mo)}catch(err){return Promise.reject(err)}mos.push(mo)}}}}return Promise.resolve(mos)}exports.getAllMediaOverlays=getAllMediaOverlays;async function getMediaOverlay(publication,spineHref){const mos=[];if(publication.Spine){for(const link of publication.Spine){if(link.MediaOverlays&&link.Href.indexOf(spineHref)>=0){for(const mo of link.MediaOverlays){try{await fillMediaOverlayParse(publication,mo)}catch(err){return Promise.reject(err)}mos.push(mo)}}}}return Promise.resolve(mos)}exports.getMediaOverlay=getMediaOverlay;const fillMediaOverlayParse=async(publication,mo)=>{if(mo.initialized){return}let link;if(publication.Resources){const relativePath=mo.SmilPathInZip;if(publication.Resources){link=publication.Resources.find(l=>{if(l.Href===relativePath){return true}return false})}if(!link){if(publication.Spine){link=publication.Spine.find(l=>{if(l.Href===relativePath){return true}return false})}}if(!link){const err="Asset not declared in publication spine/resources! "+relativePath;debug(err);return Promise.reject(err)}}const zipInternal=publication.findFromInternal("zip");if(!zipInternal){return}const zip=zipInternal.Value;let smilZipStream_;try{smilZipStream_=await zip.entryStreamPromise(mo.SmilPathInZip)}catch(err){debug(err);return Promise.reject(err)}if(link&&link.Properties&&link.Properties.Encrypted){let decryptFail=false;let transformedStream;try{transformedStream=await transformer_1.Transformers.tryStream(publication,link,smilZipStream_,false,0,0)}catch(err){debug(err);return Promise.reject(err)}if(transformedStream){smilZipStream_=transformedStream}else{decryptFail=true}if(decryptFail){const err="Encryption scheme not supported.";debug(err);return Promise.reject(err)}}const smilZipStream=smilZipStream_.stream;let smilZipData;try{smilZipData=await BufferUtils_1.streamToBufferPromise(smilZipStream)}catch(err){debug(err);return Promise.reject(err)}const smilStr=smilZipData.toString("utf8");const smilXmlDoc=(new xmldom.DOMParser).parseFromString(smilStr);const smil=xml_js_mapper_1.XML.deserialize(smilXmlDoc,smil_1.SMIL);smil.ZipPath=mo.SmilPathInZip;mo.initialized=true;debug("PARSED SMIL: "+mo.SmilPathInZip);mo.Role=[];mo.Role.push("section");if(smil.Body){if(smil.Body.EpubType){smil.Body.EpubType.trim().split(" ").forEach(role=>{if(!role.length){return}if(mo.Role.indexOf(role)<0){mo.Role.push(role)}})}if(smil.Body.TextRef){const zipPath=path.join(path.dirname(smil.ZipPath),smil.Body.TextRef).replace(/\\/g,"/");mo.Text=zipPath}if(smil.Body.Children&&smil.Body.Children.length){smil.Body.Children.forEach(seqChild=>{if(!mo.Children){mo.Children=[]}addSeqToMediaOverlay(smil,publication,mo,mo.Children,seqChild)})}}return};const fillMediaOverlay=async(publication,rootfile,opf,zip)=>{if(!publication.Resources){return}for(const item of publication.Resources){if(item.TypeLink!=="application/smil+xml"){continue}if(!zip.hasEntry(item.Href)){continue}const manItemsHtmlWithSmil=[];opf.Manifest.forEach(manItemHtmlWithSmil=>{if(manItemHtmlWithSmil.MediaOverlay){const manItemSmil=opf.Manifest.find(mi=>{if(mi.ID===manItemHtmlWithSmil.MediaOverlay){return true}return false});if(manItemSmil){const smilFilePath2=path.join(path.dirname(opf.ZipPath),manItemSmil.Href).replace(/\\/g,"/");if(smilFilePath2===item.Href){manItemsHtmlWithSmil.push(manItemHtmlWithSmil)}}}});const mo=new media_overlay_1.MediaOverlayNode;mo.SmilPathInZip=item.Href;mo.initialized=false;manItemsHtmlWithSmil.forEach(manItemHtmlWithSmil=>{const htmlPathInZip=path.join(path.dirname(opf.ZipPath),manItemHtmlWithSmil.Href).replace(/\\/g,"/");const link=findLinKByHref(publication,rootfile,opf,htmlPathInZip);if(link){if(!link.MediaOverlays){link.MediaOverlays=[]}const alreadyExists=link.MediaOverlays.find(moo=>{if(item.Href===moo.SmilPathInZip){return true}return false});if(!alreadyExists){link.MediaOverlays.push(mo)}if(!link.Properties){link.Properties=new metadata_properties_1.Properties}link.Properties.MediaOverlay=exports.mediaOverlayURLPath+"?"+exports.mediaOverlayURLParam+"="+querystring.escape(link.Href)}});if(item.Properties&&item.Properties.Encrypted){debug("ENCRYPTED SMIL MEDIA OVERLAY: "+item.Href);continue}}return};const addSeqToMediaOverlay=(smil,publication,rootMO,mo,seqChild)=>{const moc=new media_overlay_1.MediaOverlayNode;moc.initialized=rootMO.initialized;mo.push(moc);if(seqChild instanceof smil_seq_1.Seq){moc.Role=[];moc.Role.push("section");const seq=seqChild;if(seq.EpubType){seq.EpubType.trim().split(" ").forEach(role=>{if(!role.length){return}if(moc.Role.indexOf(role)<0){moc.Role.push(role)}})}if(seq.TextRef){const zipPath=path.join(path.dirname(smil.ZipPath),seq.TextRef).replace(/\\/g,"/");moc.Text=zipPath}if(seq.Children&&seq.Children.length){seq.Children.forEach(child=>{if(!moc.Children){moc.Children=[]}addSeqToMediaOverlay(smil,publication,rootMO,moc.Children,child)})}}else{const par=seqChild;if(par.EpubType){par.EpubType.trim().split(" ").forEach(role=>{if(!role.length){return}if(!moc.Role){moc.Role=[]}if(moc.Role.indexOf(role)<0){moc.Role.push(role)}})}if(par.Text&&par.Text.Src){const zipPath=path.join(path.dirname(smil.ZipPath),par.Text.Src).replace(/\\/g,"/");moc.Text=zipPath}if(par.Audio&&par.Audio.Src){const zipPath=path.join(path.dirname(smil.ZipPath),par.Audio.Src).replace(/\\/g,"/");moc.Audio=zipPath;moc.Audio+="#t=";moc.Audio+=par.Audio.ClipBegin?media_overlay_1.timeStrToSeconds(par.Audio.ClipBegin):"0";if(par.Audio.ClipEnd){moc.Audio+=",";moc.Audio+=media_overlay_1.timeStrToSeconds(par.Audio.ClipEnd)}}}};const fillPublicationDate=(publication,rootfile,opf)=>{if(opf.Metadata&&opf.Metadata.Date&&opf.Metadata.Date.length){if(isEpub3OrMore(rootfile,opf)&&opf.Metadata.Date[0]&&opf.Metadata.Date[0].Data){publication.Metadata.PublicationDate=moment(opf.Metadata.Date[0].Data).toDate();return}opf.Metadata.Date.forEach(date=>{if(date.Data&&date.Event&&date.Event.indexOf("publication")>=0){publication.Metadata.PublicationDate=moment(date.Data).toDate()}})}};const findContributorInMeta=(publication,rootfile,opf)=>{if(opf.Metadata&&opf.Metadata.Meta){opf.Metadata.Meta.forEach(meta=>{if(meta.Property==="dcterms:creator"||meta.Property==="dcterms:contributor"){const cont=new opf_author_1.Author;cont.Data=meta.Data;cont.ID=meta.ID;addContributor(publication,rootfile,opf,cont,undefined)}})}};const addContributor=(publication,rootfile,opf,cont,forcedRole)=>{const contributor=new metadata_contributor_1.Contributor;let role;if(isEpub3OrMore(rootfile,opf)){const meta=findMetaByRefineAndProperty(rootfile,opf,cont.ID,"role");if(meta&&meta.Property==="role"){role=meta.Data}if(!role&&forcedRole){role=forcedRole}const metaAlt=findAllMetaByRefineAndProperty(rootfile,opf,cont.ID,"alternate-script");if(metaAlt&&metaAlt.length){contributor.Name={};if(publication.Metadata&&publication.Metadata.Language&&publication.Metadata.Language.length){contributor.Name[publication.Metadata.Language[0].toLowerCase()]=cont.Data}metaAlt.forEach(m=>{if(m.Lang){contributor.Name[m.Lang]=m.Data}})}else{contributor.Name=cont.Data}}else{contributor.Name=cont.Data;role=cont.Role;if(!role&&forcedRole){role=forcedRole}}if(role){switch(role){case"aut":{if(!publication.Metadata.Author){publication.Metadata.Author=[]}publication.Metadata.Author.push(contributor);break}case"trl":{if(!publication.Metadata.Translator){publication.Metadata.Translator=[]}publication.Metadata.Translator.push(contributor);break}case"art":{if(!publication.Metadata.Artist){publication.Metadata.Artist=[]}publication.Metadata.Artist.push(contributor);break}case"edt":{if(!publication.Metadata.Editor){publication.Metadata.Editor=[]}publication.Metadata.Editor.push(contributor);break}case"ill":{if(!publication.Metadata.Illustrator){publication.Metadata.Illustrator=[]}publication.Metadata.Illustrator.push(contributor);break}case"ltr":{if(!publication.Metadata.Letterer){publication.Metadata.Letterer=[]}publication.Metadata.Letterer.push(contributor);break}case"pen":{if(!publication.Metadata.Penciler){publication.Metadata.Penciler=[]}publication.Metadata.Penciler.push(contributor);break}case"clr":{if(!publication.Metadata.Colorist){publication.Metadata.Colorist=[]}publication.Metadata.Colorist.push(contributor);break}case"ink":{if(!publication.Metadata.Inker){publication.Metadata.Inker=[]}publication.Metadata.Inker.push(contributor);break}case"nrt":{if(!publication.Metadata.Narrator){publication.Metadata.Narrator=[]}publication.Metadata.Narrator.push(contributor);break}case"pbl":{if(!publication.Metadata.Publisher){publication.Metadata.Publisher=[]}publication.Metadata.Publisher.push(contributor);break}default:{contributor.Role=role;if(!publication.Metadata.Contributor){publication.Metadata.Contributor=[]}publication.Metadata.Contributor.push(contributor)}}}};const addIdentifier=(publication,_rootfile,opf)=>{if(opf.Metadata&&opf.Metadata.Identifier){if(opf.UniqueIdentifier&&opf.Metadata.Identifier.length>1){opf.Metadata.Identifier.forEach(iden=>{if(iden.ID===opf.UniqueIdentifier){publication.Metadata.Identifier=iden.Data}})}else if(opf.Metadata.Identifier.length>0){publication.Metadata.Identifier=opf.Metadata.Identifier[0].Data}}};const addTitle=(publication,rootfile,opf)=>{if(isEpub3OrMore(rootfile,opf)){let mainTitle;if(opf.Metadata&&opf.Metadata.Title&&opf.Metadata.Title.length){if(opf.Metadata.Meta){const tt=opf.Metadata.Title.find(title=>{const refineID="#"+title.ID;const m=opf.Metadata.Meta.find(meta=>{if(meta.Data==="main"&&meta.Refine===refineID){return true}return false});if(m){return true}return false});if(tt){mainTitle=tt}}if(!mainTitle){mainTitle=opf.Metadata.Title[0]}}if(mainTitle){const metaAlt=findAllMetaByRefineAndProperty(rootfile,opf,mainTitle.ID,"alternate-script");if(metaAlt&&metaAlt.length){publication.Metadata.Title={};if(mainTitle.Lang){publication.Metadata.Title[mainTitle.Lang.toLowerCase()]=mainTitle.Data}metaAlt.forEach(m=>{if(m.Lang){publication.Metadata.Title[m.Lang.toLowerCase()]=m.Data}})}else{publication.Metadata.Title=mainTitle.Data}}}else{if(opf.Metadata&&opf.Metadata.Title&&opf.Metadata.Title.length){publication.Metadata.Title=opf.Metadata.Title[0].Data}}};const addRelAndPropertiesToLink=async(publication,link,linkEpub,rootfile,opf)=>{if(linkEpub.Properties){await addToLinkFromProperties(publication,link,linkEpub.Properties)}const spineProperties=findPropertiesInSpineForManifest(linkEpub,rootfile,opf);if(spineProperties){await addToLinkFromProperties(publication,link,spineProperties)}};const addToLinkFromProperties=async(publication,link,propertiesString)=>{const properties=propertiesString.trim().split(" ");const propertiesStruct=new metadata_properties_1.Properties;for(const p of properties){switch(p){case"cover-image":{link.AddRel("cover");await exports.addCoverDimensions(publication,link);break}case"nav":{link.AddRel("contents");break}case"scripted":{if(!propertiesStruct.Contains){propertiesStruct.Contains=[]}propertiesStruct.Contains.push("js");break}case"mathml":{if(!propertiesStruct.Contains){propertiesStruct.Contains=[]}propertiesStruct.Contains.push("mathml");break}case"onix-record":{if(!propertiesStruct.Contains){propertiesStruct.Contains=[]}propertiesStruct.Contains.push("onix");break}case"svg":{if(!propertiesStruct.Contains){propertiesStruct.Contains=[]}propertiesStruct.Contains.push("svg");break}case"xmp-record":{if(!propertiesStruct.Contains){propertiesStruct.Contains=[]}propertiesStruct.Contains.push("xmp");break}case"remote-resources":{if(!propertiesStruct.Contains){propertiesStruct.Contains=[]}propertiesStruct.Contains.push("remote-resources");break}case"page-spread-left":{propertiesStruct.Page="left";break}case"page-spread-right":{propertiesStruct.Page="right";break}case"page-spread-center":{propertiesStruct.Page="center";break}case"rendition:spread-none":{propertiesStruct.Spread=noneMeta;break}case"rendition:spread-auto":{propertiesStruct.Spread=autoMeta;break}case"rendition:spread-landscape":{propertiesStruct.Spread="landscape";break}case"rendition:spread-portrait":{propertiesStruct.Spread="portrait";break}case"rendition:spread-both":{propertiesStruct.Spread="both";break}case"rendition:layout-reflowable":{propertiesStruct.Layout=reflowableMeta;break}case"rendition:layout-pre-paginated":{propertiesStruct.Layout="fixed";break}case"rendition:orientation-auto":{propertiesStruct.Orientation="auto";break}case"rendition:orientation-landscape":{propertiesStruct.Orientation="landscape";break}case"rendition:orientation-portrait":{propertiesStruct.Orientation="portrait";break}case"rendition:flow-auto":{propertiesStruct.Overflow=autoMeta;break}case"rendition:flow-paginated":{propertiesStruct.Overflow="paginated";break}case"rendition:flow-scrolled-continuous":{propertiesStruct.Overflow="scrolled-continuous";break}case"rendition:flow-scrolled-doc":{propertiesStruct.Overflow="scrolled";break}default:{break}}if(propertiesStruct.Layout||propertiesStruct.Orientation||propertiesStruct.Overflow||propertiesStruct.Page||propertiesStruct.Spread||propertiesStruct.Contains&&propertiesStruct.Contains.length){link.Properties=propertiesStruct}}};const addMediaOverlay=(link,linkEpub,rootfile,opf)=>{if(linkEpub.MediaOverlay){const meta=findMetaByRefineAndProperty(rootfile,opf,linkEpub.MediaOverlay,"media:duration");if(meta){link.Duration=media_overlay_1.timeStrToSeconds(meta.Data)}}};const findInManifestByID=async(publication,rootfile,opf,ID)=>{if(opf.Manifest&&opf.Manifest.length){const item=opf.Manifest.find(manItem=>{if(manItem.ID===ID){return true}return false});if(item){const linkItem=new publication_link_1.Link;linkItem.TypeLink=item.MediaType;const zipPath=path.join(path.dirname(opf.ZipPath),item.Href).replace(/\\/g,"/");linkItem.Href=zipPath;await addRelAndPropertiesToLink(publication,linkItem,item,rootfile,opf);addMediaOverlay(linkItem,item,rootfile,opf);return linkItem}}return Promise.reject(`${ID} not found`)};const addRendition=(publication,_rootfile,opf)=>{if(opf.Metadata&&opf.Metadata.Meta&&opf.Metadata.Meta.length){const rendition=new metadata_properties_1.Properties;opf.Metadata.Meta.forEach(meta=>{switch(meta.Property){case"rendition:layout":{if(meta.Data==="pre-paginated"){rendition.Layout="fixed"}else if(meta.Data==="reflowable"){rendition.Layout="reflowable"}break}case"rendition:orientation":{rendition.Orientation=meta.Data;break}case"rendition:spread":{rendition.Spread=meta.Data;break}case"rendition:flow":{rendition.Overflow=meta.Data;break}default:{break}}});if(rendition.Layout||rendition.Orientation||rendition.Overflow||rendition.Page||rendition.Spread){publication.Metadata.Rendition=rendition}}};const fillSpineAndResource=async(publication,rootfile,opf)=>{if(opf.Spine&&opf.Spine.Items&&opf.Spine.Items.length){for(const item of opf.Spine.Items){if(!item.Linear||item.Linear==="yes"){let linkItem;try{linkItem=await findInManifestByID(publication,rootfile,opf,item.IDref)}catch(err){debug(err);continue}if(linkItem&&linkItem.Href){if(!publication.Spine){publication.Spine=[]}publication.Spine.push(linkItem)}}}}if(opf.Manifest&&opf.Manifest.length){for(const item of opf.Manifest){const zipPath=path.join(path.dirname(opf.ZipPath),item.Href).replace(/\\/g,"/");const linkSpine=findInSpineByHref(publication,zipPath);if(!linkSpine||!linkSpine.Href){const linkItem=new publication_link_1.Link;linkItem.TypeLink=item.MediaType;linkItem.Href=zipPath;await addRelAndPropertiesToLink(publication,linkItem,item,rootfile,opf);addMediaOverlay(linkItem,item,rootfile,opf);if(!publication.Resources){publication.Resources=[]}publication.Resources.push(linkItem)}}}};const fillEncryptionInfo=(publication,_rootfile,_opf,encryption,lcp)=>{encryption.EncryptedData.forEach(encInfo=>{const encrypted=new metadata_encrypted_1.Encrypted;encrypted.Algorithm=encInfo.EncryptionMethod.Algorithm;if(lcp&&encrypted.Algorithm!=="http://www.idpf.org/2008/embedding"&&encrypted.Algorithm!=="http://ns.adobe.com/pdf/enc#RC"){encrypted.Profile=lcp.Encryption.Profile;encrypted.Scheme="http://readium.org/2014/01/lcp"}if(encInfo.EncryptionProperties&&encInfo.EncryptionProperties.length){encInfo.EncryptionProperties.forEach(prop=>{if(prop.Compression){if(prop.Compression.OriginalLength){encrypted.OriginalLength=parseFloat(prop.Compression.OriginalLength)}if(prop.Compression.Method==="8"){encrypted.Compression="deflate"}else{encrypted.Compression="none"}}})}publication.Resources.forEach((l,_i,_arr)=>{const filePath=l.Href;if(filePath===encInfo.CipherData.CipherReference.URI){if(!l.Properties){l.Properties=new metadata_properties_1.Properties}l.Properties.Encrypted=encrypted}});publication.Spine.forEach((l,_i,_arr)=>{const filePath=l.Href;if(filePath===encInfo.CipherData.CipherReference.URI){if(!l.Properties){l.Properties=new metadata_properties_1.Properties}l.Properties.Encrypted=encrypted}})})};const fillPageListFromNCX=(publication,_rootfile,_opf,ncx)=>{if(ncx.PageList&&ncx.PageList.PageTarget&&ncx.PageList.PageTarget.length){ncx.PageList.PageTarget.forEach(pageTarget=>{const link=new publication_link_1.Link;const zipPath=path.join(path.dirname(ncx.ZipPath),pageTarget.Content.Src).replace(/\\/g,"/");link.Href=zipPath;link.Title=pageTarget.Text;if(!publication.PageList){publication.PageList=[]}publication.PageList.push(link)})}};const fillTOCFromNCX=(publication,rootfile,opf,ncx)=>{if(ncx.Points&&ncx.Points.length){ncx.Points.forEach(point=>{if(!publication.TOC){publication.TOC=[]}fillTOCFromNavPoint(publication,rootfile,opf,ncx,point,publication.TOC)})}};const fillLandmarksFromGuide=(publication,_rootfile,opf)=>{if(opf.Guide&&opf.Guide.length){opf.Guide.forEach(ref=>{if(ref.Href){const link=new publication_link_1.Link;const zipPath=path.join(path.dirname(opf.ZipPath),ref.Href).replace(/\\/g,"/");link.Href=zipPath;link.Title=ref.Title;if(!publication.Landmarks){publication.Landmarks=[]}publication.Landmarks.push(link)}})}};const fillTOCFromNavPoint=(publication,rootfile,opf,ncx,point,node)=>{const link=new publication_link_1.Link;const zipPath=path.join(path.dirname(ncx.ZipPath),point.Content.Src).replace(/\\/g,"/");link.Href=zipPath;link.Title=point.Text;if(point.Points&&point.Points.length){point.Points.forEach(p=>{if(!link.Children){link.Children=[]}fillTOCFromNavPoint(publication,rootfile,opf,ncx,p,link.Children)})}node.push(link)};const fillSubject=(publication,_rootfile,opf)=>{if(opf.Metadata&&opf.Metadata.Subject&&opf.Metadata.Subject.length){opf.Metadata.Subject.forEach(s=>{const sub=new metadata_subject_1.Subject;sub.Name=s.Data;sub.Code=s.Term;sub.Scheme=s.Authority;if(!publication.Metadata.Subject){publication.Metadata.Subject=[]}publication.Metadata.Subject.push(sub)})}};const fillCalibreSerieInfo=(publication,_rootfile,opf)=>{let serie;let seriePosition;if(opf.Metadata&&opf.Metadata.Meta&&opf.Metadata.Meta.length){opf.Metadata.Meta.forEach(m=>{if(m.Name==="calibre:series"){serie=m.Content}if(m.Name==="calibre:series_index"){seriePosition=parseFloat(m.Content)}})}if(serie){const collection=new metadata_collection_1.Collection;collection.Name=serie;if(seriePosition){collection.Position=seriePosition}if(!publication.Metadata.BelongsTo){publication.Metadata.BelongsTo=new metadata_belongsto_1.BelongsTo}if(!publication.Metadata.BelongsTo.Series){publication.Metadata.BelongsTo.Series=[]}publication.Metadata.BelongsTo.Series.push(collection)}};const fillTOCFromNavDoc=async(publication,_rootfile,_opf,zip)=>{const navLink=publication.GetNavDoc();if(!navLink){return}const navDocFilePath=navLink.Href;if(!zip.hasEntry(navDocFilePath)){return}let navDocZipStream_;try{navDocZipStream_=await zip.entryStreamPromise(navDocFilePath)}catch(err){debug(err);return Promise.reject(err)}const navDocZipStream=navDocZipStream_.stream;let navDocZipData;try{navDocZipData=await BufferUtils_1.streamToBufferPromise(navDocZipStream)}catch(err){debug(err);return Promise.reject(err)}const navDocStr=navDocZipData.toString("utf8");const navXmlDoc=(new xmldom.DOMParser).parseFromString(navDocStr);const select=xpath.useNamespaces({epub:"http://www.idpf.org/2007/ops",xhtml:"http://www.w3.org/1999/xhtml"});const navs=select("/xhtml:html/xhtml:body//xhtml:nav",navXmlDoc);if(navs&&navs.length){navs.forEach(navElement=>{const typeNav=select("@epub:type",navElement);if(typeNav&&typeNav.length){const olElem=select("xhtml:ol",navElement);const roles=typeNav[0].value;const role=roles.trim().split(" ")[0];switch(role){case"toc":{publication.TOC=[];fillTOCFromNavDocWithOL(select,olElem,publication.TOC,navLink.Href);break}case"page-list":{publication.PageList=[];fillTOCFromNavDocWithOL(select,olElem,publication.PageList,navLink.Href);break}case"landmarks":{publication.Landmarks=[];fillTOCFromNavDocWithOL(select,olElem,publication.Landmarks,navLink.Href);break}case"lot":{publication.LOT=[];fillTOCFromNavDocWithOL(select,olElem,publication.LOT,navLink.Href);break}case"loa":{publication.LOA=[];fillTOCFromNavDocWithOL(select,olElem,publication.LOA,navLink.Href);break}case"loi":{publication.LOI=[];fillTOCFromNavDocWithOL(select,olElem,publication.LOI,navLink.Href);break}case"lov":{publication.LOV=[];fillTOCFromNavDocWithOL(select,olElem,publication.LOV,navLink.Href);break}default:{break}}}})}};const fillTOCFromNavDocWithOL=(select,olElems,node,navDocPath)=>{olElems.forEach(olElem=>{const liElems=select("xhtml:li",olElem);if(liElems&&liElems.length){liElems.forEach(liElem=>{const link=new publication_link_1.Link;node.push(link);const aElems=select("xhtml:a",liElem);if(aElems&&aElems.length>0){const aHref=select("@href",aElems[0]);if(aHref&&aHref.length){let val=aHref[0].value;if(val[0]==="#"){val=path.basename(navDocPath)+val}const zipPath=path.join(path.dirname(navDocPath),val).replace(/\\/g,"/");link.Href=zipPath}let aText=aElems[0].textContent;if(aText&&aText.length){aText=aText.trim();aText=aText.replace(/\s\s+/g," ");link.Title=aText}}else{const liFirstChild=select("xhtml:*[1]",liElem);if(liFirstChild&&liFirstChild.length&&liFirstChild[0].textContent){link.Title=liFirstChild[0].textContent.trim()}}const olElemsNext=select("xhtml:ol",liElem);if(olElemsNext&&olElemsNext.length){if(!link.Children){link.Children=[]}fillTOCFromNavDocWithOL(select,olElemsNext,link.Children,navDocPath)}})}})};const addCoverRel=async(publication,rootfile,opf)=>{let coverID;if(opf.Metadata&&opf.Metadata.Meta&&opf.Metadata.Meta.length){opf.Metadata.Meta.find(meta=>{if(meta.Name==="cover"){coverID=meta.Content;return true}return false})}if(coverID){let manifestInfo;try{manifestInfo=await findInManifestByID(publication,rootfile,opf,coverID)}catch(err){debug(err);return}if(manifestInfo&&manifestInfo.Href&&publication.Resources&&publication.Resources.length){const href=manifestInfo.Href;const linky=publication.Resources.find((item,_i,_arr)=>{if(item.Href===href){return true}return false});if(linky){linky.AddRel("cover");await exports.addCoverDimensions(publication,linky)}}}};const findPropertiesInSpineForManifest=(linkEpub,_rootfile,opf)=>{if(opf.Spine&&opf.Spine.Items&&opf.Spine.Items.length){const it=opf.Spine.Items.find(item=>{if(item.IDref===linkEpub.ID){return true}return false});if(it&&it.Properties){return it.Properties}}return undefined};const findInSpineByHref=(publication,href)=>{if(publication.Spine&&publication.Spine.length){const ll=publication.Spine.find(l=>{if(l.Href===href){return true}return false});if(ll){return ll}}return undefined};const findMetaByRefineAndProperty=(rootfile,opf,ID,property)=>{const ret=findAllMetaByRefineAndProperty(rootfile,opf,ID,property);if(ret.length){return ret[0]}return undefined};const findAllMetaByRefineAndProperty=(_rootfile,opf,ID,property)=>{const metas=[];const refineID="#"+ID;if(opf.Metadata&&opf.Metadata.Meta){opf.Metadata.Meta.forEach(metaTag=>{if(metaTag.Refine===refineID&&metaTag.Property===property){metas.push(metaTag)}})}return metas};const getEpubVersion=(rootfile,opf)=>{if(rootfile.Version){return rootfile.Version}else if(opf.Version){return opf.Version}return undefined};const isEpub3OrMore=(rootfile,opf)=>{const version=getEpubVersion(rootfile,opf);return version===epub3||version===epub301||version===epub31};const findLinKByHref=(publication,_rootfile,_opf,href)=>{if(publication.Spine&&publication.Spine.length){const ll=publication.Spine.find(l=>{const pathInZip=l.Href;if(href===pathInZip){return true}return false});if(ll){return ll}}return undefined}},{"../_utils/stream/BufferUtils":5,"../_utils/xml-js-mapper":28,"../_utils/zip/zipFactory":35,"../models/media-overlay":48,"../models/metadata":58,"../models/metadata-belongsto":49,"../models/metadata-collection":51,"../models/metadata-contributor":53,"../models/metadata-encrypted":54,"../models/metadata-media-overlay":55,"../models/metadata-properties":56,"../models/metadata-subject":57,"../models/publication":60,"../models/publication-link":59,"../transform/transformer":136,"./epub/container":89,"./epub/encryption":98,"./epub/lcp":107,"./epub/ncx":112,"./epub/opf":124,"./epub/opf-author":113,"./epub/smil":131,"./epub/smil-seq":129,debug:267,"image-size":386,moment:433,path:undefined,querystring:undefined,"ta-json":541,xmldom:573,xpath:576}],88:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Rootfile=class Rootfile{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@full-path"),tslib_1.__metadata("design:type",String)],Rootfile.prototype,"Path",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@media-type"),tslib_1.__metadata("design:type",String)],Rootfile.prototype,"Type",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@version"),tslib_1.__metadata("design:type",String)],Rootfile.prototype,"Version",void 0);Rootfile=tslib_1.__decorate([xml_js_mapper_1.XmlObject()],Rootfile);exports.Rootfile=Rootfile},{"../../_utils/xml-js-mapper":28,tslib:554}],89:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const container_rootfile_1=require("./container-rootfile");let Container=class Container{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("epub:rootfiles/epub:rootfile",{epub:"urn:oasis:names:tc:opendocument:xmlns:container",rendition:"http://www.idpf.org/2013/rendition"}),xml_js_mapper_1.XmlItemType(container_rootfile_1.Rootfile),tslib_1.__metadata("design:type",Array)],Container.prototype,"Rootfile",void 0);Container=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dummyNS:"dummyURI",epub:"wrong2",rendition:"wrong1"})],Container);exports.Container=Container},{"../../_utils/xml-js-mapper":28,"./container-rootfile":88,tslib:554}],90:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Compression=class Compression{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@Method"),tslib_1.__metadata("design:type",String)],Compression.prototype,"Method",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@OriginalLength"),tslib_1.__metadata("design:type",String)],Compression.prototype,"OriginalLength",void 0);Compression=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],Compression);exports.Compression=Compression},{"../../_utils/xml-js-mapper":28,tslib:554}],91:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const encryption_cypherreference_1=require("./encryption-cypherreference");let CipherData=class CipherData{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("enc:CipherReference"),tslib_1.__metadata("design:type",encryption_cypherreference_1.CipherReference)],CipherData.prototype,"CipherReference",void 0);CipherData=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],CipherData);exports.CipherData=CipherData},{"../../_utils/xml-js-mapper":28,"./encryption-cypherreference":92,tslib:554}],92:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let CipherReference=class CipherReference{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@URI"),tslib_1.__metadata("design:type",String)],CipherReference.prototype,"URI",void 0);CipherReference=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],CipherReference);exports.CipherReference=CipherReference},{"../../_utils/xml-js-mapper":28,tslib:554}],93:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const encryption_cypherdata_1=require("./encryption-cypherdata");const encryption_keyinfo_1=require("./encryption-keyinfo");const encryption_method_1=require("./encryption-method");const encryption_property_1=require("./encryption-property");let EncryptedData=class EncryptedData{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("enc:EncryptionMethod"),tslib_1.__metadata("design:type",encryption_method_1.EncryptionMethod)],EncryptedData.prototype,"EncryptionMethod",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ds:KeyInfo"),tslib_1.__metadata("design:type",encryption_keyinfo_1.KeyInfo)],EncryptedData.prototype,"KeyInfo",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("enc:CipherData"),tslib_1.__metadata("design:type",encryption_cypherdata_1.CipherData)],EncryptedData.prototype,"CipherData",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("enc:EncryptionProperties/enc:EncryptionProperty"),xml_js_mapper_1.XmlItemType(encryption_property_1.EncryptionProperty),tslib_1.__metadata("design:type",Array)],EncryptedData.prototype,"EncryptionProperties",void 0);EncryptedData=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],EncryptedData);exports.EncryptedData=EncryptedData},{"../../_utils/xml-js-mapper":28,"./encryption-cypherdata":91,"./encryption-keyinfo":94,"./encryption-method":95,"./encryption-property":96,tslib:554}],94:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const encryption_retrievalmethod_1=require("./encryption-retrievalmethod");let KeyInfo=class KeyInfo{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ds:RetrievalMethod"),tslib_1.__metadata("design:type",encryption_retrievalmethod_1.RetrievalMethod)],KeyInfo.prototype,"RetrievalMethod",void 0);KeyInfo=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],KeyInfo);exports.KeyInfo=KeyInfo},{"../../_utils/xml-js-mapper":28,"./encryption-retrievalmethod":97,tslib:554}],95:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let EncryptionMethod=class EncryptionMethod{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@Algorithm"),tslib_1.__metadata("design:type",String)],EncryptionMethod.prototype,"Algorithm",void 0);EncryptionMethod=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],EncryptionMethod);exports.EncryptionMethod=EncryptionMethod},{"../../_utils/xml-js-mapper":28,tslib:554}],96:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const encryption_compression_1=require("./encryption-compression");let EncryptionProperty=class EncryptionProperty{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ns:Compression"),tslib_1.__metadata("design:type",encryption_compression_1.Compression)],EncryptionProperty.prototype,"Compression",void 0);EncryptionProperty=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],EncryptionProperty);exports.EncryptionProperty=EncryptionProperty},{"../../_utils/xml-js-mapper":28,"./encryption-compression":90,tslib:554}],97:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let RetrievalMethod=class RetrievalMethod{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@URI"),tslib_1.__metadata("design:type",String)],RetrievalMethod.prototype,"URI",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@Type"),tslib_1.__metadata("design:type",String)],RetrievalMethod.prototype,"Type",void 0);RetrievalMethod=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],RetrievalMethod);exports.RetrievalMethod=RetrievalMethod},{"../../_utils/xml-js-mapper":28,tslib:554}],98:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const encryption_data_1=require("./encryption-data");let Encryption=class Encryption{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("enc:EncryptedData"),xml_js_mapper_1.XmlItemType(encryption_data_1.EncryptedData),tslib_1.__metadata("design:type",Array)],Encryption.prototype,"EncryptedData",void 0);Encryption=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ds:"http://www.w3.org/2000/09/xmldsig#",enc:"http://www.w3.org/2001/04/xmlenc#",encryption:"urn:oasis:names:tc:opendocument:xmlns:container",ns:"http://www.idpf.org/2016/encryption#compression"})],Encryption);exports.Encryption=Encryption},{"../../_utils/xml-js-mapper":28,"./encryption-data":93,tslib:554}],99:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LCPCertificateBasicProfile=`-----BEGIN CERTIFICATE-----\nMIIFZzCCA0+gAwIBAgIJAMWdQaWkExQEMA0GCSqGSIb3DQEBCwUAMGcxCzAJBgNV\nBAYTAkZSMQ4wDAYDVQQHEwVQYXJpczEPMA0GA1UEChMGRURSTGFiMRIwEAYDVQQL\nEwlMQ1AgVGVzdHMxIzAhBgNVBAMTGkVEUkxhYiBSZWFkaXVtIExDUCB0ZXN0IENB\nMB4XDTE2MDMyNDIyNTc1OVoXDTM4MDExODIyNTc1OVowZzELMAkGA1UEBhMCRlIx\nDjAMBgNVBAcTBVBhcmlzMQ8wDQYDVQQKEwZFRFJMYWIxEjAQBgNVBAsTCUxDUCBU\nZXN0czEjMCEGA1UEAxMaRURSTGFiIFJlYWRpdW0gTENQIHRlc3QgQ0EwggIiMA0G\nCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDfxfveCISAmGDhXcZj+q6cXD3zQDr/\nkRG4fnqBm1rxFN1nshI0ObSMNwcV98c3D2swewQ6qFa+4INRakrF4ObtPtiQ7Tti\n/qYWf41rez/8x5M+DFeca8SIuf4Wi2u310EoplQm4JX3Qnvax7I/ivl+BtSzDY1h\n4bkA9dPPrp/vGa8dh0rIYaclJ9UEW/i4jyQkry36BfGKboOMYZioqPJfOFIIiSTb\n0nvHERssaS2MobWACinRRwL7Mih4mUV/v9Vhry3jN+wfxMKA+J/zcsY6p9HVgIhE\nkmyDIH4/vw+mLMcUQ4YFQeIOKRBRLHYcLHOUQNNIDw2gJAK/G/rfOeW3zu/tYCpk\nhT8PWrhd4zM+TdegpeFkidnNSvYFlKrojWhJisty3HuD+BXQ6ArjikIj4dCYc2BM\nZVUH50FEwl1ZpndQAySMCceOX8t6RX4jqbvhbyXjqR/Nr5SaN8G6gHemX/5LWdOa\n5D8dUwOGbQjR7igLQy+4UNefjvFp8Z5/No/vLD/3Ziwau+wFjcGXs9UdpqKgIzfW\nKAu77vPVb0vUvDczOU4HRx4bB3eAb4gI6meBYHKroogIpteDOfco48zhweiMGasz\nHwBU4rylW/seV/2l5IunsGNRSlVtT4z5xL7kn5fcYy5ZtStJrrOKZSJWaH+3Mvmb\nsgwPqlZYMNAoiwIDAQABoxYwFDASBgNVHRMBAf8ECDAGAQH/AgEAMA0GCSqGSIb3\nDQEBCwUAA4ICAQCmMGGqjnIo0BgItLmKrXW8yFRncZdjLAS5fCRNO0C34vDrm9N/\ny1qhoITqQ+vKVeA+M/sWzTQihPz+pyWGfvjqxdagpepPERX0ZFENMJaP5Sc8R0bL\ny96Xxk7L/SnVvJ2jgRP/D7X6jQrLxQbDceFRPelE+KcrcfAQdTLO9VTJEIkr4j6L\nBMDjqMcXASo+/t5fAhz3rUlo1gvhgdX+E4iJSoPwimr0pmUWFS473eS8Jrgn5meG\nPq5Kmf3Q+1hYlisIAzRARJXWJxBxeI+VLCF2c90m1MLXpET4tm2s8Ln9ePw4edGM\ncrwbR4nTEN+aGbPyo0yhs+smQA28B1LRnnZRyj70wHii6PN9+qtbr1S41FzKnLvO\nEBU63KxOE+NiN4p8q/Gx2J+lDtNy4OKEjgNNpp9fpzEbcSdnNK1dmZTbdKFV/QqT\nDQ8paH3TWX0eel/LeBHyn5W6A6B0maLRKNN98jcbqDyx2RfkEcEqvlQgEThNKH/6\n2hfQ8BEAzFdevtenyjKbnHmJ861t/hAnvCbbxMrT0gzgK2+gnqTFJiON3s0SObsG\nivPak5w5wtvreFvEHCntnhIocuqc9AOFoDdQo9idB25YUzwot0NNL6pShMNXNE6F\nImaa1w7gBDc+DVRYAoJzHF+awCOgqEDEXu67GHgcrXpQ9Ts7Eq+wjNy9OQ==\n-----END CERTIFICATE-----`;exports.DUMMY_CRL=`-----BEGIN X509 CRL-----\nMIICrTCBljANBgkqhkiG9w0BAQQFADBnMQswCQYDVQQGEwJGUjEOMAwGA1UEBxMF\nUGFyaXMxDzANBgNVBAoTBkVEUkxhYjESMBAGA1UECxMJTENQIFRlc3RzMSMwIQYD\nVQQDExpFRFJMYWIgUmVhZGl1bSBMQ1AgdGVzdCBDQRcNMTcwOTI2MTM1NTE1WhcN\nMjcwOTI0MTM1NTE1WjANBgkqhkiG9w0BAQQFAAOCAgEA27f50xnlaKGUdqs6u6rD\nWsR75z+tZrH4J2aA5E9I/K5fNe20FftQZb6XNjVQTNvawoMW0q+Rh9dVjDnV5Cfw\nptchu738ZQr8iCOLQHvIM6wqQj7XwMqvyNaaeGMZxfRMGlx7T9DOwvtWFCc5X0ik\nYGPPV19CFf1cas8x9Y3LE8GmCtX9eUrotWLKRggG+qRTCri/SlaoicfzqhViiGeL\ndW8RpG/Q6ox+tLHti3fxOgZarMgMbRmUa6OTh8pnxrfnrdtD2PbwACvaEMCpNCZR\naSTMRmIxw8UUbUA/JxDIwyISGn3ZRgbFAglYzaX80rSQZr6e0bFlzHl1xZtZ0Raz\nGQWP9vvfH5ESp6FsD98g//VYigatoPz/EKU4cfP+1W/Zrr4jRSBFB37rxASXPBcx\nL8cerb9nnRbAEvIqxnR4e0ZkhMyqIrLUZ3Jva0fC30kdtp09/KJ22mXKBz85wUQa\n7ihiSz7pov0R9hpY93fvt++idHBECRNGOeBC4wRtGxpru8ZUa0/KFOD0HXHMQDwV\ncIa/72T0okStOqjIOcWflxl/eAvUXwtet9Ht3o9giSl6hAObAeleMJOB37Bq9ASf\nh4w7d5he8zqfsCGjaG1OVQNWVAGxQQViWVysfcJohny4PIVAc9KkjCFa/QrkNGjr\nkUiV/PFCwL66iiF666DrXLY=\n-----END X509 CRL-----`},{}],100:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let ContentKey=class ContentKey{};tslib_1.__decorate([ta_json_1.JsonProperty("encrypted_value"),tslib_1.__metadata("design:type",String)],ContentKey.prototype,"EncryptedValue",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("algorithm"),tslib_1.__metadata("design:type",String)],ContentKey.prototype,"Algorithm",void 0);ContentKey=tslib_1.__decorate([ta_json_1.JsonObject()],ContentKey);exports.ContentKey=ContentKey},{"ta-json":541,tslib:554}],101:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");const lcp_contentkey_1=require("./lcp-contentkey");const lcp_userkey_1=require("./lcp-userkey");let Encryption=class Encryption{};tslib_1.__decorate([ta_json_1.JsonProperty("profile"),tslib_1.__metadata("design:type",String)],Encryption.prototype,"Profile",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("content_key"),tslib_1.__metadata("design:type",lcp_contentkey_1.ContentKey)],Encryption.prototype,"ContentKey",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("user_key"),tslib_1.__metadata("design:type",lcp_userkey_1.UserKey)],Encryption.prototype,"UserKey",void 0);Encryption=tslib_1.__decorate([ta_json_1.JsonObject()],Encryption);exports.Encryption=Encryption},{"./lcp-contentkey":100,"./lcp-userkey":106,"ta-json":541,tslib:554}],102:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let Link=class Link{HasRel(rel){return this.Rel===rel}SetRel(rel){this.Rel=rel}};tslib_1.__decorate([ta_json_1.JsonProperty("length"),tslib_1.__metadata("design:type",Number)],Link.prototype,"Length",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("href"),tslib_1.__metadata("design:type",String)],Link.prototype,"Href",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("title"),tslib_1.__metadata("design:type",String)],Link.prototype,"Title",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("type"),tslib_1.__metadata("design:type",String)],Link.prototype,"Type",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("templated"),tslib_1.__metadata("design:type",String)],Link.prototype,"Templated",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("profile"),tslib_1.__metadata("design:type",String)],Link.prototype,"Profile",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("hash"),tslib_1.__metadata("design:type",String)],Link.prototype,"Hash",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("rel"),tslib_1.__metadata("design:type",String)],Link.prototype,"Rel",void 0);Link=tslib_1.__decorate([ta_json_1.JsonObject()],Link);exports.Link=Link},{"ta-json":541,tslib:554}],103:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let Rights=class Rights{};tslib_1.__decorate([ta_json_1.JsonProperty("print"),tslib_1.__metadata("design:type",Number)],Rights.prototype,"Print",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("copy"),tslib_1.__metadata("design:type",Number)],Rights.prototype,"Copy",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("start"),tslib_1.__metadata("design:type",Date)],Rights.prototype,"Start",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("end"),tslib_1.__metadata("design:type",Date)],Rights.prototype,"End",void 0);Rights=tslib_1.__decorate([ta_json_1.JsonObject()],Rights);exports.Rights=Rights},{"ta-json":541,tslib:554}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let Signature=class Signature{};tslib_1.__decorate([ta_json_1.JsonProperty("algorithm"),tslib_1.__metadata("design:type",String)],Signature.prototype,"Algorithm",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("certificate"),tslib_1.__metadata("design:type",String)],Signature.prototype,"Certificate",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("value"),tslib_1.__metadata("design:type",String)],Signature.prototype,"Value",void 0);Signature=tslib_1.__decorate([ta_json_1.JsonObject()],Signature);exports.Signature=Signature},{"ta-json":541,tslib:554}],105:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let User=class User{};tslib_1.__decorate([ta_json_1.JsonProperty("id"),tslib_1.__metadata("design:type",String)],User.prototype,"ID",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("email"),tslib_1.__metadata("design:type",String)],User.prototype,"Email",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("name"),tslib_1.__metadata("design:type",String)],User.prototype,"Name",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("encrypted"),ta_json_1.JsonElementType(String),tslib_1.__metadata("design:type",Array)],User.prototype,"Encrypted",void 0);User=tslib_1.__decorate([ta_json_1.JsonObject()],User);exports.User=User},{"ta-json":541,tslib:554}],106:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const ta_json_1=require("ta-json");let UserKey=class UserKey{};tslib_1.__decorate([ta_json_1.JsonProperty("text_hint"),tslib_1.__metadata("design:type",String)],UserKey.prototype,"TextHint",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("algorithm"),tslib_1.__metadata("design:type",String)],UserKey.prototype,"Algorithm",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("key_check"),tslib_1.__metadata("design:type",String)],UserKey.prototype,"KeyCheck",void 0);UserKey=tslib_1.__decorate([ta_json_1.JsonObject()],UserKey);exports.UserKey=UserKey},{"ta-json":541,tslib:554}],107:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const bind=require("bindings");const crypto=require("crypto");const fs=require("fs");const path=require("path");const debug_=require("debug");const ta_json_1=require("ta-json");const lcp_certificate_1=require("./lcp-certificate");const lcp_encryption_1=require("./lcp-encryption");const lcp_link_1=require("./lcp-link");const lcp_rights_1=require("./lcp-rights");const lcp_signature_1=require("./lcp-signature");const lcp_user_1=require("./lcp-user");const AES_BLOCK_SIZE=16;const debug=debug_("r2:publication:lcp");let LCP_NATIVE_PLUGIN_PATH=path.join(process.cwd(),"LCP","lcp.node");function setLcpNativePluginPath(filepath){LCP_NATIVE_PLUGIN_PATH=filepath;debug(LCP_NATIVE_PLUGIN_PATH);const exists=fs.existsSync(LCP_NATIVE_PLUGIN_PATH);debug("LCP NATIVE PLUGIN: "+(exists?"OKAY":"MISSING"));return exists}exports.setLcpNativePluginPath=setLcpNativePluginPath;let LCP=class LCP{constructor(){this._usesNativeNodePlugin=undefined}isNativeNodePlugin(){this.init();return this._usesNativeNodePlugin}isReady(){if(this.isNativeNodePlugin()){return typeof this._lcpContext!=="undefined"}return typeof this.ContentKey!=="undefined"}init(){if(typeof this._usesNativeNodePlugin!=="undefined"){return}this.ContentKey=undefined;this._lcpContext=undefined;if(fs.existsSync(LCP_NATIVE_PLUGIN_PATH)){debug("LCP _usesNativeNodePlugin");const filePath=path.dirname(LCP_NATIVE_PLUGIN_PATH);const fileName=path.basename(LCP_NATIVE_PLUGIN_PATH);debug(filePath);debug(fileName);this._usesNativeNodePlugin=true;this._lcpNative=bind({bindings:fileName,module_root:filePath,try:[["module_root","bindings"]]})}else{debug("LCP JS impl");this._usesNativeNodePlugin=false;this._lcpNative=undefined}}async decrypt(encryptedContent){if(!this.isNativeNodePlugin()){return Promise.reject("direct decrypt buffer only for native plugin")}if(!this._lcpContext){return Promise.reject("LCP context not initialized (needs setUserPassphrase)")}return new Promise((resolve,reject)=>{this._lcpNative.decrypt(this._lcpContext,encryptedContent,(er,decryptedContent)=>{if(er){debug(er);reject(er);return}const padding=decryptedContent[decryptedContent.length-1];const buff=decryptedContent.slice(0,decryptedContent.length-padding);resolve(buff)})})}async setUserPassphrase(pass){this.init();this.userPassphraseHex=pass;if(!this.userPassphraseHex){return false}const check=(this.Encryption.Profile==="http://readium.org/lcp/basic-profile"||this.Encryption.Profile==="http://readium.org/lcp/profile-1.0")&&this.Encryption.UserKey.Algorithm==="http://www.w3.org/2001/04/xmlenc#sha256"&&this.Encryption.ContentKey.Algorithm==="http://www.w3.org/2001/04/xmlenc#aes256-cbc";if(!check){debug("Incorrect LCP fields.");debug(this.Encryption.Profile);debug(this.Encryption.ContentKey.Algorithm);debug(this.Encryption.UserKey.Algorithm);return false}if(this._usesNativeNodePlugin){return new Promise((resolve,_reject)=>{this._lcpNative.findOneValidPassphrase(this.JsonSource,[this.userPassphraseHex],(err,validHashedPassphrase)=>{if(err){debug(err);resolve(false)}else{this._lcpNative.createContext(this.JsonSource,validHashedPassphrase,lcp_certificate_1.DUMMY_CRL,(erro,context)=>{if(erro){debug(erro);resolve(false);return}this._lcpContext=context;resolve(true)})}})})}else{const userKey=new Buffer(this.userPassphraseHex,"hex");const keyCheck=new Buffer(this.Encryption.UserKey.KeyCheck,"base64");const encryptedLicenseID=keyCheck;const iv=encryptedLicenseID.slice(0,AES_BLOCK_SIZE);const encrypted=encryptedLicenseID.slice(AES_BLOCK_SIZE);const decrypteds=[];const decryptStream=crypto.createDecipheriv("aes-256-cbc",userKey,iv);decryptStream.setAutoPadding(false);const buff1=decryptStream.update(encrypted);if(buff1){decrypteds.push(buff1)}const buff2=decryptStream.final();if(buff2){decrypteds.push(buff2)}const decrypted=Buffer.concat(decrypteds);const nPaddingBytes=decrypted[decrypted.length-1];const size=encrypted.length-nPaddingBytes;const decryptedOut=decrypted.slice(0,size).toString("utf8");if(this.ID!==decryptedOut){debug("Failed LCP ID check.");return false}const encryptedContentKey=new Buffer(this.Encryption.ContentKey.EncryptedValue,"base64");const iv2=encryptedContentKey.slice(0,AES_BLOCK_SIZE);const encrypted2=encryptedContentKey.slice(AES_BLOCK_SIZE);const decrypteds2=[];const decryptStream2=crypto.createDecipheriv("aes-256-cbc",userKey,iv2);decryptStream2.setAutoPadding(false);const buff1_=decryptStream2.update(encrypted2);if(buff1_){decrypteds2.push(buff1_)}const buff2_=decryptStream2.final();if(buff2_){decrypteds2.push(buff2_)}const decrypted2=Buffer.concat(decrypteds2);const nPaddingBytes2=decrypted2[decrypted2.length-1];const size2=encrypted2.length-nPaddingBytes2;this.ContentKey=decrypted2.slice(0,size2)}return true}};tslib_1.__decorate([ta_json_1.JsonProperty("id"),tslib_1.__metadata("design:type",String)],LCP.prototype,"ID",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("provider"),tslib_1.__metadata("design:type",String)],LCP.prototype,"Provider",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("issued"),tslib_1.__metadata("design:type",Date)],LCP.prototype,"Issued",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("updated"),tslib_1.__metadata("design:type",Date)],LCP.prototype,"Updated",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("encryption"),tslib_1.__metadata("design:type",lcp_encryption_1.Encryption)],LCP.prototype,"Encryption",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("rights"),tslib_1.__metadata("design:type",lcp_rights_1.Rights)],LCP.prototype,"Rights",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("user"),tslib_1.__metadata("design:type",lcp_user_1.User)],LCP.prototype,"User",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("signature"),tslib_1.__metadata("design:type",lcp_signature_1.Signature)],LCP.prototype,"Signature",void 0);tslib_1.__decorate([ta_json_1.JsonProperty("links"),ta_json_1.JsonElementType(lcp_link_1.Link),tslib_1.__metadata("design:type",Array)],LCP.prototype,"Links",void 0);LCP=tslib_1.__decorate([ta_json_1.JsonObject()],LCP);exports.LCP=LCP},{"./lcp-certificate":99,"./lcp-encryption":101,"./lcp-link":102,"./lcp-rights":103,"./lcp-signature":104,"./lcp-user":105,bindings:202,crypto:undefined,debug:267,fs:undefined,path:undefined,"ta-json":541,tslib:554}],108:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Content=class Content{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@src"),tslib_1.__metadata("design:type",String)],Content.prototype,"Src",void 0);Content=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ncx:"http://www.daisy.org/z3986/2005/ncx/"})],Content);exports.Content=Content},{"../../_utils/xml-js-mapper":28,tslib:554}],109:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const ncx_content_1=require("./ncx-content");let NavPoint=NavPoint_1=class NavPoint{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ncx:navPoint"),xml_js_mapper_1.XmlItemType(NavPoint_1),tslib_1.__metadata("design:type",Array)],NavPoint.prototype,"Points",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ncx:navLabel/ncx:text/text()"),tslib_1.__metadata("design:type",String)],NavPoint.prototype,"Text",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ncx:content"),tslib_1.__metadata("design:type",ncx_content_1.Content)],NavPoint.prototype,"Content",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@playOrder"),tslib_1.__metadata("design:type",Number)],NavPoint.prototype,"PlayerOrder",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],NavPoint.prototype,"ID",void 0);NavPoint=NavPoint_1=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ncx:"http://www.daisy.org/z3986/2005/ncx/",xml:"http://www.w3.org/XML/1998/namespace"})],NavPoint);exports.NavPoint=NavPoint;var NavPoint_1},{"../../_utils/xml-js-mapper":28,"./ncx-content":108,tslib:554}],110:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const ncx_pagetarget_1=require("./ncx-pagetarget");let PageList=class PageList{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ncx:pageTarget"),xml_js_mapper_1.XmlItemType(ncx_pagetarget_1.PageTarget),tslib_1.__metadata("design:type",Array)],PageList.prototype,"PageTarget",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@class"),tslib_1.__metadata("design:type",String)],PageList.prototype,"Class",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],PageList.prototype,"ID",void 0);PageList=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ncx:"http://www.daisy.org/z3986/2005/ncx/",xml:"http://www.w3.org/XML/1998/namespace"})],PageList);exports.PageList=PageList},{"../../_utils/xml-js-mapper":28,"./ncx-pagetarget":111,tslib:554}],111:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const ncx_content_1=require("./ncx-content");let PageTarget=class PageTarget{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ncx:navLabel/ncx:text/text()"),tslib_1.__metadata("design:type",String)],PageTarget.prototype,"Text",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@value"),tslib_1.__metadata("design:type",String)],PageTarget.prototype,"Value",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@type"),tslib_1.__metadata("design:type",String)],PageTarget.prototype,"Type",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@playOrder"),tslib_1.__metadata("design:type",Number)],PageTarget.prototype,"PlayOrder",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],PageTarget.prototype,"ID",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ncx:content"),tslib_1.__metadata("design:type",ncx_content_1.Content)],PageTarget.prototype,"Content",void 0);PageTarget=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ncx:"http://www.daisy.org/z3986/2005/ncx/",xml:"http://www.w3.org/XML/1998/namespace"})],PageTarget);exports.PageTarget=PageTarget},{"../../_utils/xml-js-mapper":28,"./ncx-content":108,tslib:554}],112:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const ncx_navpoint_1=require("./ncx-navpoint");const ncx_pagelist_1=require("./ncx-pagelist");let NCX=class NCX{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ncx:navMap/ncx:navPoint"),xml_js_mapper_1.XmlItemType(ncx_navpoint_1.NavPoint),tslib_1.__metadata("design:type",Array)],NCX.prototype,"Points",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("ncx:pageList"),tslib_1.__metadata("design:type",ncx_pagelist_1.PageList)],NCX.prototype,"PageList",void 0);NCX=tslib_1.__decorate([xml_js_mapper_1.XmlObject({ncx:"http://www.daisy.org/z3986/2005/ncx/"})],NCX);exports.NCX=NCX},{"../../_utils/xml-js-mapper":28,"./ncx-navpoint":109,"./ncx-pagelist":110,tslib:554}],113:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Author=class Author{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("text()"),tslib_1.__metadata("design:type",String)],Author.prototype,"Data",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@file-as"),tslib_1.__metadata("design:type",String)],Author.prototype,"FileAs",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@role"),tslib_1.__metadata("design:type",String)],Author.prototype,"Role",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],Author.prototype,"ID",void 0);Author=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf",xml:"http://www.w3.org/XML/1998/namespace"})],Author);exports.Author=Author},{"../../_utils/xml-js-mapper":28,tslib:554}],114:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let MetaDate=class MetaDate{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("text()"),tslib_1.__metadata("design:type",String)],MetaDate.prototype,"Data",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@event"),tslib_1.__metadata("design:type",String)],MetaDate.prototype,"Event",void 0);MetaDate=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf"})],MetaDate);exports.MetaDate=MetaDate},{"../../_utils/xml-js-mapper":28,tslib:554}],115:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Identifier=class Identifier{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("text()"),tslib_1.__metadata("design:type",String)],Identifier.prototype,"Data",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],Identifier.prototype,"ID",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@scheme"),tslib_1.__metadata("design:type",String)],Identifier.prototype,"Scheme",void 0);Identifier=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf",xml:"http://www.w3.org/XML/1998/namespace"})],Identifier);exports.Identifier=Identifier},{"../../_utils/xml-js-mapper":28,tslib:554}],116:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Manifest=class Manifest{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],Manifest.prototype,"ID",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@href"),tslib_1.__metadata("design:type",String)],Manifest.prototype,"Href",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@media-type"),tslib_1.__metadata("design:type",String)],Manifest.prototype,"MediaType",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@media-fallback"),tslib_1.__metadata("design:type",String)],Manifest.prototype,"Fallback",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@properties"),tslib_1.__metadata("design:type",String)],Manifest.prototype,"Properties",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@media-overlay"),tslib_1.__metadata("design:type",String)],Manifest.prototype,"MediaOverlay",void 0);Manifest=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf",xml:"http://www.w3.org/XML/1998/namespace"})],Manifest);exports.Manifest=Manifest},{"../../_utils/xml-js-mapper":28,tslib:554}],117:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const opf_author_1=require("./opf-author");const opf_date_1=require("./opf-date");const opf_identifier_1=require("./opf-identifier");const opf_metafield_1=require("./opf-metafield");const opf_subject_1=require("./opf-subject");const opf_title_1=require("./opf-title");let Metadata=class Metadata{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:title"),xml_js_mapper_1.XmlItemType(opf_title_1.Title),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Title",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:language/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Language",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:identifier"),xml_js_mapper_1.XmlItemType(opf_identifier_1.Identifier),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Identifier",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:creator"),xml_js_mapper_1.XmlItemType(opf_author_1.Author),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Creator",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:subject"),xml_js_mapper_1.XmlItemType(opf_subject_1.Subject),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Subject",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:description/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Description",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:publisher/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Publisher",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:contributor"),xml_js_mapper_1.XmlItemType(opf_author_1.Author),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Contributor",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:date"),xml_js_mapper_1.XmlItemType(opf_date_1.MetaDate),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Date",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:type/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Type",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:format/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Format",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:source/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Source",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:relation/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Relation",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:coverage/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Coverage",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dc:rights/text()"),xml_js_mapper_1.XmlItemType(String),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Rights",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opf:meta"),xml_js_mapper_1.XmlItemType(opf_metafield_1.Metafield),tslib_1.__metadata("design:type",Array)],Metadata.prototype,"Meta",void 0);Metadata=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf"})],Metadata);exports.Metadata=Metadata},{"../../_utils/xml-js-mapper":28,"./opf-author":113,"./opf-date":114,"./opf-identifier":115,"./opf-metafield":118,"./opf-subject":122,"./opf-title":123,tslib:554}],118:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Metafield=class Metafield{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("text()"),tslib_1.__metadata("design:type",String)],Metafield.prototype,"Data",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@name"),tslib_1.__metadata("design:type",String)],Metafield.prototype,"Name",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@content"),tslib_1.__metadata("design:type",String)],Metafield.prototype,"Content",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@refines"),tslib_1.__metadata("design:type",String)],Metafield.prototype,"Refine",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@scheme"),tslib_1.__metadata("design:type",String)],Metafield.prototype,"Scheme",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@property"),tslib_1.__metadata("design:type",String)],Metafield.prototype,"Property",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],Metafield.prototype,"ID",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@lang | @xml:lang"),tslib_1.__metadata("design:type",String)],Metafield.prototype,"Lang",void 0);Metafield=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf",xml:"http://www.w3.org/XML/1998/namespace"})],Metafield);exports.Metafield=Metafield},{"../../_utils/xml-js-mapper":28,tslib:554}],119:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Reference=class Reference{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@href"),tslib_1.__metadata("design:type",String)],Reference.prototype,"Href",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@title"),tslib_1.__metadata("design:type",String)],Reference.prototype,"Title",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@type"),tslib_1.__metadata("design:type",String)],Reference.prototype,"Type",void 0);Reference=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf"})],Reference);exports.Reference=Reference},{"../../_utils/xml-js-mapper":28,tslib:554}],120:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const opf_spineitem_1=require("./opf-spineitem");let Spine=class Spine{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],Spine.prototype,"ID",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@toc"),tslib_1.__metadata("design:type",String)],Spine.prototype,"Toc",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@page-progression-direction"),tslib_1.__metadata("design:type",String)],Spine.prototype,"PageProgression",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opf:itemref"),xml_js_mapper_1.XmlItemType(opf_spineitem_1.SpineItem),tslib_1.__metadata("design:type",Array)],Spine.prototype,"Items",void 0);Spine=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf",xml:"http://www.w3.org/XML/1998/namespace"})],Spine);exports.Spine=Spine},{"../../_utils/xml-js-mapper":28,"./opf-spineitem":121,tslib:554}],121:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let SpineItem=class SpineItem{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@idref"),tslib_1.__metadata("design:type",String)],SpineItem.prototype,"IDref",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@linear"),tslib_1.__metadata("design:type",String)],SpineItem.prototype,"Linear",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],SpineItem.prototype,"ID",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@properties"),tslib_1.__metadata("design:type",String)],SpineItem.prototype,"Properties",void 0);SpineItem=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf",xml:"http://www.w3.org/XML/1998/namespace"})],SpineItem);exports.SpineItem=SpineItem},{"../../_utils/xml-js-mapper":28,tslib:554}],122:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Subject=class Subject{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("text()"),tslib_1.__metadata("design:type",String)],Subject.prototype,"Data",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@term"),tslib_1.__metadata("design:type",String)],Subject.prototype,"Term",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@authority"),tslib_1.__metadata("design:type",String)],Subject.prototype,"Authority",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@lang | @xml:lang"),tslib_1.__metadata("design:type",String)],Subject.prototype,"Lang",void 0);Subject=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf",xml:"http://www.w3.org/XML/1998/namespace"})],Subject);exports.Subject=Subject},{"../../_utils/xml-js-mapper":28,tslib:554}],123:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Title=class Title{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("text()"),tslib_1.__metadata("design:type",String)],Title.prototype,"Data",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@id | @xml:id"),tslib_1.__metadata("design:type",String)],Title.prototype,"ID",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@lang | @xml:lang"),tslib_1.__metadata("design:type",String)],Title.prototype,"Lang",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@dir"),tslib_1.__metadata("design:type",String)],Title.prototype,"Dir",void 0);Title=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf",xml:"http://www.w3.org/XML/1998/namespace"})],Title);exports.Title=Title},{"../../_utils/xml-js-mapper":28,tslib:554}],124:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const opf_manifest_1=require("./opf-manifest");const opf_metadata_1=require("./opf-metadata");const opf_reference_1=require("./opf-reference");const opf_spine_1=require("./opf-spine");let OPF=class OPF{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opf:metadata"),tslib_1.__metadata("design:type",opf_metadata_1.Metadata)],OPF.prototype,"Metadata",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opf:manifest/opf:item"),xml_js_mapper_1.XmlItemType(opf_manifest_1.Manifest),tslib_1.__metadata("design:type",Array)],OPF.prototype,"Manifest",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opf:spine"),tslib_1.__metadata("design:type",opf_spine_1.Spine)],OPF.prototype,"Spine",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("opf:guide/opf:reference"),xml_js_mapper_1.XmlItemType(opf_reference_1.Reference),tslib_1.__metadata("design:type",Array)],OPF.prototype,"Guide",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@unique-identifier"),tslib_1.__metadata("design:type",String)],OPF.prototype,"UniqueIdentifier",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@dir"),tslib_1.__metadata("design:type",String)],OPF.prototype,"Dir",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@version"),tslib_1.__metadata("design:type",String)],OPF.prototype,"Version",void 0);OPF=tslib_1.__decorate([xml_js_mapper_1.XmlObject({dc:"http://purl.org/dc/elements/1.1/",opf:"http://www.idpf.org/2007/opf"})],OPF);exports.OPF=OPF},{"../../_utils/xml-js-mapper":28,"./opf-manifest":116,"./opf-metadata":117,"./opf-reference":119,"./opf-spine":120,tslib:554}],125:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Audio=class Audio{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@src"),tslib_1.__metadata("design:type",String)],Audio.prototype,"Src",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@clipBegin"),tslib_1.__metadata("design:type",String)],Audio.prototype,"ClipBegin",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@clipEnd"),tslib_1.__metadata("design:type",String)],Audio.prototype,"ClipEnd",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@epub:type"),tslib_1.__metadata("design:type",String)],Audio.prototype,"EpubType",void 0);Audio=tslib_1.__decorate([xml_js_mapper_1.XmlObject({epub:"http://www.idpf.org/2007/ops",smil:"http://www.w3.org/ns/SMIL"})],Audio);exports.Audio=Audio},{"../../_utils/xml-js-mapper":28,tslib:554}],126:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const smil_seq_1=require("./smil-seq");let Body=class Body extends smil_seq_1.Seq{constructor(){super(...arguments);this.isBody=true}};Body=tslib_1.__decorate([xml_js_mapper_1.XmlObject({epub:"http://www.idpf.org/2007/ops",smil:"http://www.w3.org/ns/SMIL"})],Body);exports.Body=Body},{"../../_utils/xml-js-mapper":28,"./smil-seq":129,tslib:554}],127:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const smil_audio_1=require("./smil-audio");const smil_seq_or_par_1=require("./smil-seq-or-par");const smil_text_1=require("./smil-text");let Par=class Par extends smil_seq_or_par_1.SeqOrPar{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("smil:text"),tslib_1.__metadata("design:type",smil_text_1.Text)],Par.prototype,"Text",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("smil:audio"),tslib_1.__metadata("design:type",smil_audio_1.Audio)],Par.prototype,"Audio",void 0);Par=tslib_1.__decorate([xml_js_mapper_1.XmlObject({epub:"http://www.idpf.org/2007/ops",smil:"http://www.w3.org/ns/SMIL"}),xml_js_mapper_1.XmlDiscriminatorValue("par")],Par);exports.Par=Par},{"../../_utils/xml-js-mapper":28,"./smil-audio":125,"./smil-seq-or-par":128,"./smil-text":130,tslib:554}],128:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let SeqOrPar=class SeqOrPar{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@epub:type"),tslib_1.__metadata("design:type",String)],SeqOrPar.prototype,"EpubType",void 0);SeqOrPar=tslib_1.__decorate([xml_js_mapper_1.XmlObject({epub:"http://www.idpf.org/2007/ops",smil:"http://www.w3.org/ns/SMIL"}),xml_js_mapper_1.XmlDiscriminatorProperty("localName")],SeqOrPar);exports.SeqOrPar=SeqOrPar},{"../../_utils/xml-js-mapper":28,tslib:554}],129:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const smil_seq_or_par_1=require("./smil-seq-or-par");let Seq=class Seq extends smil_seq_or_par_1.SeqOrPar{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("smil:par|smil:seq"),xml_js_mapper_1.XmlItemType(smil_seq_or_par_1.SeqOrPar),tslib_1.__metadata("design:type",Array)],Seq.prototype,"Children",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@epub:textref"),tslib_1.__metadata("design:type",String)],Seq.prototype,"TextRef",void 0);Seq=tslib_1.__decorate([xml_js_mapper_1.XmlObject({epub:"http://www.idpf.org/2007/ops",smil:"http://www.w3.org/ns/SMIL"}),xml_js_mapper_1.XmlDiscriminatorValue("seq")],Seq);exports.Seq=Seq},{"../../_utils/xml-js-mapper":28,"./smil-seq-or-par":128,tslib:554}],130:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");let Text=class Text{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@src"),tslib_1.__metadata("design:type",String)],Text.prototype,"Src",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("@epub:type"),tslib_1.__metadata("design:type",String)],Text.prototype,"EpubType",void 0);Text=tslib_1.__decorate([xml_js_mapper_1.XmlObject({epub:"http://www.idpf.org/2007/ops",smil:"http://www.w3.org/ns/SMIL"})],Text);exports.Text=Text},{"../../_utils/xml-js-mapper":28,tslib:554}],131:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const tslib_1=require("tslib");const xml_js_mapper_1=require("../../_utils/xml-js-mapper");const smil_body_1=require("./smil-body");const smil_par_1=require("./smil-par");let SMIL=class SMIL{};tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("smil:body"),tslib_1.__metadata("design:type",smil_body_1.Body)],SMIL.prototype,"Body",void 0);tslib_1.__decorate([xml_js_mapper_1.XmlXPathSelector("dummy"),tslib_1.__metadata("design:type",smil_par_1.Par)],SMIL.prototype,"Par",void 0);SMIL=tslib_1.__decorate([xml_js_mapper_1.XmlObject({epub:"http://www.idpf.org/2007/ops",smil:"http://www.w3.org/ns/SMIL"})],SMIL);exports.SMIL=SMIL},{"../../_utils/xml-js-mapper":28,"./smil-body":126,"./smil-par":127,tslib:554}],132:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const path=require("path");const cbz_1=require("./cbz");const epub_1=require("./epub");async function PublicationParsePromise(filePath){const fileName=path.basename(filePath);const ext=path.extname(fileName).toLowerCase();return/\.epub[3]?$/.test(ext)?epub_1.EpubParsePromise(filePath):cbz_1.CbzParsePromise(filePath)}exports.PublicationParsePromise=PublicationParsePromise},{"./cbz":84,"./epub":87,path:undefined}],133:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const crypto=require("crypto");const zlib=require("zlib");const RangeStream_1=require("../_utils/stream/RangeStream");const debug_=require("debug");const BufferUtils_1=require("../_utils/stream/BufferUtils");const debug=debug_("r2:transformer:lcp");const AES_BLOCK_SIZE=16;const readStream=async(s,n)=>{return new Promise((resolve,reject)=>{const onReadable=()=>{const b=s.read(n);s.removeListener("readable",onReadable);s.removeListener("error",reject);resolve(b)};s.on("readable",onReadable);s.on("error",reject)})};class TransformerLCP{supports(publication,link){if(!publication.LCP){return false}if(!publication.LCP.isReady()){debug("LCP not ready!");return false}const check=link.Properties.Encrypted.Scheme==="http://readium.org/2014/01/lcp"&&(link.Properties.Encrypted.Profile==="http://readium.org/lcp/basic-profile"||link.Properties.Encrypted.Profile==="http://readium.org/lcp/profile-1.0")&&link.Properties.Encrypted.Algorithm==="http://www.w3.org/2001/04/xmlenc#aes256-cbc";if(!check){debug("Incorrect resource LCP fields.");debug(link.Properties.Encrypted.Scheme);debug(link.Properties.Encrypted.Profile);debug(link.Properties.Encrypted.Algorithm);return false}return true}async transformStream(publication,link,stream,isPartialByteRangeRequest,partialByteBegin,partialByteEnd){let plainTextSize=-1;let nativelyDecryptedStream;if(publication.LCP.isNativeNodePlugin()){debug("DECRYPT: "+link.Href);let fullEncryptedBuffer;try{fullEncryptedBuffer=await BufferUtils_1.streamToBufferPromise(stream.stream)}catch(err){debug(err);return Promise.reject("OUCH!")}let nativelyDecryptedBuffer;try{nativelyDecryptedBuffer=await publication.LCP.decrypt(fullEncryptedBuffer)}catch(err){debug(err);return Promise.reject("OUCH!")}plainTextSize=nativelyDecryptedBuffer.length;link.Properties.Encrypted.DecryptedLengthBeforeInflate=plainTextSize;if(link.Properties.Encrypted.OriginalLength&&link.Properties.Encrypted.Compression==="none"&&link.Properties.Encrypted.OriginalLength!==plainTextSize){debug(`############### `+`LCP transformStream() LENGTH NOT MATCH `+`link.Properties.Encrypted.OriginalLength !== plainTextSize: `+`${link.Properties.Encrypted.OriginalLength} !== ${plainTextSize}`)}nativelyDecryptedStream=BufferUtils_1.bufferToStream(nativelyDecryptedBuffer)}else{let cryptoInfo;let cypherBlockPadding=-1;if(link.Properties.Encrypted.DecryptedLengthBeforeInflate>0){plainTextSize=link.Properties.Encrypted.DecryptedLengthBeforeInflate;cypherBlockPadding=link.Properties.Encrypted.CypherBlockPadding}else{try{cryptoInfo=await this.getDecryptedSizeStream(publication,link,stream)}catch(err){debug(err);return Promise.reject(err)}plainTextSize=cryptoInfo.length;cypherBlockPadding=cryptoInfo.padding;link.Properties.Encrypted.DecryptedLengthBeforeInflate=plainTextSize;link.Properties.Encrypted.CypherBlockPadding=cypherBlockPadding;try{stream=await stream.reset()}catch(err){debug(err);return Promise.reject(err)}if(link.Properties.Encrypted.OriginalLength&&link.Properties.Encrypted.Compression==="none"&&link.Properties.Encrypted.OriginalLength!==plainTextSize){debug(`############### `+`LCP transformStream() LENGTH NOT MATCH `+`link.Properties.Encrypted.OriginalLength !== plainTextSize: `+`${link.Properties.Encrypted.OriginalLength} !== ${plainTextSize}`)}}}if(partialByteBegin<0){partialByteBegin=0}if(partialByteEnd<0){partialByteEnd=plainTextSize-1;if(link.Properties.Encrypted.OriginalLength){partialByteEnd=link.Properties.Encrypted.OriginalLength-1}}let destStream;if(nativelyDecryptedStream){destStream=nativelyDecryptedStream}else{let rawDecryptStream;let ivBuffer;if(link.Properties.Encrypted.CypherBlockIV){ivBuffer=Buffer.from(link.Properties.Encrypted.CypherBlockIV,"binary");const cypherRangeStream=new RangeStream_1.RangeStream(AES_BLOCK_SIZE,stream.length-1,stream.length);stream.stream.pipe(cypherRangeStream);rawDecryptStream=cypherRangeStream}else{try{ivBuffer=await readStream(stream.stream,AES_BLOCK_SIZE)}catch(err){debug(err);return Promise.reject(err)}link.Properties.Encrypted.CypherBlockIV=ivBuffer.toString("binary");stream.stream.resume();rawDecryptStream=stream.stream}const decryptStream=crypto.createDecipheriv("aes-256-cbc",publication.LCP.ContentKey,ivBuffer);decryptStream.setAutoPadding(false);rawDecryptStream.pipe(decryptStream);destStream=decryptStream;if(link.Properties.Encrypted.CypherBlockPadding){const cypherUnpaddedStream=new RangeStream_1.RangeStream(0,plainTextSize-1,plainTextSize);destStream.pipe(cypherUnpaddedStream);destStream=cypherUnpaddedStream}}if(link.Properties.Encrypted.Compression==="deflate"){const inflateStream=zlib.createInflateRaw();destStream.pipe(inflateStream);destStream=inflateStream}const l=link.Properties.Encrypted.OriginalLength?link.Properties.Encrypted.OriginalLength:plainTextSize;if(isPartialByteRangeRequest){const rangeStream=new RangeStream_1.RangeStream(partialByteBegin,partialByteEnd,l);destStream.pipe(rangeStream);destStream=rangeStream}const sal={length:l,reset:async()=>{let resetedStream;try{resetedStream=await stream.reset()}catch(err){debug(err);return Promise.reject(err)}if(!resetedStream){return Promise.reject("??")}return this.transformStream(publication,link,resetedStream,isPartialByteRangeRequest,partialByteBegin,partialByteEnd)},stream:destStream};return Promise.resolve(sal)}async getDecryptedSizeStream(publication,_link,stream){return new Promise((resolve,reject)=>{const TWO_AES_BLOCK_SIZE=2*AES_BLOCK_SIZE;if(stream.length<TWO_AES_BLOCK_SIZE){reject("crypto err");return}const readPos=stream.length-TWO_AES_BLOCK_SIZE;const cypherRangeStream=new RangeStream_1.RangeStream(readPos,readPos+TWO_AES_BLOCK_SIZE-1,stream.length);stream.stream.pipe(cypherRangeStream);const decrypteds=[];cypherRangeStream.on("readable",()=>{const ivBuffer=cypherRangeStream.read(AES_BLOCK_SIZE);if(!ivBuffer){return}const encrypted=cypherRangeStream.read(AES_BLOCK_SIZE);const decryptStream=crypto.createDecipheriv("aes-256-cbc",publication.LCP.ContentKey,ivBuffer);decryptStream.setAutoPadding(false);const buff1=decryptStream.update(encrypted);if(buff1){decrypteds.push(buff1)}const buff2=decryptStream.final();if(buff2){decrypteds.push(buff2)}});cypherRangeStream.on("end",()=>{const decrypted=Buffer.concat(decrypteds);const nPaddingBytes=decrypted[AES_BLOCK_SIZE-1];const size=stream.length-AES_BLOCK_SIZE-nPaddingBytes;const res={length:size,padding:nPaddingBytes};resolve(res)});cypherRangeStream.on("error",()=>{reject("DECRYPT err")})})}}exports.TransformerLCP=TransformerLCP},{"../_utils/stream/BufferUtils":5,"../_utils/stream/RangeStream":6,crypto:undefined,debug:267,zlib:undefined}],134:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const BufferUtils_1=require("../_utils/stream/BufferUtils");class TransformerObfAdobe{supports(_publication,link){return link.Properties.Encrypted.Algorithm==="http://ns.adobe.com/pdf/enc#RC"}async transformStream(publication,link,stream,_isPartialByteRangeRequest,_partialByteBegin,_partialByteEnd){let data;try{data=await BufferUtils_1.streamToBufferPromise(stream.stream)}catch(err){return Promise.reject(err)}let buff;try{buff=await this.transformBuffer(publication,link,data)}catch(err){return Promise.reject(err)}const sal={length:buff.length,reset:async()=>{return Promise.resolve(sal)},stream:BufferUtils_1.bufferToStream(buff)};return Promise.resolve(sal)}async transformBuffer(publication,_link,data){let pubID=publication.Metadata.Identifier;pubID=pubID.replace("urn:uuid:","");pubID=pubID.replace(/-/g,"");pubID=pubID.replace(/\s/g,"");const key=[];for(let i=0;i<16;i++){const byteHex=pubID.substr(i*2,2);const byteNumer=parseInt(byteHex,16);key.push(byteNumer)}const prefixLength=1024;const zipDataPrefix=data.slice(0,prefixLength);for(let i=0;i<prefixLength;i++){zipDataPrefix[i]=zipDataPrefix[i]^key[i%key.length]}const zipDataRemainder=data.slice(prefixLength);return Promise.resolve(Buffer.concat([zipDataPrefix,zipDataRemainder]))}}exports.TransformerObfAdobe=TransformerObfAdobe},{"../_utils/stream/BufferUtils":5}],135:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const crypto=require("crypto");const BufferUtils_1=require("../_utils/stream/BufferUtils");class TransformerObfIDPF{supports(_publication,link){return link.Properties.Encrypted.Algorithm==="http://www.idpf.org/2008/embedding"}async transformStream(publication,link,stream,_isPartialByteRangeRequest,_partialByteBegin,_partialByteEnd){let data;try{data=await BufferUtils_1.streamToBufferPromise(stream.stream)}catch(err){return Promise.reject(err)}let buff;try{buff=await this.transformBuffer(publication,link,data)}catch(err){return Promise.reject(err)}const sal={length:buff.length,reset:async()=>{return Promise.resolve(sal)},stream:BufferUtils_1.bufferToStream(buff)};return Promise.resolve(sal)}async transformBuffer(publication,_link,data){let pubID=publication.Metadata.Identifier;pubID=pubID.replace(/\s/g,"");const checkSum=crypto.createHash("sha1");checkSum.update(pubID);const key=checkSum.digest();const prefixLength=1040;const zipDataPrefix=data.slice(0,prefixLength);for(let i=0;i<prefixLength;i++){zipDataPrefix[i]=zipDataPrefix[i]^key[i%key.length]}const zipDataRemainder=data.slice(prefixLength);return Promise.resolve(Buffer.concat([zipDataPrefix,zipDataRemainder]))}}exports.TransformerObfIDPF=TransformerObfIDPF},{"../_utils/stream/BufferUtils":5,crypto:undefined}],136:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const transformer_lcp_1=require("./transformer-lcp");const transformer_obf_adobe_1=require("./transformer-obf-adobe");const transformer_obf_idpf_1=require("./transformer-obf-idpf");class Transformers{constructor(){this.transformers=[]}static instance(){return Transformers._instance}static async tryStream(publication,link,stream,isPartialByteRangeRequest,partialByteBegin,partialByteEnd){return Transformers.instance()._tryStream(publication,link,stream,isPartialByteRangeRequest,partialByteBegin,partialByteEnd)}add(transformer){if(this.transformers.indexOf(transformer)<0){this.transformers.push(transformer)}}async _tryStream(publication,link,stream,isPartialByteRangeRequest,partialByteBegin,partialByteEnd){let transformedData;const transformer=this.transformers.find(t=>{if(!t.supports(publication,link)){return false}transformedData=t.transformStream(publication,link,stream,isPartialByteRangeRequest,partialByteBegin,partialByteEnd);if(transformedData){return true}return false});if(transformer&&transformedData){return transformedData}return Promise.reject("transformers fail (stream)")}}Transformers._instance=new Transformers;exports.Transformers=Transformers;Transformers.instance().add(new transformer_obf_adobe_1.TransformerObfAdobe);Transformers.instance().add(new transformer_obf_idpf_1.TransformerObfIDPF);Transformers.instance().add(new transformer_lcp_1.TransformerLCP)},{"./transformer-lcp":133,"./transformer-obf-adobe":134,"./transformer-obf-idpf":135}],137:[function(require,module,exports){"use strict";var Negotiator=require("negotiator");var mime=require("mime-types");module.exports=Accepts;function Accepts(req){if(!(this instanceof Accepts)){return new Accepts(req)}this.headers=req.headers;this.negotiator=new Negotiator(req)}Accepts.prototype.type=Accepts.prototype.types=function(types_){var types=types_;if(types&&!Array.isArray(types)){types=new Array(arguments.length);for(var i=0;i<types.length;i++){types[i]=arguments[i]}}if(!types||types.length===0){return this.negotiator.mediaTypes()}if(!this.headers.accept){return types[0]}var mimes=types.map(extToMime);var accepts=this.negotiator.mediaTypes(mimes.filter(validMime));var first=accepts[0];return first?types[mimes.indexOf(first)]:false};Accepts.prototype.encoding=Accepts.prototype.encodings=function(encodings_){var encodings=encodings_;if(encodings&&!Array.isArray(encodings)){encodings=new Array(arguments.length);for(var i=0;i<encodings.length;i++){encodings[i]=arguments[i]}}if(!encodings||encodings.length===0){return this.negotiator.encodings()}return this.negotiator.encodings(encodings)[0]||false};Accepts.prototype.charset=Accepts.prototype.charsets=function(charsets_){var charsets=charsets_;if(charsets&&!Array.isArray(charsets)){charsets=new Array(arguments.length);for(var i=0;i<charsets.length;i++){charsets[i]=arguments[i]}}if(!charsets||charsets.length===0){return this.negotiator.charsets()}return this.negotiator.charsets(charsets)[0]||false};Accepts.prototype.lang=Accepts.prototype.langs=Accepts.prototype.language=Accepts.prototype.languages=function(languages_){var languages=languages_;if(languages&&!Array.isArray(languages)){languages=new Array(arguments.length);for(var i=0;i<languages.length;i++){languages[i]=arguments[i]}}if(!languages||languages.length===0){return this.negotiator.languages()}return this.negotiator.languages(languages)[0]||false};function extToMime(type){return type.indexOf("/")===-1?mime.lookup(type):type}function validMime(type){return typeof type==="string"}},{"mime-types":429,negotiator:440}],138:[function(require,module,exports){"use strict";var KEYWORDS=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];module.exports=function(metaSchema,keywordsJsonPointers){for(var i=0;i<keywordsJsonPointers.length;i++){metaSchema=JSON.parse(JSON.stringify(metaSchema));var segments=keywordsJsonPointers[i].split("/");var keywords=metaSchema;var j;for(j=1;j<segments.length;j++)keywords=keywords[segments[j]];for(j=0;j<KEYWORDS.length;j++){var key=KEYWORDS[j];var schema=keywords[key];if(schema){keywords[key]={anyOf:[schema,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]}}}}return metaSchema}},{}],139:[function(require,module,exports){"use strict";var compileSchema=require("./compile"),resolve=require("./compile/resolve"),Cache=require("./cache"),SchemaObject=require("./compile/schema_obj"),stableStringify=require("fast-json-stable-stringify"),formats=require("./compile/formats"),rules=require("./compile/rules"),$dataMetaSchema=require("./$data"),patternGroups=require("./patternGroups"),util=require("./compile/util"),co=require("co");module.exports=Ajv;Ajv.prototype.validate=validate;Ajv.prototype.compile=compile;Ajv.prototype.addSchema=addSchema;Ajv.prototype.addMetaSchema=addMetaSchema;Ajv.prototype.validateSchema=validateSchema;Ajv.prototype.getSchema=getSchema;Ajv.prototype.removeSchema=removeSchema;Ajv.prototype.addFormat=addFormat;Ajv.prototype.errorsText=errorsText;Ajv.prototype._addSchema=_addSchema;Ajv.prototype._compile=_compile;Ajv.prototype.compileAsync=require("./compile/async");var customKeyword=require("./keyword");Ajv.prototype.addKeyword=customKeyword.add;Ajv.prototype.getKeyword=customKeyword.get;Ajv.prototype.removeKeyword=customKeyword.remove;var errorClasses=require("./compile/error_classes");Ajv.ValidationError=errorClasses.Validation;Ajv.MissingRefError=errorClasses.MissingRef;Ajv.$dataMetaSchema=$dataMetaSchema;var META_SCHEMA_ID="http://json-schema.org/draft-06/schema";var META_IGNORE_OPTIONS=["removeAdditional","useDefaults","coerceTypes"];var META_SUPPORT_DATA=["/properties"];function Ajv(opts){if(!(this instanceof Ajv))return new Ajv(opts);opts=this._opts=util.copy(opts)||{};setLogger(this);this._schemas={};this._refs={};this._fragments={};this._formats=formats(opts.format);var schemaUriFormat=this._schemaUriFormat=this._formats["uri-reference"];this._schemaUriFormatFunc=function(str){return schemaUriFormat.test(str)};this._cache=opts.cache||new Cache;this._loadingSchemas={};this._compilations=[];this.RULES=rules();this._getId=chooseGetId(opts);opts.loopRequired=opts.loopRequired||Infinity;if(opts.errorDataPath=="property")opts._errorDataPathProperty=true;if(opts.serialize===undefined)opts.serialize=stableStringify;this._metaOpts=getMetaSchemaOptions(this);if(opts.formats)addInitialFormats(this);addDraft6MetaSchema(this);if(typeof opts.meta=="object")this.addMetaSchema(opts.meta);addInitialSchemas(this);if(opts.patternGroups)patternGroups(this)}function validate(schemaKeyRef,data){var v;if(typeof schemaKeyRef=="string"){v=this.getSchema(schemaKeyRef);if(!v)throw new Error('no schema with key or ref "'+schemaKeyRef+'"')}else{var schemaObj=this._addSchema(schemaKeyRef);v=schemaObj.validate||this._compile(schemaObj)}var valid=v(data);if(v.$async===true)return this._opts.async=="*"?co(valid):valid;this.errors=v.errors;return valid}function compile(schema,_meta){var schemaObj=this._addSchema(schema,undefined,_meta);return schemaObj.validate||this._compile(schemaObj)}function addSchema(schema,key,_skipValidation,_meta){if(Array.isArray(schema)){for(var i=0;i<schema.length;i++)this.addSchema(schema[i],undefined,_skipValidation,_meta);return this}var id=this._getId(schema);if(id!==undefined&&typeof id!="string")throw new Error("schema id must be string");key=resolve.normalizeId(key||id);checkUnique(this,key);this._schemas[key]=this._addSchema(schema,_skipValidation,_meta,true);return this}function addMetaSchema(schema,key,skipValidation){this.addSchema(schema,key,skipValidation,true);return this}function validateSchema(schema,throwOrLogError){var $schema=schema.$schema;if($schema!==undefined&&typeof $schema!="string")throw new Error("$schema must be a string");$schema=$schema||this._opts.defaultMeta||defaultMeta(this);if(!$schema){this.logger.warn("meta-schema not available");this.errors=null;return true}var currentUriFormat=this._formats.uri;this._formats.uri=typeof currentUriFormat=="function"?this._schemaUriFormatFunc:this._schemaUriFormat;var valid;try{valid=this.validate($schema,schema)}finally{this._formats.uri=currentUriFormat}if(!valid&&throwOrLogError){var message="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(message);else throw new Error(message)}return valid}function defaultMeta(self){var meta=self._opts.meta;self._opts.defaultMeta=typeof meta=="object"?self._getId(meta)||meta:self.getSchema(META_SCHEMA_ID)?META_SCHEMA_ID:undefined;return self._opts.defaultMeta}function getSchema(keyRef){var schemaObj=_getSchemaObj(this,keyRef);switch(typeof schemaObj){case"object":return schemaObj.validate||this._compile(schemaObj);case"string":return this.getSchema(schemaObj);case"undefined":return _getSchemaFragment(this,keyRef)}}function _getSchemaFragment(self,ref){var res=resolve.schema.call(self,{schema:{}},ref);if(res){var schema=res.schema,root=res.root,baseId=res.baseId;var v=compileSchema.call(self,schema,root,undefined,baseId);self._fragments[ref]=new SchemaObject({ref:ref,fragment:true,schema:schema,root:root,baseId:baseId,validate:v});return v}}function _getSchemaObj(self,keyRef){keyRef=resolve.normalizeId(keyRef);return self._schemas[keyRef]||self._refs[keyRef]||self._fragments[keyRef]}function removeSchema(schemaKeyRef){if(schemaKeyRef instanceof RegExp){_removeAllSchemas(this,this._schemas,schemaKeyRef);_removeAllSchemas(this,this._refs,schemaKeyRef);return this}switch(typeof schemaKeyRef){case"undefined":_removeAllSchemas(this,this._schemas);_removeAllSchemas(this,this._refs);this._cache.clear();return this;case"string":var schemaObj=_getSchemaObj(this,schemaKeyRef);if(schemaObj)this._cache.del(schemaObj.cacheKey);delete this._schemas[schemaKeyRef];delete this._refs[schemaKeyRef];return this;case"object":var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schemaKeyRef):schemaKeyRef;this._cache.del(cacheKey);var id=this._getId(schemaKeyRef);if(id){id=resolve.normalizeId(id);delete this._schemas[id];delete this._refs[id]}}return this}function _removeAllSchemas(self,schemas,regex){for(var keyRef in schemas){var schemaObj=schemas[keyRef];if(!schemaObj.meta&&(!regex||regex.test(keyRef))){self._cache.del(schemaObj.cacheKey);delete schemas[keyRef]}}}function _addSchema(schema,skipValidation,meta,shouldAddSchema){if(typeof schema!="object"&&typeof schema!="boolean")throw new Error("schema should be object or boolean");var serialize=this._opts.serialize;var cacheKey=serialize?serialize(schema):schema;var cached=this._cache.get(cacheKey);if(cached)return cached;shouldAddSchema=shouldAddSchema||this._opts.addUsedSchema!==false;var id=resolve.normalizeId(this._getId(schema));if(id&&shouldAddSchema)checkUnique(this,id);var willValidate=this._opts.validateSchema!==false&&!skipValidation;var recursiveMeta;if(willValidate&&!(recursiveMeta=id&&id==resolve.normalizeId(schema.$schema)))this.validateSchema(schema,true);var localRefs=resolve.ids.call(this,schema);var schemaObj=new SchemaObject({id:id,schema:schema,localRefs:localRefs,cacheKey:cacheKey,meta:meta});if(id[0]!="#"&&shouldAddSchema)this._refs[id]=schemaObj;this._cache.put(cacheKey,schemaObj);if(willValidate&&recursiveMeta)this.validateSchema(schema,true);return schemaObj}function _compile(schemaObj,root){if(schemaObj.compiling){schemaObj.validate=callValidate;callValidate.schema=schemaObj.schema;callValidate.errors=null;callValidate.root=root?root:callValidate;if(schemaObj.schema.$async===true)callValidate.$async=true;return callValidate}schemaObj.compiling=true;var currentOpts;if(schemaObj.meta){currentOpts=this._opts;this._opts=this._metaOpts}var v;try{v=compileSchema.call(this,schemaObj.schema,root,schemaObj.localRefs)}finally{schemaObj.compiling=false;if(schemaObj.meta)this._opts=currentOpts}schemaObj.validate=v;schemaObj.refs=v.refs;schemaObj.refVal=v.refVal;schemaObj.root=v.root;return v;function callValidate(){var _validate=schemaObj.validate;var result=_validate.apply(null,arguments);callValidate.errors=_validate.errors;return result}}function chooseGetId(opts){switch(opts.schemaId){case"$id":return _get$Id;case"id":return _getId;default:return _get$IdOrId}}function _getId(schema){if(schema.$id)this.logger.warn("schema $id ignored",schema.$id);return schema.id}function _get$Id(schema){if(schema.id)this.logger.warn("schema id ignored",schema.id);return schema.$id}function _get$IdOrId(schema){if(schema.$id&&schema.id&&schema.$id!=schema.id)throw new Error("schema $id is different from id");return schema.$id||schema.id}function errorsText(errors,options){errors=errors||this.errors;if(!errors)return"No errors";options=options||{};var separator=options.separator===undefined?", ":options.separator;var dataVar=options.dataVar===undefined?"data":options.dataVar;var text="";for(var i=0;i<errors.length;i++){var e=errors[i];if(e)text+=dataVar+e.dataPath+" "+e.message+separator}return text.slice(0,-separator.length)}function addFormat(name,format){if(typeof format=="string")format=new RegExp(format);this._formats[name]=format;return this}function addDraft6MetaSchema(self){var $dataSchema;if(self._opts.$data){$dataSchema=require("./refs/$data.json");self.addMetaSchema($dataSchema,$dataSchema.$id,true)}if(self._opts.meta===false)return;var metaSchema=require("./refs/json-schema-draft-06.json");if(self._opts.$data)metaSchema=$dataMetaSchema(metaSchema,META_SUPPORT_DATA);self.addMetaSchema(metaSchema,META_SCHEMA_ID,true);self._refs["http://json-schema.org/schema"]=META_SCHEMA_ID}function addInitialSchemas(self){var optsSchemas=self._opts.schemas;if(!optsSchemas)return;if(Array.isArray(optsSchemas))self.addSchema(optsSchemas);else for(var key in optsSchemas)self.addSchema(optsSchemas[key],key)}function addInitialFormats(self){for(var name in self._opts.formats){var format=self._opts.formats[name];self.addFormat(name,format)}}function checkUnique(self,id){if(self._schemas[id]||self._refs[id])throw new Error('schema with key or id "'+id+'" already exists')}function getMetaSchemaOptions(self){var metaOpts=util.copy(self._opts);for(var i=0;i<META_IGNORE_OPTIONS.length;i++)delete metaOpts[META_IGNORE_OPTIONS[i]];return metaOpts}function setLogger(self){var logger=self._opts.logger;if(logger===false){self.logger={log:noop,warn:noop,error:noop}}else{if(logger===undefined)logger=console;if(!(typeof logger=="object"&&logger.log&&logger.warn&&logger.error))throw new Error("logger must implement log, warn and error methods");self.logger=logger}}function noop(){}},{"./$data":138,"./cache":140,"./compile":145,"./compile/async":142,"./compile/error_classes":143,"./compile/formats":144,"./compile/resolve":146,"./compile/rules":147,"./compile/schema_obj":148,"./compile/util":150,"./keyword":174,"./patternGroups":175,"./refs/$data.json":176,"./refs/json-schema-draft-06.json":177,co:254,"fast-json-stable-stringify":302}],140:[function(require,module,exports){"use strict";var Cache=module.exports=function Cache(){this._cache={}};Cache.prototype.put=function Cache_put(key,value){this._cache[key]=value};Cache.prototype.get=function Cache_get(key){return this._cache[key]};Cache.prototype.del=function Cache_del(key){delete this._cache[key]};Cache.prototype.clear=function Cache_clear(){this._cache={}}},{}],141:[function(require,module,exports){"use strict";module.exports={$ref:require("../dotjs/ref"),allOf:require("../dotjs/allOf"),anyOf:require("../dotjs/anyOf"),const:require("../dotjs/const"),contains:require("../dotjs/contains"),dependencies:require("../dotjs/dependencies"),enum:require("../dotjs/enum"),format:require("../dotjs/format"),items:require("../dotjs/items"),maximum:require("../dotjs/_limit"),minimum:require("../dotjs/_limit"),maxItems:require("../dotjs/_limitItems"),minItems:require("../dotjs/_limitItems"),maxLength:require("../dotjs/_limitLength"),minLength:require("../dotjs/_limitLength"),maxProperties:require("../dotjs/_limitProperties"),minProperties:require("../dotjs/_limitProperties"),multipleOf:require("../dotjs/multipleOf"),not:require("../dotjs/not"),oneOf:require("../dotjs/oneOf"),pattern:require("../dotjs/pattern"),properties:require("../dotjs/properties"),propertyNames:require("../dotjs/propertyNames"),required:require("../dotjs/required"),uniqueItems:require("../dotjs/uniqueItems"),validate:require("../dotjs/validate")}},{"../dotjs/_limit":151,"../dotjs/_limitItems":152,"../dotjs/_limitLength":153,"../dotjs/_limitProperties":154,"../dotjs/allOf":155,"../dotjs/anyOf":156,"../dotjs/const":157,"../dotjs/contains":158,"../dotjs/dependencies":160,"../dotjs/enum":161,"../dotjs/format":162,"../dotjs/items":163,"../dotjs/multipleOf":164,"../dotjs/not":165,"../dotjs/oneOf":166,"../dotjs/pattern":167,"../dotjs/properties":168,"../dotjs/propertyNames":169,"../dotjs/ref":170,"../dotjs/required":171,"../dotjs/uniqueItems":172,"../dotjs/validate":173}],142:[function(require,module,exports){"use strict";var MissingRefError=require("./error_classes").MissingRef;module.exports=compileAsync;function compileAsync(schema,meta,callback){var self=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");if(typeof meta=="function"){callback=meta;meta=undefined}var p=loadMetaSchemaOf(schema).then(function(){var schemaObj=self._addSchema(schema,undefined,meta);return schemaObj.validate||_compileAsync(schemaObj)});if(callback){p.then(function(v){callback(null,v)},callback)}return p;function loadMetaSchemaOf(sch){var $schema=sch.$schema;return $schema&&!self.getSchema($schema)?compileAsync.call(self,{$ref:$schema},true):Promise.resolve()}function _compileAsync(schemaObj){try{return self._compile(schemaObj)}catch(e){if(e instanceof MissingRefError)return loadMissingSchema(e);throw e}function loadMissingSchema(e){var ref=e.missingSchema;if(added(ref))throw new Error("Schema "+ref+" is loaded but "+e.missingRef+" cannot be resolved");var schemaPromise=self._loadingSchemas[ref];if(!schemaPromise){schemaPromise=self._loadingSchemas[ref]=self._opts.loadSchema(ref);schemaPromise.then(removePromise,removePromise)}return schemaPromise.then(function(sch){if(!added(ref)){return loadMetaSchemaOf(sch).then(function(){if(!added(ref))self.addSchema(sch,ref,undefined,meta)})}}).then(function(){return _compileAsync(schemaObj)});function removePromise(){delete self._loadingSchemas[ref]}function added(ref){return self._refs[ref]||self._schemas[ref]}}}}},{"./error_classes":143}],143:[function(require,module,exports){"use strict";var resolve=require("./resolve");module.exports={Validation:errorSubclass(ValidationError),MissingRef:errorSubclass(MissingRefError)};function ValidationError(errors){this.message="validation failed";this.errors=errors;this.ajv=this.validation=true}MissingRefError.message=function(baseId,ref){return"can't resolve reference "+ref+" from id "+baseId};function MissingRefError(baseId,ref,message){this.message=message||MissingRefError.message(baseId,ref);this.missingRef=resolve.url(baseId,ref);this.missingSchema=resolve.normalizeId(resolve.fullPath(this.missingRef))}function errorSubclass(Subclass){Subclass.prototype=Object.create(Error.prototype);Subclass.prototype.constructor=Subclass;return Subclass}},{"./resolve":146}],144:[function(require,module,exports){"use strict";var util=require("./util");var DATE=/^\d\d\d\d-(\d\d)-(\d\d)$/;var DAYS=[0,31,29,31,30,31,30,31,31,30,31,30,31];var TIME=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i;var HOSTNAME=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i;var URI=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URIREF=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var URITEMPLATE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i;var URL=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i;var UUID=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;var JSON_POINTER=/^(?:\/(?:[^~/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;var RELATIVE_JSON_POINTER=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;module.exports=formats;function formats(mode){mode=mode=="full"?"full":"fast";return util.copy(formats[mode])}formats.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":URITEMPLATE,url:URL,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:HOSTNAME,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:UUID,"json-pointer":JSON_POINTER,"relative-json-pointer":RELATIVE_JSON_POINTER};formats.full={date:date,time:time,"date-time":date_time,uri:uri,"uri-reference":URIREF,"uri-template":URITEMPLATE,url:URL,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:hostname,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:UUID,"json-pointer":JSON_POINTER,"relative-json-pointer":RELATIVE_JSON_POINTER};function date(str){var matches=str.match(DATE);if(!matches)return false;var month=+matches[1];var day=+matches[2];return month>=1&&month<=12&&day>=1&&day<=DAYS[month]}function time(str,full){var matches=str.match(TIME);if(!matches)return false;var hour=matches[1];var minute=matches[2];var second=matches[3];var timeZone=matches[5];return hour<=23&&minute<=59&&second<=59&&(!full||timeZone)}var DATE_TIME_SEPARATOR=/t|\s/i;function date_time(str){var dateTime=str.split(DATE_TIME_SEPARATOR);return dateTime.length==2&&date(dateTime[0])&&time(dateTime[1],true)}function hostname(str){return str.length<=255&&HOSTNAME.test(str)}var NOT_URI_FRAGMENT=/\/|:/;function uri(str){return NOT_URI_FRAGMENT.test(str)&&URI.test(str)}var Z_ANCHOR=/[^\\]\\Z/;function regex(str){if(Z_ANCHOR.test(str))return false;try{new RegExp(str);return true}catch(e){return false}}},{"./util":150}],145:[function(require,module,exports){"use strict";var resolve=require("./resolve"),util=require("./util"),errorClasses=require("./error_classes"),stableStringify=require("fast-json-stable-stringify");var validateGenerator=require("../dotjs/validate");var co=require("co");var ucs2length=util.ucs2length;var equal=require("fast-deep-equal");var ValidationError=errorClasses.Validation;module.exports=compile;function compile(schema,root,localRefs,baseId){var self=this,opts=this._opts,refVal=[undefined],refs={},patterns=[],patternsHash={},defaults=[],defaultsHash={},customRules=[];root=root||{schema:schema,refVal:refVal,refs:refs};var c=checkCompiling.call(this,schema,root,baseId);var compilation=this._compilations[c.index];if(c.compiling)return compilation.callValidate=callValidate;var formats=this._formats;var RULES=this.RULES;try{var v=localCompile(schema,root,localRefs,baseId);compilation.validate=v;var cv=compilation.callValidate;if(cv){cv.schema=v.schema;cv.errors=null;cv.refs=v.refs;cv.refVal=v.refVal;cv.root=v.root;cv.$async=v.$async;if(opts.sourceCode)cv.source=v.source}return v}finally{endCompiling.call(this,schema,root,baseId)}function callValidate(){var validate=compilation.validate;var result=validate.apply(null,arguments);callValidate.errors=validate.errors;return result}function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||_root&&_root.schema==_schema;if(_root.schema!=root.schema)return compile.call(self,_schema,_root,localRefs,baseId);var $async=_schema.$async===true;var sourceCode=validateGenerator({isTop:true,schema:_schema,isRoot:isRoot,baseId:baseId,root:_root,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:errorClasses.MissingRef,RULES:RULES,validate:validateGenerator,util:util,resolve:resolve,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:opts,formats:formats,logger:self.logger,self:self});sourceCode=vars(refVal,refValCode)+vars(patterns,patternCode)+vars(defaults,defaultCode)+vars(customRules,customRuleCode)+sourceCode;if(opts.processCode)sourceCode=opts.processCode(sourceCode);var validate;try{var makeValidate=new Function("self","RULES","formats","root","refVal","defaults","customRules","co","equal","ucs2length","ValidationError",sourceCode);validate=makeValidate(self,RULES,formats,root,refVal,defaults,customRules,co,equal,ucs2length,ValidationError);refVal[0]=validate}catch(e){self.logger.error("Error compiling schema, function code:",sourceCode);throw e}validate.schema=_schema;validate.errors=null;validate.refs=refs;validate.refVal=refVal;validate.root=isRoot?validate:_root;if($async)validate.$async=true;if(opts.sourceCode===true){validate.source={code:sourceCode,patterns:patterns,defaults:defaults}}return validate}function resolveRef(baseId,ref,isRoot){ref=resolve.url(baseId,ref);var refIndex=refs[ref];var _refVal,refCode;if(refIndex!==undefined){_refVal=refVal[refIndex];refCode="refVal["+refIndex+"]";return resolvedRef(_refVal,refCode)}if(!isRoot&&root.refs){var rootRefId=root.refs[ref];if(rootRefId!==undefined){_refVal=root.refVal[rootRefId];refCode=addLocalRef(ref,_refVal);return resolvedRef(_refVal,refCode)}}refCode=addLocalRef(ref);var v=resolve.call(self,localCompile,root,ref);if(v===undefined){var localSchema=localRefs&&localRefs[ref];if(localSchema){v=resolve.inlineRef(localSchema,opts.inlineRefs)?localSchema:compile.call(self,localSchema,root,localRefs,baseId)}}if(v===undefined){removeLocalRef(ref)}else{replaceLocalRef(ref,v);return resolvedRef(v,refCode)}}function addLocalRef(ref,v){var refId=refVal.length;refVal[refId]=v;refs[ref]=refId;return"refVal"+refId}function removeLocalRef(ref){delete refs[ref]}function replaceLocalRef(ref,v){var refId=refs[ref];refVal[refId]=v}function resolvedRef(refVal,code){return typeof refVal=="object"||typeof refVal=="boolean"?{code:code,schema:refVal,inline:true}:{code:code,$async:refVal&&refVal.$async}}function usePattern(regexStr){var index=patternsHash[regexStr];if(index===undefined){index=patternsHash[regexStr]=patterns.length;patterns[index]=regexStr}return"pattern"+index}function useDefault(value){switch(typeof value){case"boolean":case"number":return""+value;case"string":return util.toQuotedString(value);case"object":if(value===null)return"null";var valueStr=stableStringify(value);var index=defaultsHash[valueStr];if(index===undefined){index=defaultsHash[valueStr]=defaults.length;defaults[index]=value}return"default"+index}}function useCustomRule(rule,schema,parentSchema,it){var validateSchema=rule.definition.validateSchema;if(validateSchema&&self._opts.validateSchema!==false){var valid=validateSchema(schema);if(!valid){var message="keyword schema is invalid: "+self.errorsText(validateSchema.errors);if(self._opts.validateSchema=="log")self.logger.error(message);else throw new Error(message)}}var compile=rule.definition.compile,inline=rule.definition.inline,macro=rule.definition.macro;var validate;if(compile){validate=compile.call(self,schema,parentSchema,it)}else if(macro){validate=macro.call(self,schema,parentSchema,it);if(opts.validateSchema!==false)self.validateSchema(validate,true)}else if(inline){validate=inline.call(self,it,rule.keyword,schema,parentSchema)}else{validate=rule.definition.validate;if(!validate)return}if(validate===undefined)throw new Error('custom keyword "'+rule.keyword+'"failed to compile');var index=customRules.length;customRules[index]=validate;return{code:"customRule"+index,validate:validate}}}function checkCompiling(schema,root,baseId){var index=compIndex.call(this,schema,root,baseId);if(index>=0)return{index:index,compiling:true};index=this._compilations.length;this._compilations[index]={schema:schema,root:root,baseId:baseId};return{index:index,compiling:false}}function endCompiling(schema,root,baseId){var i=compIndex.call(this,schema,root,baseId);if(i>=0)this._compilations.splice(i,1)}function compIndex(schema,root,baseId){for(var i=0;i<this._compilations.length;i++){var c=this._compilations[i];if(c.schema==schema&&c.root==root&&c.baseId==baseId)return i}return-1}function patternCode(i,patterns){return"var pattern"+i+" = new RegExp("+util.toQuotedString(patterns[i])+");"}function defaultCode(i){return"var default"+i+" = defaults["+i+"];"}function refValCode(i,refVal){return refVal[i]===undefined?"":"var refVal"+i+" = refVal["+i+"];"}function customRuleCode(i){return"var customRule"+i+" = customRules["+i+"];"}function vars(arr,statement){if(!arr.length)return"";var code="";for(var i=0;i<arr.length;i++)code+=statement(i,arr);return code}},{"../dotjs/validate":173,"./error_classes":143,"./resolve":146,"./util":150,co:254,"fast-deep-equal":301,"fast-json-stable-stringify":302}],146:[function(require,module,exports){"use strict";var url=require("url"),equal=require("fast-deep-equal"),util=require("./util"),SchemaObject=require("./schema_obj"),traverse=require("json-schema-traverse");module.exports=resolve;resolve.normalizeId=normalizeId;resolve.fullPath=getFullPath;resolve.url=resolveUrl;resolve.ids=resolveIds;resolve.inlineRef=inlineRef;resolve.schema=resolveSchema;function resolve(compile,root,ref){var refVal=this._refs[ref];if(typeof refVal=="string"){if(this._refs[refVal])refVal=this._refs[refVal];else return resolve.call(this,compile,root,refVal)}refVal=refVal||this._schemas[ref];if(refVal instanceof SchemaObject){return inlineRef(refVal.schema,this._opts.inlineRefs)?refVal.schema:refVal.validate||this._compile(refVal)}var res=resolveSchema.call(this,root,ref);var schema,v,baseId;if(res){schema=res.schema;root=res.root;baseId=res.baseId}if(schema instanceof SchemaObject){v=schema.validate||compile.call(this,schema.schema,root,undefined,baseId)}else if(schema!==undefined){v=inlineRef(schema,this._opts.inlineRefs)?schema:compile.call(this,schema,root,undefined,baseId)}return v}function resolveSchema(root,ref){var p=url.parse(ref,false,true),refPath=_getFullPath(p),baseId=getFullPath(this._getId(root.schema));if(refPath!==baseId){var id=normalizeId(refPath);var refVal=this._refs[id];if(typeof refVal=="string"){return resolveRecursive.call(this,root,refVal,p)}else if(refVal instanceof SchemaObject){if(!refVal.validate)this._compile(refVal);root=refVal}else{refVal=this._schemas[id];if(refVal instanceof SchemaObject){if(!refVal.validate)this._compile(refVal);if(id==normalizeId(ref))return{schema:refVal,root:root,baseId:baseId};root=refVal}else{return}}if(!root.schema)return;baseId=getFullPath(this._getId(root.schema))}return getJsonPointer.call(this,p,baseId,root.schema,root)}function resolveRecursive(root,ref,parsedRef){var res=resolveSchema.call(this,root,ref);if(res){var schema=res.schema;var baseId=res.baseId;root=res.root;var id=this._getId(schema);if(id)baseId=resolveUrl(baseId,id);return getJsonPointer.call(this,parsedRef,baseId,schema,root)}}var PREVENT_SCOPE_CHANGE=util.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(parsedRef,baseId,schema,root){parsedRef.hash=parsedRef.hash||"";if(parsedRef.hash.slice(0,2)!="#/")return;var parts=parsedRef.hash.split("/");for(var i=1;i<parts.length;i++){var part=parts[i];if(part){part=util.unescapeFragment(part);schema=schema[part];if(schema===undefined)break;var id;if(!PREVENT_SCOPE_CHANGE[part]){id=this._getId(schema);if(id)baseId=resolveUrl(baseId,id);if(schema.$ref){var $ref=resolveUrl(baseId,schema.$ref);var res=resolveSchema.call(this,root,$ref);if(res){schema=res.schema;root=res.root;baseId=res.baseId}}}}}if(schema!==undefined&&schema!==root.schema)return{schema:schema,root:root,baseId:baseId}}var SIMPLE_INLINED=util.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(schema,limit){if(limit===false)return false;if(limit===undefined||limit===true)return checkNoRef(schema);else if(limit)return countKeys(schema)<=limit}function checkNoRef(schema){var item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if(typeof item=="object"&&!checkNoRef(item))return false}}else{for(var key in schema){if(key=="$ref")return false;item=schema[key];if(typeof item=="object"&&!checkNoRef(item))return false}}return true}function countKeys(schema){var count=0,item;if(Array.isArray(schema)){for(var i=0;i<schema.length;i++){item=schema[i];if(typeof item=="object")count+=countKeys(item);if(count==Infinity)return Infinity}}else{for(var key in schema){if(key=="$ref")return Infinity;if(SIMPLE_INLINED[key]){count++}else{item=schema[key];if(typeof item=="object")count+=countKeys(item)+1;if(count==Infinity)return Infinity}}}return count}function getFullPath(id,normalize){if(normalize!==false)id=normalizeId(id);var p=url.parse(id,false,true);return _getFullPath(p)}function _getFullPath(p){var protocolSeparator=p.protocol||p.href.slice(0,2)=="//"?"//":"";return(p.protocol||"")+protocolSeparator+(p.host||"")+(p.path||"")+"#"}var TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(id){return id?id.replace(TRAILING_SLASH_HASH,""):""}function resolveUrl(baseId,id){id=normalizeId(id);return url.resolve(baseId,id)}function resolveIds(schema){var schemaId=normalizeId(this._getId(schema));var baseIds={"":schemaId};var fullPaths={"":getFullPath(schemaId,false)};var localRefs={};var self=this;traverse(schema,{allKeys:true},function(sch,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(jsonPtr==="")return;var id=self._getId(sch);var baseId=baseIds[parentJsonPtr];var fullPath=fullPaths[parentJsonPtr]+"/"+parentKeyword;if(keyIndex!==undefined)fullPath+="/"+(typeof keyIndex=="number"?keyIndex:util.escapeFragment(keyIndex));if(typeof id=="string"){id=baseId=normalizeId(baseId?url.resolve(baseId,id):id);var refVal=self._refs[id];if(typeof refVal=="string")refVal=self._refs[refVal];if(refVal&&refVal.schema){if(!equal(sch,refVal.schema))throw new Error('id "'+id+'" resolves to more than one schema')}else if(id!=normalizeId(fullPath)){if(id[0]=="#"){if(localRefs[id]&&!equal(sch,localRefs[id]))throw new Error('id "'+id+'" resolves to more than one schema');localRefs[id]=sch}else{self._refs[id]=fullPath}}}baseIds[jsonPtr]=baseId;fullPaths[jsonPtr]=fullPath});return localRefs}},{"./schema_obj":148,"./util":150,"fast-deep-equal":301,"json-schema-traverse":407,url:undefined}],147:[function(require,module,exports){"use strict";var ruleModules=require("./_rules"),toHash=require("./util").toHash;module.exports=function rules(){var RULES=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","contains","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf"]}];var ALL=["type"];var KEYWORDS=["additionalItems","$schema","$id","id","title","description","default","definitions"];var TYPES=["number","integer","string","array","object","boolean","null"];RULES.all=toHash(ALL);RULES.types=toHash(TYPES);RULES.forEach(function(group){group.rules=group.rules.map(function(keyword){var implKeywords;if(typeof keyword=="object"){var key=Object.keys(keyword)[0];implKeywords=keyword[key];keyword=key;implKeywords.forEach(function(k){ALL.push(k);RULES.all[k]=true})}ALL.push(keyword);var rule=RULES.all[keyword]={keyword:keyword,code:ruleModules[keyword],implements:implKeywords};return rule});if(group.type)RULES.types[group.type]=group});RULES.keywords=toHash(ALL.concat(KEYWORDS));RULES.custom={};return RULES}},{"./_rules":141,"./util":150}],148:[function(require,module,exports){"use strict";var util=require("./util");module.exports=SchemaObject;function SchemaObject(obj){util.copy(obj,this)}},{"./util":150}],149:[function(require,module,exports){"use strict";module.exports=function ucs2length(str){var length=0,len=str.length,pos=0,value;while(pos<len){length++;value=str.charCodeAt(pos++);if(value>=55296&&value<=56319&&pos<len){value=str.charCodeAt(pos);if((value&64512)==56320)pos++}}return length}},{}],150:[function(require,module,exports){"use strict";module.exports={copy:copy,checkDataType:checkDataType,checkDataTypes:checkDataTypes,coerceToTypes:coerceToTypes,toHash:toHash,getProperty:getProperty,escapeQuotes:escapeQuotes,equal:require("fast-deep-equal"),ucs2length:require("./ucs2length"),varOccurences:varOccurences,varReplace:varReplace,cleanUpCode:cleanUpCode,finalCleanUpCode:finalCleanUpCode,schemaHasRules:schemaHasRules,schemaHasRulesExcept:schemaHasRulesExcept,toQuotedString:toQuotedString,getPathExpr:getPathExpr,getPath:getPath,getData:getData,unescapeFragment:unescapeFragment,unescapeJsonPointer:unescapeJsonPointer,escapeFragment:escapeFragment,escapeJsonPointer:escapeJsonPointer};function copy(o,to){to=to||{};for(var key in o)to[key]=o[key];return to}function checkDataType(dataType,data,negate){var EQUAL=negate?" !== ":" === ",AND=negate?" || ":" && ",OK=negate?"!":"",NOT=negate?"":"!";switch(dataType){case"null":return data+EQUAL+"null";case"array":return OK+"Array.isArray("+data+")";case"object":return"("+OK+data+AND+"typeof "+data+EQUAL+'"object"'+AND+NOT+"Array.isArray("+data+"))";case"integer":return"(typeof "+data+EQUAL+'"number"'+AND+NOT+"("+data+" % 1)"+AND+data+EQUAL+data+")";default:return"typeof "+data+EQUAL+'"'+dataType+'"'}}function checkDataTypes(dataTypes,data){switch(dataTypes.length){case 1:return checkDataType(dataTypes[0],data,true);default:var code="";var types=toHash(dataTypes);if(types.array&&types.object){code=types.null?"(":"(!"+data+" || ";code+="typeof "+data+' !== "object")';delete types.null;delete types.array;delete types.object}if(types.number)delete types.integer;for(var t in types)code+=(code?" && ":"")+checkDataType(t,data,true);return code}}var COERCE_TO_TYPES=toHash(["string","number","integer","boolean","null"]);function coerceToTypes(optionCoerceTypes,dataTypes){if(Array.isArray(dataTypes)){var types=[];for(var i=0;i<dataTypes.length;i++){var t=dataTypes[i];if(COERCE_TO_TYPES[t])types[types.length]=t;else if(optionCoerceTypes==="array"&&t==="array")types[types.length]=t}if(types.length)return types}else if(COERCE_TO_TYPES[dataTypes]){return[dataTypes]}else if(optionCoerceTypes==="array"&&dataTypes==="array"){return["array"]}}function toHash(arr){var hash={};for(var i=0;i<arr.length;i++)hash[arr[i]]=true;return hash}var IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var SINGLE_QUOTE=/'|\\/g;function getProperty(key){return typeof key=="number"?"["+key+"]":IDENTIFIER.test(key)?"."+key:"['"+escapeQuotes(key)+"']"}function escapeQuotes(str){return str.replace(SINGLE_QUOTE,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function varOccurences(str,dataVar){dataVar+="[^0-9]";var matches=str.match(new RegExp(dataVar,"g"));return matches?matches.length:0}function varReplace(str,dataVar,expr){dataVar+="([^0-9])";expr=expr.replace(/\$/g,"$$$$");return str.replace(new RegExp(dataVar,"g"),expr+"$1")}var EMPTY_ELSE=/else\s*{\s*}/g,EMPTY_IF_NO_ELSE=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,EMPTY_IF_WITH_ELSE=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;function cleanUpCode(out){return out.replace(EMPTY_ELSE,"").replace(EMPTY_IF_NO_ELSE,"").replace(EMPTY_IF_WITH_ELSE,"if (!($1))")}var ERRORS_REGEXP=/[^v.]errors/g,REMOVE_ERRORS=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,REMOVE_ERRORS_ASYNC=/var errors = 0;|var vErrors = null;/g,RETURN_VALID="return errors === 0;",RETURN_TRUE="validate.errors = null; return true;",RETURN_ASYNC=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,RETURN_DATA_ASYNC="return data;",ROOTDATA_REGEXP=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,REMOVE_ROOTDATA=/if \(rootData === undefined\) rootData = data;/;function finalCleanUpCode(out,async){var matches=out.match(ERRORS_REGEXP);if(matches&&matches.length==2){out=async?out.replace(REMOVE_ERRORS_ASYNC,"").replace(RETURN_ASYNC,RETURN_DATA_ASYNC):out.replace(REMOVE_ERRORS,"").replace(RETURN_VALID,RETURN_TRUE)}matches=out.match(ROOTDATA_REGEXP);if(!matches||matches.length!==3)return out;return out.replace(REMOVE_ROOTDATA,"")}function schemaHasRules(schema,rules){if(typeof schema=="boolean")return!schema;for(var key in schema)if(rules[key])return true}function schemaHasRulesExcept(schema,rules,exceptKeyword){if(typeof schema=="boolean")return!schema&&exceptKeyword!="not";for(var key in schema)if(key!=exceptKeyword&&rules[key])return true}function toQuotedString(str){return"'"+escapeQuotes(str)+"'"}function getPathExpr(currentPath,expr,jsonPointers,isNumber){var path=jsonPointers?"'/' + "+expr+(isNumber?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):isNumber?"'[' + "+expr+" + ']'":"'[\\'' + "+expr+" + '\\']'";return joinPaths(currentPath,path)}function getPath(currentPath,prop,jsonPointers){var path=jsonPointers?toQuotedString("/"+escapeJsonPointer(prop)):toQuotedString(getProperty(prop));return joinPaths(currentPath,path)}var JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/;var RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData($data,lvl,paths){var up,jsonPointer,data,matches;if($data==="")return"rootData";if($data[0]=="/"){if(!JSON_POINTER.test($data))throw new Error("Invalid JSON-pointer: "+$data);jsonPointer=$data;data="rootData"}else{matches=$data.match(RELATIVE_JSON_POINTER);if(!matches)throw new Error("Invalid JSON-pointer: "+$data);up=+matches[1];jsonPointer=matches[2];if(jsonPointer=="#"){if(up>=lvl)throw new Error("Cannot access property/index "+up+" levels up, current level is "+lvl);return paths[lvl-up]}if(up>lvl)throw new Error("Cannot access data "+up+" levels up, current level is "+lvl);data="data"+(lvl-up||"");if(!jsonPointer)return data}var expr=data;var segments=jsonPointer.split("/");for(var i=0;i<segments.length;i++){var segment=segments[i];if(segment){data+=getProperty(unescapeJsonPointer(segment));expr+=" && "+data}}return expr}function joinPaths(a,b){if(a=='""')return b;return(a+" + "+b).replace(/' \+ '/g,"")}function unescapeFragment(str){return unescapeJsonPointer(decodeURIComponent(str))}function escapeFragment(str){return encodeURIComponent(escapeJsonPointer(str))}function escapeJsonPointer(str){return str.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer(str){return str.replace(/~1/g,"/").replace(/~0/g,"~")}},{"./ucs2length":149,"fast-deep-equal":301}],151:[function(require,module,exports){"use strict";module.exports=function generate__limit(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $isMax=$keyword=="maximum",$exclusiveKeyword=$isMax?"exclusiveMaximum":"exclusiveMinimum",$schemaExcl=it.schema[$exclusiveKeyword],$isDataExcl=it.opts.$data&&$schemaExcl&&$schemaExcl.$data,$op=$isMax?"<":">",$notOp=$isMax?">":"<",$errorKeyword=undefined;if($isDataExcl){var $schemaValueExcl=it.util.getData($schemaExcl.$data,$dataLvl,it.dataPathArr),$exclusive="exclusive"+$lvl,$exclType="exclType"+$lvl,$exclIsNumber="exclIsNumber"+$lvl,$opExpr="op"+$lvl,$opStr="' + "+$opExpr+" + '";out+=" var schemaExcl"+$lvl+" = "+$schemaValueExcl+"; ";$schemaValueExcl="schemaExcl"+$lvl;out+=" var "+$exclusive+"; var "+$exclType+" = typeof "+$schemaValueExcl+"; if ("+$exclType+" != 'boolean' && "+$exclType+" != 'undefined' && "+$exclType+" != 'number') { ";var $errorKeyword=$exclusiveKeyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: '"+$exclusiveKeyword+" should be boolean' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$exclType+" == 'number' ? ( ("+$exclusive+" = "+$schemaValue+" === undefined || "+$schemaValueExcl+" "+$op+"= "+$schemaValue+") ? "+$data+" "+$notOp+"= "+$schemaValueExcl+" : "+$data+" "+$notOp+" "+$schemaValue+" ) : ( ("+$exclusive+" = "+$schemaValueExcl+" === true) ? "+$data+" "+$notOp+"= "+$schemaValue+" : "+$data+" "+$notOp+" "+$schemaValue+" ) || "+$data+" !== "+$data+") { var op"+$lvl+" = "+$exclusive+" ? '"+$op+"' : '"+$op+"=';"}else{var $exclIsNumber=typeof $schemaExcl=="number",$opStr=$op;if($exclIsNumber&&$isData){var $opExpr="'"+$opStr+"'";out+=" if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" ( "+$schemaValue+" === undefined || "+$schemaExcl+" "+$op+"= "+$schemaValue+" ? "+$data+" "+$notOp+"= "+$schemaExcl+" : "+$data+" "+$notOp+" "+$schemaValue+" ) || "+$data+" !== "+$data+") { "}else{if($exclIsNumber&&$schema===undefined){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+"/"+$exclusiveKeyword;$schemaValue=$schemaExcl;$notOp+="="}else{if($exclIsNumber)$schemaValue=Math[$isMax?"min":"max"]($schemaExcl,$schema);if($schemaExcl===($exclIsNumber?$schemaValue:true)){$exclusive=true;$errorKeyword=$exclusiveKeyword;$errSchemaPath=it.errSchemaPath+"/"+$exclusiveKeyword;$notOp+="="}else{$exclusive=false;$opStr+="="}}var $opExpr="'"+$opStr+"'";out+=" if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$data+" "+$notOp+" "+$schemaValue+" || "+$data+" !== "+$data+") { "}}$errorKeyword=$errorKeyword||$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limit")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { comparison: "+$opExpr+", limit: "+$schemaValue+", exclusive: "+$exclusive+" } ";if(it.opts.messages!==false){out+=" , message: 'should be "+$opStr+" ";if($isData){out+="' + "+$schemaValue}else{out+=""+$schemaValue+"'"}}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}return out}},{}],152:[function(require,module,exports){"use strict";module.exports=function generate__limitItems(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $op=$keyword=="maxItems"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" "+$data+".length "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitItems")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have ";if($keyword=="maxItems"){out+="more"}else{out+="less"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" items' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out}},{}],153:[function(require,module,exports){"use strict";module.exports=function generate__limitLength(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $op=$keyword=="maxLength"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}if(it.opts.unicode===false){out+=" "+$data+".length "}else{out+=" ucs2length("+$data+") "}out+=" "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitLength")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT be ";if($keyword=="maxLength"){out+="longer"}else{out+="shorter"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" characters' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out}},{}],154:[function(require,module,exports){"use strict";module.exports=function generate__limitProperties(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $op=$keyword=="maxProperties"?">":"<";out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'number') || "}out+=" Object.keys("+$data+").length "+$op+" "+$schemaValue+") { ";var $errorKeyword=$keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"_limitProperties")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have ";if($keyword=="maxProperties"){out+="more"}else{out+="less"}out+=" than ";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+$schema}out+=" properties' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out}},{}],155:[function(require,module,exports){"use strict";module.exports=function generate_allOf(it,$keyword,$ruleType){var out=" ";var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $currentBaseId=$it.baseId,$allSchemasEmpty=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.util.schemaHasRules($sch,it.RULES.all)){$allSchemasEmpty=false;$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if($breakOnError){if($allSchemasEmpty){out+=" if (true) { "}else{out+=" "+$closingBraces.slice(0,-1)+" "}}out=it.util.cleanUpCode(out);return out}},{}],156:[function(require,module,exports){"use strict";module.exports=function generate_anyOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $noEmptySchema=$schema.every(function($sch){return it.util.schemaHasRules($sch,it.RULES.all)});if($noEmptySchema){var $currentBaseId=$it.baseId;out+=" var "+$errs+" = errors; var "+$valid+" = false;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" "+$valid+" = "+$valid+" || "+$nextValid+"; if (!"+$valid+") { ";$closingBraces+="}"}}it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$closingBraces+" if (!"+$valid+") {   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"anyOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should match some schema in anyOf' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}out+=" } else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } ";if(it.opts.allErrors){out+=" } "}out=it.util.cleanUpCode(out)}else{if($breakOnError){out+=" if (true) { "}}return out}},{}],157:[function(require,module,exports){"use strict";module.exports=function generate_const(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(!$isData){out+=" var schema"+$lvl+" = validate.schema"+$schemaPath+";"}out+="var "+$valid+" = equal("+$data+", schema"+$lvl+"); if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"const"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should be equal to constant' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" }";if($breakOnError){out+=" else { "}return out}},{}],158:[function(require,module,exports){"use strict";module.exports=function generate_contains(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $idx="i"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$currentBaseId=it.baseId,$nonEmptySchema=it.util.schemaHasRules($schema,it.RULES.all);out+="var "+$errs+" = errors;var "+$valid+";";if($nonEmptySchema){var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=" var "+$nextValid+" = false; for (var "+$idx+" = 0; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" if ("+$nextValid+") break; }  ";it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$closingBraces+" if (!"+$nextValid+") {"}else{out+=" if ("+$data+".length == 0) {"}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"contains"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should contain a valid item' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { ";if($nonEmptySchema){out+="  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } "}if(it.opts.allErrors){out+=" } "}out=it.util.cleanUpCode(out);return out}},{}],159:[function(require,module,exports){"use strict";module.exports=function generate_custom(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $rule=this,$definition="definition"+$lvl,$rDef=$rule.definition,$closingBraces="";var $compile,$inline,$macro,$ruleValidate,$validateCode;if($isData&&$rDef.$data){$validateCode="keywordValidate"+$lvl;var $validateSchema=$rDef.validateSchema;out+=" var "+$definition+" = RULES.custom['"+$keyword+"'].definition; var "+$validateCode+" = "+$definition+".validate;"}else{$ruleValidate=it.useCustomRule($rule,$schema,it.schema,it);if(!$ruleValidate)return;$schemaValue="validate.schema"+$schemaPath;$validateCode=$ruleValidate.code;$compile=$rDef.compile;$inline=$rDef.inline;$macro=$rDef.macro}var $ruleErrs=$validateCode+".errors",$i="i"+$lvl,$ruleErr="ruleErr"+$lvl,$asyncKeyword=$rDef.async;if($asyncKeyword&&!it.async)throw new Error("async keyword in sync schema");if(!($inline||$macro)){out+=""+$ruleErrs+" = null;"}out+="var "+$errs+" = errors;var "+$valid+";";if($isData&&$rDef.$data){$closingBraces+="}";out+=" if ("+$schemaValue+" === undefined) { "+$valid+" = true; } else { ";if($validateSchema){$closingBraces+="}";out+=" "+$valid+" = "+$definition+".validateSchema("+$schemaValue+"); if ("+$valid+") { "}}if($inline){if($rDef.statements){out+=" "+$ruleValidate.validate+" "}else{out+=" "+$valid+" = "+$ruleValidate.validate+"; "}}else if($macro){var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;$it.schema=$ruleValidate.validate;$it.schemaPath="";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it).replace(/validate\.schema/g,$validateCode);it.compositeRule=$it.compositeRule=$wasComposite;out+=" "+$code}else{var $$outStack=$$outStack||[];$$outStack.push(out);out="";out+="  "+$validateCode+".call( ";if(it.opts.passContext){out+="this"}else{out+="self"}if($compile||$rDef.schema===false){out+=" , "+$data+" "}else{out+=" , "+$schemaValue+" , "+$data+" , validate.schema"+it.schemaPath+" "}out+=" , (dataPath || '')";if(it.errorPath!='""'){out+=" + "+it.errorPath}var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" , "+$parentData+" , "+$parentDataProperty+" , rootData )  ";var def_callRuleValidate=out;out=$$outStack.pop();if($rDef.errors===false){out+=" "+$valid+" = ";if($asyncKeyword){out+=""+it.yieldAwait}out+=""+def_callRuleValidate+"; "}else{if($asyncKeyword){$ruleErrs="customErrors"+$lvl;out+=" var "+$ruleErrs+" = null; try { "+$valid+" = "+it.yieldAwait+def_callRuleValidate+"; } catch (e) { "+$valid+" = false; if (e instanceof ValidationError) "+$ruleErrs+" = e.errors; else throw e; } "}else{out+=" "+$ruleErrs+" = null; "+$valid+" = "+def_callRuleValidate+"; "}}}if($rDef.modifying){out+=" if ("+$parentData+") "+$data+" = "+$parentData+"["+$parentDataProperty+"];"}out+=""+$closingBraces;if($rDef.valid){if($breakOnError){out+=" if (true) { "}}else{out+=" if ( ";if($rDef.valid===undefined){out+=" !";if($macro){out+=""+$nextValid}else{out+=""+$valid}}else{out+=" "+!$rDef.valid+" "}out+=") { ";$errorKeyword=$rule.keyword;var $$outStack=$$outStack||[];$$outStack.push(out);out="";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"custom")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { keyword: '"+$rule.keyword+"' } ";if(it.opts.messages!==false){out+=" , message: 'should pass \""+$rule.keyword+"\" keyword validation' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}var def_customError=out;out=$$outStack.pop();if($inline){if($rDef.errors){if($rDef.errors!="full"){out+="  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+"; if ("+$ruleErr+".schemaPath === undefined) { "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'"; } ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } "}}else{if($rDef.errors===false){out+=" "+def_customError+" "}else{out+=" if ("+$errs+" == errors) { "+def_customError+" } else {  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+"; if ("+$ruleErr+".schemaPath === undefined) { "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'"; } ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } } "}}}else if($macro){out+="   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"custom")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { keyword: '"+$rule.keyword+"' } ";if(it.opts.messages!==false){out+=" , message: 'should pass \""+$rule.keyword+"\" keyword validation' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}}else{if($rDef.errors===false){out+=" "+def_customError+" "}else{out+=" if (Array.isArray("+$ruleErrs+")) { if (vErrors === null) vErrors = "+$ruleErrs+"; else vErrors = vErrors.concat("+$ruleErrs+"); errors = vErrors.length;  for (var "+$i+"="+$errs+"; "+$i+"<errors; "+$i+"++) { var "+$ruleErr+" = vErrors["+$i+"]; if ("+$ruleErr+".dataPath === undefined) "+$ruleErr+".dataPath = (dataPath || '') + "+it.errorPath+";  "+$ruleErr+'.schemaPath = "'+$errSchemaPath+'";  ';if(it.opts.verbose){out+=" "+$ruleErr+".schema = "+$schemaValue+"; "+$ruleErr+".data = "+$data+"; "}out+=" } } else { "+def_customError+" } "}}out+=" } ";if($breakOnError){out+=" else { "}}return out}},{}],160:[function(require,module,exports){"use strict";module.exports=function generate_dependencies(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $schemaDeps={},$propertyDeps={},$ownProperties=it.opts.ownProperties;for($property in $schema){var $sch=$schema[$property];var $deps=Array.isArray($sch)?$propertyDeps:$schemaDeps;$deps[$property]=$sch}out+="var "+$errs+" = errors;";var $currentErrorPath=it.errorPath;out+="var missing"+$lvl+";";for(var $property in $propertyDeps){$deps=$propertyDeps[$property];if($deps.length){out+=" if ( "+$data+it.util.getProperty($property)+" !== undefined ";if($ownProperties){out+=" && Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($property)+"') "}if($breakOnError){out+=" && ( ";var arr1=$deps;if(arr1){var $propertyKey,$i=-1,l1=arr1.length-1;while($i<l1){$propertyKey=arr1[$i+=1];if($i){out+=" || "}var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=" ( ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") && (missing"+$lvl+" = "+it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop)+") ) "}}out+=")) {  ";var $propertyPath="missing"+$lvl,$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+" + "+$propertyPath}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"dependencies"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { property: '"+it.util.escapeQuotes($property)+"', missingProperty: '"+$missingProperty+"', depsCount: "+$deps.length+", deps: '"+it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", "))+"' } ";if(it.opts.messages!==false){out+=" , message: 'should have ";if($deps.length==1){out+="property "+it.util.escapeQuotes($deps[0])}else{out+="properties "+it.util.escapeQuotes($deps.join(", "))}out+=" when property "+it.util.escapeQuotes($property)+" is present' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}else{out+=" ) { ";var arr2=$deps;if(arr2){var $propertyKey,i2=-1,l2=arr2.length-1;while(i2<l2){$propertyKey=arr2[i2+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"dependencies"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { property: '"+it.util.escapeQuotes($property)+"', missingProperty: '"+$missingProperty+"', depsCount: "+$deps.length+", deps: '"+it.util.escapeQuotes($deps.length==1?$deps[0]:$deps.join(", "))+"' } ";if(it.opts.messages!==false){out+=" , message: 'should have ";if($deps.length==1){out+="property "+it.util.escapeQuotes($deps[0])}else{out+="properties "+it.util.escapeQuotes($deps.join(", "))}out+=" when property "+it.util.escapeQuotes($property)+" is present' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}out+=" }   ";if($breakOnError){$closingBraces+="}";out+=" else { "}}}it.errorPath=$currentErrorPath;var $currentBaseId=$it.baseId;for(var $property in $schemaDeps){var $sch=$schemaDeps[$property];if(it.util.schemaHasRules($sch,it.RULES.all)){out+=" "+$nextValid+" = true; if ( "+$data+it.util.getProperty($property)+" !== undefined ";if($ownProperties){out+=" && Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($property)+"') "}out+=") { ";$it.schema=$sch;$it.schemaPath=$schemaPath+it.util.getProperty($property);$it.errSchemaPath=$errSchemaPath+"/"+it.util.escapeFragment($property);out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId;out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}if($breakOnError){out+="   "+$closingBraces+" if ("+$errs+" == errors) {"}out=it.util.cleanUpCode(out);return out}},{}],161:[function(require,module,exports){"use strict";module.exports=function generate_enum(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $i="i"+$lvl,$vSchema="schema"+$lvl;if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+";"}out+="var "+$valid+";";if($isData){out+=" if (schema"+$lvl+" === undefined) "+$valid+" = true; else if (!Array.isArray(schema"+$lvl+")) "+$valid+" = false; else {"}out+=""+$valid+" = false;for (var "+$i+"=0; "+$i+"<"+$vSchema+".length; "+$i+"++) if (equal("+$data+", "+$vSchema+"["+$i+"])) { "+$valid+" = true; break; }";if($isData){out+="  }  "}out+=" if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"enum"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { allowedValues: schema"+$lvl+" } ";if(it.opts.messages!==false){out+=" , message: 'should be equal to one of the allowed values' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" }";if($breakOnError){out+=" else { "}return out}},{}],162:[function(require,module,exports){"use strict";module.exports=function generate_format(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");if(it.opts.format===false){if($breakOnError){out+=" if (true) { "}return out}var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $unknownFormats=it.opts.unknownFormats,$allowUnknown=Array.isArray($unknownFormats);if($isData){var $format="format"+$lvl,$isObject="isObject"+$lvl,$formatType="formatType"+$lvl;out+=" var "+$format+" = formats["+$schemaValue+"]; var "+$isObject+" = typeof "+$format+" == 'object' && !("+$format+" instanceof RegExp) && "+$format+".validate; var "+$formatType+" = "+$isObject+" && "+$format+".type || 'string'; if ("+$isObject+") { ";if(it.async){out+=" var async"+$lvl+" = "+$format+".async; "}out+=" "+$format+" = "+$format+".validate; } if (  ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'string') || "}out+=" (";if($unknownFormats!="ignore"){out+=" ("+$schemaValue+" && !"+$format+" ";if($allowUnknown){out+=" && self._opts.unknownFormats.indexOf("+$schemaValue+") == -1 "}out+=") || "}out+=" ("+$format+" && "+$formatType+" == '"+$ruleType+"' && !(typeof "+$format+" == 'function' ? ";if(it.async){out+=" (async"+$lvl+" ? "+it.yieldAwait+" "+$format+"("+$data+") : "+$format+"("+$data+")) "}else{out+=" "+$format+"("+$data+") "}out+=" : "+$format+".test("+$data+"))))) {"}else{var $format=it.formats[$schema];if(!$format){if($unknownFormats=="ignore"){it.logger.warn('unknown format "'+$schema+'" ignored in schema at path "'+it.errSchemaPath+'"');if($breakOnError){out+=" if (true) { "}return out}else if($allowUnknown&&$unknownFormats.indexOf($schema)>=0){if($breakOnError){out+=" if (true) { "}return out}else{throw new Error('unknown format "'+$schema+'" is used in schema at path "'+it.errSchemaPath+'"')}}var $isObject=typeof $format=="object"&&!($format instanceof RegExp)&&$format.validate;var $formatType=$isObject&&$format.type||"string";if($isObject){var $async=$format.async===true;$format=$format.validate}if($formatType!=$ruleType){if($breakOnError){out+=" if (true) { "}return out}if($async){if(!it.async)throw new Error("async format in sync schema");var $formatRef="formats"+it.util.getProperty($schema)+".validate";out+=" if (!("+it.yieldAwait+" "+$formatRef+"("+$data+"))) { "}else{out+=" if (! ";var $formatRef="formats"+it.util.getProperty($schema);if($isObject)$formatRef+=".validate";if(typeof $format=="function"){out+=" "+$formatRef+"("+$data+") "}else{out+=" "+$formatRef+".test("+$data+") "}out+=") { "}}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"format"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { format:  ";if($isData){out+=""+$schemaValue}else{out+=""+it.util.toQuotedString($schema)}out+="  } ";if(it.opts.messages!==false){out+=" , message: 'should match format \"";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+it.util.escapeQuotes($schema)}out+="\"' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+it.util.toQuotedString($schema)}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}return out}},{}],163:[function(require,module,exports){"use strict";module.exports=function generate_items(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $idx="i"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$currentBaseId=it.baseId;out+="var "+$errs+" = errors;var "+$valid+";";if(Array.isArray($schema)){var $additionalItems=it.schema.additionalItems;if($additionalItems===false){out+=" "+$valid+" = "+$data+".length <= "+$schema.length+"; ";var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+"/additionalItems";out+="  if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"additionalItems"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { limit: "+$schema.length+" } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have more than "+$schema.length+" items' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";$errSchemaPath=$currErrSchemaPath;if($breakOnError){$closingBraces+="}";out+=" else { "}}var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.util.schemaHasRules($sch,it.RULES.all)){out+=" "+$nextValid+" = true; if ("+$data+".length > "+$i+") { ";var $passData=$data+"["+$i+"]";$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;$it.errorPath=it.util.getPathExpr(it.errorPath,$i,it.opts.jsonPointers,true);$it.dataPathArr[$dataNxt]=$i;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if(typeof $additionalItems=="object"&&it.util.schemaHasRules($additionalItems,it.RULES.all)){$it.schema=$additionalItems;$it.schemaPath=it.schemaPath+".additionalItems";$it.errSchemaPath=it.errSchemaPath+"/additionalItems";out+=" "+$nextValid+" = true; if ("+$data+".length > "+$schema.length+") {  for (var "+$idx+" = "+$schema.length+"; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" } }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}else if(it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+="  for (var "+$idx+" = "+0+"; "+$idx+" < "+$data+".length; "+$idx+"++) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$idx,it.opts.jsonPointers,true);var $passData=$data+"["+$idx+"]";$it.dataPathArr[$dataNxt]=$idx;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" }"}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}out=it.util.cleanUpCode(out);return out}},{}],164:[function(require,module,exports){"use strict";module.exports=function generate_multipleOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}out+="var division"+$lvl+";if (";if($isData){out+=" "+$schemaValue+" !== undefined && ( typeof "+$schemaValue+" != 'number' || "}out+=" (division"+$lvl+" = "+$data+" / "+$schemaValue+", ";if(it.opts.multipleOfPrecision){out+=" Math.abs(Math.round(division"+$lvl+") - division"+$lvl+") > 1e-"+it.opts.multipleOfPrecision+" "}else{out+=" division"+$lvl+" !== parseInt(division"+$lvl+") "}out+=" ) ";if($isData){out+="  )  "}out+=" ) {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"multipleOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { multipleOf: "+$schemaValue+" } ";if(it.opts.messages!==false){out+=" , message: 'should be multiple of ";if($isData){out+="' + "+$schemaValue}else{out+=""+$schemaValue+"'"}}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out}},{}],165:[function(require,module,exports){"use strict";module.exports=function generate_not(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);$it.level++;var $nextValid="valid"+$it.level;if(it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;out+=" var "+$errs+" = errors;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.createErrors=false;var $allErrorsOption;if($it.opts.allErrors){$allErrorsOption=$it.opts.allErrors;$it.opts.allErrors=false}out+=" "+it.validate($it)+" ";$it.createErrors=true;if($allErrorsOption)$it.opts.allErrors=$allErrorsOption;it.compositeRule=$it.compositeRule=$wasComposite;out+=" if ("+$nextValid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"not"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should NOT be valid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; } ";if(it.opts.allErrors){out+=" } "}}else{out+="  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"not"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should NOT be valid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if($breakOnError){out+=" if (false) { "}}return out}},{}],166:[function(require,module,exports){"use strict";module.exports=function generate_oneOf(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;out+="var "+$errs+" = errors;var prevValid"+$lvl+" = false;var "+$valid+" = false;";var $currentBaseId=$it.baseId;var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var arr1=$schema;if(arr1){var $sch,$i=-1,l1=arr1.length-1;while($i<l1){$sch=arr1[$i+=1];if(it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=$schemaPath+"["+$i+"]";$it.errSchemaPath=$errSchemaPath+"/"+$i;out+="  "+it.validate($it)+" ";$it.baseId=$currentBaseId}else{out+=" var "+$nextValid+" = true; "}if($i){out+=" if ("+$nextValid+" && prevValid"+$lvl+") "+$valid+" = false; else { ";$closingBraces+="}"}out+=" if ("+$nextValid+") "+$valid+" = prevValid"+$lvl+" = true;"}}it.compositeRule=$it.compositeRule=$wasComposite;out+=""+$closingBraces+"if (!"+$valid+") {   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"oneOf"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'should match exactly one schema in oneOf' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}out+="} else {  errors = "+$errs+"; if (vErrors !== null) { if ("+$errs+") vErrors.length = "+$errs+"; else vErrors = null; }";if(it.opts.allErrors){out+=" } "}return out}},{}],167:[function(require,module,exports){"use strict";module.exports=function generate_pattern(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $regexp=$isData?"(new RegExp("+$schemaValue+"))":it.usePattern($schema);out+="if ( ";if($isData){out+=" ("+$schemaValue+" !== undefined && typeof "+$schemaValue+" != 'string') || "}out+=" !"+$regexp+".test("+$data+") ) {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"pattern"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { pattern:  ";if($isData){out+=""+$schemaValue}else{out+=""+it.util.toQuotedString($schema)}out+="  } ";if(it.opts.messages!==false){out+=" , message: 'should match pattern \"";if($isData){out+="' + "+$schemaValue+" + '"}else{out+=""+it.util.escapeQuotes($schema)}out+="\"' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+it.util.toQuotedString($schema)}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+="} ";if($breakOnError){out+=" else { "}return out}},{}],168:[function(require,module,exports){"use strict";module.exports=function generate_properties(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;var $key="key"+$lvl,$idx="idx"+$lvl,$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$dataProperties="dataProperties"+$lvl;var $schemaKeys=Object.keys($schema||{}),$pProperties=it.schema.patternProperties||{},$pPropertyKeys=Object.keys($pProperties),$aProperties=it.schema.additionalProperties,$someProperties=$schemaKeys.length||$pPropertyKeys.length,$noAdditional=$aProperties===false,$additionalIsSchema=typeof $aProperties=="object"&&Object.keys($aProperties).length,$removeAdditional=it.opts.removeAdditional,$checkAdditional=$noAdditional||$additionalIsSchema||$removeAdditional,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;var $required=it.schema.required;if($required&&!(it.opts.v5&&$required.$data)&&$required.length<it.opts.loopRequired)var $requiredHash=it.util.toHash($required);if(it.opts.patternGroups){var $pgProperties=it.schema.patternGroups||{},$pgPropertyKeys=Object.keys($pgProperties)}out+="var "+$errs+" = errors;var "+$nextValid+" = true;";if($ownProperties){out+=" var "+$dataProperties+" = undefined;"}if($checkAdditional){if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}if($someProperties){out+=" var isAdditional"+$lvl+" = !(false ";if($schemaKeys.length){if($schemaKeys.length>5){out+=" || validate.schema"+$schemaPath+"["+$key+"] "}else{var arr1=$schemaKeys;if(arr1){var $propertyKey,i1=-1,l1=arr1.length-1;while(i1<l1){$propertyKey=arr1[i1+=1];out+=" || "+$key+" == "+it.util.toQuotedString($propertyKey)+" "}}}}if($pPropertyKeys.length){var arr2=$pPropertyKeys;if(arr2){var $pProperty,$i=-1,l2=arr2.length-1;while($i<l2){$pProperty=arr2[$i+=1];out+=" || "+it.usePattern($pProperty)+".test("+$key+") "}}}if(it.opts.patternGroups&&$pgPropertyKeys.length){var arr3=$pgPropertyKeys;if(arr3){var $pgProperty,$i=-1,l3=arr3.length-1;while($i<l3){$pgProperty=arr3[$i+=1];out+=" || "+it.usePattern($pgProperty)+".test("+$key+") "}}}out+=" ); if (isAdditional"+$lvl+") { "}if($removeAdditional=="all"){out+=" delete "+$data+"["+$key+"]; "}else{var $currentErrorPath=it.errorPath;var $additionalProperty="' + "+$key+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers)}if($noAdditional){if($removeAdditional){out+=" delete "+$data+"["+$key+"]; "}else{out+=" "+$nextValid+" = false; ";var $currErrSchemaPath=$errSchemaPath;$errSchemaPath=it.errSchemaPath+"/additionalProperties";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"additionalProperties"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { additionalProperty: '"+$additionalProperty+"' } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have additional properties' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}$errSchemaPath=$currErrSchemaPath;if($breakOnError){out+=" break; "}}}else if($additionalIsSchema){if($removeAdditional=="failing"){out+=" var "+$errs+" = errors;  ";var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;$it.schema=$aProperties;$it.schemaPath=it.schemaPath+".additionalProperties";$it.errSchemaPath=it.errSchemaPath+"/additionalProperties";$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}out+=" if (!"+$nextValid+") { errors = "+$errs+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+$data+"["+$key+"]; }  ";it.compositeRule=$it.compositeRule=$wasComposite}else{$it.schema=$aProperties;$it.schemaPath=it.schemaPath+".additionalProperties";$it.errSchemaPath=it.errSchemaPath+"/additionalProperties";$it.errorPath=it.opts._errorDataPathProperty?it.errorPath:it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}}}it.errorPath=$currentErrorPath}if($someProperties){out+=" } "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}var $useDefaults=it.opts.useDefaults&&!it.compositeRule;if($schemaKeys.length){var arr4=$schemaKeys;if(arr4){var $propertyKey,i4=-1,l4=arr4.length-1;while(i4<l4){$propertyKey=arr4[i4+=1];var $sch=$schema[$propertyKey];if(it.util.schemaHasRules($sch,it.RULES.all)){var $prop=it.util.getProperty($propertyKey),$passData=$data+$prop,$hasDefault=$useDefaults&&$sch.default!==undefined;$it.schema=$sch;$it.schemaPath=$schemaPath+$prop;$it.errSchemaPath=$errSchemaPath+"/"+it.util.escapeFragment($propertyKey);$it.errorPath=it.util.getPath(it.errorPath,$propertyKey,it.opts.jsonPointers);$it.dataPathArr[$dataNxt]=it.util.toQuotedString($propertyKey);var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){$code=it.util.varReplace($code,$nextData,$passData);var $useData=$passData}else{var $useData=$nextData;out+=" var "+$nextData+" = "+$passData+"; "}if($hasDefault){out+=" "+$code+" "}else{if($requiredHash&&$requiredHash[$propertyKey]){out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") { "+$nextValid+" = false; ";var $currentErrorPath=it.errorPath,$currErrSchemaPath=$errSchemaPath,$missingProperty=it.util.escapeQuotes($propertyKey);if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}$errSchemaPath=it.errSchemaPath+"/required";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}$errSchemaPath=$currErrSchemaPath;it.errorPath=$currentErrorPath;out+=" } else { "}else{if($breakOnError){out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") { "+$nextValid+" = true; } else { "}else{out+=" if ("+$useData+" !== undefined ";if($ownProperties){out+=" &&   Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=" ) { "}}out+=" "+$code+" } "}}if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}if($pPropertyKeys.length){var arr5=$pPropertyKeys;if(arr5){var $pProperty,i5=-1,l5=arr5.length-1;while(i5<l5){$pProperty=arr5[i5+=1];var $sch=$pProperties[$pProperty];if(it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=it.schemaPath+".patternProperties"+it.util.getProperty($pProperty);$it.errSchemaPath=it.errSchemaPath+"/patternProperties/"+it.util.escapeFragment($pProperty);if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}out+=" if ("+it.usePattern($pProperty)+".test("+$key+")) { ";$it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" } ";if($breakOnError){out+=" else "+$nextValid+" = true; "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}}}}}if(it.opts.patternGroups&&$pgPropertyKeys.length){var arr6=$pgPropertyKeys;if(arr6){var $pgProperty,i6=-1,l6=arr6.length-1;while(i6<l6){$pgProperty=arr6[i6+=1];var $pgSchema=$pgProperties[$pgProperty],$sch=$pgSchema.schema;if(it.util.schemaHasRules($sch,it.RULES.all)){$it.schema=$sch;$it.schemaPath=it.schemaPath+".patternGroups"+it.util.getProperty($pgProperty)+".schema";$it.errSchemaPath=it.errSchemaPath+"/patternGroups/"+it.util.escapeFragment($pgProperty)+"/schema";out+=" var pgPropCount"+$lvl+" = 0;  ";if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}out+=" if ("+it.usePattern($pgProperty)+".test("+$key+")) { pgPropCount"+$lvl+"++; ";$it.errorPath=it.util.getPathExpr(it.errorPath,$key,it.opts.jsonPointers);var $passData=$data+"["+$key+"]";$it.dataPathArr[$dataNxt]=$key;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}if($breakOnError){out+=" if (!"+$nextValid+") break; "}out+=" } ";if($breakOnError){out+=" else "+$nextValid+" = true; "}out+=" }  ";if($breakOnError){out+=" if ("+$nextValid+") { ";$closingBraces+="}"}var $pgMin=$pgSchema.minimum,$pgMax=$pgSchema.maximum;if($pgMin!==undefined||$pgMax!==undefined){out+=" var "+$valid+" = true; ";var $currErrSchemaPath=$errSchemaPath;if($pgMin!==undefined){var $limit=$pgMin,$reason="minimum",$moreOrLess="less";out+=" "+$valid+" = pgPropCount"+$lvl+" >= "+$pgMin+"; ";$errSchemaPath=it.errSchemaPath+"/patternGroups/minimum";out+="  if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"patternGroups"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { reason: '"+$reason+"', limit: "+$limit+", pattern: '"+it.util.escapeQuotes($pgProperty)+"' } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have "+$moreOrLess+" than "+$limit+' properties matching pattern "'+it.util.escapeQuotes($pgProperty)+"\"' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($pgMax!==undefined){out+=" else "}}if($pgMax!==undefined){var $limit=$pgMax,$reason="maximum",$moreOrLess="more";out+=" "+$valid+" = pgPropCount"+$lvl+" <= "+$pgMax+"; ";$errSchemaPath=it.errSchemaPath+"/patternGroups/maximum";out+="  if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"patternGroups"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { reason: '"+$reason+"', limit: "+$limit+", pattern: '"+it.util.escapeQuotes($pgProperty)+"' } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have "+$moreOrLess+" than "+$limit+' properties matching pattern "'+it.util.escapeQuotes($pgProperty)+"\"' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } "}$errSchemaPath=$currErrSchemaPath;if($breakOnError){out+=" if ("+$valid+") { ";$closingBraces+="}"}}}}}}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}out=it.util.cleanUpCode(out);return out}},{}],169:[function(require,module,exports){"use strict";module.exports=function generate_propertyNames(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $errs="errs__"+$lvl;var $it=it.util.copy(it);var $closingBraces="";$it.level++;var $nextValid="valid"+$it.level;if(it.util.schemaHasRules($schema,it.RULES.all)){$it.schema=$schema;$it.schemaPath=$schemaPath;$it.errSchemaPath=$errSchemaPath;var $key="key"+$lvl,$idx="idx"+$lvl,$i="i"+$lvl,$invalidName="' + "+$key+" + '",$dataNxt=$it.dataLevel=it.dataLevel+1,$nextData="data"+$dataNxt,$dataProperties="dataProperties"+$lvl,$ownProperties=it.opts.ownProperties,$currentBaseId=it.baseId;out+=" var "+$errs+" = errors; ";if($ownProperties){out+=" var "+$dataProperties+" = undefined; "}if($ownProperties){out+=" "+$dataProperties+" = "+$dataProperties+" || Object.keys("+$data+"); for (var "+$idx+"=0; "+$idx+"<"+$dataProperties+".length; "+$idx+"++) { var "+$key+" = "+$dataProperties+"["+$idx+"]; "}else{out+=" for (var "+$key+" in "+$data+") { "}out+=" var startErrs"+$lvl+" = errors; ";var $passData=$key;var $wasComposite=it.compositeRule;it.compositeRule=$it.compositeRule=true;var $code=it.validate($it);$it.baseId=$currentBaseId;if(it.util.varOccurences($code,$nextData)<2){out+=" "+it.util.varReplace($code,$nextData,$passData)+" "}else{out+=" var "+$nextData+" = "+$passData+"; "+$code+" "}it.compositeRule=$it.compositeRule=$wasComposite;out+=" if (!"+$nextValid+") { for (var "+$i+"=startErrs"+$lvl+"; "+$i+"<errors; "+$i+"++) { vErrors["+$i+"].propertyName = "+$key+"; }   var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"propertyNames"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { propertyName: '"+$invalidName+"' } ";if(it.opts.messages!==false){out+=" , message: 'property name \\'"+$invalidName+"\\' is invalid' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; return false; "}}if($breakOnError){out+=" break; "}out+=" } }"}if($breakOnError){out+=" "+$closingBraces+" if ("+$errs+" == errors) {"}out=it.util.cleanUpCode(out);return out}},{}],170:[function(require,module,exports){"use strict";module.exports=function generate_ref(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $async,$refCode;if($schema=="#"||$schema=="#/"){if(it.isRoot){$async=it.async;$refCode="validate"}else{$async=it.root.schema.$async===true;$refCode="root.refVal[0]"}}else{var $refVal=it.resolveRef(it.baseId,$schema,it.isRoot);if($refVal===undefined){var $message=it.MissingRefError.message(it.baseId,$schema);if(it.opts.missingRefs=="fail"){it.logger.error($message);var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"$ref"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { ref: '"+it.util.escapeQuotes($schema)+"' } ";if(it.opts.messages!==false){out+=" , message: 'can\\'t resolve reference "+it.util.escapeQuotes($schema)+"' "}if(it.opts.verbose){out+=" , schema: "+it.util.toQuotedString($schema)+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}if($breakOnError){out+=" if (false) { "}}else if(it.opts.missingRefs=="ignore"){it.logger.warn($message);if($breakOnError){out+=" if (true) { "}}else{throw new it.MissingRefError(it.baseId,$schema,$message)}}else if($refVal.inline){var $it=it.util.copy(it);$it.level++;var $nextValid="valid"+$it.level;$it.schema=$refVal.schema;$it.schemaPath="";$it.errSchemaPath=$schema;var $code=it.validate($it).replace(/validate\.schema/g,$refVal.code);out+=" "+$code+" ";if($breakOnError){out+=" if ("+$nextValid+") { "}}else{$async=$refVal.$async===true;$refCode=$refVal.code}}if($refCode){var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.opts.passContext){out+=" "+$refCode+".call(this, "}else{out+=" "+$refCode+"( "}out+=" "+$data+", (dataPath || '')";if(it.errorPath!='""'){out+=" + "+it.errorPath}var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" , "+$parentData+" , "+$parentDataProperty+", rootData)  ";var __callValidate=out;out=$$outStack.pop();if($async){if(!it.async)throw new Error("async schema referenced by sync schema");if($breakOnError){out+=" var "+$valid+"; "}out+=" try { "+it.yieldAwait+" "+__callValidate+"; ";if($breakOnError){out+=" "+$valid+" = true; "}out+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ";if($breakOnError){out+=" "+$valid+" = false; "}out+=" } ";if($breakOnError){out+=" if ("+$valid+") { "}}else{out+=" if (!"+__callValidate+") { if (vErrors === null) vErrors = "+$refCode+".errors; else vErrors = vErrors.concat("+$refCode+".errors); errors = vErrors.length; } ";if($breakOnError){out+=" else { "}}}return out}},{}],171:[function(require,module,exports){"use strict";module.exports=function generate_required(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}var $vSchema="schema"+$lvl;if(!$isData){if($schema.length<it.opts.loopRequired&&it.schema.properties&&Object.keys(it.schema.properties).length){var $required=[];var arr1=$schema;if(arr1){var $property,i1=-1,l1=arr1.length-1;while(i1<l1){$property=arr1[i1+=1];var $propertySch=it.schema.properties[$property];if(!($propertySch&&it.util.schemaHasRules($propertySch,it.RULES.all))){$required[$required.length]=$property}}}}else{var $required=$schema}}if($isData||$required.length){var $currentErrorPath=it.errorPath,$loopRequired=$isData||$required.length>=it.opts.loopRequired,$ownProperties=it.opts.ownProperties;if($breakOnError){out+=" var missing"+$lvl+"; ";if($loopRequired){if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+"; "}var $i="i"+$lvl,$propertyPath="schema"+$lvl+"["+$i+"]",$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers)}out+=" var "+$valid+" = true; ";if($isData){out+=" if (schema"+$lvl+" === undefined) "+$valid+" = true; else if (!Array.isArray(schema"+$lvl+")) "+$valid+" = false; else {"}out+=" for (var "+$i+" = 0; "+$i+" < "+$vSchema+".length; "+$i+"++) { "+$valid+" = "+$data+"["+$vSchema+"["+$i+"]] !== undefined ";if($ownProperties){out+=" &&   Object.prototype.hasOwnProperty.call("+$data+", "+$vSchema+"["+$i+"]) "}out+="; if (!"+$valid+") break; } ";if($isData){out+="  }  "}out+="  if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { "}else{out+=" if ( ";var arr2=$required;if(arr2){var $propertyKey,$i=-1,l2=arr2.length-1;while($i<l2){$propertyKey=arr2[$i+=1];if($i){out+=" || "}var $prop=it.util.getProperty($propertyKey),$useData=$data+$prop;out+=" ( ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") && (missing"+$lvl+" = "+it.util.toQuotedString(it.opts.jsonPointers?$propertyKey:$prop)+") ) "}}out+=") {  ";var $propertyPath="missing"+$lvl,$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.opts.jsonPointers?it.util.getPathExpr($currentErrorPath,$propertyPath,true):$currentErrorPath+" + "+$propertyPath}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else { "}}else{if($loopRequired){if(!$isData){out+=" var "+$vSchema+" = validate.schema"+$schemaPath+"; "}var $i="i"+$lvl,$propertyPath="schema"+$lvl+"["+$i+"]",$missingProperty="' + "+$propertyPath+" + '";if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPathExpr($currentErrorPath,$propertyPath,it.opts.jsonPointers)}if($isData){out+=" if ("+$vSchema+" && !Array.isArray("+$vSchema+")) {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+$vSchema+" !== undefined) { "}out+=" for (var "+$i+" = 0; "+$i+" < "+$vSchema+".length; "+$i+"++) { if ("+$data+"["+$vSchema+"["+$i+"]] === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", "+$vSchema+"["+$i+"]) "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ";if($isData){out+="  }  "}}else{var arr3=$required;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $prop=it.util.getProperty($propertyKey),$missingProperty=it.util.escapeQuotes($propertyKey),$useData=$data+$prop;if(it.opts._errorDataPathProperty){it.errorPath=it.util.getPath($currentErrorPath,$propertyKey,it.opts.jsonPointers)}out+=" if ( "+$useData+" === undefined ";if($ownProperties){out+=" || ! Object.prototype.hasOwnProperty.call("+$data+", '"+it.util.escapeQuotes($propertyKey)+"') "}out+=") {  var err =   ";if(it.createErrors!==false){out+=" { keyword: '"+"required"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { missingProperty: '"+$missingProperty+"' } ";if(it.opts.messages!==false){out+=" , message: '";if(it.opts._errorDataPathProperty){out+="is a required property"}else{out+="should have required property \\'"+$missingProperty+"\\'"}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}out+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}}it.errorPath=$currentErrorPath}else if($breakOnError){out+=" if (true) {"}return out}},{}],172:[function(require,module,exports){"use strict";module.exports=function generate_uniqueItems(it,$keyword,$ruleType){var out=" ";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;var $isData=it.opts.$data&&$schema&&$schema.$data,$schemaValue;if($isData){out+=" var schema"+$lvl+" = "+it.util.getData($schema.$data,$dataLvl,it.dataPathArr)+"; ";$schemaValue="schema"+$lvl}else{$schemaValue=$schema}if(($schema||$isData)&&it.opts.uniqueItems!==false){if($isData){out+=" var "+$valid+"; if ("+$schemaValue+" === false || "+$schemaValue+" === undefined) "+$valid+" = true; else if (typeof "+$schemaValue+" != 'boolean') "+$valid+" = false; else { "}out+=" var "+$valid+" = true; if ("+$data+".length > 1) { var i = "+$data+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+$data+"[i], "+$data+"[j])) { "+$valid+" = false; break outer; } } } } ";if($isData){out+="  }  "}out+=" if (!"+$valid+") {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+"uniqueItems"+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { i: i, j: j } ";if(it.opts.messages!==false){out+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "}if(it.opts.verbose){out+=" , schema:  ";if($isData){out+="validate.schema"+$schemaPath}else{out+=""+$schema}out+="         , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } ";if($breakOnError){out+=" else { "}}else{if($breakOnError){out+=" if (true) { "}}return out}},{}],173:[function(require,module,exports){"use strict";module.exports=function generate_validate(it,$keyword,$ruleType){var out="";var $async=it.schema.$async===true,$refKeywords=it.util.schemaHasRulesExcept(it.schema,it.RULES.all,"$ref"),$id=it.self._getId(it.schema);if(it.isTop){if($async){it.async=true;var $es7=it.opts.async=="es7";it.yieldAwait=$es7?"await":"yield"}out+=" var validate = ";if($async){if($es7){out+=" (async function "}else{if(it.opts.async!="*"){out+="co.wrap"}out+="(function* "}}else{out+=" (function "}out+=" (data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ";if($id&&(it.opts.sourceCode||it.opts.processCode)){out+=" "+("/*# sourceURL="+$id+" */")+" "}}if(typeof it.schema=="boolean"||!($refKeywords||it.schema.$ref)){var $keyword="false schema";var $lvl=it.level;var $dataLvl=it.dataLevel;var $schema=it.schema[$keyword];var $schemaPath=it.schemaPath+it.util.getProperty($keyword);var $errSchemaPath=it.errSchemaPath+"/"+$keyword;var $breakOnError=!it.opts.allErrors;var $errorKeyword;var $data="data"+($dataLvl||"");var $valid="valid"+$lvl;if(it.schema===false){if(it.isTop){$breakOnError=true}else{out+=" var "+$valid+" = false; "}var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"false schema")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: {} ";if(it.opts.messages!==false){out+=" , message: 'boolean schema is false' "}if(it.opts.verbose){out+=" , schema: false , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}else{if(it.isTop){if($async){out+=" return data; "}else{out+=" validate.errors = null; return true; "}}else{out+=" var "+$valid+" = true; "}}if(it.isTop){out+=" }); return validate; "}return out}if(it.isTop){var $top=it.isTop,$lvl=it.level=0,$dataLvl=it.dataLevel=0,$data="data";it.rootId=it.resolve.fullPath(it.self._getId(it.root.schema));it.baseId=it.baseId||it.rootId;delete it.isTop;it.dataPathArr=[undefined];out+=" var vErrors = null; ";out+=" var errors = 0;     ";out+=" if (rootData === undefined) rootData = data; "}else{var $lvl=it.level,$dataLvl=it.dataLevel,$data="data"+($dataLvl||"");if($id)it.baseId=it.resolve.url(it.baseId,$id);if($async&&!it.async)throw new Error("async schema in sync schema");out+=" var errs_"+$lvl+" = errors;"}var $valid="valid"+$lvl,$breakOnError=!it.opts.allErrors,$closingBraces1="",$closingBraces2="";var $errorKeyword;var $typeSchema=it.schema.type,$typeIsArray=Array.isArray($typeSchema);if($typeIsArray&&$typeSchema.length==1){$typeSchema=$typeSchema[0];$typeIsArray=false}if(it.schema.$ref&&$refKeywords){if(it.opts.extendRefs=="fail"){throw new Error('$ref: validation keywords used in schema at path "'+it.errSchemaPath+'" (see option extendRefs)')}else if(it.opts.extendRefs!==true){$refKeywords=false;it.logger.warn('$ref: keywords ignored in schema at path "'+it.errSchemaPath+'"')}}if($typeSchema){if(it.opts.coerceTypes){var $coerceToTypes=it.util.coerceToTypes(it.opts.coerceTypes,$typeSchema)}var $rulesGroup=it.RULES.types[$typeSchema];if($coerceToTypes||$typeIsArray||$rulesGroup===true||$rulesGroup&&!$shouldUseGroup($rulesGroup)){var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type";var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type",$method=$typeIsArray?"checkDataTypes":"checkDataType";out+=" if ("+it.util[$method]($typeSchema,$data,true)+") { ";if($coerceToTypes){var $dataType="dataType"+$lvl,$coerced="coerced"+$lvl;out+=" var "+$dataType+" = typeof "+$data+"; ";if(it.opts.coerceTypes=="array"){out+=" if ("+$dataType+" == 'object' && Array.isArray("+$data+")) "+$dataType+" = 'array'; "}out+=" var "+$coerced+" = undefined; ";var $bracesCoercion="";var arr1=$coerceToTypes;if(arr1){var $type,$i=-1,l1=arr1.length-1;while($i<l1){$type=arr1[$i+=1];if($i){out+=" if ("+$coerced+" === undefined) { ";$bracesCoercion+="}"}if(it.opts.coerceTypes=="array"&&$type!="array"){out+=" if ("+$dataType+" == 'array' && "+$data+".length == 1) { "+$coerced+" = "+$data+" = "+$data+"[0]; "+$dataType+" = typeof "+$data+";  } "}if($type=="string"){out+=" if ("+$dataType+" == 'number' || "+$dataType+" == 'boolean') "+$coerced+" = '' + "+$data+"; else if ("+$data+" === null) "+$coerced+" = ''; "}else if($type=="number"||$type=="integer"){out+=" if ("+$dataType+" == 'boolean' || "+$data+" === null || ("+$dataType+" == 'string' && "+$data+" && "+$data+" == +"+$data+" ";if($type=="integer"){out+=" && !("+$data+" % 1)"}out+=")) "+$coerced+" = +"+$data+"; "}else if($type=="boolean"){out+=" if ("+$data+" === 'false' || "+$data+" === 0 || "+$data+" === null) "+$coerced+" = false; else if ("+$data+" === 'true' || "+$data+" === 1) "+$coerced+" = true; "}else if($type=="null"){out+=" if ("+$data+" === '' || "+$data+" === 0 || "+$data+" === false) "+$coerced+" = null; "}else if(it.opts.coerceTypes=="array"&&$type=="array"){out+=" if ("+$dataType+" == 'string' || "+$dataType+" == 'number' || "+$dataType+" == 'boolean' || "+$data+" == null) "+$coerced+" = ["+$data+"]; "}}}out+=" "+$bracesCoercion+" if ("+$coerced+" === undefined) {   ";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } else {  ";var $parentData=$dataLvl?"data"+($dataLvl-1||""):"parentData",$parentDataProperty=$dataLvl?it.dataPathArr[$dataLvl]:"parentDataProperty";out+=" "+$data+" = "+$coerced+"; ";if(!$dataLvl){out+="if ("+$parentData+" !== undefined)"}out+=" "+$parentData+"["+$parentDataProperty+"] = "+$coerced+"; } "}else{var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}}out+=" } "}}if(it.schema.$ref&&!$refKeywords){out+=" "+it.RULES.all.$ref.code(it,"$ref")+" ";if($breakOnError){out+=" } if (errors === ";if($top){out+="0"}else{out+="errs_"+$lvl}out+=") { ";$closingBraces2+="}"}}else{if(it.opts.v5&&it.schema.patternGroups){it.logger.warn('keyword "patternGroups" is deprecated and disabled. Use option patternGroups: true to enable.')}var arr2=it.RULES;if(arr2){var $rulesGroup,i2=-1,l2=arr2.length-1;while(i2<l2){$rulesGroup=arr2[i2+=1];if($shouldUseGroup($rulesGroup)){if($rulesGroup.type){out+=" if ("+it.util.checkDataType($rulesGroup.type,$data)+") { "}if(it.opts.useDefaults&&!it.compositeRule){if($rulesGroup.type=="object"&&it.schema.properties){var $schema=it.schema.properties,$schemaKeys=Object.keys($schema);var arr3=$schemaKeys;if(arr3){var $propertyKey,i3=-1,l3=arr3.length-1;while(i3<l3){$propertyKey=arr3[i3+=1];var $sch=$schema[$propertyKey];if($sch.default!==undefined){var $passData=$data+it.util.getProperty($propertyKey);out+="  if ("+$passData+" === undefined) "+$passData+" = ";if(it.opts.useDefaults=="shared"){out+=" "+it.useDefault($sch.default)+" "}else{out+=" "+JSON.stringify($sch.default)+" "}out+="; "}}}}else if($rulesGroup.type=="array"&&Array.isArray(it.schema.items)){var arr4=it.schema.items;if(arr4){var $sch,$i=-1,l4=arr4.length-1;while($i<l4){$sch=arr4[$i+=1];if($sch.default!==undefined){var $passData=$data+"["+$i+"]";out+="  if ("+$passData+" === undefined) "+$passData+" = ";if(it.opts.useDefaults=="shared"){out+=" "+it.useDefault($sch.default)+" "}else{out+=" "+JSON.stringify($sch.default)+" "}out+="; "}}}}}var arr5=$rulesGroup.rules;if(arr5){var $rule,i5=-1,l5=arr5.length-1;while(i5<l5){$rule=arr5[i5+=1];if($shouldUseRule($rule)){var $code=$rule.code(it,$rule.keyword,$rulesGroup.type);if($code){out+=" "+$code+" ";if($breakOnError){$closingBraces1+="}"}}}}}if($breakOnError){out+=" "+$closingBraces1+" ";$closingBraces1=""}if($rulesGroup.type){out+=" } ";if($typeSchema&&$typeSchema===$rulesGroup.type&&!$coerceToTypes){out+=" else { ";var $schemaPath=it.schemaPath+".type",$errSchemaPath=it.errSchemaPath+"/type";var $$outStack=$$outStack||[];$$outStack.push(out);out="";if(it.createErrors!==false){out+=" { keyword: '"+($errorKeyword||"type")+"' , dataPath: (dataPath || '') + "+it.errorPath+" , schemaPath: "+it.util.toQuotedString($errSchemaPath)+" , params: { type: '";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' } ";if(it.opts.messages!==false){out+=" , message: 'should be ";if($typeIsArray){out+=""+$typeSchema.join(",")}else{out+=""+$typeSchema}out+="' "}if(it.opts.verbose){out+=" , schema: validate.schema"+$schemaPath+" , parentSchema: validate.schema"+it.schemaPath+" , data: "+$data+" "}out+=" } "}else{out+=" {} "}var __err=out;out=$$outStack.pop();if(!it.compositeRule&&$breakOnError){if(it.async){out+=" throw new ValidationError(["+__err+"]); "}else{out+=" validate.errors = ["+__err+"]; return false; "}}else{out+=" var err = "+__err+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}out+=" } "}}if($breakOnError){out+=" if (errors === ";if($top){out+="0"}else{out+="errs_"+$lvl}out+=") { ";$closingBraces2+="}"}}}}}if($breakOnError){out+=" "+$closingBraces2+" "}if($top){if($async){out+=" if (errors === 0) return data;           ";out+=" else throw new ValidationError(vErrors); "}else{out+=" validate.errors = vErrors; ";out+=" return errors === 0;       "}out+=" }); return validate;"}else{out+=" var "+$valid+" = errors === errs_"+$lvl+";"}out=it.util.cleanUpCode(out);if($top){out=it.util.finalCleanUpCode(out,$async)}function $shouldUseGroup($rulesGroup){var rules=$rulesGroup.rules;for(var i=0;i<rules.length;i++)if($shouldUseRule(rules[i]))return true}function $shouldUseRule($rule){return it.schema[$rule.keyword]!==undefined||$rule.implements&&$ruleImplementsSomeKeyword($rule)}function $ruleImplementsSomeKeyword($rule){var impl=$rule.implements;for(var i=0;i<impl.length;i++)if(it.schema[impl[i]]!==undefined)return true}return out}},{}],174:[function(require,module,exports){"use strict";var IDENTIFIER=/^[a-z_$][a-z0-9_$-]*$/i;var customRuleCode=require("./dotjs/custom");module.exports={add:addKeyword,get:getKeyword,remove:removeKeyword};function addKeyword(keyword,definition){var RULES=this.RULES;if(RULES.keywords[keyword])throw new Error("Keyword "+keyword+" is already defined");if(!IDENTIFIER.test(keyword))throw new Error("Keyword "+keyword+" is not a valid identifier");if(definition){if(definition.macro&&definition.valid!==undefined)throw new Error('"valid" option cannot be used with macro keywords');var dataType=definition.type;if(Array.isArray(dataType)){var i,len=dataType.length;for(i=0;i<len;i++)checkDataType(dataType[i]);for(i=0;i<len;i++)_addRule(keyword,dataType[i],definition)}else{if(dataType)checkDataType(dataType);_addRule(keyword,dataType,definition)}var $data=definition.$data===true&&this._opts.$data;if($data&&!definition.validate)throw new Error('$data support: "validate" function is not defined');var metaSchema=definition.metaSchema;if(metaSchema){if($data){metaSchema={anyOf:[metaSchema,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]}}definition.validateSchema=this.compile(metaSchema,true)}}RULES.keywords[keyword]=RULES.all[keyword]=true;function _addRule(keyword,dataType,definition){var ruleGroup;for(var i=0;i<RULES.length;i++){var rg=RULES[i];if(rg.type==dataType){ruleGroup=rg;break}}if(!ruleGroup){ruleGroup={type:dataType,rules:[]};RULES.push(ruleGroup)}var rule={keyword:keyword,definition:definition,custom:true,code:customRuleCode,implements:definition.implements};ruleGroup.rules.push(rule);RULES.custom[keyword]=rule}function checkDataType(dataType){if(!RULES.types[dataType])throw new Error("Unknown type "+dataType)}return this}function getKeyword(keyword){var rule=this.RULES.custom[keyword];return rule?rule.definition:this.RULES.keywords[keyword]||false}function removeKeyword(keyword){var RULES=this.RULES;delete RULES.keywords[keyword];delete RULES.all[keyword];delete RULES.custom[keyword];for(var i=0;i<RULES.length;i++){var rules=RULES[i].rules;for(var j=0;j<rules.length;j++){if(rules[j].keyword==keyword){rules.splice(j,1);break}}}return this}},{"./dotjs/custom":159}],175:[function(require,module,exports){"use strict";var META_SCHEMA_ID="http://json-schema.org/draft-06/schema";module.exports=function(ajv){var defaultMeta=ajv._opts.defaultMeta;var metaSchemaRef=typeof defaultMeta=="string"?{$ref:defaultMeta}:ajv.getSchema(META_SCHEMA_ID)?{$ref:META_SCHEMA_ID}:{};ajv.addKeyword("patternGroups",{metaSchema:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{type:"integer",minimum:0},minimum:{type:"integer",minimum:0},schema:metaSchemaRef},additionalProperties:false}}});ajv.RULES.all.properties.implements.push("patternGroups")}},{}],176:[function(require,module,exports){module.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#",description:"Meta-schema for $data reference (JSON-schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:false}},{}],177:[function(require,module,exports){module.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:true,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:{}},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:false},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:{},enum:{type:"array",minItems:1,uniqueItems:true},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:true}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}}},{}],178:[function(require,module,exports){"use strict";module.exports=arrayFlatten;function flattenWithDepth(array,result,depth){for(var i=0;i<array.length;i++){var value=array[i];if(depth>0&&Array.isArray(value)){flattenWithDepth(value,result,depth-1)}else{result.push(value)}}return result}function flattenForever(array,result){for(var i=0;i<array.length;i++){var value=array[i];if(Array.isArray(value)){flattenForever(value,result)}else{result.push(value)}}return result}function arrayFlatten(array,depth){if(depth==null){return flattenForever(array,[])}return flattenWithDepth(array,[],depth)}},{}],179:[function(require,module,exports){module.exports={newInvalidAsn1Error:function(msg){var e=new Error;e.name="InvalidAsn1Error";e.message=msg||"";return e}}},{}],180:[function(require,module,exports){var errors=require("./errors");var types=require("./types");var Reader=require("./reader");var Writer=require("./writer");module.exports={Reader:Reader,Writer:Writer};for(var t in types){if(types.hasOwnProperty(t))module.exports[t]=types[t]}for(var e in errors){if(errors.hasOwnProperty(e))module.exports[e]=errors[e]}},{"./errors":179,"./reader":181,"./types":182,"./writer":183}],181:[function(require,module,exports){var assert=require("assert");var ASN1=require("./types");var errors=require("./errors");var newInvalidAsn1Error=errors.newInvalidAsn1Error;function Reader(data){if(!data||!Buffer.isBuffer(data))throw new TypeError("data must be a node Buffer");this._buf=data;this._size=data.length;this._len=0;this._offset=0}Object.defineProperty(Reader.prototype,"length",{enumerable:true,get:function(){return this._len}});Object.defineProperty(Reader.prototype,"offset",{enumerable:true,get:function(){return this._offset}});Object.defineProperty(Reader.prototype,"remain",{get:function(){return this._size-this._offset}});Object.defineProperty(Reader.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}});Reader.prototype.readByte=function(peek){if(this._size-this._offset<1)return null;var b=this._buf[this._offset]&255;if(!peek)this._offset+=1;return b};Reader.prototype.peek=function(){return this.readByte(true)};Reader.prototype.readLength=function(offset){if(offset===undefined)offset=this._offset;if(offset>=this._size)return null;var lenB=this._buf[offset++]&255;if(lenB===null)return null;if((lenB&128)==128){lenB&=127;if(lenB==0)throw newInvalidAsn1Error("Indefinite length not supported");if(lenB>4)throw newInvalidAsn1Error("encoding too long");if(this._size-offset<lenB)return null;this._len=0;for(var i=0;i<lenB;i++)this._len=(this._len<<8)+(this._buf[offset++]&255)}else{this._len=lenB}return offset};Reader.prototype.readSequence=function(tag){var seq=this.peek();if(seq===null)return null;if(tag!==undefined&&tag!==seq)throw newInvalidAsn1Error("Expected 0x"+tag.toString(16)+": got 0x"+seq.toString(16));var o=this.readLength(this._offset+1);if(o===null)return null;this._offset=o;return seq};Reader.prototype.readInt=function(){return this._readTag(ASN1.Integer)};Reader.prototype.readBoolean=function(){return this._readTag(ASN1.Boolean)===0?false:true};Reader.prototype.readEnumeration=function(){return this._readTag(ASN1.Enumeration)};Reader.prototype.readString=function(tag,retbuf){if(!tag)tag=ASN1.OctetString;var b=this.peek();if(b===null)return null;if(b!==tag)throw newInvalidAsn1Error("Expected 0x"+tag.toString(16)+": got 0x"+b.toString(16));var o=this.readLength(this._offset+1);if(o===null)return null;if(this.length>this._size-o)return null;this._offset=o;if(this.length===0)return retbuf?new Buffer(0):"";var str=this._buf.slice(this._offset,this._offset+this.length);this._offset+=this.length;return retbuf?str:str.toString("utf8")};Reader.prototype.readOID=function(tag){if(!tag)tag=ASN1.OID;var b=this.readString(tag,true);if(b===null)return null;var values=[];var value=0;for(var i=0;i<b.length;i++){var byte=b[i]&255;value<<=7;value+=byte&127;if((byte&128)==0){values.push(value);value=0}}value=values.shift();values.unshift(value%40);values.unshift(value/40>>0);return values.join(".")};Reader.prototype._readTag=function(tag){assert.ok(tag!==undefined);var b=this.peek();if(b===null)return null;if(b!==tag)throw newInvalidAsn1Error("Expected 0x"+tag.toString(16)+": got 0x"+b.toString(16));var o=this.readLength(this._offset+1);if(o===null)return null;if(this.length>4)throw newInvalidAsn1Error("Integer too long: "+this.length);if(this.length>this._size-o)return null;this._offset=o;var fb=this._buf[this._offset];var value=0;for(var i=0;i<this.length;i++){value<<=8;value|=this._buf[this._offset++]&255}if((fb&128)==128&&i!==4)value-=1<<i*8;return value>>0};module.exports=Reader},{"./errors":179,"./types":182,assert:undefined}],182:[function(require,module,exports){module.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},{}],183:[function(require,module,exports){var assert=require("assert");var ASN1=require("./types");var errors=require("./errors");var newInvalidAsn1Error=errors.newInvalidAsn1Error;var DEFAULT_OPTS={size:1024,growthFactor:8};function merge(from,to){assert.ok(from);assert.equal(typeof from,"object");assert.ok(to);assert.equal(typeof to,"object");var keys=Object.getOwnPropertyNames(from);keys.forEach(function(key){if(to[key])return;var value=Object.getOwnPropertyDescriptor(from,key);Object.defineProperty(to,key,value)});return to}function Writer(options){options=merge(DEFAULT_OPTS,options||{});this._buf=new Buffer(options.size||1024);this._size=this._buf.length;this._offset=0;this._options=options;this._seq=[]}Object.defineProperty(Writer.prototype,"buffer",{get:function(){if(this._seq.length)throw new InvalidAsn1Error(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}});Writer.prototype.writeByte=function(b){if(typeof b!=="number")throw new TypeError("argument must be a Number");this._ensure(1);this._buf[this._offset++]=b};Writer.prototype.writeInt=function(i,tag){if(typeof i!=="number")throw new TypeError("argument must be a Number");if(typeof tag!=="number")tag=ASN1.Integer;var sz=4;while(((i&4286578688)===0||(i&4286578688)===4286578688>>0)&&sz>1){sz--;i<<=8}if(sz>4)throw new InvalidAsn1Error("BER ints cannot be > 0xffffffff");this._ensure(2+sz);this._buf[this._offset++]=tag;this._buf[this._offset++]=sz;while(sz-- >0){this._buf[this._offset++]=(i&4278190080)>>>24;i<<=8}};Writer.prototype.writeNull=function(){this.writeByte(ASN1.Null);this.writeByte(0)};Writer.prototype.writeEnumeration=function(i,tag){if(typeof i!=="number")throw new TypeError("argument must be a Number");if(typeof tag!=="number")tag=ASN1.Enumeration;return this.writeInt(i,tag)};Writer.prototype.writeBoolean=function(b,tag){if(typeof b!=="boolean")throw new TypeError("argument must be a Boolean");if(typeof tag!=="number")tag=ASN1.Boolean;this._ensure(3);this._buf[this._offset++]=tag;this._buf[this._offset++]=1;this._buf[this._offset++]=b?255:0};Writer.prototype.writeString=function(s,tag){if(typeof s!=="string")throw new TypeError("argument must be a string (was: "+typeof s+")");if(typeof tag!=="number")tag=ASN1.OctetString;var len=Buffer.byteLength(s);this.writeByte(tag);this.writeLength(len);if(len){this._ensure(len);this._buf.write(s,this._offset);this._offset+=len}};Writer.prototype.writeBuffer=function(buf,tag){if(typeof tag!=="number")throw new TypeError("tag must be a number");if(!Buffer.isBuffer(buf))throw new TypeError("argument must be a buffer");this.writeByte(tag);this.writeLength(buf.length);this._ensure(buf.length);buf.copy(this._buf,this._offset,0,buf.length);this._offset+=buf.length};Writer.prototype.writeStringArray=function(strings){if(!strings instanceof Array)throw new TypeError("argument must be an Array[String]");var self=this;strings.forEach(function(s){self.writeString(s)})};Writer.prototype.writeOID=function(s,tag){if(typeof s!=="string")throw new TypeError("argument must be a string");if(typeof tag!=="number")tag=ASN1.OID;if(!/^([0-9]+\.){3,}[0-9]+$/.test(s))throw new Error("argument is not a valid OID string");function encodeOctet(bytes,octet){if(octet<128){bytes.push(octet)}else if(octet<16384){bytes.push(octet>>>7|128);bytes.push(octet&127)}else if(octet<2097152){bytes.push(octet>>>14|128);bytes.push((octet>>>7|128)&255);bytes.push(octet&127)}else if(octet<268435456){bytes.push(octet>>>21|128);bytes.push((octet>>>14|128)&255);bytes.push((octet>>>7|128)&255);bytes.push(octet&127)}else{bytes.push((octet>>>28|128)&255);bytes.push((octet>>>21|128)&255);bytes.push((octet>>>14|128)&255);bytes.push((octet>>>7|128)&255);bytes.push(octet&127)}}var tmp=s.split(".");var bytes=[];bytes.push(parseInt(tmp[0],10)*40+parseInt(tmp[1],10));tmp.slice(2).forEach(function(b){encodeOctet(bytes,parseInt(b,10))});var self=this;this._ensure(2+bytes.length);this.writeByte(tag);this.writeLength(bytes.length);bytes.forEach(function(b){self.writeByte(b)})};Writer.prototype.writeLength=function(len){if(typeof len!=="number")throw new TypeError("argument must be a Number");this._ensure(4);if(len<=127){this._buf[this._offset++]=len}else if(len<=255){this._buf[this._offset++]=129;this._buf[this._offset++]=len}else if(len<=65535){this._buf[this._offset++]=130;this._buf[this._offset++]=len>>8;this._buf[this._offset++]=len}else if(len<=16777215){this._buf[this._offset++]=131;this._buf[this._offset++]=len>>16;this._buf[this._offset++]=len>>8;this._buf[this._offset++]=len}else{throw new InvalidAsn1ERror("Length too long (> 4 bytes)")}};Writer.prototype.startSequence=function(tag){if(typeof tag!=="number")tag=ASN1.Sequence|ASN1.Constructor;this.writeByte(tag);this._seq.push(this._offset);this._ensure(3);this._offset+=3};Writer.prototype.endSequence=function(){var seq=this._seq.pop();var start=seq+3;var len=this._offset-start;if(len<=127){this._shift(start,len,-2);this._buf[seq]=len}else if(len<=255){this._shift(start,len,-1);this._buf[seq]=129;this._buf[seq+1]=len}else if(len<=65535){this._buf[seq]=130;this._buf[seq+1]=len>>8;this._buf[seq+2]=len}else if(len<=16777215){this._shift(start,len,1);this._buf[seq]=131;this._buf[seq+1]=len>>16;this._buf[seq+2]=len>>8;this._buf[seq+3]=len}else{throw new InvalidAsn1Error("Sequence too long")}};Writer.prototype._shift=function(start,len,shift){assert.ok(start!==undefined);assert.ok(len!==undefined);assert.ok(shift);this._buf.copy(this._buf,start+shift,start,start+len);this._offset+=shift};Writer.prototype._ensure=function(len){assert.ok(len);if(this._size-this._offset<len){var sz=this._size*this._options.growthFactor;if(sz-this._offset<len)sz+=len;var buf=new Buffer(sz);this._buf.copy(buf,0,0,this._offset);this._buf=buf;this._size=sz}};module.exports=Writer},{"./errors":179,"./types":182,assert:undefined}],184:[function(require,module,exports){var Ber=require("./ber/index");module.exports={Ber:Ber,BerReader:Ber.Reader,BerWriter:Ber.Writer}},{"./ber/index":180}],185:[function(require,module,exports){var assert=require("assert");var Stream=require("stream").Stream;var util=require("util");var UUID_REGEXP=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/;function _capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1)}function _toss(name,expected,oper,arg,actual){throw new assert.AssertionError({message:util.format("%s (%s) is required",name,expected),actual:actual===undefined?typeof arg:actual(arg),expected:expected,operator:oper||"===",stackStartFunction:_toss.caller})}function _getClass(arg){return Object.prototype.toString.call(arg).slice(8,-1)}function noop(){}var types={bool:{check:function(arg){return typeof arg==="boolean"}},func:{check:function(arg){return typeof arg==="function"}},string:{check:function(arg){return typeof arg==="string"}},object:{check:function(arg){return typeof arg==="object"&&arg!==null}},number:{check:function(arg){return typeof arg==="number"&&!isNaN(arg)}},finite:{check:function(arg){return typeof arg==="number"&&!isNaN(arg)&&isFinite(arg)}},buffer:{check:function(arg){return Buffer.isBuffer(arg)},operator:"Buffer.isBuffer"},array:{check:function(arg){return Array.isArray(arg)},operator:"Array.isArray"},stream:{check:function(arg){return arg instanceof Stream},operator:"instanceof",actual:_getClass},date:{check:function(arg){return arg instanceof Date},operator:"instanceof",actual:_getClass},regexp:{check:function(arg){return arg instanceof RegExp},operator:"instanceof",actual:_getClass},uuid:{check:function(arg){return typeof arg==="string"&&UUID_REGEXP.test(arg)},operator:"isUUID"}};function _setExports(ndebug){var keys=Object.keys(types);var out;if(process.env.NODE_NDEBUG){out=noop}else{out=function(arg,msg){if(!arg){_toss(msg,"true",arg)}}}keys.forEach(function(k){if(ndebug){out[k]=noop;return}var type=types[k];out[k]=function(arg,msg){if(!type.check(arg)){_toss(msg,k,type.operator,arg,type.actual)}}});keys.forEach(function(k){var name="optional"+_capitalize(k);if(ndebug){out[name]=noop;return}var type=types[k];out[name]=function(arg,msg){if(arg===undefined||arg===null){return}if(!type.check(arg)){_toss(msg,k,type.operator,arg,type.actual)}}});keys.forEach(function(k){var name="arrayOf"+_capitalize(k);if(ndebug){out[name]=noop;return}var type=types[k];var expected="["+k+"]";out[name]=function(arg,msg){if(!Array.isArray(arg)){_toss(msg,expected,type.operator,arg,type.actual)}var i;for(i=0;i<arg.length;i++){if(!type.check(arg[i])){_toss(msg,expected,type.operator,arg,type.actual)}}}});keys.forEach(function(k){var name="optionalArrayOf"+_capitalize(k);if(ndebug){out[name]=noop;return}var type=types[k];var expected="["+k+"]";out[name]=function(arg,msg){if(arg===undefined||arg===null){return}if(!Array.isArray(arg)){_toss(msg,expected,type.operator,arg,type.actual)}var i;for(i=0;i<arg.length;i++){if(!type.check(arg[i])){_toss(msg,expected,type.operator,arg,type.actual)}}}});Object.keys(assert).forEach(function(k){if(k==="AssertionError"){out[k]=assert[k];return}if(ndebug){out[k]=noop;return}out[k]=assert[k]});out._setExports=_setExports;return out}module.exports=_setExports(process.env.NODE_NDEBUG)},{assert:undefined,stream:undefined,util:undefined}],186:[function(require,module,exports){module.exports={parallel:require("./parallel.js"),serial:require("./serial.js"),serialOrdered:require("./serialOrdered.js")}},{"./parallel.js":193,"./serial.js":194,"./serialOrdered.js":195}],187:[function(require,module,exports){module.exports=abort;function abort(state){Object.keys(state.jobs).forEach(clean.bind(state));state.jobs={}}function clean(key){if(typeof this.jobs[key]=="function"){this.jobs[key]()}}},{}],188:[function(require,module,exports){var defer=require("./defer.js");module.exports=async;function async(callback){var isAsync=false;defer(function(){isAsync=true});return function async_callback(err,result){if(isAsync){callback(err,result)}else{defer(function nextTick_callback(){callback(err,result)})}}}},{"./defer.js":189}],189:[function(require,module,exports){module.exports=defer;function defer(fn){var nextTick=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;if(nextTick){nextTick(fn)}else{setTimeout(fn,0)}}},{}],190:[function(require,module,exports){var async=require("./async.js"),abort=require("./abort.js");module.exports=iterate;function iterate(list,iterator,state,callback){var key=state["keyedList"]?state["keyedList"][state.index]:state.index;state.jobs[key]=runJob(iterator,key,list[key],function(error,output){if(!(key in state.jobs)){return}delete state.jobs[key];if(error){abort(state)}else{state.results[key]=output}callback(error,state.results)})}function runJob(iterator,key,item,callback){var aborter;if(iterator.length==2){aborter=iterator(item,async(callback))}else{aborter=iterator(item,key,async(callback))}return aborter}},{"./abort.js":187,"./async.js":188}],191:[function(require,module,exports){module.exports=state;function state(list,sortMethod){var isNamedList=!Array.isArray(list),initState={index:0,keyedList:isNamedList||sortMethod?Object.keys(list):null,jobs:{},results:isNamedList?{}:[],size:isNamedList?Object.keys(list).length:list.length};if(sortMethod){initState.keyedList.sort(isNamedList?sortMethod:function(a,b){return sortMethod(list[a],list[b])})}return initState}},{}],192:[function(require,module,exports){var abort=require("./abort.js"),async=require("./async.js");module.exports=terminator;function terminator(callback){if(!Object.keys(this.jobs).length){return}this.index=this.size;abort(this);async(callback)(null,this.results)}},{"./abort.js":187,"./async.js":188}],193:[function(require,module,exports){var iterate=require("./lib/iterate.js"),initState=require("./lib/state.js"),terminator=require("./lib/terminator.js");module.exports=parallel;function parallel(list,iterator,callback){var state=initState(list);while(state.index<(state["keyedList"]||list).length){iterate(list,iterator,state,function(error,result){if(error){callback(error,result);return}if(Object.keys(state.jobs).length===0){callback(null,state.results);return}});state.index++}return terminator.bind(state,callback)}},{"./lib/iterate.js":190,"./lib/state.js":191,"./lib/terminator.js":192}],194:[function(require,module,exports){var serialOrdered=require("./serialOrdered.js");module.exports=serial;function serial(list,iterator,callback){return serialOrdered(list,iterator,null,callback)}},{"./serialOrdered.js":195}],195:[function(require,module,exports){var iterate=require("./lib/iterate.js"),initState=require("./lib/state.js"),terminator=require("./lib/terminator.js");module.exports=serialOrdered;module.exports.ascending=ascending;module.exports.descending=descending;function serialOrdered(list,iterator,sortMethod,callback){var state=initState(list,sortMethod);iterate(list,iterator,state,function iteratorHandler(error,result){if(error){callback(error,result);return}state.index++;if(state.index<(state["keyedList"]||list).length){iterate(list,iterator,state,iteratorHandler);return}callback(null,state.results)});return terminator.bind(state,callback)}function ascending(a,b){return a<b?-1:a>b?1:0}function descending(a,b){return-1*ascending(a,b)}},{"./lib/iterate.js":190,"./lib/state.js":191,"./lib/terminator.js":192}],196:[function(require,module,exports){var crypto=require("crypto"),parse=require("url").parse;var keys=["acl","location","logging","notification","partNumber","policy","requestPayment","torrent","uploadId","uploads","versionId","versioning","versions","website"];function authorization(options){return"AWS "+options.key+":"+sign(options)}module.exports=authorization;module.exports.authorization=authorization;function hmacSha1(options){return crypto.createHmac("sha1",options.secret).update(options.message).digest("base64")}module.exports.hmacSha1=hmacSha1;function sign(options){options.message=stringToSign(options);return hmacSha1(options)}module.exports.sign=sign;function signQuery(options){options.message=queryStringToSign(options);return hmacSha1(options)}module.exports.signQuery=signQuery;function stringToSign(options){var headers=options.amazonHeaders||"";if(headers)headers+="\n";var r=[options.verb,options.md5,options.contentType,options.date?options.date.toUTCString():"",headers+options.resource];return r.join("\n")}module.exports.stringToSign=stringToSign;function queryStringToSign(options){return"GET\n\n\n"+options.date+"\n"+options.resource}module.exports.queryStringToSign=queryStringToSign;function canonicalizeHeaders(headers){var buf=[],fields=Object.keys(headers);for(var i=0,len=fields.length;i<len;++i){var field=fields[i],val=headers[field],field=field.toLowerCase();if(0!==field.indexOf("x-amz"))continue;buf.push(field+":"+val)}return buf.sort().join("\n")}module.exports.canonicalizeHeaders=canonicalizeHeaders;function canonicalizeResource(resource){var url=parse(resource,true),path=url.pathname,buf=[];Object.keys(url.query).forEach(function(key){if(!~keys.indexOf(key))return;var val=""==url.query[key]?"":"="+encodeURIComponent(url.query[key]);buf.push(key+val)});return path+(buf.length?"?"+buf.sort().join("&"):"")}module.exports.canonicalizeResource=canonicalizeResource},{crypto:undefined,url:undefined}],197:[function(require,module,exports){var aws4=exports,url=require("url"),querystring=require("querystring"),crypto=require("crypto"),lru=require("./lru"),credentialsCache=lru(1e3);function hmac(key,string,encoding){return crypto.createHmac("sha256",key).update(string,"utf8").digest(encoding)}function hash(string,encoding){return crypto.createHash("sha256").update(string,"utf8").digest(encoding)}function encodeRfc3986(urlEncodedString){return urlEncodedString.replace(/[!'()*]/g,function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()})}function RequestSigner(request,credentials){if(typeof request==="string")request=url.parse(request);var headers=request.headers=request.headers||{},hostParts=this.matchHost(request.hostname||request.host||headers.Host||headers.host);this.request=request;this.credentials=credentials||this.defaultCredentials();this.service=request.service||hostParts[0]||"";this.region=request.region||hostParts[1]||"us-east-1";if(this.service==="email")this.service="ses";if(!request.method&&request.body)request.method="POST";if(!headers.Host&&!headers.host){headers.Host=request.hostname||request.host||this.createHost();if(request.port)headers.Host+=":"+request.port}if(!request.hostname&&!request.host)request.hostname=headers.Host||headers.host;this.isCodeCommitGit=this.service==="codecommit"&&request.method==="GIT"}RequestSigner.prototype.matchHost=function(host){var match=(host||"").match(/([^\.]+)\.(?:([^\.]*)\.)?amazonaws\.com$/);var hostParts=(match||[]).slice(1,3);if(hostParts[1]==="es")hostParts=hostParts.reverse();return hostParts};RequestSigner.prototype.isSingleRegion=function(){if(["s3","sdb"].indexOf(this.service)>=0&&this.region==="us-east-1")return true;return["cloudfront","ls","route53","iam","importexport","sts"].indexOf(this.service)>=0};RequestSigner.prototype.createHost=function(){var region=this.isSingleRegion()?"":(this.service==="s3"&&this.region!=="us-east-1"?"-":".")+this.region,service=this.service==="ses"?"email":this.service;return service+region+".amazonaws.com"};RequestSigner.prototype.prepareRequest=function(){this.parsePath();var request=this.request,headers=request.headers,query;if(request.signQuery){this.parsedPath.query=query=this.parsedPath.query||{};if(this.credentials.sessionToken)query["X-Amz-Security-Token"]=this.credentials.sessionToken;if(this.service==="s3"&&!query["X-Amz-Expires"])query["X-Amz-Expires"]=86400;if(query["X-Amz-Date"])this.datetime=query["X-Amz-Date"];else query["X-Amz-Date"]=this.getDateTime();query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256";query["X-Amz-Credential"]=this.credentials.accessKeyId+"/"+this.credentialString();query["X-Amz-SignedHeaders"]=this.signedHeaders()}else{if(!request.doNotModifyHeaders&&!this.isCodeCommitGit){if(request.body&&!headers["Content-Type"]&&!headers["content-type"])headers["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8";if(request.body&&!headers["Content-Length"]&&!headers["content-length"])headers["Content-Length"]=Buffer.byteLength(request.body);if(this.credentials.sessionToken&&!headers["X-Amz-Security-Token"]&&!headers["x-amz-security-token"])headers["X-Amz-Security-Token"]=this.credentials.sessionToken;if(this.service==="s3"&&!headers["X-Amz-Content-Sha256"]&&!headers["x-amz-content-sha256"])headers["X-Amz-Content-Sha256"]=hash(this.request.body||"","hex");if(headers["X-Amz-Date"]||headers["x-amz-date"])this.datetime=headers["X-Amz-Date"]||headers["x-amz-date"];else headers["X-Amz-Date"]=this.getDateTime()}delete headers.Authorization;delete headers.authorization}};RequestSigner.prototype.sign=function(){if(!this.parsedPath)this.prepareRequest();if(this.request.signQuery){this.parsedPath.query["X-Amz-Signature"]=this.signature()}else{this.request.headers.Authorization=this.authHeader()}this.request.path=this.formatPath();return this.request};RequestSigner.prototype.getDateTime=function(){if(!this.datetime){var headers=this.request.headers,date=new Date(headers.Date||headers.date||new Date);this.datetime=date.toISOString().replace(/[:\-]|\.\d{3}/g,"");if(this.isCodeCommitGit)this.datetime=this.datetime.slice(0,-1)}return this.datetime};RequestSigner.prototype.getDate=function(){return this.getDateTime().substr(0,8)};RequestSigner.prototype.authHeader=function(){return["AWS4-HMAC-SHA256 Credential="+this.credentials.accessKeyId+"/"+this.credentialString(),"SignedHeaders="+this.signedHeaders(),"Signature="+this.signature()].join(", ")};RequestSigner.prototype.signature=function(){var date=this.getDate(),cacheKey=[this.credentials.secretAccessKey,date,this.region,this.service].join(),kDate,kRegion,kService,kCredentials=credentialsCache.get(cacheKey);if(!kCredentials){kDate=hmac("AWS4"+this.credentials.secretAccessKey,date);kRegion=hmac(kDate,this.region);kService=hmac(kRegion,this.service);kCredentials=hmac(kService,"aws4_request");credentialsCache.set(cacheKey,kCredentials)}return hmac(kCredentials,this.stringToSign(),"hex")};RequestSigner.prototype.stringToSign=function(){return["AWS4-HMAC-SHA256",this.getDateTime(),this.credentialString(),hash(this.canonicalString(),"hex")].join("\n")};RequestSigner.prototype.canonicalString=function(){if(!this.parsedPath)this.prepareRequest();var pathStr=this.parsedPath.path,query=this.parsedPath.query,headers=this.request.headers,queryStr="",normalizePath=this.service!=="s3",decodePath=this.service==="s3"||this.request.doNotEncodePath,decodeSlashesInPath=this.service==="s3",firstValOnly=this.service==="s3",bodyHash;if(this.service==="s3"&&this.request.signQuery){bodyHash="UNSIGNED-PAYLOAD"}else if(this.isCodeCommitGit){bodyHash=""}else{bodyHash=headers["X-Amz-Content-Sha256"]||headers["x-amz-content-sha256"]||hash(this.request.body||"","hex")}if(query){queryStr=encodeRfc3986(querystring.stringify(Object.keys(query).sort().reduce(function(obj,key){if(!key)return obj;obj[key]=!Array.isArray(query[key])?query[key]:firstValOnly?query[key][0]:query[key].slice().sort();return obj},{})))}if(pathStr!=="/"){if(normalizePath)pathStr=pathStr.replace(/\/{2,}/g,"/");pathStr=pathStr.split("/").reduce(function(path,piece){if(normalizePath&&piece===".."){path.pop()}else if(!normalizePath||piece!=="."){if(decodePath)piece=querystring.unescape(piece);path.push(encodeRfc3986(querystring.escape(piece)))}return path},[]).join("/");if(pathStr[0]!=="/")pathStr="/"+pathStr;if(decodeSlashesInPath)pathStr=pathStr.replace(/%2F/g,"/")}return[this.request.method||"GET",pathStr,queryStr,this.canonicalHeaders()+"\n",this.signedHeaders(),bodyHash].join("\n")};RequestSigner.prototype.canonicalHeaders=function(){var headers=this.request.headers;function trimAll(header){return header.toString().trim().replace(/\s+/g," ")}return Object.keys(headers).sort(function(a,b){return a.toLowerCase()<b.toLowerCase()?-1:1}).map(function(key){return key.toLowerCase()+":"+trimAll(headers[key])}).join("\n")};RequestSigner.prototype.signedHeaders=function(){return Object.keys(this.request.headers).map(function(key){return key.toLowerCase()}).sort().join(";")};RequestSigner.prototype.credentialString=function(){return[this.getDate(),this.region,this.service,"aws4_request"].join("/")};RequestSigner.prototype.defaultCredentials=function(){var env=process.env;return{accessKeyId:env.AWS_ACCESS_KEY_ID||env.AWS_ACCESS_KEY,secretAccessKey:env.AWS_SECRET_ACCESS_KEY||env.AWS_SECRET_KEY,sessionToken:env.AWS_SESSION_TOKEN}};RequestSigner.prototype.parsePath=function(){var path=this.request.path||"/",queryIx=path.indexOf("?"),query=null;if(queryIx>=0){query=querystring.parse(path.slice(queryIx+1));path=path.slice(0,queryIx)}if(/[^0-9A-Za-z!'()*\-._~%/]/.test(path)){path=path.split("/").map(function(piece){return querystring.escape(querystring.unescape(piece))}).join("/")}this.parsedPath={path:path,query:query}};RequestSigner.prototype.formatPath=function(){var path=this.parsedPath.path,query=this.parsedPath.query;if(!query)return path;if(query[""]!=null)delete query[""];return path+"?"+encodeRfc3986(querystring.stringify(query))};aws4.RequestSigner=RequestSigner;aws4.sign=function(request,credentials){return new RequestSigner(request,credentials).sign()}},{"./lru":198,crypto:undefined,querystring:undefined,url:undefined}],198:[function(require,module,exports){module.exports=function(size){return new LruCache(size)};function LruCache(size){this.capacity=size|0;this.map=Object.create(null);this.list=new DoublyLinkedList}LruCache.prototype.get=function(key){var node=this.map[key];if(node==null)return undefined;this.used(node);return node.val};LruCache.prototype.set=function(key,val){var node=this.map[key];if(node!=null){node.val=val}else{if(!this.capacity)this.prune();if(!this.capacity)return false;node=new DoublyLinkedNode(key,val);this.map[key]=node;this.capacity--}this.used(node);return true};LruCache.prototype.used=function(node){this.list.moveToFront(node)};LruCache.prototype.prune=function(){var node=this.list.pop();if(node!=null){delete this.map[node.key];this.capacity++}};function DoublyLinkedList(){this.firstNode=null;this.lastNode=null}DoublyLinkedList.prototype.moveToFront=function(node){if(this.firstNode==node)return;this.remove(node);if(this.firstNode==null){this.firstNode=node;this.lastNode=node;node.prev=null;node.next=null}else{node.prev=null;node.next=this.firstNode;node.next.prev=node;this.firstNode=node}};DoublyLinkedList.prototype.pop=function(){var lastNode=this.lastNode;if(lastNode!=null){this.remove(lastNode)}return lastNode};DoublyLinkedList.prototype.remove=function(node){if(this.firstNode==node){this.firstNode=node.next}else if(node.prev!=null){node.prev.next=node.next}if(this.lastNode==node){this.lastNode=node.prev}else if(node.next!=null){node.next.prev=node.prev}};function DoublyLinkedNode(key,val){this.key=key;this.val=val;this.prev=null;this.next=null}},{}],199:[function(require,module,exports){"use strict";module.exports=balanced;function balanced(a,b,str){if(a instanceof RegExp)a=maybeMatch(a,str);if(b instanceof RegExp)b=maybeMatch(b,str);var r=range(a,b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)}}function maybeMatch(reg,str){var m=str.match(reg);return m?m[0]:null}balanced.range=range;function range(a,b,str){var begs,beg,left,right,result;var ai=str.indexOf(a);var bi=str.indexOf(b,ai+1);var i=ai;if(ai>=0&&bi>0){begs=[];left=str.length;while(i>=0&&!result){if(i==ai){begs.push(i);ai=str.indexOf(a,i+1)}else if(begs.length==1){result=[begs.pop(),bi]}else{beg=begs.pop();if(beg<left){left=beg;right=bi}bi=str.indexOf(b,i+1)}i=ai<bi&&ai>=0?ai:bi}if(begs.length){result=[left,right]}}return result}},{}],200:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer;module.exports=auth;module.exports.parse=parse;var CREDENTIALS_REGEXP=/^ *(?:[Bb][Aa][Ss][Ii][Cc]) +([A-Za-z0-9._~+/-]+=*) *$/;var USER_PASS_REGEXP=/^([^:]*):(.*)$/;function auth(req){if(!req){throw new TypeError("argument req is required")}if(typeof req!=="object"){throw new TypeError("argument req is required to be an object")}var header=getAuthorization(req);return parse(header)}function decodeBase64(str){return Buffer.from(str,"base64").toString()}function getAuthorization(req){if(!req.headers||typeof req.headers!=="object"){throw new TypeError("argument req is required to have headers property")}return req.headers.authorization}function parse(string){if(typeof string!=="string"){return undefined}var match=CREDENTIALS_REGEXP.exec(string);if(!match){return undefined}var userPass=USER_PASS_REGEXP.exec(decodeBase64(match[1]));if(!userPass){return undefined}return new Credentials(userPass[1],userPass[2])}function Credentials(name,pass){this.name=name;this.pass=pass}},{"safe-buffer":484}],201:[function(require,module,exports){"use strict";var crypto_hash_sha512=require("tweetnacl").lowlevel.crypto_hash;var BLF_J=0;var Blowfish=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])];this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function F(S,x8,i){return(S[0][x8[i+3]]+S[1][x8[i+2]]^S[2][x8[i+1]])+S[3][x8[i]]}Blowfish.prototype.encipher=function(x,x8){if(x8===undefined){x8=new Uint8Array(x.buffer);if(x.byteOffset!==0)x8=x8.subarray(x.byteOffset)}x[0]^=this.P[0];for(var i=1;i<16;i+=2){x[1]^=F(this.S,x8,0)^this.P[i];x[0]^=F(this.S,x8,4)^this.P[i+1]}var t=x[0];x[0]=x[1]^this.P[17];x[1]=t};Blowfish.prototype.decipher=function(x){var x8=new Uint8Array(x.buffer);if(x.byteOffset!==0)x8=x8.subarray(x.byteOffset);x[0]^=this.P[17];for(var i=16;i>0;i-=2){x[1]^=F(this.S,x8,0)^this.P[i];x[0]^=F(this.S,x8,4)^this.P[i-1]}var t=x[0];x[0]=x[1]^this.P[0];x[1]=t};function stream2word(data,databytes){var i,temp=0;for(i=0;i<4;i++,BLF_J++){if(BLF_J>=databytes)BLF_J=0;temp=temp<<8|data[BLF_J]}return temp}Blowfish.prototype.expand0state=function(key,keybytes){var d=new Uint32Array(2),i,k;var d8=new Uint8Array(d.buffer);for(i=0,BLF_J=0;i<18;i++){this.P[i]^=stream2word(key,keybytes)}BLF_J=0;for(i=0;i<18;i+=2){this.encipher(d,d8);this.P[i]=d[0];this.P[i+1]=d[1]}for(i=0;i<4;i++){for(k=0;k<256;k+=2){this.encipher(d,d8);this.S[i][k]=d[0];this.S[i][k+1]=d[1]}}};Blowfish.prototype.expandstate=function(data,databytes,key,keybytes){var d=new Uint32Array(2),i,k;for(i=0,BLF_J=0;i<18;i++){this.P[i]^=stream2word(key,keybytes)}for(i=0,BLF_J=0;i<18;i+=2){d[0]^=stream2word(data,databytes);d[1]^=stream2word(data,databytes);this.encipher(d);this.P[i]=d[0];this.P[i+1]=d[1]}for(i=0;i<4;i++){for(k=0;k<256;k+=2){d[0]^=stream2word(data,databytes);d[1]^=stream2word(data,databytes);this.encipher(d);this.S[i][k]=d[0];this.S[i][k+1]=d[1]}}BLF_J=0};Blowfish.prototype.enc=function(data,blocks){for(var i=0;i<blocks;i++){this.encipher(data.subarray(i*2))}};Blowfish.prototype.dec=function(data,blocks){for(var i=0;i<blocks;i++){this.decipher(data.subarray(i*2))}};var BCRYPT_BLOCKS=8,BCRYPT_HASHSIZE=32;function bcrypt_hash(sha2pass,sha2salt,out){var state=new Blowfish,cdata=new Uint32Array(BCRYPT_BLOCKS),i,ciphertext=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);state.expandstate(sha2salt,64,sha2pass,64);for(i=0;i<64;i++){state.expand0state(sha2salt,64);state.expand0state(sha2pass,64)}for(i=0;i<BCRYPT_BLOCKS;i++)cdata[i]=stream2word(ciphertext,ciphertext.byteLength);for(i=0;i<64;i++)state.enc(cdata,cdata.byteLength/8);for(i=0;i<BCRYPT_BLOCKS;i++){out[4*i+3]=cdata[i]>>>24;out[4*i+2]=cdata[i]>>>16;out[4*i+1]=cdata[i]>>>8;out[4*i+0]=cdata[i]}}function bcrypt_pbkdf(pass,passlen,salt,saltlen,key,keylen,rounds){var sha2pass=new Uint8Array(64),sha2salt=new Uint8Array(64),out=new Uint8Array(BCRYPT_HASHSIZE),tmpout=new Uint8Array(BCRYPT_HASHSIZE),countsalt=new Uint8Array(saltlen+4),i,j,amt,stride,dest,count,origkeylen=keylen;if(rounds<1)return-1;if(passlen===0||saltlen===0||keylen===0||keylen>out.byteLength*out.byteLength||saltlen>1<<20)return-1;stride=Math.floor((keylen+out.byteLength-1)/out.byteLength);amt=Math.floor((keylen+stride-1)/stride);for(i=0;i<saltlen;i++)countsalt[i]=salt[i];crypto_hash_sha512(sha2pass,pass,passlen);for(count=1;keylen>0;count++){countsalt[saltlen+0]=count>>>24;countsalt[saltlen+1]=count>>>16;countsalt[saltlen+2]=count>>>8;countsalt[saltlen+3]=count;crypto_hash_sha512(sha2salt,countsalt,saltlen+4);bcrypt_hash(sha2pass,sha2salt,tmpout);for(i=out.byteLength;i--;)out[i]=tmpout[i];for(i=1;i<rounds;i++){crypto_hash_sha512(sha2salt,tmpout,tmpout.byteLength);bcrypt_hash(sha2pass,sha2salt,tmpout);for(j=0;j<out.byteLength;j++)out[j]^=tmpout[j]}amt=Math.min(amt,keylen);for(i=0;i<amt;i++){dest=i*stride+(count-1);if(dest>=origkeylen)break;key[dest]=out[i]}keylen-=i}return 0}module.exports={BLOCKS:BCRYPT_BLOCKS,HASHSIZE:BCRYPT_HASHSIZE,hash:bcrypt_hash,pbkdf:bcrypt_pbkdf}},{tweetnacl:556}],202:[function(require,module,exports){var fs=require("fs"),path=require("path"),join=path.join,dirname=path.dirname,exists=fs.accessSync&&function(path){try{fs.accessSync(path)}catch(e){return false}return true}||fs.existsSync||path.existsSync,defaults={arrow:process.env.NODE_BINDINGS_ARROW||"  ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};function bindings(opts){if(typeof opts=="string"){opts={bindings:opts}}else if(!opts){opts={}}Object.keys(defaults).map(function(i){if(!(i in opts))opts[i]=defaults[i]});if(!opts.module_root){opts.module_root=exports.getRoot(exports.getFileName())}if(path.extname(opts.bindings)!=".node"){opts.bindings+=".node"}var tries=[],i=0,l=opts.try.length,n,b,err;for(;i<l;i++){n=join.apply(null,opts.try[i].map(function(p){return opts[p]||p}));tries.push(n);try{b=opts.path?require.resolve(n):require(n);if(!opts.path){b.path=n}return b}catch(e){if(!/not find/i.test(e.message)){throw e}}}err=new Error("Could not locate the bindings file. Tried:\n"+tries.map(function(a){return opts.arrow+a}).join("\n"));err.tries=tries;throw err}module.exports=exports=bindings;exports.getFileName=function getFileName(calling_file){var origPST=Error.prepareStackTrace,origSTL=Error.stackTraceLimit,dummy={},fileName;Error.stackTraceLimit=10;Error.prepareStackTrace=function(e,st){for(var i=0,l=st.length;i<l;i++){fileName=st[i].getFileName();if(fileName!==__filename){if(calling_file){if(fileName!==calling_file){return}}else{return}}}};Error.captureStackTrace(dummy);dummy.stack;Error.prepareStackTrace=origPST;Error.stackTraceLimit=origSTL;return fileName};exports.getRoot=function getRoot(file){var dir=dirname(file),prev;while(true){if(dir==="."){dir=process.cwd()}if(exists(join(dir,"package.json"))||exists(join(dir,"node_modules"))){return dir}if(prev===dir){throw new Error('Could not find module root given file: "'+file+'". Do you have a `package.json` file? ')}prev=dir;dir=join(dir,"..")}}},{fs:undefined,path:undefined}],203:[function(require,module,exports){"use strict";module.exports=function(Promise){var SomePromiseArray=Promise._SomePromiseArray;function any(promises){var ret=new SomePromiseArray(promises);var promise=ret.promise();ret.setHowMany(1);ret.setUnwrap();ret.init();return promise}Promise.any=function(promises){return any(promises)};Promise.prototype.any=function(){return any(this)}}},{}],204:[function(require,module,exports){"use strict";var firstLineError;try{throw new Error}catch(e){firstLineError=e}var schedule=require("./schedule");var Queue=require("./queue");var util=require("./util");function Async(){this._customScheduler=false;this._isTickUsed=false;this._lateQueue=new Queue(16);this._normalQueue=new Queue(16);this._haveDrainedQueues=false;this._trampolineEnabled=true;var self=this;this.drainQueues=function(){self._drainQueues()};this._schedule=schedule}Async.prototype.setScheduler=function(fn){var prev=this._schedule;this._schedule=fn;this._customScheduler=true;return prev};Async.prototype.hasCustomScheduler=function(){return this._customScheduler};Async.prototype.enableTrampoline=function(){this._trampolineEnabled=true};Async.prototype.disableTrampolineIfNecessary=function(){if(util.hasDevTools){this._trampolineEnabled=false}};Async.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};Async.prototype.fatalError=function(e,isNode){if(isNode){process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n");process.exit(2)}else{this.throwLater(e)}};Async.prototype.throwLater=function(fn,arg){if(arguments.length===1){arg=fn;fn=function(){throw arg}}if(typeof setTimeout!=="undefined"){setTimeout(function(){fn(arg)},0)}else try{this._schedule(function(){fn(arg)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}};function AsyncInvokeLater(fn,receiver,arg){this._lateQueue.push(fn,receiver,arg);this._queueTick()}function AsyncInvoke(fn,receiver,arg){this._normalQueue.push(fn,receiver,arg);this._queueTick()}function AsyncSettlePromises(promise){this._normalQueue._pushOne(promise);this._queueTick()}if(!util.hasDevTools){Async.prototype.invokeLater=AsyncInvokeLater;Async.prototype.invoke=AsyncInvoke;Async.prototype.settlePromises=AsyncSettlePromises}else{Async.prototype.invokeLater=function(fn,receiver,arg){if(this._trampolineEnabled){AsyncInvokeLater.call(this,fn,receiver,arg)}else{this._schedule(function(){setTimeout(function(){fn.call(receiver,arg)},100)})}};Async.prototype.invoke=function(fn,receiver,arg){if(this._trampolineEnabled){AsyncInvoke.call(this,fn,receiver,arg)}else{this._schedule(function(){fn.call(receiver,arg)})}};Async.prototype.settlePromises=function(promise){if(this._trampolineEnabled){AsyncSettlePromises.call(this,promise)}else{this._schedule(function(){promise._settlePromises()})}}}Async.prototype._drainQueue=function(queue){while(queue.length()>0){var fn=queue.shift();if(typeof fn!=="function"){fn._settlePromises();continue}var receiver=queue.shift();var arg=queue.shift();fn.call(receiver,arg)}};Async.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._haveDrainedQueues=true;this._drainQueue(this._lateQueue)};Async.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues)}};Async.prototype._reset=function(){this._isTickUsed=false};module.exports=Async;module.exports.firstLineError=firstLineError},{"./queue":228,"./schedule":231,"./util":238}],205:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,debug){var calledBind=false;var rejectThis=function(_,e){this._reject(e)};var targetRejected=function(e,context){context.promiseRejectionQueued=true;context.bindingPromise._then(rejectThis,rejectThis,null,this,e)};var bindingResolved=function(thisArg,context){if((this._bitField&50397184)===0){this._resolveCallback(context.target)}};var bindingRejected=function(e,context){if(!context.promiseRejectionQueued)this._reject(e)};Promise.prototype.bind=function(thisArg){if(!calledBind){calledBind=true;Promise.prototype._propagateFrom=debug.propagateFromFunction();Promise.prototype._boundValue=debug.boundValueFunction()}var maybePromise=tryConvertToPromise(thisArg);var ret=new Promise(INTERNAL);ret._propagateFrom(this,1);var target=this._target();ret._setBoundTo(maybePromise);if(maybePromise instanceof Promise){var context={promiseRejectionQueued:false,promise:ret,target:target,bindingPromise:maybePromise};target._then(INTERNAL,targetRejected,undefined,ret,context);maybePromise._then(bindingResolved,bindingRejected,undefined,ret,context);ret._setOnCancel(maybePromise)}else{ret._resolveCallback(target)}return ret};Promise.prototype._setBoundTo=function(obj){if(obj!==undefined){this._bitField=this._bitField|2097152;this._boundTo=obj}else{this._bitField=this._bitField&~2097152}};Promise.prototype._isBound=function(){return(this._bitField&2097152)===2097152};Promise.bind=function(thisArg,value){return Promise.resolve(value).bind(thisArg)}}},{}],206:[function(require,module,exports){"use strict";var old;if(typeof Promise!=="undefined")old=Promise;function noConflict(){try{if(Promise===bluebird)Promise=old}catch(e){}return bluebird}var bluebird=require("./promise")();bluebird.noConflict=noConflict;module.exports=bluebird},{"./promise":224}],207:[function(require,module,exports){"use strict";var cr=Object.create;if(cr){var callerCache=cr(null);var getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0}module.exports=function(Promise){var util=require("./util");var canEvaluate=util.canEvaluate;var isIdentifier=util.isIdentifier;var getMethodCaller;var getGetter;if(!false){var makeMethodCaller=function(methodName){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,methodName))(ensureMethod)};var makeGetter=function(propertyName){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",propertyName))};var getCompiled=function(name,compiler,cache){var ret=cache[name];if(typeof ret!=="function"){if(!isIdentifier(name)){return null}ret=compiler(name);cache[name]=ret;cache[" size"]++;if(cache[" size"]>512){var keys=Object.keys(cache);for(var i=0;i<256;++i)delete cache[keys[i]];cache[" size"]=keys.length-256}}return ret};getMethodCaller=function(name){return getCompiled(name,makeMethodCaller,callerCache)};getGetter=function(name){return getCompiled(name,makeGetter,getterCache)}}function ensureMethod(obj,methodName){var fn;if(obj!=null)fn=obj[methodName];if(typeof fn!=="function"){var message="Object "+util.classString(obj)+" has no method '"+util.toString(methodName)+"'";throw new Promise.TypeError(message)}return fn}function caller(obj){var methodName=this.pop();var fn=ensureMethod(obj,methodName);return fn.apply(obj,this)}Promise.prototype.call=function(methodName){var $_len=arguments.length;var args=new Array(Math.max($_len-1,0));for(var $_i=1;$_i<$_len;++$_i){args[$_i-1]=arguments[$_i]}if(!false){if(canEvaluate){var maybeCaller=getMethodCaller(methodName);if(maybeCaller!==null){return this._then(maybeCaller,undefined,undefined,args,undefined)}}}args.push(methodName);return this._then(caller,undefined,undefined,args,undefined)};function namedGetter(obj){return obj[this]}function indexedGetter(obj){var index=+this;if(index<0)index=Math.max(0,index+obj.length);return obj[index]}Promise.prototype.get=function(propertyName){var isIndex=typeof propertyName==="number";var getter;if(!isIndex){if(canEvaluate){var maybeGetter=getGetter(propertyName);getter=maybeGetter!==null?maybeGetter:namedGetter}else{getter=namedGetter}}else{getter=indexedGetter}return this._then(getter,undefined,undefined,propertyName,undefined)}}},{"./util":238}],208:[function(require,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,debug){var util=require("./util");var tryCatch=util.tryCatch;var errorObj=util.errorObj;var async=Promise._async;Promise.prototype["break"]=Promise.prototype.cancel=function(){if(!debug.cancellation())return this._warn("cancellation is disabled");var promise=this;var child=promise;while(promise._isCancellable()){if(!promise._cancelBy(child)){if(child._isFollowing()){child._followee().cancel()}else{child._cancelBranched()}break}var parent=promise._cancellationParent;if(parent==null||!parent._isCancellable()){if(promise._isFollowing()){promise._followee().cancel()}else{promise._cancelBranched()}break}else{if(promise._isFollowing())promise._followee().cancel();promise._setWillBeCancelled();child=promise;promise=parent}}};Promise.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--};Promise.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===undefined||this._branchesRemainingToCancel<=0};Promise.prototype._cancelBy=function(canceller){if(canceller===this){this._branchesRemainingToCancel=0;this._invokeOnCancel();return true}else{this._branchHasCancelled();if(this._enoughBranchesHaveCancelled()){this._invokeOnCancel();return true}}return false};Promise.prototype._cancelBranched=function(){if(this._enoughBranchesHaveCancelled()){this._cancel()}};Promise.prototype._cancel=function(){if(!this._isCancellable())return;this._setCancelled();async.invoke(this._cancelPromises,this,undefined)};Promise.prototype._cancelPromises=function(){if(this._length()>0)this._settlePromises()};Promise.prototype._unsetOnCancel=function(){this._onCancelField=undefined};Promise.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()};Promise.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};Promise.prototype._doInvokeOnCancel=function(onCancelCallback,internalOnly){if(util.isArray(onCancelCallback)){for(var i=0;i<onCancelCallback.length;++i){this._doInvokeOnCancel(onCancelCallback[i],internalOnly)}}else if(onCancelCallback!==undefined){if(typeof onCancelCallback==="function"){if(!internalOnly){var e=tryCatch(onCancelCallback).call(this._boundValue());if(e===errorObj){this._attachExtraTrace(e.e);async.throwLater(e.e)}}}else{onCancelCallback._resultCancelled(this)}}};Promise.prototype._invokeOnCancel=function(){var onCancelCallback=this._onCancel();this._unsetOnCancel();async.invoke(this._doInvokeOnCancel,this,onCancelCallback)};Promise.prototype._invokeInternalOnCancel=function(){if(this._isCancellable()){this._doInvokeOnCancel(this._onCancel(),true);this._unsetOnCancel()}};Promise.prototype._resultCancelled=function(){this.cancel()}}},{"./util":238}],209:[function(require,module,exports){"use strict";module.exports=function(NEXT_FILTER){var util=require("./util");var getKeys=require("./es5").keys;var tryCatch=util.tryCatch;var errorObj=util.errorObj;function catchFilter(instances,cb,promise){return function(e){var boundTo=promise._boundValue();predicateLoop:for(var i=0;i<instances.length;++i){var item=instances[i];if(item===Error||item!=null&&item.prototype instanceof Error){if(e instanceof item){return tryCatch(cb).call(boundTo,e)}}else if(typeof item==="function"){var matchesPredicate=tryCatch(item).call(boundTo,e);if(matchesPredicate===errorObj){return matchesPredicate}else if(matchesPredicate){return tryCatch(cb).call(boundTo,e)}}else if(util.isObject(e)){var keys=getKeys(item);for(var j=0;j<keys.length;++j){var key=keys[j];if(item[key]!=e[key]){continue predicateLoop}}return tryCatch(cb).call(boundTo,e)}}return NEXT_FILTER}}return catchFilter}},{"./es5":215,"./util":238}],210:[function(require,module,exports){"use strict";module.exports=function(Promise){var longStackTraces=false;var contextStack=[];Promise.prototype._promiseCreated=function(){};Promise.prototype._pushContext=function(){};Promise.prototype._popContext=function(){return null};Promise._peekContext=Promise.prototype._peekContext=function(){};function Context(){this._trace=new Context.CapturedTrace(peekContext())}Context.prototype._pushContext=function(){if(this._trace!==undefined){this._trace._promiseCreated=null;contextStack.push(this._trace)}};Context.prototype._popContext=function(){if(this._trace!==undefined){var trace=contextStack.pop();var ret=trace._promiseCreated;trace._promiseCreated=null;return ret}return null};function createContext(){if(longStackTraces)return new Context}function peekContext(){var lastIndex=contextStack.length-1;if(lastIndex>=0){return contextStack[lastIndex]}return undefined}Context.CapturedTrace=null;Context.create=createContext;Context.deactivateLongStackTraces=function(){};Context.activateLongStackTraces=function(){var Promise_pushContext=Promise.prototype._pushContext;var Promise_popContext=Promise.prototype._popContext;var Promise_PeekContext=Promise._peekContext;var Promise_peekContext=Promise.prototype._peekContext;var Promise_promiseCreated=Promise.prototype._promiseCreated;Context.deactivateLongStackTraces=function(){Promise.prototype._pushContext=Promise_pushContext;Promise.prototype._popContext=Promise_popContext;Promise._peekContext=Promise_PeekContext;Promise.prototype._peekContext=Promise_peekContext;Promise.prototype._promiseCreated=Promise_promiseCreated;longStackTraces=false};longStackTraces=true;Promise.prototype._pushContext=Context.prototype._pushContext;Promise.prototype._popContext=Context.prototype._popContext;Promise._peekContext=Promise.prototype._peekContext=peekContext;Promise.prototype._promiseCreated=function(){var ctx=this._peekContext();if(ctx&&ctx._promiseCreated==null)ctx._promiseCreated=this}};return Context}},{}],211:[function(require,module,exports){"use strict";module.exports=function(Promise,Context){var getDomain=Promise._getDomain;var async=Promise._async;var Warning=require("./errors").Warning;var util=require("./util");var canAttachTrace=util.canAttachTrace;var unhandledRejectionHandled;var possiblyUnhandledRejection;var bluebirdFramePattern=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/;var nodeFramePattern=/\((?:timers\.js):\d+:\d+\)/;var parseLinePattern=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/;var stackFramePattern=null;var formatStack=null;var indentStackFrames=false;var printWarning;var debugging=!!(util.env("BLUEBIRD_DEBUG")!=0&&(false||util.env("BLUEBIRD_DEBUG")||util.env("NODE_ENV")==="development"));var warnings=!!(util.env("BLUEBIRD_WARNINGS")!=0&&(debugging||util.env("BLUEBIRD_WARNINGS")));var longStackTraces=!!(util.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(debugging||util.env("BLUEBIRD_LONG_STACK_TRACES")));var wForgottenReturn=util.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(warnings||!!util.env("BLUEBIRD_W_FORGOTTEN_RETURN"));Promise.prototype.suppressUnhandledRejections=function(){var target=this._target();target._bitField=target._bitField&~1048576|524288};Promise.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&524288)!==0)return;this._setRejectionIsUnhandled();var self=this;setTimeout(function(){self._notifyUnhandledRejection()},1)};Promise.prototype._notifyUnhandledRejectionIsHandled=function(){fireRejectionEvent("rejectionHandled",unhandledRejectionHandled,undefined,this)};Promise.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456};Promise.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0};Promise.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var reason=this._settledValue();this._setUnhandledRejectionIsNotified();fireRejectionEvent("unhandledRejection",possiblyUnhandledRejection,reason,this)}};Promise.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144};Promise.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&~262144};Promise.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0};Promise.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576};Promise.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&~1048576;if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled()}};Promise.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0};Promise.prototype._warn=function(message,shouldUseOwnTrace,promise){return warn(message,shouldUseOwnTrace,promise||this)};Promise.onPossiblyUnhandledRejection=function(fn){var domain=getDomain();possiblyUnhandledRejection=typeof fn==="function"?domain===null?fn:util.domainBind(domain,fn):undefined};Promise.onUnhandledRejectionHandled=function(fn){var domain=getDomain();unhandledRejectionHandled=typeof fn==="function"?domain===null?fn:util.domainBind(domain,fn):undefined};var disableLongStackTraces=function(){};Promise.longStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!config.longStackTraces&&longStackTracesIsSupported()){var Promise_captureStackTrace=Promise.prototype._captureStackTrace;var Promise_attachExtraTrace=Promise.prototype._attachExtraTrace;config.longStackTraces=true;disableLongStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}Promise.prototype._captureStackTrace=Promise_captureStackTrace;Promise.prototype._attachExtraTrace=Promise_attachExtraTrace;Context.deactivateLongStackTraces();async.enableTrampoline();config.longStackTraces=false};Promise.prototype._captureStackTrace=longStackTracesCaptureStackTrace;Promise.prototype._attachExtraTrace=longStackTracesAttachExtraTrace;Context.activateLongStackTraces();async.disableTrampolineIfNecessary()}};Promise.hasLongStackTraces=function(){return config.longStackTraces&&longStackTracesIsSupported()};var fireDomEvent=function(){try{if(typeof CustomEvent==="function"){var event=new CustomEvent("CustomEvent");util.global.dispatchEvent(event);return function(name,event){var domEvent=new CustomEvent(name.toLowerCase(),{detail:event,cancelable:true});return!util.global.dispatchEvent(domEvent)}}else if(typeof Event==="function"){var event=new Event("CustomEvent");util.global.dispatchEvent(event);return function(name,event){var domEvent=new Event(name.toLowerCase(),{cancelable:true});domEvent.detail=event;return!util.global.dispatchEvent(domEvent)}}else{var event=document.createEvent("CustomEvent");event.initCustomEvent("testingtheevent",false,true,{});util.global.dispatchEvent(event);return function(name,event){var domEvent=document.createEvent("CustomEvent");domEvent.initCustomEvent(name.toLowerCase(),false,true,event);return!util.global.dispatchEvent(domEvent)}}}catch(e){}return function(){return false}}();var fireGlobalEvent=function(){if(util.isNode){return function(){return process.emit.apply(process,arguments)}}else{if(!util.global){return function(){return false}}return function(name){var methodName="on"+name.toLowerCase();var method=util.global[methodName];if(!method)return false;method.apply(util.global,[].slice.call(arguments,1));return true}}}();function generatePromiseLifecycleEventObject(name,promise){return{promise:promise}}var eventToObjectGenerator={promiseCreated:generatePromiseLifecycleEventObject,promiseFulfilled:generatePromiseLifecycleEventObject,promiseRejected:generatePromiseLifecycleEventObject,promiseResolved:generatePromiseLifecycleEventObject,promiseCancelled:generatePromiseLifecycleEventObject,promiseChained:function(name,promise,child){return{promise:promise,child:child}},warning:function(name,warning){return{warning:warning}},unhandledRejection:function(name,reason,promise){return{reason:reason,promise:promise}},rejectionHandled:generatePromiseLifecycleEventObject};var activeFireEvent=function(name){var globalEventFired=false;try{globalEventFired=fireGlobalEvent.apply(null,arguments)}catch(e){async.throwLater(e);globalEventFired=true}var domEventFired=false;try{domEventFired=fireDomEvent(name,eventToObjectGenerator[name].apply(null,arguments))}catch(e){async.throwLater(e);domEventFired=true}return domEventFired||globalEventFired};Promise.config=function(opts){opts=Object(opts);if("longStackTraces"in opts){if(opts.longStackTraces){Promise.longStackTraces()}else if(!opts.longStackTraces&&Promise.hasLongStackTraces()){disableLongStackTraces()}}if("warnings"in opts){var warningsOption=opts.warnings;config.warnings=!!warningsOption;wForgottenReturn=config.warnings;if(util.isObject(warningsOption)){if("wForgottenReturn"in warningsOption){wForgottenReturn=!!warningsOption.wForgottenReturn}}}if("cancellation"in opts&&opts.cancellation&&!config.cancellation){if(async.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}Promise.prototype._clearCancellationData=cancellationClearCancellationData;Promise.prototype._propagateFrom=cancellationPropagateFrom;Promise.prototype._onCancel=cancellationOnCancel;Promise.prototype._setOnCancel=cancellationSetOnCancel;Promise.prototype._attachCancellationCallback=cancellationAttachCancellationCallback;Promise.prototype._execute=cancellationExecute;propagateFromFunction=cancellationPropagateFrom;config.cancellation=true}if("monitoring"in opts){if(opts.monitoring&&!config.monitoring){config.monitoring=true;Promise.prototype._fireEvent=activeFireEvent}else if(!opts.monitoring&&config.monitoring){config.monitoring=false;Promise.prototype._fireEvent=defaultFireEvent}}return Promise};function defaultFireEvent(){return false}Promise.prototype._fireEvent=defaultFireEvent;Promise.prototype._execute=function(executor,resolve,reject){try{executor(resolve,reject)}catch(e){return e}};Promise.prototype._onCancel=function(){};Promise.prototype._setOnCancel=function(handler){};Promise.prototype._attachCancellationCallback=function(onCancel){};Promise.prototype._captureStackTrace=function(){};Promise.prototype._attachExtraTrace=function(){};Promise.prototype._clearCancellationData=function(){};Promise.prototype._propagateFrom=function(parent,flags){};function cancellationExecute(executor,resolve,reject){var promise=this;try{executor(resolve,reject,function(onCancel){if(typeof onCancel!=="function"){throw new TypeError("onCancel must be a function, got: "+util.toString(onCancel))}promise._attachCancellationCallback(onCancel)})}catch(e){return e}}function cancellationAttachCancellationCallback(onCancel){if(!this._isCancellable())return this;var previousOnCancel=this._onCancel();if(previousOnCancel!==undefined){if(util.isArray(previousOnCancel)){previousOnCancel.push(onCancel)}else{this._setOnCancel([previousOnCancel,onCancel])}}else{this._setOnCancel(onCancel)}}function cancellationOnCancel(){return this._onCancelField}function cancellationSetOnCancel(onCancel){this._onCancelField=onCancel}function cancellationClearCancellationData(){this._cancellationParent=undefined;this._onCancelField=undefined}function cancellationPropagateFrom(parent,flags){if((flags&1)!==0){this._cancellationParent=parent;var branchesRemainingToCancel=parent._branchesRemainingToCancel;if(branchesRemainingToCancel===undefined){branchesRemainingToCancel=0}parent._branchesRemainingToCancel=branchesRemainingToCancel+1}if((flags&2)!==0&&parent._isBound()){this._setBoundTo(parent._boundTo)}}function bindingPropagateFrom(parent,flags){if((flags&2)!==0&&parent._isBound()){this._setBoundTo(parent._boundTo)}}var propagateFromFunction=bindingPropagateFrom;function boundValueFunction(){var ret=this._boundTo;if(ret!==undefined){if(ret instanceof Promise){if(ret.isFulfilled()){return ret.value()}else{return undefined}}}return ret}function longStackTracesCaptureStackTrace(){this._trace=new CapturedTrace(this._peekContext())}function longStackTracesAttachExtraTrace(error,ignoreSelf){if(canAttachTrace(error)){var trace=this._trace;if(trace!==undefined){if(ignoreSelf)trace=trace._parent}if(trace!==undefined){trace.attachExtraTrace(error)}else if(!error.__stackCleaned__){var parsed=parseStackAndMessage(error);util.notEnumerableProp(error,"stack",parsed.message+"\n"+parsed.stack.join("\n"));util.notEnumerableProp(error,"__stackCleaned__",true)}}}function checkForgottenReturns(returnValue,promiseCreated,name,promise,parent){if(returnValue===undefined&&promiseCreated!==null&&wForgottenReturn){if(parent!==undefined&&parent._returnedNonUndefined())return;if((promise._bitField&65535)===0)return;if(name)name=name+" ";var handlerLine="";var creatorLine="";if(promiseCreated._trace){var traceLines=promiseCreated._trace.stack.split("\n");var stack=cleanStack(traceLines);for(var i=stack.length-1;i>=0;--i){var line=stack[i];if(!nodeFramePattern.test(line)){var lineMatches=line.match(parseLinePattern);if(lineMatches){handlerLine="at "+lineMatches[1]+":"+lineMatches[2]+":"+lineMatches[3]+" "}break}}if(stack.length>0){var firstUserLine=stack[0];for(var i=0;i<traceLines.length;++i){if(traceLines[i]===firstUserLine){if(i>0){creatorLine="\n"+traceLines[i-1]}break}}}}var msg="a promise was created in a "+name+"handler "+handlerLine+"but was not returned from it, "+"see http://goo.gl/rRqMUw"+creatorLine;promise._warn(msg,true,promiseCreated)}}function deprecated(name,replacement){var message=name+" is deprecated and will be removed in a future version.";if(replacement)message+=" Use "+replacement+" instead.";return warn(message)}function warn(message,shouldUseOwnTrace,promise){if(!config.warnings)return;var warning=new Warning(message);var ctx;if(shouldUseOwnTrace){promise._attachExtraTrace(warning)}else if(config.longStackTraces&&(ctx=Promise._peekContext())){ctx.attachExtraTrace(warning)}else{var parsed=parseStackAndMessage(warning);warning.stack=parsed.message+"\n"+parsed.stack.join("\n")}if(!activeFireEvent("warning",warning)){formatAndLogError(warning,"",true)}}function reconstructStack(message,stacks){for(var i=0;i<stacks.length-1;++i){stacks[i].push("From previous event:");stacks[i]=stacks[i].join("\n")}if(i<stacks.length){stacks[i]=stacks[i].join("\n")}return message+"\n"+stacks.join("\n")}function removeDuplicateOrEmptyJumps(stacks){for(var i=0;i<stacks.length;++i){if(stacks[i].length===0||i+1<stacks.length&&stacks[i][0]===stacks[i+1][0]){stacks.splice(i,1);i--}}}function removeCommonRoots(stacks){var current=stacks[0];for(var i=1;i<stacks.length;++i){var prev=stacks[i];var currentLastIndex=current.length-1;var currentLastLine=current[currentLastIndex];var commonRootMeetPoint=-1;for(var j=prev.length-1;j>=0;--j){if(prev[j]===currentLastLine){commonRootMeetPoint=j;break}}for(var j=commonRootMeetPoint;j>=0;--j){var line=prev[j];if(current[currentLastIndex]===line){current.pop();currentLastIndex--}else{break}}current=prev}}function cleanStack(stack){var ret=[];for(var i=0;i<stack.length;++i){var line=stack[i];var isTraceLine="    (No stack trace)"===line||stackFramePattern.test(line);var isInternalFrame=isTraceLine&&shouldIgnore(line);if(isTraceLine&&!isInternalFrame){if(indentStackFrames&&line.charAt(0)!==" "){line="    "+line}ret.push(line)}}return ret}function stackFramesAsArray(error){var stack=error.stack.replace(/\s+$/g,"").split("\n");for(var i=0;i<stack.length;++i){var line=stack[i];if("    (No stack trace)"===line||stackFramePattern.test(line)){break}}if(i>0&&error.name!="SyntaxError"){stack=stack.slice(i)}return stack}function parseStackAndMessage(error){var stack=error.stack;var message=error.toString();stack=typeof stack==="string"&&stack.length>0?stackFramesAsArray(error):["    (No stack trace)"];return{message:message,stack:error.name=="SyntaxError"?stack:cleanStack(stack)}}function formatAndLogError(error,title,isSoft){if(typeof console!=="undefined"){var message;if(util.isObject(error)){var stack=error.stack;message=title+formatStack(stack,error)}else{message=title+String(error)}if(typeof printWarning==="function"){printWarning(message,isSoft)}else if(typeof console.log==="function"||typeof console.log==="object"){console.log(message)}}}function fireRejectionEvent(name,localHandler,reason,promise){var localEventFired=false;try{if(typeof localHandler==="function"){localEventFired=true;if(name==="rejectionHandled"){localHandler(promise)}else{localHandler(reason,promise)}}}catch(e){async.throwLater(e)}if(name==="unhandledRejection"){if(!activeFireEvent(name,reason,promise)&&!localEventFired){formatAndLogError(reason,"Unhandled rejection ")}}else{activeFireEvent(name,promise)}}function formatNonError(obj){var str;if(typeof obj==="function"){str="[function "+(obj.name||"anonymous")+"]"}else{str=obj&&typeof obj.toString==="function"?obj.toString():util.toString(obj);var ruselessToString=/\[object [a-zA-Z0-9$_]+\]/;if(ruselessToString.test(str)){try{var newStr=JSON.stringify(obj);str=newStr}catch(e){}}if(str.length===0){str="(empty array)"}}return"(<"+snip(str)+">, no stack trace)"}function snip(str){var maxChars=41;if(str.length<maxChars){return str}return str.substr(0,maxChars-3)+"..."}function longStackTracesIsSupported(){return typeof captureStackTrace==="function"}var shouldIgnore=function(){return false};var parseLineInfoRegex=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function parseLineInfo(line){var matches=line.match(parseLineInfoRegex);if(matches){return{fileName:matches[1],line:parseInt(matches[2],10)}}}function setBounds(firstLineError,lastLineError){if(!longStackTracesIsSupported())return;var firstStackLines=firstLineError.stack.split("\n");var lastStackLines=lastLineError.stack.split("\n");var firstIndex=-1;var lastIndex=-1;var firstFileName;var lastFileName;for(var i=0;i<firstStackLines.length;++i){var result=parseLineInfo(firstStackLines[i]);if(result){firstFileName=result.fileName;firstIndex=result.line;break}}for(var i=0;i<lastStackLines.length;++i){var result=parseLineInfo(lastStackLines[i]);if(result){lastFileName=result.fileName;lastIndex=result.line;break}}if(firstIndex<0||lastIndex<0||!firstFileName||!lastFileName||firstFileName!==lastFileName||firstIndex>=lastIndex){return}shouldIgnore=function(line){if(bluebirdFramePattern.test(line))return true;var info=parseLineInfo(line);if(info){if(info.fileName===firstFileName&&(firstIndex<=info.line&&info.line<=lastIndex)){return true}}return false}}function CapturedTrace(parent){this._parent=parent;this._promisesCreated=0;var length=this._length=1+(parent===undefined?0:parent._length);captureStackTrace(this,CapturedTrace);if(length>32)this.uncycle()}util.inherits(CapturedTrace,Error);Context.CapturedTrace=CapturedTrace;CapturedTrace.prototype.uncycle=function(){var length=this._length;if(length<2)return;var nodes=[];var stackToIndex={};for(var i=0,node=this;node!==undefined;++i){nodes.push(node);node=node._parent}length=this._length=i;for(var i=length-1;i>=0;--i){var stack=nodes[i].stack;if(stackToIndex[stack]===undefined){stackToIndex[stack]=i}}for(var i=0;i<length;++i){var currentStack=nodes[i].stack;var index=stackToIndex[currentStack];if(index!==undefined&&index!==i){if(index>0){nodes[index-1]._parent=undefined;nodes[index-1]._length=1}nodes[i]._parent=undefined;nodes[i]._length=1;var cycleEdgeNode=i>0?nodes[i-1]:this;if(index<length-1){cycleEdgeNode._parent=nodes[index+1];cycleEdgeNode._parent.uncycle();cycleEdgeNode._length=cycleEdgeNode._parent._length+1}else{cycleEdgeNode._parent=undefined;cycleEdgeNode._length=1}var currentChildLength=cycleEdgeNode._length+1;for(var j=i-2;j>=0;--j){nodes[j]._length=currentChildLength;currentChildLength++}return}}};CapturedTrace.prototype.attachExtraTrace=function(error){if(error.__stackCleaned__)return;this.uncycle();var parsed=parseStackAndMessage(error);var message=parsed.message;var stacks=[parsed.stack];var trace=this;while(trace!==undefined){stacks.push(cleanStack(trace.stack.split("\n")));trace=trace._parent}removeCommonRoots(stacks);removeDuplicateOrEmptyJumps(stacks);util.notEnumerableProp(error,"stack",reconstructStack(message,stacks));util.notEnumerableProp(error,"__stackCleaned__",true)};var captureStackTrace=function stackDetection(){var v8stackFramePattern=/^\s*at\s*/;var v8stackFormatter=function(stack,error){if(typeof stack==="string")return stack;if(error.name!==undefined&&error.message!==undefined){return error.toString()}return formatNonError(error)};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit+=6;stackFramePattern=v8stackFramePattern;formatStack=v8stackFormatter;var captureStackTrace=Error.captureStackTrace;shouldIgnore=function(line){return bluebirdFramePattern.test(line)};return function(receiver,ignoreUntil){Error.stackTraceLimit+=6;captureStackTrace(receiver,ignoreUntil);Error.stackTraceLimit-=6}}var err=new Error;if(typeof err.stack==="string"&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0){stackFramePattern=/@/;formatStack=v8stackFormatter;indentStackFrames=true;return function captureStackTrace(o){o.stack=(new Error).stack}}var hasStackAfterThrow;try{throw new Error}catch(e){hasStackAfterThrow="stack"in e}if(!("stack"in err)&&hasStackAfterThrow&&typeof Error.stackTraceLimit==="number"){stackFramePattern=v8stackFramePattern;formatStack=v8stackFormatter;return function captureStackTrace(o){Error.stackTraceLimit+=6;try{throw new Error}catch(e){o.stack=e.stack}Error.stackTraceLimit-=6}}formatStack=function(stack,error){if(typeof stack==="string")return stack;if((typeof error==="object"||typeof error==="function")&&error.name!==undefined&&error.message!==undefined){return error.toString()}return formatNonError(error)};return null}([]);if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){printWarning=function(message){console.warn(message)};if(util.isNode&&process.stderr.isTTY){printWarning=function(message,isSoft){var color=isSoft?"[33m":"[31m";console.warn(color+message+"[0m\n")}}else if(!util.isNode&&typeof(new Error).stack==="string"){printWarning=function(message,isSoft){console.warn("%c"+message,isSoft?"color: darkorange":"color: red")}}}var config={warnings:warnings,longStackTraces:false,cancellation:false,monitoring:false};if(longStackTraces)Promise.longStackTraces();return{longStackTraces:function(){return config.longStackTraces},warnings:function(){return config.warnings},cancellation:function(){return config.cancellation},monitoring:function(){return config.monitoring},propagateFromFunction:function(){return propagateFromFunction},boundValueFunction:function(){return boundValueFunction},checkForgottenReturns:checkForgottenReturns,setBounds:setBounds,warn:warn,deprecated:deprecated,CapturedTrace:CapturedTrace,fireDomEvent:fireDomEvent,fireGlobalEvent:fireGlobalEvent}}},{"./errors":214,"./util":238}],212:[function(require,module,exports){"use strict";module.exports=function(Promise){function returner(){return this.value}function thrower(){throw this.reason}Promise.prototype["return"]=Promise.prototype.thenReturn=function(value){if(value instanceof Promise)value.suppressUnhandledRejections();return this._then(returner,undefined,undefined,{value:value},undefined)};Promise.prototype["throw"]=Promise.prototype.thenThrow=function(reason){return this._then(thrower,undefined,undefined,{reason:reason},undefined)};Promise.prototype.catchThrow=function(reason){if(arguments.length<=1){return this._then(undefined,thrower,undefined,{reason:reason},undefined)}else{var _reason=arguments[1];var handler=function(){throw _reason};return this.caught(reason,handler)}};Promise.prototype.catchReturn=function(value){if(arguments.length<=1){if(value instanceof Promise)value.suppressUnhandledRejections();return this._then(undefined,returner,undefined,{value:value},undefined)}else{var _value=arguments[1];if(_value instanceof Promise)_value.suppressUnhandledRejections();var handler=function(){return _value};return this.caught(value,handler)}}}},{}],213:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var PromiseReduce=Promise.reduce;var PromiseAll=Promise.all;function promiseAllThis(){return PromiseAll(this)}function PromiseMapSeries(promises,fn){return PromiseReduce(promises,fn,INTERNAL,INTERNAL)}Promise.prototype.each=function(fn){return PromiseReduce(this,fn,INTERNAL,0)._then(promiseAllThis,undefined,undefined,this,undefined)};Promise.prototype.mapSeries=function(fn){return PromiseReduce(this,fn,INTERNAL,INTERNAL)};Promise.each=function(promises,fn){return PromiseReduce(promises,fn,INTERNAL,0)._then(promiseAllThis,undefined,undefined,promises,undefined)};Promise.mapSeries=PromiseMapSeries}},{}],214:[function(require,module,exports){"use strict";var es5=require("./es5");var Objectfreeze=es5.freeze;var util=require("./util");var inherits=util.inherits;var notEnumerableProp=util.notEnumerableProp;function subError(nameProperty,defaultMessage){function SubError(message){if(!(this instanceof SubError))return new SubError(message);notEnumerableProp(this,"message",typeof message==="string"?message:defaultMessage);notEnumerableProp(this,"name",nameProperty);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else{Error.call(this)}}inherits(SubError,Error);return SubError}var _TypeError,_RangeError;var Warning=subError("Warning","warning");var CancellationError=subError("CancellationError","cancellation error");var TimeoutError=subError("TimeoutError","timeout error");var AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError;_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error");_RangeError=subError("RangeError","range error")}var methods=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var i=0;i<methods.length;++i){if(typeof Array.prototype[methods[i]]==="function"){AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]}}es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});AggregateError.prototype["isOperational"]=true;var level=0;AggregateError.prototype.toString=function(){var indent=Array(level*4+1).join(" ");var ret="\n"+indent+"AggregateError of:"+"\n";level++;indent=Array(level*4+1).join(" ");for(var i=0;i<this.length;++i){var str=this[i]===this?"[Circular AggregateError]":this[i]+"";var lines=str.split("\n");for(var j=0;j<lines.length;++j){lines[j]=indent+lines[j]}str=lines.join("\n");ret+=str+"\n"}level--;return ret};function OperationalError(message){if(!(this instanceof OperationalError))return new OperationalError(message);notEnumerableProp(this,"name","OperationalError");notEnumerableProp(this,"message",message);this.cause=message;this["isOperational"]=true;if(message instanceof Error){notEnumerableProp(this,"message",message.message);notEnumerableProp(this,"stack",message.stack)}else if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}}inherits(OperationalError,Error);var errorTypes=Error["__BluebirdErrorTypes__"];if(!errorTypes){errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError});es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:false,enumerable:false,configurable:false})}module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning}},{"./es5":215,"./util":238}],215:[function(require,module,exports){var isES5=function(){"use strict";return this===undefined}();if(isES5){module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5,propertyIsWritable:function(obj,prop){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);return!!(!descriptor||descriptor.writable||descriptor.set)}}}else{var has={}.hasOwnProperty;var str={}.toString;var proto={}.constructor.prototype;var ObjectKeys=function(o){var ret=[];for(var key in o){if(has.call(o,key)){ret.push(key)}}return ret};var ObjectGetDescriptor=function(o,key){return{value:o[key]}};var ObjectDefineProperty=function(o,key,desc){o[key]=desc.value;return o};var ObjectFreeze=function(obj){return obj};var ObjectGetPrototypeOf=function(obj){try{return Object(obj).constructor.prototype}catch(e){return proto}};var ArrayIsArray=function(obj){try{return str.call(obj)==="[object Array]"}catch(e){return false}};module.exports={isArray:ArrayIsArray,keys:ObjectKeys,names:ObjectKeys,defineProperty:ObjectDefineProperty,getDescriptor:ObjectGetDescriptor,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:isES5,propertyIsWritable:function(){return true}}}},{}],216:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var PromiseMap=Promise.map;Promise.prototype.filter=function(fn,options){return PromiseMap(this,fn,options,INTERNAL)};Promise.filter=function(promises,fn,options){return PromiseMap(promises,fn,options,INTERNAL)}}},{}],217:[function(require,module,exports){"use strict";module.exports=function(Promise,tryConvertToPromise,NEXT_FILTER){var util=require("./util");var CancellationError=Promise.CancellationError;var errorObj=util.errorObj;var catchFilter=require("./catch_filter")(NEXT_FILTER);function PassThroughHandlerContext(promise,type,handler){this.promise=promise;this.type=type;this.handler=handler;this.called=false;this.cancelPromise=null}PassThroughHandlerContext.prototype.isFinallyHandler=function(){return this.type===0};function FinallyHandlerCancelReaction(finallyHandler){this.finallyHandler=finallyHandler}FinallyHandlerCancelReaction.prototype._resultCancelled=function(){checkCancel(this.finallyHandler)};function checkCancel(ctx,reason){if(ctx.cancelPromise!=null){if(arguments.length>1){ctx.cancelPromise._reject(reason)}else{ctx.cancelPromise._cancel()}ctx.cancelPromise=null;return true}return false}function succeed(){return finallyHandler.call(this,this.promise._target()._settledValue())}function fail(reason){if(checkCancel(this,reason))return;errorObj.e=reason;return errorObj}function finallyHandler(reasonOrValue){var promise=this.promise;var handler=this.handler;if(!this.called){this.called=true;var ret=this.isFinallyHandler()?handler.call(promise._boundValue()):handler.call(promise._boundValue(),reasonOrValue);if(ret===NEXT_FILTER){return ret}else if(ret!==undefined){promise._setReturnedNonUndefined();var maybePromise=tryConvertToPromise(ret,promise);if(maybePromise instanceof Promise){if(this.cancelPromise!=null){if(maybePromise._isCancelled()){var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason);errorObj.e=reason;return errorObj}else if(maybePromise.isPending()){maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this))}}return maybePromise._then(succeed,fail,undefined,this,undefined)}}}if(promise.isRejected()){checkCancel(this);errorObj.e=reasonOrValue;return errorObj}else{checkCancel(this);return reasonOrValue}}Promise.prototype._passThrough=function(handler,type,success,fail){if(typeof handler!=="function")return this.then();return this._then(success,fail,undefined,new PassThroughHandlerContext(this,type,handler),undefined)};Promise.prototype.lastly=Promise.prototype["finally"]=function(handler){return this._passThrough(handler,0,finallyHandler,finallyHandler)};Promise.prototype.tap=function(handler){return this._passThrough(handler,1,finallyHandler)};Promise.prototype.tapCatch=function(handlerOrPredicate){var len=arguments.length;if(len===1){return this._passThrough(handlerOrPredicate,1,undefined,finallyHandler)}else{var catchInstances=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(util.isObject(item)){catchInstances[j++]=item}else{return Promise.reject(new TypeError("tapCatch statement predicate: "+"expecting an object but got "+util.classString(item)))}}catchInstances.length=j;var handler=arguments[i];return this._passThrough(catchFilter(catchInstances,handler,this),1,undefined,finallyHandler)}};return PassThroughHandlerContext}},{"./catch_filter":209,"./util":238}],218:[function(require,module,exports){"use strict";module.exports=function(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug){var errors=require("./errors");var TypeError=errors.TypeError;var util=require("./util");var errorObj=util.errorObj;var tryCatch=util.tryCatch;var yieldHandlers=[];function promiseFromYieldHandler(value,yieldHandlers,traceParent){for(var i=0;i<yieldHandlers.length;++i){traceParent._pushContext();var result=tryCatch(yieldHandlers[i])(value);traceParent._popContext();if(result===errorObj){traceParent._pushContext();var ret=Promise.reject(errorObj.e);traceParent._popContext();return ret}var maybePromise=tryConvertToPromise(result,traceParent);if(maybePromise instanceof Promise)return maybePromise}return null}function PromiseSpawn(generatorFunction,receiver,yieldHandler,stack){if(debug.cancellation()){var internal=new Promise(INTERNAL);var _finallyPromise=this._finallyPromise=new Promise(INTERNAL);this._promise=internal.lastly(function(){return _finallyPromise});internal._captureStackTrace();internal._setOnCancel(this)}else{var promise=this._promise=new Promise(INTERNAL);promise._captureStackTrace()}this._stack=stack;this._generatorFunction=generatorFunction;this._receiver=receiver;this._generator=undefined;this._yieldHandlers=typeof yieldHandler==="function"?[yieldHandler].concat(yieldHandlers):yieldHandlers;this._yieldedPromise=null;this._cancellationPhase=false}util.inherits(PromiseSpawn,Proxyable);PromiseSpawn.prototype._isResolved=function(){return this._promise===null};PromiseSpawn.prototype._cleanup=function(){this._promise=this._generator=null;if(debug.cancellation()&&this._finallyPromise!==null){this._finallyPromise._fulfill();this._finallyPromise=null}};PromiseSpawn.prototype._promiseCancelled=function(){if(this._isResolved())return;var implementsReturn=typeof this._generator["return"]!=="undefined";var result;if(!implementsReturn){var reason=new Promise.CancellationError("generator .return() sentinel");Promise.coroutine.returnSentinel=reason;this._promise._attachExtraTrace(reason);this._promise._pushContext();result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext()}else{this._promise._pushContext();result=tryCatch(this._generator["return"]).call(this._generator,undefined);this._promise._popContext()}this._cancellationPhase=true;this._yieldedPromise=null;this._continue(result)};PromiseSpawn.prototype._promiseFulfilled=function(value){this._yieldedPromise=null;this._promise._pushContext();var result=tryCatch(this._generator.next).call(this._generator,value);this._promise._popContext();this._continue(result)};PromiseSpawn.prototype._promiseRejected=function(reason){this._yieldedPromise=null;this._promise._attachExtraTrace(reason);this._promise._pushContext();var result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext();this._continue(result)};PromiseSpawn.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof Promise){var promise=this._yieldedPromise;this._yieldedPromise=null;promise.cancel()}};PromiseSpawn.prototype.promise=function(){return this._promise};PromiseSpawn.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._promiseFulfilled(undefined)};PromiseSpawn.prototype._continue=function(result){var promise=this._promise;if(result===errorObj){this._cleanup();if(this._cancellationPhase){return promise.cancel()}else{return promise._rejectCallback(result.e,false)}}var value=result.value;if(result.done===true){this._cleanup();if(this._cancellationPhase){return promise.cancel()}else{return promise._resolveCallback(value)}}else{var maybePromise=tryConvertToPromise(value,this._promise);if(!(maybePromise instanceof Promise)){maybePromise=promiseFromYieldHandler(maybePromise,this._yieldHandlers,this._promise);if(maybePromise===null){this._promiseRejected(new TypeError("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(value))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return}}maybePromise=maybePromise._target();var bitField=maybePromise._bitField;if((bitField&50397184)===0){this._yieldedPromise=maybePromise;maybePromise._proxy(this,null)}else if((bitField&33554432)!==0){Promise._async.invoke(this._promiseFulfilled,this,maybePromise._value())}else if((bitField&16777216)!==0){Promise._async.invoke(this._promiseRejected,this,maybePromise._reason())}else{this._promiseCancelled()}}};Promise.coroutine=function(generatorFunction,options){if(typeof generatorFunction!=="function"){throw new TypeError("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var yieldHandler=Object(options).yieldHandler;var PromiseSpawn$=PromiseSpawn;var stack=(new Error).stack;return function(){var generator=generatorFunction.apply(this,arguments);var spawn=new PromiseSpawn$(undefined,undefined,yieldHandler,stack);var ret=spawn.promise();spawn._generator=generator;spawn._promiseFulfilled(undefined);return ret}};Promise.coroutine.addYieldHandler=function(fn){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn))}yieldHandlers.push(fn)};Promise.spawn=function(generatorFunction){debug.deprecated("Promise.spawn()","Promise.coroutine()");if(typeof generatorFunction!=="function"){return apiRejection("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n")}var spawn=new PromiseSpawn(generatorFunction,this);var ret=spawn.promise();spawn._run(Promise.spawn);return ret}}},{"./errors":214,"./util":238}],219:[function(require,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain){var util=require("./util");var canEvaluate=util.canEvaluate;var tryCatch=util.tryCatch;var errorObj=util.errorObj;var reject;if(!false){if(canEvaluate){var thenCallback=function(i){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,i))};var promiseSetter=function(i){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,i))};var generateHolderClass=function(total){var props=new Array(total);for(var i=0;i<props.length;++i){props[i]="this.p"+(i+1)}var assignment=props.join(" = ")+" = null;";var cancellationCode="var promise;\n"+props.map(function(prop){return"                                                         \n                promise = "+prop+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "}).join("\n");var passedArguments=props.join(", ");var name="Holder$"+total;var code="return function(tryCatch, errorObj, Promise, async) {    \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.asyncNeeded = true;                                     \n                this.now = 0;                                                \n            }                                                                \n                                                                             \n            [TheName].prototype._callFunction = function(promise) {          \n                promise._pushContext();                                      \n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n                promise._popContext();                                       \n                if (ret === errorObj) {                                      \n                    promise._rejectCallback(ret.e, false);                   \n                } else {                                                     \n                    promise._resolveCallback(ret);                           \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    if (this.asyncNeeded) {                                  \n                        async.invoke(this._callFunction, this, promise);     \n                    } else {                                                 \n                        this._callFunction(promise);                         \n                    }                                                        \n                                                                             \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise, async);                               \n        ";code=code.replace(/\[TheName\]/g,name).replace(/\[TheTotal\]/g,total).replace(/\[ThePassedArguments\]/g,passedArguments).replace(/\[TheProperties\]/g,assignment).replace(/\[CancellationCode\]/g,cancellationCode);return new Function("tryCatch","errorObj","Promise","async",code)(tryCatch,errorObj,Promise,async)};var holderClasses=[];var thenCallbacks=[];var promiseSetters=[];for(var i=0;i<8;++i){holderClasses.push(generateHolderClass(i+1));thenCallbacks.push(thenCallback(i+1));promiseSetters.push(promiseSetter(i+1))}reject=function(reason){this._reject(reason)}}}Promise.join=function(){var last=arguments.length-1;var fn;if(last>0&&typeof arguments[last]==="function"){fn=arguments[last];if(!false){if(last<=8&&canEvaluate){var ret=new Promise(INTERNAL);ret._captureStackTrace();var HolderClass=holderClasses[last-1];var holder=new HolderClass(fn);var callbacks=thenCallbacks;for(var i=0;i<last;++i){var maybePromise=tryConvertToPromise(arguments[i],ret);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();var bitField=maybePromise._bitField;if((bitField&50397184)===0){maybePromise._then(callbacks[i],reject,undefined,ret,holder);promiseSetters[i](maybePromise,holder);holder.asyncNeeded=false}else if((bitField&33554432)!==0){callbacks[i].call(ret,maybePromise._value(),holder)}else if((bitField&16777216)!==0){ret._reject(maybePromise._reason())}else{ret._cancel()}}else{callbacks[i].call(ret,maybePromise,holder)}}if(!ret._isFateSealed()){if(holder.asyncNeeded){var domain=getDomain();if(domain!==null){holder.fn=util.domainBind(domain,holder.fn)}}ret._setAsyncGuaranteed();ret._setOnCancel(holder)}return ret}}}var $_len=arguments.length;var args=new Array($_len);for(var $_i=0;$_i<$_len;++$_i){args[$_i]=arguments[$_i]}if(fn)args.pop();var ret=new PromiseArray(args).promise();return fn!==undefined?ret.spread(fn):ret}}},{"./util":238}],220:[function(require,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){var getDomain=Promise._getDomain;var util=require("./util");var tryCatch=util.tryCatch;var errorObj=util.errorObj;var async=Promise._async;function MappingPromiseArray(promises,fn,limit,_filter){this.constructor$(promises);this._promise._captureStackTrace();var domain=getDomain();this._callback=domain===null?fn:util.domainBind(domain,fn);this._preservedValues=_filter===INTERNAL?new Array(this.length()):null;this._limit=limit;this._inFlight=0;this._queue=[];async.invoke(this._asyncInit,this,undefined)}util.inherits(MappingPromiseArray,PromiseArray);MappingPromiseArray.prototype._asyncInit=function(){this._init$(undefined,-2)};MappingPromiseArray.prototype._init=function(){};MappingPromiseArray.prototype._promiseFulfilled=function(value,index){var values=this._values;var length=this.length();var preservedValues=this._preservedValues;var limit=this._limit;if(index<0){index=index*-1-1;values[index]=value;if(limit>=1){this._inFlight--;this._drainQueue();if(this._isResolved())return true}}else{if(limit>=1&&this._inFlight>=limit){values[index]=value;this._queue.push(index);return false}if(preservedValues!==null)preservedValues[index]=value;var promise=this._promise;var callback=this._callback;var receiver=promise._boundValue();promise._pushContext();var ret=tryCatch(callback).call(receiver,value,index,length);var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,preservedValues!==null?"Promise.filter":"Promise.map",promise);if(ret===errorObj){this._reject(ret.e);return true}var maybePromise=tryConvertToPromise(ret,this._promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();var bitField=maybePromise._bitField;if((bitField&50397184)===0){if(limit>=1)this._inFlight++;values[index]=maybePromise;maybePromise._proxy(this,(index+1)*-1);return false}else if((bitField&33554432)!==0){ret=maybePromise._value()}else if((bitField&16777216)!==0){this._reject(maybePromise._reason());return true}else{this._cancel();return true}}values[index]=ret}var totalResolved=++this._totalResolved;if(totalResolved>=length){if(preservedValues!==null){this._filter(values,preservedValues)}else{this._resolve(values)}return true}return false};MappingPromiseArray.prototype._drainQueue=function(){var queue=this._queue;var limit=this._limit;var values=this._values;while(queue.length>0&&this._inFlight<limit){if(this._isResolved())return;var index=queue.pop();this._promiseFulfilled(values[index],index)}};MappingPromiseArray.prototype._filter=function(booleans,values){var len=values.length;var ret=new Array(len);var j=0;for(var i=0;i<len;++i){if(booleans[i])ret[j++]=values[i]}ret.length=j;this._resolve(ret)};MappingPromiseArray.prototype.preservedValues=function(){return this._preservedValues};function map(promises,fn,options,_filter){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn))}var limit=0;if(options!==undefined){if(typeof options==="object"&&options!==null){if(typeof options.concurrency!=="number"){return Promise.reject(new TypeError("'concurrency' must be a number but it is "+util.classString(options.concurrency)))}limit=options.concurrency}else{return Promise.reject(new TypeError("options argument must be an object but it is "+util.classString(options)))}}limit=typeof limit==="number"&&isFinite(limit)&&limit>=1?limit:0;return new MappingPromiseArray(promises,fn,limit,_filter).promise()}Promise.prototype.map=function(fn,options){return map(this,fn,options,null)};Promise.map=function(promises,fn,options,_filter){return map(promises,fn,options,_filter)}}},{"./util":238}],221:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug){var util=require("./util");var tryCatch=util.tryCatch;Promise.method=function(fn){if(typeof fn!=="function"){throw new Promise.TypeError("expecting a function but got "+util.classString(fn))}return function(){var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._pushContext();var value=tryCatch(fn).apply(this,arguments);var promiseCreated=ret._popContext();debug.checkForgottenReturns(value,promiseCreated,"Promise.method",ret);ret._resolveFromSyncValue(value);return ret}};Promise.attempt=Promise["try"]=function(fn){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn))}var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._pushContext();var value;if(arguments.length>1){debug.deprecated("calling Promise.try with more than 1 argument");var arg=arguments[1];var ctx=arguments[2];value=util.isArray(arg)?tryCatch(fn).apply(ctx,arg):tryCatch(fn).call(ctx,arg)}else{value=tryCatch(fn)()}var promiseCreated=ret._popContext();debug.checkForgottenReturns(value,promiseCreated,"Promise.try",ret);ret._resolveFromSyncValue(value);return ret};Promise.prototype._resolveFromSyncValue=function(value){if(value===util.errorObj){this._rejectCallback(value.e,false)}else{this._resolveCallback(value,true)}}}},{"./util":238}],222:[function(require,module,exports){"use strict";var util=require("./util");var maybeWrapAsError=util.maybeWrapAsError;var errors=require("./errors");var OperationalError=errors.OperationalError;var es5=require("./es5");function isUntypedError(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype}var rErrorKey=/^(?:name|message|stack|cause)$/;function wrapAsOperationalError(obj){var ret;if(isUntypedError(obj)){ret=new OperationalError(obj);ret.name=obj.name;ret.message=obj.message;ret.stack=obj.stack;var keys=es5.keys(obj);for(var i=0;i<keys.length;++i){var key=keys[i];if(!rErrorKey.test(key)){ret[key]=obj[key]}}return ret}util.markAsOriginatingFromRejection(obj);return obj}function nodebackForPromise(promise,multiArgs){return function(err,value){if(promise===null)return;if(err){var wrapped=wrapAsOperationalError(maybeWrapAsError(err));promise._attachExtraTrace(wrapped);promise._reject(wrapped)}else if(!multiArgs){promise._fulfill(value)}else{var $_len=arguments.length;var args=new Array(Math.max($_len-1,0));for(var $_i=1;$_i<$_len;++$_i){args[$_i-1]=arguments[$_i]}promise._fulfill(args)}promise=null}}module.exports=nodebackForPromise},{"./errors":214,"./es5":215,"./util":238}],223:[function(require,module,exports){"use strict";module.exports=function(Promise){var util=require("./util");var async=Promise._async;var tryCatch=util.tryCatch;var errorObj=util.errorObj;function spreadAdapter(val,nodeback){var promise=this;if(!util.isArray(val))return successAdapter.call(promise,val,nodeback);var ret=tryCatch(nodeback).apply(promise._boundValue(),[null].concat(val));if(ret===errorObj){async.throwLater(ret.e)}}function successAdapter(val,nodeback){var promise=this;var receiver=promise._boundValue();var ret=val===undefined?tryCatch(nodeback).call(receiver,null):tryCatch(nodeback).call(receiver,null,val);if(ret===errorObj){async.throwLater(ret.e)}}function errorAdapter(reason,nodeback){var promise=this;if(!reason){var newReason=new Error(reason+"");newReason.cause=reason;reason=newReason}var ret=tryCatch(nodeback).call(promise._boundValue(),reason);if(ret===errorObj){async.throwLater(ret.e)}}Promise.prototype.asCallback=Promise.prototype.nodeify=function(nodeback,options){if(typeof nodeback=="function"){var adapter=successAdapter;if(options!==undefined&&Object(options).spread){adapter=spreadAdapter}this._then(adapter,errorAdapter,undefined,this,nodeback)}return this}}},{"./util":238}],224:[function(require,module,exports){"use strict";module.exports=function(){var makeSelfResolutionError=function(){return new TypeError("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")};var reflectHandler=function(){return new Promise.PromiseInspection(this._target())};var apiRejection=function(msg){return Promise.reject(new TypeError(msg))};function Proxyable(){}var UNDEFINED_BINDING={};var util=require("./util");var getDomain;if(util.isNode){getDomain=function(){var ret=process.domain;if(ret===undefined)ret=null;return ret}}else{getDomain=function(){return null}}util.notEnumerableProp(Promise,"_getDomain",getDomain);var es5=require("./es5");var Async=require("./async");var async=new Async;es5.defineProperty(Promise,"_async",{value:async});var errors=require("./errors");var TypeError=Promise.TypeError=errors.TypeError;Promise.RangeError=errors.RangeError;var CancellationError=Promise.CancellationError=errors.CancellationError;Promise.TimeoutError=errors.TimeoutError;Promise.OperationalError=errors.OperationalError;Promise.RejectionError=errors.OperationalError;Promise.AggregateError=errors.AggregateError;var INTERNAL=function(){};var APPLY={};var NEXT_FILTER={};var tryConvertToPromise=require("./thenables")(Promise,INTERNAL);var PromiseArray=require("./promise_array")(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable);var Context=require("./context")(Promise);var createContext=Context.create;var debug=require("./debuggability")(Promise,Context);var CapturedTrace=debug.CapturedTrace;var PassThroughHandlerContext=require("./finally")(Promise,tryConvertToPromise,NEXT_FILTER);var catchFilter=require("./catch_filter")(NEXT_FILTER);var nodebackForPromise=require("./nodeback");var errorObj=util.errorObj;var tryCatch=util.tryCatch;function check(self,executor){if(self==null||self.constructor!==Promise){throw new TypeError("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}if(typeof executor!=="function"){throw new TypeError("expecting a function but got "+util.classString(executor))}}function Promise(executor){if(executor!==INTERNAL){check(this,executor)}this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;this._resolveFromExecutor(executor);this._promiseCreated();this._fireEvent("promiseCreated",this)}Promise.prototype.toString=function(){return"[object Promise]"};Promise.prototype.caught=Promise.prototype["catch"]=function(fn){var len=arguments.length;if(len>1){var catchInstances=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(util.isObject(item)){catchInstances[j++]=item}else{return apiRejection("Catch statement predicate: "+"expecting an object but got "+util.classString(item))}}catchInstances.length=j;fn=arguments[i];return this.then(undefined,catchFilter(catchInstances,fn,this))}return this.then(undefined,fn)};Promise.prototype.reflect=function(){return this._then(reflectHandler,reflectHandler,undefined,this,undefined)};Promise.prototype.then=function(didFulfill,didReject){if(debug.warnings()&&arguments.length>0&&typeof didFulfill!=="function"&&typeof didReject!=="function"){var msg=".then() only accepts functions but was passed: "+util.classString(didFulfill);if(arguments.length>1){msg+=", "+util.classString(didReject)}this._warn(msg)}return this._then(didFulfill,didReject,undefined,undefined,undefined)};Promise.prototype.done=function(didFulfill,didReject){var promise=this._then(didFulfill,didReject,undefined,undefined,undefined);promise._setIsFinal()};Promise.prototype.spread=function(fn){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn))}return this.all()._then(fn,undefined,undefined,APPLY,undefined)};Promise.prototype.toJSON=function(){var ret={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){ret.fulfillmentValue=this.value();ret.isFulfilled=true}else if(this.isRejected()){ret.rejectionReason=this.reason();ret.isRejected=true}return ret};Promise.prototype.all=function(){if(arguments.length>0){this._warn(".all() was passed arguments but it does not take any")}return new PromiseArray(this).promise()};Promise.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn)};Promise.getNewLibraryCopy=module.exports;Promise.is=function(val){return val instanceof Promise};Promise.fromNode=Promise.fromCallback=function(fn){var ret=new Promise(INTERNAL);ret._captureStackTrace();var multiArgs=arguments.length>1?!!Object(arguments[1]).multiArgs:false;var result=tryCatch(fn)(nodebackForPromise(ret,multiArgs));if(result===errorObj){ret._rejectCallback(result.e,true)}if(!ret._isFateSealed())ret._setAsyncGuaranteed();return ret};Promise.all=function(promises){return new PromiseArray(promises).promise()};Promise.cast=function(obj){var ret=tryConvertToPromise(obj);if(!(ret instanceof Promise)){ret=new Promise(INTERNAL);ret._captureStackTrace();ret._setFulfilled();ret._rejectionHandler0=obj}return ret};Promise.resolve=Promise.fulfilled=Promise.cast;Promise.reject=Promise.rejected=function(reason){var ret=new Promise(INTERNAL);ret._captureStackTrace();ret._rejectCallback(reason,true);return ret};Promise.setScheduler=function(fn){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn))}return async.setScheduler(fn)};Promise.prototype._then=function(didFulfill,didReject,_,receiver,internalData){var haveInternalData=internalData!==undefined;var promise=haveInternalData?internalData:new Promise(INTERNAL);var target=this._target();var bitField=target._bitField;if(!haveInternalData){promise._propagateFrom(this,3);promise._captureStackTrace();if(receiver===undefined&&(this._bitField&2097152)!==0){if(!((bitField&50397184)===0)){receiver=this._boundValue()}else{receiver=target===this?undefined:this._boundTo}}this._fireEvent("promiseChained",this,promise)}var domain=getDomain();if(!((bitField&50397184)===0)){var handler,value,settler=target._settlePromiseCtx;if((bitField&33554432)!==0){value=target._rejectionHandler0;handler=didFulfill}else if((bitField&16777216)!==0){value=target._fulfillmentHandler0;handler=didReject;target._unsetRejectionIsUnhandled()}else{settler=target._settlePromiseLateCancellationObserver;value=new CancellationError("late cancellation observer");target._attachExtraTrace(value);handler=didReject}async.invoke(settler,target,{handler:domain===null?handler:typeof handler==="function"&&util.domainBind(domain,handler),promise:promise,receiver:receiver,value:value})}else{target._addCallbacks(didFulfill,didReject,promise,receiver,domain)}return promise};Promise.prototype._length=function(){return this._bitField&65535};Promise.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0};Promise.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864};Promise.prototype._setLength=function(len){this._bitField=this._bitField&-65536|len&65535};Promise.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432;this._fireEvent("promiseFulfilled",this)};Promise.prototype._setRejected=function(){this._bitField=this._bitField|16777216;this._fireEvent("promiseRejected",this)};Promise.prototype._setFollowing=function(){this._bitField=this._bitField|67108864;this._fireEvent("promiseResolved",this)};Promise.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304};Promise.prototype._isFinal=function(){return(this._bitField&4194304)>0};Promise.prototype._unsetCancelled=function(){this._bitField=this._bitField&~65536};Promise.prototype._setCancelled=function(){this._bitField=this._bitField|65536;this._fireEvent("promiseCancelled",this)};Promise.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608};Promise.prototype._setAsyncGuaranteed=function(){if(async.hasCustomScheduler())return;this._bitField=this._bitField|134217728};Promise.prototype._receiverAt=function(index){var ret=index===0?this._receiver0:this[index*4-4+3];if(ret===UNDEFINED_BINDING){return undefined}else if(ret===undefined&&this._isBound()){return this._boundValue()}return ret};Promise.prototype._promiseAt=function(index){return this[index*4-4+2]};Promise.prototype._fulfillmentHandlerAt=function(index){return this[index*4-4+0]};Promise.prototype._rejectionHandlerAt=function(index){return this[index*4-4+1]};Promise.prototype._boundValue=function(){};Promise.prototype._migrateCallback0=function(follower){var bitField=follower._bitField;var fulfill=follower._fulfillmentHandler0;var reject=follower._rejectionHandler0;var promise=follower._promise0;var receiver=follower._receiverAt(0);if(receiver===undefined)receiver=UNDEFINED_BINDING;this._addCallbacks(fulfill,reject,promise,receiver,null)};Promise.prototype._migrateCallbackAt=function(follower,index){var fulfill=follower._fulfillmentHandlerAt(index);var reject=follower._rejectionHandlerAt(index);var promise=follower._promiseAt(index);var receiver=follower._receiverAt(index);if(receiver===undefined)receiver=UNDEFINED_BINDING;this._addCallbacks(fulfill,reject,promise,receiver,null)};Promise.prototype._addCallbacks=function(fulfill,reject,promise,receiver,domain){var index=this._length();if(index>=65535-4){index=0;this._setLength(0)}if(index===0){this._promise0=promise;this._receiver0=receiver;if(typeof fulfill==="function"){this._fulfillmentHandler0=domain===null?fulfill:util.domainBind(domain,fulfill)}if(typeof reject==="function"){this._rejectionHandler0=domain===null?reject:util.domainBind(domain,reject)}}else{var base=index*4-4;this[base+2]=promise;this[base+3]=receiver;if(typeof fulfill==="function"){this[base+0]=domain===null?fulfill:util.domainBind(domain,fulfill)}if(typeof reject==="function"){this[base+1]=domain===null?reject:util.domainBind(domain,reject)}}this._setLength(index+1);return index};Promise.prototype._proxy=function(proxyable,arg){this._addCallbacks(undefined,undefined,arg,proxyable,null)};Promise.prototype._resolveCallback=function(value,shouldBind){if((this._bitField&117506048)!==0)return;if(value===this)return this._rejectCallback(makeSelfResolutionError(),false);var maybePromise=tryConvertToPromise(value,this);if(!(maybePromise instanceof Promise))return this._fulfill(value);if(shouldBind)this._propagateFrom(maybePromise,2);var promise=maybePromise._target();if(promise===this){this._reject(makeSelfResolutionError());return}var bitField=promise._bitField;if((bitField&50397184)===0){var len=this._length();if(len>0)promise._migrateCallback0(this);for(var i=1;i<len;++i){promise._migrateCallbackAt(this,i)}this._setFollowing();this._setLength(0);this._setFollowee(promise)}else if((bitField&33554432)!==0){this._fulfill(promise._value())}else if((bitField&16777216)!==0){this._reject(promise._reason())}else{var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason);this._reject(reason)}};Promise.prototype._rejectCallback=function(reason,synchronous,ignoreNonErrorWarnings){var trace=util.ensureErrorObject(reason);var hasStack=trace===reason;if(!hasStack&&!ignoreNonErrorWarnings&&debug.warnings()){var message="a promise was rejected with a non-error: "+util.classString(reason);this._warn(message,true)}this._attachExtraTrace(trace,synchronous?hasStack:false);this._reject(reason)};Promise.prototype._resolveFromExecutor=function(executor){if(executor===INTERNAL)return;var promise=this;this._captureStackTrace();this._pushContext();var synchronous=true;var r=this._execute(executor,function(value){promise._resolveCallback(value)},function(reason){promise._rejectCallback(reason,synchronous)});synchronous=false;this._popContext();if(r!==undefined){promise._rejectCallback(r,true)}};Promise.prototype._settlePromiseFromHandler=function(handler,receiver,value,promise){var bitField=promise._bitField;if((bitField&65536)!==0)return;promise._pushContext();var x;if(receiver===APPLY){if(!value||typeof value.length!=="number"){x=errorObj;x.e=new TypeError("cannot .spread() a non-array: "+util.classString(value))}else{x=tryCatch(handler).apply(this._boundValue(),value)}}else{x=tryCatch(handler).call(receiver,value)}var promiseCreated=promise._popContext();bitField=promise._bitField;if((bitField&65536)!==0)return;if(x===NEXT_FILTER){promise._reject(value)}else if(x===errorObj){promise._rejectCallback(x.e,false)}else{debug.checkForgottenReturns(x,promiseCreated,"",promise,this);promise._resolveCallback(x)}};Promise.prototype._target=function(){var ret=this;while(ret._isFollowing())ret=ret._followee();return ret};Promise.prototype._followee=function(){return this._rejectionHandler0};Promise.prototype._setFollowee=function(promise){this._rejectionHandler0=promise};Promise.prototype._settlePromise=function(promise,handler,receiver,value){var isPromise=promise instanceof Promise;var bitField=this._bitField;var asyncGuaranteed=(bitField&134217728)!==0;if((bitField&65536)!==0){if(isPromise)promise._invokeInternalOnCancel();if(receiver instanceof PassThroughHandlerContext&&receiver.isFinallyHandler()){receiver.cancelPromise=promise;if(tryCatch(handler).call(receiver,value)===errorObj){promise._reject(errorObj.e)}}else if(handler===reflectHandler){promise._fulfill(reflectHandler.call(receiver))}else if(receiver instanceof Proxyable){receiver._promiseCancelled(promise)}else if(isPromise||promise instanceof PromiseArray){promise._cancel()}else{receiver.cancel()}}else if(typeof handler==="function"){if(!isPromise){handler.call(receiver,value,promise)}else{if(asyncGuaranteed)promise._setAsyncGuaranteed();this._settlePromiseFromHandler(handler,receiver,value,promise)}}else if(receiver instanceof Proxyable){if(!receiver._isResolved()){if((bitField&33554432)!==0){receiver._promiseFulfilled(value,promise)}else{receiver._promiseRejected(value,promise)}}}else if(isPromise){if(asyncGuaranteed)promise._setAsyncGuaranteed();if((bitField&33554432)!==0){promise._fulfill(value)}else{promise._reject(value)}}};Promise.prototype._settlePromiseLateCancellationObserver=function(ctx){var handler=ctx.handler;var promise=ctx.promise;var receiver=ctx.receiver;var value=ctx.value;if(typeof handler==="function"){if(!(promise instanceof Promise)){handler.call(receiver,value,promise)}else{this._settlePromiseFromHandler(handler,receiver,value,promise)}}else if(promise instanceof Promise){promise._reject(value)}};Promise.prototype._settlePromiseCtx=function(ctx){this._settlePromise(ctx.promise,ctx.handler,ctx.receiver,ctx.value)};Promise.prototype._settlePromise0=function(handler,value,bitField){var promise=this._promise0;var receiver=this._receiverAt(0);this._promise0=undefined;this._receiver0=undefined;this._settlePromise(promise,handler,receiver,value)};Promise.prototype._clearCallbackDataAtIndex=function(index){var base=index*4-4;this[base+2]=this[base+3]=this[base+0]=this[base+1]=undefined};Promise.prototype._fulfill=function(value){var bitField=this._bitField;if((bitField&117506048)>>>16)return;if(value===this){var err=makeSelfResolutionError();this._attachExtraTrace(err);return this._reject(err)}this._setFulfilled();this._rejectionHandler0=value;if((bitField&65535)>0){if((bitField&134217728)!==0){this._settlePromises()}else{async.settlePromises(this)}}};Promise.prototype._reject=function(reason){var bitField=this._bitField;if((bitField&117506048)>>>16)return;this._setRejected();this._fulfillmentHandler0=reason;if(this._isFinal()){return async.fatalError(reason,util.isNode)}if((bitField&65535)>0){async.settlePromises(this)}else{this._ensurePossibleRejectionHandled()}};Promise.prototype._fulfillPromises=function(len,value){for(var i=1;i<len;i++){var handler=this._fulfillmentHandlerAt(i);var promise=this._promiseAt(i);var receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i);this._settlePromise(promise,handler,receiver,value)}};Promise.prototype._rejectPromises=function(len,reason){for(var i=1;i<len;i++){var handler=this._rejectionHandlerAt(i);var promise=this._promiseAt(i);var receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i);this._settlePromise(promise,handler,receiver,reason)}};Promise.prototype._settlePromises=function(){var bitField=this._bitField;var len=bitField&65535;if(len>0){if((bitField&16842752)!==0){var reason=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,reason,bitField);this._rejectPromises(len,reason)}else{var value=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,value,bitField);this._fulfillPromises(len,value)}this._setLength(0)}this._clearCancellationData()};Promise.prototype._settledValue=function(){var bitField=this._bitField;if((bitField&33554432)!==0){return this._rejectionHandler0}else if((bitField&16777216)!==0){return this._fulfillmentHandler0}};function deferResolve(v){this.promise._resolveCallback(v)}function deferReject(v){this.promise._rejectCallback(v,false)}Promise.defer=Promise.pending=function(){debug.deprecated("Promise.defer","new Promise");var promise=new Promise(INTERNAL);return{promise:promise,resolve:deferResolve,reject:deferReject}};util.notEnumerableProp(Promise,"_makeSelfResolutionError",makeSelfResolutionError);require("./method")(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug);require("./bind")(Promise,INTERNAL,tryConvertToPromise,debug);require("./cancel")(Promise,PromiseArray,apiRejection,debug);require("./direct_resolve")(Promise);require("./synchronous_inspection")(Promise);require("./join")(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain);Promise.Promise=Promise;Promise.version="3.5.1";require("./map.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug);require("./call_get.js")(Promise);require("./using.js")(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug);require("./timers.js")(Promise,INTERNAL,debug);require("./generators.js")(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug);require("./nodeify.js")(Promise);require("./promisify.js")(Promise,INTERNAL);require("./props.js")(Promise,PromiseArray,tryConvertToPromise,apiRejection);require("./race.js")(Promise,INTERNAL,tryConvertToPromise,apiRejection);require("./reduce.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug);require("./settle.js")(Promise,PromiseArray,debug);require("./some.js")(Promise,PromiseArray,apiRejection);require("./filter.js")(Promise,INTERNAL);require("./each.js")(Promise,INTERNAL);require("./any.js")(Promise);util.toFastProperties(Promise);util.toFastProperties(Promise.prototype);function fillTypes(value){var p=new Promise(INTERNAL);p._fulfillmentHandler0=value;p._rejectionHandler0=value;p._promise0=value;p._receiver0=value}fillTypes({a:1});fillTypes({b:2});fillTypes({c:3});fillTypes(1);fillTypes(function(){});fillTypes(undefined);fillTypes(false);fillTypes(new Promise(INTERNAL));debug.setBounds(Async.firstLineError,util.lastLineError);return Promise}},{"./any.js":203,"./async":204,"./bind":205,"./call_get.js":207,"./cancel":208,"./catch_filter":209,"./context":210,"./debuggability":211,"./direct_resolve":212,"./each.js":213,"./errors":214,"./es5":215,"./filter.js":216,"./finally":217,"./generators.js":218,"./join":219,"./map.js":220,"./method":221,"./nodeback":222,"./nodeify.js":223,"./promise_array":225,"./promisify.js":226,"./props.js":227,"./race.js":229,"./reduce.js":230,"./settle.js":232,"./some.js":233,"./synchronous_inspection":234,"./thenables":235,"./timers.js":236,"./using.js":237,"./util":238}],225:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable){var util=require("./util");var isArray=util.isArray;function toResolutionValue(val){switch(val){case-2:return[];case-3:return{};case-6:return new Map}}function PromiseArray(values){var promise=this._promise=new Promise(INTERNAL);if(values instanceof Promise){promise._propagateFrom(values,3)}promise._setOnCancel(this);this._values=values;this._length=0;this._totalResolved=0;this._init(undefined,-2)}util.inherits(PromiseArray,Proxyable);PromiseArray.prototype.length=function(){return this._length};PromiseArray.prototype.promise=function(){return this._promise};PromiseArray.prototype._init=function init(_,resolveValueIfEmpty){var values=tryConvertToPromise(this._values,this._promise);if(values instanceof Promise){values=values._target();var bitField=values._bitField;this._values=values;if((bitField&50397184)===0){this._promise._setAsyncGuaranteed();return values._then(init,this._reject,undefined,this,resolveValueIfEmpty)}else if((bitField&33554432)!==0){values=values._value()}else if((bitField&16777216)!==0){return this._reject(values._reason())}else{return this._cancel()}}values=util.asArray(values);if(values===null){var err=apiRejection("expecting an array or an iterable object but got "+util.classString(values)).reason();this._promise._rejectCallback(err,false);return}if(values.length===0){if(resolveValueIfEmpty===-5){this._resolveEmptyArray()}else{this._resolve(toResolutionValue(resolveValueIfEmpty))}return}this._iterate(values)};PromiseArray.prototype._iterate=function(values){var len=this.getActualLength(values.length);this._length=len;this._values=this.shouldCopyValues()?new Array(len):this._values;var result=this._promise;var isResolved=false;var bitField=null;for(var i=0;i<len;++i){var maybePromise=tryConvertToPromise(values[i],result);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();bitField=maybePromise._bitField}else{bitField=null}if(isResolved){if(bitField!==null){maybePromise.suppressUnhandledRejections()}}else if(bitField!==null){if((bitField&50397184)===0){maybePromise._proxy(this,i);this._values[i]=maybePromise}else if((bitField&33554432)!==0){isResolved=this._promiseFulfilled(maybePromise._value(),i)}else if((bitField&16777216)!==0){isResolved=this._promiseRejected(maybePromise._reason(),i)}else{isResolved=this._promiseCancelled(i)}}else{isResolved=this._promiseFulfilled(maybePromise,i)}}if(!isResolved)result._setAsyncGuaranteed()};PromiseArray.prototype._isResolved=function(){return this._values===null};PromiseArray.prototype._resolve=function(value){this._values=null;this._promise._fulfill(value)};PromiseArray.prototype._cancel=function(){if(this._isResolved()||!this._promise._isCancellable())return;this._values=null;this._promise._cancel()};PromiseArray.prototype._reject=function(reason){this._values=null;this._promise._rejectCallback(reason,false)};PromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){this._resolve(this._values);return true}return false};PromiseArray.prototype._promiseCancelled=function(){this._cancel();return true};PromiseArray.prototype._promiseRejected=function(reason){this._totalResolved++;this._reject(reason);return true};PromiseArray.prototype._resultCancelled=function(){if(this._isResolved())return;var values=this._values;this._cancel();if(values instanceof Promise){values.cancel()}else{for(var i=0;i<values.length;++i){if(values[i]instanceof Promise){values[i].cancel()}}}};PromiseArray.prototype.shouldCopyValues=function(){return true};PromiseArray.prototype.getActualLength=function(len){return len};return PromiseArray}},{"./util":238}],226:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var THIS={};var util=require("./util");var nodebackForPromise=require("./nodeback");var withAppended=util.withAppended;var maybeWrapAsError=util.maybeWrapAsError;var canEvaluate=util.canEvaluate;var TypeError=require("./errors").TypeError;var defaultSuffix="Async";var defaultPromisified={__isPromisified__:true};var noCopyProps=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var noCopyPropsPattern=new RegExp("^(?:"+noCopyProps.join("|")+")$");var defaultFilter=function(name){return util.isIdentifier(name)&&name.charAt(0)!=="_"&&name!=="constructor"};function propsFilter(key){return!noCopyPropsPattern.test(key)}function isPromisified(fn){try{return fn.__isPromisified__===true}catch(e){return false}}function hasPromisified(obj,key,suffix){var val=util.getDataPropertyOrDefault(obj,key+suffix,defaultPromisified);return val?isPromisified(val):false}function checkValid(ret,suffix,suffixRegexp){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(suffixRegexp.test(key)){var keyWithoutAsyncSuffix=key.replace(suffixRegexp,"");for(var j=0;j<ret.length;j+=2){if(ret[j]===keyWithoutAsyncSuffix){throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",suffix))}}}}}function promisifiableMethods(obj,suffix,suffixRegexp,filter){var keys=util.inheritedDataKeys(obj);var ret=[];for(var i=0;i<keys.length;++i){var key=keys[i];var value=obj[key];var passesDefaultFilter=filter===defaultFilter?true:defaultFilter(key,value,obj);if(typeof value==="function"&&!isPromisified(value)&&!hasPromisified(obj,key,suffix)&&filter(key,value,obj,passesDefaultFilter)){ret.push(key,value)}}checkValid(ret,suffix,suffixRegexp);return ret}var escapeIdentRegex=function(str){return str.replace(/([$])/,"\\$")};var makeNodePromisifiedEval;if(!false){var switchCaseArgumentOrder=function(likelyArgumentCount){var ret=[likelyArgumentCount];var min=Math.max(0,likelyArgumentCount-1-3);for(var i=likelyArgumentCount-1;i>=min;--i){ret.push(i)}for(var i=likelyArgumentCount+1;i<=3;++i){ret.push(i)}return ret};var argumentSequence=function(argumentCount){return util.filledRange(argumentCount,"_arg","")};var parameterDeclaration=function(parameterCount){return util.filledRange(Math.max(parameterCount,3),"_arg","")};var parameterCount=function(fn){if(typeof fn.length==="number"){return Math.max(Math.min(fn.length,1023+1),0)}return 0};makeNodePromisifiedEval=function(callback,receiver,originalName,fn,_,multiArgs){var newParameterCount=Math.max(0,parameterCount(fn)-1);var argumentOrder=switchCaseArgumentOrder(newParameterCount);var shouldProxyThis=typeof callback==="string"||receiver===THIS;function generateCallForArgumentCount(count){var args=argumentSequence(count).join(", ");var comma=count>0?", ":"";var ret;if(shouldProxyThis){ret="ret = callback.call(this, {{args}}, nodeback); break;\n"}else{ret=receiver===undefined?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n"}return ret.replace("{{args}}",args).replace(", ",comma)}function generateArgumentSwitchCase(){var ret="";for(var i=0;i<argumentOrder.length;++i){ret+="case "+argumentOrder[i]+":"+generateCallForArgumentCount(argumentOrder[i])}ret+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",shouldProxyThis?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n");return ret}var getFunctionCode=typeof callback==="string"?"this != null ? this['"+callback+"'] : fn":"fn";var body="'use strict';                                                \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise, "+multiArgs+");   \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n    ".replace("[CodeForSwitchCase]",generateArgumentSwitchCase()).replace("[GetFunctionCode]",getFunctionCode);body=body.replace("Parameters",parameterDeclaration(newParameterCount));return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",body)(Promise,fn,receiver,withAppended,maybeWrapAsError,nodebackForPromise,util.tryCatch,util.errorObj,util.notEnumerableProp,INTERNAL)}}function makeNodePromisifiedClosure(callback,receiver,_,fn,__,multiArgs){var defaultThis=function(){return this}();var method=callback;if(typeof method==="string"){callback=fn}function promisified(){var _receiver=receiver;if(receiver===THIS)_receiver=this;var promise=new Promise(INTERNAL);promise._captureStackTrace();var cb=typeof method==="string"&&this!==defaultThis?this[method]:callback;var fn=nodebackForPromise(promise,multiArgs);try{cb.apply(_receiver,withAppended(arguments,fn))}catch(e){promise._rejectCallback(maybeWrapAsError(e),true,true)}if(!promise._isFateSealed())promise._setAsyncGuaranteed();return promise}util.notEnumerableProp(promisified,"__isPromisified__",true);return promisified}var makeNodePromisified=canEvaluate?makeNodePromisifiedEval:makeNodePromisifiedClosure;function promisifyAll(obj,suffix,filter,promisifier,multiArgs){var suffixRegexp=new RegExp(escapeIdentRegex(suffix)+"$");var methods=promisifiableMethods(obj,suffix,suffixRegexp,filter);for(var i=0,len=methods.length;i<len;i+=2){var key=methods[i];var fn=methods[i+1];var promisifiedKey=key+suffix;if(promisifier===makeNodePromisified){obj[promisifiedKey]=makeNodePromisified(key,THIS,key,fn,suffix,multiArgs)}else{var promisified=promisifier(fn,function(){return makeNodePromisified(key,THIS,key,fn,suffix,multiArgs)});util.notEnumerableProp(promisified,"__isPromisified__",true);obj[promisifiedKey]=promisified}}util.toFastProperties(obj);return obj}function promisify(callback,receiver,multiArgs){return makeNodePromisified(callback,receiver,undefined,callback,null,multiArgs)}Promise.promisify=function(fn,options){if(typeof fn!=="function"){throw new TypeError("expecting a function but got "+util.classString(fn))}if(isPromisified(fn)){return fn}options=Object(options);var receiver=options.context===undefined?THIS:options.context;var multiArgs=!!options.multiArgs;var ret=promisify(fn,receiver,multiArgs);util.copyDescriptors(fn,ret,propsFilter);return ret};Promise.promisifyAll=function(target,options){if(typeof target!=="function"&&typeof target!=="object"){throw new TypeError("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n")}options=Object(options);var multiArgs=!!options.multiArgs;var suffix=options.suffix;if(typeof suffix!=="string")suffix=defaultSuffix;var filter=options.filter;if(typeof filter!=="function")filter=defaultFilter;var promisifier=options.promisifier;if(typeof promisifier!=="function")promisifier=makeNodePromisified;if(!util.isIdentifier(suffix)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n")}var keys=util.inheritedDataKeys(target);for(var i=0;i<keys.length;++i){var value=target[keys[i]];if(keys[i]!=="constructor"&&util.isClass(value)){promisifyAll(value.prototype,suffix,filter,promisifier,multiArgs);promisifyAll(value,suffix,filter,promisifier,multiArgs)}}return promisifyAll(target,suffix,filter,promisifier,multiArgs)}}},{"./errors":214,"./nodeback":222,"./util":238}],227:[function(require,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,apiRejection){var util=require("./util");var isObject=util.isObject;var es5=require("./es5");var Es6Map;if(typeof Map==="function")Es6Map=Map;var mapToEntries=function(){var index=0;var size=0;function extractEntry(value,key){this[index]=value;this[index+size]=key;index++}return function mapToEntries(map){size=map.size;index=0;var ret=new Array(map.size*2);map.forEach(extractEntry,ret);return ret}}();var entriesToMap=function(entries){var ret=new Es6Map;var length=entries.length/2|0;for(var i=0;i<length;++i){var key=entries[length+i];var value=entries[i];ret.set(key,value)}return ret};function PropertiesPromiseArray(obj){var isMap=false;var entries;if(Es6Map!==undefined&&obj instanceof Es6Map){entries=mapToEntries(obj);isMap=true}else{var keys=es5.keys(obj);var len=keys.length;entries=new Array(len*2);for(var i=0;i<len;++i){var key=keys[i];entries[i]=obj[key];entries[i+len]=key}}this.constructor$(entries);this._isMap=isMap;this._init$(undefined,isMap?-6:-3)}util.inherits(PropertiesPromiseArray,PromiseArray);PropertiesPromiseArray.prototype._init=function(){};PropertiesPromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){var val;if(this._isMap){val=entriesToMap(this._values)}else{val={};var keyOffset=this.length();for(var i=0,len=this.length();i<len;++i){val[this._values[i+keyOffset]]=this._values[i]}}this._resolve(val);return true}return false};PropertiesPromiseArray.prototype.shouldCopyValues=function(){return false};PropertiesPromiseArray.prototype.getActualLength=function(len){return len>>1};function props(promises){var ret;var castValue=tryConvertToPromise(promises);if(!isObject(castValue)){return apiRejection("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}else if(castValue instanceof Promise){ret=castValue._then(Promise.props,undefined,undefined,undefined,undefined)}else{ret=new PropertiesPromiseArray(castValue).promise()}if(castValue instanceof Promise){ret._propagateFrom(castValue,2)}return ret}Promise.prototype.props=function(){return props(this)};Promise.props=function(promises){return props(promises)}}},{"./es5":215,"./util":238}],228:[function(require,module,exports){"use strict";function arrayMove(src,srcIndex,dst,dstIndex,len){for(var j=0;j<len;++j){dst[j+dstIndex]=src[j+srcIndex];src[j+srcIndex]=void 0}}function Queue(capacity){this._capacity=capacity;this._length=0;this._front=0}Queue.prototype._willBeOverCapacity=function(size){return this._capacity<size};Queue.prototype._pushOne=function(arg){var length=this.length();this._checkCapacity(length+1);var i=this._front+length&this._capacity-1;this[i]=arg;this._length=length+1};Queue.prototype.push=function(fn,receiver,arg){var length=this.length()+3;if(this._willBeOverCapacity(length)){this._pushOne(fn);this._pushOne(receiver);this._pushOne(arg);return}var j=this._front+length-3;this._checkCapacity(length);var wrapMask=this._capacity-1;this[j+0&wrapMask]=fn;this[j+1&wrapMask]=receiver;this[j+2&wrapMask]=arg;this._length=length};Queue.prototype.shift=function(){var front=this._front,ret=this[front];this[front]=undefined;this._front=front+1&this._capacity-1;this._length--;return ret};Queue.prototype.length=function(){return this._length};Queue.prototype._checkCapacity=function(size){if(this._capacity<size){this._resizeTo(this._capacity<<1)}};Queue.prototype._resizeTo=function(capacity){var oldCapacity=this._capacity;this._capacity=capacity;var front=this._front;var length=this._length;var moveItemsCount=front+length&oldCapacity-1;arrayMove(this,0,this,oldCapacity,moveItemsCount)};module.exports=Queue},{}],229:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){var util=require("./util");var raceLater=function(promise){return promise.then(function(array){return race(array,promise)})};function race(promises,parent){var maybePromise=tryConvertToPromise(promises);if(maybePromise instanceof Promise){return raceLater(maybePromise)}else{promises=util.asArray(promises);if(promises===null)return apiRejection("expecting an array or an iterable object but got "+util.classString(promises))}var ret=new Promise(INTERNAL);if(parent!==undefined){ret._propagateFrom(parent,3)}var fulfill=ret._fulfill;var reject=ret._reject;for(var i=0,len=promises.length;i<len;++i){var val=promises[i];if(val===undefined&&!(i in promises)){continue}Promise.cast(val)._then(fulfill,reject,undefined,ret,null)}return ret}Promise.race=function(promises){return race(promises,undefined)};Promise.prototype.race=function(){return race(this,undefined)}}},{"./util":238}],230:[function(require,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){var getDomain=Promise._getDomain;var util=require("./util");var tryCatch=util.tryCatch;function ReductionPromiseArray(promises,fn,initialValue,_each){this.constructor$(promises);var domain=getDomain();this._fn=domain===null?fn:util.domainBind(domain,fn);if(initialValue!==undefined){initialValue=Promise.resolve(initialValue);initialValue._attachCancellationCallback(this)}this._initialValue=initialValue;this._currentCancellable=null;if(_each===INTERNAL){this._eachValues=Array(this._length)}else if(_each===0){this._eachValues=null}else{this._eachValues=undefined}this._promise._captureStackTrace();this._init$(undefined,-5)}util.inherits(ReductionPromiseArray,PromiseArray);ReductionPromiseArray.prototype._gotAccum=function(accum){if(this._eachValues!==undefined&&this._eachValues!==null&&accum!==INTERNAL){this._eachValues.push(accum)}};ReductionPromiseArray.prototype._eachComplete=function(value){if(this._eachValues!==null){this._eachValues.push(value)}return this._eachValues};ReductionPromiseArray.prototype._init=function(){};ReductionPromiseArray.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==undefined?this._eachValues:this._initialValue)};ReductionPromiseArray.prototype.shouldCopyValues=function(){return false};ReductionPromiseArray.prototype._resolve=function(value){this._promise._resolveCallback(value);this._values=null};ReductionPromiseArray.prototype._resultCancelled=function(sender){if(sender===this._initialValue)return this._cancel();if(this._isResolved())return;this._resultCancelled$();if(this._currentCancellable instanceof Promise){this._currentCancellable.cancel()}if(this._initialValue instanceof Promise){this._initialValue.cancel()}};ReductionPromiseArray.prototype._iterate=function(values){this._values=values;var value;var i;var length=values.length;if(this._initialValue!==undefined){value=this._initialValue;i=0}else{value=Promise.resolve(values[0]);i=1}this._currentCancellable=value;if(!value.isRejected()){for(;i<length;++i){var ctx={accum:null,value:values[i],index:i,length:length,array:this};value=value._then(gotAccum,undefined,undefined,ctx,undefined)}}if(this._eachValues!==undefined){value=value._then(this._eachComplete,undefined,undefined,this,undefined)}value._then(completed,completed,undefined,value,this)};Promise.prototype.reduce=function(fn,initialValue){return reduce(this,fn,initialValue,null)};Promise.reduce=function(promises,fn,initialValue,_each){return reduce(promises,fn,initialValue,_each)};function completed(valueOrReason,array){if(this.isFulfilled()){array._resolve(valueOrReason)}else{array._reject(valueOrReason)}}function reduce(promises,fn,initialValue,_each){if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn))}var array=new ReductionPromiseArray(promises,fn,initialValue,_each);return array.promise()}function gotAccum(accum){this.accum=accum;this.array._gotAccum(accum);var value=tryConvertToPromise(this.value,this.array._promise);if(value instanceof Promise){this.array._currentCancellable=value;return value._then(gotValue,undefined,undefined,this,undefined)}else{return gotValue.call(this,value)}}function gotValue(value){var array=this.array;var promise=array._promise;var fn=tryCatch(array._fn);promise._pushContext();var ret;if(array._eachValues!==undefined){ret=fn.call(promise._boundValue(),value,this.index,this.length)}else{ret=fn.call(promise._boundValue(),this.accum,value,this.index,this.length)}if(ret instanceof Promise){array._currentCancellable=ret}var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,array._eachValues!==undefined?"Promise.each":"Promise.reduce",promise);return ret}}},{"./util":238}],231:[function(require,module,exports){"use strict";var util=require("./util");var schedule;var noAsyncScheduler=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};var NativePromise=util.getNativePromise();if(util.isNode&&typeof MutationObserver==="undefined"){var GlobalSetImmediate=global.setImmediate;var ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(fn){GlobalSetImmediate.call(global,fn)}:function(fn){ProcessNextTick.call(process,fn)}}else if(typeof NativePromise==="function"&&typeof NativePromise.resolve==="function"){var nativePromise=NativePromise.resolve();schedule=function(fn){nativePromise.then(fn)}}else if(typeof MutationObserver!=="undefined"&&!(typeof window!=="undefined"&&window.navigator&&(window.navigator.standalone||window.cordova))){schedule=function(){var div=document.createElement("div");var opts={attributes:true};var toggleScheduled=false;var div2=document.createElement("div");var o2=new MutationObserver(function(){div.classList.toggle("foo");toggleScheduled=false});o2.observe(div2,opts);var scheduleToggle=function(){if(toggleScheduled)return;toggleScheduled=true;div2.classList.toggle("foo")};return function schedule(fn){var o=new MutationObserver(function(){o.disconnect();fn()});o.observe(div,opts);scheduleToggle()}}()}else if(typeof setImmediate!=="undefined"){schedule=function(fn){setImmediate(fn)}}else if(typeof setTimeout!=="undefined"){schedule=function(fn){setTimeout(fn,0)}}else{schedule=noAsyncScheduler}module.exports=schedule},{"./util":238}],232:[function(require,module,exports){"use strict";module.exports=function(Promise,PromiseArray,debug){var PromiseInspection=Promise.PromiseInspection;var util=require("./util");function SettledPromiseArray(values){this.constructor$(values)}util.inherits(SettledPromiseArray,PromiseArray);SettledPromiseArray.prototype._promiseResolved=function(index,inspection){this._values[index]=inspection;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){this._resolve(this._values);return true}return false};SettledPromiseArray.prototype._promiseFulfilled=function(value,index){var ret=new PromiseInspection;ret._bitField=33554432;ret._settledValueField=value;return this._promiseResolved(index,ret)};SettledPromiseArray.prototype._promiseRejected=function(reason,index){var ret=new PromiseInspection;ret._bitField=16777216;ret._settledValueField=reason;return this._promiseResolved(index,ret)};Promise.settle=function(promises){debug.deprecated(".settle()",".reflect()");return new SettledPromiseArray(promises).promise()};Promise.prototype.settle=function(){return Promise.settle(this)}}},{"./util":238}],233:[function(require,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection){var util=require("./util");var RangeError=require("./errors").RangeError;var AggregateError=require("./errors").AggregateError;var isArray=util.isArray;var CANCELLATION={};function SomePromiseArray(values){this.constructor$(values);this._howMany=0;this._unwrap=false;this._initialized=false}util.inherits(SomePromiseArray,PromiseArray);SomePromiseArray.prototype._init=function(){if(!this._initialized){return}if(this._howMany===0){this._resolve([]);return}this._init$(undefined,-5);var isArrayResolved=isArray(this._values);if(!this._isResolved()&&isArrayResolved&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()))}};SomePromiseArray.prototype.init=function(){this._initialized=true;this._init()};SomePromiseArray.prototype.setUnwrap=function(){this._unwrap=true};SomePromiseArray.prototype.howMany=function(){return this._howMany};SomePromiseArray.prototype.setHowMany=function(count){this._howMany=count};SomePromiseArray.prototype._promiseFulfilled=function(value){this._addFulfilled(value);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0])}else{this._resolve(this._values)}return true}return false};SomePromiseArray.prototype._promiseRejected=function(reason){this._addRejected(reason);return this._checkOutcome()};SomePromiseArray.prototype._promiseCancelled=function(){if(this._values instanceof Promise||this._values==null){return this._cancel()}this._addRejected(CANCELLATION);return this._checkOutcome()};SomePromiseArray.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){var e=new AggregateError;for(var i=this.length();i<this._values.length;++i){if(this._values[i]!==CANCELLATION){e.push(this._values[i])}}if(e.length>0){this._reject(e)}else{this._cancel()}return true}return false};SomePromiseArray.prototype._fulfilled=function(){return this._totalResolved};SomePromiseArray.prototype._rejected=function(){return this._values.length-this.length()};SomePromiseArray.prototype._addRejected=function(reason){this._values.push(reason)};SomePromiseArray.prototype._addFulfilled=function(value){this._values[this._totalResolved++]=value};SomePromiseArray.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};SomePromiseArray.prototype._getRangeError=function(count){var message="Input array must contain at least "+this._howMany+" items but contains only "+count+" items";return new RangeError(message)};SomePromiseArray.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function some(promises,howMany){if((howMany|0)!==howMany||howMany<0){return apiRejection("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n")}var ret=new SomePromiseArray(promises);var promise=ret.promise();ret.setHowMany(howMany);ret.init();return promise}Promise.some=function(promises,howMany){return some(promises,howMany)};Promise.prototype.some=function(howMany){return some(this,howMany)};Promise._SomePromiseArray=SomePromiseArray}},{"./errors":214,"./util":238}],234:[function(require,module,exports){"use strict";module.exports=function(Promise){function PromiseInspection(promise){if(promise!==undefined){promise=promise._target();this._bitField=promise._bitField;this._settledValueField=promise._isFateSealed()?promise._settledValue():undefined}else{this._bitField=0;this._settledValueField=undefined}}PromiseInspection.prototype._settledValue=function(){return this._settledValueField};var value=PromiseInspection.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()};var reason=PromiseInspection.prototype.error=PromiseInspection.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()};var isFulfilled=PromiseInspection.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0};var isRejected=PromiseInspection.prototype.isRejected=function(){return(this._bitField&16777216)!==0};var isPending=PromiseInspection.prototype.isPending=function(){return(this._bitField&50397184)===0};var isResolved=PromiseInspection.prototype.isResolved=function(){return(this._bitField&50331648)!==0};PromiseInspection.prototype.isCancelled=function(){return(this._bitField&8454144)!==0};Promise.prototype.__isCancelled=function(){return(this._bitField&65536)===65536};Promise.prototype._isCancelled=function(){return this._target().__isCancelled()};Promise.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0};Promise.prototype.isPending=function(){return isPending.call(this._target())};Promise.prototype.isRejected=function(){return isRejected.call(this._target())};Promise.prototype.isFulfilled=function(){return isFulfilled.call(this._target())};Promise.prototype.isResolved=function(){return isResolved.call(this._target())};Promise.prototype.value=function(){return value.call(this._target())};Promise.prototype.reason=function(){var target=this._target();target._unsetRejectionIsUnhandled();return reason.call(target)};Promise.prototype._value=function(){return this._settledValue()};Promise.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue()};Promise.PromiseInspection=PromiseInspection}},{}],235:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var util=require("./util");var errorObj=util.errorObj;var isObject=util.isObject;function tryConvertToPromise(obj,context){if(isObject(obj)){if(obj instanceof Promise)return obj;var then=getThen(obj);if(then===errorObj){if(context)context._pushContext();var ret=Promise.reject(then.e);if(context)context._popContext();return ret}else if(typeof then==="function"){if(isAnyBluebirdPromise(obj)){var ret=new Promise(INTERNAL);obj._then(ret._fulfill,ret._reject,undefined,ret,null);return ret}return doThenable(obj,then,context)}}return obj}function doGetThen(obj){return obj.then}function getThen(obj){try{return doGetThen(obj)}catch(e){errorObj.e=e;return errorObj}}var hasProp={}.hasOwnProperty;function isAnyBluebirdPromise(obj){try{return hasProp.call(obj,"_promise0")}catch(e){return false}}function doThenable(x,then,context){var promise=new Promise(INTERNAL);var ret=promise;if(context)context._pushContext();promise._captureStackTrace();if(context)context._popContext();var synchronous=true;var result=util.tryCatch(then).call(x,resolve,reject);synchronous=false;if(promise&&result===errorObj){promise._rejectCallback(result.e,true,true);promise=null}function resolve(value){if(!promise)return;promise._resolveCallback(value);promise=null}function reject(reason){if(!promise)return;promise._rejectCallback(reason,synchronous,true);promise=null}return ret}return tryConvertToPromise}},{"./util":238}],236:[function(require,module,exports){"use strict";module.exports=function(Promise,INTERNAL,debug){var util=require("./util");var TimeoutError=Promise.TimeoutError;function HandleWrapper(handle){this.handle=handle}HandleWrapper.prototype._resultCancelled=function(){clearTimeout(this.handle)};var afterValue=function(value){return delay(+this).thenReturn(value)};var delay=Promise.delay=function(ms,value){var ret;var handle;if(value!==undefined){ret=Promise.resolve(value)._then(afterValue,null,null,ms,undefined);if(debug.cancellation()&&value instanceof Promise){ret._setOnCancel(value)}}else{ret=new Promise(INTERNAL);handle=setTimeout(function(){ret._fulfill()},+ms);if(debug.cancellation()){ret._setOnCancel(new HandleWrapper(handle))}ret._captureStackTrace()}ret._setAsyncGuaranteed();return ret};Promise.prototype.delay=function(ms){return delay(ms,this)};var afterTimeout=function(promise,message,parent){var err;if(typeof message!=="string"){if(message instanceof Error){err=message}else{err=new TimeoutError("operation timed out")}}else{err=new TimeoutError(message)}util.markAsOriginatingFromRejection(err);promise._attachExtraTrace(err);promise._reject(err);if(parent!=null){parent.cancel()}};function successClear(value){clearTimeout(this.handle);return value}function failureClear(reason){clearTimeout(this.handle);throw reason}Promise.prototype.timeout=function(ms,message){ms=+ms;var ret,parent;var handleWrapper=new HandleWrapper(setTimeout(function timeoutTimeout(){if(ret.isPending()){afterTimeout(ret,message,parent)}},ms));if(debug.cancellation()){parent=this.then();ret=parent._then(successClear,failureClear,undefined,handleWrapper,undefined);ret._setOnCancel(handleWrapper)}else{ret=this._then(successClear,failureClear,undefined,handleWrapper,undefined)}return ret}}},{"./util":238}],237:[function(require,module,exports){"use strict";module.exports=function(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug){var util=require("./util");var TypeError=require("./errors").TypeError;var inherits=require("./util").inherits;var errorObj=util.errorObj;var tryCatch=util.tryCatch;var NULL={};function thrower(e){setTimeout(function(){throw e},0)}function castPreservingDisposable(thenable){var maybePromise=tryConvertToPromise(thenable);if(maybePromise!==thenable&&typeof thenable._isDisposable==="function"&&typeof thenable._getDisposer==="function"&&thenable._isDisposable()){maybePromise._setDisposable(thenable._getDisposer())}return maybePromise}function dispose(resources,inspection){var i=0;var len=resources.length;var ret=new Promise(INTERNAL);function iterator(){if(i>=len)return ret._fulfill();var maybePromise=castPreservingDisposable(resources[i++]);if(maybePromise instanceof Promise&&maybePromise._isDisposable()){try{maybePromise=tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection),resources.promise)}catch(e){return thrower(e)}if(maybePromise instanceof Promise){return maybePromise._then(iterator,thrower,null,null,null)}}iterator()}iterator();return ret}function Disposer(data,promise,context){this._data=data;this._promise=promise;this._context=context}Disposer.prototype.data=function(){return this._data};Disposer.prototype.promise=function(){return this._promise};Disposer.prototype.resource=function(){if(this.promise().isFulfilled()){return this.promise().value()}return NULL};Disposer.prototype.tryDispose=function(inspection){var resource=this.resource();var context=this._context;if(context!==undefined)context._pushContext();var ret=resource!==NULL?this.doDispose(resource,inspection):null;if(context!==undefined)context._popContext();this._promise._unsetDisposable();this._data=null;return ret};Disposer.isDisposer=function(d){return d!=null&&typeof d.resource==="function"&&typeof d.tryDispose==="function"};function FunctionDisposer(fn,promise,context){this.constructor$(fn,promise,context)}inherits(FunctionDisposer,Disposer);FunctionDisposer.prototype.doDispose=function(resource,inspection){var fn=this.data();return fn.call(resource,resource,inspection)};function maybeUnwrapDisposer(value){if(Disposer.isDisposer(value)){this.resources[this.index]._setDisposable(value);return value.promise()}return value}function ResourceList(length){this.length=length;this.promise=null;this[length-1]=null}ResourceList.prototype._resultCancelled=function(){var len=this.length;for(var i=0;i<len;++i){var item=this[i];if(item instanceof Promise){item.cancel()}}};Promise.using=function(){var len=arguments.length;if(len<2)return apiRejection("you must pass at least 2 arguments to Promise.using");var fn=arguments[len-1];if(typeof fn!=="function"){return apiRejection("expecting a function but got "+util.classString(fn))}var input;var spreadArgs=true;if(len===2&&Array.isArray(arguments[0])){input=arguments[0];len=input.length;spreadArgs=false}else{input=arguments;len--}var resources=new ResourceList(len);for(var i=0;i<len;++i){var resource=input[i];if(Disposer.isDisposer(resource)){var disposer=resource;resource=resource.promise();resource._setDisposable(disposer)}else{var maybePromise=tryConvertToPromise(resource);if(maybePromise instanceof Promise){resource=maybePromise._then(maybeUnwrapDisposer,null,null,{resources:resources,index:i},undefined)}}resources[i]=resource}var reflectedResources=new Array(resources.length);for(var i=0;i<reflectedResources.length;++i){reflectedResources[i]=Promise.resolve(resources[i]).reflect()}var resultPromise=Promise.all(reflectedResources).then(function(inspections){for(var i=0;i<inspections.length;++i){var inspection=inspections[i];if(inspection.isRejected()){errorObj.e=inspection.error();return errorObj}else if(!inspection.isFulfilled()){resultPromise.cancel();return}inspections[i]=inspection.value()}promise._pushContext();fn=tryCatch(fn);var ret=spreadArgs?fn.apply(undefined,inspections):fn(inspections);var promiseCreated=promise._popContext();debug.checkForgottenReturns(ret,promiseCreated,"Promise.using",promise);return ret});var promise=resultPromise.lastly(function(){var inspection=new Promise.PromiseInspection(resultPromise);return dispose(resources,inspection)});resources.promise=promise;promise._setOnCancel(resources);return promise};Promise.prototype._setDisposable=function(disposer){this._bitField=this._bitField|131072;this._disposer=disposer};Promise.prototype._isDisposable=function(){return(this._bitField&131072)>0};Promise.prototype._getDisposer=function(){return this._disposer};Promise.prototype._unsetDisposable=function(){this._bitField=this._bitField&~131072;this._disposer=undefined};Promise.prototype.disposer=function(fn){if(typeof fn==="function"){return new FunctionDisposer(fn,this,createContext())}throw new TypeError}}},{"./errors":214,"./util":238}],238:[function(require,module,exports){"use strict";var es5=require("./es5");var canEvaluate=typeof navigator=="undefined";var errorObj={e:{}};var tryCatchTarget;var globalObject=typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:this!==undefined?this:null;function tryCatcher(){try{var target=tryCatchTarget;tryCatchTarget=null;return target.apply(this,arguments)}catch(e){errorObj.e=e;return errorObj}}function tryCatch(fn){tryCatchTarget=fn;return tryCatcher}var inherits=function(Child,Parent){var hasProp={}.hasOwnProperty;function T(){this.constructor=Child;this.constructor$=Parent;for(var propertyName in Parent.prototype){if(hasProp.call(Parent.prototype,propertyName)&&propertyName.charAt(propertyName.length-1)!=="$"){this[propertyName+"$"]=Parent.prototype[propertyName]}}}T.prototype=Parent.prototype;Child.prototype=new T;return Child.prototype};function isPrimitive(val){return val==null||val===true||val===false||typeof val==="string"||typeof val==="number"}function isObject(value){return typeof value==="function"||typeof value==="object"&&value!==null}function maybeWrapAsError(maybeError){if(!isPrimitive(maybeError))return maybeError;return new Error(safeToString(maybeError))}function withAppended(target,appendee){var len=target.length;var ret=new Array(len+1);var i;for(i=0;i<len;++i){ret[i]=target[i]}ret[i]=appendee;return ret}function getDataPropertyOrDefault(obj,key,defaultValue){if(es5.isES5){var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null){return desc.get==null&&desc.set==null?desc.value:defaultValue}}else{return{}.hasOwnProperty.call(obj,key)?obj[key]:undefined}}function notEnumerableProp(obj,name,value){if(isPrimitive(obj))return obj;var descriptor={value:value,configurable:true,enumerable:false,writable:true};es5.defineProperty(obj,name,descriptor);return obj}function thrower(r){throw r}var inheritedDataKeys=function(){var excludedPrototypes=[Array.prototype,Object.prototype,Function.prototype];var isExcludedProto=function(val){for(var i=0;i<excludedPrototypes.length;++i){if(excludedPrototypes[i]===val){return true}}return false};if(es5.isES5){var getKeys=Object.getOwnPropertyNames;return function(obj){var ret=[];var visitedKeys=Object.create(null);while(obj!=null&&!isExcludedProto(obj)){var keys;try{keys=getKeys(obj)}catch(e){return ret}for(var i=0;i<keys.length;++i){var key=keys[i];if(visitedKeys[key])continue;visitedKeys[key]=true;var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null&&desc.get==null&&desc.set==null){ret.push(key)}}obj=es5.getPrototypeOf(obj)}return ret}}else{var hasProp={}.hasOwnProperty;return function(obj){if(isExcludedProto(obj))return[];var ret=[];enumeration:for(var key in obj){if(hasProp.call(obj,key)){ret.push(key)}else{for(var i=0;i<excludedPrototypes.length;++i){if(hasProp.call(excludedPrototypes[i],key)){continue enumeration}}ret.push(key)}}return ret}}}();var thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(fn){try{if(typeof fn==="function"){var keys=es5.names(fn.prototype);var hasMethods=es5.isES5&&keys.length>1;var hasMethodsOtherThanConstructor=keys.length>0&&!(keys.length===1&&keys[0]==="constructor");var hasThisAssignmentAndStaticMethods=thisAssignmentPattern.test(fn+"")&&es5.names(fn).length>0;if(hasMethods||hasMethodsOtherThanConstructor||hasThisAssignmentAndStaticMethods){return true}}return false}catch(e){return false}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;var l=8;while(l--)new FakeConstructor;return obj;eval(obj)}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(str){return rident.test(str)}function filledRange(count,prefix,suffix){var ret=new Array(count);for(var i=0;i<count;++i){ret[i]=prefix+i+suffix}return ret}function safeToString(obj){try{return obj+""}catch(e){return"[no string representation]"}}function isError(obj){return obj instanceof Error||obj!==null&&typeof obj==="object"&&typeof obj.message==="string"&&typeof obj.name==="string"}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",true)}catch(ignore){}}function originatesFromRejection(e){if(e==null)return false;return e instanceof Error["__BluebirdErrorTypes__"].OperationalError||e["isOperational"]===true}function canAttachTrace(obj){return isError(obj)&&es5.propertyIsWritable(obj,"stack")}var ensureErrorObject=function(){if(!("stack"in new Error)){return function(value){if(canAttachTrace(value))return value;try{throw new Error(safeToString(value))}catch(err){return err}}}else{return function(value){if(canAttachTrace(value))return value;return new Error(safeToString(value))}}}();function classString(obj){return{}.toString.call(obj)}function copyDescriptors(from,to,filter){var keys=es5.names(from);for(var i=0;i<keys.length;++i){var key=keys[i];if(filter(key)){try{es5.defineProperty(to,key,es5.getDescriptor(from,key))}catch(ignore){}}}}var asArray=function(v){if(es5.isArray(v)){return v}return null};if(typeof Symbol!=="undefined"&&Symbol.iterator){var ArrayFrom=typeof Array.from==="function"?function(v){return Array.from(v)}:function(v){var ret=[];var it=v[Symbol.iterator]();var itResult;while(!(itResult=it.next()).done){ret.push(itResult.value)}return ret};asArray=function(v){if(es5.isArray(v)){return v}else if(v!=null&&typeof v[Symbol.iterator]==="function"){return ArrayFrom(v)}return null}}var isNode=typeof process!=="undefined"&&classString(process).toLowerCase()==="[object process]";var hasEnvVariables=typeof process!=="undefined"&&typeof process.env!=="undefined";function env(key){return hasEnvVariables?process.env[key]:undefined}function getNativePromise(){if(typeof Promise==="function"){try{var promise=new Promise(function(){});if({}.toString.call(promise)==="[object Promise]"){return Promise}}catch(e){}}}function domainBind(self,cb){return self.bind(cb)}var ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function",isNode:isNode,hasEnvVariables:hasEnvVariables,env:env,global:globalObject,getNativePromise:getNativePromise,domainBind:domainBind};ret.isRecentNode=ret.isNode&&function(){var version=process.versions.node.split(".").map(Number);return version[0]===0&&version[1]>10||version[0]>0}();if(ret.isNode)ret.toFastProperties(process);try{throw new Error}catch(e){ret.lastLineError=e}module.exports=ret},{"./es5":215}],239:[function(require,module,exports){"use strict";var deprecate=require("depd")("body-parser");var parsers=Object.create(null);exports=module.exports=deprecate.function(bodyParser,"bodyParser: use individual json/urlencoded middlewares");Object.defineProperty(exports,"json",{configurable:true,enumerable:true,get:createParserGetter("json")});Object.defineProperty(exports,"raw",{configurable:true,enumerable:true,get:createParserGetter("raw")});Object.defineProperty(exports,"text",{configurable:true,enumerable:true,get:createParserGetter("text")});Object.defineProperty(exports,"urlencoded",{configurable:true,enumerable:true,get:createParserGetter("urlencoded")});function bodyParser(options){var opts={};if(options){for(var prop in options){if(prop!=="type"){opts[prop]=options[prop]}}}var _urlencoded=exports.urlencoded(opts);var _json=exports.json(opts);return function bodyParser(req,res,next){_json(req,res,function(err){if(err)return next(err);_urlencoded(req,res,next)})}}function createParserGetter(name){return function get(){return loadParser(name)}}function loadParser(parserName){var parser=parsers[parserName];if(parser!==undefined){return parser}switch(parserName){case"json":parser=require("./lib/types/json");break;case"raw":parser=require("./lib/types/raw");break;case"text":parser=require("./lib/types/text");break;case"urlencoded":parser=require("./lib/types/urlencoded");break}return parsers[parserName]=parser}},{"./lib/types/json":241,"./lib/types/raw":242,"./lib/types/text":243,"./lib/types/urlencoded":244,depd:270}],240:[function(require,module,exports){"use strict";var createError=require("http-errors");var getBody=require("raw-body");var iconv=require("iconv-lite");var onFinished=require("on-finished");var zlib=require("zlib");module.exports=read;function read(req,res,next,parse,debug,options){var length;var opts=options;var stream;req._body=true;var encoding=opts.encoding!==null?opts.encoding:null;var verify=opts.verify;try{stream=contentstream(req,debug,opts.inflate);length=stream.length;stream.length=undefined}catch(err){return next(err)}opts.length=length;opts.encoding=verify?null:encoding;if(opts.encoding===null&&encoding!==null&&!iconv.encodingExists(encoding)){return next(createError(415,'unsupported charset "'+encoding.toUpperCase()+'"',{charset:encoding.toLowerCase(),type:"charset.unsupported"}))}debug("read body");getBody(stream,opts,function(error,body){if(error){var _error;if(error.type==="encoding.unsupported"){_error=createError(415,'unsupported charset "'+encoding.toUpperCase()+'"',{charset:encoding.toLowerCase(),type:"charset.unsupported"})}else{_error=createError(400,error)}stream.resume();onFinished(req,function onfinished(){next(createError(400,_error))});return}if(verify){try{debug("verify body");verify(req,res,body,encoding)}catch(err){next(createError(403,err,{body:body,type:err.type||"entity.verify.failed"}));return}}var str=body;try{debug("parse body");str=typeof body!=="string"&&encoding!==null?iconv.decode(body,encoding):body;req.body=parse(str)}catch(err){next(createError(400,err,{body:str,type:err.type||"entity.parse.failed"}));return}next()})}function contentstream(req,debug,inflate){var encoding=(req.headers["content-encoding"]||"identity").toLowerCase();var length=req.headers["content-length"];var stream;debug('content-encoding "%s"',encoding);if(inflate===false&&encoding!=="identity"){throw createError(415,"content encoding unsupported",{encoding:encoding,type:"encoding.unsupported"})}switch(encoding){case"deflate":stream=zlib.createInflate();debug("inflate body");req.pipe(stream);break;case"gzip":stream=zlib.createGunzip();debug("gunzip body");req.pipe(stream);break;case"identity":stream=req;stream.length=length;break;default:throw createError(415,'unsupported content encoding "'+encoding+'"',{encoding:encoding,type:"encoding.unsupported"})}return stream}},{"http-errors":357,"iconv-lite":383,"on-finished":447,"raw-body":463,zlib:undefined}],241:[function(require,module,exports){"use strict";var bytes=require("bytes");var contentType=require("content-type");var createError=require("http-errors");var debug=require("debug")("body-parser:json");var read=require("../read");var typeis=require("type-is");module.exports=json;var FIRST_CHAR_REGEXP=/^[\x20\x09\x0a\x0d]*(.)/;function json(options){var opts=options||{};var limit=typeof opts.limit!=="number"?bytes.parse(opts.limit||"100kb"):opts.limit;var inflate=opts.inflate!==false;var reviver=opts.reviver;var strict=opts.strict!==false;var type=opts.type||"application/json";var verify=opts.verify||false;if(verify!==false&&typeof verify!=="function"){throw new TypeError("option verify must be function")}var shouldParse=typeof type!=="function"?typeChecker(type):type;function parse(body){if(body.length===0){return{}}if(strict){var first=firstchar(body);if(first!=="{"&&first!=="["){debug("strict violation");throw createStrictSyntaxError(body,first)}}try{debug("parse json");return JSON.parse(body,reviver)}catch(e){throw normalizeJsonSyntaxError(e,{stack:e.stack})}}return function jsonParser(req,res,next){if(req._body){debug("body already parsed");next();return}req.body=req.body||{};if(!typeis.hasBody(req)){debug("skip empty body");next();return}debug("content-type %j",req.headers["content-type"]);if(!shouldParse(req)){debug("skip parsing");next();return}var charset=getCharset(req)||"utf-8";if(charset.substr(0,4)!=="utf-"){debug("invalid charset");next(createError(415,'unsupported charset "'+charset.toUpperCase()+'"',{charset:charset,type:"charset.unsupported"}));return}read(req,res,next,parse,debug,{encoding:charset,inflate:inflate,limit:limit,verify:verify})}}function createStrictSyntaxError(str,char){var index=str.indexOf(char);var partial=str.substring(0,index)+"#";try{JSON.parse(partial);throw new SyntaxError("strict violation")}catch(e){return normalizeJsonSyntaxError(e,{message:e.message.replace("#",char),stack:e.stack})}}function firstchar(str){return FIRST_CHAR_REGEXP.exec(str)[1]}function getCharset(req){try{return(contentType.parse(req).parameters.charset||"").toLowerCase()}catch(e){return undefined}}function normalizeJsonSyntaxError(error,obj){var keys=Object.getOwnPropertyNames(error);for(var i=0;i<keys.length;i++){var key=keys[i];if(key!=="stack"&&key!=="message"){delete error[key]}}var props=Object.keys(obj);for(var j=0;j<props.length;j++){var prop=props[j];error[prop]=obj[prop]}return error}function typeChecker(type){return function checkType(req){return Boolean(typeis(req,type))}}},{"../read":240,bytes:252,"content-type":258,debug:247,"http-errors":357,"type-is":557}],242:[function(require,module,exports){"use strict";var bytes=require("bytes");var debug=require("debug")("body-parser:raw");var read=require("../read");var typeis=require("type-is");module.exports=raw;function raw(options){var opts=options||{};var inflate=opts.inflate!==false;var limit=typeof opts.limit!=="number"?bytes.parse(opts.limit||"100kb"):opts.limit;var type=opts.type||"application/octet-stream";var verify=opts.verify||false;if(verify!==false&&typeof verify!=="function"){throw new TypeError("option verify must be function")}var shouldParse=typeof type!=="function"?typeChecker(type):type;function parse(buf){return buf}return function rawParser(req,res,next){if(req._body){debug("body already parsed");next();return}req.body=req.body||{};if(!typeis.hasBody(req)){debug("skip empty body");next();return}debug("content-type %j",req.headers["content-type"]);if(!shouldParse(req)){debug("skip parsing");next();return}read(req,res,next,parse,debug,{encoding:null,inflate:inflate,limit:limit,verify:verify})}}function typeChecker(type){return function checkType(req){return Boolean(typeis(req,type))}}},{"../read":240,bytes:252,debug:247,"type-is":557}],243:[function(require,module,exports){"use strict";var bytes=require("bytes");var contentType=require("content-type");var debug=require("debug")("body-parser:text");var read=require("../read");var typeis=require("type-is");module.exports=text;function text(options){var opts=options||{};var defaultCharset=opts.defaultCharset||"utf-8";var inflate=opts.inflate!==false;var limit=typeof opts.limit!=="number"?bytes.parse(opts.limit||"100kb"):opts.limit;var type=opts.type||"text/plain";var verify=opts.verify||false;if(verify!==false&&typeof verify!=="function"){throw new TypeError("option verify must be function")}var shouldParse=typeof type!=="function"?typeChecker(type):type;function parse(buf){return buf}return function textParser(req,res,next){if(req._body){debug("body already parsed");next();return}req.body=req.body||{};if(!typeis.hasBody(req)){debug("skip empty body");next();return}debug("content-type %j",req.headers["content-type"]);if(!shouldParse(req)){debug("skip parsing");next();return}var charset=getCharset(req)||defaultCharset;read(req,res,next,parse,debug,{encoding:charset,inflate:inflate,limit:limit,verify:verify})}}function getCharset(req){try{return(contentType.parse(req).parameters.charset||"").toLowerCase()}catch(e){return undefined}}function typeChecker(type){return function checkType(req){return Boolean(typeis(req,type))}}},{"../read":240,bytes:252,"content-type":258,debug:247,"type-is":557}],244:[function(require,module,exports){"use strict";var bytes=require("bytes");var contentType=require("content-type");var createError=require("http-errors");var debug=require("debug")("body-parser:urlencoded");var deprecate=require("depd")("body-parser");var read=require("../read");var typeis=require("type-is");module.exports=urlencoded;var parsers=Object.create(null);function urlencoded(options){var opts=options||{};if(opts.extended===undefined){deprecate("undefined extended: provide extended option")}var extended=opts.extended!==false;var inflate=opts.inflate!==false;var limit=typeof opts.limit!=="number"?bytes.parse(opts.limit||"100kb"):opts.limit;var type=opts.type||"application/x-www-form-urlencoded";var verify=opts.verify||false;if(verify!==false&&typeof verify!=="function"){throw new TypeError("option verify must be function")}var queryparse=extended?extendedparser(opts):simpleparser(opts);var shouldParse=typeof type!=="function"?typeChecker(type):type;function parse(body){return body.length?queryparse(body):{}}return function urlencodedParser(req,res,next){if(req._body){debug("body already parsed");next();return}req.body=req.body||{};if(!typeis.hasBody(req)){debug("skip empty body");next();return}debug("content-type %j",req.headers["content-type"]);if(!shouldParse(req)){debug("skip parsing");next();return}var charset=getCharset(req)||"utf-8";if(charset!=="utf-8"){debug("invalid charset");next(createError(415,'unsupported charset "'+charset.toUpperCase()+'"',{charset:charset,type:"charset.unsupported"}));return}read(req,res,next,parse,debug,{debug:debug,encoding:charset,inflate:inflate,limit:limit,verify:verify})}}function extendedparser(options){var parameterLimit=options.parameterLimit!==undefined?options.parameterLimit:1e3;var parse=parser("qs");if(isNaN(parameterLimit)||parameterLimit<1){throw new TypeError("option parameterLimit must be a positive number")}if(isFinite(parameterLimit)){parameterLimit=parameterLimit|0}return function queryparse(body){var paramCount=parameterCount(body,parameterLimit);if(paramCount===undefined){debug("too many parameters");throw createError(413,"too many parameters",{type:"parameters.too.many"})}var arrayLimit=Math.max(100,paramCount);debug("parse extended urlencoding");return parse(body,{allowPrototypes:true,arrayLimit:arrayLimit,depth:Infinity,parameterLimit:parameterLimit})}}function getCharset(req){try{return(contentType.parse(req).parameters.charset||"").toLowerCase()}catch(e){return undefined}}function parameterCount(body,limit){var count=0;var index=0;while((index=body.indexOf("&",index))!==-1){count++;index++;if(count===limit){return undefined}}return count}function parser(name){var mod=parsers[name];if(mod!==undefined){return mod.parse}switch(name){case"qs":mod=require("qs");break;case"querystring":mod=require("querystring");break}parsers[name]=mod;return mod.parse}function simpleparser(options){var parameterLimit=options.parameterLimit!==undefined?options.parameterLimit:1e3;var parse=parser("querystring");if(isNaN(parameterLimit)||parameterLimit<1){throw new TypeError("option parameterLimit must be a positive number")}if(isFinite(parameterLimit)){parameterLimit=parameterLimit|0}return function queryparse(body){var paramCount=parameterCount(body,parameterLimit);if(paramCount===undefined){debug("too many parameters");throw createError(413,"too many parameters",{type:"parameters.too.many"})}debug("parse urlencoding");return parse(body,undefined,undefined,{maxKeys:parameterLimit})}}function typeChecker(type){return function checkType(req){return Boolean(typeis(req,type))}}},{"../read":240,bytes:252,"content-type":258,debug:247,depd:270,"http-errors":357,qs:458,querystring:undefined,"type-is":557}],245:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":246}],246:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:439}],247:[function(require,module,exports){if(typeof process!=="undefined"&&process.type==="renderer"){module.exports=require("./browser.js")}else{module.exports=require("./node.js")}},{"./browser.js":245,"./node.js":248}],248:[function(require,module,exports){var tty=require("tty");var util=require("util");exports=module.exports=require("./debug");exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];exports.inspectOpts=Object.keys(process.env).filter(function(key){return/^debug_/i.test(key)}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase()});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val))val=true;else if(/^(no|off|false|disabled)$/i.test(val))val=false;else if(val==="null")val=null;else val=Number(val);obj[prop]=val;return obj},{});var fd=parseInt(process.env.DEBUG_FD,10)||2;if(1!==fd&&2!==fd){util.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")()}var stream=1===fd?process.stdout:2===fd?process.stderr:createWritableStdioStream(fd);function useColors(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(fd)}exports.formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split("\n").map(function(str){return str.trim()}).join(" ")};exports.formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts)};function formatArgs(args){var name=this.namespace;var useColors=this.useColors;if(useColors){var c=this.color;var prefix="  [3"+c+";1m"+name+" "+"[0m";args[0]=prefix+args[0].split("\n").join("\n"+prefix);args.push("[3"+c+"m+"+exports.humanize(this.diff)+"[0m")}else{args[0]=(new Date).toUTCString()+" "+name+" "+args[0]}}function log(){return stream.write(util.format.apply(util,arguments)+"\n")}function save(namespaces){if(null==namespaces){delete process.env.DEBUG}else{process.env.DEBUG=namespaces}}function load(){return process.env.DEBUG}function createWritableStdioStream(fd){var stream;var tty_wrap=process.binding("tty_wrap");switch(tty_wrap.guessHandleType(fd)){case"TTY":stream=new tty.WriteStream(fd);stream._type="tty";if(stream._handle&&stream._handle.unref){stream._handle.unref()}break;case"FILE":var fs=require("fs");stream=new fs.SyncWriteStream(fd,{autoClose:false});stream._type="fs";break;case"PIPE":case"TCP":var net=require("net");stream=new net.Socket({fd:fd,readable:false,writable:true});stream.readable=false;stream.read=null;stream._type="pipe";if(stream._handle&&stream._handle.unref){stream._handle.unref()}break;default:throw new Error("Implement me. Unknown stream file type!")}stream.fd=fd;stream._isStdio=true;return stream}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]]}}exports.enable(load())},{"./debug":246,fs:undefined,net:undefined,tty:undefined,util:undefined}],249:[function(require,module,exports){"use strict";const Hoek=require("hoek");const internals={STATUS_CODES:Object.setPrototypeOf({100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},null)};exports.wrap=function(error,statusCode,message){Hoek.assert(error instanceof Error,"Cannot wrap non-Error object");Hoek.assert(!error.isBoom||!statusCode&&!message,"Cannot provide statusCode or message with boom error");return error.isBoom?error:internals.initialize(error,statusCode||500,message)};exports.create=function(statusCode,message,data){return internals.create(statusCode,message,data,exports.create)};internals.create=function(statusCode,message,data,ctor){if(message instanceof Error){if(data){message.data=data}return exports.wrap(message,statusCode)}const error=new Error(message?message:undefined);Error.captureStackTrace(error,ctor);error.data=data||null;internals.initialize(error,statusCode);return error};internals.initialize=function(error,statusCode,message){const numberCode=parseInt(statusCode,10);Hoek.assert(!isNaN(numberCode)&&numberCode>=400,"First argument must be a number (400+):",statusCode);error.isBoom=true;error.isServer=numberCode>=500;if(!error.hasOwnProperty("data")){error.data=null}error.output={statusCode:numberCode,payload:{},headers:{}};error.reformat=internals.reformat;error.reformat();if(!message&&!error.message){message=error.output.payload.error}if(message){error.message=message+(error.message?": "+error.message:"")}return error};internals.reformat=function(){this.output.payload.statusCode=this.output.statusCode;this.output.payload.error=internals.STATUS_CODES[this.output.statusCode]||"Unknown";if(this.output.statusCode===500){this.output.payload.message="An internal server error occurred"}else if(this.message){this.output.payload.message=this.message}};exports.badRequest=function(message,data){return internals.create(400,message,data,exports.badRequest)};exports.unauthorized=function(message,scheme,attributes){const err=internals.create(401,message,undefined,exports.unauthorized);if(!scheme){return err}let wwwAuthenticate="";if(typeof scheme==="string"){wwwAuthenticate=scheme;if(attributes||message){err.output.payload.attributes={}}if(attributes){if(typeof attributes==="string"){wwwAuthenticate=wwwAuthenticate+" "+Hoek.escapeHeaderAttribute(attributes);err.output.payload.attributes=attributes}else{const names=Object.keys(attributes);for(let i=0;i<names.length;++i){const name=names[i];if(i){wwwAuthenticate=wwwAuthenticate+","}let value=attributes[name];if(value===null||value===undefined){value=""}wwwAuthenticate=wwwAuthenticate+" "+name+'="'+Hoek.escapeHeaderAttribute(value.toString())+'"';err.output.payload.attributes[name]=value}}}if(message){if(attributes){wwwAuthenticate=wwwAuthenticate+","}wwwAuthenticate=wwwAuthenticate+' error="'+Hoek.escapeHeaderAttribute(message)+'"';err.output.payload.attributes.error=message}else{err.isMissing=true}}else{const wwwArray=scheme;for(let i=0;i<wwwArray.length;++i){if(i){wwwAuthenticate=wwwAuthenticate+", "}wwwAuthenticate=wwwAuthenticate+wwwArray[i]}}err.output.headers["WWW-Authenticate"]=wwwAuthenticate;return err};exports.paymentRequired=function(message,data){return internals.create(402,message,data,exports.paymentRequired)};exports.forbidden=function(message,data){return internals.create(403,message,data,exports.forbidden)};exports.notFound=function(message,data){return internals.create(404,message,data,exports.notFound)};exports.methodNotAllowed=function(message,data,allow){const err=internals.create(405,message,data,exports.methodNotAllowed);if(typeof allow==="string"){allow=[allow]}if(Array.isArray(allow)){err.output.headers.Allow=allow.join(", ")}return err};exports.notAcceptable=function(message,data){return internals.create(406,message,data,exports.notAcceptable)};exports.proxyAuthRequired=function(message,data){return internals.create(407,message,data,exports.proxyAuthRequired)};exports.clientTimeout=function(message,data){return internals.create(408,message,data,exports.clientTimeout)};exports.conflict=function(message,data){return internals.create(409,message,data,exports.conflict)};exports.resourceGone=function(message,data){return internals.create(410,message,data,exports.resourceGone)};exports.lengthRequired=function(message,data){return internals.create(411,message,data,exports.lengthRequired)};exports.preconditionFailed=function(message,data){return internals.create(412,message,data,exports.preconditionFailed)};exports.entityTooLarge=function(message,data){return internals.create(413,message,data,exports.entityTooLarge)};exports.uriTooLong=function(message,data){return internals.create(414,message,data,exports.uriTooLong)};exports.unsupportedMediaType=function(message,data){return internals.create(415,message,data,exports.unsupportedMediaType)};exports.rangeNotSatisfiable=function(message,data){return internals.create(416,message,data,exports.rangeNotSatisfiable)};exports.expectationFailed=function(message,data){return internals.create(417,message,data,exports.expectationFailed)};exports.teapot=function(message,data){return internals.create(418,message,data,exports.teapot)};exports.badData=function(message,data){return internals.create(422,message,data,exports.badData)};exports.locked=function(message,data){return internals.create(423,message,data,exports.locked)};exports.preconditionRequired=function(message,data){return internals.create(428,message,data,exports.preconditionRequired)};exports.tooManyRequests=function(message,data){return internals.create(429,message,data,exports.tooManyRequests)};exports.illegal=function(message,data){return internals.create(451,message,data,exports.illegal)};exports.internal=function(message,data,statusCode){return internals.serverError(message,data,statusCode,exports.internal)};internals.serverError=function(message,data,statusCode,ctor){let error;if(data instanceof Error){error=exports.wrap(data,statusCode,message)}else{error=internals.create(statusCode||500,message,undefined,ctor);error.data=data}return error};exports.notImplemented=function(message,data){return internals.serverError(message,data,501,exports.notImplemented)};exports.badGateway=function(message,data){return internals.serverError(message,data,502,exports.badGateway)};exports.serverUnavailable=function(message,data){return internals.serverError(message,data,503,exports.serverUnavailable)};exports.gatewayTimeout=function(message,data){return internals.serverError(message,data,504,exports.gatewayTimeout)};exports.badImplementation=function(message,data){const err=internals.serverError(message,data,500,exports.badImplementation);err.isDeveloperError=true;return err}},{hoek:356}],250:[function(require,module,exports){var concatMap=require("concat-map");var balanced=require("balanced-match");module.exports=expandTop;var escSlash="\0SLASH"+Math.random()+"\0";var escOpen="\0OPEN"+Math.random()+"\0";var escClose="\0CLOSE"+Math.random()+"\0";var escComma="\0COMMA"+Math.random()+"\0";var escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0)}function escapeBraces(str){return str.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}function unescapeBraces(str){return str.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function parseCommaParts(str){if(!str)return[""];var parts=[];var m=balanced("{","}",str);if(!m)return str.split(",");var pre=m.pre;var body=m.body;var post=m.post;var p=pre.split(",");p[p.length-1]+="{"+body+"}";var postParts=parseCommaParts(post);if(post.length){p[p.length-1]+=postParts.shift();p.push.apply(p,postParts)}parts.push.apply(parts,p);return parts}function expandTop(str){if(!str)return[];if(str.substr(0,2)==="{}"){str="\\{\\}"+str.substr(2)}return expand(escapeBraces(str),true).map(unescapeBraces)}function identity(e){return e}function embrace(str){return"{"+str+"}"}function isPadded(el){return/^-?0\d/.test(el)}function lte(i,y){return i<=y}function gte(i,y){return i>=y}function expand(str,isTop){var expansions=[];var m=balanced("{","}",str);if(!m||/\$$/.test(m.pre))return[str];var isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body);var isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body);var isSequence=isNumericSequence||isAlphaSequence;var isOptions=m.body.indexOf(",")>=0;if(!isSequence&&!isOptions){if(m.post.match(/,.*\}/)){str=m.pre+"{"+m.body+escClose+m.post;return expand(str)}return[str]}var n;if(isSequence){n=m.body.split(/\.\./)}else{n=parseCommaParts(m.body);if(n.length===1){n=expand(n[0],false).map(embrace);if(n.length===1){var post=m.post.length?expand(m.post,false):[""];return post.map(function(p){return m.pre+n[0]+p})}}}var pre=m.pre;var post=m.post.length?expand(m.post,false):[""];var N;if(isSequence){var x=numeric(n[0]);var y=numeric(n[1]);var width=Math.max(n[0].length,n[1].length);var incr=n.length==3?Math.abs(numeric(n[2])):1;var test=lte;var reverse=y<x;if(reverse){incr*=-1;test=gte}var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence){c=String.fromCharCode(i);if(c==="\\")c=""}else{c=String(i);if(pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join("0");if(i<0)c="-"+z+c.slice(1);else c=z+c}}}N.push(c)}}else{N=concatMap(n,function(el){return expand(el,false)})}for(var j=0;j<N.length;j++){for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];if(!isTop||isSequence||expansion)expansions.push(expansion)}}return expansions}},{"balanced-match":199,"concat-map":256}],251:[function(require,module,exports){var Buffer=require("buffer").Buffer;var CRC_TABLE=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];if(typeof Int32Array!=="undefined"){CRC_TABLE=new Int32Array(CRC_TABLE)}function ensureBuffer(input){if(Buffer.isBuffer(input)){return input}var hasNewBufferAPI=typeof Buffer.alloc==="function"&&typeof Buffer.from==="function";if(typeof input==="number"){return hasNewBufferAPI?Buffer.alloc(input):new Buffer(input)}else if(typeof input==="string"){return hasNewBufferAPI?Buffer.from(input):new Buffer(input)}else{throw new Error("input must be buffer, number, or string, received "+typeof input)}}function bufferizeInt(num){var tmp=ensureBuffer(4);tmp.writeInt32BE(num,0);return tmp}function _crc32(buf,previous){buf=ensureBuffer(buf);if(Buffer.isBuffer(previous)){previous=previous.readUInt32BE(0)}var crc=~~previous^-1;for(var n=0;n<buf.length;n++){crc=CRC_TABLE[(crc^buf[n])&255]^crc>>>8}return crc^-1}function crc32(){return bufferizeInt(_crc32.apply(null,arguments))}crc32.signed=function(){return _crc32.apply(null,arguments)};crc32.unsigned=function(){return _crc32.apply(null,arguments)>>>0};module.exports=crc32},{buffer:undefined}],252:[function(require,module,exports){"use strict";module.exports=bytes;module.exports.format=format;module.exports.parse=parse;var formatThousandsRegExp=/\B(?=(\d{3})+(?!\d))/g;var formatDecimalsRegExp=/(?:\.0*|(\.[^0]+)0+)$/;var map={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:(1<<30)*1024};var parseRegExp=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function bytes(value,options){if(typeof value==="string"){return parse(value)}if(typeof value==="number"){return format(value,options)}return null}function format(value,options){if(!Number.isFinite(value)){return null}var mag=Math.abs(value);var thousandsSeparator=options&&options.thousandsSeparator||"";var unitSeparator=options&&options.unitSeparator||"";var decimalPlaces=options&&options.decimalPlaces!==undefined?options.decimalPlaces:2;var fixedDecimals=Boolean(options&&options.fixedDecimals);var unit=options&&options.unit||"";if(!unit||!map[unit.toLowerCase()]){if(mag>=map.tb){unit="TB"}else if(mag>=map.gb){unit="GB"}else if(mag>=map.mb){unit="MB"}else if(mag>=map.kb){unit="KB"}else{unit="B"}}var val=value/map[unit.toLowerCase()];var str=val.toFixed(decimalPlaces);if(!fixedDecimals){str=str.replace(formatDecimalsRegExp,"$1")}if(thousandsSeparator){str=str.replace(formatThousandsRegExp,thousandsSeparator)}return str+unitSeparator+unit}function parse(val){if(typeof val==="number"&&!isNaN(val)){return val}if(typeof val!=="string"){return null}var results=parseRegExp.exec(val);var floatValue;var unit="b";if(!results){floatValue=parseInt(val,10);unit="b"}else{floatValue=parseFloat(results[1]);unit=results[4].toLowerCase()}return Math.floor(map[unit]*floatValue)}},{}],253:[function(require,module,exports){function Caseless(dict){this.dict=dict||{}}Caseless.prototype.set=function(name,value,clobber){if(typeof name==="object"){for(var i in name){this.set(i,name[i],value)}}else{if(typeof clobber==="undefined")clobber=true;var has=this.has(name);if(!clobber&&has)this.dict[has]=this.dict[has]+","+value;else this.dict[has||name]=value;return has}};Caseless.prototype.has=function(name){var keys=Object.keys(this.dict),name=name.toLowerCase();for(var i=0;i<keys.length;i++){if(keys[i].toLowerCase()===name)return keys[i]}return false};Caseless.prototype.get=function(name){name=name.toLowerCase();var result,_key;var headers=this.dict;Object.keys(headers).forEach(function(key){_key=key.toLowerCase();if(name===_key)result=headers[key]});return result};Caseless.prototype.swap=function(name){var has=this.has(name);if(has===name)return;if(!has)throw new Error('There is no header than matches "'+name+'"');this.dict[name]=this.dict[has];delete this.dict[has]};Caseless.prototype.del=function(name){var has=this.has(name);return delete this.dict[has||name]};module.exports=function(dict){return new Caseless(dict)};module.exports.httpify=function(resp,headers){var c=new Caseless(headers);resp.setHeader=function(key,value,clobber){if(typeof value==="undefined")return;return c.set(key,value,clobber)};resp.hasHeader=function(key){return c.has(key)};resp.getHeader=function(key){return c.get(key)};resp.removeHeader=function(key){return c.del(key)};resp.headers=c.dict;return c}},{}],254:[function(require,module,exports){var slice=Array.prototype.slice;module.exports=co["default"]=co.co=co;co.wrap=function(fn){createPromise.__generatorFunction__=fn;return createPromise;function createPromise(){return co.call(this,fn.apply(this,arguments))}};function co(gen){var ctx=this;var args=slice.call(arguments,1);return new Promise(function(resolve,reject){if(typeof gen==="function")gen=gen.apply(ctx,args);if(!gen||typeof gen.next!=="function")return resolve(gen);onFulfilled();function onFulfilled(res){var ret;try{ret=gen.next(res)}catch(e){return reject(e)}next(ret)}function onRejected(err){var ret;try{ret=gen.throw(err)}catch(e){return reject(e)}next(ret)}function next(ret){if(ret.done)return resolve(ret.value);var value=toPromise.call(ctx,ret.value);if(value&&isPromise(value))return value.then(onFulfilled,onRejected);return onRejected(new TypeError("You may only yield a function, promise, generator, array, or object, "+'but the following object was passed: "'+String(ret.value)+'"'))}})}function toPromise(obj){if(!obj)return obj;if(isPromise(obj))return obj;if(isGeneratorFunction(obj)||isGenerator(obj))return co.call(this,obj);if("function"==typeof obj)return thunkToPromise.call(this,obj);if(Array.isArray(obj))return arrayToPromise.call(this,obj);if(isObject(obj))return objectToPromise.call(this,obj);return obj}function thunkToPromise(fn){var ctx=this;return new Promise(function(resolve,reject){fn.call(ctx,function(err,res){if(err)return reject(err);if(arguments.length>2)res=slice.call(arguments,1);resolve(res)})})}function arrayToPromise(obj){return Promise.all(obj.map(toPromise,this))}function objectToPromise(obj){var results=new obj.constructor;var keys=Object.keys(obj);var promises=[];for(var i=0;i<keys.length;i++){var key=keys[i];var promise=toPromise.call(this,obj[key]);if(promise&&isPromise(promise))defer(promise,key);else results[key]=obj[key]}return Promise.all(promises).then(function(){return results});function defer(promise,key){results[key]=undefined;promises.push(promise.then(function(res){results[key]=res}))}}function isPromise(obj){return"function"==typeof obj.then}function isGenerator(obj){return"function"==typeof obj.next&&"function"==typeof obj.throw}function isGeneratorFunction(obj){var constructor=obj.constructor;if(!constructor)return false;if("GeneratorFunction"===constructor.name||"GeneratorFunction"===constructor.displayName)return true;return isGenerator(constructor.prototype)}function isObject(val){return Object==val.constructor}},{}],255:[function(require,module,exports){var util=require("util");var Stream=require("stream").Stream;var DelayedStream=require("delayed-stream");module.exports=CombinedStream;function CombinedStream(){this.writable=false;this.readable=true;this.dataSize=0;this.maxDataSize=2*1024*1024;this.pauseStreams=true;this._released=false;this._streams=[];this._currentStream=null}util.inherits(CombinedStream,Stream);CombinedStream.create=function(options){var combinedStream=new this;options=options||{};for(var option in options){combinedStream[option]=options[option]}return combinedStream};CombinedStream.isStreamLike=function(stream){return typeof stream!=="function"&&typeof stream!=="string"&&typeof stream!=="boolean"&&typeof stream!=="number"&&!Buffer.isBuffer(stream)};CombinedStream.prototype.append=function(stream){var isStreamLike=CombinedStream.isStreamLike(stream);if(isStreamLike){if(!(stream instanceof DelayedStream)){var newStream=DelayedStream.create(stream,{maxDataSize:Infinity,pauseStream:this.pauseStreams});stream.on("data",this._checkDataSize.bind(this));stream=newStream}this._handleErrors(stream);if(this.pauseStreams){stream.pause()}}this._streams.push(stream);return this};CombinedStream.prototype.pipe=function(dest,options){Stream.prototype.pipe.call(this,dest,options);this.resume();return dest};CombinedStream.prototype._getNext=function(){this._currentStream=null;var stream=this._streams.shift();if(typeof stream=="undefined"){this.end();return}if(typeof stream!=="function"){this._pipeNext(stream);return}var getStream=stream;getStream(function(stream){var isStreamLike=CombinedStream.isStreamLike(stream);if(isStreamLike){stream.on("data",this._checkDataSize.bind(this));this._handleErrors(stream)}this._pipeNext(stream)}.bind(this))};CombinedStream.prototype._pipeNext=function(stream){this._currentStream=stream;var isStreamLike=CombinedStream.isStreamLike(stream);if(isStreamLike){stream.on("end",this._getNext.bind(this));stream.pipe(this,{end:false});return}var value=stream;this.write(value);this._getNext()};CombinedStream.prototype._handleErrors=function(stream){var self=this;stream.on("error",function(err){self._emitError(err)})};CombinedStream.prototype.write=function(data){this.emit("data",data)};CombinedStream.prototype.pause=function(){if(!this.pauseStreams){return}if(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function")this._currentStream.pause();this.emit("pause")};CombinedStream.prototype.resume=function(){if(!this._released){this._released=true;this.writable=true;this._getNext()}if(this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function")this._currentStream.resume();this.emit("resume")};CombinedStream.prototype.end=function(){this._reset();this.emit("end")};CombinedStream.prototype.destroy=function(){this._reset();this.emit("close")};CombinedStream.prototype._reset=function(){this.writable=false;this._streams=[];this._currentStream=null};CombinedStream.prototype._checkDataSize=function(){this._updateDataSize();if(this.dataSize<=this.maxDataSize){return}var message="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(message))};CombinedStream.prototype._updateDataSize=function(){this.dataSize=0;var self=this;this._streams.forEach(function(stream){if(!stream.dataSize){return}self.dataSize+=stream.dataSize});if(this._currentStream&&this._currentStream.dataSize){this.dataSize+=this._currentStream.dataSize}};CombinedStream.prototype._emitError=function(err){this._reset();this.emit("error",err)}},{"delayed-stream":269,stream:undefined,util:undefined}],256:[function(require,module,exports){module.exports=function(xs,fn){var res=[];for(var i=0;i<xs.length;i++){var x=fn(xs[i],i);if(isArray(x))res.push.apply(res,x);else res.push(x)}return res};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],257:[function(require,module,exports){"use strict";module.exports=contentDisposition;module.exports.parse=parse;var basename=require("path").basename;var ENCODE_URL_ATTR_CHAR_REGEXP=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g;var HEX_ESCAPE_REGEXP=/%[0-9A-Fa-f]{2}/;var HEX_ESCAPE_REPLACE_REGEXP=/%([0-9A-Fa-f]{2})/g;var NON_LATIN1_REGEXP=/[^\x20-\x7e\xa0-\xff]/g;var QESC_REGEXP=/\\([\u0000-\u007f])/g;var QUOTE_REGEXP=/([\\"])/g;var PARAM_REGEXP=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g;var TEXT_REGEXP=/^[\x20-\x7e\x80-\xff]+$/;var TOKEN_REGEXP=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/;var EXT_VALUE_REGEXP=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/;var DISPOSITION_TYPE_REGEXP=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/;function contentDisposition(filename,options){var opts=options||{};var type=opts.type||"attachment";var params=createparams(filename,opts.fallback);return format(new ContentDisposition(type,params))}function createparams(filename,fallback){if(filename===undefined){return}var params={};if(typeof filename!=="string"){throw new TypeError("filename must be a string")}if(fallback===undefined){fallback=true}if(typeof fallback!=="string"&&typeof fallback!=="boolean"){throw new TypeError("fallback must be a string or boolean")}if(typeof fallback==="string"&&NON_LATIN1_REGEXP.test(fallback)){throw new TypeError("fallback must be ISO-8859-1 string")}var name=basename(filename);var isQuotedString=TEXT_REGEXP.test(name);var fallbackName=typeof fallback!=="string"?fallback&&getlatin1(name):basename(fallback);var hasFallback=typeof fallbackName==="string"&&fallbackName!==name;if(hasFallback||!isQuotedString||HEX_ESCAPE_REGEXP.test(name)){params["filename*"]=name}if(isQuotedString||hasFallback){params.filename=hasFallback?fallbackName:name}return params}function format(obj){var parameters=obj.parameters;var type=obj.type;if(!type||typeof type!=="string"||!TOKEN_REGEXP.test(type)){throw new TypeError("invalid type")}var string=String(type).toLowerCase();if(parameters&&typeof parameters==="object"){var param;var params=Object.keys(parameters).sort();for(var i=0;i<params.length;i++){param=params[i];var val=param.substr(-1)==="*"?ustring(parameters[param]):qstring(parameters[param]);string+="; "+param+"="+val}}return string}function decodefield(str){var match=EXT_VALUE_REGEXP.exec(str);if(!match){throw new TypeError("invalid extended field value")}var charset=match[1].toLowerCase();var encoded=match[2];var value;var binary=encoded.replace(HEX_ESCAPE_REPLACE_REGEXP,pdecode);switch(charset){case"iso-8859-1":value=getlatin1(binary);break;case"utf-8":value=new Buffer(binary,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field")}return value}function getlatin1(val){return String(val).replace(NON_LATIN1_REGEXP,"?")}function parse(string){if(!string||typeof string!=="string"){throw new TypeError("argument string is required")}var match=DISPOSITION_TYPE_REGEXP.exec(string);if(!match){throw new TypeError("invalid type format")}var index=match[0].length;var type=match[1].toLowerCase();var key;var names=[];var params={};var value;index=PARAM_REGEXP.lastIndex=match[0].substr(-1)===";"?index-1:index;while(match=PARAM_REGEXP.exec(string)){if(match.index!==index){throw new TypeError("invalid parameter format")}index+=match[0].length;key=match[1].toLowerCase();value=match[2];if(names.indexOf(key)!==-1){throw new TypeError("invalid duplicate parameter")}names.push(key);if(key.indexOf("*")+1===key.length){key=key.slice(0,-1);value=decodefield(value);params[key]=value;continue}if(typeof params[key]==="string"){continue}if(value[0]==='"'){value=value.substr(1,value.length-2).replace(QESC_REGEXP,"$1")}params[key]=value}if(index!==-1&&index!==string.length){throw new TypeError("invalid parameter format")}return new ContentDisposition(type,params)}function pdecode(str,hex){return String.fromCharCode(parseInt(hex,16))}function pencode(char){var hex=String(char).charCodeAt(0).toString(16).toUpperCase();return hex.length===1?"%0"+hex:"%"+hex}function qstring(val){var str=String(val);return'"'+str.replace(QUOTE_REGEXP,"\\$1")+'"'}function ustring(val){var str=String(val);var encoded=encodeURIComponent(str).replace(ENCODE_URL_ATTR_CHAR_REGEXP,pencode);return"UTF-8''"+encoded}function ContentDisposition(type,parameters){this.type=type;this.parameters=parameters}},{path:undefined}],258:[function(require,module,exports){"use strict";var PARAM_REGEXP=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g;var TEXT_REGEXP=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/;var TOKEN_REGEXP=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;var QESC_REGEXP=/\\([\u000b\u0020-\u00ff])/g;var QUOTE_REGEXP=/([\\"])/g;var TYPE_REGEXP=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;exports.format=format;exports.parse=parse;function format(obj){if(!obj||typeof obj!=="object"){throw new TypeError("argument obj is required")}var parameters=obj.parameters;var type=obj.type;if(!type||!TYPE_REGEXP.test(type)){throw new TypeError("invalid type")}var string=type;if(parameters&&typeof parameters==="object"){var param;var params=Object.keys(parameters).sort();for(var i=0;i<params.length;i++){param=params[i];if(!TOKEN_REGEXP.test(param)){throw new TypeError("invalid parameter name")}string+="; "+param+"="+qstring(parameters[param])}}return string}function parse(string){if(!string){throw new TypeError("argument string is required")}var header=typeof string==="object"?getcontenttype(string):string;if(typeof header!=="string"){throw new TypeError("argument string is required to be a string")}var index=header.indexOf(";");var type=index!==-1?header.substr(0,index).trim():header.trim();if(!TYPE_REGEXP.test(type)){throw new TypeError("invalid media type")}var obj=new ContentType(type.toLowerCase());if(index!==-1){var key;var match;var value;PARAM_REGEXP.lastIndex=index;while(match=PARAM_REGEXP.exec(header)){if(match.index!==index){throw new TypeError("invalid parameter format")}index+=match[0].length;key=match[1].toLowerCase();value=match[2];if(value[0]==='"'){value=value.substr(1,value.length-2).replace(QESC_REGEXP,"$1")}obj.parameters[key]=value}if(index!==header.length){throw new TypeError("invalid parameter format")}}return obj}function getcontenttype(obj){var header;if(typeof obj.getHeader==="function"){header=obj.getHeader("content-type")}else if(typeof obj.headers==="object"){header=obj.headers&&obj.headers["content-type"]}if(typeof header!=="string"){throw new TypeError("content-type header is missing from object")}return header}function qstring(val){var str=String(val);if(TOKEN_REGEXP.test(str)){return str}if(str.length>0&&!TEXT_REGEXP.test(str)){throw new TypeError("invalid parameter value")}return'"'+str.replace(QUOTE_REGEXP,"\\$1")+'"'}function ContentType(type){this.parameters=Object.create(null);this.type=type}},{}],259:[function(require,module,exports){var crypto=require("crypto");exports.sign=function(val,secret){if("string"!=typeof val)throw new TypeError("Cookie value must be provided as a string.");if("string"!=typeof secret)throw new TypeError("Secret string must be provided.");return val+"."+crypto.createHmac("sha256",secret).update(val).digest("base64").replace(/\=+$/,"")};exports.unsign=function(val,secret){if("string"!=typeof val)throw new TypeError("Signed cookie string must be provided.");if("string"!=typeof secret)throw new TypeError("Secret string must be provided.");var str=val.slice(0,val.lastIndexOf(".")),mac=exports.sign(str,secret);return sha1(mac)==sha1(val)?str:false};function sha1(str){return crypto.createHash("sha1").update(str).digest("hex")}},{crypto:undefined}],260:[function(require,module,exports){"use strict";exports.parse=parse;exports.serialize=serialize;var decode=decodeURIComponent;var encode=encodeURIComponent;var pairSplitRegExp=/; */;var fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(str,options){if(typeof str!=="string"){throw new TypeError("argument str must be a string")}var obj={};var opt=options||{};var pairs=str.split(pairSplitRegExp);var dec=opt.decode||decode;for(var i=0;i<pairs.length;i++){var pair=pairs[i];var eq_idx=pair.indexOf("=");if(eq_idx<0){continue}var key=pair.substr(0,eq_idx).trim();var val=pair.substr(++eq_idx,pair.length).trim();if('"'==val[0]){val=val.slice(1,-1)}if(undefined==obj[key]){obj[key]=tryDecode(val,dec)}}return obj}function serialize(name,val,options){var opt=options||{};var enc=opt.encode||encode;if(typeof enc!=="function"){throw new TypeError("option encode is invalid")}if(!fieldContentRegExp.test(name)){throw new TypeError("argument name is invalid")}var value=enc(val);if(value&&!fieldContentRegExp.test(value)){throw new TypeError("argument val is invalid")}var str=name+"="+value;if(null!=opt.maxAge){var maxAge=opt.maxAge-0;if(isNaN(maxAge))throw new Error("maxAge should be a Number");str+="; Max-Age="+Math.floor(maxAge)}if(opt.domain){if(!fieldContentRegExp.test(opt.domain)){throw new TypeError("option domain is invalid")}str+="; Domain="+opt.domain}if(opt.path){if(!fieldContentRegExp.test(opt.path)){throw new TypeError("option path is invalid")}str+="; Path="+opt.path}if(opt.expires){if(typeof opt.expires.toUTCString!=="function"){throw new TypeError("option expires is invalid")}str+="; Expires="+opt.expires.toUTCString()}if(opt.httpOnly){str+="; HttpOnly"}if(opt.secure){str+="; Secure"}if(opt.sameSite){var sameSite=typeof opt.sameSite==="string"?opt.sameSite.toLowerCase():opt.sameSite;switch(sameSite){case true:str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"strict":str+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return str}function tryDecode(str,decode){try{return decode(str)}catch(e){return str}}},{}],261:[function(require,module,exports){function isArray(arg){if(Array.isArray){return Array.isArray(arg)}return objectToString(arg)==="[object Array]"}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return objectToString(e)==="[object Error]"||e instanceof Error}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}},{}],262:[function(require,module,exports){"use strict";const Crypto=require("crypto");const Boom=require("boom");const internals={};exports.randomString=function(size){const buffer=exports.randomBits((size+1)*6);if(buffer instanceof Error){return buffer}const string=buffer.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return string.slice(0,size)};exports.randomDigits=function(size){const buffer=exports.randomBits(size*8);if(buffer instanceof Error){return buffer}const digits=[];for(let i=0;i<buffer.length;++i){digits.push(Math.floor(buffer[i]/25.6))}return digits.join("")};exports.randomBits=function(bits){if(!bits||bits<0){return Boom.internal("Invalid random bits count")}const bytes=Math.ceil(bits/8);try{return Crypto.randomBytes(bytes)}catch(err){return Boom.internal("Failed generating random bits: "+err.message)}};exports.fixedTimeComparison=function(a,b){if(typeof a!=="string"||typeof b!=="string"){return false}let mismatch=a.length===b.length?0:1;if(mismatch){b=a}for(let i=0;i<a.length;++i){const ac=a.charCodeAt(i);const bc=b.charCodeAt(i);mismatch|=ac^bc}return mismatch===0}},{boom:263,crypto:undefined}],263:[function(require,module,exports){"use strict";const Hoek=require("hoek");const internals={STATUS_CODES:Object.setPrototypeOf({100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},null)};exports.boomify=function(error,options){Hoek.assert(error instanceof Error,"Cannot wrap non-Error object");options=options||{};if(!error.isBoom){return internals.initialize(error,options.statusCode||500,options.message)}if(options.override===false||!options.statusCode&&!options.message){return error}return internals.initialize(error,options.statusCode||error.output.statusCode,options.message)};exports.wrap=function(error,statusCode,message){Hoek.assert(error instanceof Error,"Cannot wrap non-Error object");Hoek.assert(!error.isBoom||!statusCode&&!message,"Cannot provide statusCode or message with boom error");return error.isBoom?error:internals.initialize(error,statusCode||500,message)};exports.create=function(statusCode,message,data){return internals.create(statusCode,message,data,exports.create)};internals.create=function(statusCode,message,data,ctor){if(message instanceof Error){if(data){message.data=data}return exports.wrap(message,statusCode)}const error=new Error(message?message:undefined);Error.captureStackTrace(error,ctor);error.data=data||null;internals.initialize(error,statusCode);error.typeof=ctor;return error};internals.initialize=function(error,statusCode,message){const numberCode=parseInt(statusCode,10);Hoek.assert(!isNaN(numberCode)&&numberCode>=400,"First argument must be a number (400+):",statusCode);error.isBoom=true;error.isServer=numberCode>=500;if(!error.hasOwnProperty("data")){error.data=null}error.output={statusCode:numberCode,payload:{},headers:{}};error.reformat=internals.reformat;if(!message&&!error.message){error.reformat();message=error.output.payload.error}if(message){error.message=message+(error.message?": "+error.message:"");error.output.payload.message=error.message}error.reformat();return error};internals.reformat=function(){this.output.payload.statusCode=this.output.statusCode;this.output.payload.error=internals.STATUS_CODES[this.output.statusCode]||"Unknown";if(this.output.statusCode===500){this.output.payload.message="An internal server error occurred"}else if(this.message){this.output.payload.message=this.message}};exports.badRequest=function(message,data){return internals.create(400,message,data,exports.badRequest)};exports.unauthorized=function(message,scheme,attributes){const err=internals.create(401,message,undefined,exports.unauthorized);if(!scheme){return err}let wwwAuthenticate="";if(typeof scheme==="string"){wwwAuthenticate=scheme;if(attributes||message){err.output.payload.attributes={}}if(attributes){if(typeof attributes==="string"){wwwAuthenticate=wwwAuthenticate+" "+Hoek.escapeHeaderAttribute(attributes);err.output.payload.attributes=attributes}else{const names=Object.keys(attributes);for(let i=0;i<names.length;++i){const name=names[i];if(i){wwwAuthenticate=wwwAuthenticate+","}let value=attributes[name];if(value===null||value===undefined){value=""}wwwAuthenticate=wwwAuthenticate+" "+name+'="'+Hoek.escapeHeaderAttribute(value.toString())+'"';err.output.payload.attributes[name]=value}}}if(message){if(attributes){wwwAuthenticate=wwwAuthenticate+","}wwwAuthenticate=wwwAuthenticate+' error="'+Hoek.escapeHeaderAttribute(message)+'"';err.output.payload.attributes.error=message}else{err.isMissing=true}}else{const wwwArray=scheme;for(let i=0;i<wwwArray.length;++i){if(i){wwwAuthenticate=wwwAuthenticate+", "}wwwAuthenticate=wwwAuthenticate+wwwArray[i]}}err.output.headers["WWW-Authenticate"]=wwwAuthenticate;return err};exports.paymentRequired=function(message,data){return internals.create(402,message,data,exports.paymentRequired)};exports.forbidden=function(message,data){return internals.create(403,message,data,exports.forbidden)};exports.notFound=function(message,data){return internals.create(404,message,data,exports.notFound)};exports.methodNotAllowed=function(message,data,allow){const err=internals.create(405,message,data,exports.methodNotAllowed);if(typeof allow==="string"){allow=[allow]}if(Array.isArray(allow)){err.output.headers.Allow=allow.join(", ")}return err};exports.notAcceptable=function(message,data){return internals.create(406,message,data,exports.notAcceptable)};exports.proxyAuthRequired=function(message,data){return internals.create(407,message,data,exports.proxyAuthRequired)};exports.clientTimeout=function(message,data){return internals.create(408,message,data,exports.clientTimeout)};exports.conflict=function(message,data){return internals.create(409,message,data,exports.conflict)};exports.resourceGone=function(message,data){return internals.create(410,message,data,exports.resourceGone)};exports.lengthRequired=function(message,data){return internals.create(411,message,data,exports.lengthRequired)};exports.preconditionFailed=function(message,data){return internals.create(412,message,data,exports.preconditionFailed)};exports.entityTooLarge=function(message,data){return internals.create(413,message,data,exports.entityTooLarge)};exports.uriTooLong=function(message,data){return internals.create(414,message,data,exports.uriTooLong)};exports.unsupportedMediaType=function(message,data){return internals.create(415,message,data,exports.unsupportedMediaType)};exports.rangeNotSatisfiable=function(message,data){return internals.create(416,message,data,exports.rangeNotSatisfiable)};exports.expectationFailed=function(message,data){return internals.create(417,message,data,exports.expectationFailed)};exports.teapot=function(message,data){return internals.create(418,message,data,exports.teapot)};exports.badData=function(message,data){return internals.create(422,message,data,exports.badData)};exports.locked=function(message,data){return internals.create(423,message,data,exports.locked)};exports.preconditionRequired=function(message,data){return internals.create(428,message,data,exports.preconditionRequired)};exports.tooManyRequests=function(message,data){return internals.create(429,message,data,exports.tooManyRequests)};exports.illegal=function(message,data){return internals.create(451,message,data,exports.illegal)};exports.internal=function(message,data,statusCode){return internals.serverError(message,data,statusCode,exports.internal)};internals.serverError=function(message,data,statusCode,ctor){if(data instanceof Error&&!data.isBoom){return exports.wrap(data,statusCode,message)}const error=internals.create(statusCode||500,message,undefined,ctor);error.data=data;return error};exports.notImplemented=function(message,data){return internals.serverError(message,data,501,exports.notImplemented)};exports.badGateway=function(message,data){return internals.serverError(message,data,502,exports.badGateway)};exports.serverUnavailable=function(message,data){return internals.serverError(message,data,503,exports.serverUnavailable)};exports.gatewayTimeout=function(message,data){return internals.serverError(message,data,504,exports.gatewayTimeout)};exports.badImplementation=function(message,data){const err=internals.serverError(message,data,500,exports.badImplementation);err.isDeveloperError=true;return err}},{hoek:356}],264:[function(require,module,exports){module.exports=function(css){while((open=css.indexOf("/*"))!==-1&&(close=css.indexOf("*/"))!==-1){css=css.substring(0,open)+css.substring(close+2)}var json={};while(css.length>0){var lbracket=css.indexOf("{");var rbracket=css.indexOf("}");function toObject(array){var ret={};array.forEach(function(elm){var index=elm.indexOf(":");var property=elm.substring(0,index).trim();var value=elm.substring(index+1).trim();ret[property]=value});return ret}var declarations=css.substring(lbracket+1,rbracket).split(";").map(function(declaration){return declaration.trim()}).filter(function(declaration){return declaration.length>0});declarations=toObject(declarations);var selectors=css.substring(0,lbracket).split(",").map(function(selector){return selector.trim()});selectors.forEach(function(selector){if(!json[selector])json[selector]={};Object.keys(declarations).forEach(function(key){json[selector][key]=declarations[key]})});css=css.slice(rbracket+1).trim()}return json}},{}],265:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":266}],266:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.instances=[];exports.names=[];exports.skips=[];exports.formatters={};function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){var prevTime;function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);debug.destroy=destroy;if("function"===typeof exports.init){exports.init(debug)}exports.instances.push(debug);return debug}function destroy(){var index=exports.instances.indexOf(this);if(index!==-1){exports.instances.splice(index,1);return true}else{return false}}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var i;var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}for(i=0;i<exports.instances.length;i++){var instance=exports.instances[i];instance.enabled=exports.enabled(instance.namespace)}}function disable(){exports.enable("")}function enabled(name){if(name[name.length-1]==="*"){return true}var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:439}],267:[function(require,module,exports){if(typeof process==="undefined"||process.type==="renderer"){module.exports=require("./browser.js")}else{module.exports=require("./node.js")}},{"./browser.js":265,"./node.js":268}],268:[function(require,module,exports){var tty=require("tty");var util=require("util");exports=module.exports=require("./debug");exports.init=init;exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=[6,2,3,4,5,1];try{var supportsColor=require("supports-color");if(supportsColor&&supportsColor.level>=2){exports.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(err){}exports.inspectOpts=Object.keys(process.env).filter(function(key){return/^debug_/i.test(key)}).reduce(function(obj,key){var prop=key.substring(6).toLowerCase().replace(/_([a-z])/g,function(_,k){return k.toUpperCase()});var val=process.env[key];if(/^(yes|on|true|enabled)$/i.test(val))val=true;else if(/^(no|off|false|disabled)$/i.test(val))val=false;else if(val==="null")val=null;else val=Number(val);obj[prop]=val;return obj},{});function useColors(){return"colors"in exports.inspectOpts?Boolean(exports.inspectOpts.colors):tty.isatty(process.stderr.fd)}exports.formatters.o=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts).split("\n").map(function(str){return str.trim()}).join(" ")};exports.formatters.O=function(v){this.inspectOpts.colors=this.useColors;return util.inspect(v,this.inspectOpts)};function formatArgs(args){var name=this.namespace;var useColors=this.useColors;if(useColors){var c=this.color;var colorCode="[3"+(c<8?c:"8;5;"+c);var prefix="  "+colorCode+";1m"+name+" "+"[0m";args[0]=prefix+args[0].split("\n").join("\n"+prefix);args.push(colorCode+"m+"+exports.humanize(this.diff)+"[0m")}else{args[0]=getDate()+name+" "+args[0]}}function getDate(){if(exports.inspectOpts.hideDate){return""}else{return(new Date).toISOString()+" "}}function log(){return process.stderr.write(util.format.apply(util,arguments)+"\n")}function save(namespaces){if(null==namespaces){delete process.env.DEBUG}else{process.env.DEBUG=namespaces}}function load(){return process.env.DEBUG}function init(debug){debug.inspectOpts={};var keys=Object.keys(exports.inspectOpts);for(var i=0;i<keys.length;i++){debug.inspectOpts[keys[i]]=exports.inspectOpts[keys[i]]}}exports.enable(load())},{"./debug":266,"supports-color":521,tty:undefined,util:undefined}],269:[function(require,module,exports){var Stream=require("stream").Stream;var util=require("util");module.exports=DelayedStream;function DelayedStream(){this.source=null;this.dataSize=0;this.maxDataSize=1024*1024;this.pauseStream=true;this._maxDataSizeExceeded=false;this._released=false;this._bufferedEvents=[]}util.inherits(DelayedStream,Stream);DelayedStream.create=function(source,options){var delayedStream=new this;options=options||{};for(var option in options){delayedStream[option]=options[option]}delayedStream.source=source;var realEmit=source.emit;source.emit=function(){delayedStream._handleEmit(arguments);return realEmit.apply(source,arguments)};source.on("error",function(){});if(delayedStream.pauseStream){source.pause()}return delayedStream};Object.defineProperty(DelayedStream.prototype,"readable",{configurable:true,enumerable:true,get:function(){return this.source.readable}});DelayedStream.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};DelayedStream.prototype.resume=function(){if(!this._released){this.release()}this.source.resume()};DelayedStream.prototype.pause=function(){this.source.pause()};DelayedStream.prototype.release=function(){this._released=true;this._bufferedEvents.forEach(function(args){this.emit.apply(this,args)}.bind(this));this._bufferedEvents=[]};DelayedStream.prototype.pipe=function(){var r=Stream.prototype.pipe.apply(this,arguments);this.resume();return r};DelayedStream.prototype._handleEmit=function(args){if(this._released){this.emit.apply(this,args);return}if(args[0]==="data"){this.dataSize+=args[1].length;this._checkIfMaxDataSizeExceeded()}this._bufferedEvents.push(args)};DelayedStream.prototype._checkIfMaxDataSizeExceeded=function(){if(this._maxDataSizeExceeded){return}if(this.dataSize<=this.maxDataSize){return}this._maxDataSizeExceeded=true;var message="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(message))}},{stream:undefined,util:undefined}],270:[function(require,module,exports){var callSiteToString=require("./lib/compat").callSiteToString;var eventListenerCount=require("./lib/compat").eventListenerCount;var relative=require("path").relative;module.exports=depd;var basePath=process.cwd();function containsNamespace(str,namespace){var val=str.split(/[ ,]+/);namespace=String(namespace).toLowerCase();for(var i=0;i<val.length;i++){if(!(str=val[i]))continue;if(str==="*"||str.toLowerCase()===namespace){return true}}return false}function convertDataDescriptorToAccessor(obj,prop,message){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);var value=descriptor.value;descriptor.get=function getter(){return value};if(descriptor.writable){descriptor.set=function setter(val){return value=val}}delete descriptor.value;delete descriptor.writable;Object.defineProperty(obj,prop,descriptor);return descriptor}function createArgumentsString(arity){var str="";for(var i=0;i<arity;i++){str+=", arg"+i}return str.substr(2)}function createStackString(stack){var str=this.name+": "+this.namespace;if(this.message){str+=" deprecated "+this.message}for(var i=0;i<stack.length;i++){str+="\n    at "+callSiteToString(stack[i])}return str}function depd(namespace){if(!namespace){throw new TypeError("argument namespace is required")}var stack=getStack();var site=callSiteLocation(stack[1]);var file=site[0];function deprecate(message){log.call(deprecate,message)}deprecate._file=file;deprecate._ignored=isignored(namespace);deprecate._namespace=namespace;deprecate._traced=istraced(namespace);deprecate._warned=Object.create(null);deprecate.function=wrapfunction;deprecate.property=wrapproperty;return deprecate}function isignored(namespace){if(process.noDeprecation){return true}var str=process.env.NO_DEPRECATION||"";return containsNamespace(str,namespace)}function istraced(namespace){if(process.traceDeprecation){return true}var str=process.env.TRACE_DEPRECATION||"";return containsNamespace(str,namespace)}function log(message,site){var haslisteners=eventListenerCount(process,"deprecation")!==0;if(!haslisteners&&this._ignored){return}var caller;var callFile;var callSite;var i=0;var seen=false;var stack=getStack();var file=this._file;if(site){callSite=callSiteLocation(stack[1]);callSite.name=site.name;file=callSite[0]}else{i=2;site=callSiteLocation(stack[i]);callSite=site}for(;i<stack.length;i++){caller=callSiteLocation(stack[i]);callFile=caller[0];if(callFile===file){seen=true}else if(callFile===this._file){file=this._file}else if(seen){break}}var key=caller?site.join(":")+"__"+caller.join(":"):undefined;if(key!==undefined&&key in this._warned){return}this._warned[key]=true;if(!message){message=callSite===site||!callSite.name?defaultMessage(site):defaultMessage(callSite)}if(haslisteners){var err=DeprecationError(this._namespace,message,stack.slice(i));process.emit("deprecation",err);return}var format=process.stderr.isTTY?formatColor:formatPlain;var msg=format.call(this,message,caller,stack.slice(i));process.stderr.write(msg+"\n","utf8")}function callSiteLocation(callSite){var file=callSite.getFileName()||"<anonymous>";var line=callSite.getLineNumber();var colm=callSite.getColumnNumber();if(callSite.isEval()){file=callSite.getEvalOrigin()+", "+file}var site=[file,line,colm];site.callSite=callSite;site.name=callSite.getFunctionName();return site}function defaultMessage(site){var callSite=site.callSite;var funcName=site.name;if(!funcName){funcName="<anonymous@"+formatLocation(site)+">"}var context=callSite.getThis();var typeName=context&&callSite.getTypeName();if(typeName==="Object"){typeName=undefined}if(typeName==="Function"){typeName=context.name||typeName}return typeName&&callSite.getMethodName()?typeName+"."+funcName:funcName}function formatPlain(msg,caller,stack){var timestamp=(new Date).toUTCString();var formatted=timestamp+" "+this._namespace+" deprecated "+msg;if(this._traced){for(var i=0;i<stack.length;i++){formatted+="\n    at "+callSiteToString(stack[i])}return formatted}if(caller){formatted+=" at "+formatLocation(caller)}return formatted}function formatColor(msg,caller,stack){var formatted="[36;1m"+this._namespace+"[22;39m"+" [33;1mdeprecated[22;39m"+" [0m"+msg+"[39m";if(this._traced){for(var i=0;i<stack.length;i++){formatted+="\n    [36mat "+callSiteToString(stack[i])+"[39m"}return formatted}if(caller){formatted+=" [36m"+formatLocation(caller)+"[39m"}return formatted}function formatLocation(callSite){return relative(basePath,callSite[0])+":"+callSite[1]+":"+callSite[2]}function getStack(){var limit=Error.stackTraceLimit;var obj={};var prep=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace;Error.stackTraceLimit=Math.max(10,limit);Error.captureStackTrace(obj);var stack=obj.stack.slice(1);Error.prepareStackTrace=prep;Error.stackTraceLimit=limit;return stack}function prepareObjectStackTrace(obj,stack){return stack}function wrapfunction(fn,message){if(typeof fn!=="function"){throw new TypeError("argument fn must be a function")}var args=createArgumentsString(fn.length);var deprecate=this;var stack=getStack();var site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval("(function ("+args+") {\n"+'"use strict"\n'+"log.call(deprecate, message, site)\n"+"return fn.apply(this, arguments)\n"+"})");return deprecatedfn}function wrapproperty(obj,prop,message){if(!obj||typeof obj!=="object"&&typeof obj!=="function"){throw new TypeError("argument obj must be object")}var descriptor=Object.getOwnPropertyDescriptor(obj,prop);if(!descriptor){throw new TypeError("must call property on owner object")}if(!descriptor.configurable){throw new TypeError("property must be configurable")}var deprecate=this;var stack=getStack();var site=callSiteLocation(stack[1]);site.name=prop;if("value"in descriptor){descriptor=convertDataDescriptorToAccessor(obj,prop,message)}var get=descriptor.get;var set=descriptor.set;if(typeof get==="function"){descriptor.get=function getter(){log.call(deprecate,message,site);return get.apply(this,arguments)}}if(typeof set==="function"){descriptor.set=function setter(){log.call(deprecate,message,site);return set.apply(this,arguments)}}Object.defineProperty(obj,prop,descriptor)}function DeprecationError(namespace,message,stack){var error=new Error;var stackString;Object.defineProperty(error,"constructor",{value:DeprecationError});Object.defineProperty(error,"message",{configurable:true,enumerable:false,value:message,writable:true});Object.defineProperty(error,"name",{enumerable:false,configurable:true,value:"DeprecationError",writable:true});Object.defineProperty(error,"namespace",{configurable:true,enumerable:false,value:namespace,writable:true});Object.defineProperty(error,"stack",{configurable:true,enumerable:false,get:function(){if(stackString!==undefined){return stackString}return stackString=createStackString.call(this,stack)},set:function setter(val){stackString=val}});return error}},{"./lib/compat":273,path:undefined}],271:[function(require,module,exports){"use strict";module.exports=callSiteToString;function callSiteFileLocation(callSite){var fileName;var fileLocation="";if(callSite.isNative()){fileLocation="native"}else if(callSite.isEval()){fileName=callSite.getScriptNameOrSourceURL();if(!fileName){fileLocation=callSite.getEvalOrigin()}}else{fileName=callSite.getFileName()}if(fileName){fileLocation+=fileName;var lineNumber=callSite.getLineNumber();if(lineNumber!=null){fileLocation+=":"+lineNumber;var columnNumber=callSite.getColumnNumber();if(columnNumber){fileLocation+=":"+columnNumber}}}return fileLocation||"unknown source"}function callSiteToString(callSite){var addSuffix=true;var fileLocation=callSiteFileLocation(callSite);var functionName=callSite.getFunctionName();var isConstructor=callSite.isConstructor();var isMethodCall=!(callSite.isToplevel()||isConstructor);var line="";if(isMethodCall){var methodName=callSite.getMethodName();var typeName=getConstructorName(callSite);if(functionName){if(typeName&&functionName.indexOf(typeName)!==0){line+=typeName+"."}line+=functionName;if(methodName&&functionName.lastIndexOf("."+methodName)!==functionName.length-methodName.length-1){line+=" [as "+methodName+"]"}}else{line+=typeName+"."+(methodName||"<anonymous>")}}else if(isConstructor){line+="new "+(functionName||"<anonymous>")}else if(functionName){line+=functionName}else{addSuffix=false;line+=fileLocation}if(addSuffix){line+=" ("+fileLocation+")"}return line}function getConstructorName(obj){var receiver=obj.receiver;return receiver.constructor&&receiver.constructor.name||null}},{}],272:[function(require,module,exports){"use strict";module.exports=eventListenerCount;function eventListenerCount(emitter,type){return emitter.listeners(type).length}},{}],273:[function(require,module,exports){"use strict";var EventEmitter=require("events").EventEmitter;lazyProperty(module.exports,"callSiteToString",function callSiteToString(){var limit=Error.stackTraceLimit;var obj={};var prep=Error.prepareStackTrace;function prepareObjectStackTrace(obj,stack){return stack}Error.prepareStackTrace=prepareObjectStackTrace;Error.stackTraceLimit=2;Error.captureStackTrace(obj);var stack=obj.stack.slice();Error.prepareStackTrace=prep;Error.stackTraceLimit=limit;return stack[0].toString?toString:require("./callsite-tostring")});lazyProperty(module.exports,"eventListenerCount",function eventListenerCount(){return EventEmitter.listenerCount||require("./event-listener-count")});function lazyProperty(obj,prop,getter){function get(){var val=getter();Object.defineProperty(obj,prop,{configurable:true,enumerable:true,value:val});return val}Object.defineProperty(obj,prop,{configurable:true,enumerable:true,get:get})}function toString(obj){return obj.toString()}},{"./callsite-tostring":271,"./event-listener-count":272,events:undefined}],274:[function(require,module,exports){"use strict";var ReadStream=require("fs").ReadStream;var Stream=require("stream");module.exports=destroy;function destroy(stream){if(stream instanceof ReadStream){return destroyReadStream(stream)}if(!(stream instanceof Stream)){return stream}if(typeof stream.destroy==="function"){stream.destroy()}return stream}function destroyReadStream(stream){stream.destroy();if(typeof stream.close==="function"){stream.on("open",onOpenClose)}return stream}function onOpenClose(){if(typeof this.fd==="number"){this.close()}}},{fs:undefined,stream:undefined}],275:[function(require,module,exports){var crypto=require("crypto");var BigInteger=require("jsbn").BigInteger;var ECPointFp=require("./lib/ec.js").ECPointFp;exports.ECCurves=require("./lib/sec.js");function unstupid(hex,len){return hex.length>=len?hex:unstupid("0"+hex,len)}exports.ECKey=function(curve,key,isPublic){var priv;var c=curve();var n=c.getN();var bytes=Math.floor(n.bitLength()/8);if(key){if(isPublic){var curve=c.getCurve();this.P=curve.decodePointHex(key.toString("hex"))}else{if(key.length!=bytes)return false;priv=new BigInteger(key.toString("hex"),16)}}else{var n1=n.subtract(BigInteger.ONE);var r=new BigInteger(crypto.randomBytes(n.bitLength()));priv=r.mod(n1).add(BigInteger.ONE);this.P=c.getG().multiply(priv)}if(this.P){this.PublicKey=new Buffer(c.getCurve().encodeCompressedPointHex(this.P),"hex")}if(priv){this.PrivateKey=new Buffer(unstupid(priv.toString(16),bytes*2),"hex");this.deriveSharedSecret=function(key){if(!key||!key.P)return false;var S=key.P.multiply(priv);return new Buffer(unstupid(S.getX().toBigInteger().toString(16),bytes*2),"hex")}}}},{"./lib/ec.js":276,"./lib/sec.js":277,crypto:undefined,jsbn:405}],276:[function(require,module,exports){var BigInteger=require("jsbn").BigInteger;var Barrett=BigInteger.prototype.Barrett;function ECFieldElementFp(q,x){this.x=x;this.q=q}function feFpEquals(other){if(other==this)return true;return this.q.equals(other.q)&&this.x.equals(other.x)}function feFpToBigInteger(){return this.x}function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))}function feFpAdd(b){return new ECFieldElementFp(this.q,this.x.add(b.toBigInteger()).mod(this.q))}function feFpSubtract(b){return new ECFieldElementFp(this.q,this.x.subtract(b.toBigInteger()).mod(this.q))}function feFpMultiply(b){return new ECFieldElementFp(this.q,this.x.multiply(b.toBigInteger()).mod(this.q))}function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))}function feFpDivide(b){return new ECFieldElementFp(this.q,this.x.multiply(b.toBigInteger().modInverse(this.q)).mod(this.q))}ECFieldElementFp.prototype.equals=feFpEquals;ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger;ECFieldElementFp.prototype.negate=feFpNegate;ECFieldElementFp.prototype.add=feFpAdd;ECFieldElementFp.prototype.subtract=feFpSubtract;ECFieldElementFp.prototype.multiply=feFpMultiply;ECFieldElementFp.prototype.square=feFpSquare;ECFieldElementFp.prototype.divide=feFpDivide;function ECPointFp(curve,x,y,z){this.curve=curve;this.x=x;this.y=y;if(z==null){this.z=BigInteger.ONE}else{this.z=z}this.zinv=null}function pointFpGetX(){if(this.zinv==null){this.zinv=this.z.modInverse(this.curve.q)}var r=this.x.toBigInteger().multiply(this.zinv);this.curve.reduce(r);return this.curve.fromBigInteger(r)}function pointFpGetY(){if(this.zinv==null){this.zinv=this.z.modInverse(this.curve.q)}var r=this.y.toBigInteger().multiply(this.zinv);this.curve.reduce(r);return this.curve.fromBigInteger(r)}function pointFpEquals(other){if(other==this)return true;if(this.isInfinity())return other.isInfinity();if(other.isInfinity())return this.isInfinity();var u,v;u=other.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(other.z)).mod(this.curve.q);if(!u.equals(BigInteger.ZERO))return false;v=other.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(other.z)).mod(this.curve.q);return v.equals(BigInteger.ZERO)}function pointFpIsInfinity(){if(this.x==null&&this.y==null)return true;return this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO)}function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)}function pointFpAdd(b){if(this.isInfinity())return b;if(b.isInfinity())return this;var u=b.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(b.z)).mod(this.curve.q);var v=b.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(b.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(v)){if(BigInteger.ZERO.equals(u)){return this.twice()}return this.curve.getInfinity()}var THREE=new BigInteger("3");var x1=this.x.toBigInteger();var y1=this.y.toBigInteger();var x2=b.x.toBigInteger();var y2=b.y.toBigInteger();var v2=v.square();var v3=v2.multiply(v);var x1v2=x1.multiply(v2);var zu2=u.square().multiply(this.z);var x3=zu2.subtract(x1v2.shiftLeft(1)).multiply(b.z).subtract(v3).multiply(v).mod(this.curve.q);var y3=x1v2.multiply(THREE).multiply(u).subtract(y1.multiply(v3)).subtract(zu2.multiply(u)).multiply(b.z).add(u.multiply(v3)).mod(this.curve.q);var z3=v3.multiply(this.z).multiply(b.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(x3),this.curve.fromBigInteger(y3),z3)}function pointFpTwice(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var THREE=new BigInteger("3");var x1=this.x.toBigInteger();var y1=this.y.toBigInteger();var y1z1=y1.multiply(this.z);var y1sqz1=y1z1.multiply(y1).mod(this.curve.q);var a=this.curve.a.toBigInteger();var w=x1.square().multiply(THREE);if(!BigInteger.ZERO.equals(a)){w=w.add(this.z.square().multiply(a))}w=w.mod(this.curve.q);var x3=w.square().subtract(x1.shiftLeft(3).multiply(y1sqz1)).shiftLeft(1).multiply(y1z1).mod(this.curve.q);var y3=w.multiply(THREE).multiply(x1).subtract(y1sqz1.shiftLeft(1)).shiftLeft(2).multiply(y1sqz1).subtract(w.square().multiply(w)).mod(this.curve.q);var z3=y1z1.square().multiply(y1z1).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(x3),this.curve.fromBigInteger(y3),z3)}function pointFpMultiply(k){if(this.isInfinity())return this;if(k.signum()==0)return this.curve.getInfinity();var e=k;var h=e.multiply(new BigInteger("3"));var neg=this.negate();var R=this;var i;for(i=h.bitLength()-2;i>0;--i){R=R.twice();var hBit=h.testBit(i);var eBit=e.testBit(i);if(hBit!=eBit){R=R.add(hBit?this:neg)}}return R}function pointFpMultiplyTwo(j,x,k){var i;if(j.bitLength()>k.bitLength())i=j.bitLength()-1;else i=k.bitLength()-1;var R=this.curve.getInfinity();var both=this.add(x);while(i>=0){R=R.twice();if(j.testBit(i)){if(k.testBit(i)){R=R.add(both)}else{R=R.add(this)}}else{if(k.testBit(i)){R=R.add(x)}}--i}return R}ECPointFp.prototype.getX=pointFpGetX;ECPointFp.prototype.getY=pointFpGetY;ECPointFp.prototype.equals=pointFpEquals;ECPointFp.prototype.isInfinity=pointFpIsInfinity;ECPointFp.prototype.negate=pointFpNegate;ECPointFp.prototype.add=pointFpAdd;ECPointFp.prototype.twice=pointFpTwice;ECPointFp.prototype.multiply=pointFpMultiply;ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo;function ECCurveFp(q,a,b){this.q=q;this.a=this.fromBigInteger(a);this.b=this.fromBigInteger(b);this.infinity=new ECPointFp(this,null,null);this.reducer=new Barrett(this.q)}function curveFpGetQ(){return this.q}function curveFpGetA(){return this.a}function curveFpGetB(){return this.b}function curveFpEquals(other){if(other==this)return true;return this.q.equals(other.q)&&this.a.equals(other.a)&&this.b.equals(other.b)}function curveFpGetInfinity(){return this.infinity}function curveFpFromBigInteger(x){return new ECFieldElementFp(this.q,x)}function curveReduce(x){this.reducer.reduce(x)}function curveFpDecodePointHex(s){switch(parseInt(s.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var len=(s.length-2)/2;var xHex=s.substr(2,len);var yHex=s.substr(len+2,len);return new ECPointFp(this,this.fromBigInteger(new BigInteger(xHex,16)),this.fromBigInteger(new BigInteger(yHex,16)));default:return null}}function curveFpEncodePointHex(p){if(p.isInfinity())return"00";var xHex=p.getX().toBigInteger().toString(16);var yHex=p.getY().toBigInteger().toString(16);var oLen=this.getQ().toString(16).length;if(oLen%2!=0)oLen++;while(xHex.length<oLen){xHex="0"+xHex}while(yHex.length<oLen){yHex="0"+yHex}return"04"+xHex+yHex}ECCurveFp.prototype.getQ=curveFpGetQ;ECCurveFp.prototype.getA=curveFpGetA;ECCurveFp.prototype.getB=curveFpGetB;ECCurveFp.prototype.equals=curveFpEquals;ECCurveFp.prototype.getInfinity=curveFpGetInfinity;ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger;ECCurveFp.prototype.reduce=curveReduce;ECCurveFp.prototype.encodePointHex=curveFpEncodePointHex;ECCurveFp.prototype.decodePointHex=function(s){var yIsEven;switch(parseInt(s.substr(0,2),16)){case 0:return this.infinity;case 2:yIsEven=false;case 3:if(yIsEven==undefined)yIsEven=true;var len=s.length-2;var xHex=s.substr(2,len);var x=this.fromBigInteger(new BigInteger(xHex,16));var alpha=x.multiply(x.square().add(this.getA())).add(this.getB());var beta=alpha.sqrt();if(beta==null)throw"Invalid point compression";var betaValue=beta.toBigInteger();if(betaValue.testBit(0)!=yIsEven){beta=this.fromBigInteger(this.getQ().subtract(betaValue))}return new ECPointFp(this,x,beta);case 4:case 6:case 7:var len=(s.length-2)/2;var xHex=s.substr(2,len);var yHex=s.substr(len+2,len);return new ECPointFp(this,this.fromBigInteger(new BigInteger(xHex,16)),this.fromBigInteger(new BigInteger(yHex,16)));default:return null}};ECCurveFp.prototype.encodeCompressedPointHex=function(p){if(p.isInfinity())return"00";var xHex=p.getX().toBigInteger().toString(16);var oLen=this.getQ().toString(16).length;if(oLen%2!=0)oLen++;while(xHex.length<oLen)xHex="0"+xHex;var yPrefix;if(p.getY().toBigInteger().isEven())yPrefix="02";else yPrefix="03";return yPrefix+xHex};ECFieldElementFp.prototype.getR=function(){if(this.r!=undefined)return this.r;this.r=null;var bitLength=this.q.bitLength();if(bitLength>128){var firstWord=this.q.shiftRight(bitLength-64);if(firstWord.intValue()==-1){this.r=BigInteger.ONE.shiftLeft(bitLength).subtract(this.q)}}return this.r};ECFieldElementFp.prototype.modMult=function(x1,x2){return this.modReduce(x1.multiply(x2))};ECFieldElementFp.prototype.modReduce=function(x){if(this.getR()!=null){var qLen=q.bitLength();while(x.bitLength()>qLen+1){var u=x.shiftRight(qLen);var v=x.subtract(u.shiftLeft(qLen));if(!this.getR().equals(BigInteger.ONE)){u=u.multiply(this.getR())}x=u.add(v)}while(x.compareTo(q)>=0){x=x.subtract(q)}}else{x=x.mod(q)}return x};ECFieldElementFp.prototype.sqrt=function(){if(!this.q.testBit(0))throw"unsupported";if(this.q.testBit(1)){var z=new ECFieldElementFp(this.q,this.x.modPow(this.q.shiftRight(2).add(BigInteger.ONE),this.q));return z.square().equals(this)?z:null}var qMinusOne=this.q.subtract(BigInteger.ONE);var legendreExponent=qMinusOne.shiftRight(1);if(!this.x.modPow(legendreExponent,this.q).equals(BigInteger.ONE)){return null}var u=qMinusOne.shiftRight(2);var k=u.shiftLeft(1).add(BigInteger.ONE);var Q=this.x;var fourQ=modDouble(modDouble(Q));var U,V;do{var P;do{P=new BigInteger(this.q.bitLength(),new SecureRandom)}while(P.compareTo(this.q)>=0||!P.multiply(P).subtract(fourQ).modPow(legendreExponent,this.q).equals(qMinusOne));var result=this.lucasSequence(P,Q,k);U=result[0];V=result[1];if(this.modMult(V,V).equals(fourQ)){if(V.testBit(0)){V=V.add(q)}V=V.shiftRight(1);return new ECFieldElementFp(q,V)}}while(U.equals(BigInteger.ONE)||U.equals(qMinusOne));return null};ECFieldElementFp.prototype.lucasSequence=function(P,Q,k){var n=k.bitLength();var s=k.getLowestSetBit();var Uh=BigInteger.ONE;var Vl=BigInteger.TWO;var Vh=P;var Ql=BigInteger.ONE;var Qh=BigInteger.ONE;for(var j=n-1;j>=s+1;--j){Ql=this.modMult(Ql,Qh);if(k.testBit(j)){Qh=this.modMult(Ql,Q);Uh=this.modMult(Uh,Vh);Vl=this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));Vh=this.modReduce(Vh.multiply(Vh).subtract(Qh.shiftLeft(1)))}else{Qh=Ql;Uh=this.modReduce(Uh.multiply(Vl).subtract(Ql));Vh=this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));Vl=this.modReduce(Vl.multiply(Vl).subtract(Ql.shiftLeft(1)))}}Ql=this.modMult(Ql,Qh);Qh=this.modMult(Ql,Q);Uh=this.modReduce(Uh.multiply(Vl).subtract(Ql));Vl=this.modReduce(Vh.multiply(Vl).subtract(P.multiply(Ql)));Ql=this.modMult(Ql,Qh);for(var j=1;j<=s;++j){Uh=this.modMult(Uh,Vl);Vl=this.modReduce(Vl.multiply(Vl).subtract(Ql.shiftLeft(1)));Ql=this.modMult(Ql,Ql)}return[Uh,Vl]};var exports={ECCurveFp:ECCurveFp,ECPointFp:ECPointFp,ECFieldElementFp:ECFieldElementFp};module.exports=exports},{jsbn:405}],277:[function(require,module,exports){var BigInteger=require("jsbn").BigInteger;var ECCurveFp=require("./ec.js").ECCurveFp;function X9ECParameters(curve,g,n,h){this.curve=curve;this.g=g;this.n=n;this.h=h}function x9getCurve(){return this.curve}function x9getG(){return this.g}function x9getN(){return this.n}function x9getH(){return this.h}X9ECParameters.prototype.getCurve=x9getCurve;X9ECParameters.prototype.getG=x9getG;X9ECParameters.prototype.getN=x9getN;X9ECParameters.prototype.getH=x9getH;function fromHex(s){return new BigInteger(s,16)}function secp128r1(){var p=fromHex("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF");var a=fromHex("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC");var b=fromHex("E87579C11079F43DD824993C2CEE5ED3");var n=fromHex("FFFFFFFE0000000075A30D1B9038A115");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"+"161FF7528B899B2D0C28607CA52C5B86"+"CF5AC8395BAFEB13C02DA292DDED7A83");return new X9ECParameters(curve,G,n,h)}function secp160k1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73");var a=BigInteger.ZERO;var b=fromHex("7");var n=fromHex("0100000000000000000001B8FA16DFAB9ACA16B6B3");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"+"3B4C382CE37AA192A4019E763036F4F5DD4D7EBB"+"938CF935318FDCED6BC28286531733C3F03C4FEE");return new X9ECParameters(curve,G,n,h)}function secp160r1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF");var a=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC");var b=fromHex("1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45");var n=fromHex("0100000000000000000001F4C8F927AED3CA752257");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"+"4A96B5688EF573284664698968C38BB913CBFC82"+"23A628553168947D59DCC912042351377AC5FB32");return new X9ECParameters(curve,G,n,h)}function secp192k1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37");var a=BigInteger.ZERO;var b=fromHex("3");var n=fromHex("FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"+"DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D"+"9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D");return new X9ECParameters(curve,G,n,h)}function secp192r1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF");var a=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC");var b=fromHex("64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1");var n=fromHex("FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"+"188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012"+"07192B95FFC8DA78631011ED6B24CDD573F977A11E794811");return new X9ECParameters(curve,G,n,h)}function secp224r1(){var p=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001");var a=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE");var b=fromHex("B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4");var n=fromHex("FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"+"B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21"+"BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34");return new X9ECParameters(curve,G,n,h)}function secp256r1(){var p=fromHex("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF");var a=fromHex("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC");var b=fromHex("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B");var n=fromHex("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551");var h=BigInteger.ONE;var curve=new ECCurveFp(p,a,b);var G=curve.decodePointHex("04"+"6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296"+"4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new X9ECParameters(curve,G,n,h)}function getSECCurveByName(name){if(name=="secp128r1")return secp128r1();if(name=="secp160k1")return secp160k1();if(name=="secp160r1")return secp160r1();if(name=="secp192k1")return secp192k1();if(name=="secp192r1")return secp192r1();if(name=="secp224r1")return secp224r1();if(name=="secp256r1")return secp256r1();return null}module.exports={secp128r1:secp128r1,secp160k1:secp160k1,secp160r1:secp160r1,secp192k1:secp192k1,secp192r1:secp192r1,secp224r1:secp224r1,secp256r1:secp256r1}},{"./ec.js":276,jsbn:405}],278:[function(require,module,exports){"use strict";module.exports=first;function first(stuff,done){if(!Array.isArray(stuff))throw new TypeError("arg must be an array of [ee, events...] arrays");var cleanups=[];for(var i=0;i<stuff.length;i++){var arr=stuff[i];if(!Array.isArray(arr)||arr.length<2)throw new TypeError("each array member must be [ee, events...]");var ee=arr[0];for(var j=1;j<arr.length;j++){var event=arr[j];var fn=listener(event,callback);ee.on(event,fn);cleanups.push({ee:ee,event:event,fn:fn})}}function callback(){cleanup();done.apply(null,arguments)}function cleanup(){var x;for(var i=0;i<cleanups.length;i++){x=cleanups[i];x.ee.removeListener(x.event,x.fn)}}function thunk(fn){done=fn}thunk.cancel=cleanup;return thunk}function listener(event,done){return function onevent(arg1){var args=new Array(arguments.length);var ee=this;var err=event==="error"?arg1:null;for(var i=0;i<args.length;i++){args[i]=arguments[i]}done(err,ee,event,args)}}},{}],279:[function(require,module,exports){"use strict";module.exports=encodeUrl;var ENCODE_CHARS_REGEXP=/(?:[^\x21\x25\x26-\x3B\x3D\x3F-\x5B\x5D\x5F\x61-\x7A\x7E]|%(?:[^0-9A-Fa-f]|[0-9A-Fa-f][^0-9A-Fa-f]))+/g;var UNMATCHED_SURROGATE_PAIR_REGEXP=/(^|[^\uD800-\uDBFF])[\uDC00-\uDFFF]|[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/g;var UNMATCHED_SURROGATE_PAIR_REPLACE="$1$2";function encodeUrl(url){return String(url).replace(UNMATCHED_SURROGATE_PAIR_REGEXP,UNMATCHED_SURROGATE_PAIR_REPLACE).replace(ENCODE_CHARS_REGEXP,encodeURI)}},{}],280:[function(require,module,exports){"use strict";function createError(msg,code,props){var err=msg instanceof Error?msg:new Error(msg);var key;if(typeof code==="object"){props=code}else if(code!=null){err.code=code}if(props){for(key in props){err[key]=props[key]}}return err}module.exports=createError},{}],281:[function(require,module,exports){"use strict";var matchHtmlRegExp=/["'&<>]/;module.exports=escapeHtml;function escapeHtml(string){var str=""+string;var match=matchHtmlRegExp.exec(str);if(!match){return str}var escape;var html="";var index=0;var lastIndex=0;for(index=match.index;index<str.length;index++){switch(str.charCodeAt(index)){case 34:escape="&quot;";break;case 38:escape="&amp;";break;case 39:escape="&#39;";break;case 60:escape="&lt;";break;case 62:escape="&gt;";break;default:continue}if(lastIndex!==index){html+=str.substring(lastIndex,index)}lastIndex=index+1;html+=escape}return lastIndex!==index?html+str.substring(lastIndex,index):html}},{}],282:[function(require,module,exports){"use strict";module.exports=etag;var crypto=require("crypto");var Stats=require("fs").Stats;var toString=Object.prototype.toString;function entitytag(entity){if(entity.length===0){return'"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk"'}var hash=crypto.createHash("sha1").update(entity,"utf8").digest("base64").substring(0,27);var len=typeof entity==="string"?Buffer.byteLength(entity,"utf8"):entity.length;return'"'+len.toString(16)+"-"+hash+'"'}function etag(entity,options){if(entity==null){throw new TypeError("argument entity is required")}var isStats=isstats(entity);var weak=options&&typeof options.weak==="boolean"?options.weak:isStats;if(!isStats&&typeof entity!=="string"&&!Buffer.isBuffer(entity)){throw new TypeError("argument entity must be string, Buffer, or fs.Stats")}var tag=isStats?stattag(entity):entitytag(entity);return weak?"W/"+tag:tag}function isstats(obj){if(typeof Stats==="function"&&obj instanceof Stats){return true}return obj&&typeof obj==="object"&&"ctime"in obj&&toString.call(obj.ctime)==="[object Date]"&&"mtime"in obj&&toString.call(obj.mtime)==="[object Date]"&&"ino"in obj&&typeof obj.ino==="number"&&"size"in obj&&typeof obj.size==="number"}function stattag(stat){var mtime=stat.mtime.getTime().toString(16);var size=stat.size.toString(16);return'"'+size+"-"+mtime+'"'}},{crypto:undefined,fs:undefined}],283:[function(require,module,exports){"use strict";module.exports=require("./lib/express")},{"./lib/express":285}],284:[function(require,module,exports){"use strict";var finalhandler=require("finalhandler");var Router=require("./router");var methods=require("methods");var middleware=require("./middleware/init");var query=require("./middleware/query");var debug=require("debug")("express:application");var View=require("./view");var http=require("http");var compileETag=require("./utils").compileETag;var compileQueryParser=require("./utils").compileQueryParser;var compileTrust=require("./utils").compileTrust;var deprecate=require("depd")("express");var flatten=require("array-flatten");var merge=require("utils-merge");var resolve=require("path").resolve;var setPrototypeOf=require("setprototypeof");var slice=Array.prototype.slice;var app=exports=module.exports={};var trustProxyDefaultSymbol="@@symbol:trust_proxy_default";app.init=function init(){this.cache={};this.engines={};this.settings={};this.defaultConfiguration()};app.defaultConfiguration=function defaultConfiguration(){var env=process.env.NODE_ENV||"development";this.enable("x-powered-by");this.set("etag","weak");this.set("env",env);this.set("query parser","extended");this.set("subdomain offset",2);this.set("trust proxy",false);Object.defineProperty(this.settings,trustProxyDefaultSymbol,{configurable:true,value:true});debug("booting in %s mode",env);this.on("mount",function onmount(parent){if(this.settings[trustProxyDefaultSymbol]===true&&typeof parent.settings["trust proxy fn"]==="function"){delete this.settings["trust proxy"];delete this.settings["trust proxy fn"]}setPrototypeOf(this.request,parent.request);setPrototypeOf(this.response,parent.response);setPrototypeOf(this.engines,parent.engines);setPrototypeOf(this.settings,parent.settings)});this.locals=Object.create(null);this.mountpath="/";this.locals.settings=this.settings;this.set("view",View);this.set("views",resolve("views"));this.set("jsonp callback name","callback");if(env==="production"){this.enable("view cache")}Object.defineProperty(this,"router",{get:function(){throw new Error("'app.router' is deprecated!\nPlease see the 3.x to 4.x migration guide for details on how to update your app.")}})};app.lazyrouter=function lazyrouter(){if(!this._router){this._router=new Router({caseSensitive:this.enabled("case sensitive routing"),strict:this.enabled("strict routing")});this._router.use(query(this.get("query parser fn")));this._router.use(middleware.init(this))}};app.handle=function handle(req,res,callback){var router=this._router;var done=callback||finalhandler(req,res,{env:this.get("env"),onerror:logerror.bind(this)});if(!router){debug("no routes defined on app");done();return}router.handle(req,res,done)};app.use=function use(fn){var offset=0;var path="/";if(typeof fn!=="function"){var arg=fn;while(Array.isArray(arg)&&arg.length!==0){arg=arg[0]}if(typeof arg!=="function"){offset=1;path=fn}}var fns=flatten(slice.call(arguments,offset));if(fns.length===0){throw new TypeError("app.use() requires a middleware function")}this.lazyrouter();var router=this._router;fns.forEach(function(fn){if(!fn||!fn.handle||!fn.set){return router.use(path,fn)}debug(".use app under %s",path);fn.mountpath=path;fn.parent=this;router.use(path,function mounted_app(req,res,next){var orig=req.app;fn.handle(req,res,function(err){setPrototypeOf(req,orig.request);setPrototypeOf(res,orig.response);next(err)})});fn.emit("mount",this)},this);return this};app.route=function route(path){this.lazyrouter();return this._router.route(path)};app.engine=function engine(ext,fn){if(typeof fn!=="function"){throw new Error("callback function required")}var extension=ext[0]!=="."?"."+ext:ext;this.engines[extension]=fn;return this};app.param=function param(name,fn){this.lazyrouter();if(Array.isArray(name)){for(var i=0;i<name.length;i++){this.param(name[i],fn)}return this}this._router.param(name,fn);return this};app.set=function set(setting,val){if(arguments.length===1){return this.settings[setting]}debug('set "%s" to %o',setting,val);this.settings[setting]=val;switch(setting){case"etag":this.set("etag fn",compileETag(val));break;case"query parser":this.set("query parser fn",compileQueryParser(val));break;case"trust proxy":this.set("trust proxy fn",compileTrust(val));Object.defineProperty(this.settings,trustProxyDefaultSymbol,{configurable:true,value:false});break}return this};app.path=function path(){return this.parent?this.parent.path()+this.mountpath:""};app.enabled=function enabled(setting){return Boolean(this.set(setting))};app.disabled=function disabled(setting){return!this.set(setting)};app.enable=function enable(setting){return this.set(setting,true)};app.disable=function disable(setting){return this.set(setting,false)};methods.forEach(function(method){app[method]=function(path){if(method==="get"&&arguments.length===1){return this.set(path)}this.lazyrouter();var route=this._router.route(path);route[method].apply(route,slice.call(arguments,1));return this}});app.all=function all(path){this.lazyrouter();var route=this._router.route(path);var args=slice.call(arguments,1);for(var i=0;i<methods.length;i++){route[methods[i]].apply(route,args)}return this};app.del=deprecate.function(app.delete,"app.del: Use app.delete instead");app.render=function render(name,options,callback){var cache=this.cache;var done=callback;var engines=this.engines;var opts=options;var renderOptions={};var view;if(typeof options==="function"){done=options;opts={}}merge(renderOptions,this.locals);if(opts._locals){merge(renderOptions,opts._locals)}merge(renderOptions,opts);if(renderOptions.cache==null){renderOptions.cache=this.enabled("view cache")}if(renderOptions.cache){view=cache[name]}if(!view){var View=this.get("view");view=new View(name,{defaultEngine:this.get("view engine"),root:this.get("views"),engines:engines});if(!view.path){var dirs=Array.isArray(view.root)&&view.root.length>1?'directories "'+view.root.slice(0,-1).join('", "')+'" or "'+view.root[view.root.length-1]+'"':'directory "'+view.root+'"';var err=new Error('Failed to lookup view "'+name+'" in views '+dirs);err.view=view;return done(err)}if(renderOptions.cache){cache[name]=view}}tryRender(view,renderOptions,done)};app.listen=function listen(){var server=http.createServer(this);return server.listen.apply(server,arguments)};function logerror(err){if(this.get("env")!=="test")console.error(err.stack||err.toString())}function tryRender(view,options,callback){try{view.render(options,callback)}catch(err){callback(err)}}},{"./middleware/init":286,"./middleware/query":287,"./router":290,"./utils":293,"./view":294,"array-flatten":178,debug:297,depd:270,finalhandler:313,http:undefined,methods:426,path:undefined,setprototypeof:491,"utils-merge":565}],285:[function(require,module,exports){"use strict";var bodyParser=require("body-parser");var EventEmitter=require("events").EventEmitter;var mixin=require("merge-descriptors");var proto=require("./application");var Route=require("./router/route");var Router=require("./router");var req=require("./request");var res=require("./response");exports=module.exports=createApplication;function createApplication(){var app=function(req,res,next){app.handle(req,res,next)};mixin(app,EventEmitter.prototype,false);mixin(app,proto,false);app.request=Object.create(req,{app:{configurable:true,enumerable:true,writable:true,value:app}});app.response=Object.create(res,{app:{configurable:true,enumerable:true,writable:true,value:app}});app.init();return app}exports.application=proto;exports.request=req;exports.response=res;exports.Route=Route;exports.Router=Router;exports.json=bodyParser.json;exports.query=require("./middleware/query");exports.static=require("serve-static");exports.urlencoded=bodyParser.urlencoded;["bodyParser","compress","cookieSession","session","logger","cookieParser","favicon","responseTime","errorHandler","timeout","methodOverride","vhost","csrf","directory","limit","multipart","staticCache"].forEach(function(name){Object.defineProperty(exports,name,{get:function(){throw new Error("Most middleware (like "+name+") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.")},configurable:true})})},{"./application":284,"./middleware/query":287,"./request":288,"./response":289,"./router":290,"./router/route":292,"body-parser":239,events:undefined,"merge-descriptors":425,"serve-static":490}],286:[function(require,module,exports){"use strict";var setPrototypeOf=require("setprototypeof");exports.init=function(app){return function expressInit(req,res,next){if(app.enabled("x-powered-by"))res.setHeader("X-Powered-By","Express");req.res=res;res.req=req;req.next=next;setPrototypeOf(req,app.request);setPrototypeOf(res,app.response);res.locals=res.locals||Object.create(null);next()}}},{setprototypeof:491}],287:[function(require,module,exports){"use strict";var merge=require("utils-merge");var parseUrl=require("parseurl");var qs=require("qs");module.exports=function query(options){var opts=merge({},options);var queryparse=qs.parse;if(typeof options==="function"){queryparse=options;opts=undefined}if(opts!==undefined&&opts.allowPrototypes===undefined){opts.allowPrototypes=true}return function query(req,res,next){if(!req.query){var val=parseUrl(req).query;req.query=queryparse(val,opts)}next()}}},{parseurl:450,qs:458,"utils-merge":565}],288:[function(require,module,exports){"use strict";var accepts=require("accepts");var deprecate=require("depd")("express");var isIP=require("net").isIP;var typeis=require("type-is");var http=require("http");var fresh=require("fresh");var parseRange=require("range-parser");var parse=require("parseurl");var proxyaddr=require("proxy-addr");var req=Object.create(http.IncomingMessage.prototype);module.exports=req;req.get=req.header=function header(name){if(!name){throw new TypeError("name argument is required to req.get")}if(typeof name!=="string"){throw new TypeError("name must be a string to req.get")}var lc=name.toLowerCase();switch(lc){case"referer":case"referrer":return this.headers.referrer||this.headers.referer;default:return this.headers[lc]}};req.accepts=function(){var accept=accepts(this);return accept.types.apply(accept,arguments)};req.acceptsEncodings=function(){var accept=accepts(this);return accept.encodings.apply(accept,arguments)};req.acceptsEncoding=deprecate.function(req.acceptsEncodings,"req.acceptsEncoding: Use acceptsEncodings instead");req.acceptsCharsets=function(){var accept=accepts(this);return accept.charsets.apply(accept,arguments)};req.acceptsCharset=deprecate.function(req.acceptsCharsets,"req.acceptsCharset: Use acceptsCharsets instead");req.acceptsLanguages=function(){var accept=accepts(this);return accept.languages.apply(accept,arguments)};req.acceptsLanguage=deprecate.function(req.acceptsLanguages,"req.acceptsLanguage: Use acceptsLanguages instead");req.range=function range(size,options){var range=this.get("Range");if(!range)return;return parseRange(size,range,options)};req.param=function param(name,defaultValue){var params=this.params||{};var body=this.body||{};var query=this.query||{};var args=arguments.length===1?"name":"name, default";deprecate("req.param("+args+"): Use req.params, req.body, or req.query instead");if(null!=params[name]&&params.hasOwnProperty(name))return params[name];if(null!=body[name])return body[name];if(null!=query[name])return query[name];return defaultValue};req.is=function is(types){var arr=types;if(!Array.isArray(types)){arr=new Array(arguments.length);for(var i=0;i<arr.length;i++){arr[i]=arguments[i]}}return typeis(this,arr)};defineGetter(req,"protocol",function protocol(){var proto=this.connection.encrypted?"https":"http";var trust=this.app.get("trust proxy fn");if(!trust(this.connection.remoteAddress,0)){return proto}var header=this.get("X-Forwarded-Proto")||proto;var index=header.indexOf(",");return index!==-1?header.substring(0,index).trim():header.trim()});defineGetter(req,"secure",function secure(){return this.protocol==="https"});defineGetter(req,"ip",function ip(){var trust=this.app.get("trust proxy fn");return proxyaddr(this,trust)});defineGetter(req,"ips",function ips(){var trust=this.app.get("trust proxy fn");var addrs=proxyaddr.all(this,trust);addrs.reverse().pop();return addrs});defineGetter(req,"subdomains",function subdomains(){var hostname=this.hostname;if(!hostname)return[];var offset=this.app.get("subdomain offset");var subdomains=!isIP(hostname)?hostname.split(".").reverse():[hostname];return subdomains.slice(offset)});defineGetter(req,"path",function path(){return parse(this).pathname});defineGetter(req,"hostname",function hostname(){var trust=this.app.get("trust proxy fn");var host=this.get("X-Forwarded-Host");if(!host||!trust(this.connection.remoteAddress,0)){host=this.get("Host")}if(!host)return;var offset=host[0]==="["?host.indexOf("]")+1:0;var index=host.indexOf(":",offset);return index!==-1?host.substring(0,index):host});defineGetter(req,"host",deprecate.function(function host(){return this.hostname},"req.host: Use req.hostname instead"));defineGetter(req,"fresh",function(){var method=this.method;var res=this.res;var status=res.statusCode;if("GET"!==method&&"HEAD"!==method)return false;if(status>=200&&status<300||304===status){return fresh(this.headers,{etag:res.get("ETag"),"last-modified":res.get("Last-Modified")})}return false});defineGetter(req,"stale",function stale(){return!this.fresh});defineGetter(req,"xhr",function xhr(){var val=this.get("X-Requested-With")||"";return val.toLowerCase()==="xmlhttprequest"});function defineGetter(obj,name,getter){Object.defineProperty(obj,name,{configurable:true,enumerable:true,get:getter})}},{accepts:137,depd:270,fresh:322,http:undefined,net:undefined,parseurl:450,"proxy-addr":456,"range-parser":462,"type-is":557}],289:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer;var contentDisposition=require("content-disposition");var deprecate=require("depd")("express");var encodeUrl=require("encodeurl");var escapeHtml=require("escape-html");var http=require("http");var isAbsolute=require("./utils").isAbsolute;var onFinished=require("on-finished");var path=require("path");var statuses=require("statuses");var merge=require("utils-merge");var sign=require("cookie-signature").sign;var normalizeType=require("./utils").normalizeType;var normalizeTypes=require("./utils").normalizeTypes;var setCharset=require("./utils").setCharset;var cookie=require("cookie");var send=require("send");var extname=path.extname;var mime=send.mime;var resolve=path.resolve;var vary=require("vary");var res=Object.create(http.ServerResponse.prototype);module.exports=res;var charsetRegExp=/;\s*charset\s*=/;res.status=function status(code){this.statusCode=code;return this};res.links=function(links){var link=this.get("Link")||"";if(link)link+=", ";return this.set("Link",link+Object.keys(links).map(function(rel){return"<"+links[rel]+'>; rel="'+rel+'"'}).join(", "))};res.send=function send(body){var chunk=body;var encoding;var req=this.req;var type;var app=this.app;if(arguments.length===2){if(typeof arguments[0]!=="number"&&typeof arguments[1]==="number"){deprecate("res.send(body, status): Use res.status(status).send(body) instead");this.statusCode=arguments[1]}else{deprecate("res.send(status, body): Use res.status(status).send(body) instead");this.statusCode=arguments[0];chunk=arguments[1]}}if(typeof chunk==="number"&&arguments.length===1){if(!this.get("Content-Type")){this.type("txt")}deprecate("res.send(status): Use res.sendStatus(status) instead");this.statusCode=chunk;chunk=statuses[chunk]}switch(typeof chunk){case"string":if(!this.get("Content-Type")){this.type("html")}break;case"boolean":case"number":case"object":if(chunk===null){chunk=""}else if(Buffer.isBuffer(chunk)){if(!this.get("Content-Type")){this.type("bin")}}else{return this.json(chunk)}break}if(typeof chunk==="string"){encoding="utf8";type=this.get("Content-Type");if(typeof type==="string"){this.set("Content-Type",setCharset(type,"utf-8"))}}var etagFn=app.get("etag fn");var generateETag=!this.get("ETag")&&typeof etagFn==="function";var len;if(chunk!==undefined){if(Buffer.isBuffer(chunk)){len=chunk.length}else if(!generateETag&&chunk.length<1e3){len=Buffer.byteLength(chunk,encoding)}else{chunk=Buffer.from(chunk,encoding);encoding=undefined;len=chunk.length}this.set("Content-Length",len)}var etag;if(generateETag&&len!==undefined){if(etag=etagFn(chunk,encoding)){this.set("ETag",etag)}}if(req.fresh)this.statusCode=304;if(204===this.statusCode||304===this.statusCode){this.removeHeader("Content-Type");this.removeHeader("Content-Length");this.removeHeader("Transfer-Encoding");chunk=""}if(req.method==="HEAD"){this.end()}else{this.end(chunk,encoding)}return this};res.json=function json(obj){var val=obj;if(arguments.length===2){if(typeof arguments[1]==="number"){deprecate("res.json(obj, status): Use res.status(status).json(obj) instead");this.statusCode=arguments[1]}else{deprecate("res.json(status, obj): Use res.status(status).json(obj) instead");this.statusCode=arguments[0];val=arguments[1]}}var app=this.app;var escape=app.get("json escape");var replacer=app.get("json replacer");var spaces=app.get("json spaces");var body=stringify(val,replacer,spaces,escape);if(!this.get("Content-Type")){this.set("Content-Type","application/json")}return this.send(body)};res.jsonp=function jsonp(obj){var val=obj;if(arguments.length===2){if(typeof arguments[1]==="number"){deprecate("res.jsonp(obj, status): Use res.status(status).json(obj) instead");this.statusCode=arguments[1]}else{deprecate("res.jsonp(status, obj): Use res.status(status).jsonp(obj) instead");this.statusCode=arguments[0];val=arguments[1]}}var app=this.app;var escape=app.get("json escape");var replacer=app.get("json replacer");var spaces=app.get("json spaces");var body=stringify(val,replacer,spaces,escape);var callback=this.req.query[app.get("jsonp callback name")];if(!this.get("Content-Type")){this.set("X-Content-Type-Options","nosniff");this.set("Content-Type","application/json")}if(Array.isArray(callback)){callback=callback[0]}if(typeof callback==="string"&&callback.length!==0){this.set("X-Content-Type-Options","nosniff");this.set("Content-Type","text/javascript");callback=callback.replace(/[^\[\]\w$.]/g,"");body=body.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");body="/**/ typeof "+callback+" === 'function' && "+callback+"("+body+");"}return this.send(body)};res.sendStatus=function sendStatus(statusCode){var body=statuses[statusCode]||String(statusCode);this.statusCode=statusCode;this.type("txt");return this.send(body)};res.sendFile=function sendFile(path,options,callback){var done=callback;var req=this.req;var res=this;var next=req.next;var opts=options||{};if(!path){throw new TypeError("path argument is required to res.sendFile")}if(typeof options==="function"){done=options;opts={}}if(!opts.root&&!isAbsolute(path)){throw new TypeError("path must be absolute or specify root to res.sendFile")}var pathname=encodeURI(path);var file=send(req,pathname,opts);sendfile(res,file,opts,function(err){if(done)return done(err);if(err&&err.code==="EISDIR")return next();if(err&&err.code!=="ECONNABORTED"&&err.syscall!=="write"){next(err)}})};res.sendfile=function(path,options,callback){var done=callback;var req=this.req;var res=this;var next=req.next;var opts=options||{};if(typeof options==="function"){done=options;opts={}}var file=send(req,path,opts);sendfile(res,file,opts,function(err){if(done)return done(err);if(err&&err.code==="EISDIR")return next();if(err&&err.code!=="ECONNABORT"&&err.syscall!=="write"){next(err)}})};res.sendfile=deprecate.function(res.sendfile,"res.sendfile: Use res.sendFile instead");res.download=function download(path,filename,options,callback){var done=callback;var name=filename;var opts=options||null;if(typeof filename==="function"){done=filename;name=null;opts=null}else if(typeof options==="function"){done=options;opts=null}var headers={"Content-Disposition":contentDisposition(name||path)};if(opts&&opts.headers){var keys=Object.keys(opts.headers);for(var i=0;i<keys.length;i++){var key=keys[i];if(key.toLowerCase()!=="content-disposition"){headers[key]=opts.headers[key]}}}opts=Object.create(opts);opts.headers=headers;var fullPath=resolve(path);return this.sendFile(fullPath,opts,done)};res.contentType=res.type=function contentType(type){var ct=type.indexOf("/")===-1?mime.lookup(type):type;return this.set("Content-Type",ct)};res.format=function(obj){var req=this.req;var next=req.next;var fn=obj.default;if(fn)delete obj.default;var keys=Object.keys(obj);var key=keys.length>0?req.accepts(keys):false;this.vary("Accept");if(key){this.set("Content-Type",normalizeType(key).value);obj[key](req,this,next)}else if(fn){fn()}else{var err=new Error("Not Acceptable");err.status=err.statusCode=406;err.types=normalizeTypes(keys).map(function(o){return o.value});next(err)}return this};res.attachment=function attachment(filename){if(filename){this.type(extname(filename))}this.set("Content-Disposition",contentDisposition(filename));return this};res.append=function append(field,val){var prev=this.get(field);var value=val;if(prev){value=Array.isArray(prev)?prev.concat(val):Array.isArray(val)?[prev].concat(val):[prev,val]}return this.set(field,value)};res.set=res.header=function header(field,val){if(arguments.length===2){var value=Array.isArray(val)?val.map(String):String(val);if(field.toLowerCase()==="content-type"){if(Array.isArray(value)){throw new TypeError("Content-Type cannot be set to an Array")}if(!charsetRegExp.test(value)){var charset=mime.charsets.lookup(value.split(";")[0]);if(charset)value+="; charset="+charset.toLowerCase()}}this.setHeader(field,value)}else{for(var key in field){this.set(key,field[key])}}return this};res.get=function(field){return this.getHeader(field)};res.clearCookie=function clearCookie(name,options){var opts=merge({expires:new Date(1),path:"/"},options);return this.cookie(name,"",opts)};res.cookie=function(name,value,options){var opts=merge({},options);var secret=this.req.secret;var signed=opts.signed;if(signed&&!secret){throw new Error('cookieParser("secret") required for signed cookies')}var val=typeof value==="object"?"j:"+JSON.stringify(value):String(value);if(signed){val="s:"+sign(val,secret)}if("maxAge"in opts){opts.expires=new Date(Date.now()+opts.maxAge);opts.maxAge/=1e3}if(opts.path==null){opts.path="/"}this.append("Set-Cookie",cookie.serialize(name,String(val),opts));return this};res.location=function location(url){var loc=url;if(url==="back"){loc=this.req.get("Referrer")||"/"}return this.set("Location",encodeUrl(loc))};res.redirect=function redirect(url){var address=url;var body;var status=302;if(arguments.length===2){if(typeof arguments[0]==="number"){status=arguments[0];address=arguments[1]}else{deprecate("res.redirect(url, status): Use res.redirect(status, url) instead");status=arguments[1]}}address=this.location(address).get("Location");this.format({text:function(){body=statuses[status]+". Redirecting to "+address},html:function(){var u=escapeHtml(address);body="<p>"+statuses[status]+'. Redirecting to <a href="'+u+'">'+u+"</a></p>"},default:function(){body=""}});this.statusCode=status;this.set("Content-Length",Buffer.byteLength(body));if(this.req.method==="HEAD"){this.end()}else{this.end(body)}};res.vary=function(field){if(!field||Array.isArray(field)&&!field.length){deprecate("res.vary(): Provide a field name");return this}vary(this,field);return this};res.render=function render(view,options,callback){var app=this.req.app;var done=callback;var opts=options||{};var req=this.req;var self=this;if(typeof options==="function"){done=options;opts={}}opts._locals=self.locals;done=done||function(err,str){if(err)return req.next(err);self.send(str)};app.render(view,opts,done)};function sendfile(res,file,options,callback){var done=false;var streaming;function onaborted(){if(done)return;done=true;var err=new Error("Request aborted");err.code="ECONNABORTED";callback(err)}function ondirectory(){if(done)return;done=true;var err=new Error("EISDIR, read");err.code="EISDIR";callback(err)}function onerror(err){if(done)return;done=true;callback(err)}function onend(){if(done)return;done=true;callback()}function onfile(){streaming=false}function onfinish(err){if(err&&err.code==="ECONNRESET")return onaborted();if(err)return onerror(err);if(done)return;setImmediate(function(){if(streaming!==false&&!done){onaborted();return}if(done)return;done=true;callback()})}function onstream(){streaming=true}file.on("directory",ondirectory);file.on("end",onend);file.on("error",onerror);file.on("file",onfile);file.on("stream",onstream);onFinished(res,onfinish);if(options.headers){file.on("headers",function headers(res){var obj=options.headers;var keys=Object.keys(obj);for(var i=0;i<keys.length;i++){var k=keys[i];res.setHeader(k,obj[k])}})}file.pipe(res)}function stringify(value,replacer,spaces,escape){var json=replacer||spaces?JSON.stringify(value,replacer,spaces):JSON.stringify(value);if(escape){json=json.replace(/[<>&]/g,function(c){switch(c.charCodeAt(0)){case 60:return"\\u003c";case 62:return"\\u003e";case 38:return"\\u0026";default:return c}})}return json}},{"./utils":293,"content-disposition":257,cookie:260,"cookie-signature":259,depd:270,encodeurl:279,"escape-html":281,http:undefined,"on-finished":447,path:undefined,"safe-buffer":484,send:485,statuses:518,"utils-merge":565,vary:571}],290:[function(require,module,exports){"use strict";var Route=require("./route");var Layer=require("./layer");var methods=require("methods");var mixin=require("utils-merge");var debug=require("debug")("express:router");var deprecate=require("depd")("express");var flatten=require("array-flatten");var parseUrl=require("parseurl");var setPrototypeOf=require("setprototypeof");var objectRegExp=/^\[object (\S+)\]$/;var slice=Array.prototype.slice;var toString=Object.prototype.toString;var proto=module.exports=function(options){var opts=options||{};function router(req,res,next){router.handle(req,res,next)}setPrototypeOf(router,proto);router.params={};router._params=[];router.caseSensitive=opts.caseSensitive;router.mergeParams=opts.mergeParams;router.strict=opts.strict;router.stack=[];return router};proto.param=function param(name,fn){if(typeof name==="function"){deprecate("router.param(fn): Refactor to use path params");this._params.push(name);return}var params=this._params;var len=params.length;var ret;if(name[0]===":"){deprecate("router.param("+JSON.stringify(name)+", fn): Use router.param("+JSON.stringify(name.substr(1))+", fn) instead");name=name.substr(1)}for(var i=0;i<len;++i){if(ret=params[i](name,fn)){fn=ret}}if("function"!==typeof fn){throw new Error("invalid param() call for "+name+", got "+fn)}(this.params[name]=this.params[name]||[]).push(fn);return this};proto.handle=function handle(req,res,out){var self=this;debug("dispatching %s %s",req.method,req.url);var idx=0;var protohost=getProtohost(req.url)||"";var removed="";var slashAdded=false;var paramcalled={};var options=[];var stack=self.stack;var parentParams=req.params;var parentUrl=req.baseUrl||"";var done=restore(out,req,"baseUrl","next","params");req.next=next;if(req.method==="OPTIONS"){done=wrap(done,function(old,err){if(err||options.length===0)return old(err);sendOptionsResponse(res,options,old)})}req.baseUrl=parentUrl;req.originalUrl=req.originalUrl||req.url;next();function next(err){var layerError=err==="route"?null:err;if(slashAdded){req.url=req.url.substr(1);slashAdded=false}if(removed.length!==0){req.baseUrl=parentUrl;req.url=protohost+removed+req.url.substr(protohost.length);removed=""}if(layerError==="router"){setImmediate(done,null);return}if(idx>=stack.length){setImmediate(done,layerError);return}var path=getPathname(req);if(path==null){return done(layerError)}var layer;var match;var route;while(match!==true&&idx<stack.length){layer=stack[idx++];match=matchLayer(layer,path);route=layer.route;if(typeof match!=="boolean"){layerError=layerError||match}if(match!==true){continue}if(!route){continue}if(layerError){match=false;continue}var method=req.method;var has_method=route._handles_method(method);if(!has_method&&method==="OPTIONS"){appendMethods(options,route._options())}if(!has_method&&method!=="HEAD"){match=false;continue}}if(match!==true){return done(layerError)}if(route){req.route=route}req.params=self.mergeParams?mergeParams(layer.params,parentParams):layer.params;var layerPath=layer.path;self.process_params(layer,paramcalled,req,res,function(err){if(err){return next(layerError||err)}if(route){return layer.handle_request(req,res,next)}trim_prefix(layer,layerError,layerPath,path)})}function trim_prefix(layer,layerError,layerPath,path){if(layerPath.length!==0){var c=path[layerPath.length];if(c&&c!=="/"&&c!==".")return next(layerError);debug("trim prefix (%s) from url %s",layerPath,req.url);removed=layerPath;req.url=protohost+req.url.substr(protohost.length+removed.length);if(!protohost&&req.url[0]!=="/"){req.url="/"+req.url;slashAdded=true}req.baseUrl=parentUrl+(removed[removed.length-1]==="/"?removed.substring(0,removed.length-1):removed)}debug("%s %s : %s",layer.name,layerPath,req.originalUrl);if(layerError){layer.handle_error(layerError,req,res,next)}else{layer.handle_request(req,res,next)}}};proto.process_params=function process_params(layer,called,req,res,done){var params=this.params;var keys=layer.keys;if(!keys||keys.length===0){return done()}var i=0;var name;var paramIndex=0;var key;var paramVal;var paramCallbacks;var paramCalled;function param(err){if(err){return done(err)}if(i>=keys.length){return done()}paramIndex=0;key=keys[i++];name=key.name;paramVal=req.params[name];paramCallbacks=params[name];paramCalled=called[name];if(paramVal===undefined||!paramCallbacks){return param()}if(paramCalled&&(paramCalled.match===paramVal||paramCalled.error&&paramCalled.error!=="route")){req.params[name]=paramCalled.value;return param(paramCalled.error)}called[name]=paramCalled={error:null,match:paramVal,value:paramVal};paramCallback()}function paramCallback(err){var fn=paramCallbacks[paramIndex++];paramCalled.value=req.params[key.name];if(err){paramCalled.error=err;param(err);return}if(!fn)return param();try{fn(req,res,paramCallback,paramVal,key.name)}catch(e){paramCallback(e)}}param()};proto.use=function use(fn){var offset=0;var path="/";if(typeof fn!=="function"){var arg=fn;while(Array.isArray(arg)&&arg.length!==0){arg=arg[0]}if(typeof arg!=="function"){offset=1;path=fn}}var callbacks=flatten(slice.call(arguments,offset));if(callbacks.length===0){throw new TypeError("Router.use() requires a middleware function")}for(var i=0;i<callbacks.length;i++){var fn=callbacks[i];if(typeof fn!=="function"){throw new TypeError("Router.use() requires a middleware function but got a "+gettype(fn))}debug("use %o %s",path,fn.name||"<anonymous>");var layer=new Layer(path,{sensitive:this.caseSensitive,strict:false,end:false},fn);layer.route=undefined;this.stack.push(layer)}return this};proto.route=function route(path){var route=new Route(path);var layer=new Layer(path,{sensitive:this.caseSensitive,strict:this.strict,end:true},route.dispatch.bind(route));layer.route=route;this.stack.push(layer);return route};methods.concat("all").forEach(function(method){proto[method]=function(path){var route=this.route(path);route[method].apply(route,slice.call(arguments,1));return this}});function appendMethods(list,addition){for(var i=0;i<addition.length;i++){var method=addition[i];if(list.indexOf(method)===-1){list.push(method)}}}function getPathname(req){try{return parseUrl(req).pathname}catch(err){return undefined}}function getProtohost(url){if(typeof url!=="string"||url.length===0||url[0]==="/"){return undefined}var searchIndex=url.indexOf("?");var pathLength=searchIndex!==-1?searchIndex:url.length;var fqdnIndex=url.substr(0,pathLength).indexOf("://");return fqdnIndex!==-1?url.substr(0,url.indexOf("/",3+fqdnIndex)):undefined}function gettype(obj){var type=typeof obj;if(type!=="object"){return type}return toString.call(obj).replace(objectRegExp,"$1")}function matchLayer(layer,path){try{return layer.match(path)}catch(err){return err}}function mergeParams(params,parent){if(typeof parent!=="object"||!parent){return params}var obj=mixin({},parent);if(!(0 in params)||!(0 in parent)){return mixin(obj,params)}var i=0;var o=0;while(i in params){i++}while(o in parent){o++}for(i--;i>=0;i--){params[i+o]=params[i];if(i<o){delete params[i]}}return mixin(obj,params)}function restore(fn,obj){var props=new Array(arguments.length-2);var vals=new Array(arguments.length-2);for(var i=0;i<props.length;i++){props[i]=arguments[i+2];vals[i]=obj[props[i]]}return function(){for(var i=0;i<props.length;i++){obj[props[i]]=vals[i]}return fn.apply(this,arguments)}}function sendOptionsResponse(res,options,next){try{var body=options.join(",");res.set("Allow",body);res.send(body)}catch(err){next(err)}}function wrap(old,fn){return function proxy(){var args=new Array(arguments.length+1);args[0]=old;for(var i=0,len=arguments.length;i<len;i++){args[i+1]=arguments[i]}fn.apply(this,args)}}},{"./layer":291,"./route":292,"array-flatten":178,debug:297,depd:270,methods:426,parseurl:450,setprototypeof:491,"utils-merge":565}],291:[function(require,module,exports){"use strict";var pathRegexp=require("path-to-regexp");var debug=require("debug")("express:router:layer");var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=Layer;function Layer(path,options,fn){if(!(this instanceof Layer)){return new Layer(path,options,fn)}debug("new %o",path);var opts=options||{};this.handle=fn;this.name=fn.name||"<anonymous>";this.params=undefined;this.path=undefined;this.regexp=pathRegexp(path,this.keys=[],opts);this.regexp.fast_star=path==="*";this.regexp.fast_slash=path==="/"&&opts.end===false}Layer.prototype.handle_error=function handle_error(error,req,res,next){var fn=this.handle;if(fn.length!==4){return next(error)}try{fn(error,req,res,next)}catch(err){next(err)}};Layer.prototype.handle_request=function handle(req,res,next){var fn=this.handle;if(fn.length>3){return next()}try{fn(req,res,next)}catch(err){next(err)}};Layer.prototype.match=function match(path){var match;if(path!=null){if(this.regexp.fast_slash){this.params={};this.path="";return true}if(this.regexp.fast_star){this.params={0:decode_param(path)};this.path=path;return true}match=this.regexp.exec(path)}if(!match){this.params=undefined;this.path=undefined;return false}this.params={};this.path=match[0];var keys=this.keys;var params=this.params;for(var i=1;i<match.length;i++){var key=keys[i-1];var prop=key.name;var val=decode_param(match[i]);if(val!==undefined||!hasOwnProperty.call(params,prop)){params[prop]=val}}return true};function decode_param(val){if(typeof val!=="string"||val.length===0){return val}try{return decodeURIComponent(val)}catch(err){if(err instanceof URIError){err.message="Failed to decode param '"+val+"'";err.status=err.statusCode=400}throw err}}},{debug:297,"path-to-regexp":451}],292:[function(require,module,exports){"use strict";var debug=require("debug")("express:router:route");var flatten=require("array-flatten");var Layer=require("./layer");var methods=require("methods");var slice=Array.prototype.slice;var toString=Object.prototype.toString;module.exports=Route;function Route(path){this.path=path;this.stack=[];debug("new %o",path);this.methods={}}Route.prototype._handles_method=function _handles_method(method){if(this.methods._all){return true}var name=method.toLowerCase();if(name==="head"&&!this.methods["head"]){name="get"}return Boolean(this.methods[name])};Route.prototype._options=function _options(){var methods=Object.keys(this.methods);if(this.methods.get&&!this.methods.head){methods.push("head")}for(var i=0;i<methods.length;i++){methods[i]=methods[i].toUpperCase()}return methods};Route.prototype.dispatch=function dispatch(req,res,done){var idx=0;var stack=this.stack;if(stack.length===0){return done()}var method=req.method.toLowerCase();if(method==="head"&&!this.methods["head"]){method="get"}req.route=this;next();function next(err){if(err&&err==="route"){return done()}if(err&&err==="router"){return done(err)}var layer=stack[idx++];if(!layer){return done(err)}if(layer.method&&layer.method!==method){return next(err)}if(err){layer.handle_error(err,req,res,next)}else{layer.handle_request(req,res,next)}}};Route.prototype.all=function all(){var handles=flatten(slice.call(arguments));for(var i=0;i<handles.length;i++){var handle=handles[i];if(typeof handle!=="function"){var type=toString.call(handle);var msg="Route.all() requires a callback function but got a "+type;throw new TypeError(msg)}var layer=Layer("/",{},handle);layer.method=undefined;this.methods._all=true;this.stack.push(layer)}return this};methods.forEach(function(method){Route.prototype[method]=function(){var handles=flatten(slice.call(arguments));for(var i=0;i<handles.length;i++){var handle=handles[i];if(typeof handle!=="function"){var type=toString.call(handle);var msg="Route."+method+"() requires a callback function but got a "+type;throw new Error(msg)}debug("%s %o",method,this.path);var layer=Layer("/",{},handle);layer.method=method;this.methods[method]=true;this.stack.push(layer)}return this}})},{"./layer":291,"array-flatten":178,debug:297,methods:426}],293:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer;var contentDisposition=require("content-disposition");var contentType=require("content-type");var deprecate=require("depd")("express");var flatten=require("array-flatten");var mime=require("send").mime;var etag=require("etag");var proxyaddr=require("proxy-addr");var qs=require("qs");var querystring=require("querystring");exports.etag=createETagGenerator({weak:false});exports.wetag=createETagGenerator({weak:true});exports.isAbsolute=function(path){if("/"===path[0])return true;if(":"===path[1]&&("\\"===path[2]||"/"===path[2]))return true;if("\\\\"===path.substring(0,2))return true};exports.flatten=deprecate.function(flatten,"utils.flatten: use array-flatten npm module instead");exports.normalizeType=function(type){return~type.indexOf("/")?acceptParams(type):{value:mime.lookup(type),params:{}}};exports.normalizeTypes=function(types){var ret=[];for(var i=0;i<types.length;++i){ret.push(exports.normalizeType(types[i]))}return ret};exports.contentDisposition=deprecate.function(contentDisposition,"utils.contentDisposition: use content-disposition npm module instead");function acceptParams(str,index){var parts=str.split(/ *; */);var ret={value:parts[0],quality:1,params:{},originalIndex:index};for(var i=1;i<parts.length;++i){var pms=parts[i].split(/ *= */);if("q"===pms[0]){ret.quality=parseFloat(pms[1])}else{ret.params[pms[0]]=pms[1]}}return ret}exports.compileETag=function(val){var fn;if(typeof val==="function"){return val}switch(val){case true:fn=exports.wetag;break;case false:break;case"strong":fn=exports.etag;break;case"weak":fn=exports.wetag;break;default:throw new TypeError("unknown value for etag function: "+val)}return fn};exports.compileQueryParser=function compileQueryParser(val){var fn;if(typeof val==="function"){return val}switch(val){case true:fn=querystring.parse;break;case false:fn=newObject;break;case"extended":fn=parseExtendedQueryString;break;case"simple":fn=querystring.parse;break;default:throw new TypeError("unknown value for query parser function: "+val)}return fn};exports.compileTrust=function(val){if(typeof val==="function")return val;if(val===true){return function(){return true}}if(typeof val==="number"){return function(a,i){return i<val}}if(typeof val==="string"){val=val.split(/ *, */)}return proxyaddr.compile(val||[])};exports.setCharset=function setCharset(type,charset){if(!type||!charset){return type}var parsed=contentType.parse(type);parsed.parameters.charset=charset;return contentType.format(parsed)};function createETagGenerator(options){return function generateETag(body,encoding){var buf=!Buffer.isBuffer(body)?Buffer.from(body,encoding):body;return etag(buf,options)}}function parseExtendedQueryString(str){return qs.parse(str,{allowPrototypes:true})}function newObject(){return{}}},{"array-flatten":178,"content-disposition":257,"content-type":258,depd:270,etag:282,"proxy-addr":456,qs:458,querystring:undefined,"safe-buffer":484,send:485}],294:[function(require,module,exports){"use strict";var debug=require("debug")("express:view");var path=require("path");var fs=require("fs");var dirname=path.dirname;var basename=path.basename;var extname=path.extname;var join=path.join;var resolve=path.resolve;module.exports=View;function View(name,options){var opts=options||{};this.defaultEngine=opts.defaultEngine;this.ext=extname(name);this.name=name;this.root=opts.root;if(!this.ext&&!this.defaultEngine){throw new Error("No default engine was specified and no extension was provided.")}var fileName=name;if(!this.ext){this.ext=this.defaultEngine[0]!=="."?"."+this.defaultEngine:this.defaultEngine;fileName+=this.ext}if(!opts.engines[this.ext]){var mod=this.ext.substr(1);debug('require "%s"',mod);var fn=require(mod).__express;if(typeof fn!=="function"){throw new Error('Module "'+mod+'" does not provide a view engine.')}opts.engines[this.ext]=fn}this.engine=opts.engines[this.ext];this.path=this.lookup(fileName)}View.prototype.lookup=function lookup(name){var path;var roots=[].concat(this.root);debug('lookup "%s"',name);for(var i=0;i<roots.length&&!path;i++){var root=roots[i];var loc=resolve(root,name);var dir=dirname(loc);var file=basename(loc);path=this.resolve(dir,file)}return path};View.prototype.render=function render(options,callback){debug('render "%s"',this.path);this.engine(this.path,options,callback)};View.prototype.resolve=function resolve(dir,file){var ext=this.ext;var path=join(dir,file);var stat=tryStat(path);if(stat&&stat.isFile()){return path}path=join(dir,basename(file,ext),"index"+ext);stat=tryStat(path);if(stat&&stat.isFile()){return path}};function tryStat(path){debug('stat "%s"',path);try{return fs.statSync(path)}catch(e){return undefined}}},{debug:297,fs:undefined,path:undefined}],295:[function(require,module,exports){arguments[4][245][0].apply(exports,arguments)},{"./debug":296,dup:245}],296:[function(require,module,exports){arguments[4][246][0].apply(exports,arguments)},{dup:246,ms:439}],297:[function(require,module,exports){arguments[4][247][0].apply(exports,arguments)},{"./browser.js":295,"./node.js":298,dup:247}],298:[function(require,module,exports){arguments[4][248][0].apply(exports,arguments)},{"./debug":296,dup:248,fs:undefined,net:undefined,tty:undefined,util:undefined}],299:[function(require,module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var toStr=Object.prototype.toString;var isArray=function isArray(arr){if(typeof Array.isArray==="function"){return Array.isArray(arr)}return toStr.call(arr)==="[object Array]"};var isPlainObject=function isPlainObject(obj){if(!obj||toStr.call(obj)!=="[object Object]"){return false}var hasOwnConstructor=hasOwn.call(obj,"constructor");var hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf){return false}var key;for(key in obj){}return typeof key==="undefined"||hasOwn.call(obj,key)};module.exports=function extend(){var options,name,src,copy,copyIsArray,clone;var target=arguments[0];var i=1;var length=arguments.length;var deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(target==null||typeof target!=="object"&&typeof target!=="function"){target={}}for(;i<length;++i){options=arguments[i];if(options!=null){for(name in options){src=target[name];copy=options[name];if(target!==copy){if(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&isArray(src)?src:[]}else{clone=src&&isPlainObject(src)?src:{}}target[name]=extend(deep,clone,copy)}else if(typeof copy!=="undefined"){target[name]=copy}}}}}return target}},{}],300:[function(require,module,exports){var mod_assert=require("assert");var mod_util=require("util");exports.sprintf=jsSprintf;exports.printf=jsPrintf;exports.fprintf=jsFprintf;function jsSprintf(fmt){var regex=["([^%]*)","%","(['\\-+ #0]*?)","([1-9]\\d*)?","(\\.([1-9]\\d*))?","[lhjztL]*?","([diouxXfFeEgGaAcCsSp%jr])"].join("");var re=new RegExp(regex);var args=Array.prototype.slice.call(arguments,1);var flags,width,precision,conversion;var left,pad,sign,arg,match;var ret="";var argn=1;mod_assert.equal("string",typeof fmt);while((match=re.exec(fmt))!==null){ret+=match[1];fmt=fmt.substring(match[0].length);flags=match[2]||"";width=match[3]||0;precision=match[4]||"";conversion=match[6];left=false;sign=false;pad=" ";if(conversion=="%"){ret+="%";continue}if(args.length===0)throw new Error("too few args to sprintf");arg=args.shift();argn++;if(flags.match(/[\' #]/))throw new Error("unsupported flags: "+flags);if(precision.length>0)throw new Error("non-zero precision not supported");if(flags.match(/-/))left=true;if(flags.match(/0/))pad="0";if(flags.match(/\+/))sign=true;switch(conversion){case"s":if(arg===undefined||arg===null)throw new Error("argument "+argn+": attempted to print undefined or null "+"as a string");ret+=doPad(pad,width,left,arg.toString());break;case"d":arg=Math.floor(arg);case"f":sign=sign&&arg>0?"+":"";ret+=sign+doPad(pad,width,left,arg.toString());break;case"x":ret+=doPad(pad,width,left,arg.toString(16));break;case"j":if(width===0)width=10;ret+=mod_util.inspect(arg,false,width);break;case"r":ret+=dumpException(arg);break;default:throw new Error("unsupported conversion: "+conversion)}}ret+=fmt;return ret}function jsPrintf(){var args=Array.prototype.slice.call(arguments);args.unshift(process.stdout);jsFprintf.apply(null,args)}function jsFprintf(stream){var args=Array.prototype.slice.call(arguments,1);return stream.write(jsSprintf.apply(this,args))}function doPad(chr,width,left,str){var ret=str;while(ret.length<width){if(left)ret+=chr;else ret=chr+ret}return ret}function dumpException(ex){var ret;if(!(ex instanceof Error))throw new Error(jsSprintf("invalid type for %%r: %j",ex));ret="EXCEPTION: "+ex.constructor.name+": "+ex.stack;if(ex.cause&&typeof ex.cause==="function"){var cex=ex.cause();if(cex){ret+="\nCaused by: "+dumpException(cex)}}return ret}},{assert:undefined,util:undefined}],301:[function(require,module,exports){"use strict";module.exports=function equal(a,b){if(a===b)return true;var arrA=Array.isArray(a),arrB=Array.isArray(b),i;if(arrA&&arrB){if(a.length!=b.length)return false;for(i=0;i<a.length;i++)if(!equal(a[i],b[i]))return false;return true}if(arrA!=arrB)return false;if(a&&b&&typeof a==="object"&&typeof b==="object"){var keys=Object.keys(a);if(keys.length!==Object.keys(b).length)return false;var dateA=a instanceof Date,dateB=b instanceof Date;if(dateA&&dateB)return a.getTime()==b.getTime();if(dateA!=dateB)return false;var regexpA=a instanceof RegExp,regexpB=b instanceof RegExp;if(regexpA&&regexpB)return a.toString()==b.toString();if(regexpA!=regexpB)return false;for(i=0;i<keys.length;i++)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return false;for(i=0;i<keys.length;i++)if(!equal(a[keys[i]],b[keys[i]]))return false;return true}return false}},{}],302:[function(require,module,exports){"use strict";module.exports=function(data,opts){if(!opts)opts={};if(typeof opts==="function")opts={cmp:opts};var cycles=typeof opts.cycles==="boolean"?opts.cycles:false;var cmp=opts.cmp&&function(f){return function(node){return function(a,b){var aobj={key:a,value:node[a]};var bobj={key:b,value:node[b]};return f(aobj,bobj)}}}(opts.cmp);var seen=[];return function stringify(node){if(node&&node.toJSON&&typeof node.toJSON==="function"){node=node.toJSON()}if(node===undefined)return;if(typeof node=="number")return isFinite(node)?""+node:"null";if(typeof node!=="object")return JSON.stringify(node);var i,out;if(Array.isArray(node)){out="[";for(i=0;i<node.length;i++){if(i)out+=",";out+=stringify(node[i])||"null"}return out+"]"}if(node===null)return"null";if(seen.indexOf(node)!==-1){if(cycles)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var seenIndex=seen.push(node)-1;var keys=Object.keys(node).sort(cmp&&cmp(node));out="";for(i=0;i<keys.length;i++){var key=keys[i];var value=stringify(node[key]);if(!value)continue;if(out)out+=",";out+=JSON.stringify(key)+":"+value}seen.splice(seenIndex,1);return"{"+out+"}"}(data)}},{}],303:[function(require,module,exports){var fs=require("fs");var util=require("util");var stream=require("stream");var Readable=stream.Readable;var Writable=stream.Writable;var PassThrough=stream.PassThrough;var Pend=require("pend");var EventEmitter=require("events").EventEmitter;exports.createFromBuffer=createFromBuffer;exports.createFromFd=createFromFd;exports.BufferSlicer=BufferSlicer;exports.FdSlicer=FdSlicer;util.inherits(FdSlicer,EventEmitter);function FdSlicer(fd,options){options=options||{};EventEmitter.call(this);this.fd=fd;this.pend=new Pend;this.pend.max=1;this.refCount=0;this.autoClose=!!options.autoClose}FdSlicer.prototype.read=function(buffer,offset,length,position,callback){var self=this;self.pend.go(function(cb){fs.read(self.fd,buffer,offset,length,position,function(err,bytesRead,buffer){cb();callback(err,bytesRead,buffer)})})};FdSlicer.prototype.write=function(buffer,offset,length,position,callback){var self=this;self.pend.go(function(cb){fs.write(self.fd,buffer,offset,length,position,function(err,written,buffer){cb();callback(err,written,buffer)})})};FdSlicer.prototype.createReadStream=function(options){return new ReadStream(this,options)};FdSlicer.prototype.createWriteStream=function(options){return new WriteStream(this,options)};FdSlicer.prototype.ref=function(){this.refCount+=1};FdSlicer.prototype.unref=function(){var self=this;self.refCount-=1;if(self.refCount>0)return;if(self.refCount<0)throw new Error("invalid unref");if(self.autoClose){fs.close(self.fd,onCloseDone)}function onCloseDone(err){if(err){self.emit("error",err)}else{self.emit("close")}}};util.inherits(ReadStream,Readable);function ReadStream(context,options){options=options||{};Readable.call(this,options);this.context=context;this.context.ref();this.start=options.start||0;this.endOffset=options.end;this.pos=this.start;this.destroyed=false}ReadStream.prototype._read=function(n){var self=this;if(self.destroyed)return;var toRead=Math.min(self._readableState.highWaterMark,n);if(self.endOffset!=null){toRead=Math.min(toRead,self.endOffset-self.pos)}if(toRead<=0){self.destroyed=true;self.push(null);self.context.unref();return}self.context.pend.go(function(cb){if(self.destroyed)return cb();var buffer=new Buffer(toRead);fs.read(self.context.fd,buffer,0,toRead,self.pos,function(err,bytesRead){if(err){self.destroy(err)}else if(bytesRead===0){self.destroyed=true;self.push(null);self.context.unref()}else{self.pos+=bytesRead;self.push(buffer.slice(0,bytesRead))}cb()})})};ReadStream.prototype.destroy=function(err){if(this.destroyed)return;err=err||new Error("stream destroyed");this.destroyed=true;this.emit("error",err);this.context.unref()};util.inherits(WriteStream,Writable);function WriteStream(context,options){options=options||{};Writable.call(this,options);this.context=context;this.context.ref();this.start=options.start||0;this.endOffset=options.end==null?Infinity:+options.end;this.bytesWritten=0;this.pos=this.start;this.destroyed=false;this.on("finish",this.destroy.bind(this))}WriteStream.prototype._write=function(buffer,encoding,callback){var self=this;if(self.destroyed)return;if(self.pos+buffer.length>self.endOffset){var err=new Error("maximum file length exceeded");err.code="ETOOBIG";self.destroy();callback(err);return}self.context.pend.go(function(cb){if(self.destroyed)return cb();fs.write(self.context.fd,buffer,0,buffer.length,self.pos,function(err,bytes){if(err){self.destroy();cb();callback(err)}else{self.bytesWritten+=bytes;self.pos+=bytes;self.emit("progress");cb();callback()}})})};WriteStream.prototype.destroy=function(){if(this.destroyed)return;this.destroyed=true;this.context.unref()};util.inherits(BufferSlicer,EventEmitter);function BufferSlicer(buffer){EventEmitter.call(this);this.refCount=0;this.buffer=buffer}BufferSlicer.prototype.read=function(buffer,offset,length,position,callback){var end=position+length;var delta=end-this.buffer.length;var written=delta>0?delta:length;this.buffer.copy(buffer,offset,position,end);setImmediate(function(){callback(null,written)})};BufferSlicer.prototype.write=function(buffer,offset,length,position,callback){buffer.copy(this.buffer,position,offset,offset+length);setImmediate(function(){callback(null,length,buffer)})};BufferSlicer.prototype.createReadStream=function(options){options=options||{};var readStream=new PassThrough(options);readStream.start=options.start||0;readStream.endOffset=options.end;readStream.pos=readStream.endOffset||this.buffer.length;readStream.destroyed=false;readStream.write(this.buffer.slice(readStream.start,readStream.pos));readStream.end();readStream.destroy=function(){readStream.destroyed=true};return readStream};BufferSlicer.prototype.createWriteStream=function(options){var bufferSlicer=this;options=options||{};var writeStream=new Writable(options);writeStream.start=options.start||0;writeStream.endOffset=options.end==null?this.buffer.length:+options.end;writeStream.bytesWritten=0;writeStream.pos=writeStream.start;writeStream.destroyed=false;writeStream._write=function(buffer,encoding,callback){if(writeStream.destroyed)return;var end=writeStream.pos+buffer.length;if(end>writeStream.endOffset){var err=new Error("maximum file length exceeded");err.code="ETOOBIG";writeStream.destroyed=true;callback(err);return}buffer.copy(bufferSlicer.buffer,writeStream.pos,0,buffer.length);writeStream.bytesWritten+=buffer.length;writeStream.pos=end;writeStream.emit("progress");callback()};writeStream.destroy=function(){writeStream.destroyed=true};return writeStream};BufferSlicer.prototype.ref=function(){this.refCount+=1};BufferSlicer.prototype.unref=function(){this.refCount-=1;if(this.refCount<0){throw new Error("invalid unref")}};function createFromBuffer(buffer){return new BufferSlicer(buffer)}function createFromFd(fd,options){return new FdSlicer(fd,options)}},{events:undefined,fs:undefined,pend:452,stream:undefined,util:undefined}],304:[function(require,module,exports){module.exports=require("./lib/file.js")},{"./lib/file.js":305}],305:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _bluebird=require("bluebird");var _bluebird2=_interopRequireDefault(_bluebird);var _path=require("path");var _path2=_interopRequireDefault(_path);var _minimatch=require("minimatch");var _minimatch2=_interopRequireDefault(_minimatch);var _fsp=require("./fsp");var _fsp2=_interopRequireDefault(_fsp);var _lock=require("./lock");var _lock2=_interopRequireDefault(_lock);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function joinWith(dir){return function(file){return _path2.default.join(dir,file)}}var File=function(){function File(pathname){_classCallCheck(this,File);this._dir=process.cwd();this._pathname=pathname}_createClass(File,[{key:"_getStatsSync",value:function _getStatsSync(){return _fsp2.default.statSync(this._pathname)}},{key:"_getStats",value:function _getStats(){return _fsp2.default.statAsync(this._pathname)}},{key:"_isHiddenFile",value:function _isHiddenFile(){return/^\./.test(_path2.default.basename(this._pathname))}},{key:"_isHiddenDirectory",value:function _isHiddenDirectory(){return/(^|\/)\.[^\/\.]/g.test(this._pathname)}},{key:"_depth",value:function _depth(pathname){return pathname.split(_path2.default.sep).length-1}},{key:"_access",value:function _access(permission){var hasPermission=true;return _fsp2.default.accessAsync(this._pathname,permission).catch(function(){return hasPermission=false}).then(function(){return hasPermission})}},{key:"_checkAsyncStats",value:function _checkAsyncStats(type){return this._getStats().then(function(stats){return stats[type]()})}},{key:"isDirectorySync",value:function isDirectorySync(){return this._getStatsSync().isDirectory()}},{key:"isSocketSync",value:function isSocketSync(){return this._getStatsSync().isSocket()}},{key:"isFileSync",value:function isFileSync(){return this._getStatsSync().isFile()}},{key:"isDirectory",value:function isDirectory(){return this._checkAsyncStats("isDirectory")}},{key:"isSocket",value:function isSocket(){return this._checkAsyncStats("isSocket")}},{key:"isFile",value:function isFile(){return this._checkAsyncStats("isFile")}},{key:"isHiddenSync",value:function isHiddenSync(){if(!this.isDirectorySync()){return this._isHiddenFile()}return this._isHiddenDirectory()}},{key:"isHidden",value:function isHidden(){var _this=this;this.isDirectory().then(function(isDirectory){if(!isDirectory){return _this._isHiddenFile()}return _this._isHiddenDirectory()})}},{key:"rename",value:function rename(pathname){var _this2=this;var newname=pathname instanceof File?pathname.getName():pathname;return _fsp2.default.renameAsync(this._pathname,newname).then(function(){_this2._pathname=newname})}},{key:"getListSync",value:function getListSync(){var _this3=this;if(this.isDirectorySync()){return _fsp2.default.readdirSync(this._pathname).map(function(file){return _path2.default.join(_this3._pathname,file)})}return null}},{key:"getList",value:function getList(glob){return this.getFiles(glob).then(function(list){if(!list)return[];return list.map(function(pathname){return pathname.getName()})})}},{key:"getFiles",value:function getFiles(glob){if(!this.isDirectory())return _bluebird2.default.resolve(null);var results=_fsp2.default.readdirAsync(this._pathname).map(joinWith(this._pathname)).then(function(list){if(!list)return _bluebird2.default.resolve(null);return list.map(function(pathname){return File.create(pathname)})});if(glob)return results.filter(function(file){return file.isMatch(glob)});return results}},{key:"getFilesSync",value:function getFilesSync(glob){if(this.isDirectorySync()){var files=this.getListSync().map(function(pathname){return File.create(pathname)});if(glob)return files.filter(function(file){return file.isMatch(glob)});return files}return null}},{key:"getDepthSync",value:function getDepthSync(){if(!this.isDirectorySync()){return this._depth(_path2.default.dirname(this._pathname))}return this._depth(this._pathname)}},{key:"getName",value:function getName(){return this._pathname}},{key:"getAbsolutePath",value:function getAbsolutePath(){if(_path2.default.isAbsolute(this._pathname)){return this._pathname}return[this._dir,this._pathname].join(_path2.default.sep)}},{key:"getCanonicalPath",value:function getCanonicalPath(){return _path2.default.normalize(this.getAbsolutePath())}},{key:"getPathExtension",value:function getPathExtension(){return _path2.default.extname(this._pathname).substring(1)}},{key:"isMatch",value:function isMatch(globPattern){var glob=new _minimatch2.default.Minimatch(globPattern,{matchBase:true});return glob.match(this._pathname)}},{key:"lastModifiedSync",value:function lastModifiedSync(){return this._getStatsSync()["mtime"]}},{key:"lastAccessedSync",value:function lastAccessedSync(){return this._getStatsSync()["atime"]}},{key:"lastChangedSync",value:function lastChangedSync(){return this._getStatsSync()["ctime"]}},{key:"sizeSync",value:function sizeSync(){return this._getStatsSync().size}},{key:"isWritable",value:function isWritable(){return this._access(_fsp2.default.W_OK)}},{key:"isReadable",value:function isReadable(){return this._access(_fsp2.default.R_OK)}},{key:"isExecutable",value:function isExecutable(){return this._access(_fsp2.default.X_OK)}},{key:"delete",value:function _delete(){return _fsp2.default.unlinkAsync(this._pathname)}},{key:"withLock",value:function withLock(fn){var _this4=this;return _lock2.default.lockAsync(this._pathname).then(function(){return fn()}).finally(function(){_lock2.default.unlockAsync(_this4._pathname)})}}],[{key:"create",value:function create(filename){return new File(filename)}}]);return File}();module.exports.create=File.create},{"./fsp":306,"./lock":307,bluebird:206,minimatch:432,path:undefined}],306:[function(require,module,exports){"use strict";var _fs=require("fs");var _fs2=_interopRequireDefault(_fs);var _bluebird=require("bluebird");var _bluebird2=_interopRequireDefault(_bluebird);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_bluebird2.default.promisifyAll(_fs2.default)},{bluebird:206,fs:undefined}],307:[function(require,module,exports){"use strict";var _properLockfile=require("proper-lockfile");var _properLockfile2=_interopRequireDefault(_properLockfile);var _bluebird=require("bluebird");var _bluebird2=_interopRequireDefault(_bluebird);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_bluebird2.default.promisifyAll(_properLockfile2.default)},{bluebird:206,"proper-lockfile":454}],308:[function(require,module,exports){module.exports=require("./lib/filehound").default},{"./lib/filehound":310}],309:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.copy=copy;exports.from=from;exports.fromFirst=fromFirst;var _lodash=require("lodash");var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function copy(array){return _lodash2.default.cloneDeep(array)}function from(_arguments){if(_lodash2.default.isArray(_arguments[0]))return _arguments[0];return Array.prototype.slice.call(_arguments)}function fromFirst(_arguments){return[_arguments[0]]}},{lodash:423}],310:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=require("lodash");var _lodash2=_interopRequireDefault(_lodash);var _bluebird=require("bluebird");var _bluebird2=_interopRequireDefault(_bluebird);var _path=require("path");var _path2=_interopRequireDefault(_path);var _fileJs=require("file-js");var _fileJs2=_interopRequireDefault(_fileJs);var _functions=require("./functions");var _files=require("./files");var _arrays=require("./arrays");var _unitCompare=require("unit-compare");var _events=require("events");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function isDefined(value){return value!==undefined}function flatten(a,b){return a.concat(b)}function getFilename(file){return file.getName()}function isRegExpMatch(pattern){return function(file){return new RegExp(pattern).test(file.getName())}}function cleanExtension(ext){if(_lodash2.default.startsWith(ext,".")){return ext.slice(1)}return ext}var FileHound=function(_EventEmitter){_inherits(FileHound,_EventEmitter);function FileHound(){_classCallCheck(this,FileHound);var _this=_possibleConstructorReturn(this,(FileHound.__proto__||Object.getPrototypeOf(FileHound)).call(this));_this._filters=[];_this._searchPaths=[];_this._searchPaths.push(process.cwd());_this._ignoreHiddenDirectories=false;_this._isMatch=_lodash2.default.noop;_this._sync=false;_this._directoriesOnly=false;return _this}_createClass(FileHound,[{key:"modified",value:function modified(pattern){this.addFilter(function(file){var modified=file.lastModifiedSync();return(0,_unitCompare.isDate)(modified).assert(pattern)});return this}},{key:"accessed",value:function accessed(pattern){this.addFilter(function(file){var accessed=file.lastAccessedSync();return(0,_unitCompare.isDate)(accessed).assert(pattern)});return this}},{key:"changed",value:function changed(pattern){this.addFilter(function(file){var changed=file.lastChangedSync();return(0,_unitCompare.isDate)(changed).assert(pattern)});return this}},{key:"addFilter",value:function addFilter(filter){this._filters.push(filter);return this}},{key:"paths",value:function paths(){this._searchPaths=_lodash2.default.uniq((0,_arrays.from)(arguments)).map(_path2.default.normalize);return this}},{key:"path",value:function path(){return this.paths((0,_arrays.fromFirst)(arguments))}},{key:"discard",value:function discard(){var _this2=this;var patterns=(0,_arrays.from)(arguments);patterns.forEach(function(pattern){_this2.addFilter((0,_functions.negate)(isRegExpMatch(pattern)))});return this}},{key:"ext",value:function ext(){var extensions=(0,_arrays.from)(arguments).map(cleanExtension);this.addFilter(function(file){return _lodash2.default.includes(extensions,file.getPathExtension())});return this}},{key:"size",value:function size(sizeExpression){this.addFilter(function(file){var size=file.sizeSync();return(0,_unitCompare.isNumber)(size).assert(sizeExpression)});return this}},{key:"isEmpty",value:function isEmpty(){this.size(0);return this}},{key:"glob",value:function glob(globPattern){return this.match(globPattern)}},{key:"match",value:function match(globPattern){this.addFilter(function(file){return file.isMatch(globPattern)});return this}},{key:"not",value:function not(){this.negateFilters=true;return this}},{key:"ignoreHiddenFiles",value:function ignoreHiddenFiles(){this.addFilter(function(file){return!file.isHiddenSync()});return this}},{key:"ignoreHiddenDirectories",value:function ignoreHiddenDirectories(){this._ignoreHiddenDirectories=true;return this}},{key:"directory",value:function directory(){this._directoriesOnly=true;return this}},{key:"socket",value:function socket(){this.addFilter(function(file){return file.isSocket()});return this}},{key:"depth",value:function depth(_depth){this.maxDepth=_depth;return this}},{key:"find",value:function find(cb){var _this3=this;this._initFilters();var searchAsync=this._searchAsync.bind(this);var searches=_bluebird2.default.map(this.getSearchPaths(),searchAsync);return _bluebird2.default.all(searches).reduce(flatten).map(getFilename).catch(function(e){_this3.emit("error",e);throw e}).finally(function(){_this3.emit("end")}).asCallback(cb)}},{key:"findSync",value:function findSync(){this._initFilters();var searchSync=this._searchSync.bind(this);return this.getSearchPaths().map(searchSync).reduce(flatten).map(getFilename)}},{key:"_atMaxDepth",value:function _atMaxDepth(root,dir){var depth=dir.getDepthSync()-root.getDepthSync();return isDefined(this.maxDepth)&&depth>this.maxDepth}},{key:"_shouldFilterDirectory",value:function _shouldFilterDirectory(root,dir){return this._atMaxDepth(root,dir)||this._ignoreHiddenDirectories&&dir.isHiddenSync()}},{key:"_newMatcher",value:function _newMatcher(){var isMatch=(0,_functions.compose)(this._filters);if(this.negateFilters){return(0,_functions.negate)(isMatch)}return isMatch}},{key:"_initFilters",value:function _initFilters(){this._isMatch=this._newMatcher()}},{key:"_searchSync",value:function _searchSync(dir){this._sync=true;var root=_fileJs2.default.create(dir);var trackedPaths=[];var files=this._search(root,root,trackedPaths);return this._directoriesOnly?trackedPaths.filter(this._isMatch):files}},{key:"_searchAsync",value:function _searchAsync(dir){var _this4=this;var root=_fileJs2.default.create(dir);var trackedPaths=[];var pending=this._search(root,root,trackedPaths);return pending.then(function(files){if(_this4._directoriesOnly)return trackedPaths.filter(_this4._isMatch);files.forEach(function(file){_this4.emit("match",file.getName())});return files})}},{key:"_search",value:function _search(root,path,trackedPaths){var _this5=this;if(this._shouldFilterDirectory(root,path))return[];var getFiles=this._sync?path.getFilesSync.bind(path):path.getFiles.bind(path);return getFiles().map(function(file){if(file.isDirectorySync()){if(!_this5._shouldFilterDirectory(root,file))trackedPaths.push(file);return _this5._search(root,file,trackedPaths)}return file}).reduce(flatten,[]).filter(this._isMatch)}},{key:"getSearchPaths",value:function getSearchPaths(){var paths=isDefined(this.maxDepth)?this._searchPaths:(0,_files.reducePaths)(this._searchPaths);return(0,_arrays.copy)(paths)}}],[{key:"create",value:function create(){return new FileHound}},{key:"any",value:function any(){var args=(0,_arrays.from)(arguments);return _bluebird2.default.all(args).reduce(flatten,[])}}]);return FileHound}(_events.EventEmitter);exports.default=FileHound},{"./arrays":309,"./files":311,"./functions":312,bluebird:206,events:undefined,"file-js":304,lodash:423,path:undefined,"unit-compare":558}],311:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRoot=getRoot;exports.findSubDirectories=findSubDirectories;exports.notSubDirectory=notSubDirectory;exports.isSubDirectory=isSubDirectory;exports.reducePaths=reducePaths;var _lodash=require("lodash");var _lodash2=_interopRequireDefault(_lodash);var _path=require("path");var _path2=_interopRequireDefault(_path);var _os=require("os");var _os2=_interopRequireDefault(_os);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function flatten(a,b){return a.concat(b)}function hasParent(parent){var root=getRoot(parent);return parent&&parent!==root&&parent!=="."}function getParent(dir){return _path2.default.dirname(dir)}function getRoot(dir){return _os2.default.platform()==="win32"?dir.split(_path2.default.sep)[0]+_path2.default.sep:_path2.default.sep}function getSubDirectories(base,allPaths){return allPaths.filter(function(candidate){return base!==candidate&&isSubDirectory(base,candidate)})}function findSubDirectories(paths){return paths.map(function(path){return getSubDirectories(path,paths)}).reduce(flatten,[])}function notSubDirectory(subDirs){return function(path){return!_lodash2.default.includes(subDirs,path)}}function isSubDirectory(base,candidate){var parent=candidate;while(hasParent(parent)){if(base===parent){return true}parent=getParent(parent)}return false}function reducePaths(searchPaths){if(searchPaths.length===1){return searchPaths}var subDirs=findSubDirectories(searchPaths.sort());return searchPaths.filter(notSubDirectory(subDirs))}},{lodash:423,os:undefined,path:undefined}],312:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.negate=negate;exports.compose=compose;var _lodash=require("lodash");var _lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function negate(fn){return function(args){return!fn(args)}}function compose(args){var functions=_lodash2.default.isFunction(args)?Array.from(arguments):args;return function(file){var match=true;for(var i=0;i<functions.length;i++){match=match&&functions[i](file)}return match}}},{lodash:423}],313:[function(require,module,exports){"use strict";var debug=require("debug")("finalhandler");var encodeUrl=require("encodeurl");var escapeHtml=require("escape-html");var onFinished=require("on-finished");var parseUrl=require("parseurl");var statuses=require("statuses");var unpipe=require("unpipe");var DOUBLE_SPACE_REGEXP=/\x20{2}/g;var NEWLINE_REGEXP=/\n/g;var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};var isFinished=onFinished.isFinished;function createHtmlDocument(message){var body=escapeHtml(message).replace(NEWLINE_REGEXP,"<br>").replace(DOUBLE_SPACE_REGEXP," &nbsp;");return"<!DOCTYPE html>\n"+'<html lang="en">\n'+"<head>\n"+'<meta charset="utf-8">\n'+"<title>Error</title>\n"+"</head>\n"+"<body>\n"+"<pre>"+body+"</pre>\n"+"</body>\n"+"</html>\n"}module.exports=finalhandler;function finalhandler(req,res,options){var opts=options||{};var env=opts.env||process.env.NODE_ENV||"development";var onerror=opts.onerror;return function(err){var headers;var msg;var status;if(!err&&headersSent(res)){debug("cannot 404 after headers sent");return}if(err){status=getErrorStatusCode(err);if(status!==undefined){headers=getErrorHeaders(err)}if(status===undefined){status=getResponseStatusCode(res)}msg=getErrorMessage(err,status,env)}else{status=404;msg="Cannot "+req.method+" "+encodeUrl(parseUrl.original(req).pathname)}debug("default %s",status);if(err&&onerror){defer(onerror,err,req,res)}if(headersSent(res)){debug("cannot %d after headers sent",status);req.socket.destroy();return}send(req,res,status,headers,msg)}}function getErrorHeaders(err){if(!err.headers||typeof err.headers!=="object"){return undefined}var headers=Object.create(null);var keys=Object.keys(err.headers);for(var i=0;i<keys.length;i++){var key=keys[i];headers[key]=err.headers[key]}return headers}function getErrorMessage(err,status,env){var msg;if(env!=="production"){msg=err.stack;if(!msg&&typeof err.toString==="function"){msg=err.toString()}}return msg||statuses[status]}function getErrorStatusCode(err){if(typeof err.status==="number"&&err.status>=400&&err.status<600){return err.status}if(typeof err.statusCode==="number"&&err.statusCode>=400&&err.statusCode<600){return err.statusCode}return undefined}function getResponseStatusCode(res){var status=res.statusCode;if(typeof status!=="number"||status<400||status>599){status=500}return status}function headersSent(res){return typeof res.headersSent!=="boolean"?Boolean(res._header):res.headersSent}function send(req,res,status,headers,message){function write(){var body=createHtmlDocument(message);res.statusCode=status;res.statusMessage=statuses[status];setHeaders(res,headers);res.setHeader("Content-Security-Policy","default-src 'self'");res.setHeader("X-Content-Type-Options","nosniff");res.setHeader("Content-Type","text/html; charset=utf-8");res.setHeader("Content-Length",Buffer.byteLength(body,"utf8"));if(req.method==="HEAD"){res.end();return}res.end(body,"utf8")}if(isFinished(req)){write();return}unpipe(req);onFinished(req,write);req.resume()}function setHeaders(res,headers){if(!headers){return}var keys=Object.keys(headers);for(var i=0;i<keys.length;i++){var key=keys[i];res.setHeader(key,headers[key])}}},{debug:316,encodeurl:279,"escape-html":281,"on-finished":447,parseurl:450,statuses:518,unpipe:564}],314:[function(require,module,exports){arguments[4][245][0].apply(exports,arguments)},{"./debug":315,dup:245}],315:[function(require,module,exports){arguments[4][246][0].apply(exports,arguments)},{dup:246,ms:439}],316:[function(require,module,exports){arguments[4][247][0].apply(exports,arguments)},{"./browser.js":314,"./node.js":317,dup:247}],317:[function(require,module,exports){arguments[4][248][0].apply(exports,arguments)},{"./debug":315,dup:248,fs:undefined,net:undefined,tty:undefined,util:undefined}],318:[function(require,module,exports){module.exports=ForeverAgent;ForeverAgent.SSL=ForeverAgentSSL;var util=require("util"),Agent=require("http").Agent,net=require("net"),tls=require("tls"),AgentSSL=require("https").Agent;function getConnectionName(host,port){var name="";if(typeof host==="string"){name=host+":"+port}else{name=host.host+":"+host.port+":"+(host.localAddress?host.localAddress+":":":")}return name}function ForeverAgent(options){var self=this;self.options=options||{};self.requests={};self.sockets={};self.freeSockets={};self.maxSockets=self.options.maxSockets||Agent.defaultMaxSockets;self.minSockets=self.options.minSockets||ForeverAgent.defaultMinSockets;self.on("free",function(socket,host,port){var name=getConnectionName(host,port);if(self.requests[name]&&self.requests[name].length){self.requests[name].shift().onSocket(socket)}else if(self.sockets[name].length<self.minSockets){if(!self.freeSockets[name])self.freeSockets[name]=[];self.freeSockets[name].push(socket);var onIdleError=function(){socket.destroy()};socket._onIdleError=onIdleError;socket.on("error",onIdleError)}else{socket.destroy()}})}util.inherits(ForeverAgent,Agent);ForeverAgent.defaultMinSockets=5;ForeverAgent.prototype.createConnection=net.createConnection;ForeverAgent.prototype.addRequestNoreuse=Agent.prototype.addRequest;ForeverAgent.prototype.addRequest=function(req,host,port){var name=getConnectionName(host,port);if(typeof host!=="string"){var options=host;port=options.port;host=options.host}if(this.freeSockets[name]&&this.freeSockets[name].length>0&&!req.useChunkedEncodingByDefault){var idleSocket=this.freeSockets[name].pop();idleSocket.removeListener("error",idleSocket._onIdleError);delete idleSocket._onIdleError;req._reusedSocket=true;req.onSocket(idleSocket)}else{this.addRequestNoreuse(req,host,port)}};ForeverAgent.prototype.removeSocket=function(s,name,host,port){if(this.sockets[name]){var index=this.sockets[name].indexOf(s);if(index!==-1){this.sockets[name].splice(index,1)}}else if(this.sockets[name]&&this.sockets[name].length===0){delete this.sockets[name];delete this.requests[name]}if(this.freeSockets[name]){var index=this.freeSockets[name].indexOf(s);if(index!==-1){this.freeSockets[name].splice(index,1);if(this.freeSockets[name].length===0){delete this.freeSockets[name]}}}if(this.requests[name]&&this.requests[name].length){this.createSocket(name,host,port).emit("free")}};function ForeverAgentSSL(options){ForeverAgent.call(this,options)}util.inherits(ForeverAgentSSL,ForeverAgent);ForeverAgentSSL.prototype.createConnection=createConnectionSSL;ForeverAgentSSL.prototype.addRequestNoreuse=AgentSSL.prototype.addRequest;function createConnectionSSL(port,host,options){if(typeof port==="object"){options=port}else if(typeof host==="object"){options=host}else if(typeof options==="object"){options=options}else{options={}}if(typeof port==="number"){options.port=port}if(typeof host==="string"){options.host=host}return tls.connect(options)}},{http:undefined,https:undefined,net:undefined,tls:undefined,util:undefined}],319:[function(require,module,exports){var CombinedStream=require("combined-stream");var util=require("util");var path=require("path");var http=require("http");var https=require("https");var parseUrl=require("url").parse;var fs=require("fs");var mime=require("mime-types");var asynckit=require("asynckit");var populate=require("./populate.js");module.exports=FormData;util.inherits(FormData,CombinedStream);function FormData(options){if(!(this instanceof FormData)){return new FormData}this._overheadLength=0;this._valueLength=0;this._valuesToMeasure=[];CombinedStream.call(this);options=options||{};for(var option in options){this[option]=options[option]}}FormData.LINE_BREAK="\r\n";FormData.DEFAULT_CONTENT_TYPE="application/octet-stream";FormData.prototype.append=function(field,value,options){options=options||{};if(typeof options=="string"){options={filename:options}}var append=CombinedStream.prototype.append.bind(this);if(typeof value=="number"){value=""+value}if(util.isArray(value)){this._error(new Error("Arrays are not supported."));return}var header=this._multiPartHeader(field,value,options);var footer=this._multiPartFooter();append(header);append(value);append(footer);this._trackLength(header,value,options)};FormData.prototype._trackLength=function(header,value,options){var valueLength=0;if(options.knownLength!=null){valueLength+=+options.knownLength}else if(Buffer.isBuffer(value)){valueLength=value.length}else if(typeof value==="string"){valueLength=Buffer.byteLength(value)}this._valueLength+=valueLength;this._overheadLength+=Buffer.byteLength(header)+FormData.LINE_BREAK.length;if(!value||!value.path&&!(value.readable&&value.hasOwnProperty("httpVersion"))){return}if(!options.knownLength){this._valuesToMeasure.push(value)}};FormData.prototype._lengthRetriever=function(value,callback){if(value.hasOwnProperty("fd")){if(value.end!=undefined&&value.end!=Infinity&&value.start!=undefined){callback(null,value.end+1-(value.start?value.start:0))}else{fs.stat(value.path,function(err,stat){var fileSize;if(err){callback(err);return}fileSize=stat.size-(value.start?value.start:0);callback(null,fileSize)})}}else if(value.hasOwnProperty("httpVersion")){callback(null,+value.headers["content-length"])}else if(value.hasOwnProperty("httpModule")){value.on("response",function(response){value.pause();callback(null,+response.headers["content-length"])});value.resume()}else{callback("Unknown stream")}};FormData.prototype._multiPartHeader=function(field,value,options){if(typeof options.header=="string"){return options.header}var contentDisposition=this._getContentDisposition(value,options);var contentType=this._getContentType(value,options);var contents="";var headers={"Content-Disposition":["form-data",'name="'+field+'"'].concat(contentDisposition||[]),"Content-Type":[].concat(contentType||[])};if(typeof options.header=="object"){populate(headers,options.header)}var header;for(var prop in headers){if(!headers.hasOwnProperty(prop))continue;header=headers[prop];if(header==null){continue}if(!Array.isArray(header)){header=[header]}if(header.length){contents+=prop+": "+header.join("; ")+FormData.LINE_BREAK}}return"--"+this.getBoundary()+FormData.LINE_BREAK+contents+FormData.LINE_BREAK};FormData.prototype._getContentDisposition=function(value,options){var filename,contentDisposition;if(typeof options.filepath==="string"){filename=path.normalize(options.filepath).replace(/\\/g,"/")}else if(options.filename||value.name||value.path){filename=path.basename(options.filename||value.name||value.path)}else if(value.readable&&value.hasOwnProperty("httpVersion")){filename=path.basename(value.client._httpMessage.path)}if(filename){contentDisposition='filename="'+filename+'"'}return contentDisposition};FormData.prototype._getContentType=function(value,options){var contentType=options.contentType;if(!contentType&&value.name){contentType=mime.lookup(value.name)}if(!contentType&&value.path){contentType=mime.lookup(value.path)}if(!contentType&&value.readable&&value.hasOwnProperty("httpVersion")){contentType=value.headers["content-type"]}if(!contentType&&(options.filepath||options.filename)){contentType=mime.lookup(options.filepath||options.filename)}if(!contentType&&typeof value=="object"){contentType=FormData.DEFAULT_CONTENT_TYPE}return contentType};FormData.prototype._multiPartFooter=function(){return function(next){var footer=FormData.LINE_BREAK;var lastPart=this._streams.length===0;if(lastPart){footer+=this._lastBoundary()}next(footer)}.bind(this)};FormData.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+FormData.LINE_BREAK};FormData.prototype.getHeaders=function(userHeaders){var header;var formHeaders={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(header in userHeaders){if(userHeaders.hasOwnProperty(header)){formHeaders[header.toLowerCase()]=userHeaders[header]}}return formHeaders};FormData.prototype.getBoundary=function(){if(!this._boundary){this._generateBoundary()}return this._boundary};FormData.prototype._generateBoundary=function(){var boundary="--------------------------";for(var i=0;i<24;i++){boundary+=Math.floor(Math.random()*10).toString(16)}this._boundary=boundary};FormData.prototype.getLengthSync=function(){var knownLength=this._overheadLength+this._valueLength;if(this._streams.length){knownLength+=this._lastBoundary().length}if(!this.hasKnownLength()){this._error(new Error("Cannot calculate proper length in synchronous way."))}return knownLength};FormData.prototype.hasKnownLength=function(){var hasKnownLength=true;if(this._valuesToMeasure.length){hasKnownLength=false}return hasKnownLength};FormData.prototype.getLength=function(cb){var knownLength=this._overheadLength+this._valueLength;if(this._streams.length){knownLength+=this._lastBoundary().length}if(!this._valuesToMeasure.length){process.nextTick(cb.bind(this,null,knownLength));return}asynckit.parallel(this._valuesToMeasure,this._lengthRetriever,function(err,values){if(err){cb(err);return}values.forEach(function(length){knownLength+=length});cb(null,knownLength)})};FormData.prototype.submit=function(params,cb){var request,options,defaults={method:"post"};if(typeof params=="string"){params=parseUrl(params);options=populate({port:params.port,path:params.pathname,host:params.hostname,protocol:params.protocol},defaults)}else{options=populate(params,defaults);if(!options.port){options.port=options.protocol=="https:"?443:80}}options.headers=this.getHeaders(params.headers);if(options.protocol=="https:"){request=https.request(options)}else{request=http.request(options)}this.getLength(function(err,length){if(err){this._error(err);return}request.setHeader("Content-Length",length);this.pipe(request);if(cb){request.on("error",cb);request.on("response",cb.bind(this,null))}}.bind(this));return request};FormData.prototype._error=function(err){if(!this.error){this.error=err;this.pause();this.emit("error",err)}};FormData.prototype.toString=function(){return"[object FormData]"}},{"./populate.js":320,asynckit:186,"combined-stream":255,fs:undefined,http:undefined,https:undefined,"mime-types":429,path:undefined,url:undefined,util:undefined}],320:[function(require,module,exports){module.exports=function(dst,src){Object.keys(src).forEach(function(prop){dst[prop]=dst[prop]||src[prop]});return dst}},{}],321:[function(require,module,exports){"use strict";module.exports=forwarded;function forwarded(req){if(!req){throw new TypeError("argument req is required")}var proxyAddrs=parse(req.headers["x-forwarded-for"]||"");var socketAddr=req.connection.remoteAddress;var addrs=[socketAddr].concat(proxyAddrs);return addrs}function parse(header){var end=header.length;var list=[];var start=header.length;for(var i=header.length-1;i>=0;i--){switch(header.charCodeAt(i)){case 32:if(start===end){start=end=i}break;case 44:if(start!==end){list.push(header.substring(start,end))}start=end=i;break;default:start=i;break}}if(start!==end){list.push(header.substring(start,end))}return list}},{}],322:[function(require,module,exports){"use strict";var CACHE_CONTROL_NO_CACHE_REGEXP=/(?:^|,)\s*?no-cache\s*?(?:,|$)/;module.exports=fresh;function fresh(reqHeaders,resHeaders){var modifiedSince=reqHeaders["if-modified-since"];var noneMatch=reqHeaders["if-none-match"];if(!modifiedSince&&!noneMatch){return false}var cacheControl=reqHeaders["cache-control"];if(cacheControl&&CACHE_CONTROL_NO_CACHE_REGEXP.test(cacheControl)){return false}if(noneMatch&&noneMatch!=="*"){var etag=resHeaders["etag"];if(!etag){return false}var etagStale=true;var matches=parseTokenList(noneMatch);for(var i=0;i<matches.length;i++){var match=matches[i];if(match===etag||match==="W/"+etag||"W/"+match===etag){etagStale=false;break}}if(etagStale){return false}}if(modifiedSince){var lastModified=resHeaders["last-modified"];var modifiedStale=!lastModified||!(parseHttpDate(lastModified)<=parseHttpDate(modifiedSince));if(modifiedStale){return false}}return true}function parseHttpDate(date){var timestamp=date&&Date.parse(date);return typeof timestamp==="number"?timestamp:NaN}function parseTokenList(str){var end=0;var list=[];var start=0;for(var i=0,len=str.length;i<len;i++){switch(str.charCodeAt(i)){case 32:if(start===end){start=end=i+1}break;case 44:list.push(str.substring(start,end));start=end=i+1;break;default:end=i+1;break}}list.push(str.substring(start,end));return list}},{}],323:[function(require,module,exports){"use strict";var fs=require("fs");module.exports=clone(fs);function clone(obj){if(obj===null||typeof obj!=="object")return obj;if(obj instanceof Object)var copy={__proto__:obj.__proto__};else var copy=Object.create(null);Object.getOwnPropertyNames(obj).forEach(function(key){Object.defineProperty(copy,key,Object.getOwnPropertyDescriptor(obj,key))});return copy}},{fs:undefined}],324:[function(require,module,exports){var fs=require("fs");var polyfills=require("./polyfills.js");var legacy=require("./legacy-streams.js");var queue=[];var util=require("util");function noop(){}var debug=noop;if(util.debuglog)debug=util.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))debug=function(){var m=util.format.apply(util,arguments);m="GFS4: "+m.split(/\n/).join("\nGFS4: ");console.error(m)};if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")){process.on("exit",function(){debug(queue);require("assert").equal(queue.length,0)})}module.exports=patch(require("./fs.js"));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH){module.exports=patch(fs)}module.exports.close=fs.close=function(fs$close){return function(fd,cb){return fs$close.call(fs,fd,function(err){if(!err)retry();if(typeof cb==="function")cb.apply(this,arguments)})}}(fs.close);module.exports.closeSync=fs.closeSync=function(fs$closeSync){return function(fd){var rval=fs$closeSync.apply(fs,arguments);retry();return rval}}(fs.closeSync);function patch(fs){polyfills(fs);fs.gracefulify=patch;fs.FileReadStream=ReadStream;fs.FileWriteStream=WriteStream;fs.createReadStream=createReadStream;fs.createWriteStream=createWriteStream;var fs$readFile=fs.readFile;fs.readFile=readFile;function readFile(path,options,cb){if(typeof options==="function")cb=options,options=null;return go$readFile(path,options,cb);function go$readFile(path,options,cb){return fs$readFile(path,options,function(err){if(err&&(err.code==="EMFILE"||err.code==="ENFILE"))enqueue([go$readFile,[path,options,cb]]);else{if(typeof cb==="function")cb.apply(this,arguments);retry()}})}}var fs$writeFile=fs.writeFile;fs.writeFile=writeFile;function writeFile(path,data,options,cb){if(typeof options==="function")cb=options,options=null;return go$writeFile(path,data,options,cb);function go$writeFile(path,data,options,cb){return fs$writeFile(path,data,options,function(err){if(err&&(err.code==="EMFILE"||err.code==="ENFILE"))enqueue([go$writeFile,[path,data,options,cb]]);else{if(typeof cb==="function")cb.apply(this,arguments);retry()}})}}var fs$appendFile=fs.appendFile;if(fs$appendFile)fs.appendFile=appendFile;function appendFile(path,data,options,cb){if(typeof options==="function")cb=options,options=null;return go$appendFile(path,data,options,cb);function go$appendFile(path,data,options,cb){return fs$appendFile(path,data,options,function(err){if(err&&(err.code==="EMFILE"||err.code==="ENFILE"))enqueue([go$appendFile,[path,data,options,cb]]);else{if(typeof cb==="function")cb.apply(this,arguments);retry()}})}}var fs$readdir=fs.readdir;fs.readdir=readdir;function readdir(path,options,cb){var args=[path];if(typeof options!=="function"){args.push(options)}else{cb=options}args.push(go$readdir$cb);return go$readdir(args);function go$readdir$cb(err,files){if(files&&files.sort)files.sort();if(err&&(err.code==="EMFILE"||err.code==="ENFILE"))enqueue([go$readdir,[args]]);else{if(typeof cb==="function")cb.apply(this,arguments);retry()}}}function go$readdir(args){return fs$readdir.apply(fs,args)}if(process.version.substr(0,4)==="v0.8"){var legStreams=legacy(fs);ReadStream=legStreams.ReadStream;WriteStream=legStreams.WriteStream}var fs$ReadStream=fs.ReadStream;ReadStream.prototype=Object.create(fs$ReadStream.prototype);ReadStream.prototype.open=ReadStream$open;var fs$WriteStream=fs.WriteStream;WriteStream.prototype=Object.create(fs$WriteStream.prototype);WriteStream.prototype.open=WriteStream$open;fs.ReadStream=ReadStream;fs.WriteStream=WriteStream;function ReadStream(path,options){if(this instanceof ReadStream)return fs$ReadStream.apply(this,arguments),this;else return ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function ReadStream$open(){var that=this;open(that.path,that.flags,that.mode,function(err,fd){if(err){if(that.autoClose)that.destroy();that.emit("error",err)}else{that.fd=fd;that.emit("open",fd);that.read()}})}function WriteStream(path,options){if(this instanceof WriteStream)return fs$WriteStream.apply(this,arguments),this;else return WriteStream.apply(Object.create(WriteStream.prototype),arguments)}function WriteStream$open(){var that=this;open(that.path,that.flags,that.mode,function(err,fd){if(err){that.destroy();that.emit("error",err)}else{that.fd=fd;that.emit("open",fd)}})}function createReadStream(path,options){return new ReadStream(path,options)}function createWriteStream(path,options){return new WriteStream(path,options)}var fs$open=fs.open;fs.open=open;function open(path,flags,mode,cb){if(typeof mode==="function")cb=mode,mode=null;return go$open(path,flags,mode,cb);function go$open(path,flags,mode,cb){return fs$open(path,flags,mode,function(err,fd){if(err&&(err.code==="EMFILE"||err.code==="ENFILE"))enqueue([go$open,[path,flags,mode,cb]]);else{if(typeof cb==="function")cb.apply(this,arguments);retry()}})}}return fs}function enqueue(elem){debug("ENQUEUE",elem[0].name,elem[1]);queue.push(elem)}function retry(){var elem=queue.shift();if(elem){debug("RETRY",elem[0].name,elem[1]);elem[0].apply(null,elem[1])}}},{"./fs.js":323,"./legacy-streams.js":325,"./polyfills.js":326,assert:undefined,fs:undefined,util:undefined}],325:[function(require,module,exports){var Stream=require("stream").Stream;module.exports=legacy;function legacy(fs){return{ReadStream:ReadStream,WriteStream:WriteStream};function ReadStream(path,options){if(!(this instanceof ReadStream))return new ReadStream(path,options);Stream.call(this);var self=this;this.path=path;this.fd=null;this.readable=true;this.paused=false;this.flags="r";this.mode=438;this.bufferSize=64*1024;options=options||{};var keys=Object.keys(options);for(var index=0,length=keys.length;index<length;index++){var key=keys[index];this[key]=options[key]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.end===undefined){this.end=Infinity}else if("number"!==typeof this.end){throw TypeError("end must be a Number")}if(this.start>this.end){throw new Error("start must be <= end")}this.pos=this.start}if(this.fd!==null){process.nextTick(function(){self._read()});return}fs.open(this.path,this.flags,this.mode,function(err,fd){if(err){self.emit("error",err);self.readable=false;return}self.fd=fd;self.emit("open",fd);self._read()})}function WriteStream(path,options){if(!(this instanceof WriteStream))return new WriteStream(path,options);Stream.call(this);this.path=path;this.fd=null;this.writable=true;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;options=options||{};var keys=Object.keys(options);for(var index=0,length=keys.length;index<length;index++){var key=keys[index];this[key]=options[key]}if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.start<0){throw new Error("start must be >= zero")}this.pos=this.start}this.busy=false;this._queue=[];if(this.fd===null){this._open=fs.open;this._queue.push([this._open,this.path,this.flags,this.mode,undefined]);this.flush()}}}},{stream:undefined}],326:[function(require,module,exports){var fs=require("./fs.js");var constants=require("constants");var origCwd=process.cwd;var cwd=null;var platform=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!cwd)cwd=origCwd.call(process);return cwd};try{process.cwd()}catch(er){}var chdir=process.chdir;process.chdir=function(d){cwd=null;chdir.call(process,d)};module.exports=patch;function patch(fs){if(constants.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)){patchLchmod(fs)}if(!fs.lutimes){patchLutimes(fs)}fs.chown=chownFix(fs.chown);fs.fchown=chownFix(fs.fchown);fs.lchown=chownFix(fs.lchown);fs.chmod=chmodFix(fs.chmod);fs.fchmod=chmodFix(fs.fchmod);fs.lchmod=chmodFix(fs.lchmod);fs.chownSync=chownFixSync(fs.chownSync);fs.fchownSync=chownFixSync(fs.fchownSync);fs.lchownSync=chownFixSync(fs.lchownSync);fs.chmodSync=chmodFixSync(fs.chmodSync);fs.fchmodSync=chmodFixSync(fs.fchmodSync);fs.lchmodSync=chmodFixSync(fs.lchmodSync);fs.stat=statFix(fs.stat);fs.fstat=statFix(fs.fstat);fs.lstat=statFix(fs.lstat);fs.statSync=statFixSync(fs.statSync);fs.fstatSync=statFixSync(fs.fstatSync);fs.lstatSync=statFixSync(fs.lstatSync);if(!fs.lchmod){fs.lchmod=function(path,mode,cb){if(cb)process.nextTick(cb)};fs.lchmodSync=function(){}}if(!fs.lchown){fs.lchown=function(path,uid,gid,cb){if(cb)process.nextTick(cb)};fs.lchownSync=function(){}}if(platform==="win32"){fs.rename=function(fs$rename){return function(from,to,cb){var start=Date.now();var backoff=0;fs$rename(from,to,function CB(er){if(er&&(er.code==="EACCES"||er.code==="EPERM")&&Date.now()-start<6e4){setTimeout(function(){fs.stat(to,function(stater,st){if(stater&&stater.code==="ENOENT")fs$rename(from,to,CB);else cb(er)})},backoff);if(backoff<100)backoff+=10;return}if(cb)cb(er)})}}(fs.rename)}fs.read=function(fs$read){return function(fd,buffer,offset,length,position,callback_){var callback;if(callback_&&typeof callback_==="function"){var eagCounter=0;callback=function(er,_,__){if(er&&er.code==="EAGAIN"&&eagCounter<10){eagCounter++;return fs$read.call(fs,fd,buffer,offset,length,position,callback)}callback_.apply(this,arguments)}}return fs$read.call(fs,fd,buffer,offset,length,position,callback)}}(fs.read);fs.readSync=function(fs$readSync){return function(fd,buffer,offset,length,position){var eagCounter=0;while(true){try{return fs$readSync.call(fs,fd,buffer,offset,length,position)}catch(er){if(er.code==="EAGAIN"&&eagCounter<10){eagCounter++;continue}throw er}}}}(fs.readSync)}function patchLchmod(fs){fs.lchmod=function(path,mode,callback){fs.open(path,constants.O_WRONLY|constants.O_SYMLINK,mode,function(err,fd){if(err){if(callback)callback(err);return}fs.fchmod(fd,mode,function(err){fs.close(fd,function(err2){if(callback)callback(err||err2)})})})};fs.lchmodSync=function(path,mode){var fd=fs.openSync(path,constants.O_WRONLY|constants.O_SYMLINK,mode);var threw=true;var ret;try{ret=fs.fchmodSync(fd,mode);threw=false}finally{if(threw){try{fs.closeSync(fd)}catch(er){}}else{fs.closeSync(fd)}}return ret}}function patchLutimes(fs){if(constants.hasOwnProperty("O_SYMLINK")){fs.lutimes=function(path,at,mt,cb){fs.open(path,constants.O_SYMLINK,function(er,fd){if(er){if(cb)cb(er);return}fs.futimes(fd,at,mt,function(er){fs.close(fd,function(er2){if(cb)cb(er||er2)})})})};fs.lutimesSync=function(path,at,mt){var fd=fs.openSync(path,constants.O_SYMLINK);var ret;var threw=true;try{ret=fs.futimesSync(fd,at,mt);threw=false}finally{if(threw){try{fs.closeSync(fd)}catch(er){}}else{fs.closeSync(fd)}}return ret}}else{fs.lutimes=function(_a,_b,_c,cb){if(cb)process.nextTick(cb)};fs.lutimesSync=function(){}}}function chmodFix(orig){if(!orig)return orig;return function(target,mode,cb){return orig.call(fs,target,mode,function(er){if(chownErOk(er))er=null;if(cb)cb.apply(this,arguments)})}}function chmodFixSync(orig){if(!orig)return orig;return function(target,mode){try{return orig.call(fs,target,mode)}catch(er){if(!chownErOk(er))throw er}}}function chownFix(orig){if(!orig)return orig;return function(target,uid,gid,cb){return orig.call(fs,target,uid,gid,function(er){if(chownErOk(er))er=null;if(cb)cb.apply(this,arguments)})}}function chownFixSync(orig){if(!orig)return orig;return function(target,uid,gid){try{return orig.call(fs,target,uid,gid)}catch(er){if(!chownErOk(er))throw er}}}function statFix(orig){if(!orig)return orig;return function(target,cb){return orig.call(fs,target,function(er,stats){if(!stats)return cb.apply(this,arguments);if(stats.uid<0)stats.uid+=4294967296;if(stats.gid<0)stats.gid+=4294967296;if(cb)cb.apply(this,arguments)})}}function statFixSync(orig){if(!orig)return orig;return function(target){var stats=orig.call(fs,target);if(stats.uid<0)stats.uid+=4294967296;if(stats.gid<0)stats.gid+=4294967296;return stats}}function chownErOk(er){if(!er)return true;if(er.code==="ENOSYS")return true;var nonroot=!process.getuid||process.getuid()!==0;if(nonroot){if(er.code==="EINVAL"||er.code==="EPERM")return true}return false}},{"./fs.js":323,constants:undefined}],327:[function(require,module,exports){module.exports={$id:"afterRequest.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:true,required:["lastAccess","eTag","hitCount"],properties:{expires:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},lastAccess:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},eTag:{type:"string"},hitCount:{type:"integer"},comment:{type:"string"}}}},{}],328:[function(require,module,exports){module.exports={$id:"beforeRequest.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:true,required:["lastAccess","eTag","hitCount"],properties:{expires:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},lastAccess:{type:"string",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))?"},eTag:{type:"string"},hitCount:{type:"integer"},comment:{type:"string"}}}},{}],329:[function(require,module,exports){module.exports={$id:"browser.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","version"],properties:{name:{type:"string"},version:{type:"string"},comment:{type:"string"}}}},{}],330:[function(require,module,exports){module.exports={$id:"cache.json#",$schema:"http://json-schema.org/draft-06/schema#",properties:{beforeRequest:{oneOf:[{type:"null"},{$ref:"beforeRequest.json#"}]},afterRequest:{oneOf:[{type:"null"},{$ref:"afterRequest.json#"}]},comment:{type:"string"}}}},{}],331:[function(require,module,exports){module.exports={$id:"content.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["size","mimeType"],properties:{size:{type:"integer"},compression:{type:"integer"},mimeType:{type:"string"},text:{type:"string"},encoding:{type:"string"},comment:{type:"string"}}}},{}],332:[function(require,module,exports){module.exports={$id:"cookie.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","value"],properties:{name:{type:"string"},value:{type:"string"},path:{type:"string"},domain:{type:"string"},expires:{type:["string","null"],format:"date-time"},httpOnly:{type:"boolean"},secure:{type:"boolean"},comment:{type:"string"}}}},{}],333:[function(require,module,exports){module.exports={$id:"creator.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","version"],properties:{name:{type:"string"},version:{type:"string"},comment:{type:"string"}}}},{}],334:[function(require,module,exports){module.exports={$id:"entry.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:true,required:["startedDateTime","time","request","response","cache","timings"],properties:{pageref:{type:"string"},startedDateTime:{type:"string",format:"date-time",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"},time:{type:"number",min:0},request:{$ref:"request.json#"},response:{$ref:"response.json#"},cache:{$ref:"cache.json#"},timings:{$ref:"timings.json#"},serverIPAddress:{type:"string",oneOf:[{format:"ipv4"},{format:"ipv6"}]},connection:{type:"string"},comment:{type:"string"}}}},{}],335:[function(require,module,exports){module.exports={$id:"har.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["log"],properties:{log:{$ref:"log.json#"}}}},{}],336:[function(require,module,exports){module.exports={$id:"header.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","value"],properties:{name:{type:"string"},value:{type:"string"},comment:{type:"string"}}}},{}],337:[function(require,module,exports){"use strict";module.exports={afterRequest:require("./afterRequest.json"),beforeRequest:require("./beforeRequest.json"),browser:require("./browser.json"),cache:require("./cache.json"),content:require("./content.json"),cookie:require("./cookie.json"),creator:require("./creator.json"),entry:require("./entry.json"),har:require("./har.json"),header:require("./header.json"),log:require("./log.json"),page:require("./page.json"),pageTimings:require("./pageTimings.json"),postData:require("./postData.json"),query:require("./query.json"),request:require("./request.json"),response:require("./response.json"),timings:require("./timings.json")}},{"./afterRequest.json":327,"./beforeRequest.json":328,"./browser.json":329,"./cache.json":330,"./content.json":331,"./cookie.json":332,"./creator.json":333,"./entry.json":334,"./har.json":335,"./header.json":336,"./log.json":338,"./page.json":339,"./pageTimings.json":340,"./postData.json":341,"./query.json":342,"./request.json":343,"./response.json":344,"./timings.json":345}],338:[function(require,module,exports){module.exports={$id:"log.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["version","creator","entries"],properties:{version:{type:"string"},creator:{$ref:"creator.json#"},browser:{$ref:"browser.json#"},pages:{type:"array",items:{$ref:"page.json#"}},entries:{type:"array",items:{$ref:"entry.json#"}},comment:{type:"string"}}}},{}],339:[function(require,module,exports){module.exports={$id:"page.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:true,required:["startedDateTime","id","title","pageTimings"],properties:{startedDateTime:{type:"string",format:"date-time",pattern:"^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"},id:{type:"string",unique:true},title:{type:"string"},pageTimings:{$ref:"pageTimings.json#"},comment:{type:"string"}}}},{}],340:[function(require,module,exports){module.exports={$id:"pageTimings.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",properties:{onContentLoad:{type:"number",min:-1},onLoad:{type:"number",min:-1},comment:{type:"string"}}}},{}],341:[function(require,module,exports){module.exports={$id:"postData.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",optional:true,required:["mimeType"],properties:{mimeType:{type:"string"},text:{type:"string"},params:{type:"array",required:["name"],properties:{name:{type:"string"},value:{type:"string"},fileName:{type:"string"},contentType:{type:"string"},comment:{type:"string"}}},comment:{type:"string"}}}},{}],342:[function(require,module,exports){module.exports={$id:"query.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["name","value"],properties:{name:{type:"string"},value:{type:"string"},comment:{type:"string"}}}},{}],343:[function(require,module,exports){module.exports={$id:"request.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["method","url","httpVersion","cookies","headers","queryString","headersSize","bodySize"],properties:{method:{type:"string"},url:{type:"string",format:"uri"},httpVersion:{type:"string"},cookies:{type:"array",items:{$ref:"cookie.json#"}},headers:{type:"array",items:{$ref:"header.json#"}},queryString:{type:"array",items:{$ref:"query.json#"}},postData:{$ref:"postData.json#"},headersSize:{type:"integer"},bodySize:{type:"integer"},comment:{type:"string"}}}},{}],344:[function(require,module,exports){module.exports={$id:"response.json#",$schema:"http://json-schema.org/draft-06/schema#",type:"object",required:["status","statusText","httpVersion","cookies","headers","content","redirectURL","headersSize","bodySize"],properties:{status:{type:"integer"},statusText:{type:"string"},httpVersion:{type:"string"},cookies:{type:"array",items:{$ref:"cookie.json#"}},headers:{type:"array",items:{$ref:"header.json#"}},content:{$ref:"content.json#"},redirectURL:{type:"string"},headersSize:{type:"integer"},bodySize:{type:"integer"},comment:{type:"string"}}}},{}],345:[function(require,module,exports){module.exports={$id:"timings.json#",$schema:"http://json-schema.org/draft-06/schema#",required:["send","wait","receive"],properties:{dns:{type:"number",min:-1},connect:{type:"number",min:-1},blocked:{type:"number",min:-1},send:{type:"number",min:-1},wait:{type:"number",min:-1},receive:{type:"number",min:-1},ssl:{type:"number",min:-1},comment:{type:"string"}}}},{}],346:[function(require,module,exports){function HARError(errors){var message="validation failed";this.name="HARError";this.message=message;this.errors=errors;if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,this.constructor)}else{this.stack=new Error(message).stack}}HARError.prototype=Error.prototype;module.exports=HARError},{}],347:[function(require,module,exports){var Ajv=require("ajv");var HARError=require("./error");var schemas=require("har-schema");var ajv;function validate(name,data){data=data||{};ajv=ajv||new Ajv({allErrors:true,schemas:schemas});var validate=ajv.getSchema(name+".json");return new Promise(function(resolve,reject){var valid=validate(data);!valid?reject(new HARError(validate.errors)):resolve(data)})}exports.afterRequest=function(data){return validate("afterRequest",data)};exports.beforeRequest=function(data){return validate("beforeRequest",data)};exports.browser=function(data){return validate("browser",data)};exports.cache=function(data){return validate("cache",data)};exports.content=function(data){return validate("content",data)};exports.cookie=function(data){return validate("cookie",data)};exports.creator=function(data){return validate("creator",data)};exports.entry=function(data){return validate("entry",data)};exports.har=function(data){return validate("har",data)};exports.header=function(data){return validate("header",data)};exports.log=function(data){return validate("log",data)};exports.page=function(data){return validate("page",data)};exports.pageTimings=function(data){return validate("pageTimings",data)};exports.postData=function(data){return validate("postData",data)};exports.query=function(data){return validate("query",data)};exports.request=function(data){return validate("request",data)};exports.response=function(data){return validate("response",data)};exports.timings=function(data){return validate("timings",data)}},{"./error":346,ajv:139,"har-schema":337}],348:[function(require,module,exports){"use strict";module.exports=function(flag,argv){argv=argv||process.argv;var terminatorPos=argv.indexOf("--");var prefix=/^-{1,2}/.test(flag)?"":"--";var pos=argv.indexOf(prefix+flag);return pos!==-1&&(terminatorPos===-1?true:pos<terminatorPos)}},{}],349:[function(require,module,exports){"use strict";const Url=require("url");const Hoek=require("hoek");const Cryptiles=require("cryptiles");const Crypto=require("./crypto");const Utils=require("./utils");const internals={};exports.header=function(uri,method,options){const result={field:"",artifacts:{}};if(!uri||typeof uri!=="string"&&typeof uri!=="object"||!method||typeof method!=="string"||!options||typeof options!=="object"){result.err="Invalid argument type";return result}const timestamp=options.timestamp||Utils.nowSecs(options.localtimeOffsetMsec);const credentials=options.credentials;if(!credentials||!credentials.id||!credentials.key||!credentials.algorithm){result.err="Invalid credential object";return result}if(Crypto.algorithms.indexOf(credentials.algorithm)===-1){result.err="Unknown algorithm";return result}if(typeof uri==="string"){uri=Url.parse(uri)}const artifacts={ts:timestamp,nonce:options.nonce||Cryptiles.randomString(6),method:method,resource:uri.pathname+(uri.search||""),host:uri.hostname,port:uri.port||(uri.protocol==="http:"?80:443),hash:options.hash,ext:options.ext,app:options.app,dlg:options.dlg};result.artifacts=artifacts;if(!artifacts.hash&&(options.payload||options.payload==="")){artifacts.hash=Crypto.calculatePayloadHash(options.payload,credentials.algorithm,options.contentType)}const mac=Crypto.calculateMac("header",credentials,artifacts);const hasExt=artifacts.ext!==null&&artifacts.ext!==undefined&&artifacts.ext!=="";let header='Hawk id="'+credentials.id+'", ts="'+artifacts.ts+'", nonce="'+artifacts.nonce+(artifacts.hash?'", hash="'+artifacts.hash:"")+(hasExt?'", ext="'+Hoek.escapeHeaderAttribute(artifacts.ext):"")+'", mac="'+mac+'"';if(artifacts.app){header=header+', app="'+artifacts.app+(artifacts.dlg?'", dlg="'+artifacts.dlg:"")+'"'}result.field=header;return result};exports.authenticate=function(res,credentials,artifacts,options,callback){artifacts=Hoek.clone(artifacts);options=options||{};let wwwAttributes=null;let serverAuthAttributes=null;const finalize=function(err){if(callback){const headers={"www-authenticate":wwwAttributes,"server-authorization":serverAuthAttributes};return callback(err,headers)}return!err};if(res.headers["www-authenticate"]){wwwAttributes=Utils.parseAuthorizationHeader(res.headers["www-authenticate"],["ts","tsm","error"]);if(wwwAttributes instanceof Error){wwwAttributes=null;return finalize(new Error("Invalid WWW-Authenticate header"))}if(wwwAttributes.ts){const tsm=Crypto.calculateTsMac(wwwAttributes.ts,credentials);if(tsm!==wwwAttributes.tsm){return finalize(new Error("Invalid server timestamp hash"))}}}if(!res.headers["server-authorization"]&&!options.required){return finalize()}serverAuthAttributes=Utils.parseAuthorizationHeader(res.headers["server-authorization"],["mac","ext","hash"]);if(serverAuthAttributes instanceof Error){serverAuthAttributes=null;return finalize(new Error("Invalid Server-Authorization header"))}artifacts.ext=serverAuthAttributes.ext;artifacts.hash=serverAuthAttributes.hash;const mac=Crypto.calculateMac("response",credentials,artifacts);if(mac!==serverAuthAttributes.mac){return finalize(new Error("Bad response mac"))}if(!options.payload&&options.payload!==""){return finalize()}if(!serverAuthAttributes.hash){return finalize(new Error("Missing response hash attribute"))}const calculatedHash=Crypto.calculatePayloadHash(options.payload,credentials.algorithm,res.headers["content-type"]);if(calculatedHash!==serverAuthAttributes.hash){return finalize(new Error("Bad response payload mac"))}return finalize()};exports.getBewit=function(uri,options){if(!uri||typeof uri!=="string"&&typeof uri!=="object"||!options||typeof options!=="object"||!options.ttlSec){return""}options.ext=options.ext===null||options.ext===undefined?"":options.ext;const now=Utils.now(options.localtimeOffsetMsec);const credentials=options.credentials;if(!credentials||!credentials.id||!credentials.key||!credentials.algorithm){return""}if(Crypto.algorithms.indexOf(credentials.algorithm)===-1){return""}if(typeof uri==="string"){uri=Url.parse(uri)}const exp=Math.floor(now/1e3)+options.ttlSec;const mac=Crypto.calculateMac("bewit",credentials,{ts:exp,nonce:"",method:"GET",resource:uri.pathname+(uri.search||""),host:uri.hostname,port:uri.port||(uri.protocol==="http:"?80:443),ext:options.ext});const bewit=credentials.id+"\\"+exp+"\\"+mac+"\\"+options.ext;return Hoek.base64urlEncode(bewit)};exports.message=function(host,port,message,options){if(!host||typeof host!=="string"||!port||typeof port!=="number"||message===null||message===undefined||typeof message!=="string"||!options||typeof options!=="object"){return null}const timestamp=options.timestamp||Utils.nowSecs(options.localtimeOffsetMsec);const credentials=options.credentials;if(!credentials||!credentials.id||!credentials.key||!credentials.algorithm){return null}if(Crypto.algorithms.indexOf(credentials.algorithm)===-1){return null}const artifacts={ts:timestamp,nonce:options.nonce||Cryptiles.randomString(6),host:host,port:port,hash:Crypto.calculatePayloadHash(message,credentials.algorithm)};const result={id:credentials.id,ts:artifacts.ts,nonce:artifacts.nonce,hash:artifacts.hash,mac:Crypto.calculateMac("message",credentials,artifacts)};return result}},{"./crypto":350,"./utils":353,cryptiles:262,hoek:356,url:undefined}],350:[function(require,module,exports){"use strict";const Crypto=require("crypto");const Url=require("url");const Utils=require("./utils");const internals={};exports.headerVersion="1";exports.algorithms=["sha1","sha256"];exports.calculateMac=function(type,credentials,options){const normalized=exports.generateNormalizedString(type,options);const hmac=Crypto.createHmac(credentials.algorithm,credentials.key).update(normalized);const digest=hmac.digest("base64");return digest};exports.generateNormalizedString=function(type,options){let resource=options.resource||"";if(resource&&resource[0]!=="/"){const url=Url.parse(resource,false);resource=url.path}let normalized="hawk."+exports.headerVersion+"."+type+"\n"+options.ts+"\n"+options.nonce+"\n"+(options.method||"").toUpperCase()+"\n"+resource+"\n"+options.host.toLowerCase()+"\n"+options.port+"\n"+(options.hash||"")+"\n";if(options.ext){normalized=normalized+options.ext.replace("\\","\\\\").replace("\n","\\n")}normalized=normalized+"\n";if(options.app){normalized=normalized+options.app+"\n"+(options.dlg||"")+"\n"}return normalized};exports.calculatePayloadHash=function(payload,algorithm,contentType){const hash=exports.initializePayloadHash(algorithm,contentType);hash.update(payload||"");return exports.finalizePayloadHash(hash)};exports.initializePayloadHash=function(algorithm,contentType){const hash=Crypto.createHash(algorithm);hash.update("hawk."+exports.headerVersion+".payload\n");hash.update(Utils.parseContentType(contentType)+"\n");return hash};exports.finalizePayloadHash=function(hash){hash.update("\n");return hash.digest("base64")};exports.calculateTsMac=function(ts,credentials){const hmac=Crypto.createHmac(credentials.algorithm,credentials.key);hmac.update("hawk."+exports.headerVersion+".ts\n"+ts+"\n");return hmac.digest("base64")};exports.timestampMessage=function(credentials,localtimeOffsetMsec){const now=Utils.nowSecs(localtimeOffsetMsec);const tsm=exports.calculateTsMac(now,credentials);return{ts:now,tsm:tsm}}},{"./utils":353,crypto:undefined,url:undefined}],351:[function(require,module,exports){"use strict";exports.error=exports.Error=require("boom");exports.sntp=require("sntp");exports.server=require("./server");exports.client=require("./client");exports.crypto=require("./crypto");exports.utils=require("./utils");exports.uri={authenticate:exports.server.authenticateBewit,getBewit:exports.client.getBewit}},{"./client":349,"./crypto":350,"./server":352,"./utils":353,boom:249,sntp:493}],352:[function(require,module,exports){"use strict";const Boom=require("boom");const Hoek=require("hoek");const Cryptiles=require("cryptiles");const Crypto=require("./crypto");const Utils=require("./utils");const internals={};exports.authenticate=function(req,credentialsFunc,options,callback){callback=Hoek.nextTick(callback);options.nonceFunc=options.nonceFunc||internals.nonceFunc;options.timestampSkewSec=options.timestampSkewSec||60;const now=Utils.now(options.localtimeOffsetMsec);const request=Utils.parseRequest(req,options);if(request instanceof Error){return callback(Boom.badRequest(request.message))}const attributes=Utils.parseAuthorizationHeader(request.authorization);if(attributes instanceof Error){return callback(attributes)}const artifacts={method:request.method,host:request.host,port:request.port,resource:request.url,ts:attributes.ts,nonce:attributes.nonce,hash:attributes.hash,ext:attributes.ext,app:attributes.app,dlg:attributes.dlg,mac:attributes.mac,id:attributes.id};if(!attributes.id||!attributes.ts||!attributes.nonce||!attributes.mac){return callback(Boom.badRequest("Missing attributes"),null,artifacts)}credentialsFunc(attributes.id,(err,credentials)=>{if(err){return callback(err,credentials||null,artifacts)}if(!credentials){return callback(Utils.unauthorized("Unknown credentials"),null,artifacts)}if(!credentials.key||!credentials.algorithm){return callback(Boom.internal("Invalid credentials"),credentials,artifacts)}if(Crypto.algorithms.indexOf(credentials.algorithm)===-1){return callback(Boom.internal("Unknown algorithm"),credentials,artifacts)}const mac=Crypto.calculateMac("header",credentials,artifacts);if(!Cryptiles.fixedTimeComparison(mac,attributes.mac)){return callback(Utils.unauthorized("Bad mac"),credentials,artifacts)}if(options.payload||options.payload===""){if(!attributes.hash){return callback(Utils.unauthorized("Missing required payload hash"),credentials,artifacts)}const hash=Crypto.calculatePayloadHash(options.payload,credentials.algorithm,request.contentType);if(!Cryptiles.fixedTimeComparison(hash,attributes.hash)){return callback(Utils.unauthorized("Bad payload hash"),credentials,artifacts)}}options.nonceFunc(credentials.key,attributes.nonce,attributes.ts,err=>{if(err){return callback(Utils.unauthorized("Invalid nonce"),credentials,artifacts)}if(Math.abs(attributes.ts*1e3-now)>options.timestampSkewSec*1e3){const tsm=Crypto.timestampMessage(credentials,options.localtimeOffsetMsec);return callback(Utils.unauthorized("Stale timestamp",tsm),credentials,artifacts)}return callback(null,credentials,artifacts)})})};exports.authenticatePayload=function(payload,credentials,artifacts,contentType){const calculatedHash=Crypto.calculatePayloadHash(payload,credentials.algorithm,contentType);return Cryptiles.fixedTimeComparison(calculatedHash,artifacts.hash)};exports.authenticatePayloadHash=function(calculatedHash,artifacts){return Cryptiles.fixedTimeComparison(calculatedHash,artifacts.hash)};exports.header=function(credentials,artifacts,options){options=options||{};if(!artifacts||typeof artifacts!=="object"||typeof options!=="object"){return""}artifacts=Hoek.clone(artifacts);delete artifacts.mac;artifacts.hash=options.hash;artifacts.ext=options.ext;if(!credentials||!credentials.key||!credentials.algorithm){return""}if(Crypto.algorithms.indexOf(credentials.algorithm)===-1){return""}if(!artifacts.hash&&(options.payload||options.payload==="")){artifacts.hash=Crypto.calculatePayloadHash(options.payload,credentials.algorithm,options.contentType)}const mac=Crypto.calculateMac("response",credentials,artifacts);let header='Hawk mac="'+mac+'"'+(artifacts.hash?', hash="'+artifacts.hash+'"':"");if(artifacts.ext!==null&&artifacts.ext!==undefined&&artifacts.ext!==""){header=header+', ext="'+Hoek.escapeHeaderAttribute(artifacts.ext)+'"'}return header};internals.bewitRegex=/^(\/.*)([\?&])bewit\=([^&$]*)(?:&(.+))?$/;exports.authenticateBewit=function(req,credentialsFunc,options,callback){callback=Hoek.nextTick(callback);const now=Utils.now(options.localtimeOffsetMsec);const request=Utils.parseRequest(req,options);if(request instanceof Error){return callback(Boom.badRequest(request.message))}if(request.url.length>Utils.limits.maxMatchLength){return callback(Boom.badRequest("Resource path exceeds max length"))}const resource=request.url.match(internals.bewitRegex);if(!resource){return callback(Utils.unauthorized())}if(!resource[3]){return callback(Utils.unauthorized("Empty bewit"))}if(request.method!=="GET"&&request.method!=="HEAD"){return callback(Utils.unauthorized("Invalid method"))}if(request.authorization){return callback(Boom.badRequest("Multiple authentications"))}const bewitString=Hoek.base64urlDecode(resource[3]);if(bewitString instanceof Error){return callback(Boom.badRequest("Invalid bewit encoding"))}const bewitParts=bewitString.split("\\");if(bewitParts.length!==4){return callback(Boom.badRequest("Invalid bewit structure"))}const bewit={id:bewitParts[0],exp:parseInt(bewitParts[1],10),mac:bewitParts[2],ext:bewitParts[3]||""};if(!bewit.id||!bewit.exp||!bewit.mac){return callback(Boom.badRequest("Missing bewit attributes"))}let url=resource[1];if(resource[4]){url=url+resource[2]+resource[4]}if(bewit.exp*1e3<=now){return callback(Utils.unauthorized("Access expired"),null,bewit)}credentialsFunc(bewit.id,(err,credentials)=>{if(err){return callback(err,credentials||null,bewit.ext)}if(!credentials){return callback(Utils.unauthorized("Unknown credentials"),null,bewit)}if(!credentials.key||!credentials.algorithm){return callback(Boom.internal("Invalid credentials"),credentials,bewit)}if(Crypto.algorithms.indexOf(credentials.algorithm)===-1){return callback(Boom.internal("Unknown algorithm"),credentials,bewit)}const mac=Crypto.calculateMac("bewit",credentials,{ts:bewit.exp,nonce:"",method:"GET",resource:url,host:request.host,port:request.port,ext:bewit.ext});if(!Cryptiles.fixedTimeComparison(mac,bewit.mac)){return callback(Utils.unauthorized("Bad mac"),credentials,bewit)}return callback(null,credentials,bewit)})};exports.authenticateMessage=function(host,port,message,authorization,credentialsFunc,options,callback){callback=Hoek.nextTick(callback);options.nonceFunc=options.nonceFunc||internals.nonceFunc;options.timestampSkewSec=options.timestampSkewSec||60;const now=Utils.now(options.localtimeOffsetMsec);if(!authorization.id||!authorization.ts||!authorization.nonce||!authorization.hash||!authorization.mac){return callback(Boom.badRequest("Invalid authorization"))}credentialsFunc(authorization.id,(err,credentials)=>{if(err){return callback(err,credentials||null)}if(!credentials){return callback(Utils.unauthorized("Unknown credentials"))}if(!credentials.key||!credentials.algorithm){return callback(Boom.internal("Invalid credentials"),credentials)}if(Crypto.algorithms.indexOf(credentials.algorithm)===-1){return callback(Boom.internal("Unknown algorithm"),credentials)}const artifacts={ts:authorization.ts,nonce:authorization.nonce,host:host,port:port,hash:authorization.hash};const mac=Crypto.calculateMac("message",credentials,artifacts);if(!Cryptiles.fixedTimeComparison(mac,authorization.mac)){return callback(Utils.unauthorized("Bad mac"),credentials)}const hash=Crypto.calculatePayloadHash(message,credentials.algorithm);if(!Cryptiles.fixedTimeComparison(hash,authorization.hash)){return callback(Utils.unauthorized("Bad message hash"),credentials)}options.nonceFunc(credentials.key,authorization.nonce,authorization.ts,err=>{if(err){return callback(Utils.unauthorized("Invalid nonce"),credentials)}if(Math.abs(authorization.ts*1e3-now)>options.timestampSkewSec*1e3){return callback(Utils.unauthorized("Stale timestamp"),credentials)}return callback(null,credentials)})})};internals.nonceFunc=function(key,nonce,ts,nonceCallback){return nonceCallback()}},{"./crypto":350,"./utils":353,boom:249,cryptiles:262,hoek:356}],353:[function(require,module,exports){"use strict";const Sntp=require("sntp");const Boom=require("boom");const internals={};exports.version=function(){return require("../package.json").version};exports.limits={maxMatchLength:4096};internals.hostHeaderRegex=/^(?:(?:\r\n)?\s)*((?:[^:]+)|(?:\[[^\]]+\]))(?::(\d+))?(?:(?:\r\n)?\s)*$/;exports.parseHost=function(req,hostHeaderName){hostHeaderName=hostHeaderName?hostHeaderName.toLowerCase():"host";const hostHeader=req.headers[hostHeaderName];if(!hostHeader){return null}if(hostHeader.length>exports.limits.maxMatchLength){return null}const hostParts=hostHeader.match(internals.hostHeaderRegex);if(!hostParts){return null}return{name:hostParts[1],port:hostParts[2]?hostParts[2]:req.connection&&req.connection.encrypted?443:80}};exports.parseContentType=function(header){if(!header){return""}return header.split(";")[0].trim().toLowerCase()};exports.parseRequest=function(req,options){if(!req.headers){return req}let host;if(!options.host||!options.port){host=exports.parseHost(req,options.hostHeaderName);if(!host){return new Error("Invalid Host header")}}const request={method:req.method,url:req.url,host:options.host||host.name,port:options.port||host.port,authorization:req.headers.authorization,contentType:req.headers["content-type"]||""};return request};exports.now=function(localtimeOffsetMsec){return Sntp.now()+(localtimeOffsetMsec||0)};exports.nowSecs=function(localtimeOffsetMsec){return Math.floor(exports.now(localtimeOffsetMsec)/1e3)};internals.authHeaderRegex=/^(\w+)(?:\s+(.*))?$/;internals.attributeRegex=/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/;exports.parseAuthorizationHeader=function(header,keys){keys=keys||["id","ts","nonce","hash","ext","mac","app","dlg"];if(!header){return Boom.unauthorized(null,"Hawk")}if(header.length>exports.limits.maxMatchLength){return Boom.badRequest("Header length too long")}const headerParts=header.match(internals.authHeaderRegex);if(!headerParts){return Boom.badRequest("Invalid header syntax")}const scheme=headerParts[1];if(scheme.toLowerCase()!=="hawk"){return Boom.unauthorized(null,"Hawk")}const attributesString=headerParts[2];if(!attributesString){return Boom.badRequest("Invalid header syntax")}const attributes={};let errorMessage="";const verify=attributesString.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,($0,$1,$2)=>{if(keys.indexOf($1)===-1){errorMessage="Unknown attribute: "+$1;return}if($2.match(internals.attributeRegex)===null){errorMessage="Bad attribute value: "+$1;return}if(attributes.hasOwnProperty($1)){errorMessage="Duplicate attribute: "+$1;return}attributes[$1]=$2;return""});if(verify!==""){return Boom.badRequest(errorMessage||"Bad header format")}return attributes};exports.unauthorized=function(message,attributes){return Boom.unauthorized(message||null,"Hawk",attributes)}},{"../package.json":354,boom:249,sntp:493}],354:[function(require,module,exports){module.exports={_from:"hawk@~6.0.2",_id:"hawk@6.0.2",_inBundle:false,_integrity:"sha512-miowhl2+U7Qle4vdLqDdPt9m09K6yZhkLDTWGoUiUzrQCn+mHHSmfJgAyGaLRZbPmTqfFFjRV1QWCW0VWUJBbQ==",_location:"/hawk",_phantomChildren:{},_requested:{type:"range",registry:true,raw:"hawk@~6.0.2",name:"hawk",escapedName:"hawk",rawSpec:"~6.0.2",saveSpec:null,fetchSpec:"~6.0.2"},_requiredBy:["/request"],_resolved:"https://registry.npmjs.org/hawk/-/hawk-6.0.2.tgz",_shasum:"af4d914eb065f9b5ce4d9d11c1cb2126eecc3038",_spec:"hawk@~6.0.2",_where:"C:\\Users\\Daniel\\GitHub\\r2-streamer-js\\node_modules\\request",author:{name:"Eran Hammer",email:"eran@hammer.io",url:"http://hueniverse.com"},babel:{presets:["es2015"]},browser:"dist/browser.js",bugs:{url:"https://github.com/hueniverse/hawk/issues"},bundleDependencies:false,dependencies:{boom:"4.x.x",cryptiles:"3.x.x",hoek:"4.x.x",sntp:"2.x.x"},deprecated:false,description:"HTTP Hawk Authentication Scheme",devDependencies:{"babel-cli":"^6.1.2","babel-preset-es2015":"^6.1.2",code:"4.x.x",lab:"14.x.x"},engines:{node:">=4.5.0"},homepage:"https://github.com/hueniverse/hawk#readme",keywords:["http","authentication","scheme","hawk"],license:"BSD-3-Clause",main:"lib/index.js",name:"hawk",repository:{type:"git",url:"git://github.com/hueniverse/hawk.git"},scripts:{"build-client":"mkdir -p dist; babel lib/browser.js --out-file dist/browser.js",prepublish:"npm run-script build-client",test:"lab -a code -t 100 -L","test-cov-html":"lab -a code -r html -o coverage.html"},version:"6.0.2"}},{}],355:[function(require,module,exports){"use strict";const internals={};exports.escapeJavaScript=function(input){if(!input){return""}let escaped="";for(let i=0;i<input.length;++i){const charCode=input.charCodeAt(i);if(internals.isSafe(charCode)){escaped+=input[i]}else{escaped+=internals.escapeJavaScriptChar(charCode)}}return escaped};exports.escapeHtml=function(input){if(!input){return""}let escaped="";for(let i=0;i<input.length;++i){const charCode=input.charCodeAt(i);if(internals.isSafe(charCode)){escaped+=input[i]}else{escaped+=internals.escapeHtmlChar(charCode)}}return escaped};exports.escapeJson=function(input){if(!input){return""}const lessThan=60;const greaterThan=62;const andSymbol=38;const lineSeperator=8232;let charCode;return input.replace(/[<>&\u2028\u2029]/g,match=>{charCode=match.charCodeAt(0);if(charCode===lessThan){return"\\u003c"}else if(charCode===greaterThan){return"\\u003e"}else if(charCode===andSymbol){return"\\u0026"}else if(charCode===lineSeperator){return"\\u2028"}return"\\u2029"})};internals.escapeJavaScriptChar=function(charCode){if(charCode>=256){return"\\u"+internals.padLeft(""+charCode,4)}const hexValue=new Buffer(String.fromCharCode(charCode),"ascii").toString("hex");return"\\x"+internals.padLeft(hexValue,2)};internals.escapeHtmlChar=function(charCode){const namedEscape=internals.namedHtml[charCode];if(typeof namedEscape!=="undefined"){return namedEscape}if(charCode>=256){return"&#"+charCode+";"}const hexValue=new Buffer(String.fromCharCode(charCode),"ascii").toString("hex");return"&#x"+internals.padLeft(hexValue,2)+";"};internals.padLeft=function(str,len){while(str.length<len){str="0"+str}return str};internals.isSafe=function(charCode){return typeof internals.safeCharCodes[charCode]!=="undefined"};internals.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"};internals.safeCharCodes=function(){const safe={};for(let i=32;i<123;++i){if(i>=97||i>=65&&i<=90||i>=48&&i<=57||i===32||i===46||i===44||i===45||i===58||i===95){safe[i]=null}}return safe}()},{}],356:[function(require,module,exports){"use strict";const Crypto=require("crypto");const Path=require("path");const Util=require("util");const Escape=require("./escape");const internals={};exports.clone=function(obj,seen){if(typeof obj!=="object"||obj===null){return obj}seen=seen||new Map;const lookup=seen.get(obj);if(lookup){return lookup}let newObj;let cloneDeep=false;if(!Array.isArray(obj)){if(Buffer.isBuffer(obj)){newObj=new Buffer(obj)}else if(obj instanceof Date){newObj=new Date(obj.getTime())}else if(obj instanceof RegExp){newObj=new RegExp(obj)}else{const proto=Object.getPrototypeOf(obj);if(proto&&proto.isImmutable){newObj=obj}else{newObj=Object.create(proto);cloneDeep=true}}}else{newObj=[];cloneDeep=true}seen.set(obj,newObj);if(cloneDeep){const keys=Object.getOwnPropertyNames(obj);for(let i=0;i<keys.length;++i){const key=keys[i];const descriptor=Object.getOwnPropertyDescriptor(obj,key);if(descriptor&&(descriptor.get||descriptor.set)){Object.defineProperty(newObj,key,descriptor)}else{newObj[key]=exports.clone(obj[key],seen)}}}return newObj};exports.merge=function(target,source,isNullOverride,isMergeArrays){exports.assert(target&&typeof target==="object","Invalid target value: must be an object");exports.assert(source===null||source===undefined||typeof source==="object","Invalid source value: must be null, undefined, or an object");if(!source){return target}if(Array.isArray(source)){exports.assert(Array.isArray(target),"Cannot merge array onto an object");if(isMergeArrays===false){target.length=0}for(let i=0;i<source.length;++i){target.push(exports.clone(source[i]))}return target}const keys=Object.keys(source);for(let i=0;i<keys.length;++i){const key=keys[i];const value=source[key];if(value&&typeof value==="object"){if(!target[key]||typeof target[key]!=="object"||Array.isArray(target[key])!==Array.isArray(value)||value instanceof Date||Buffer.isBuffer(value)||value instanceof RegExp){target[key]=exports.clone(value)}else{exports.merge(target[key],value,isNullOverride,isMergeArrays)}}else{if(value!==null&&value!==undefined){target[key]=value}else if(isNullOverride!==false){target[key]=value}}}return target};exports.applyToDefaults=function(defaults,options,isNullOverride){exports.assert(defaults&&typeof defaults==="object","Invalid defaults value: must be an object");exports.assert(!options||options===true||typeof options==="object","Invalid options value: must be true, falsy or an object");if(!options){return null}const copy=exports.clone(defaults);if(options===true){return copy}return exports.merge(copy,options,isNullOverride===true,false)};exports.cloneWithShallow=function(source,keys){if(!source||typeof source!=="object"){return source}const storage=internals.store(source,keys);const copy=exports.clone(source);internals.restore(copy,source,storage);return copy};internals.store=function(source,keys){const storage={};for(let i=0;i<keys.length;++i){const key=keys[i];const value=exports.reach(source,key);if(value!==undefined){storage[key]=value;internals.reachSet(source,key,undefined)}}return storage};internals.restore=function(copy,source,storage){const keys=Object.keys(storage);for(let i=0;i<keys.length;++i){const key=keys[i];internals.reachSet(copy,key,storage[key]);internals.reachSet(source,key,storage[key])}};internals.reachSet=function(obj,key,value){const path=key.split(".");let ref=obj;for(let i=0;i<path.length;++i){const segment=path[i];if(i+1===path.length){ref[segment]=value}ref=ref[segment]}};exports.applyToDefaultsWithShallow=function(defaults,options,keys){exports.assert(defaults&&typeof defaults==="object","Invalid defaults value: must be an object");exports.assert(!options||options===true||typeof options==="object","Invalid options value: must be true, falsy or an object");exports.assert(keys&&Array.isArray(keys),"Invalid keys");if(!options){return null}const copy=exports.cloneWithShallow(defaults,keys);if(options===true){return copy}const storage=internals.store(options,keys);exports.merge(copy,options,false,false);internals.restore(copy,options,storage);return copy};exports.deepEqual=function(obj,ref,options,seen){options=options||{prototype:true};const type=typeof obj;if(type!==typeof ref){return false}if(type!=="object"||obj===null||ref===null){if(obj===ref){return obj!==0||1/obj===1/ref}return obj!==obj&&ref!==ref}seen=seen||[];if(seen.indexOf(obj)!==-1){return true}seen.push(obj);if(Array.isArray(obj)){if(!Array.isArray(ref)){return false}if(!options.part&&obj.length!==ref.length){return false}for(let i=0;i<obj.length;++i){if(options.part){let found=false;for(let j=0;j<ref.length;++j){if(exports.deepEqual(obj[i],ref[j],options)){found=true;break}}return found}if(!exports.deepEqual(obj[i],ref[i],options)){return false}}return true}if(Buffer.isBuffer(obj)){if(!Buffer.isBuffer(ref)){return false}if(obj.length!==ref.length){return false}for(let i=0;i<obj.length;++i){if(obj[i]!==ref[i]){return false}}return true}if(obj instanceof Date){return ref instanceof Date&&obj.getTime()===ref.getTime()}if(obj instanceof RegExp){return ref instanceof RegExp&&obj.toString()===ref.toString()}if(options.prototype){if(Object.getPrototypeOf(obj)!==Object.getPrototypeOf(ref)){return false}}const keys=Object.getOwnPropertyNames(obj);if(!options.part&&keys.length!==Object.getOwnPropertyNames(ref).length){return false}for(let i=0;i<keys.length;++i){const key=keys[i];const descriptor=Object.getOwnPropertyDescriptor(obj,key);if(descriptor.get){if(!exports.deepEqual(descriptor,Object.getOwnPropertyDescriptor(ref,key),options,seen)){return false}}else if(!exports.deepEqual(obj[key],ref[key],options,seen)){return false}}return true};exports.unique=((array,key)=>{let result;if(key){result=[];const index=new Set;array.forEach(item=>{const identifier=item[key];if(!index.has(identifier)){index.add(identifier);result.push(item)}})}else{result=Array.from(new Set(array))}return result});exports.mapToObject=function(array,key){if(!array){return null}const obj={};for(let i=0;i<array.length;++i){if(key){if(array[i][key]){obj[array[i][key]]=true}}else{obj[array[i]]=true}}return obj};exports.intersect=function(array1,array2,justFirst){if(!array1||!array2){return[]}const common=[];const hash=Array.isArray(array1)?exports.mapToObject(array1):array1;const found={};for(let i=0;i<array2.length;++i){if(hash[array2[i]]&&!found[array2[i]]){if(justFirst){return array2[i]}common.push(array2[i]);found[array2[i]]=true}}return justFirst?null:common};exports.contain=function(ref,values,options){let valuePairs=null;if(typeof ref==="object"&&typeof values==="object"&&!Array.isArray(ref)&&!Array.isArray(values)){valuePairs=values;values=Object.keys(values)}else{values=[].concat(values)}options=options||{};exports.assert(arguments.length>=2,"Insufficient arguments");exports.assert(typeof ref==="string"||typeof ref==="object","Reference must be string or an object");exports.assert(values.length,"Values array cannot be empty");let compare;let compareFlags;if(options.deep){compare=exports.deepEqual;const hasOnly=options.hasOwnProperty("only");const hasPart=options.hasOwnProperty("part");compareFlags={prototype:hasOnly?options.only:hasPart?!options.part:false,part:hasOnly?!options.only:hasPart?options.part:true}}else{compare=((a,b)=>a===b)}let misses=false;const matches=new Array(values.length);for(let i=0;i<matches.length;++i){matches[i]=0}if(typeof ref==="string"){let pattern="(";for(let i=0;i<values.length;++i){const value=values[i];exports.assert(typeof value==="string","Cannot compare string reference to non-string value");pattern+=(i?"|":"")+exports.escapeRegex(value)}const regex=new RegExp(pattern+")","g");const leftovers=ref.replace(regex,($0,$1)=>{const index=values.indexOf($1);++matches[index];return""});misses=!!leftovers}else if(Array.isArray(ref)){for(let i=0;i<ref.length;++i){let matched=false;for(let j=0;j<values.length&&matched===false;++j){matched=compare(values[j],ref[i],compareFlags)&&j}if(matched!==false){++matches[matched]}else{misses=true}}}else{const keys=Object.getOwnPropertyNames(ref);for(let i=0;i<keys.length;++i){const key=keys[i];const pos=values.indexOf(key);if(pos!==-1){if(valuePairs&&!compare(valuePairs[key],ref[key],compareFlags)){return false}++matches[pos]}else{misses=true}}}let result=false;for(let i=0;i<matches.length;++i){result=result||!!matches[i];if(options.once&&matches[i]>1||!options.part&&!matches[i]){return false}}if(options.only&&misses){return false}return result};exports.flatten=function(array,target){const result=target||[];for(let i=0;i<array.length;++i){if(Array.isArray(array[i])){exports.flatten(array[i],result)}else{result.push(array[i])}}return result};exports.reach=function(obj,chain,options){if(chain===false||chain===null||typeof chain==="undefined"){return obj}options=options||{};if(typeof options==="string"){options={separator:options}}const path=chain.split(options.separator||".");let ref=obj;for(let i=0;i<path.length;++i){let key=path[i];if(key[0]==="-"&&Array.isArray(ref)){key=key.slice(1,key.length);key=ref.length-key}if(!ref||!((typeof ref==="object"||typeof ref==="function")&&key in ref)||typeof ref!=="object"&&options.functions===false){exports.assert(!options.strict||i+1===path.length,"Missing segment",key,"in reach path ",chain);exports.assert(typeof ref==="object"||options.functions===true||typeof ref!=="function","Invalid segment",key,"in reach path ",chain);ref=options.default;break}ref=ref[key]}return ref};exports.reachTemplate=function(obj,template,options){return template.replace(/{([^}]+)}/g,($0,chain)=>{const value=exports.reach(obj,chain,options);return value===undefined||value===null?"":value})};exports.formatStack=function(stack){const trace=[];for(let i=0;i<stack.length;++i){const item=stack[i];trace.push([item.getFileName(),item.getLineNumber(),item.getColumnNumber(),item.getFunctionName(),item.isConstructor()])}return trace};exports.formatTrace=function(trace){const display=[];for(let i=0;i<trace.length;++i){const row=trace[i];display.push((row[4]?"new ":"")+row[3]+" ("+row[0]+":"+row[1]+":"+row[2]+")")}return display};exports.callStack=function(slice){const v8=Error.prepareStackTrace;Error.prepareStackTrace=function(_,stack){return stack};const capture={};Error.captureStackTrace(capture,this);const stack=capture.stack;Error.prepareStackTrace=v8;const trace=exports.formatStack(stack);return trace.slice(1+slice)};exports.displayStack=function(slice){const trace=exports.callStack(slice===undefined?1:slice+1);return exports.formatTrace(trace)};exports.abortThrow=false;exports.abort=function(message,hideStack){if(process.env.NODE_ENV==="test"||exports.abortThrow===true){throw new Error(message||"Unknown error")}let stack="";if(!hideStack){stack=exports.displayStack(1).join("\n\t")}console.log("ABORT: "+message+"\n\t"+stack);process.exit(1)};exports.assert=function(condition){if(condition){return}if(arguments.length===2&&arguments[1]instanceof Error){throw arguments[1]}let msgs=[];for(let i=1;i<arguments.length;++i){if(arguments[i]!==""){msgs.push(arguments[i])}}msgs=msgs.map(msg=>{return typeof msg==="string"?msg:msg instanceof Error?msg.message:exports.stringify(msg)});throw new Error(msgs.join(" ")||"Unknown error")};exports.Timer=function(){this.ts=0;this.reset()};exports.Timer.prototype.reset=function(){this.ts=Date.now()};exports.Timer.prototype.elapsed=function(){return Date.now()-this.ts};exports.Bench=function(){this.ts=0;this.reset()};exports.Bench.prototype.reset=function(){this.ts=exports.Bench.now()};exports.Bench.prototype.elapsed=function(){return exports.Bench.now()-this.ts};exports.Bench.now=function(){const ts=process.hrtime();return ts[0]*1e3+ts[1]/1e6};exports.escapeRegex=function(string){return string.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")};exports.base64urlEncode=function(value,encoding){exports.assert(typeof value==="string"||Buffer.isBuffer(value),"value must be string or buffer");const buf=Buffer.isBuffer(value)?value:new Buffer(value,encoding||"binary");return buf.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")};exports.base64urlDecode=function(value,encoding){if(typeof value!=="string"){return new Error("Value not a string")}if(!/^[\w\-]*$/.test(value)){return new Error("Invalid character")}const buf=new Buffer(value,"base64");return encoding==="buffer"?buf:buf.toString(encoding||"binary")};exports.escapeHeaderAttribute=function(attribute){exports.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(attribute),"Bad attribute value ("+attribute+")");return attribute.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')};exports.escapeHtml=function(string){return Escape.escapeHtml(string)};exports.escapeJavaScript=function(string){return Escape.escapeJavaScript(string)};exports.escapeJson=function(string){return Escape.escapeJson(string)};exports.nextTick=function(callback){return function(){const args=arguments;process.nextTick(()=>{callback.apply(null,args)})}};exports.once=function(method){if(method._hoekOnce){return method}let once=false;const wrapped=function(){if(!once){once=true;method.apply(null,arguments)}};wrapped._hoekOnce=true;return wrapped};exports.isInteger=Number.isSafeInteger;exports.ignore=function(){};exports.inherits=Util.inherits;exports.format=Util.format;exports.transform=function(source,transform,options){exports.assert(source===null||source===undefined||typeof source==="object"||Array.isArray(source),"Invalid source object: must be null, undefined, an object, or an array");const separator=typeof options==="object"&&options!==null?options.separator||".":".";if(Array.isArray(source)){const results=[];for(let i=0;i<source.length;++i){results.push(exports.transform(source[i],transform,options))}return results}const result={};const keys=Object.keys(transform);for(let i=0;i<keys.length;++i){const key=keys[i];const path=key.split(separator);const sourcePath=transform[key];exports.assert(typeof sourcePath==="string",'All mappings must be "." delineated strings');let segment;let res=result;while(path.length>1){segment=path.shift();if(!res[segment]){res[segment]={}}res=res[segment]}segment=path.shift();res[segment]=exports.reach(source,sourcePath,options)}return result};exports.uniqueFilename=function(path,extension){if(extension){extension=extension[0]!=="."?"."+extension:extension}else{extension=""}path=Path.resolve(path);const name=[Date.now(),process.pid,Crypto.randomBytes(8).toString("hex")].join("-")+extension;return Path.join(path,name)};exports.stringify=function(){try{return JSON.stringify.apply(null,arguments)}catch(err){return"[Cannot display object: "+err.message+"]"}};exports.shallow=function(source){const target={};const keys=Object.keys(source);for(let i=0;i<keys.length;++i){const key=keys[i];target[key]=source[key]}return target}},{"./escape":355,crypto:undefined,path:undefined,util:undefined}],357:[function(require,module,exports){"use strict";var deprecate=require("depd")("http-errors");var setPrototypeOf=require("setprototypeof");var statuses=require("statuses");var inherits=require("inherits");module.exports=createError;module.exports.HttpError=createHttpErrorConstructor();populateConstructorExports(module.exports,statuses.codes,module.exports.HttpError);function codeClass(status){return Number(String(status).charAt(0)+"00")}function createError(){var err;var msg;var status=500;var props={};for(var i=0;i<arguments.length;i++){var arg=arguments[i];if(arg instanceof Error){err=arg;status=err.status||err.statusCode||status;continue}switch(typeof arg){case"string":msg=arg;break;case"number":status=arg;if(i!==0){deprecate("non-first-argument status code; replace with createError("+arg+", ...)")}break;case"object":props=arg;break}}if(typeof status==="number"&&(status<400||status>=600)){deprecate("non-error status code; use only 4xx or 5xx status codes")}if(typeof status!=="number"||!statuses[status]&&(status<400||status>=600)){status=500}var HttpError=createError[status]||createError[codeClass(status)];if(!err){err=HttpError?new HttpError(msg):new Error(msg||statuses[status]);Error.captureStackTrace(err,createError)}if(!HttpError||!(err instanceof HttpError)||err.status!==status){err.expose=status<500;err.status=err.statusCode=status}for(var key in props){if(key!=="status"&&key!=="statusCode"){err[key]=props[key]}}return err}function createHttpErrorConstructor(){function HttpError(){throw new TypeError("cannot construct abstract class")}inherits(HttpError,Error);return HttpError}function createClientErrorConstructor(HttpError,name,code){var className=name.match(/Error$/)?name:name+"Error";function ClientError(message){var msg=message!=null?message:statuses[code];var err=new Error(msg);Error.captureStackTrace(err,ClientError);setPrototypeOf(err,ClientError.prototype);Object.defineProperty(err,"message",{enumerable:true,configurable:true,value:msg,writable:true});Object.defineProperty(err,"name",{enumerable:false,configurable:true,value:className,writable:true});return err}inherits(ClientError,HttpError);ClientError.prototype.status=code;ClientError.prototype.statusCode=code;ClientError.prototype.expose=true;return ClientError}function createServerErrorConstructor(HttpError,name,code){var className=name.match(/Error$/)?name:name+"Error";function ServerError(message){var msg=message!=null?message:statuses[code];var err=new Error(msg);Error.captureStackTrace(err,ServerError);setPrototypeOf(err,ServerError.prototype);Object.defineProperty(err,"message",{enumerable:true,configurable:true,value:msg,writable:true});Object.defineProperty(err,"name",{enumerable:false,configurable:true,value:className,writable:true});return err}inherits(ServerError,HttpError);ServerError.prototype.status=code;ServerError.prototype.statusCode=code;ServerError.prototype.expose=false;return ServerError}function populateConstructorExports(exports,codes,HttpError){codes.forEach(function forEachCode(code){var CodeError;var name=toIdentifier(statuses[code]);switch(codeClass(code)){case 400:CodeError=createClientErrorConstructor(HttpError,name,code);break;case 500:CodeError=createServerErrorConstructor(HttpError,name,code);break}if(CodeError){exports[code]=CodeError;exports[name]=CodeError}});exports["I'mateapot"]=deprecate.function(exports.ImATeapot,'"I\'mateapot"; use "ImATeapot" instead')}function toIdentifier(str){return str.split(" ").map(function(token){return token.slice(0,1).toUpperCase()+token.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}},{depd:270,inherits:400,setprototypeof:358,statuses:518}],358:[function(require,module,exports){module.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);function setProtoOf(obj,proto){obj.__proto__=proto;return obj}function mixinProperties(obj,proto){for(var prop in proto){if(!obj.hasOwnProperty(prop)){obj[prop]=proto[prop]}}return obj}},{}],359:[function(require,module,exports){var parser=require("./parser");var signer=require("./signer");var verify=require("./verify");var utils=require("./utils");module.exports={parse:parser.parseRequest,parseRequest:parser.parseRequest,sign:signer.signRequest,signRequest:signer.signRequest,createSigner:signer.createSigner,isSigner:signer.isSigner,sshKeyToPEM:utils.sshKeyToPEM,sshKeyFingerprint:utils.fingerprint,pemToRsaSSHKey:utils.pemToRsaSSHKey,verify:verify.verifySignature,verifySignature:verify.verifySignature,verifyHMAC:verify.verifyHMAC}},{"./parser":360,"./signer":361,"./utils":362,"./verify":363}],360:[function(require,module,exports){var assert=require("assert-plus");var util=require("util");var utils=require("./utils");var HASH_ALGOS=utils.HASH_ALGOS;var PK_ALGOS=utils.PK_ALGOS;var HttpSignatureError=utils.HttpSignatureError;var InvalidAlgorithmError=utils.InvalidAlgorithmError;var validateAlgorithm=utils.validateAlgorithm;var State={New:0,Params:1};var ParamsState={Name:0,Quote:1,Value:2,Comma:3};function ExpiredRequestError(message){HttpSignatureError.call(this,message,ExpiredRequestError)}util.inherits(ExpiredRequestError,HttpSignatureError);function InvalidHeaderError(message){HttpSignatureError.call(this,message,InvalidHeaderError)}util.inherits(InvalidHeaderError,HttpSignatureError);function InvalidParamsError(message){HttpSignatureError.call(this,message,InvalidParamsError)}util.inherits(InvalidParamsError,HttpSignatureError);function MissingHeaderError(message){HttpSignatureError.call(this,message,MissingHeaderError)}util.inherits(MissingHeaderError,HttpSignatureError);function StrictParsingError(message){HttpSignatureError.call(this,message,StrictParsingError)}util.inherits(StrictParsingError,HttpSignatureError);module.exports={parseRequest:function parseRequest(request,options){assert.object(request,"request");assert.object(request.headers,"request.headers");if(options===undefined){options={}}if(options.headers===undefined){options.headers=[request.headers["x-date"]?"x-date":"date"]}assert.object(options,"options");assert.arrayOfString(options.headers,"options.headers");assert.optionalFinite(options.clockSkew,"options.clockSkew");var authzHeaderName=options.authorizationHeaderName||"authorization";if(!request.headers[authzHeaderName]){throw new MissingHeaderError("no "+authzHeaderName+" header "+"present in the request")}options.clockSkew=options.clockSkew||300;var i=0;var state=State.New;var substate=ParamsState.Name;var tmpName="";var tmpValue="";var parsed={scheme:"",params:{},signingString:""};var authz=request.headers[authzHeaderName];for(i=0;i<authz.length;i++){var c=authz.charAt(i);switch(Number(state)){case State.New:if(c!==" ")parsed.scheme+=c;else state=State.Params;break;case State.Params:switch(Number(substate)){case ParamsState.Name:var code=c.charCodeAt(0);if(code>=65&&code<=90||code>=97&&code<=122){tmpName+=c}else if(c==="="){if(tmpName.length===0)throw new InvalidHeaderError("bad param format");substate=ParamsState.Quote}else{throw new InvalidHeaderError("bad param format")}break;case ParamsState.Quote:if(c==='"'){tmpValue="";substate=ParamsState.Value}else{throw new InvalidHeaderError("bad param format")}break;case ParamsState.Value:if(c==='"'){parsed.params[tmpName]=tmpValue;substate=ParamsState.Comma}else{tmpValue+=c}break;case ParamsState.Comma:if(c===","){tmpName="";substate=ParamsState.Name}else{throw new InvalidHeaderError("bad param format")}break;default:throw new Error("Invalid substate")}break;default:throw new Error("Invalid substate")}}if(!parsed.params.headers||parsed.params.headers===""){if(request.headers["x-date"]){parsed.params.headers=["x-date"]}else{parsed.params.headers=["date"]}}else{parsed.params.headers=parsed.params.headers.split(" ")}if(!parsed.scheme||parsed.scheme!=="Signature")throw new InvalidHeaderError('scheme was not "Signature"');if(!parsed.params.keyId)throw new InvalidHeaderError("keyId was not specified");if(!parsed.params.algorithm)throw new InvalidHeaderError("algorithm was not specified");if(!parsed.params.signature)throw new InvalidHeaderError("signature was not specified");parsed.params.algorithm=parsed.params.algorithm.toLowerCase();try{validateAlgorithm(parsed.params.algorithm)}catch(e){if(e instanceof InvalidAlgorithmError)throw new InvalidParamsError(parsed.params.algorithm+" is not "+"supported");else throw e}for(i=0;i<parsed.params.headers.length;i++){var h=parsed.params.headers[i].toLowerCase();parsed.params.headers[i]=h;if(h==="request-line"){if(!options.strict){parsed.signingString+=request.method+" "+request.url+" HTTP/"+request.httpVersion}else{throw new StrictParsingError("request-line is not a valid header "+"with strict parsing enabled.")}}else if(h==="(request-target)"){parsed.signingString+="(request-target): "+request.method.toLowerCase()+" "+request.url}else{var value=request.headers[h];if(value===undefined)throw new MissingHeaderError(h+" was not in the request");parsed.signingString+=h+": "+value}if(i+1<parsed.params.headers.length)parsed.signingString+="\n"}var date;if(request.headers.date||request.headers["x-date"]){if(request.headers["x-date"]){date=new Date(request.headers["x-date"])}else{date=new Date(request.headers.date)}var now=new Date;var skew=Math.abs(now.getTime()-date.getTime());if(skew>options.clockSkew*1e3){throw new ExpiredRequestError("clock skew of "+skew/1e3+"s was greater than "+options.clockSkew+"s")}}options.headers.forEach(function(hdr){if(parsed.params.headers.indexOf(hdr.toLowerCase())<0)throw new MissingHeaderError(hdr+" was not a signed header")});if(options.algorithms){if(options.algorithms.indexOf(parsed.params.algorithm)===-1)throw new InvalidParamsError(parsed.params.algorithm+" is not a supported algorithm")}parsed.algorithm=parsed.params.algorithm.toUpperCase();parsed.keyId=parsed.params.keyId;return parsed}}},{"./utils":362,"assert-plus":185,util:undefined}],361:[function(require,module,exports){var assert=require("assert-plus");var crypto=require("crypto");var http=require("http");var util=require("util");var sshpk=require("sshpk");var jsprim=require("jsprim");var utils=require("./utils");var sprintf=require("util").format;var HASH_ALGOS=utils.HASH_ALGOS;var PK_ALGOS=utils.PK_ALGOS;var InvalidAlgorithmError=utils.InvalidAlgorithmError;var HttpSignatureError=utils.HttpSignatureError;var validateAlgorithm=utils.validateAlgorithm;var AUTHZ_FMT='Signature keyId="%s",algorithm="%s",headers="%s",signature="%s"';function MissingHeaderError(message){HttpSignatureError.call(this,message,MissingHeaderError)}util.inherits(MissingHeaderError,HttpSignatureError);function StrictParsingError(message){HttpSignatureError.call(this,message,StrictParsingError)}util.inherits(StrictParsingError,HttpSignatureError);function RequestSigner(options){assert.object(options,"options");var alg=[];if(options.algorithm!==undefined){assert.string(options.algorithm,"options.algorithm");alg=validateAlgorithm(options.algorithm)}this.rs_alg=alg;if(options.sign!==undefined){assert.func(options.sign,"options.sign");this.rs_signFunc=options.sign}else if(alg[0]==="hmac"&&options.key!==undefined){assert.string(options.keyId,"options.keyId");this.rs_keyId=options.keyId;if(typeof options.key!=="string"&&!Buffer.isBuffer(options.key))throw new TypeError("options.key for HMAC must be a string or Buffer");this.rs_signer=crypto.createHmac(alg[1].toUpperCase(),options.key);this.rs_signer.sign=function(){var digest=this.digest("base64");return{hashAlgorithm:alg[1],toString:function(){return digest}}}}else if(options.key!==undefined){var key=options.key;if(typeof key==="string"||Buffer.isBuffer(key))key=sshpk.parsePrivateKey(key);assert.ok(sshpk.PrivateKey.isPrivateKey(key,[1,2]),"options.key must be a sshpk.PrivateKey");this.rs_key=key;assert.string(options.keyId,"options.keyId");this.rs_keyId=options.keyId;if(!PK_ALGOS[key.type]){throw new InvalidAlgorithmError(key.type.toUpperCase()+" type "+"keys are not supported")}if(alg[0]!==undefined&&key.type!==alg[0]){throw new InvalidAlgorithmError("options.key must be a "+alg[0].toUpperCase()+" key, was given a "+key.type.toUpperCase()+" key instead")}this.rs_signer=key.createSign(alg[1])}else{throw new TypeError("options.sign (func) or options.key is required")}this.rs_headers=[];this.rs_lines=[]}RequestSigner.prototype.writeHeader=function(header,value){assert.string(header,"header");header=header.toLowerCase();assert.string(value,"value");this.rs_headers.push(header);if(this.rs_signFunc){this.rs_lines.push(header+": "+value)}else{var line=header+": "+value;if(this.rs_headers.length>0)line="\n"+line;this.rs_signer.update(line)}return value};RequestSigner.prototype.writeDateHeader=function(){return this.writeHeader("date",jsprim.rfc1123(new Date))};RequestSigner.prototype.writeTarget=function(method,path){assert.string(method,"method");assert.string(path,"path");method=method.toLowerCase();this.writeHeader("(request-target)",method+" "+path)};RequestSigner.prototype.sign=function(cb){assert.func(cb,"callback");if(this.rs_headers.length<1)throw new Error("At least one header must be signed");var alg,authz;if(this.rs_signFunc){var data=this.rs_lines.join("\n");var self=this;this.rs_signFunc(data,function(err,sig){if(err){cb(err);return}try{assert.object(sig,"signature");assert.string(sig.keyId,"signature.keyId");assert.string(sig.algorithm,"signature.algorithm");assert.string(sig.signature,"signature.signature");alg=validateAlgorithm(sig.algorithm);authz=sprintf(AUTHZ_FMT,sig.keyId,sig.algorithm,self.rs_headers.join(" "),sig.signature)}catch(e){cb(e);return}cb(null,authz)})}else{try{var sigObj=this.rs_signer.sign()}catch(e){cb(e);return}alg=(this.rs_alg[0]||this.rs_key.type)+"-"+sigObj.hashAlgorithm;var signature=sigObj.toString();authz=sprintf(AUTHZ_FMT,this.rs_keyId,alg,this.rs_headers.join(" "),signature);cb(null,authz)}};module.exports={isSigner:function(obj){if(typeof obj==="object"&&obj instanceof RequestSigner)return true;return false},createSigner:function createSigner(options){return new RequestSigner(options)},signRequest:function signRequest(request,options){assert.object(request,"request");assert.object(options,"options");assert.optionalString(options.algorithm,"options.algorithm");assert.string(options.keyId,"options.keyId");assert.optionalArrayOfString(options.headers,"options.headers");assert.optionalString(options.httpVersion,"options.httpVersion");if(!request.getHeader("Date"))request.setHeader("Date",jsprim.rfc1123(new Date));if(!options.headers)options.headers=["date"];if(!options.httpVersion)options.httpVersion="1.1";var alg=[];if(options.algorithm){options.algorithm=options.algorithm.toLowerCase();alg=validateAlgorithm(options.algorithm)}var i;var stringToSign="";for(i=0;i<options.headers.length;i++){if(typeof options.headers[i]!=="string")throw new TypeError("options.headers must be an array of Strings");var h=options.headers[i].toLowerCase();if(h==="request-line"){if(!options.strict){stringToSign+=request.method+" "+request.path+" HTTP/"+options.httpVersion}else{throw new StrictParsingError("request-line is not a valid header "+"with strict parsing enabled.")}}else if(h==="(request-target)"){stringToSign+="(request-target): "+request.method.toLowerCase()+" "+request.path}else{var value=request.getHeader(h);if(value===undefined||value===""){throw new MissingHeaderError(h+" was not in the request")}stringToSign+=h+": "+value}if(i+1<options.headers.length)stringToSign+="\n"}if(request.hasOwnProperty("_stringToSign")){request._stringToSign=stringToSign}var signature;if(alg[0]==="hmac"){if(typeof options.key!=="string"&&!Buffer.isBuffer(options.key))throw new TypeError("options.key must be a string or Buffer");var hmac=crypto.createHmac(alg[1].toUpperCase(),options.key);hmac.update(stringToSign);signature=hmac.digest("base64")}else{var key=options.key;if(typeof key==="string"||Buffer.isBuffer(key))key=sshpk.parsePrivateKey(options.key);assert.ok(sshpk.PrivateKey.isPrivateKey(key,[1,2]),"options.key must be a sshpk.PrivateKey");if(!PK_ALGOS[key.type]){throw new InvalidAlgorithmError(key.type.toUpperCase()+" type "+"keys are not supported")}if(alg[0]!==undefined&&key.type!==alg[0]){throw new InvalidAlgorithmError("options.key must be a "+alg[0].toUpperCase()+" key, was given a "+key.type.toUpperCase()+" key instead")}var signer=key.createSign(alg[1]);signer.update(stringToSign);var sigObj=signer.sign();if(!HASH_ALGOS[sigObj.hashAlgorithm]){throw new InvalidAlgorithmError(sigObj.hashAlgorithm.toUpperCase()+" is not a supported hash algorithm")}options.algorithm=key.type+"-"+sigObj.hashAlgorithm;signature=sigObj.toString();assert.notStrictEqual(signature,"","empty signature produced")}var authzHeaderName=options.authorizationHeaderName||"Authorization";request.setHeader(authzHeaderName,sprintf(AUTHZ_FMT,options.keyId,options.algorithm,options.headers.join(" "),signature));return true}}},{"./utils":362,"assert-plus":185,crypto:undefined,http:undefined,jsprim:410,sshpk:511,util:undefined}],362:[function(require,module,exports){var assert=require("assert-plus");var sshpk=require("sshpk");var util=require("util");var HASH_ALGOS={sha1:true,sha256:true,sha512:true};var PK_ALGOS={rsa:true,dsa:true,ecdsa:true};function HttpSignatureError(message,caller){if(Error.captureStackTrace)Error.captureStackTrace(this,caller||HttpSignatureError);this.message=message;this.name=caller.name}util.inherits(HttpSignatureError,Error);function InvalidAlgorithmError(message){HttpSignatureError.call(this,message,InvalidAlgorithmError)}util.inherits(InvalidAlgorithmError,HttpSignatureError);function validateAlgorithm(algorithm){var alg=algorithm.toLowerCase().split("-");if(alg.length!==2){throw new InvalidAlgorithmError(alg[0].toUpperCase()+" is not a "+"valid algorithm")}if(alg[0]!=="hmac"&&!PK_ALGOS[alg[0]]){throw new InvalidAlgorithmError(alg[0].toUpperCase()+" type keys "+"are not supported")}if(!HASH_ALGOS[alg[1]]){throw new InvalidAlgorithmError(alg[1].toUpperCase()+" is not a "+"supported hash algorithm")}return alg}module.exports={HASH_ALGOS:HASH_ALGOS,PK_ALGOS:PK_ALGOS,HttpSignatureError:HttpSignatureError,InvalidAlgorithmError:InvalidAlgorithmError,validateAlgorithm:validateAlgorithm,sshKeyToPEM:function sshKeyToPEM(key){assert.string(key,"ssh_key");var k=sshpk.parseKey(key,"ssh");return k.toString("pem")},fingerprint:function fingerprint(key){assert.string(key,"ssh_key");var k=sshpk.parseKey(key,"ssh");return k.fingerprint("md5").toString("hex")},pemToRsaSSHKey:function pemToRsaSSHKey(pem,comment){assert.equal("string",typeof pem,"typeof pem");var k=sshpk.parseKey(pem,"pem");k.comment=comment;return k.toString("ssh")}}},{"assert-plus":185,sshpk:511,util:undefined}],363:[function(require,module,exports){var assert=require("assert-plus");var crypto=require("crypto");var sshpk=require("sshpk");var utils=require("./utils");var HASH_ALGOS=utils.HASH_ALGOS;var PK_ALGOS=utils.PK_ALGOS;var InvalidAlgorithmError=utils.InvalidAlgorithmError;var HttpSignatureError=utils.HttpSignatureError;var validateAlgorithm=utils.validateAlgorithm;module.exports={verifySignature:function verifySignature(parsedSignature,pubkey){assert.object(parsedSignature,"parsedSignature");if(typeof pubkey==="string"||Buffer.isBuffer(pubkey))pubkey=sshpk.parseKey(pubkey);assert.ok(sshpk.Key.isKey(pubkey,[1,1]),"pubkey must be a sshpk.Key");var alg=validateAlgorithm(parsedSignature.algorithm);if(alg[0]==="hmac"||alg[0]!==pubkey.type)return false;var v=pubkey.createVerify(alg[1]);v.update(parsedSignature.signingString);return v.verify(parsedSignature.params.signature,"base64")},verifyHMAC:function verifyHMAC(parsedSignature,secret){assert.object(parsedSignature,"parsedHMAC");assert.string(secret,"secret");var alg=validateAlgorithm(parsedSignature.algorithm);if(alg[0]!=="hmac")return false;var hashAlg=alg[1].toUpperCase();var hmac=crypto.createHmac(hashAlg,secret);hmac.update(parsedSignature.signingString);var h1=crypto.createHmac(hashAlg,secret);h1.update(hmac.digest());h1=h1.digest();var h2=crypto.createHmac(hashAlg,secret);h2.update(new Buffer(parsedSignature.params.signature,"base64"));h2=h2.digest();if(typeof h1==="string")return h1===h2;if(Buffer.isBuffer(h1)&&!h1.equals)return h1.toString("binary")===h2.toString("binary");return h1.equals(h2)}}},{"./utils":362,"assert-plus":185,crypto:undefined,sshpk:511}],364:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer;exports._dbcs=DBCSCodec;var UNASSIGNED=-1,GB18030_CODE=-2,SEQ_START=-10,NODE_START=-1e3,UNASSIGNED_NODE=new Array(256),DEF_CHAR=-1;for(var i=0;i<256;i++)UNASSIGNED_NODE[i]=UNASSIGNED;function DBCSCodec(codecOptions,iconv){this.encodingName=codecOptions.encodingName;if(!codecOptions)throw new Error("DBCS codec is called without the data.");if(!codecOptions.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var mappingTable=codecOptions.table();this.decodeTables=[];this.decodeTables[0]=UNASSIGNED_NODE.slice(0);this.decodeTableSeq=[];for(var i=0;i<mappingTable.length;i++)this._addDecodeChunk(mappingTable[i]);this.defaultCharUnicode=iconv.defaultCharUnicode;this.encodeTable=[];this.encodeTableSeq=[];var skipEncodeChars={};if(codecOptions.encodeSkipVals)for(var i=0;i<codecOptions.encodeSkipVals.length;i++){var val=codecOptions.encodeSkipVals[i];if(typeof val==="number")skipEncodeChars[val]=true;else for(var j=val.from;j<=val.to;j++)skipEncodeChars[j]=true}this._fillEncodeTable(0,0,skipEncodeChars);if(codecOptions.encodeAdd){for(var uChar in codecOptions.encodeAdd)if(Object.prototype.hasOwnProperty.call(codecOptions.encodeAdd,uChar))this._setEncodeChar(uChar.charCodeAt(0),codecOptions.encodeAdd[uChar])}this.defCharSB=this.encodeTable[0][iconv.defaultCharSingleByte.charCodeAt(0)];if(this.defCharSB===UNASSIGNED)this.defCharSB=this.encodeTable[0]["?"];if(this.defCharSB===UNASSIGNED)this.defCharSB="?".charCodeAt(0);if(typeof codecOptions.gb18030==="function"){this.gb18030=codecOptions.gb18030();var thirdByteNodeIdx=this.decodeTables.length;var thirdByteNode=this.decodeTables[thirdByteNodeIdx]=UNASSIGNED_NODE.slice(0);var fourthByteNodeIdx=this.decodeTables.length;var fourthByteNode=this.decodeTables[fourthByteNodeIdx]=UNASSIGNED_NODE.slice(0);for(var i=129;i<=254;i++){var secondByteNodeIdx=NODE_START-this.decodeTables[0][i];var secondByteNode=this.decodeTables[secondByteNodeIdx];for(var j=48;j<=57;j++)secondByteNode[j]=NODE_START-thirdByteNodeIdx}for(var i=129;i<=254;i++)thirdByteNode[i]=NODE_START-fourthByteNodeIdx;for(var i=48;i<=57;i++)fourthByteNode[i]=GB18030_CODE}}DBCSCodec.prototype.encoder=DBCSEncoder;DBCSCodec.prototype.decoder=DBCSDecoder;DBCSCodec.prototype._getDecodeTrieNode=function(addr){var bytes=[];for(;addr>0;addr>>=8)bytes.push(addr&255);if(bytes.length==0)bytes.push(0);var node=this.decodeTables[0];for(var i=bytes.length-1;i>0;i--){var val=node[bytes[i]];if(val==UNASSIGNED){node[bytes[i]]=NODE_START-this.decodeTables.length;this.decodeTables.push(node=UNASSIGNED_NODE.slice(0))}else if(val<=NODE_START){node=this.decodeTables[NODE_START-val]}else throw new Error("Overwrite byte in "+this.encodingName+", addr: "+addr.toString(16))}return node};DBCSCodec.prototype._addDecodeChunk=function(chunk){var curAddr=parseInt(chunk[0],16);var writeTable=this._getDecodeTrieNode(curAddr);curAddr=curAddr&255;for(var k=1;k<chunk.length;k++){var part=chunk[k];if(typeof part==="string"){for(var l=0;l<part.length;){var code=part.charCodeAt(l++);if(55296<=code&&code<56320){var codeTrail=part.charCodeAt(l++);if(56320<=codeTrail&&codeTrail<57344)writeTable[curAddr++]=65536+(code-55296)*1024+(codeTrail-56320);else throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+chunk[0])}else if(4080<code&&code<=4095){var len=4095-code+2;var seq=[];for(var m=0;m<len;m++)seq.push(part.charCodeAt(l++));writeTable[curAddr++]=SEQ_START-this.decodeTableSeq.length;this.decodeTableSeq.push(seq)}else writeTable[curAddr++]=code}}else if(typeof part==="number"){var charCode=writeTable[curAddr-1]+1;for(var l=0;l<part;l++)writeTable[curAddr++]=charCode++}else throw new Error("Incorrect type '"+typeof part+"' given in "+this.encodingName+" at chunk "+chunk[0])}if(curAddr>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+chunk[0]+": too long"+curAddr)};DBCSCodec.prototype._getEncodeBucket=function(uCode){var high=uCode>>8;if(this.encodeTable[high]===undefined)this.encodeTable[high]=UNASSIGNED_NODE.slice(0);return this.encodeTable[high]};DBCSCodec.prototype._setEncodeChar=function(uCode,dbcsCode){var bucket=this._getEncodeBucket(uCode);var low=uCode&255;if(bucket[low]<=SEQ_START)this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR]=dbcsCode;else if(bucket[low]==UNASSIGNED)bucket[low]=dbcsCode};DBCSCodec.prototype._setEncodeSequence=function(seq,dbcsCode){var uCode=seq[0];var bucket=this._getEncodeBucket(uCode);var low=uCode&255;var node;if(bucket[low]<=SEQ_START){node=this.encodeTableSeq[SEQ_START-bucket[low]]}else{node={};if(bucket[low]!==UNASSIGNED)node[DEF_CHAR]=bucket[low];bucket[low]=SEQ_START-this.encodeTableSeq.length;this.encodeTableSeq.push(node)}for(var j=1;j<seq.length-1;j++){var oldVal=node[uCode];if(typeof oldVal==="object")node=oldVal;else{node=node[uCode]={};if(oldVal!==undefined)node[DEF_CHAR]=oldVal}}uCode=seq[seq.length-1];node[uCode]=dbcsCode};DBCSCodec.prototype._fillEncodeTable=function(nodeIdx,prefix,skipEncodeChars){var node=this.decodeTables[nodeIdx];for(var i=0;i<256;i++){var uCode=node[i];var mbCode=prefix+i;if(skipEncodeChars[mbCode])continue;if(uCode>=0)this._setEncodeChar(uCode,mbCode);else if(uCode<=NODE_START)this._fillEncodeTable(NODE_START-uCode,mbCode<<8,skipEncodeChars);else if(uCode<=SEQ_START)this._setEncodeSequence(this.decodeTableSeq[SEQ_START-uCode],mbCode)}};function DBCSEncoder(options,codec){this.leadSurrogate=-1;this.seqObj=undefined;this.encodeTable=codec.encodeTable;this.encodeTableSeq=codec.encodeTableSeq;this.defaultCharSingleByte=codec.defCharSB;this.gb18030=codec.gb18030}DBCSEncoder.prototype.write=function(str){var newBuf=new Buffer(str.length*(this.gb18030?4:3)),leadSurrogate=this.leadSurrogate,seqObj=this.seqObj,nextChar=-1,i=0,j=0;while(true){if(nextChar===-1){if(i==str.length)break;var uCode=str.charCodeAt(i++)}else{var uCode=nextChar;nextChar=-1}if(55296<=uCode&&uCode<57344){if(uCode<56320){if(leadSurrogate===-1){leadSurrogate=uCode;continue}else{leadSurrogate=uCode;uCode=UNASSIGNED}}else{if(leadSurrogate!==-1){uCode=65536+(leadSurrogate-55296)*1024+(uCode-56320);leadSurrogate=-1}else{uCode=UNASSIGNED}}}else if(leadSurrogate!==-1){nextChar=uCode;uCode=UNASSIGNED;leadSurrogate=-1}var dbcsCode=UNASSIGNED;if(seqObj!==undefined&&uCode!=UNASSIGNED){var resCode=seqObj[uCode];if(typeof resCode==="object"){seqObj=resCode;continue}else if(typeof resCode=="number"){dbcsCode=resCode}else if(resCode==undefined){resCode=seqObj[DEF_CHAR];if(resCode!==undefined){dbcsCode=resCode;nextChar=uCode}else{}}seqObj=undefined}else if(uCode>=0){var subtable=this.encodeTable[uCode>>8];if(subtable!==undefined)dbcsCode=subtable[uCode&255];if(dbcsCode<=SEQ_START){seqObj=this.encodeTableSeq[SEQ_START-dbcsCode];continue}if(dbcsCode==UNASSIGNED&&this.gb18030){var idx=findIdx(this.gb18030.uChars,uCode);if(idx!=-1){var dbcsCode=this.gb18030.gbChars[idx]+(uCode-this.gb18030.uChars[idx]);newBuf[j++]=129+Math.floor(dbcsCode/12600);dbcsCode=dbcsCode%12600;newBuf[j++]=48+Math.floor(dbcsCode/1260);dbcsCode=dbcsCode%1260;newBuf[j++]=129+Math.floor(dbcsCode/10);dbcsCode=dbcsCode%10;newBuf[j++]=48+dbcsCode;continue}}}if(dbcsCode===UNASSIGNED)dbcsCode=this.defaultCharSingleByte;if(dbcsCode<256){newBuf[j++]=dbcsCode}else if(dbcsCode<65536){newBuf[j++]=dbcsCode>>8;newBuf[j++]=dbcsCode&255}else{newBuf[j++]=dbcsCode>>16;newBuf[j++]=dbcsCode>>8&255;newBuf[j++]=dbcsCode&255}}this.seqObj=seqObj;this.leadSurrogate=leadSurrogate;return newBuf.slice(0,j)};DBCSEncoder.prototype.end=function(){if(this.leadSurrogate===-1&&this.seqObj===undefined)return;var newBuf=new Buffer(10),j=0;if(this.seqObj){var dbcsCode=this.seqObj[DEF_CHAR];if(dbcsCode!==undefined){if(dbcsCode<256){newBuf[j++]=dbcsCode}else{newBuf[j++]=dbcsCode>>8;newBuf[j++]=dbcsCode&255}}else{}this.seqObj=undefined}if(this.leadSurrogate!==-1){newBuf[j++]=this.defaultCharSingleByte;this.leadSurrogate=-1}return newBuf.slice(0,j)};DBCSEncoder.prototype.findIdx=findIdx;function DBCSDecoder(options,codec){this.nodeIdx=0;this.prevBuf=new Buffer(0);this.decodeTables=codec.decodeTables;this.decodeTableSeq=codec.decodeTableSeq;this.defaultCharUnicode=codec.defaultCharUnicode;this.gb18030=codec.gb18030}DBCSDecoder.prototype.write=function(buf){var newBuf=new Buffer(buf.length*2),nodeIdx=this.nodeIdx,prevBuf=this.prevBuf,prevBufOffset=this.prevBuf.length,seqStart=-this.prevBuf.length,uCode;if(prevBufOffset>0)prevBuf=Buffer.concat([prevBuf,buf.slice(0,10)]);for(var i=0,j=0;i<buf.length;i++){var curByte=i>=0?buf[i]:prevBuf[i+prevBufOffset];var uCode=this.decodeTables[nodeIdx][curByte];if(uCode>=0){}else if(uCode===UNASSIGNED){i=seqStart;uCode=this.defaultCharUnicode.charCodeAt(0)}else if(uCode===GB18030_CODE){var curSeq=seqStart>=0?buf.slice(seqStart,i+1):prevBuf.slice(seqStart+prevBufOffset,i+1+prevBufOffset);var ptr=(curSeq[0]-129)*12600+(curSeq[1]-48)*1260+(curSeq[2]-129)*10+(curSeq[3]-48);var idx=findIdx(this.gb18030.gbChars,ptr);uCode=this.gb18030.uChars[idx]+ptr-this.gb18030.gbChars[idx]}else if(uCode<=NODE_START){nodeIdx=NODE_START-uCode;continue}else if(uCode<=SEQ_START){var seq=this.decodeTableSeq[SEQ_START-uCode];for(var k=0;k<seq.length-1;k++){uCode=seq[k];newBuf[j++]=uCode&255;newBuf[j++]=uCode>>8}uCode=seq[seq.length-1]}else throw new Error("iconv-lite internal error: invalid decoding table value "+uCode+" at "+nodeIdx+"/"+curByte);if(uCode>65535){uCode-=65536;var uCodeLead=55296+Math.floor(uCode/1024);newBuf[j++]=uCodeLead&255;newBuf[j++]=uCodeLead>>8;uCode=56320+uCode%1024}newBuf[j++]=uCode&255;newBuf[j++]=uCode>>8;nodeIdx=0;seqStart=i+1}this.nodeIdx=nodeIdx;this.prevBuf=seqStart>=0?buf.slice(seqStart):prevBuf.slice(seqStart+prevBufOffset);return newBuf.slice(0,j).toString("ucs2")};DBCSDecoder.prototype.end=function(){var ret="";while(this.prevBuf.length>0){ret+=this.defaultCharUnicode;var buf=this.prevBuf.slice(1);this.prevBuf=new Buffer(0);this.nodeIdx=0;if(buf.length>0)ret+=this.write(buf)}this.nodeIdx=0;return ret};function findIdx(table,val){if(table[0]>val)return-1;var l=0,r=table.length;while(l<r-1){var mid=l+Math.floor((r-l+1)/2);if(table[mid]<=val)l=mid;else r=mid}return l}},{buffer:undefined}],365:[function(require,module,exports){"use strict";module.exports={shiftjis:{type:"_dbcs",table:function(){return require("./tables/shiftjis.json")},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return require("./tables/eucjp.json")},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return require("./tables/cp936.json")}},gbk:{type:"_dbcs",table:function(){return require("./tables/cp936.json").concat(require("./tables/gbk-added.json"))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return require("./tables/cp936.json").concat(require("./tables/gbk-added.json"))},gb18030:function(){return require("./tables/gb18030-ranges.json")},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return require("./tables/cp949.json")}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return require("./tables/cp950.json")}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return require("./tables/cp950.json").concat(require("./tables/big5-added.json"))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},{"./tables/big5-added.json":371,"./tables/cp936.json":372,"./tables/cp949.json":373,"./tables/cp950.json":374,"./tables/eucjp.json":375,"./tables/gb18030-ranges.json":376,"./tables/gbk-added.json":377,"./tables/shiftjis.json":378}],366:[function(require,module,exports){"use strict";var modules=[require("./internal"),require("./utf16"),require("./utf7"),require("./sbcs-codec"),require("./sbcs-data"),require("./sbcs-data-generated"),require("./dbcs-codec"),require("./dbcs-data")];for(var i=0;i<modules.length;i++){var module=modules[i];for(var enc in module)if(Object.prototype.hasOwnProperty.call(module,enc))exports[enc]=module[enc]}},{"./dbcs-codec":364,"./dbcs-data":365,"./internal":367,"./sbcs-codec":368,"./sbcs-data":370,"./sbcs-data-generated":369,"./utf16":379,"./utf7":380}],367:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer;module.exports={utf8:{type:"_internal",bomAware:true},cesu8:{type:"_internal",bomAware:true},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:true},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:InternalCodec};function InternalCodec(codecOptions,iconv){this.enc=codecOptions.encodingName;this.bomAware=codecOptions.bomAware;if(this.enc==="base64")this.encoder=InternalEncoderBase64;else if(this.enc==="cesu8"){this.enc="utf8";this.encoder=InternalEncoderCesu8;if(new Buffer("eda0bdedb2a9","hex").toString()!==""){this.decoder=InternalDecoderCesu8;this.defaultCharUnicode=iconv.defaultCharUnicode}}}InternalCodec.prototype.encoder=InternalEncoder;InternalCodec.prototype.decoder=InternalDecoder;var StringDecoder=require("string_decoder").StringDecoder;if(!StringDecoder.prototype.end)StringDecoder.prototype.end=function(){};function InternalDecoder(options,codec){StringDecoder.call(this,codec.enc)}InternalDecoder.prototype=StringDecoder.prototype;function InternalEncoder(options,codec){this.enc=codec.enc}InternalEncoder.prototype.write=function(str){return new Buffer(str,this.enc)};InternalEncoder.prototype.end=function(){};function InternalEncoderBase64(options,codec){this.prevStr=""}InternalEncoderBase64.prototype.write=function(str){str=this.prevStr+str;var completeQuads=str.length-str.length%4;this.prevStr=str.slice(completeQuads);str=str.slice(0,completeQuads);return new Buffer(str,"base64")};InternalEncoderBase64.prototype.end=function(){return new Buffer(this.prevStr,"base64")};function InternalEncoderCesu8(options,codec){}InternalEncoderCesu8.prototype.write=function(str){var buf=new Buffer(str.length*3),bufIdx=0;for(var i=0;i<str.length;i++){var charCode=str.charCodeAt(i);if(charCode<128)buf[bufIdx++]=charCode;else if(charCode<2048){buf[bufIdx++]=192+(charCode>>>6);buf[bufIdx++]=128+(charCode&63)}else{buf[bufIdx++]=224+(charCode>>>12);buf[bufIdx++]=128+(charCode>>>6&63);buf[bufIdx++]=128+(charCode&63)}}return buf.slice(0,bufIdx)};InternalEncoderCesu8.prototype.end=function(){};function InternalDecoderCesu8(options,codec){this.acc=0;this.contBytes=0;this.accBytes=0;this.defaultCharUnicode=codec.defaultCharUnicode}InternalDecoderCesu8.prototype.write=function(buf){var acc=this.acc,contBytes=this.contBytes,accBytes=this.accBytes,res="";for(var i=0;i<buf.length;i++){var curByte=buf[i];if((curByte&192)!==128){if(contBytes>0){res+=this.defaultCharUnicode;contBytes=0}if(curByte<128){res+=String.fromCharCode(curByte)}else if(curByte<224){acc=curByte&31;contBytes=1;accBytes=1}else if(curByte<240){acc=curByte&15;contBytes=2;accBytes=1}else{res+=this.defaultCharUnicode}}else{if(contBytes>0){acc=acc<<6|curByte&63;contBytes--;accBytes++;if(contBytes===0){if(accBytes===2&&acc<128&&acc>0)res+=this.defaultCharUnicode;else if(accBytes===3&&acc<2048)res+=this.defaultCharUnicode;else res+=String.fromCharCode(acc)}}else{res+=this.defaultCharUnicode}}}this.acc=acc;this.contBytes=contBytes;this.accBytes=accBytes;return res};InternalDecoderCesu8.prototype.end=function(){var res=0;if(this.contBytes>0)res+=this.defaultCharUnicode;return res}},{buffer:undefined,string_decoder:undefined}],368:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer;exports._sbcs=SBCSCodec;function SBCSCodec(codecOptions,iconv){if(!codecOptions)throw new Error("SBCS codec is called without the data.");if(!codecOptions.chars||codecOptions.chars.length!==128&&codecOptions.chars.length!==256)throw new Error("Encoding '"+codecOptions.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(codecOptions.chars.length===128){var asciiString="";for(var i=0;i<128;i++)asciiString+=String.fromCharCode(i);codecOptions.chars=asciiString+codecOptions.chars}this.decodeBuf=new Buffer(codecOptions.chars,"ucs2");var encodeBuf=new Buffer(65536);encodeBuf.fill(iconv.defaultCharSingleByte.charCodeAt(0));for(var i=0;i<codecOptions.chars.length;i++)encodeBuf[codecOptions.chars.charCodeAt(i)]=i;this.encodeBuf=encodeBuf}SBCSCodec.prototype.encoder=SBCSEncoder;SBCSCodec.prototype.decoder=SBCSDecoder;function SBCSEncoder(options,codec){this.encodeBuf=codec.encodeBuf}SBCSEncoder.prototype.write=function(str){var buf=new Buffer(str.length);for(var i=0;i<str.length;i++)buf[i]=this.encodeBuf[str.charCodeAt(i)];return buf};SBCSEncoder.prototype.end=function(){};function SBCSDecoder(options,codec){this.decodeBuf=codec.decodeBuf}SBCSDecoder.prototype.write=function(buf){var decodeBuf=this.decodeBuf;var newBuf=new Buffer(buf.length*2);var idx1=0,idx2=0;for(var i=0;i<buf.length;i++){idx1=buf[i]*2;idx2=i*2;newBuf[idx2]=decodeBuf[idx1];newBuf[idx2+1]=decodeBuf[idx1+1]}return newBuf.toString("ucs2")};SBCSDecoder.prototype.end=function(){}},{buffer:undefined}],369:[function(require,module,exports){"use strict";module.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},{}],370:[function(require,module,exports){"use strict";module.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",10000:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},{}],371:[function(require,module,exports){module.exports=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]},{}],372:[function(require,module,exports){module.exports=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]},{}],373:[function(require,module,exports){module.exports=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]},{}],374:[function(require,module,exports){module.exports=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]},{}],375:[function(require,module,exports){module.exports=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]},{}],376:[function(require,module,exports){module.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]}},{}],377:[function(require,module,exports){module.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]},{}],378:[function(require,module,exports){module.exports=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]},{}],379:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer;exports.utf16be=Utf16BECodec;function Utf16BECodec(){}Utf16BECodec.prototype.encoder=Utf16BEEncoder;Utf16BECodec.prototype.decoder=Utf16BEDecoder;Utf16BECodec.prototype.bomAware=true;function Utf16BEEncoder(){}Utf16BEEncoder.prototype.write=function(str){var buf=new Buffer(str,"ucs2");for(var i=0;i<buf.length;i+=2){var tmp=buf[i];buf[i]=buf[i+1];buf[i+1]=tmp}return buf};Utf16BEEncoder.prototype.end=function(){};function Utf16BEDecoder(){this.overflowByte=-1}Utf16BEDecoder.prototype.write=function(buf){if(buf.length==0)return"";var buf2=new Buffer(buf.length+1),i=0,j=0;if(this.overflowByte!==-1){buf2[0]=buf[0];buf2[1]=this.overflowByte;i=1;j=2}for(;i<buf.length-1;i+=2,j+=2){buf2[j]=buf[i+1];buf2[j+1]=buf[i]}this.overflowByte=i==buf.length-1?buf[buf.length-1]:-1;return buf2.slice(0,j).toString("ucs2")};Utf16BEDecoder.prototype.end=function(){};exports.utf16=Utf16Codec;function Utf16Codec(codecOptions,iconv){this.iconv=iconv}Utf16Codec.prototype.encoder=Utf16Encoder;Utf16Codec.prototype.decoder=Utf16Decoder;function Utf16Encoder(options,codec){options=options||{};if(options.addBOM===undefined)options.addBOM=true;this.encoder=codec.iconv.getEncoder("utf-16le",options)}Utf16Encoder.prototype.write=function(str){return this.encoder.write(str)};Utf16Encoder.prototype.end=function(){return this.encoder.end()};function Utf16Decoder(options,codec){this.decoder=null;this.initialBytes=[];this.initialBytesLen=0;this.options=options||{};this.iconv=codec.iconv}Utf16Decoder.prototype.write=function(buf){if(!this.decoder){this.initialBytes.push(buf);this.initialBytesLen+=buf.length;if(this.initialBytesLen<16)return"";var buf=Buffer.concat(this.initialBytes),encoding=detectEncoding(buf,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(encoding,this.options);this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(buf)};Utf16Decoder.prototype.end=function(){if(!this.decoder){var buf=Buffer.concat(this.initialBytes),encoding=detectEncoding(buf,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(encoding,this.options);var res=this.decoder.write(buf),trail=this.decoder.end();return trail?res+trail:res}return this.decoder.end()};function detectEncoding(buf,defaultEncoding){var enc=defaultEncoding||"utf-16le";if(buf.length>=2){if(buf[0]==254&&buf[1]==255)enc="utf-16be";else if(buf[0]==255&&buf[1]==254)enc="utf-16le";else{var asciiCharsLE=0,asciiCharsBE=0,_len=Math.min(buf.length-buf.length%2,64);for(var i=0;i<_len;i+=2){if(buf[i]===0&&buf[i+1]!==0)asciiCharsBE++;if(buf[i]!==0&&buf[i+1]===0)asciiCharsLE++}if(asciiCharsBE>asciiCharsLE)enc="utf-16be";else if(asciiCharsBE<asciiCharsLE)enc="utf-16le"}}return enc}},{buffer:undefined}],380:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer;exports.utf7=Utf7Codec;exports.unicode11utf7="utf7";function Utf7Codec(codecOptions,iconv){this.iconv=iconv}Utf7Codec.prototype.encoder=Utf7Encoder;Utf7Codec.prototype.decoder=Utf7Decoder;Utf7Codec.prototype.bomAware=true;var nonDirectChars=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function Utf7Encoder(options,codec){this.iconv=codec.iconv}Utf7Encoder.prototype.write=function(str){return new Buffer(str.replace(nonDirectChars,function(chunk){return"+"+(chunk==="+"?"":this.iconv.encode(chunk,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))};Utf7Encoder.prototype.end=function(){};function Utf7Decoder(options,codec){this.iconv=codec.iconv;this.inBase64=false;this.base64Accum=""}var base64Regex=/[A-Za-z0-9\/+]/;var base64Chars=[];for(var i=0;i<256;i++)base64Chars[i]=base64Regex.test(String.fromCharCode(i));var plusChar="+".charCodeAt(0),minusChar="-".charCodeAt(0),andChar="&".charCodeAt(0);Utf7Decoder.prototype.write=function(buf){var res="",lastI=0,inBase64=this.inBase64,base64Accum=this.base64Accum;for(var i=0;i<buf.length;i++){if(!inBase64){if(buf[i]==plusChar){res+=this.iconv.decode(buf.slice(lastI,i),"ascii");lastI=i+1;inBase64=true}}else{if(!base64Chars[buf[i]]){if(i==lastI&&buf[i]==minusChar){res+="+"}else{var b64str=base64Accum+buf.slice(lastI,i).toString();res+=this.iconv.decode(new Buffer(b64str,"base64"),"utf16-be")}if(buf[i]!=minusChar)i--;lastI=i+1;inBase64=false;base64Accum=""}}}if(!inBase64){res+=this.iconv.decode(buf.slice(lastI),"ascii")}else{var b64str=base64Accum+buf.slice(lastI).toString();var canBeDecoded=b64str.length-b64str.length%8;base64Accum=b64str.slice(canBeDecoded);b64str=b64str.slice(0,canBeDecoded);res+=this.iconv.decode(new Buffer(b64str,"base64"),"utf16-be")}this.inBase64=inBase64;this.base64Accum=base64Accum;return res};Utf7Decoder.prototype.end=function(){var res="";if(this.inBase64&&this.base64Accum.length>0)res=this.iconv.decode(new Buffer(this.base64Accum,"base64"),"utf16-be");this.inBase64=false;this.base64Accum="";return res};exports.utf7imap=Utf7IMAPCodec;function Utf7IMAPCodec(codecOptions,iconv){this.iconv=iconv}Utf7IMAPCodec.prototype.encoder=Utf7IMAPEncoder;Utf7IMAPCodec.prototype.decoder=Utf7IMAPDecoder;Utf7IMAPCodec.prototype.bomAware=true;function Utf7IMAPEncoder(options,codec){this.iconv=codec.iconv;this.inBase64=false;this.base64Accum=new Buffer(6);this.base64AccumIdx=0}Utf7IMAPEncoder.prototype.write=function(str){var inBase64=this.inBase64,base64Accum=this.base64Accum,base64AccumIdx=this.base64AccumIdx,buf=new Buffer(str.length*5+10),bufIdx=0;for(var i=0;i<str.length;i++){var uChar=str.charCodeAt(i);if(32<=uChar&&uChar<=126){if(inBase64){if(base64AccumIdx>0){bufIdx+=buf.write(base64Accum.slice(0,base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),bufIdx);base64AccumIdx=0}buf[bufIdx++]=minusChar;inBase64=false}if(!inBase64){buf[bufIdx++]=uChar;if(uChar===andChar)buf[bufIdx++]=minusChar}}else{if(!inBase64){buf[bufIdx++]=andChar;inBase64=true}if(inBase64){base64Accum[base64AccumIdx++]=uChar>>8;base64Accum[base64AccumIdx++]=uChar&255;if(base64AccumIdx==base64Accum.length){bufIdx+=buf.write(base64Accum.toString("base64").replace(/\//g,","),bufIdx);base64AccumIdx=0}}}}this.inBase64=inBase64;this.base64AccumIdx=base64AccumIdx;return buf.slice(0,bufIdx)};Utf7IMAPEncoder.prototype.end=function(){var buf=new Buffer(10),bufIdx=0;if(this.inBase64){if(this.base64AccumIdx>0){bufIdx+=buf.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),bufIdx);this.base64AccumIdx=0}buf[bufIdx++]=minusChar;this.inBase64=false}return buf.slice(0,bufIdx)};function Utf7IMAPDecoder(options,codec){this.iconv=codec.iconv;this.inBase64=false;this.base64Accum=""}var base64IMAPChars=base64Chars.slice();base64IMAPChars[",".charCodeAt(0)]=true;Utf7IMAPDecoder.prototype.write=function(buf){var res="",lastI=0,inBase64=this.inBase64,base64Accum=this.base64Accum;for(var i=0;i<buf.length;i++){if(!inBase64){if(buf[i]==andChar){res+=this.iconv.decode(buf.slice(lastI,i),"ascii");lastI=i+1;inBase64=true}}else{if(!base64IMAPChars[buf[i]]){if(i==lastI&&buf[i]==minusChar){res+="&"}else{var b64str=base64Accum+buf.slice(lastI,i).toString().replace(/,/g,"/");res+=this.iconv.decode(new Buffer(b64str,"base64"),"utf16-be")}if(buf[i]!=minusChar)i--;lastI=i+1;inBase64=false;base64Accum=""}}}if(!inBase64){res+=this.iconv.decode(buf.slice(lastI),"ascii")}else{var b64str=base64Accum+buf.slice(lastI).toString().replace(/,/g,"/");var canBeDecoded=b64str.length-b64str.length%8;base64Accum=b64str.slice(canBeDecoded);b64str=b64str.slice(0,canBeDecoded);res+=this.iconv.decode(new Buffer(b64str,"base64"),"utf16-be")}this.inBase64=inBase64;this.base64Accum=base64Accum;return res};Utf7IMAPDecoder.prototype.end=function(){var res="";if(this.inBase64&&this.base64Accum.length>0)res=this.iconv.decode(new Buffer(this.base64Accum,"base64"),"utf16-be");this.inBase64=false;this.base64Accum="";return res}},{buffer:undefined}],381:[function(require,module,exports){"use strict";var BOMChar="\ufeff";exports.PrependBOM=PrependBOMWrapper;function PrependBOMWrapper(encoder,options){this.encoder=encoder;this.addBOM=true}PrependBOMWrapper.prototype.write=function(str){if(this.addBOM){str=BOMChar+str;this.addBOM=false}return this.encoder.write(str)};PrependBOMWrapper.prototype.end=function(){return this.encoder.end()};exports.StripBOM=StripBOMWrapper;function StripBOMWrapper(decoder,options){this.decoder=decoder;this.pass=false;this.options=options||{}}StripBOMWrapper.prototype.write=function(buf){var res=this.decoder.write(buf);if(this.pass||!res)return res;if(res[0]===BOMChar){res=res.slice(1);if(typeof this.options.stripBOM==="function")this.options.stripBOM()}this.pass=true;return res};StripBOMWrapper.prototype.end=function(){return this.decoder.end()}},{}],382:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer;module.exports=function(iconv){var original=undefined;iconv.supportsNodeEncodingsExtension=!(new Buffer(0)instanceof Uint8Array);iconv.extendNodeEncodings=function extendNodeEncodings(){if(original)return;original={};if(!iconv.supportsNodeEncodingsExtension){console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node");console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");return}var nodeNativeEncodings={hex:true,utf8:true,"utf-8":true,ascii:true,binary:true,base64:true,ucs2:true,"ucs-2":true,utf16le:true,"utf-16le":true};Buffer.isNativeEncoding=function(enc){return enc&&nodeNativeEncodings[enc.toLowerCase()]};var SlowBuffer=require("buffer").SlowBuffer;original.SlowBufferToString=SlowBuffer.prototype.toString;SlowBuffer.prototype.toString=function(encoding,start,end){encoding=String(encoding||"utf8").toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.SlowBufferToString.call(this,encoding,start,end);if(typeof start=="undefined")start=0;if(typeof end=="undefined")end=this.length;return iconv.decode(this.slice(start,end),encoding)};original.SlowBufferWrite=SlowBuffer.prototype.write;SlowBuffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=+length;if(length>remaining){length=remaining}}encoding=String(encoding||"utf8").toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.SlowBufferWrite.call(this,string,offset,length,encoding);if(string.length>0&&(length<0||offset<0))throw new RangeError("attempt to write beyond buffer bounds");var buf=iconv.encode(string,encoding);if(buf.length<length)length=buf.length;buf.copy(this,offset,0,length);return length};original.BufferIsEncoding=Buffer.isEncoding;Buffer.isEncoding=function(encoding){return Buffer.isNativeEncoding(encoding)||iconv.encodingExists(encoding)};original.BufferByteLength=Buffer.byteLength;Buffer.byteLength=SlowBuffer.byteLength=function(str,encoding){encoding=String(encoding||"utf8").toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.BufferByteLength.call(this,str,encoding);return iconv.encode(str,encoding).length};original.BufferToString=Buffer.prototype.toString;Buffer.prototype.toString=function(encoding,start,end){encoding=String(encoding||"utf8").toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.BufferToString.call(this,encoding,start,end);if(typeof start=="undefined")start=0;if(typeof end=="undefined")end=this.length;return iconv.decode(this.slice(start,end),encoding)};original.BufferWrite=Buffer.prototype.write;Buffer.prototype.write=function(string,offset,length,encoding){var _offset=offset,_length=length,_encoding=encoding;if(isFinite(offset)){if(!isFinite(length)){encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length;length=swap}encoding=String(encoding||"utf8").toLowerCase();if(Buffer.isNativeEncoding(encoding))return original.BufferWrite.call(this,string,_offset,_length,_encoding);offset=+offset||0;var remaining=this.length-offset;if(!length){length=remaining}else{length=+length;if(length>remaining){length=remaining}}if(string.length>0&&(length<0||offset<0))throw new RangeError("attempt to write beyond buffer bounds");var buf=iconv.encode(string,encoding);if(buf.length<length)length=buf.length;buf.copy(this,offset,0,length);return length};if(iconv.supportsStreams){var Readable=require("stream").Readable;original.ReadableSetEncoding=Readable.prototype.setEncoding;Readable.prototype.setEncoding=function setEncoding(enc,options){this._readableState.decoder=iconv.getDecoder(enc,options);this._readableState.encoding=enc};Readable.prototype.collect=iconv._collect}};iconv.undoExtendNodeEncodings=function undoExtendNodeEncodings(){if(!iconv.supportsNodeEncodingsExtension)return;if(!original)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete Buffer.isNativeEncoding;var SlowBuffer=require("buffer").SlowBuffer;SlowBuffer.prototype.toString=original.SlowBufferToString;SlowBuffer.prototype.write=original.SlowBufferWrite;Buffer.isEncoding=original.BufferIsEncoding;Buffer.byteLength=original.BufferByteLength;Buffer.prototype.toString=original.BufferToString;Buffer.prototype.write=original.BufferWrite;if(iconv.supportsStreams){var Readable=require("stream").Readable;Readable.prototype.setEncoding=original.ReadableSetEncoding;delete Readable.prototype.collect}original=undefined}}},{buffer:undefined,stream:undefined}],383:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer;var bomHandling=require("./bom-handling"),iconv=module.exports;iconv.encodings=null;iconv.defaultCharUnicode="";iconv.defaultCharSingleByte="?";iconv.encode=function encode(str,encoding,options){str=""+(str||"");var encoder=iconv.getEncoder(encoding,options);var res=encoder.write(str);var trail=encoder.end();return trail&&trail.length>0?Buffer.concat([res,trail]):res};iconv.decode=function decode(buf,encoding,options){if(typeof buf==="string"){if(!iconv.skipDecodeWarning){console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding");iconv.skipDecodeWarning=true}buf=new Buffer(""+(buf||""),"binary")}var decoder=iconv.getDecoder(encoding,options);var res=decoder.write(buf);var trail=decoder.end();return trail?res+trail:res};iconv.encodingExists=function encodingExists(enc){try{iconv.getCodec(enc);return true}catch(e){return false}};iconv.toEncoding=iconv.encode;iconv.fromEncoding=iconv.decode;iconv._codecDataCache={};iconv.getCodec=function getCodec(encoding){if(!iconv.encodings)iconv.encodings=require("../encodings");var enc=(""+encoding).toLowerCase().replace(/[^0-9a-z]|:\d{4}$/g,"");var codecOptions={};while(true){var codec=iconv._codecDataCache[enc];if(codec)return codec;var codecDef=iconv.encodings[enc];switch(typeof codecDef){case"string":enc=codecDef;break;case"object":for(var key in codecDef)codecOptions[key]=codecDef[key];if(!codecOptions.encodingName)codecOptions.encodingName=enc;enc=codecDef.type;break;case"function":if(!codecOptions.encodingName)codecOptions.encodingName=enc;codec=new codecDef(codecOptions,iconv);iconv._codecDataCache[codecOptions.encodingName]=codec;return codec;default:throw new Error("Encoding not recognized: '"+encoding+"' (searched as: '"+enc+"')")}}};iconv.getEncoder=function getEncoder(encoding,options){var codec=iconv.getCodec(encoding),encoder=new codec.encoder(options,codec);if(codec.bomAware&&options&&options.addBOM)encoder=new bomHandling.PrependBOM(encoder,options);return encoder};iconv.getDecoder=function getDecoder(encoding,options){var codec=iconv.getCodec(encoding),decoder=new codec.decoder(options,codec);if(codec.bomAware&&!(options&&options.stripBOM===false))decoder=new bomHandling.StripBOM(decoder,options);return decoder};var nodeVer=typeof process!=="undefined"&&process.versions&&process.versions.node;if(nodeVer){var nodeVerArr=nodeVer.split(".").map(Number);if(nodeVerArr[0]>0||nodeVerArr[1]>=10){require("./streams")(iconv)}require("./extend-node")(iconv)}if(""!=""){console.error("iconv-lite warning: javascript files use encoding different from utf-8. See https://github.com/ashtuchkin/iconv-lite/wiki/Javascript-source-file-encodings for more info.")}},{"../encodings":366,"./bom-handling":381,"./extend-node":382,"./streams":384,buffer:undefined}],384:[function(require,module,exports){"use strict";var Buffer=require("buffer").Buffer,Transform=require("stream").Transform;module.exports=function(iconv){iconv.encodeStream=function encodeStream(encoding,options){return new IconvLiteEncoderStream(iconv.getEncoder(encoding,options),options)};iconv.decodeStream=function decodeStream(encoding,options){return new IconvLiteDecoderStream(iconv.getDecoder(encoding,options),options)};iconv.supportsStreams=true;iconv.IconvLiteEncoderStream=IconvLiteEncoderStream;iconv.IconvLiteDecoderStream=IconvLiteDecoderStream;iconv._collect=IconvLiteDecoderStream.prototype.collect};function IconvLiteEncoderStream(conv,options){this.conv=conv;options=options||{};options.decodeStrings=false;Transform.call(this,options)}IconvLiteEncoderStream.prototype=Object.create(Transform.prototype,{constructor:{value:IconvLiteEncoderStream}});IconvLiteEncoderStream.prototype._transform=function(chunk,encoding,done){if(typeof chunk!="string")return done(new Error("Iconv encoding stream needs strings as its input."));try{var res=this.conv.write(chunk);if(res&&res.length)this.push(res);done()}catch(e){done(e)}};IconvLiteEncoderStream.prototype._flush=function(done){try{var res=this.conv.end();if(res&&res.length)this.push(res);done()}catch(e){done(e)}};IconvLiteEncoderStream.prototype.collect=function(cb){var chunks=[];this.on("error",cb);this.on("data",function(chunk){chunks.push(chunk)});this.on("end",function(){cb(null,Buffer.concat(chunks))});return this};function IconvLiteDecoderStream(conv,options){this.conv=conv;options=options||{};options.encoding=this.encoding="utf8";Transform.call(this,options)}IconvLiteDecoderStream.prototype=Object.create(Transform.prototype,{constructor:{value:IconvLiteDecoderStream}});IconvLiteDecoderStream.prototype._transform=function(chunk,encoding,done){if(!Buffer.isBuffer(chunk))return done(new Error("Iconv decoding stream needs buffers as its input."));try{var res=this.conv.write(chunk);if(res&&res.length)this.push(res,this.encoding);done()}catch(e){done(e)}};IconvLiteDecoderStream.prototype._flush=function(done){try{var res=this.conv.end();if(res&&res.length)this.push(res,this.encoding);done()}catch(e){done(e)}};IconvLiteDecoderStream.prototype.collect=function(cb){var res="";this.on("error",cb);this.on("data",function(chunk){res+=chunk});this.on("end",function(){cb(null,res)});return this}},{buffer:undefined,stream:undefined}],385:[function(require,module,exports){"use strict";var typeHandlers=require("./types");module.exports=function(buffer,filepath){var type,result;for(type in typeHandlers){result=typeHandlers[type].detect(buffer,filepath);if(result){return type}}}},{"./types":388}],386:[function(require,module,exports){"use strict";var fs=require("fs");var path=require("path");var typeHandlers=require("./types");var detector=require("./detector");var MaxBufferSize=512*1024;function lookup(buffer,filepath){var type=detector(buffer,filepath);if(type in typeHandlers){var size=typeHandlers[type].calculate(buffer,filepath);if(size!==false){size.type=type;return size}}throw new TypeError("unsupported file type: "+type+" (file: "+filepath+")")}function asyncFileToBuffer(filepath,callback){fs.open(filepath,"r",function(err,descriptor){if(err){return callback(err)}fs.fstat(descriptor,function(err,stats){if(err){return callback(err)}var size=stats.size;if(size<=0){return callback(new Error("File size is not greater than 0  "+filepath))}var bufferSize=Math.min(size,MaxBufferSize);var buffer=new Buffer(bufferSize);fs.read(descriptor,buffer,0,bufferSize,0,function(err){if(err){return callback(err)}fs.close(descriptor,function(err){callback(err,buffer)})})})})}function syncFileToBuffer(filepath){var descriptor=fs.openSync(filepath,"r");var size=fs.fstatSync(descriptor).size;var bufferSize=Math.min(size,MaxBufferSize);var buffer=new Buffer(bufferSize);fs.readSync(descriptor,buffer,0,bufferSize,0);fs.closeSync(descriptor);return buffer}module.exports=function(input,callback){if(Buffer.isBuffer(input)){return lookup(input)}if(typeof input!=="string"){throw new TypeError("invalid invocation")}var filepath=path.resolve(input);if(typeof callback==="function"){asyncFileToBuffer(filepath,function(err,buffer){if(err){return callback(err)}var dimensions;try{dimensions=lookup(buffer,filepath)}catch(e){err=e}callback(err,dimensions)})}else{var buffer=syncFileToBuffer(filepath);return lookup(buffer,filepath)}};module.exports.types=Object.keys(typeHandlers)},{"./detector":385,"./types":388,fs:undefined,path:undefined}],387:[function(require,module,exports){"use strict";function readUInt(buffer,bits,offset,isBigEndian){offset=offset||0;var endian=isBigEndian?"BE":"LE";var method=buffer["readUInt"+bits+endian];return method.call(buffer,offset)}module.exports=readUInt},{}],388:[function(require,module,exports){"use strict";var typeHandlers={bmp:require("./types/bmp"),cur:require("./types/cur"),dds:require("./types/dds"),gif:require("./types/gif"),ico:require("./types/ico"),jpg:require("./types/jpg"),png:require("./types/png"),psd:require("./types/psd"),svg:require("./types/svg"),tiff:require("./types/tiff"),webp:require("./types/webp")};module.exports=typeHandlers},{"./types/bmp":389,"./types/cur":390,"./types/dds":391,"./types/gif":392,"./types/ico":393,"./types/jpg":394,"./types/png":395,"./types/psd":396,"./types/svg":397,"./types/tiff":398,"./types/webp":399}],389:[function(require,module,exports){"use strict";function isBMP(buffer){return"BM"===buffer.toString("ascii",0,2)}function calculate(buffer){return{width:buffer.readUInt32LE(18),height:Math.abs(buffer.readInt32LE(22))}}module.exports={detect:isBMP,calculate:calculate}},{}],390:[function(require,module,exports){"use strict";var TYPE_CURSOR=2;function isCUR(buffer){var type;if(buffer.readUInt16LE(0)!==0){return false}type=buffer.readUInt16LE(2);return type===TYPE_CURSOR}module.exports={detect:isCUR,calculate:require("./ico").calculate}},{"./ico":393}],391:[function(require,module,exports){"use strict";function isDDS(buffer){return buffer.readUInt32LE(0)===542327876}function calculate(buffer){return{height:buffer.readUInt32LE(12),width:buffer.readUInt32LE(16)}}module.exports={detect:isDDS,calculate:calculate}},{}],392:[function(require,module,exports){"use strict";var gifRegexp=/^GIF8[79]a/;function isGIF(buffer){var signature=buffer.toString("ascii",0,6);return gifRegexp.test(signature)}function calculate(buffer){return{width:buffer.readUInt16LE(6),height:buffer.readUInt16LE(8)}}module.exports={detect:isGIF,calculate:calculate}},{}],393:[function(require,module,exports){"use strict";var TYPE_ICON=1;var SIZE_HEADER=2+2+2;var SIZE_IMAGE_ENTRY=1+1+1+1+2+2+4+4;function isICO(buffer){var type;if(buffer.readUInt16LE(0)!==0){return false}type=buffer.readUInt16LE(2);return type===TYPE_ICON}function getSizeFromOffset(buffer,offset){var value=buffer.readUInt8(offset);return value===0?256:value}function getImageSize(buffer,imageIndex){var offset=SIZE_HEADER+imageIndex*SIZE_IMAGE_ENTRY;return{width:getSizeFromOffset(buffer,offset),height:getSizeFromOffset(buffer,offset+1)}}function calculate(buffer){var nbImages=buffer.readUInt16LE(4),result=getImageSize(buffer,0),imageIndex;if(nbImages===1){return result}result.images=[{width:result.width,height:result.height}];for(imageIndex=1;imageIndex<nbImages;imageIndex+=1){result.images.push(getImageSize(buffer,imageIndex))}return result}module.exports={detect:isICO,calculate:calculate}},{}],394:[function(require,module,exports){"use strict";function isJPG(buffer){var SOIMarker=buffer.toString("hex",0,2);return"ffd8"===SOIMarker}function extractSize(buffer,i){return{height:buffer.readUInt16BE(i),width:buffer.readUInt16BE(i+2)}}function validateBuffer(buffer,i){if(i>buffer.length){throw new TypeError("Corrupt JPG, exceeded buffer limits")}if(buffer[i]!==255){throw new TypeError("Invalid JPG, marker table corrupted")}}function calculate(buffer){buffer=buffer.slice(4);var i,next;while(buffer.length){i=buffer.readUInt16BE(0);validateBuffer(buffer,i);next=buffer[i+1];if(next===192||next===193||next===194){return extractSize(buffer,i+5)}buffer=buffer.slice(i+2)}throw new TypeError("Invalid JPG, no size found")}module.exports={detect:isJPG,calculate:calculate}},{}],395:[function(require,module,exports){"use strict";var pngSignature="PNG\r\n\n";var pngImageHeaderChunkName="IHDR";var pngFriedChunkName="CgBI";function isPNG(buffer){if(pngSignature===buffer.toString("ascii",1,8)){var chunkName=buffer.toString("ascii",12,16);if(chunkName===pngFriedChunkName){chunkName=buffer.toString("ascii",28,32)}if(chunkName!==pngImageHeaderChunkName){throw new TypeError("invalid png")}return true}}function calculate(buffer){if(buffer.toString("ascii",12,16)===pngFriedChunkName){return{width:buffer.readUInt32BE(32),height:buffer.readUInt32BE(36)}}return{width:buffer.readUInt32BE(16),height:buffer.readUInt32BE(20)}}module.exports={detect:isPNG,calculate:calculate}},{}],396:[function(require,module,exports){"use strict";function isPSD(buffer){return"8BPS"===buffer.toString("ascii",0,4)}function calculate(buffer){return{width:buffer.readUInt32BE(18),height:buffer.readUInt32BE(14)}}module.exports={detect:isPSD,calculate:calculate}},{}],397:[function(require,module,exports){"use strict";var svgReg=/<svg[^>]+[^>]*>/;function isSVG(buffer){return svgReg.test(buffer)}var extractorRegExps={root:/<svg\s[^>]+>/,width:/\bwidth=(['"])([^%]+?)\1/,height:/\bheight=(['"])([^%]+?)\1/,viewbox:/\bviewBox=(['"])(.+?)\1/};function parseViewbox(viewbox){var bounds=viewbox.split(" ");return{width:parseInt(bounds[2],10),height:parseInt(bounds[3],10)}}function parseAttributes(root){var width=root.match(extractorRegExps.width);var height=root.match(extractorRegExps.height);var viewbox=root.match(extractorRegExps.viewbox);return{width:width&&parseInt(width[2],10),height:height&&parseInt(height[2],10),viewbox:viewbox&&parseViewbox(viewbox[2])}}function calculateByDimensions(attrs){return{width:attrs.width,height:attrs.height}}function calculateByViewbox(attrs){var ratio=attrs.viewbox.width/attrs.viewbox.height;if(attrs.width){return{width:attrs.width,height:Math.floor(attrs.width/ratio)}}if(attrs.height){return{width:Math.floor(attrs.height*ratio),height:attrs.height}}return{width:attrs.viewbox.width,height:attrs.viewbox.height}}function calculate(buffer){var root=buffer.toString("utf8").match(extractorRegExps.root);if(root){var attrs=parseAttributes(root[0]);if(attrs.width&&attrs.height){return calculateByDimensions(attrs)}if(attrs.viewbox){return calculateByViewbox(attrs)}}throw new TypeError("invalid svg")}module.exports={detect:isSVG,calculate:calculate}},{}],398:[function(require,module,exports){"use strict";var fs=require("fs");var readUInt=require("../readUInt");function isTIFF(buffer){var hex4=buffer.toString("hex",0,4);return"49492a00"===hex4||"4d4d002a"===hex4}function readIFD(buffer,filepath,isBigEndian){var ifdOffset=readUInt(buffer,32,4,isBigEndian);var bufferSize=1024;var fileSize=fs.statSync(filepath).size;if(ifdOffset+bufferSize>fileSize){bufferSize=fileSize-ifdOffset-10}var endBuffer=new Buffer(bufferSize);var descriptor=fs.openSync(filepath,"r");fs.readSync(descriptor,endBuffer,0,bufferSize,ifdOffset);var ifdBuffer=endBuffer.slice(2);return ifdBuffer}function readValue(buffer,isBigEndian){var low=readUInt(buffer,16,8,isBigEndian);var high=readUInt(buffer,16,10,isBigEndian);return(high<<16)+low}function nextTag(buffer){if(buffer.length>24){return buffer.slice(12)}}function extractTags(buffer,isBigEndian){var tags={};var code,type,length;while(buffer&&buffer.length){code=readUInt(buffer,16,0,isBigEndian);type=readUInt(buffer,16,2,isBigEndian);length=readUInt(buffer,32,4,isBigEndian);if(code===0){break}else{if(length===1&&(type===3||type===4)){tags[code]=readValue(buffer,isBigEndian)}buffer=nextTag(buffer)}}return tags}function determineEndianness(buffer){var signature=buffer.toString("ascii",0,2);if("II"===signature){return"LE"}else if("MM"===signature){return"BE"}}function calculate(buffer,filepath){if(!filepath){throw new TypeError("Tiff doesn't support buffer")}var isBigEndian=determineEndianness(buffer)==="BE";var ifdBuffer=readIFD(buffer,filepath,isBigEndian);var tags=extractTags(ifdBuffer,isBigEndian);var width=tags[256];var height=tags[257];if(!width||!height){throw new TypeError("Invalid Tiff, missing tags")}return{width:width,height:height}}module.exports={detect:isTIFF,calculate:calculate}},{"../readUInt":387,fs:undefined}],399:[function(require,module,exports){"use strict";function isWebP(buffer){var riffHeader="RIFF"===buffer.toString("ascii",0,4);var webpHeader="WEBP"===buffer.toString("ascii",8,12);var vp8Header="VP8"===buffer.toString("ascii",12,15);return riffHeader&&webpHeader&&vp8Header}function calculate(buffer){var chunkHeader=buffer.toString("ascii",12,16);buffer=buffer.slice(20,30);if(chunkHeader==="VP8X"){var extendedHeader=buffer[0];var validStart=(extendedHeader&192)===0;var validEnd=(extendedHeader&1)===0;if(validStart&&validEnd){return calculateExtended(buffer)}else{return false}}if(chunkHeader==="VP8 "&&buffer[0]!==47){return calculateLossy(buffer)}var signature=buffer.toString("hex",3,6);if(chunkHeader==="VP8L"&&signature!=="9d012a"){return calculateLossless(buffer)}return false}function calculateExtended(buffer){return{width:1+buffer.readUIntLE(4,3),height:1+buffer.readUIntLE(7,3)}}function calculateLossless(buffer){return{width:1+((buffer[2]&63)<<8|buffer[1]),height:1+((buffer[4]&15)<<10|buffer[3]<<2|(buffer[2]&192)>>6)}}function calculateLossy(buffer){return{width:buffer.readInt16LE(6)&16383,height:buffer.readInt16LE(8)&16383}}module.exports={detect:isWebP,calculate:calculate}},{}],400:[function(require,module,exports){try{var util=require("util");if(typeof util.inherits!=="function")throw"";module.exports=util.inherits}catch(e){module.exports=require("./inherits_browser.js")}},{"./inherits_browser.js":401,util:undefined}],401:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],402:[function(require,module,exports){(function(){var expandIPv6,ipaddr,ipv4Part,ipv4Regexes,ipv6Part,ipv6Regexes,matchCIDR,root,zoneIndex;ipaddr={};root=this;if(typeof module!=="undefined"&&module!==null&&module.exports){module.exports=ipaddr}else{root["ipaddr"]=ipaddr}matchCIDR=function(first,second,partSize,cidrBits){var part,shift;if(first.length!==second.length){throw new Error("ipaddr: cannot match CIDR for objects with different lengths")}part=0;while(cidrBits>0){shift=partSize-cidrBits;if(shift<0){shift=0}if(first[part]>>shift!==second[part]>>shift){return false}cidrBits-=partSize;part+=1}return true};ipaddr.subnetMatch=function(address,rangeList,defaultName){var k,len,rangeName,rangeSubnets,subnet;if(defaultName==null){defaultName="unicast"}for(rangeName in rangeList){rangeSubnets=rangeList[rangeName];if(rangeSubnets[0]&&!(rangeSubnets[0]instanceof Array)){rangeSubnets=[rangeSubnets]}for(k=0,len=rangeSubnets.length;k<len;k++){subnet=rangeSubnets[k];if(address.kind()===subnet[0].kind()){if(address.match.apply(address,subnet)){return rangeName}}}}return defaultName};ipaddr.IPv4=function(){function IPv4(octets){var k,len,octet;if(octets.length!==4){throw new Error("ipaddr: ipv4 octet count should be 4")}for(k=0,len=octets.length;k<len;k++){octet=octets[k];if(!(0<=octet&&octet<=255)){throw new Error("ipaddr: ipv4 octet should fit in 8 bits")}}this.octets=octets}IPv4.prototype.kind=function(){return"ipv4"};IPv4.prototype.toString=function(){return this.octets.join(".")};IPv4.prototype.toNormalizedString=function(){return this.toString()};IPv4.prototype.toByteArray=function(){return this.octets.slice(0)};IPv4.prototype.match=function(other,cidrRange){var ref;if(cidrRange===void 0){ref=other,other=ref[0],cidrRange=ref[1]}if(other.kind()!=="ipv4"){throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one")}return matchCIDR(this.octets,other.octets,8,cidrRange)};IPv4.prototype.SpecialRanges={unspecified:[[new IPv4([0,0,0,0]),8]],broadcast:[[new IPv4([255,255,255,255]),32]],multicast:[[new IPv4([224,0,0,0]),4]],linkLocal:[[new IPv4([169,254,0,0]),16]],loopback:[[new IPv4([127,0,0,0]),8]],carrierGradeNat:[[new IPv4([100,64,0,0]),10]],private:[[new IPv4([10,0,0,0]),8],[new IPv4([172,16,0,0]),12],[new IPv4([192,168,0,0]),16]],reserved:[[new IPv4([192,0,0,0]),24],[new IPv4([192,0,2,0]),24],[new IPv4([192,88,99,0]),24],[new IPv4([198,51,100,0]),24],[new IPv4([203,0,113,0]),24],[new IPv4([240,0,0,0]),4]]};IPv4.prototype.range=function(){return ipaddr.subnetMatch(this,this.SpecialRanges)};IPv4.prototype.toIPv4MappedAddress=function(){return ipaddr.IPv6.parse("::ffff:"+this.toString())};IPv4.prototype.prefixLengthFromSubnetMask=function(){var cidr,i,k,octet,stop,zeros,zerotable;zerotable={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};cidr=0;stop=false;for(i=k=3;k>=0;i=k+=-1){octet=this.octets[i];if(octet in zerotable){zeros=zerotable[octet];if(stop&&zeros!==0){return null}if(zeros!==8){stop=true}cidr+=zeros}else{return null}}return 32-cidr};return IPv4}();ipv4Part="(0?\\d+|0x[a-f0-9]+)";ipv4Regexes={fourOctet:new RegExp("^"+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"$","i"),longValue:new RegExp("^"+ipv4Part+"$","i")};ipaddr.IPv4.parser=function(string){var match,parseIntAuto,part,shift,value;parseIntAuto=function(string){if(string[0]==="0"&&string[1]!=="x"){return parseInt(string,8)}else{return parseInt(string)}};if(match=string.match(ipv4Regexes.fourOctet)){return function(){var k,len,ref,results;ref=match.slice(1,6);results=[];for(k=0,len=ref.length;k<len;k++){part=ref[k];results.push(parseIntAuto(part))}return results}()}else if(match=string.match(ipv4Regexes.longValue)){value=parseIntAuto(match[1]);if(value>4294967295||value<0){throw new Error("ipaddr: address outside defined range")}return function(){var k,results;results=[];for(shift=k=0;k<=24;shift=k+=8){results.push(value>>shift&255)}return results}().reverse()}else{return null}};ipaddr.IPv6=function(){function IPv6(parts,zoneId){var i,k,l,len,part,ref;if(parts.length===16){this.parts=[];for(i=k=0;k<=14;i=k+=2){this.parts.push(parts[i]<<8|parts[i+1])}}else if(parts.length===8){this.parts=parts}else{throw new Error("ipaddr: ipv6 part count should be 8 or 16")}ref=this.parts;for(l=0,len=ref.length;l<len;l++){part=ref[l];if(!(0<=part&&part<=65535)){throw new Error("ipaddr: ipv6 part should fit in 16 bits")}}if(zoneId){this.zoneId=zoneId}}IPv6.prototype.kind=function(){return"ipv6"};IPv6.prototype.toString=function(){var addr,compactStringParts,k,len,part,pushPart,state,stringParts,suffix;stringParts=function(){var k,len,ref,results;ref=this.parts;results=[];for(k=0,len=ref.length;k<len;k++){part=ref[k];results.push(part.toString(16))}return results}.call(this);compactStringParts=[];pushPart=function(part){return compactStringParts.push(part)};state=0;for(k=0,len=stringParts.length;k<len;k++){part=stringParts[k];switch(state){case 0:if(part==="0"){pushPart("")}else{pushPart(part)}state=1;break;case 1:if(part==="0"){state=2}else{pushPart(part)}break;case 2:if(part!=="0"){pushPart("");pushPart(part);state=3}break;case 3:pushPart(part)}}if(state===2){pushPart("");pushPart("")}addr=compactStringParts.join(":");suffix="";if(this.zoneId){suffix="%"+this.zoneId}return addr+suffix};IPv6.prototype.toByteArray=function(){var bytes,k,len,part,ref;bytes=[];ref=this.parts;for(k=0,len=ref.length;k<len;k++){part=ref[k];bytes.push(part>>8);bytes.push(part&255)}return bytes};IPv6.prototype.toNormalizedString=function(){var addr,part,suffix;addr=function(){var k,len,ref,results;ref=this.parts;results=[];for(k=0,len=ref.length;k<len;k++){part=ref[k];results.push(part.toString(16))}return results}.call(this).join(":");suffix="";if(this.zoneId){suffix="%"+this.zoneId}return addr+suffix};IPv6.prototype.match=function(other,cidrRange){var ref;if(cidrRange===void 0){ref=other,other=ref[0],cidrRange=ref[1]}if(other.kind()!=="ipv6"){throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one")}return matchCIDR(this.parts,other.parts,16,cidrRange)};IPv6.prototype.SpecialRanges={unspecified:[new IPv6([0,0,0,0,0,0,0,0]),128],linkLocal:[new IPv6([65152,0,0,0,0,0,0,0]),10],multicast:[new IPv6([65280,0,0,0,0,0,0,0]),8],loopback:[new IPv6([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new IPv6([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new IPv6([0,0,0,0,0,65535,0,0]),96],rfc6145:[new IPv6([0,0,0,0,65535,0,0,0]),96],rfc6052:[new IPv6([100,65435,0,0,0,0,0,0]),96],"6to4":[new IPv6([8194,0,0,0,0,0,0,0]),16],teredo:[new IPv6([8193,0,0,0,0,0,0,0]),32],reserved:[[new IPv6([8193,3512,0,0,0,0,0,0]),32]]};IPv6.prototype.range=function(){return ipaddr.subnetMatch(this,this.SpecialRanges)};IPv6.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"};IPv6.prototype.toIPv4Address=function(){var high,low,ref;if(!this.isIPv4MappedAddress()){throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4")}ref=this.parts.slice(-2),high=ref[0],low=ref[1];return new ipaddr.IPv4([high>>8,high&255,low>>8,low&255])};IPv6.prototype.prefixLengthFromSubnetMask=function(){var cidr,i,k,part,stop,zeros,zerotable;zerotable={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};cidr=0;stop=false;for(i=k=7;k>=0;i=k+=-1){part=this.parts[i];if(part in zerotable){zeros=zerotable[part];if(stop&&zeros!==0){return null}if(zeros!==16){stop=true}cidr+=zeros}else{return null}}return 128-cidr};return IPv6}();ipv6Part="(?:[0-9a-f]+::?)+";zoneIndex="%[0-9a-z]{1,}";ipv6Regexes={zoneIndex:new RegExp(zoneIndex,"i"),native:new RegExp("^(::)?("+ipv6Part+")?([0-9a-f]+)?(::)?("+zoneIndex+")?$","i"),transitional:new RegExp("^((?:"+ipv6Part+")|(?:::)(?:"+ipv6Part+")?)"+(ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part+"\\."+ipv4Part)+("("+zoneIndex+")?$"),"i")};expandIPv6=function(string,parts){var colonCount,lastColon,part,replacement,replacementCount,zoneId;if(string.indexOf("::")!==string.lastIndexOf("::")){return null}zoneId=(string.match(ipv6Regexes["zoneIndex"])||[])[0];if(zoneId){zoneId=zoneId.substring(1);string=string.replace(/%.+$/,"")}colonCount=0;lastColon=-1;while((lastColon=string.indexOf(":",lastColon+1))>=0){colonCount++}if(string.substr(0,2)==="::"){colonCount--}if(string.substr(-2,2)==="::"){colonCount--}if(colonCount>parts){return null}replacementCount=parts-colonCount;replacement=":";while(replacementCount--){replacement+="0:"}string=string.replace("::",replacement);if(string[0]===":"){string=string.slice(1)}if(string[string.length-1]===":"){string=string.slice(0,-1)}parts=function(){var k,len,ref,results;ref=string.split(":");results=[];for(k=0,len=ref.length;k<len;k++){part=ref[k];results.push(parseInt(part,16))}return results}();return{parts:parts,zoneId:zoneId}};ipaddr.IPv6.parser=function(string){var addr,k,len,match,octet,octets,zoneId;if(ipv6Regexes["native"].test(string)){return expandIPv6(string,8)}else if(match=string.match(ipv6Regexes["transitional"])){zoneId=match[6]||"";addr=expandIPv6(match[1].slice(0,-1)+zoneId,6);if(addr.parts){octets=[parseInt(match[2]),parseInt(match[3]),parseInt(match[4]),parseInt(match[5])];for(k=0,len=octets.length;k<len;k++){octet=octets[k];if(!(0<=octet&&octet<=255)){return null}}addr.parts.push(octets[0]<<8|octets[1]);addr.parts.push(octets[2]<<8|octets[3]);return{parts:addr.parts,zoneId:addr.zoneId}}}return null};ipaddr.IPv4.isIPv4=ipaddr.IPv6.isIPv6=function(string){return this.parser(string)!==null};ipaddr.IPv4.isValid=function(string){var e;try{new this(this.parser(string));return true}catch(error1){e=error1;return false}};ipaddr.IPv4.isValidFourPartDecimal=function(string){if(ipaddr.IPv4.isValid(string)&&string.match(/^\d+(\.\d+){3}$/)){return true}else{return false}};ipaddr.IPv6.isValid=function(string){var addr,e;if(typeof string==="string"&&string.indexOf(":")===-1){return false}try{addr=this.parser(string);new this(addr.parts,addr.zoneId);return true}catch(error1){e=error1;return false}};ipaddr.IPv4.parse=function(string){var parts;parts=this.parser(string);if(parts===null){throw new Error("ipaddr: string is not formatted like ip address")}return new this(parts)};ipaddr.IPv6.parse=function(string){var addr;addr=this.parser(string);if(addr.parts===null){throw new Error("ipaddr: string is not formatted like ip address")}return new this(addr.parts,addr.zoneId)};ipaddr.IPv4.parseCIDR=function(string){var maskLength,match;if(match=string.match(/^(.+)\/(\d+)$/)){maskLength=parseInt(match[2]);if(maskLength>=0&&maskLength<=32){return[this.parse(match[1]),maskLength]}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")};ipaddr.IPv4.subnetMaskFromPrefixLength=function(prefix){var filledOctetCount,j,octets;prefix=parseInt(prefix);if(prefix<0||prefix>32){throw new Error("ipaddr: invalid IPv4 prefix length")}octets=[0,0,0,0];j=0;filledOctetCount=Math.floor(prefix/8);while(j<filledOctetCount){octets[j]=255;j++}if(filledOctetCount<4){octets[filledOctetCount]=Math.pow(2,prefix%8)-1<<8-prefix%8}return new this(octets)};ipaddr.IPv4.broadcastAddressFromCIDR=function(string){var cidr,error,i,ipInterfaceOctets,octets,subnetMaskOctets;try{cidr=this.parseCIDR(string);ipInterfaceOctets=cidr[0].toByteArray();subnetMaskOctets=this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();octets=[];i=0;while(i<4){octets.push(parseInt(ipInterfaceOctets[i],10)|parseInt(subnetMaskOctets[i],10)^255);i++}return new this(octets)}catch(error1){error=error1;throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};ipaddr.IPv4.networkAddressFromCIDR=function(string){var cidr,error,i,ipInterfaceOctets,octets,subnetMaskOctets;try{cidr=this.parseCIDR(string);ipInterfaceOctets=cidr[0].toByteArray();subnetMaskOctets=this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();octets=[];i=0;while(i<4){octets.push(parseInt(ipInterfaceOctets[i],10)&parseInt(subnetMaskOctets[i],10));i++}return new this(octets)}catch(error1){error=error1;throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};ipaddr.IPv6.parseCIDR=function(string){var maskLength,match;if(match=string.match(/^(.+)\/(\d+)$/)){maskLength=parseInt(match[2]);if(maskLength>=0&&maskLength<=128){return[this.parse(match[1]),maskLength]}}throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")};ipaddr.isValid=function(string){return ipaddr.IPv6.isValid(string)||ipaddr.IPv4.isValid(string)};ipaddr.parse=function(string){if(ipaddr.IPv6.isValid(string)){return ipaddr.IPv6.parse(string)}else if(ipaddr.IPv4.isValid(string)){return ipaddr.IPv4.parse(string)}else{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")}};ipaddr.parseCIDR=function(string){var e;try{return ipaddr.IPv6.parseCIDR(string)}catch(error1){e=error1;try{return ipaddr.IPv4.parseCIDR(string)}catch(error1){e=error1;throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}};ipaddr.fromByteArray=function(bytes){var length;length=bytes.length;if(length===4){return new ipaddr.IPv4(bytes)}else if(length===16){return new ipaddr.IPv6(bytes)}else{throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")}};ipaddr.process=function(string){var addr;addr=this.parse(string);if(addr.kind()==="ipv6"&&addr.isIPv4MappedAddress()){return addr.toIPv4Address()}else{return addr}}}).call(this)},{}],403:[function(require,module,exports){module.exports=isTypedArray;isTypedArray.strict=isStrictTypedArray;isTypedArray.loose=isLooseTypedArray;var toString=Object.prototype.toString;var names={"[object Int8Array]":true,"[object Int16Array]":true,"[object Int32Array]":true,"[object Uint8Array]":true,"[object Uint8ClampedArray]":true,"[object Uint16Array]":true,"[object Uint32Array]":true,"[object Float32Array]":true,"[object Float64Array]":true};function isTypedArray(arr){return isStrictTypedArray(arr)||isLooseTypedArray(arr)}function isStrictTypedArray(arr){return arr instanceof Int8Array||arr instanceof Int16Array||arr instanceof Int32Array||arr instanceof Uint8Array||arr instanceof Uint8ClampedArray||arr instanceof Uint16Array||arr instanceof Uint32Array||arr instanceof Float32Array||arr instanceof Float64Array}function isLooseTypedArray(arr){return names[toString.call(arr)]}},{}],404:[function(require,module,exports){var stream=require("stream");function isStream(obj){return obj instanceof stream.Stream}function isReadable(obj){return isStream(obj)&&typeof obj._read=="function"&&typeof obj._readableState=="object"}function isWritable(obj){return isStream(obj)&&typeof obj._write=="function"&&typeof obj._writableState=="object"}function isDuplex(obj){return isReadable(obj)&&isWritable(obj)}module.exports=isStream;module.exports.isReadable=isReadable;module.exports.isWritable=isWritable;module.exports.isDuplex=isDuplex},{stream:undefined}],405:[function(require,module,exports){(function(){var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(a,b,c){if(a!=null)if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b)}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=v&67108863}return c}function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}var inBrowser=typeof navigator!=="undefined";if(inBrowser&&j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30}else if(inBrowser&&j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array;var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+this.DV;else this.t=0}function nbv(i){var r=nbi();r.fromInt(i);return r}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&255:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue}mi=false;if(sh==0)this[this.t++]=x;else if(sh+k>this.DB){this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this[this.t++]=x>>this.DB-sh}else this[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB}if(k==8&&(s[0]&128)!=0){this.s=-1;if(sh>0)this[this.t-1]|=(1<<this.DB-sh)-1<<sh}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c)--this.t}function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-i*this.DB%k;if(i-- >0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&(1<<p)-1)<<k-p;d|=this[--i]>>(p+=this.DB-k)}else{d=this[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i}}if(d>0)m=true;if(m)r+=int2char(d)}}return m?r:"0"}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return this.s<0?-r:r;while(--i>=0)if((r=this[i]-a[i])!=0)return r;return 0}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16}if((t=x>>8)!=0){x=t;r+=8}if((t=x>>4)!=0){x=t;r+=4}if((t=x>>2)!=0){x=t;r+=2}if((t=x>>1)!=0){x=t;r+=1}return r}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=this[i]>>cbs|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp()}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB}c-=a.s}r.s=c<0?-1:0;if(c<-1)r[i++]=this.DV+c;else if(c>0)r[i++]=c;r.t=i;r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1}}if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r)}else{pm.copyTo(y);pt.copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r)}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd)r.subTo(t,r)}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q)}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r)}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&15)*y)&15;y=y*(2-(x&255)*y)&255;y=y*(2-((x&65535)*y&65535))&65535;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r}function montReduce(x){while(x.t<=this.mt2)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t}}return z.revert(r)}function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z)}return z.intValue().toString(b)+r}function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0)}if(mi)BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this)}}}else{var x=new Array,t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256)}}function bnToByteArray(){var i=this.t,r=new Array;r[0]=this.s;var p=this.DB-i*this.DB%8,d,k=0;if(i-- >0){if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p)r[k++]=d|this.s<<this.DB-p;while(i>=0){if(p<8){d=(this[i]&(1<<p)-1)<<8-p;d|=this[--i]>>(p+=this.DB-8)}else{d=this[i]>>(p-=8)&255;if(p<=0){p+=this.DB;--i}}if((d&128)!=0)d|=-256;if(k==0&&(this.s&128)!=(d&128))++k;if(k>0||d!=this.s)r[k++]=d}}return r}function bnEquals(a){return this.compareTo(a)==0}function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t}else{f=this.s&this.DM;for(i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t}r.s=op(this.s,a.s);r.clamp()}function op_and(x,y){return x&y}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r}function op_or(x,y){return x|y}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r}function op_xor(x,y){return x^y}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r}function op_andnot(x,y){return x&~y}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];r.t=this.t;r.s=~this.s;return r}function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r}function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r}function lbit(x){if(x==0)return-1;var r=0;if((x&65535)==0){x>>=16;r+=16}if((x&255)==0){x>>=8;r+=8}if((x&15)==0){x>>=4;r+=4}if((x&3)==0){x>>=2;r+=2}if((x&1)==0)++r;return r}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+lbit(this[i]);if(this.s<0)return this.t*this.DB;return-1}function cbit(x){var r=0;while(x!=0){x&=x-1;++r}return r}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return this.s!=0;return(this[j]&1<<n%this.DB)!=0}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB}c+=a.s}r.s=c<0?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this.DV+c;r.t=i;r.clamp()}function bnAdd(a){var r=nbi();this.addTo(a,r);return r}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r}function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r}function bnSquare(){var r=nbi();this.squareTo(r);return r}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r)}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t)this[this.t++]=0;++this[w]}}function NullExp(){}function nNop(x){return x}function nMulTo(x,y,r){x.multiplyTo(y,r)}function nSqrTo(x,r){x.squareTo(r)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);r.clamp()}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r)}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r}}function barrettRevert(x){return x}function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r)}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m.isEven())z=new Barrett(m);else z=new Montgomery(m);var g=new Array,n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1)w=e[j]>>i-k1&km;else{w=(e[j]&(1<<i+1)-1)<<k1-i;if(j>0)w|=e[j-1]>>this.DB+i-k1}n=k;while((w&1)==0){w>>=1;--n}if((i-=n)<0){i+=this.DB;--j}if(is1){g[w].copyTo(r);is1=false}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t}z.mulTo(r2,g[w],r)}while(j>=0&&(e[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j}}}return z.revert(r)}function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y)}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x)}else{y.subTo(x,y);y.rShiftTo(1,y)}}if(g>0)y.lShiftTo(g,y);return y}function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r}function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b)}a.rShiftTo(1,a)}else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b)}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d)}c.rShiftTo(1,c)}else if(!d.isEven())d.subTo(m,d);d.rShiftTo(1,d)}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b)}else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d)}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x[0]==lowprimes[i])return true;return false}if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false}return x.millerRabin(t)}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false}if(y.compareTo(n1)!=0)return false}}return true}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;BigInteger.prototype.Barrett=Barrett;var rng_state;var rng_pool;var rng_pptr;function rng_seed_int(x){rng_pool[rng_pptr++]^=x&255;rng_pool[rng_pptr++]^=x>>8&255;rng_pool[rng_pptr++]^=x>>16&255;rng_pool[rng_pptr++]^=x>>24&255;if(rng_pptr>=rng_psize)rng_pptr-=rng_psize}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(rng_pool==null){rng_pool=new Array;rng_pptr=0;var t;if(typeof window!=="undefined"&&window.crypto){if(window.crypto.getRandomValues){var ua=new Uint8Array(32);window.crypto.getRandomValues(ua);for(t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=z.charCodeAt(t)&255}}while(rng_pptr<rng_psize){t=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=t>>>8;rng_pool[rng_pptr++]=t&255}rng_pptr=0;rng_seed_time()}function rng_get_byte(){if(rng_state==null){rng_seed_time();rng_state=prng_newstate();rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(ba){var i;for(i=0;i<ba.length;++i)ba[i]=rng_get_byte()}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;function Arcfour(){this.i=0;this.j=0;this.S=new Array}function ARC4init(key){var i,j,t;for(i=0;i<256;++i)this.S[i]=i;j=0;for(i=0;i<256;++i){j=j+this.S[i]+key[i%key.length]&255;t=this.S[i];this.S[i]=this.S[j];this.S[j]=t}this.i=0;this.j=0}function ARC4next(){var t;this.i=this.i+1&255;this.j=this.j+this.S[this.i]&255;t=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=t;return this.S[t+this.S[this.i]&255]}Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour}var rng_psize=256;BigInteger.SecureRandom=SecureRandom;BigInteger.BigInteger=BigInteger;if(typeof exports!=="undefined"){exports=module.exports=BigInteger}else{this.BigInteger=BigInteger;this.SecureRandom=SecureRandom}}).call(this)},{}],406:[function(require,module,exports){"use strict";var INDENT="    ";function inlineRule(objRule){var str="";Object.keys(objRule).forEach(function(rule){str+=rule+":"+objRule[rule]+";"});return str}function Stylize(styleFile){function styleClass(cssClass){return'class="'+cssClass+'"'}function styleInline(cssClass){return'style="'+inlineRule(styleFile["."+cssClass])+'"'}if(!styleFile)return styleClass;return styleInline}function type(doc){if(doc===null)return"null";if(Array.isArray(doc))return"array";if(typeof doc==="string"&&/^https?:/.test(doc))return"link";if(typeof doc==="object"&&typeof doc.toISOString==="function")return"date";return typeof doc}function escape(str){return str.replace(/</g,"&lt;").replace(/>/g,"&gt;")}module.exports=function(doc,styleFile){var indent="";var style=Stylize(styleFile);var forEach=function(list,start,end,fn){if(!list.length)return start+" "+end;var out=start+"\n";indent+=INDENT;list.forEach(function(key,i){out+=indent+fn(key)+(i<list.length-1?",":"")+"\n"});indent=indent.slice(0,-INDENT.length);return out+indent+end};function visit(obj){if(obj===undefined)return"";switch(type(obj)){case"boolean":return"<span "+style("json-markup-bool")+">"+obj+"</span>";case"number":return"<span "+style("json-markup-number")+">"+obj+"</span>";case"date":return'<span class="json-markup-string">"'+escape(obj.toISOString())+'"</span>';case"null":return"<span "+style("json-markup-null")+">null</span>";case"string":return"<span "+style("json-markup-string")+'>"'+escape(obj.replace(/\n/g,"\n"+indent))+'"</span>';case"link":return"<span "+style("json-markup-string")+'>"<a href="'+escape(obj)+'">'+escape(obj)+'</a>"</span>';case"array":return forEach(obj,"[","]",visit);case"object":var keys=Object.keys(obj).filter(function(key){return obj[key]!==undefined});return forEach(keys,"{","}",function(key){return"<span "+style("json-markup-key")+">"+key+":</span> "+visit(obj[key])})}return""}return"<div "+style("json-markup")+">"+visit(doc)+"</div>"}},{}],407:[function(require,module,exports){"use strict";var traverse=module.exports=function(schema,opts,cb){if(typeof opts=="function"){cb=opts;opts={}}_traverse(opts,cb,schema,"",schema)};traverse.keywords={additionalItems:true,items:true,contains:true,additionalProperties:true,propertyNames:true,not:true};traverse.arrayKeywords={items:true,allOf:true,anyOf:true,oneOf:true};traverse.propsKeywords={definitions:true,properties:true,patternProperties:true,dependencies:true};traverse.skipKeywords={enum:true,const:true,required:true,maximum:true,minimum:true,exclusiveMaximum:true,exclusiveMinimum:true,multipleOf:true,maxLength:true,minLength:true,pattern:true,format:true,maxItems:true,minItems:true,uniqueItems:true,maxProperties:true,minProperties:true};function _traverse(opts,cb,schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex){if(schema&&typeof schema=="object"&&!Array.isArray(schema)){cb(schema,jsonPtr,rootSchema,parentJsonPtr,parentKeyword,parentSchema,keyIndex);for(var key in schema){var sch=schema[key];if(Array.isArray(sch)){if(key in traverse.arrayKeywords){for(var i=0;i<sch.length;i++)_traverse(opts,cb,sch[i],jsonPtr+"/"+key+"/"+i,rootSchema,jsonPtr,key,schema,i)}}else if(key in traverse.propsKeywords){if(sch&&typeof sch=="object"){for(var prop in sch)_traverse(opts,cb,sch[prop],jsonPtr+"/"+key+"/"+escapeJsonPtr(prop),rootSchema,jsonPtr,key,schema,prop)}}else if(key in traverse.keywords||opts.allKeys&&!(key in traverse.skipKeywords)){_traverse(opts,cb,sch,jsonPtr+"/"+key,rootSchema,jsonPtr,key,schema)}}}}function escapeJsonPtr(str){return str.replace(/~/g,"~0").replace(/\//g,"~1")}},{}],408:[function(require,module,exports){(function(root,factory){if(typeof define==="function"&&define.amd){define([],function(){return factory()})}else if(typeof module==="object"&&module.exports){module.exports=factory()}else{root.jsonSchema=factory()}})(this,function(){var exports=validate;exports.Integer={type:"integer"};var primitiveConstructors={String:String,Boolean:Boolean,Number:Number,Object:Object,Array:Array,Date:Date};exports.validate=validate;function validate(instance,schema){return validate(instance,schema,{changing:false})}exports.checkPropertyChange=function(value,schema,property){return validate(value,schema,{changing:property||"property"})};var validate=exports._validate=function(instance,schema,options){if(!options)options={};var _changing=options.changing;function getType(schema){return schema.type||primitiveConstructors[schema.name]==schema&&schema.name.toLowerCase()}var errors=[];function checkProp(value,schema,path,i){var l;path+=path?typeof i=="number"?"["+i+"]":typeof i=="undefined"?"":"."+i:i;function addError(message){errors.push({property:path,message:message})}if((typeof schema!="object"||schema instanceof Array)&&(path||typeof schema!="function")&&!(schema&&getType(schema))){if(typeof schema=="function"){if(!(value instanceof schema)){addError("is not an instance of the class/constructor "+schema.name)}}else if(schema){addError("Invalid schema/property definition "+schema)}return null}if(_changing&&schema.readonly){addError("is a readonly field, it can not be changed")}if(schema["extends"]){checkProp(value,schema["extends"],path,i)}function checkType(type,value){if(type){if(typeof type=="string"&&type!="any"&&(type=="null"?value!==null:typeof value!=type)&&!(value instanceof Array&&type=="array")&&!(value instanceof Date&&type=="date")&&!(type=="integer"&&value%1===0)){return[{property:path,message:typeof value+" value found, but a "+type+" is required"}]}if(type instanceof Array){var unionErrors=[];for(var j=0;j<type.length;j++){if(!(unionErrors=checkType(type[j],value)).length){break}}if(unionErrors.length){return unionErrors}}else if(typeof type=="object"){var priorErrors=errors;errors=[];checkProp(value,type,path);var theseErrors=errors;errors=priorErrors;return theseErrors}}return[]}if(value===undefined){if(schema.required){addError("is missing and it is required")}}else{errors=errors.concat(checkType(getType(schema),value));if(schema.disallow&&!checkType(schema.disallow,value).length){addError(" disallowed value was matched")}if(value!==null){if(value instanceof Array){if(schema.items){var itemsIsArray=schema.items instanceof Array;var propDef=schema.items;for(i=0,l=value.length;i<l;i+=1){if(itemsIsArray)propDef=schema.items[i];if(options.coerce)value[i]=options.coerce(value[i],propDef);errors.concat(checkProp(value[i],propDef,path,i))}}if(schema.minItems&&value.length<schema.minItems){addError("There must be a minimum of "+schema.minItems+" in the array")}if(schema.maxItems&&value.length>schema.maxItems){addError("There must be a maximum of "+schema.maxItems+" in the array")}}else if(schema.properties||schema.additionalProperties){errors.concat(checkObj(value,schema.properties,path,schema.additionalProperties))}if(schema.pattern&&typeof value=="string"&&!value.match(schema.pattern)){addError("does not match the regex pattern "+schema.pattern)}if(schema.maxLength&&typeof value=="string"&&value.length>schema.maxLength){addError("may only be "+schema.maxLength+" characters long")}if(schema.minLength&&typeof value=="string"&&value.length<schema.minLength){addError("must be at least "+schema.minLength+" characters long")}if(typeof schema.minimum!==undefined&&typeof value==typeof schema.minimum&&schema.minimum>value){addError("must have a minimum value of "+schema.minimum)}if(typeof schema.maximum!==undefined&&typeof value==typeof schema.maximum&&schema.maximum<value){addError("must have a maximum value of "+schema.maximum)}if(schema["enum"]){var enumer=schema["enum"];l=enumer.length;var found;for(var j=0;j<l;j++){if(enumer[j]===value){found=1;break}}if(!found){addError("does not have a value in the enumeration "+enumer.join(", "))}}if(typeof schema.maxDecimal=="number"&&value.toString().match(new RegExp("\\.[0-9]{"+(schema.maxDecimal+1)+",}"))){addError("may only have "+schema.maxDecimal+" digits of decimal places")}}}return null}function checkObj(instance,objTypeDef,path,additionalProp){if(typeof objTypeDef=="object"){if(typeof instance!="object"||instance instanceof Array){errors.push({property:path,message:"an object is required"})}for(var i in objTypeDef){if(objTypeDef.hasOwnProperty(i)){var value=instance[i];if(value===undefined&&options.existingOnly)continue;var propDef=objTypeDef[i];if(value===undefined&&propDef["default"]){value=instance[i]=propDef["default"]}if(options.coerce&&i in instance){value=instance[i]=options.coerce(value,propDef)}checkProp(value,propDef,path,i)}}}for(i in instance){if(instance.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&objTypeDef&&!objTypeDef[i]&&additionalProp===false){if(options.filter){delete instance[i];continue}else{errors.push({property:path,message:typeof value+"The property "+i+" is not defined in the schema and the schema does not allow additional properties"})}}var requires=objTypeDef&&objTypeDef[i]&&objTypeDef[i].requires;if(requires&&!(requires in instance)){errors.push({property:path,message:"the presence of the property "+i+" requires that "+requires+" also be present"})}value=instance[i];if(additionalProp&&(!(objTypeDef&&typeof objTypeDef=="object")||!(i in objTypeDef))){if(options.coerce){value=instance[i]=options.coerce(value,additionalProp)}checkProp(value,additionalProp,path,i)}if(!_changing&&value&&value.$schema){errors=errors.concat(checkProp(value,value.$schema,path,i))}}return errors}if(schema){checkProp(instance,schema,"",_changing||"")}if(!_changing&&instance&&instance.$schema){checkProp(instance,instance.$schema,"","")}return{valid:!errors.length,errors:errors}};exports.mustBeValid=function(result){if(!result.valid){throw new TypeError(result.errors.map(function(error){return"for property "+error.property+": "+error.message}).join(", \n"))}};return exports})},{}],409:[function(require,module,exports){exports=module.exports=stringify;exports.getSerialize=serializer;function stringify(obj,replacer,spaces,cycleReplacer){return JSON.stringify(obj,serializer(replacer,cycleReplacer),spaces)}function serializer(replacer,cycleReplacer){var stack=[],keys=[];if(cycleReplacer==null)cycleReplacer=function(key,value){if(stack[0]===value)return"[Circular ~]";return"[Circular ~."+keys.slice(0,stack.indexOf(value)).join(".")+"]"};return function(key,value){if(stack.length>0){var thisPos=stack.indexOf(this);~thisPos?stack.splice(thisPos+1):stack.push(this);~thisPos?keys.splice(thisPos,Infinity,key):keys.push(key);if(~stack.indexOf(value))value=cycleReplacer.call(this,key,value)}else stack.push(value);return replacer==null?value:replacer.call(this,key,value)}}},{}],410:[function(require,module,exports){var mod_assert=require("assert-plus");var mod_util=require("util");var mod_extsprintf=require("extsprintf");var mod_verror=require("verror");var mod_jsonschema=require("json-schema");exports.deepCopy=deepCopy;exports.deepEqual=deepEqual;exports.isEmpty=isEmpty;exports.hasKey=hasKey;exports.forEachKey=forEachKey;exports.pluck=pluck;exports.flattenObject=flattenObject;exports.flattenIter=flattenIter;exports.validateJsonObject=validateJsonObjectJS;exports.validateJsonObjectJS=validateJsonObjectJS;exports.randElt=randElt;exports.extraProperties=extraProperties;exports.mergeObjects=mergeObjects;exports.startsWith=startsWith;exports.endsWith=endsWith;exports.parseInteger=parseInteger;exports.iso8601=iso8601;exports.rfc1123=rfc1123;exports.parseDateTime=parseDateTime;exports.hrtimediff=hrtimeDiff;exports.hrtimeDiff=hrtimeDiff;exports.hrtimeAccum=hrtimeAccum;exports.hrtimeAdd=hrtimeAdd;exports.hrtimeNanosec=hrtimeNanosec;exports.hrtimeMicrosec=hrtimeMicrosec;exports.hrtimeMillisec=hrtimeMillisec;function deepCopy(obj){var ret,key;var marker="__deepCopy";if(obj&&obj[marker])throw new Error("attempted deep copy of cyclic object");if(obj&&obj.constructor==Object){ret={};obj[marker]=true;for(key in obj){if(key==marker)continue;ret[key]=deepCopy(obj[key])}delete obj[marker];return ret}if(obj&&obj.constructor==Array){ret=[];obj[marker]=true;for(key=0;key<obj.length;key++)ret.push(deepCopy(obj[key]));delete obj[marker];return ret}return obj}function deepEqual(obj1,obj2){if(typeof obj1!=typeof obj2)return false;if(obj1===null||obj2===null||typeof obj1!="object")return obj1===obj2;if(obj1.constructor!=obj2.constructor)return false;var k;for(k in obj1){if(!obj2.hasOwnProperty(k))return false;if(!deepEqual(obj1[k],obj2[k]))return false}for(k in obj2){if(!obj1.hasOwnProperty(k))return false}return true}function isEmpty(obj){var key;for(key in obj)return false;return true}function hasKey(obj,key){mod_assert.equal(typeof key,"string");return Object.prototype.hasOwnProperty.call(obj,key)}function forEachKey(obj,callback){for(var key in obj){if(hasKey(obj,key)){callback(key,obj[key])}}}function pluck(obj,key){mod_assert.equal(typeof key,"string");return pluckv(obj,key)}function pluckv(obj,key){if(obj===null||typeof obj!=="object")return undefined;if(obj.hasOwnProperty(key))return obj[key];var i=key.indexOf(".");if(i==-1)return undefined;var key1=key.substr(0,i);if(!obj.hasOwnProperty(key1))return undefined;return pluckv(obj[key1],key.substr(i+1))}function flattenIter(data,depth,callback){doFlattenIter(data,depth,[],callback)}function doFlattenIter(data,depth,accum,callback){var each;var key;if(depth===0){each=accum.slice(0);each.push(data);callback(each);return}mod_assert.ok(data!==null);mod_assert.equal(typeof data,"object");mod_assert.equal(typeof depth,"number");mod_assert.ok(depth>=0);for(key in data){each=accum.slice(0);each.push(key);doFlattenIter(data[key],depth-1,each,callback)}}function flattenObject(data,depth){if(depth===0)return[data];mod_assert.ok(data!==null);mod_assert.equal(typeof data,"object");mod_assert.equal(typeof depth,"number");mod_assert.ok(depth>=0);var rv=[];var key;for(key in data){flattenObject(data[key],depth-1).forEach(function(p){rv.push([key].concat(p))})}return rv}function startsWith(str,prefix){return str.substr(0,prefix.length)==prefix}function endsWith(str,suffix){return str.substr(str.length-suffix.length,suffix.length)==suffix}function iso8601(d){if(typeof d=="number")d=new Date(d);mod_assert.ok(d.constructor===Date);return mod_extsprintf.sprintf("%4d-%02d-%02dT%02d:%02d:%02d.%03dZ",d.getUTCFullYear(),d.getUTCMonth()+1,d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())}var RFC1123_MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var RFC1123_DAYS=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function rfc1123(date){return mod_extsprintf.sprintf("%s, %02d %s %04d %02d:%02d:%02d GMT",RFC1123_DAYS[date.getUTCDay()],date.getUTCDate(),RFC1123_MONTHS[date.getUTCMonth()],date.getUTCFullYear(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds())}function parseDateTime(str){var numeric=+str;if(!isNaN(numeric)){return new Date(numeric)}else{return new Date(str)}}var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER||-9007199254740991;var PI_DEFAULTS={base:10,allowSign:true,allowPrefix:false,allowTrailing:false,allowImprecise:false,trimWhitespace:false,leadingZeroIsOctal:false};var CP_0=48;var CP_9=57;var CP_A=65;var CP_B=66;var CP_O=79;var CP_T=84;var CP_X=88;var CP_Z=90;var CP_a=97;var CP_b=98;var CP_o=111;var CP_t=116;var CP_x=120;var CP_z=122;var PI_CONV_DEC=48;var PI_CONV_UC=55;var PI_CONV_LC=87;function parseInteger(str,uopts){mod_assert.string(str,"str");mod_assert.optionalObject(uopts,"options");var baseOverride=false;var options=PI_DEFAULTS;if(uopts){baseOverride=hasKey(uopts,"base");options=mergeObjects(options,uopts);mod_assert.number(options.base,"options.base");mod_assert.ok(options.base>=2,"options.base >= 2");mod_assert.ok(options.base<=36,"options.base <= 36");mod_assert.bool(options.allowSign,"options.allowSign");mod_assert.bool(options.allowPrefix,"options.allowPrefix");mod_assert.bool(options.allowTrailing,"options.allowTrailing");mod_assert.bool(options.allowImprecise,"options.allowImprecise");mod_assert.bool(options.trimWhitespace,"options.trimWhitespace");mod_assert.bool(options.leadingZeroIsOctal,"options.leadingZeroIsOctal");if(options.leadingZeroIsOctal){mod_assert.ok(!baseOverride,'"base" and "leadingZeroIsOctal" are '+"mutually exclusive")}}var c;var pbase=-1;var base=options.base;var start;var mult=1;var value=0;var idx=0;var len=str.length;if(options.trimWhitespace){while(idx<len&&isSpace(str.charCodeAt(idx))){++idx}}if(options.allowSign){if(str[idx]==="-"){idx+=1;mult=-1}else if(str[idx]==="+"){idx+=1}}if(str[idx]==="0"){if(options.allowPrefix){pbase=prefixToBase(str.charCodeAt(idx+1));if(pbase!==-1&&(!baseOverride||pbase===base)){base=pbase;idx+=2}}if(pbase===-1&&options.leadingZeroIsOctal){base=8}}for(start=idx;idx<len;++idx){c=translateDigit(str.charCodeAt(idx));if(c!==-1&&c<base){value*=base;value+=c}else{break}}if(start===idx){return new Error("invalid number: "+JSON.stringify(str))}if(options.trimWhitespace){while(idx<len&&isSpace(str.charCodeAt(idx))){++idx}}if(idx<len&&!options.allowTrailing){return new Error("trailing characters after number: "+JSON.stringify(str.slice(idx)))}if(value===0){return 0}var result=value*mult;if(!options.allowImprecise&&(value>MAX_SAFE_INTEGER||result<MIN_SAFE_INTEGER)){return new Error("number is outside of the supported range: "+JSON.stringify(str.slice(start,idx)))}return result}function translateDigit(d){if(d>=CP_0&&d<=CP_9){return d-PI_CONV_DEC}else if(d>=CP_A&&d<=CP_Z){return d-PI_CONV_UC}else if(d>=CP_a&&d<=CP_z){return d-PI_CONV_LC}else{return-1}}function isSpace(c){return c===32||c>=9&&c<=13||c===160||c===5760||c===6158||c>=8192&&c<=8202||c===8232||c===8233||c===8239||c===8287||c===12288||c===65279}function prefixToBase(c){if(c===CP_b||c===CP_B){return 2}else if(c===CP_o||c===CP_O){return 8}else if(c===CP_t||c===CP_T){return 10}else if(c===CP_x||c===CP_X){return 16}else{return-1}}function validateJsonObjectJS(schema,input){var report=mod_jsonschema.validate(input,schema);if(report.errors.length===0)return null;var error=report.errors[0];var propname=error["property"];var reason=error["message"].toLowerCase();var i,j;if((i=reason.indexOf("the property "))!=-1&&(j=reason.indexOf(" is not defined in the schema and the "+"schema does not allow additional properties"))!=-1){i+="the property ".length;if(propname==="")propname=reason.substr(i,j-i);else propname=propname+"."+reason.substr(i,j-i);reason="unsupported property"}var rv=new mod_verror.VError('property "%s": %s',propname,reason);rv.jsv_details=error;return rv}function randElt(arr){mod_assert.ok(Array.isArray(arr)&&arr.length>0,"randElt argument must be a non-empty array");return arr[Math.floor(Math.random()*arr.length)]}function assertHrtime(a){mod_assert.ok(a[0]>=0&&a[1]>=0,"negative numbers not allowed in hrtimes");mod_assert.ok(a[1]<1e9,"nanoseconds column overflow")}function hrtimeDiff(a,b){assertHrtime(a);assertHrtime(b);mod_assert.ok(a[0]>b[0]||a[0]==b[0]&&a[1]>=b[1],"negative differences not allowed");var rv=[a[0]-b[0],0];if(a[1]>=b[1]){rv[1]=a[1]-b[1]}else{rv[0]--;rv[1]=1e9-(b[1]-a[1])}return rv}function hrtimeNanosec(a){assertHrtime(a);return Math.floor(a[0]*1e9+a[1])}function hrtimeMicrosec(a){assertHrtime(a);return Math.floor(a[0]*1e6+a[1]/1e3)}function hrtimeMillisec(a){assertHrtime(a);return Math.floor(a[0]*1e3+a[1]/1e6)}function hrtimeAccum(a,b){assertHrtime(a);assertHrtime(b);a[1]+=b[1];if(a[1]>=1e9){a[0]++;a[1]-=1e9}a[0]+=b[0];return a}function hrtimeAdd(a,b){assertHrtime(a);var rv=[a[0],a[1]];return hrtimeAccum(rv,b)}function extraProperties(obj,allowed){mod_assert.ok(typeof obj==="object"&&obj!==null,"obj argument must be a non-null object");mod_assert.ok(Array.isArray(allowed),"allowed argument must be an array of strings");for(var i=0;i<allowed.length;i++){mod_assert.ok(typeof allowed[i]==="string","allowed argument must be an array of strings")}return Object.keys(obj).filter(function(key){return allowed.indexOf(key)===-1})}function mergeObjects(provided,overrides,defaults){var rv,k;rv={};if(defaults){for(k in defaults)rv[k]=defaults[k]}if(provided){for(k in provided)rv[k]=provided[k]}if(overrides){for(k in overrides)rv[k]=overrides[k]}return rv}},{"assert-plus":185,extsprintf:300,"json-schema":408,util:undefined,verror:572}],411:[function(require,module,exports){var root=require("./_root");var Symbol=root.Symbol;module.exports=Symbol},{"./_root":416}],412:[function(require,module,exports){var Symbol=require("./_Symbol"),getRawTag=require("./_getRawTag"),objectToString=require("./_objectToString");var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},{"./_Symbol":411,"./_getRawTag":414,"./_objectToString":415}],413:[function(require,module,exports){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal},{}],414:[function(require,module,exports){var Symbol=require("./_Symbol");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},{"./_Symbol":411}],415:[function(require,module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},{}],416:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},{"./_freeGlobal":413}],417:[function(require,module,exports){var isArray=Array.isArray;module.exports=isArray},{}],418:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObject=require("./isObject");var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},{"./_baseGetTag":412,"./isObject":419}],419:[function(require,module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},{}],420:[function(require,module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},{}],421:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isArray=require("./isArray"),isObjectLike=require("./isObjectLike");var stringTag="[object String]";function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}module.exports=isString},{"./_baseGetTag":412,"./isArray":417,"./isObjectLike":420}],422:[function(require,module,exports){function isUndefined(value){return value===undefined}module.exports=isUndefined},{}],423:[function(require,module,exports){(function(){var undefined;var VERSION="4.17.4";var LARGE_ARRAY_SIZE=200;var CORE_ERROR_TEXT="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",FUNC_ERROR_TEXT="Expected a function";var HASH_UNDEFINED="__lodash_hash_undefined__";var MAX_MEMOIZE_SIZE=500;var PLACEHOLDER="__lodash_placeholder__";var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;var WRAP_BIND_FLAG=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=800,HOT_SPAN=16;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2,LAZY_WHILE_FLAG=3;var INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER=1.7976931348623157e308,NAN=0/0;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];var argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",domExcTag="[object DOMException]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",promiseTag="[object Promise]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]",weakSetTag="[object WeakSet]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reUnescapedHtml=/[&<>"']/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);var reTrim=/^\s+|\s+$/g,reTrimStart=/^\s+/,reTrimEnd=/\s+$/;var reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsOctal=/^0o[0-7]+$/i;var reIsUint=/^(?:0|[1-9]\d*)$/;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange;var rsApos="[']",rsAstral="["+rsAstralRange+"]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d";var rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",rsOrdUpper="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")";var reApos=RegExp(rsApos,"g");var reComboMark=RegExp(rsCombo,"g");var reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");var reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");var reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var contextProps=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;var deburredLetters={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeParseFloat=parseFloat,freeParseInt=parseInt;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsArrayBuffer=nodeUtil&&nodeUtil.isArrayBuffer,nodeIsDate=nodeUtil&&nodeUtil.isDate,nodeIsMap=nodeUtil&&nodeUtil.isMap,nodeIsRegExp=nodeUtil&&nodeUtil.isRegExp,nodeIsSet=nodeUtil&&nodeUtil.isSet,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function addMapEntry(map,pair){map.set(pair[0],pair[1]);return map}function addSetEntry(set,value){set.add(value);return set}function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function arrayAggregator(array,setter,iteratee,accumulator){var index=-1,length=array==null?0:array.length;while(++index<length){var value=array[index];setter(accumulator,value,iteratee(value),array)}return accumulator}function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array==null?0:array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function arrayIncludes(array,value){var length=array==null?0:array.length;return!!length&&baseIndexOf(array,value,0)>-1}function arrayIncludesWith(array,value,comparator){var index=-1,length=array==null?0:array.length;while(++index<length){if(comparator(value,array[index])){return true}}return false}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array==null?0:array.length;if(initAccum&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initAccum){var length=array==null?0:array.length;if(initAccum&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}var asciiSize=baseProperty("length");function asciiToArray(string){return string.split("")}function asciiWords(string){return string.match(reAsciiWord)||[]}function baseFindKey(collection,predicate,eachFunc){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=key;return false}});return result}function baseFindIndex(array,predicate,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?1:-1);while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){return value===value?strictIndexOf(array,value,fromIndex):baseFindIndex(array,baseIsNaN,fromIndex)}function baseIndexOfWith(array,value,fromIndex,comparator){var index=fromIndex-1,length=array.length;while(++index<length){if(comparator(array[index],value)){return index}}return-1}function baseIsNaN(value){return value!==value}function baseMean(array,iteratee){var length=array==null?0:array.length;return length?baseSum(array,iteratee)/length:NAN}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyOf(object){return function(key){return object==null?undefined:object[key]}}function baseReduce(collection,iteratee,accumulator,initAccum,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initAccum?(initAccum=false,value):iteratee(accumulator,value,index,collection)});return accumulator}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSum(array,iteratee){var result,index=-1,length=array.length;while(++index<length){var current=iteratee(array[index]);if(current!==undefined){result=result===undefined?current:result+current}}return result}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function baseUnary(func){return function(value){return func(value)}}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function cacheHas(cache,key){return cache.has(key)}function charsStartIndex(strSymbols,chrSymbols){var index=-1,length=strSymbols.length;while(++index<length&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index}function charsEndIndex(strSymbols,chrSymbols){var index=strSymbols.length;while(index--&&baseIndexOf(chrSymbols,strSymbols[index],0)>-1){}return index}function countHolders(array,placeholder){var length=array.length,result=0;while(length--){if(array[length]===placeholder){++result}}return result}var deburrLetter=basePropertyOf(deburredLetters);var escapeHtmlChar=basePropertyOf(htmlEscapes);function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function getValue(object,key){return object==null?undefined:object[key]}function hasUnicode(string){return reHasUnicode.test(string)}function hasUnicodeWord(string){return reHasUnicodeWord.test(string)}function iteratorToArray(iterator){var data,result=[];while(!(data=iterator.next()).done){result.push(data.value)}return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value===placeholder||value===PLACEHOLDER){array[index]=PLACEHOLDER;result[resIndex++]=index}}return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}function setToPairs(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=[value,value]});return result}function strictIndexOf(array,value,fromIndex){var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function strictLastIndexOf(array,value,fromIndex){var index=fromIndex+1;while(index--){if(array[index]===value){return index}}return index}function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}function stringToArray(string){return hasUnicode(string)?unicodeToArray(string):asciiToArray(string)}var unescapeHtmlChar=basePropertyOf(htmlUnescapes);function unicodeSize(string){var result=reUnicode.lastIndex=0;while(reUnicode.test(string)){++result}return result}function unicodeToArray(string){return string.match(reUnicode)||[]}function unicodeWords(string){return string.match(reUnicodeWord)||[]}var runInContext=function runInContext(context){context=context==null?root:_.defaults(root.Object(),context,_.pick(root,contextProps));var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=context["__core-js_shared__"];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var oldDash=root._;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?context.Buffer:undefined,Symbol=context.Symbol,Uint8Array=context.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined,symIterator=Symbol?Symbol.iterator:undefined,symToStringTag=Symbol?Symbol.toStringTag:undefined;var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var ctxClearTimeout=context.clearTimeout!==root.clearTimeout&&context.clearTimeout,ctxNow=Date&&Date.now!==root.Date.now&&Date.now,ctxSetTimeout=context.setTimeout!==root.setTimeout&&context.setTimeout;var nativeCeil=Math.ceil,nativeFloor=Math.floor,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeIsFinite=context.isFinite,nativeJoin=arrayProto.join,nativeKeys=overArg(Object.keys,Object),nativeMax=Math.max,nativeMin=Math.min,nativeNow=Date.now,nativeParseInt=context.parseInt,nativeRandom=Math.random,nativeReverse=arrayProto.reverse;var DataView=getNative(context,"DataView"),Map=getNative(context,"Map"),Promise=getNative(context,"Promise"),Set=getNative(context,"Set"),WeakMap=getNative(context,"WeakMap"),nativeCreate=getNative(Object,"create");var metaMap=WeakMap&&new WeakMap;var realNames={};var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();function baseLodash(){}function LodashWrapper(value,chainAll){this.__wrapped__=value;this.__actions__=[];this.__chain__=!!chainAll;this.__index__=0;this.__values__=undefined}lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};lodash.prototype=baseLodash.prototype;lodash.prototype.constructor=lodash;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=MAX_ARRAY_LENGTH;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=copyArray(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=copyArray(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=copyArray(this.__views__);return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||!isRight&&arrLength==length&&takeCount==length){return baseWrapperValue(array,this.__actions__)}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}result[resIndex++]=value}return result}LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED);return this}function setCacheHas(value){return this.__data__.has(value)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function arraySample(array){var length=array.length;return length?array[baseRandom(0,length-1)]:undefined}function arraySampleSize(array,n){return shuffleSelf(copyArray(array),baseClamp(n,0,array.length))}function arrayShuffle(array){return shuffleSelf(copyArray(array))}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseAggregator(collection,setter,iteratee,accumulator){baseEach(collection,function(value,key,collection){setter(accumulator,value,iteratee(value),collection)});return accumulator}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}function baseAt(object,paths){var index=-1,length=paths.length,result=Array(length),skip=object==null;while(++index<length){result[index]=skip?undefined:get(object,paths[index])}return result}function baseClamp(number,lower,upper){if(number===number){if(upper!==undefined){number=number<=upper?number:upper}if(lower!==undefined){number=number>=lower?number:lower}}return number}function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}function baseConforms(source){var props=keys(source);return function(object){return baseConformsTo(object,source,props)}}function baseConformsTo(object,source,props){var length=props.length;if(object==null){return!length}object=Object(object);while(length--){var key=props[length],predicate=source[key],value=object[key];if(value===undefined&&!(key in object)||!predicate(value)){return false}}return true}function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=true,length=array.length,result=[],valuesLength=values.length;if(!length){return result}if(iteratee){values=arrayMap(values,baseUnary(iteratee))}if(comparator){includes=arrayIncludesWith;isCommon=false}else if(values.length>=LARGE_ARRAY_SIZE){includes=cacheHas;isCommon=false;values=new SetCache(values)}outer:while(++index<length){var value=array[index],computed=iteratee==null?value:iteratee(value);value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===computed){continue outer}}result.push(value)}else if(!includes(values,computed,comparator)){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseExtremum(array,iteratee,comparator){var index=-1,length=array.length;while(++index<length){var value=array[index],current=iteratee(value);if(current!=null&&(computed===undefined?current===current&&!isSymbol(current):comparator(current,computed))){var computed=current,result=value}}return result}function baseFill(array,value,start,end){var length=array.length;start=toInteger(start);if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:toInteger(end);if(end<0){end+=length}end=start>end?0:toLength(end);while(start<end){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return object&&baseForRight(object,iteratee,keys)}function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseGt(value,other){return value>other}function baseHas(object,key){return object!=null&&hasOwnProperty.call(object,key)}function baseHasIn(object,key){return object!=null&&key in Object(object)}function baseInRange(number,start,end){return number>=nativeMin(start,end)&&number<nativeMax(start,end)}function baseIntersection(arrays,iteratee,comparator){var includes=comparator?arrayIncludesWith:arrayIncludes,length=arrays[0].length,othLength=arrays.length,othIndex=othLength,caches=Array(othLength),maxLength=Infinity,result=[];while(othIndex--){var array=arrays[othIndex];if(othIndex&&iteratee){array=arrayMap(array,baseUnary(iteratee))}maxLength=nativeMin(array.length,maxLength);caches[othIndex]=!comparator&&(iteratee||length>=120&&array.length>=120)?new SetCache(othIndex&&array):undefined}array=arrays[0];var index=-1,seen=caches[0];outer:while(++index<length&&result.length<maxLength){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(!(seen?cacheHas(seen,computed):includes(result,computed,comparator))){othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if(!(cache?cacheHas(cache,computed):includes(arrays[othIndex],computed,comparator))){continue outer}}if(seen){seen.push(computed)}result.push(value)}}return result}function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)});return accumulator}function baseInvoke(object,path,args){path=castPath(path,object);object=parent(object,path);var func=object==null?object:object[toKey(last(path))];return func==null?undefined:apply(func,object,args)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsArrayBuffer(value){return isObjectLike(value)&&baseGetTag(value)==arrayBufferTag}function baseIsDate(value){return isObjectLike(value)&&baseGetTag(value)==dateTag}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag:getTag(object),othTag=othIsArr?arrayTag:getTag(other);objTag=objTag==argsTag?objectTag:objTag;othTag=othTag==argsTag?objectTag:othTag;var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG,customizer,stack):result)){return false}}}return true}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsRegExp(value){return isObjectLike(value)&&baseGetTag(value)==regexpTag}function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(typeof value=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}function baseLt(value,other){return value<other}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return}baseFor(source,function(srcValue,key){if(isObject(srcValue)){stack||(stack=new Stack);baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):undefined;if(newValue===undefined){newValue=srcValue}assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue)}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true)}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true)}else{newValue=[]}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue)}else if(!isObject(objValue)||srcIndex&&isFunction(objValue)){newValue=initCloneObject(srcValue)}}else{isCommon=false}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,key,newValue)}function baseNth(array,n){var length=array.length;if(!length){return}n+=n<0?length:0;return isIndex(n,length)?array[n]:undefined}function baseOrderBy(collection,iteratees,orders){var index=-1;iteratees=arrayMap(iteratees.length?iteratees:[identity],baseUnary(getIteratee()));var result=baseMap(collection,function(value,key,collection){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function basePick(object,paths){return basePickBy(object,paths,function(value,path){return hasIn(object,path)})}function basePickBy(object,paths,predicate){var index=-1,length=paths.length,result={};while(++index<length){var path=paths[index],value=baseGet(object,path);if(predicate(value,path)){baseSet(result,castPath(path,object),value)}}return result}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function basePullAll(array,values,iteratee,comparator){var indexOf=comparator?baseIndexOfWith:baseIndexOf,index=-1,length=values.length,seen=array;if(array===values){values=copyArray(values)}if(iteratee){seen=arrayMap(array,baseUnary(iteratee))}while(++index<length){var fromIndex=0,value=values[index],computed=iteratee?iteratee(value):value;while((fromIndex=indexOf(seen,computed,fromIndex,comparator))>-1){if(seen!==array){splice.call(seen,fromIndex,1)}splice.call(array,fromIndex,1)}}return array}function basePullAt(array,indexes){var length=array?indexes.length:0,lastIndex=length-1;while(length--){var index=indexes[length];if(length==lastIndex||index!==previous){var previous=index;if(isIndex(index)){splice.call(array,index,1)}else{baseUnset(array,index)}}}return array}function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}function baseRange(start,end,step,fromRight){var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(length--){result[fromRight?length:++index]=start;start+=step}return result}function baseRepeat(string,n){var result="";if(!string||n<1||n>MAX_SAFE_INTEGER){return result}do{if(n%2){result+=string}n=nativeFloor(n/2);if(n){string+=string}}while(n);return result}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}function baseSample(collection){return arraySample(values(collection))}function baseSampleSize(collection,n){var array=values(collection);return shuffleSelf(array,baseClamp(n,0,array.length))}function baseSet(object,path,value,customizer){if(!isObject(object)){return object}path=castPath(path,object);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=toKey(path[index]),newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):undefined;if(newValue===undefined){newValue=isObject(objValue)?objValue:isIndex(path[index+1])?[]:{}}}assignValue(nested,key,newValue);nested=nested[key]}return object}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};function baseShuffle(collection){return shuffleSelf(values(collection))}function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortedIndex(array,value,retHighest){var low=0,high=array==null?low:array.length;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(computed!==null&&!isSymbol(computed)&&(retHighest?computed<=value:computed<value)){low=mid+1}else{high=mid}}return high}return baseSortedIndexBy(array,value,identity,retHighest)}function baseSortedIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array==null?0:array.length,valIsNaN=value!==value,valIsNull=value===null,valIsSymbol=isSymbol(value),valIsUndefined=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),othIsDefined=computed!==undefined,othIsNull=computed===null,othIsReflexive=computed===computed,othIsSymbol=isSymbol(computed);if(valIsNaN){var setLow=retHighest||othIsReflexive}else if(valIsUndefined){setLow=othIsReflexive&&(retHighest||othIsDefined)}else if(valIsNull){setLow=othIsReflexive&&othIsDefined&&(retHighest||!othIsNull)}else if(valIsSymbol){setLow=othIsReflexive&&othIsDefined&&!othIsNull&&(retHighest||!othIsSymbol)}else if(othIsNull||othIsSymbol){setLow=false}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function baseSortedUniq(array,iteratee){var index=-1,length=array.length,resIndex=0,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;if(!index||!eq(computed,seen)){var seen=computed;result[resIndex++]=value===0?0:value}}return result}function baseToNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}return+value}function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function baseUniq(array,iteratee,comparator){var index=-1,includes=arrayIncludes,length=array.length,isCommon=true,result=[],seen=result;if(comparator){isCommon=false;includes=arrayIncludesWith}else if(length>=LARGE_ARRAY_SIZE){var set=iteratee?null:createSet(array);if(set){return setToArray(set)}isCommon=false;includes=cacheHas;seen=new SetCache}else{seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value):value;value=comparator||value!==0?value:0;if(isCommon&&computed===computed){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(!includes(seen,computed,comparator)){if(seen!==result){seen.push(computed)}result.push(value)}}return result}function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))]}function baseUpdate(object,path,updater,customizer){return baseSet(object,path,updater(baseGet(object,path)),customizer)}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}return arrayReduce(actions,function(result,action){return action.func.apply(action.thisArg,arrayPush([result],action.args))},result)}function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2){return length?baseUniq(arrays[0]):[]}var index=-1,result=Array(length);while(++index<length){var array=arrays[index],othIndex=-1;while(++othIndex<length){if(othIndex!=index){result[index]=baseDifference(result[index]||array,arrays[othIndex],iteratee,comparator)}}}return baseUniq(baseFlatten(result,1),iteratee,comparator)}function baseZipObject(props,values,assignFunc){var index=-1,length=props.length,valsLength=values.length,result={};while(++index<length){var value=index<valsLength?values[index]:undefined;assignFunc(result,props[index],value)}return result}function castArrayLikeObject(value){return isArrayLikeObject(value)?value:[]}function castFunction(value){return typeof value=="function"?value:identity}function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var castRest=baseRest;function castSlice(array,start,end){var length=array.length;end=end===undefined?length:end;return!start&&end>=length?array:baseSlice(array,start,end)}var clearTimeout=ctxClearTimeout||function(id){return root.clearTimeout(id)};function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),CLONE_DEEP_FLAG):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),CLONE_DEEP_FLAG):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function compareAscending(value,other){if(value!==other){var valIsDefined=value!==undefined,valIsNull=value===null,valIsReflexive=value===value,valIsSymbol=isSymbol(value);var othIsDefined=other!==undefined,othIsNull=other===null,othIsReflexive=other===other,othIsSymbol=isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive){return 1}if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive){return-1}}return 0}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=compareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order=="desc"?-1:1)}}return object.index-other.index}function composeArgs(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersLength=holders.length,leftIndex=-1,leftLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(leftLength+rangeLength),isUncurried=!isCurried;while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[holders[argsIndex]]=args[argsIndex]}}while(rangeLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders,isCurried){var argsIndex=-1,argsLength=args.length,holdersIndex=-1,holdersLength=holders.length,rightIndex=-1,rightLength=partials.length,rangeLength=nativeMax(argsLength-holdersLength,0),result=Array(rangeLength+rightLength),isUncurried=!isCurried;while(++argsIndex<rangeLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){if(isUncurried||argsIndex<argsLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}}return result}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}function createAggregator(setter,initializer){return function(collection,iteratee){var func=isArray(collection)?arrayAggregator:baseAggregator,accumulator=initializer?initializer():{};return func(collection,setter,getIteratee(iteratee,2),accumulator)}}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBind(func,bitmask,thisArg){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,arguments)}return wrapper}function createCaseFirst(methodName){return function(string){string=toString(string);var strSymbols=hasUnicode(string)?stringToArray(string):undefined;var chr=strSymbols?strSymbols[0]:string.charAt(0);var trailing=strSymbols?castSlice(strSymbols,1).join(""):string.slice(1);return chr[methodName]()+trailing}}function createCompounder(callback){return function(string){return arrayReduce(words(deburr(string).replace(reApos,"")),callback,"")}}function createCtor(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(func,bitmask,arity){var Ctor=createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length,placeholder=getHolder(wrapper);while(index--){args[index]=arguments[index]}var holders=length<3&&args[0]!==placeholder&&args[length-1]!==placeholder?[]:replaceHolders(args,placeholder);length-=holders.length;if(length<arity){return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,undefined,args,holders,undefined,undefined,arity-length)}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return apply(fn,this,args)}return wrapper}function createFind(findIndexFunc){return function(collection,predicate,fromIndex){var iterable=Object(collection);if(!isArrayLike(collection)){var iteratee=getIteratee(predicate,3);collection=keys(collection);predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=findIndexFunc(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:undefined}}function createFlow(fromRight){return flatRest(function(funcs){var length=funcs.length,index=length,prereq=LodashWrapper.prototype.thru;if(fromRight){funcs.reverse()}while(index--){var func=funcs[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(prereq&&!wrapper&&getFuncName(func)=="wrapper"){var wrapper=new LodashWrapper([],true)}}index=wrapper?index:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)){return wrapper.plant(value).value()}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result)}return result}})}function createHybrid(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&WRAP_ARY_FLAG,isBind=bitmask&WRAP_BIND_FLAG,isBindKey=bitmask&WRAP_BIND_KEY_FLAG,isCurried=bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG),isFlip=bitmask&WRAP_FLIP_FLAG,Ctor=isBindKey?undefined:createCtor(func);function wrapper(){var length=arguments.length,args=Array(length),index=length;while(index--){args[index]=arguments[index]}if(isCurried){var placeholder=getHolder(wrapper),holdersCount=countHolders(args,placeholder)}if(partials){args=composeArgs(args,partials,holders,isCurried)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight,isCurried)}length-=holdersCount;if(isCurried&&length<arity){var newHolders=replaceHolders(args,placeholder);return createRecurry(func,bitmask,createHybrid,wrapper.placeholder,thisArg,args,newHolders,argPos,ary,arity-length)}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;length=args.length;if(argPos){args=reorder(args,argPos)}else if(isFlip&&length>1){args.reverse()}if(isAry&&ary<length){args.length=ary}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtor(fn)}return fn.apply(thisBinding,args)}return wrapper}function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}function createMathOperation(operator,defaultValue){return function(value,other){var result;if(value===undefined&&other===undefined){return defaultValue}if(value!==undefined){result=value}if(other!==undefined){if(result===undefined){return other}if(typeof value=="string"||typeof other=="string"){value=baseToString(value);other=baseToString(other)}else{value=baseToNumber(value);other=baseToNumber(other)}result=operator(value,other)}return result}}function createOver(arrayFunc){return flatRest(function(iteratees){iteratees=arrayMap(iteratees,baseUnary(getIteratee()));return baseRest(function(args){var thisArg=this;return arrayFunc(iteratees,function(iteratee){return apply(iteratee,thisArg,args)})})})}function createPadding(length,chars){chars=chars===undefined?" ":baseToString(chars);var charsLength=chars.length;if(charsLength<2){return charsLength?baseRepeat(chars,length):chars}var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}function createPartial(func,bitmask,thisArg,partials){var isBind=bitmask&WRAP_BIND_FLAG,Ctor=createCtor(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength),fn=this&&this!==root&&this instanceof wrapper?Ctor:func;while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}return apply(fn,isBind?thisArg:this,args)}return wrapper}function createRange(fromRight){return function(start,end,step){if(step&&typeof step!="number"&&isIterateeCall(start,end,step)){end=step=undefined}start=toFinite(start);if(end===undefined){end=start;start=0}else{end=toFinite(end)}step=step===undefined?start<end?1:-1:toFinite(step);return baseRange(start,end,step,fromRight)}}function createRelationalOperation(operator){return function(value,other){if(!(typeof value=="string"&&typeof other=="string")){value=toNumber(value);other=toNumber(other)}return operator(value,other)}}function createRecurry(func,bitmask,wrapFunc,placeholder,thisArg,partials,holders,argPos,ary,arity){var isCurry=bitmask&WRAP_CURRY_FLAG,newHolders=isCurry?holders:undefined,newHoldersRight=isCurry?undefined:holders,newPartials=isCurry?partials:undefined,newPartialsRight=isCurry?undefined:partials;bitmask|=isCurry?WRAP_PARTIAL_FLAG:WRAP_PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?WRAP_PARTIAL_RIGHT_FLAG:WRAP_PARTIAL_FLAG);if(!(bitmask&WRAP_CURRY_BOUND_FLAG)){bitmask&=~(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newHolders,newPartialsRight,newHoldersRight,argPos,ary,arity];var result=wrapFunc.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return setWrapToString(result,func,bitmask)}function createRound(methodName){var func=Math[methodName];return function(number,precision){number=toNumber(number);precision=precision==null?0:nativeMin(toInteger(precision),292);if(precision){var pair=(toString(number)+"e").split("e"),value=func(pair[0]+"e"+(+pair[1]+precision));pair=(toString(value)+"e").split("e");return+(pair[0]+"e"+(+pair[1]-precision))}return func(number)}}var createSet=!(Set&&1/setToArray(new Set([,-0]))[1]==INFINITY)?noop:function(values){return new Set(values)};function createToPairs(keysFunc){return function(object){var tag=getTag(object);if(tag==mapTag){return mapToArray(object)}if(tag==setTag){return setToPairs(object)}return baseToPairs(object,keysFunc(object))}}function createWrap(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&WRAP_BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(WRAP_PARTIAL_FLAG|WRAP_PARTIAL_RIGHT_FLAG);partials=holders=undefined}ary=ary===undefined?ary:nativeMax(toInteger(ary),0);arity=arity===undefined?arity:toInteger(arity);length-=holders?holders.length:0;if(bitmask&WRAP_PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func);var newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data)}func=newData[0];bitmask=newData[1];thisArg=newData[2];partials=newData[3];holders=newData[4];arity=newData[9]=newData[9]===undefined?isBindKey?0:func.length:nativeMax(newData[9]-length,0);if(!arity&&bitmask&(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)){bitmask&=~(WRAP_CURRY_FLAG|WRAP_CURRY_RIGHT_FLAG)}if(!bitmask||bitmask==WRAP_BIND_FLAG){var result=createBind(func,bitmask,thisArg)}else if(bitmask==WRAP_CURRY_FLAG||bitmask==WRAP_CURRY_RIGHT_FLAG){result=createCurry(func,bitmask,arity)}else if((bitmask==WRAP_PARTIAL_FLAG||bitmask==(WRAP_BIND_FLAG|WRAP_PARTIAL_FLAG))&&!holders.length){result=createPartial(func,bitmask,thisArg,partials)}else{result=createHybrid.apply(undefined,newData)}var setter=data?baseSetData:setData;return setWrapToString(setter(result,newData),func,bitmask)}function customDefaultsAssignIn(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)){return srcValue}return objValue}function customDefaultsMerge(objValue,srcValue,key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,customDefaultsMerge,stack);stack["delete"](srcValue)}return objValue}function customOmitClone(value){return isPlainObject(value)?undefined:value}function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag:case dateTag:case numberTag:return eq(+object,+other);case errorTag:return object.name==other.name&&object.message==other.message;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&COMPARE_PARTIAL_FLAG;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}var getData=!metaMap?noop:function(func){return metaMap.get(func)};function getFuncName(func){var result=func.name+"",array=realNames[result],length=hasOwnProperty.call(realNames,result)?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}function getHolder(func){var object=hasOwnProperty.call(lodash,"placeholder")?lodash:func;return object.placeholder}function getIteratee(){var result=lodash.iteratee||iteratee;result=result===iteratee?baseIteratee:result;return arguments.length?result(arguments[0],arguments[1]):result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function getWrapDetails(source){var match=source.match(reWrapDetails);return match?match[1].split(reSplitDetails):[]}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function initCloneArray(array){var length=array.length,result=array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function insertWrapDetails(source,details){var length=details.length;if(!length){return source}var lastIndex=length-1;details[lastIndex]=(length>1?"& ":"")+details[lastIndex];details=details.join(length>2?", ":" ");return source.replace(reWrapComment,"{\n/* [wrapped with "+details+"] */\n")}function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}function isIndex(value,length){length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(typeof value=="number"||reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other!="function"||!(funcName in LazyWrapper.prototype)){return false}if(func===other){return true}var data=getData(other);return!!data&&func===data[0]}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var isMaskable=coreJsData?isFunction:stubFalse;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<(WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG|WRAP_ARY_FLAG);var isCombo=srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_CURRY_FLAG||srcBitmask==WRAP_ARY_FLAG&&bitmask==WRAP_REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(WRAP_ARY_FLAG|WRAP_REARG_FLAG)&&source[7].length<=source[8]&&bitmask==WRAP_CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&WRAP_BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&WRAP_BIND_FLAG?0:WRAP_CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):value;data[4]=partials?replaceHolders(data[3],PLACEHOLDER):source[4]}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):value;data[6]=partials?replaceHolders(data[5],PLACEHOLDER):source[6]}value=source[7];if(value){data[7]=value}if(srcBitmask&WRAP_ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=copyArray(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=shortOut(baseSetData);var setTimeout=ctxSetTimeout||function(func,wait){return root.setTimeout(func,wait)};var setToString=shortOut(baseSetToString);function setWrapToString(wrapper,reference,bitmask){var source=reference+"";return setToString(wrapper,insertWrapDetails(source,updateWrapDetails(getWrapDetails(source),bitmask)))}function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}function shuffleSelf(array,size){var index=-1,length=array.length,lastIndex=length-1;size=size===undefined?length:size;while(++index<size){var rand=baseRandom(index,lastIndex),value=array[rand];array[rand]=array[index];array[index]=value}array.length=size;return array}var stringToPath=memoizeCapped(function(string){var result=[];if(reLeadingDot.test(string)){result.push("")}string.replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result});function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function updateWrapDetails(details,bitmask){arrayEach(wrapFlags,function(pair){var value="_."+pair[0];if(bitmask&pair[1]&&!arrayIncludes(details,value)){details.push(value)}});return details.sort()}function wrapperClone(wrapper){if(wrapper instanceof LazyWrapper){return wrapper.clone()}var result=new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__);result.__actions__=copyArray(wrapper.__actions__);result.__index__=wrapper.__index__;result.__values__=wrapper.__values__;return result}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size===undefined){size=1}else{size=nativeMax(toInteger(size),0)}var length=array==null?0:array.length;if(!length||size<1){return[]}var index=0,resIndex=0,result=Array(nativeCeil(length/size));while(index<length){result[resIndex++]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(value){result[resIndex++]=value}}return result}function concat(){var length=arguments.length;if(!length){return[]}var args=Array(length-1),array=arguments[0],index=length;while(index--){args[index-1]=arguments[index]}return arrayPush(isArray(array)?copyArray(array):[array],baseFlatten(args,1))}var difference=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true)):[]});var differenceBy=baseRest(function(array,values){var iteratee=last(values);if(isArrayLikeObject(iteratee)){iteratee=undefined}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),getIteratee(iteratee,2)):[]});var differenceWith=baseRest(function(array,values){var comparator=last(values);if(isArrayLikeObject(comparator)){comparator=undefined}return isArrayLikeObject(array)?baseDifference(array,baseFlatten(values,1,isArrayLikeObject,true),undefined,comparator):[]});function drop(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,n<0?0:n,length)}function dropRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true,true):[]}function dropWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),true):[]}function fill(array,value,start,end){var length=array==null?0:array.length;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}function findIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseFindIndex(array,getIteratee(predicate,3),index)}function findLastIndex(array,predicate,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=length-1;if(fromIndex!==undefined){index=toInteger(fromIndex);index=fromIndex<0?nativeMax(length+index,0):nativeMin(index,length-1)}return baseFindIndex(array,getIteratee(predicate,3),index,true)}function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}function flattenDeep(array){var length=array==null?0:array.length;return length?baseFlatten(array,INFINITY):[]}function flattenDepth(array,depth){var length=array==null?0:array.length;if(!length){return[]}depth=depth===undefined?1:toInteger(depth);return baseFlatten(array,depth)}function fromPairs(pairs){var index=-1,length=pairs==null?0:pairs.length,result={};while(++index<length){var pair=pairs[index];result[pair[0]]=pair[1]}return result}function head(array){return array&&array.length?array[0]:undefined}function indexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=fromIndex==null?0:toInteger(fromIndex);if(index<0){index=nativeMax(length+index,0)}return baseIndexOf(array,value,index)}function initial(array){var length=array==null?0:array.length;return length?baseSlice(array,0,-1):[]}var intersection=baseRest(function(arrays){var mapped=arrayMap(arrays,castArrayLikeObject);return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped):[]});var intersectionBy=baseRest(function(arrays){var iteratee=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);if(iteratee===last(mapped)){iteratee=undefined}else{mapped.pop()}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,getIteratee(iteratee,2)):[]});var intersectionWith=baseRest(function(arrays){var comparator=last(arrays),mapped=arrayMap(arrays,castArrayLikeObject);comparator=typeof comparator=="function"?comparator:undefined;if(comparator){mapped.pop()}return mapped.length&&mapped[0]===arrays[0]?baseIntersection(mapped,undefined,comparator):[]});function join(array,separator){return array==null?"":nativeJoin.call(array,separator)}function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array==null?0:array.length;if(!length){return-1}var index=length;if(fromIndex!==undefined){index=toInteger(fromIndex);index=index<0?nativeMax(length+index,0):nativeMin(index,length-1)}return value===value?strictLastIndexOf(array,value,index):baseFindIndex(array,baseIsNaN,index,true)}function nth(array,n){return array&&array.length?baseNth(array,toInteger(n)):undefined}var pull=baseRest(pullAll);function pullAll(array,values){return array&&array.length&&values&&values.length?basePullAll(array,values):array}function pullAllBy(array,values,iteratee){return array&&array.length&&values&&values.length?basePullAll(array,values,getIteratee(iteratee,2)):array}function pullAllWith(array,values,comparator){return array&&array.length&&values&&values.length?basePullAll(array,values,undefined,comparator):array}var pullAt=flatRest(function(array,indexes){var length=array==null?0:array.length,result=baseAt(array,indexes);basePullAt(array,arrayMap(indexes,function(index){return isIndex(index,length)?+index:index}).sort(compareAscending));return result});function remove(array,predicate){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getIteratee(predicate,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function reverse(array){return array==null?array:nativeReverse.call(array)}function slice(array,start,end){var length=array==null?0:array.length;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}else{start=start==null?0:toInteger(start);end=end===undefined?length:toInteger(end)}return baseSlice(array,start,end)}function sortedIndex(array,value){return baseSortedIndex(array,value)}function sortedIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2))}function sortedIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value);if(index<length&&eq(array[index],value)){return index}}return-1}function sortedLastIndex(array,value){return baseSortedIndex(array,value,true)}function sortedLastIndexBy(array,value,iteratee){return baseSortedIndexBy(array,value,getIteratee(iteratee,2),true)}function sortedLastIndexOf(array,value){var length=array==null?0:array.length;if(length){var index=baseSortedIndex(array,value,true)-1;if(eq(array[index],value)){return index}}return-1}function sortedUniq(array){return array&&array.length?baseSortedUniq(array):[]}function sortedUniqBy(array,iteratee){return array&&array.length?baseSortedUniq(array,getIteratee(iteratee,2)):[]}function tail(array){var length=array==null?0:array.length;return length?baseSlice(array,1,length):[]}function take(array,n,guard){if(!(array&&array.length)){return[]}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array==null?0:array.length;if(!length){return[]}n=guard||n===undefined?1:toInteger(n);n=length-n;return baseSlice(array,n<0?0:n,length)}function takeRightWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3),false,true):[]}function takeWhile(array,predicate){return array&&array.length?baseWhile(array,getIteratee(predicate,3)):[]}var union=baseRest(function(arrays){return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true))});var unionBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined}return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),getIteratee(iteratee,2))});var unionWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined;return baseUniq(baseFlatten(arrays,1,isArrayLikeObject,true),undefined,comparator)});function uniq(array){return array&&array.length?baseUniq(array):[]}function uniqBy(array,iteratee){return array&&array.length?baseUniq(array,getIteratee(iteratee,2)):[]}function uniqWith(array,comparator){comparator=typeof comparator=="function"?comparator:undefined;return array&&array.length?baseUniq(array,undefined,comparator):[]}function unzip(array){if(!(array&&array.length)){return[]}var length=0;array=arrayFilter(array,function(group){if(isArrayLikeObject(group)){length=nativeMax(group.length,length);return true}});return baseTimes(length,function(index){return arrayMap(array,baseProperty(index))})}function unzipWith(array,iteratee){if(!(array&&array.length)){return[]}var result=unzip(array);if(iteratee==null){return result}return arrayMap(result,function(group){return apply(iteratee,undefined,group)})}var without=baseRest(function(array,values){return isArrayLikeObject(array)?baseDifference(array,values):[]});var xor=baseRest(function(arrays){return baseXor(arrayFilter(arrays,isArrayLikeObject))});var xorBy=baseRest(function(arrays){var iteratee=last(arrays);if(isArrayLikeObject(iteratee)){iteratee=undefined}return baseXor(arrayFilter(arrays,isArrayLikeObject),getIteratee(iteratee,2))});var xorWith=baseRest(function(arrays){var comparator=last(arrays);comparator=typeof comparator=="function"?comparator:undefined;return baseXor(arrayFilter(arrays,isArrayLikeObject),undefined,comparator)});var zip=baseRest(unzip);function zipObject(props,values){return baseZipObject(props||[],values||[],assignValue)}function zipObjectDeep(props,values){return baseZipObject(props||[],values||[],baseSet)}var zipWith=baseRest(function(arrays){var length=arrays.length,iteratee=length>1?arrays[length-1]:undefined;iteratee=typeof iteratee=="function"?(arrays.pop(),iteratee):undefined;return unzipWith(arrays,iteratee)});function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor){interceptor(value);return value}function thru(value,interceptor){return interceptor(value)}var wrapperAt=flatRest(function(paths){var length=paths.length,start=length?paths[0]:0,value=this.__wrapped__,interceptor=function(object){return baseAt(object,paths)};if(length>1||this.__actions__.length||!(value instanceof LazyWrapper)||!isIndex(start)){return this.thru(interceptor)}value=value.slice(start,+start+(length?1:0));value.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(value,this.__chain__).thru(function(array){if(length&&!array.length){array.push(undefined)}return array})});function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){if(this.__values__===undefined){this.__values__=toArray(this.value())}var done=this.__index__>=this.__values__.length,value=done?undefined:this.__values__[this.__index__++];return{done:done,value:value}}function wrapperToIterator(){return this}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);clone.__index__=0;clone.__values__=undefined;if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this)}wrapped=wrapped.reverse();wrapped.__actions__.push({func:thru,args:[reverse],thisArg:undefined});return new LodashWrapper(wrapped,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var countBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){++result[key]}else{baseAssignValue(result,key,1)}});function every(collection,predicate,guard){var func=isArray(collection)?arrayEvery:baseEvery;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined}return func(collection,getIteratee(predicate,3))}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,getIteratee(predicate,3))}var find=createFind(findIndex);var findLast=createFind(findLastIndex);function flatMap(collection,iteratee){return baseFlatten(map(collection,iteratee),1)}function flatMapDeep(collection,iteratee){return baseFlatten(map(collection,iteratee),INFINITY)}function flatMapDepth(collection,iteratee,depth){depth=depth===undefined?1:toInteger(depth);return baseFlatten(map(collection,iteratee),depth)}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,getIteratee(iteratee,3))}function forEachRight(collection,iteratee){var func=isArray(collection)?arrayEachRight:baseEachRight;return func(collection,getIteratee(iteratee,3))}var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{baseAssignValue(result,key,[value])}});function includes(collection,value,fromIndex,guard){collection=isArrayLike(collection)?collection:values(collection);fromIndex=fromIndex&&!guard?toInteger(fromIndex):0;var length=collection.length;if(fromIndex<0){fromIndex=nativeMax(length+fromIndex,0)}return isString(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&baseIndexOf(collection,value,fromIndex)>-1}var invokeMap=baseRest(function(collection,path,args){var index=-1,isFunc=typeof path=="function",result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){result[++index]=isFunc?apply(path,value,args):baseInvoke(value,path,args)});return result});var keyBy=createAggregator(function(result,value,key){baseAssignValue(result,key,value)});function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,getIteratee(iteratee,3))}function orderBy(collection,iteratees,orders,guard){if(collection==null){return[]}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}orders=guard?undefined:orders;if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseOrderBy(collection,iteratees,orders)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function reduce(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduce:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEach)}function reduceRight(collection,iteratee,accumulator){var func=isArray(collection)?arrayReduceRight:baseReduce,initAccum=arguments.length<3;return func(collection,getIteratee(iteratee,4),accumulator,initAccum,baseEachRight)}function reject(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter;return func(collection,negate(getIteratee(predicate,3)))}function sample(collection){var func=isArray(collection)?arraySample:baseSample;return func(collection)}function sampleSize(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n===undefined){n=1}else{n=toInteger(n)}var func=isArray(collection)?arraySampleSize:baseSampleSize;return func(collection,n)}function shuffle(collection){var func=isArray(collection)?arrayShuffle:baseShuffle;return func(collection)}function size(collection){if(collection==null){return 0}if(isArrayLike(collection)){return isString(collection)?stringSize(collection):collection.length}var tag=getTag(collection);if(tag==mapTag||tag==setTag){return collection.size}return baseKeys(collection).length}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome;if(guard&&isIterateeCall(collection,predicate,guard)){predicate=undefined}return func(collection,getIteratee(predicate,3))}var sortBy=baseRest(function(collection,iteratees){if(collection==null){return[]}var length=iteratees.length;if(length>1&&isIterateeCall(collection,iteratees[0],iteratees[1])){iteratees=[]}else if(length>2&&isIterateeCall(iteratees[0],iteratees[1],iteratees[2])){iteratees=[iteratees[0]]}return baseOrderBy(collection,baseFlatten(iteratees,1),[])});var now=ctxNow||function(){return root.Date.now()};function after(n,func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}n=toInteger(n);return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){n=guard?undefined:n;n=func&&n==null?func.length:n;return createWrap(func,WRAP_ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}n=toInteger(n);return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=undefined}return result}}var bind=baseRest(function(func,thisArg,partials){var bitmask=WRAP_BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bind));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(func,bitmask,thisArg,partials,holders)});var bindKey=baseRest(function(object,key,partials){var bitmask=WRAP_BIND_FLAG|WRAP_BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,getHolder(bindKey));bitmask|=WRAP_PARTIAL_FLAG}return createWrap(key,bitmask,object,partials,holders)});function curry(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curry.placeholder;return result}function curryRight(func,arity,guard){arity=guard?undefined:arity;var result=createWrap(func,WRAP_CURRY_RIGHT_FLAG,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryRight.placeholder;return result}function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=toNumber(wait)||0;if(isObject(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=undefined;lastInvokeTime=time;result=func.apply(thisArg,args);return result}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===undefined||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time)){return trailingEdge(time)}timerId=setTimeout(timerExpired,remainingWait(time))}function trailingEdge(time){timerId=undefined;if(trailing&&lastArgs){return invokeFunc(time)}lastArgs=lastThis=undefined;return result}function cancel(){if(timerId!==undefined){clearTimeout(timerId)}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=undefined}function flush(){return timerId===undefined?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===undefined){return leadingEdge(lastCallTime)}if(maxing){timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime)}}if(timerId===undefined){timerId=setTimeout(timerExpired,wait)}return result}debounced.cancel=cancel;debounced.flush=flush;return debounced}var defer=baseRest(function(func,args){return baseDelay(func,1,args)});var delay=baseRest(function(func,wait,args){return baseDelay(func,toNumber(wait)||0,args)});function flip(func){return createWrap(func,WRAP_FLIP_FLAG)}function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){var args=arguments;switch(args.length){case 0:return!predicate.call(this);case 1:return!predicate.call(this,args[0]);case 2:return!predicate.call(this,args[0],args[1]);case 3:return!predicate.call(this,args[0],args[1],args[2])}return!predicate.apply(this,args)}}function once(func){return before(2,func)}var overArgs=castRest(function(func,transforms){transforms=transforms.length==1&&isArray(transforms[0])?arrayMap(transforms[0],baseUnary(getIteratee())):arrayMap(baseFlatten(transforms,1),baseUnary(getIteratee()));var funcsLength=transforms.length;return baseRest(function(args){var index=-1,length=nativeMin(args.length,funcsLength);while(++index<length){args[index]=transforms[index].call(this,args[index])}return apply(func,this,args)})});var partial=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partial));return createWrap(func,WRAP_PARTIAL_FLAG,undefined,partials,holders)});var partialRight=baseRest(function(func,partials){var holders=replaceHolders(partials,getHolder(partialRight));return createWrap(func,WRAP_PARTIAL_RIGHT_FLAG,undefined,partials,holders)});var rearg=flatRest(function(func,indexes){return createWrap(func,WRAP_REARG_FLAG,undefined,undefined,undefined,indexes)});function rest(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=start===undefined?start:toInteger(start);return baseRest(func,start)}function spread(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=start==null?0:nativeMax(toInteger(start),0);return baseRest(function(args){var array=args[start],otherArgs=castSlice(args,0,start);if(array){arrayPush(otherArgs,array)}return apply(func,this,otherArgs)})}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:wait,trailing:trailing})}function unary(func){return ary(func,1)}function wrap(value,wrapper){return partial(castFunction(wrapper),value)}function castArray(){if(!arguments.length){return[]}var value=arguments[0];return isArray(value)?value:[value]}function clone(value){return baseClone(value,CLONE_SYMBOLS_FLAG)}function cloneWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseClone(value,CLONE_SYMBOLS_FLAG,customizer)}function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function cloneDeepWith(value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,customizer)}function conformsTo(object,source){return source==null||baseConformsTo(object,source,keys(source))}function eq(value,other){return value===other||value!==value&&other!==other}var gt=createRelationalOperation(baseGt);var gte=createRelationalOperation(function(value,other){return value>=other});var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;var isArrayBuffer=nodeIsArrayBuffer?baseUnary(nodeIsArrayBuffer):baseIsArrayBuffer;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&baseGetTag(value)==boolTag}var isBuffer=nativeIsBuffer||stubFalse;var isDate=nodeIsDate?baseUnary(nodeIsDate):baseIsDate;function isElement(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value)}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||typeof value=="string"||typeof value.splice=="function"||isBuffer(value)||isTypedArray(value)||isArguments(value))){return!value.length}var tag=getTag(value);if(tag==mapTag||tag==setTag){return!value.size}if(isPrototype(value)){return!baseKeys(value).length}for(var key in value){if(hasOwnProperty.call(value,key)){return false}}return true}function isEqual(value,other){return baseIsEqual(value,other)}function isEqualWith(value,other,customizer){customizer=typeof customizer=="function"?customizer:undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,undefined,customizer):!!result}function isError(value){if(!isObjectLike(value)){return false}var tag=baseGetTag(value);return tag==errorTag||tag==domExcTag||typeof value.message=="string"&&typeof value.name=="string"&&!isPlainObject(value)}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isInteger(value){return typeof value=="number"&&value==toInteger(value)}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;function isMatch(object,source){return object===source||baseIsMatch(object,source,getMatchData(source))}function isMatchWith(object,source,customizer){customizer=typeof customizer=="function"?customizer:undefined;return baseIsMatch(object,source,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(isMaskable(value)){throw new Error(CORE_ERROR_TEXT)}return baseIsNative(value)}function isNull(value){return value===null}function isNil(value){return value==null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&baseGetTag(value)==numberTag}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;function isSafeInteger(value){return isInteger(value)&&value>=-MAX_SAFE_INTEGER&&value<=MAX_SAFE_INTEGER}var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;function isString(value){return typeof value=="string"||!isArray(value)&&isObjectLike(value)&&baseGetTag(value)==stringTag}function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function isUndefined(value){return value===undefined}function isWeakMap(value){return isObjectLike(value)&&getTag(value)==weakMapTag}function isWeakSet(value){return isObjectLike(value)&&baseGetTag(value)==weakSetTag}var lt=createRelationalOperation(baseLt);var lte=createRelationalOperation(function(value,other){return value<=other});function toArray(value){if(!value){return[]}if(isArrayLike(value)){return isString(value)?stringToArray(value):copyArray(value)}if(symIterator&&value[symIterator]){return iteratorToArray(value[symIterator]())}var tag=getTag(value),func=tag==mapTag?mapToArray:tag==setTag?setToArray:values;return func(value)}function toFinite(value){if(!value){return value===0?value:0}value=toNumber(value);if(value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toLength(value){return value?baseClamp(toInteger(value),0,MAX_ARRAY_LENGTH):0}function toNumber(value){if(typeof value=="number"){return value}if(isSymbol(value)){return NAN}if(isObject(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject(other)?other+"":other}if(typeof value!="string"){return value===0?value:+value}value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toPlainObject(value){return copyObject(value,keysIn(value))}function toSafeInteger(value){return value?baseClamp(toInteger(value),-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER):value===0?value:0}function toString(value){return value==null?"":baseToString(value)}var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source){if(hasOwnProperty.call(source,key)){assignValue(object,key,source[key])}}});var assignIn=createAssigner(function(object,source){copyObject(source,keysIn(source),object)});var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keysIn(source),object,customizer)});var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObject(source,keys(source),object,customizer)});var at=flatRest(baseAt);function create(prototype,properties){var result=baseCreate(prototype);return properties==null?result:baseAssign(result,properties)}var defaults=baseRest(function(args){args.push(undefined,customDefaultsAssignIn);return apply(assignInWith,undefined,args)});var defaultsDeep=baseRest(function(args){args.push(undefined,customDefaultsMerge);return apply(mergeWith,undefined,args)});function findKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwn)}function findLastKey(object,predicate){return baseFindKey(object,getIteratee(predicate,3),baseForOwnRight)}function forIn(object,iteratee){return object==null?object:baseFor(object,getIteratee(iteratee,3),keysIn)}function forInRight(object,iteratee){return object==null?object:baseForRight(object,getIteratee(iteratee,3),keysIn)}function forOwn(object,iteratee){return object&&baseForOwn(object,getIteratee(iteratee,3))}function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,getIteratee(iteratee,3))}function functions(object){return object==null?[]:baseFunctions(object,keys(object))}function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function has(object,path){return object!=null&&hasPath(object,path,baseHas)}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var invert=createInverter(function(result,value,key){result[value]=key},constant(identity));var invertBy=createInverter(function(result,value,key){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}},getIteratee);var invoke=baseRest(baseInvoke);function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}function mapKeys(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,iteratee(value,key,object),value)});return result}function mapValues(object,iteratee){var result={};iteratee=getIteratee(iteratee,3);baseForOwn(object,function(value,key,object){baseAssignValue(result,key,iteratee(value,key,object))});return result}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});var mergeWith=createAssigner(function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)});var omit=flatRest(function(object,paths){var result={};if(object==null){return result}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)}var length=paths.length;while(length--){baseUnset(result,paths[length])}return result});function omitBy(object,predicate){return pickBy(object,negate(getIteratee(predicate)))}var pick=flatRest(function(object,paths){return object==null?{}:basePick(object,paths)});function pickBy(object,predicate){if(object==null){return{}}var props=arrayMap(getAllKeysIn(object),function(prop){return[prop]});predicate=getIteratee(predicate);return basePickBy(object,props,function(value,path){return predicate(value,path[0])})}function result(object,path,defaultValue){path=castPath(path,object);var index=-1,length=path.length;if(!length){length=1;object=undefined}while(++index<length){var value=object==null?undefined:object[toKey(path[index])];if(value===undefined){index=length;value=defaultValue}object=isFunction(value)?value.call(object):value}return object}function set(object,path,value){return object==null?object:baseSet(object,path,value)}function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}var toPairs=createToPairs(keys);var toPairsIn=createToPairs(keysIn);function transform(object,iteratee,accumulator){var isArr=isArray(object),isArrLike=isArr||isBuffer(object)||isTypedArray(object);iteratee=getIteratee(iteratee,4);if(accumulator==null){var Ctor=object&&object.constructor;if(isArrLike){accumulator=isArr?new Ctor:[]}else if(isObject(object)){accumulator=isFunction(Ctor)?baseCreate(getPrototype(object)):{}}else{accumulator={}}}(isArrLike?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function unset(object,path){return object==null?true:baseUnset(object,path)}function update(object,path,updater){return object==null?object:baseUpdate(object,path,castFunction(updater))}function updateWith(object,path,updater,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseUpdate(object,path,castFunction(updater),customizer)}function values(object){return object==null?[]:baseValues(object,keys(object))}function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object))}function clamp(number,lower,upper){if(upper===undefined){upper=lower;lower=undefined}if(upper!==undefined){upper=toNumber(upper);upper=upper===upper?upper:0}if(lower!==undefined){lower=toNumber(lower);lower=lower===lower?lower:0}return baseClamp(toNumber(number),lower,upper)}function inRange(number,start,end){start=toFinite(start);if(end===undefined){end=start;start=0}else{end=toFinite(end)}number=toNumber(number);return baseInRange(number,start,end)}function random(lower,upper,floating){if(floating&&typeof floating!="boolean"&&isIterateeCall(lower,upper,floating)){upper=floating=undefined}if(floating===undefined){if(typeof upper=="boolean"){floating=upper;upper=undefined}else if(typeof lower=="boolean"){floating=lower;lower=undefined}}if(lower===undefined&&upper===undefined){lower=0;upper=1}else{lower=toFinite(lower);if(upper===undefined){upper=lower;lower=0}else{upper=toFinite(upper)}}if(lower>upper){var temp=lower;lower=upper;upper=temp}if(floating||lower%1||upper%1){var rand=nativeRandom();return nativeMin(lower+rand*(upper-lower+freeParseFloat("1e-"+((rand+"").length-1))),upper)}return baseRandom(lower,upper)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?capitalize(word):word)});function capitalize(string){return upperFirst(toString(string).toLowerCase())}function deburr(string){string=toString(string);return string&&string.replace(reLatin,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=toString(string);target=baseToString(target);var length=string.length;position=position===undefined?length:baseClamp(toInteger(position),0,length);var end=position;position-=target.length;return position>=0&&string.slice(position,end)==target}function escape(string){string=toString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=toString(string);return string&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});var lowerCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toLowerCase()});var lowerFirst=createCaseFirst("toLowerCase");function pad(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;if(!length||strLength>=length){return string}var mid=(length-strLength)/2;return createPadding(nativeFloor(mid),chars)+string+createPadding(nativeCeil(mid),chars)}function padEnd(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?string+createPadding(length-strLength,chars):string}function padStart(string,length,chars){string=toString(string);length=toInteger(length);var strLength=length?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}function parseInt(string,radix,guard){if(guard||radix==null){radix=0}else if(radix){radix=+radix}return nativeParseInt(toString(string).replace(reTrimStart,""),radix||0)}function repeat(string,n,guard){if(guard?isIterateeCall(string,n,guard):n===undefined){n=1}else{n=toInteger(n)}return baseRepeat(toString(string),n)}function replace(){var args=arguments,string=toString(args[0]);return args.length<3?string:string.replace(args[1],args[2])}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});function split(string,separator,limit){if(limit&&typeof limit!="number"&&isIterateeCall(string,separator,limit)){separator=limit=undefined}limit=limit===undefined?MAX_ARRAY_LENGTH:limit>>>0;if(!limit){return[]}string=toString(string);if(string&&(typeof separator=="string"||separator!=null&&!isRegExp(separator))){separator=baseToString(separator);if(!separator&&hasUnicode(string)){return castSlice(stringToArray(string),0,limit)}}return string.split(separator,limit)}var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+upperFirst(word)});function startsWith(string,target,position){string=toString(string);position=position==null?0:baseClamp(toInteger(position),0,string.length);target=baseToString(target);return string.slice(position,position+target.length)==target}function template(string,options,guard){var settings=lodash.templateSettings;if(guard&&isIterateeCall(string,options,guard)){options=undefined}string=toString(string);options=assignInWith({},options,settings,customDefaultsAssignIn);var imports=assignInWith({},options.imports,settings.imports,customDefaultsAssignIn),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result)){throw result}return result}function toLower(value){return toString(value).toLowerCase()}function toUpper(value){return toString(value).toUpperCase()}function trim(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrim,"")}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),chrSymbols=stringToArray(chars),start=charsStartIndex(strSymbols,chrSymbols),end=charsEndIndex(strSymbols,chrSymbols)+1;return castSlice(strSymbols,start,end).join("")}function trimEnd(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimEnd,"")}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),end=charsEndIndex(strSymbols,stringToArray(chars))+1;return castSlice(strSymbols,0,end).join("")}function trimStart(string,chars,guard){string=toString(string);if(string&&(guard||chars===undefined)){return string.replace(reTrimStart,"")}if(!string||!(chars=baseToString(chars))){return string}var strSymbols=stringToArray(string),start=charsStartIndex(strSymbols,stringToArray(chars));return castSlice(strSymbols,start).join("")}function truncate(string,options){var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?toInteger(options.length):length;omission="omission"in options?baseToString(options.omission):omission}string=toString(string);var strLength=string.length;if(hasUnicode(string)){var strSymbols=stringToArray(string);strLength=strSymbols.length}if(length>=strLength){return string}var end=length-stringSize(omission);if(end<1){return omission}var result=strSymbols?castSlice(strSymbols,0,end).join(""):string.slice(0,end);if(separator===undefined){return result+omission}if(strSymbols){end+=result.length-end}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,substring=result;if(!separator.global){separator=RegExp(separator.source,toString(reFlags.exec(separator))+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){var newEnd=match.index}result=result.slice(0,newEnd===undefined?end:newEnd)}}else if(string.indexOf(baseToString(separator),end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=toString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}var upperCase=createCompounder(function(result,word,index){return result+(index?" ":"")+word.toUpperCase()});var upperFirst=createCaseFirst("toUpperCase");function words(string,pattern,guard){string=toString(string);pattern=guard?undefined:pattern;if(pattern===undefined){return hasUnicodeWord(string)?unicodeWords(string):asciiWords(string)}return string.match(pattern)||[]}var attempt=baseRest(function(func,args){try{return apply(func,undefined,args)}catch(e){return isError(e)?e:new Error(e)}});var bindAll=flatRest(function(object,methodNames){arrayEach(methodNames,function(key){key=toKey(key);baseAssignValue(object,key,bind(object[key],object))});return object});function cond(pairs){var length=pairs==null?0:pairs.length,toIteratee=getIteratee();pairs=!length?[]:arrayMap(pairs,function(pair){if(typeof pair[1]!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return[toIteratee(pair[0]),pair[1]]});return baseRest(function(args){var index=-1;while(++index<length){var pair=pairs[index];if(apply(pair[0],this,args)){return apply(pair[1],this,args)}}})}function conforms(source){return baseConforms(baseClone(source,CLONE_DEEP_FLAG))}function constant(value){return function(){return value}}function defaultTo(value,defaultValue){return value==null||value!==value?defaultValue:value}var flow=createFlow();var flowRight=createFlow(true);function identity(value){return value}function iteratee(func){return baseIteratee(typeof func=="function"?func:baseClone(func,CLONE_DEEP_FLAG))}function matches(source){return baseMatches(baseClone(source,CLONE_DEEP_FLAG))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,CLONE_DEEP_FLAG))}var method=baseRest(function(path,args){return function(object){return baseInvoke(object,path,args)}});var methodOf=baseRest(function(object,args){return function(path){return baseInvoke(object,path,args)}});function mixin(object,source,options){var props=keys(source),methodNames=baseFunctions(source,props);if(options==null&&!(isObject(source)&&(methodNames.length||!props.length))){options=source;source=object;object=this;methodNames=baseFunctions(source,keys(source))}var chain=!(isObject(options)&&"chain"in options)||!!options.chain,isFunc=isFunction(object);arrayEach(methodNames,function(methodName){var func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=copyArray(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}return func.apply(object,arrayPush([this.value()],arguments))}}});return object}function noConflict(){if(root._===this){root._=oldDash}return this}function noop(){}function nthArg(n){n=toInteger(n);return baseRest(function(args){return baseNth(args,n)})}var over=createOver(arrayMap);var overEvery=createOver(arrayEvery);var overSome=createOver(arraySome);function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function propertyOf(object){return function(path){return object==null?undefined:baseGet(object,path)}}var range=createRange();var rangeRight=createRange(true);function stubArray(){return[]}function stubFalse(){return false}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return true}function times(n,iteratee){n=toInteger(n);if(n<1||n>MAX_SAFE_INTEGER){return[]}var index=MAX_ARRAY_LENGTH,length=nativeMin(n,MAX_ARRAY_LENGTH);iteratee=getIteratee(iteratee);n-=MAX_ARRAY_LENGTH;var result=baseTimes(length,iteratee);while(++index<n){iteratee(index)}return result}function toPath(value){if(isArray(value)){return arrayMap(value,toKey)}return isSymbol(value)?[value]:copyArray(stringToPath(toString(value)))}function uniqueId(prefix){var id=++idCounter;return toString(prefix)+id}var add=createMathOperation(function(augend,addend){return augend+addend},0);var ceil=createRound("ceil");var divide=createMathOperation(function(dividend,divisor){return dividend/divisor},1);var floor=createRound("floor");function max(array){return array&&array.length?baseExtremum(array,identity,baseGt):undefined}function maxBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseGt):undefined}function mean(array){return baseMean(array,identity)}function meanBy(array,iteratee){return baseMean(array,getIteratee(iteratee,2))}function min(array){return array&&array.length?baseExtremum(array,identity,baseLt):undefined}function minBy(array,iteratee){return array&&array.length?baseExtremum(array,getIteratee(iteratee,2),baseLt):undefined}var multiply=createMathOperation(function(multiplier,multiplicand){return multiplier*multiplicand},1);var round=createRound("round");var subtract=createMathOperation(function(minuend,subtrahend){return minuend-subtrahend},0);function sum(array){return array&&array.length?baseSum(array,identity):0}function sumBy(array,iteratee){return array&&array.length?baseSum(array,getIteratee(iteratee,2)):0}lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.assignIn=assignIn;lodash.assignInWith=assignInWith;lodash.assignWith=assignWith;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.castArray=castArray;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.concat=concat;lodash.cond=cond;lodash.conforms=conforms;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.differenceBy=differenceBy;lodash.differenceWith=differenceWith;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatMap=flatMap;lodash.flatMapDeep=flatMapDeep;lodash.flatMapDepth=flatMapDepth;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flattenDepth=flattenDepth;lodash.flip=flip;lodash.flow=flow;lodash.flowRight=flowRight;lodash.fromPairs=fromPairs;lodash.functions=functions;lodash.functionsIn=functionsIn;lodash.groupBy=groupBy;lodash.initial=initial;lodash.intersection=intersection;lodash.intersectionBy=intersectionBy;lodash.intersectionWith=intersectionWith;lodash.invert=invert;lodash.invertBy=invertBy;lodash.invokeMap=invokeMap;lodash.iteratee=iteratee;lodash.keyBy=keyBy;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.mergeWith=mergeWith;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.nthArg=nthArg;lodash.omit=omit;lodash.omitBy=omitBy;lodash.once=once;lodash.orderBy=orderBy;lodash.over=over;lodash.overArgs=overArgs;lodash.overEvery=overEvery;lodash.overSome=overSome;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pickBy=pickBy;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAll=pullAll;lodash.pullAllBy=pullAllBy;lodash.pullAllWith=pullAllWith;lodash.pullAt=pullAt;lodash.range=range;lodash.rangeRight=rangeRight;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.reverse=reverse;lodash.sampleSize=sampleSize;lodash.set=set;lodash.setWith=setWith;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortedUniq=sortedUniq;lodash.sortedUniqBy=sortedUniqBy;lodash.split=split;lodash.spread=spread;lodash.tail=tail;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.toArray=toArray;lodash.toPairs=toPairs;lodash.toPairsIn=toPairsIn;lodash.toPath=toPath;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.unary=unary;lodash.union=union;lodash.unionBy=unionBy;lodash.unionWith=unionWith;lodash.uniq=uniq;lodash.uniqBy=uniqBy;lodash.uniqWith=uniqWith;lodash.unset=unset;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.update=update;lodash.updateWith=updateWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.without=without;lodash.words=words;lodash.wrap=wrap;lodash.xor=xor;lodash.xorBy=xorBy;lodash.xorWith=xorWith;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipObjectDeep=zipObjectDeep;lodash.zipWith=zipWith;lodash.entries=toPairs;lodash.entriesIn=toPairsIn;lodash.extend=assignIn;lodash.extendWith=assignInWith;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clamp=clamp;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.cloneDeepWith=cloneDeepWith;lodash.cloneWith=cloneWith;lodash.conformsTo=conformsTo;lodash.deburr=deburr;lodash.defaultTo=defaultTo;lodash.divide=divide;lodash.endsWith=endsWith;lodash.eq=eq;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.floor=floor;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.hasIn=hasIn;lodash.head=head;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.invoke=invoke;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isArrayBuffer=isArrayBuffer;lodash.isArrayLike=isArrayLike;lodash.isArrayLikeObject=isArrayLikeObject;lodash.isBoolean=isBoolean;lodash.isBuffer=isBuffer;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isEqualWith=isEqualWith;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isInteger=isInteger;lodash.isLength=isLength;lodash.isMap=isMap;lodash.isMatch=isMatch;lodash.isMatchWith=isMatchWith;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNil=isNil;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isObjectLike=isObjectLike;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isSafeInteger=isSafeInteger;lodash.isSet=isSet;lodash.isString=isString;lodash.isSymbol=isSymbol;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.isWeakMap=isWeakMap;lodash.isWeakSet=isWeakSet;lodash.join=join;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lowerCase=lowerCase;lodash.lowerFirst=lowerFirst;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.maxBy=maxBy;lodash.mean=mean;lodash.meanBy=meanBy;lodash.min=min;lodash.minBy=minBy;lodash.stubArray=stubArray;lodash.stubFalse=stubFalse;lodash.stubObject=stubObject;lodash.stubString=stubString;lodash.stubTrue=stubTrue;lodash.multiply=multiply;lodash.nth=nth;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padEnd=padEnd;lodash.padStart=padStart;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.replace=replace;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.sample=sample;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedIndexBy=sortedIndexBy;lodash.sortedIndexOf=sortedIndexOf;lodash.sortedLastIndex=sortedLastIndex;lodash.sortedLastIndexBy=sortedLastIndexBy;lodash.sortedLastIndexOf=sortedLastIndexOf;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.subtract=subtract;lodash.sum=sum;lodash.sumBy=sumBy;lodash.template=template;lodash.times=times;lodash.toFinite=toFinite;lodash.toInteger=toInteger;lodash.toLength=toLength;lodash.toLower=toLower;lodash.toNumber=toNumber;lodash.toSafeInteger=toSafeInteger;lodash.toString=toString;lodash.toUpper=toUpper;lodash.trim=trim;lodash.trimEnd=trimEnd;lodash.trimStart=trimStart;lodash.truncate=truncate;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.upperCase=upperCase;lodash.upperFirst=upperFirst;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.first=head;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!hasOwnProperty.call(lodash.prototype,methodName)){source[methodName]=func}});return source}(),{chain:false});lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){n=n===undefined?1:nativeMax(toInteger(n),0);var result=this.__filtered__&&!index?new LazyWrapper(this):this.clone();if(result.__filtered__){result.__takeCount__=nativeMin(n,result.__takeCount__)}else{result.__views__.push({size:nativeMin(n,MAX_ARRAY_LENGTH),type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type==LAZY_FILTER_FLAG||type==LAZY_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee){var result=this.clone();result.__iteratees__.push({iteratee:getIteratee(iteratee,3),type:type});result.__filtered__=result.__filtered__||isFilter;return result}});arrayEach(["head","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","tail"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.find=function(predicate){return this.filter(predicate).head()};LazyWrapper.prototype.findLast=function(predicate){return this.reverse().find(predicate)};LazyWrapper.prototype.invokeMap=baseRest(function(path,args){if(typeof path=="function"){return new LazyWrapper(this)}return this.map(function(value){return baseInvoke(value,path,args)})});LazyWrapper.prototype.reject=function(predicate){return this.filter(negate(getIteratee(predicate)))};LazyWrapper.prototype.slice=function(start,end){start=toInteger(start);var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result)}if(start<0){result=result.takeRight(-start)}else if(start){result=result.drop(start)}if(end!==undefined){end=toInteger(end);result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.takeRightWhile=function(predicate){return this.reverse().takeWhile(predicate).reverse()};LazyWrapper.prototype.toArray=function(){return this.take(MAX_ARRAY_LENGTH)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|find|map|reject)|While$/.test(methodName),isTaker=/^(?:head|last)$/.test(methodName),lodashFunc=lodash[isTaker?"take"+(methodName=="last"?"Right":""):methodName],retUnwrapped=isTaker||/^find/.test(methodName);if(!lodashFunc){return}lodash.prototype[methodName]=function(){var value=this.__wrapped__,args=isTaker?[1]:arguments,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);var interceptor=function(value){var result=lodashFunc.apply(lodash,arrayPush([value],args));return isTaker&&chainAll?result[0]:result};if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var chainAll=this.__chain__,isHybrid=!!this.__actions__.length,isUnwrapped=retUnwrapped&&!chainAll,onlyLazy=isLazy&&!isHybrid;if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(result,chainAll)}if(isUnwrapped&&onlyLazy){return func.apply(this,args)}result=this.thru(interceptor);return isUnwrapped?isTaker?result.value()[0]:result.value():result}});arrayEach(["pop","push","shift","sort","splice","unshift"],function(methodName){var func=arrayProto[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:pop|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){var value=this.value();return func.apply(isArray(value)?value:[],args)}return this[chainName](function(value){return func.apply(isArray(value)?value:[],args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name+"",names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}});realNames[createHybrid(undefined,WRAP_BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.at=wrapperAt;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.next=wrapperNext;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.first=lodash.prototype.head;if(symIterator){lodash.prototype[symIterator]=wrapperToIterator}return lodash};var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeModule){(freeModule.exports=_)._=_;freeExports._=_}else{root._=_}}).call(this)},{}],424:[function(require,module,exports){var paramRegExp=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g;var textRegExp=/^[\u0020-\u007e\u0080-\u00ff]+$/;var tokenRegExp=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/;var qescRegExp=/\\([\u0000-\u007f])/g;var quoteRegExp=/([\\"])/g;var subtypeNameRegExp=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/;var typeNameRegExp=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/;var typeRegExp=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;exports.format=format;exports.parse=parse;function format(obj){if(!obj||typeof obj!=="object"){throw new TypeError("argument obj is required")}var parameters=obj.parameters;var subtype=obj.subtype;var suffix=obj.suffix;var type=obj.type;if(!type||!typeNameRegExp.test(type)){throw new TypeError("invalid type")}if(!subtype||!subtypeNameRegExp.test(subtype)){throw new TypeError("invalid subtype")}var string=type+"/"+subtype;if(suffix){if(!typeNameRegExp.test(suffix)){throw new TypeError("invalid suffix")}string+="+"+suffix}if(parameters&&typeof parameters==="object"){var param;var params=Object.keys(parameters).sort();for(var i=0;i<params.length;i++){param=params[i];if(!tokenRegExp.test(param)){throw new TypeError("invalid parameter name")}string+="; "+param+"="+qstring(parameters[param])}}return string}function parse(string){if(!string){throw new TypeError("argument string is required")}if(typeof string==="object"){string=getcontenttype(string)}if(typeof string!=="string"){throw new TypeError("argument string is required to be a string")}var index=string.indexOf(";");var type=index!==-1?string.substr(0,index):string;var key;var match;var obj=splitType(type);var params={};var value;paramRegExp.lastIndex=index;while(match=paramRegExp.exec(string)){if(match.index!==index){throw new TypeError("invalid parameter format")}index+=match[0].length;key=match[1].toLowerCase();value=match[2];if(value[0]==='"'){value=value.substr(1,value.length-2).replace(qescRegExp,"$1")}params[key]=value}if(index!==-1&&index!==string.length){throw new TypeError("invalid parameter format")}obj.parameters=params;return obj}function getcontenttype(obj){if(typeof obj.getHeader==="function"){return obj.getHeader("content-type")}if(typeof obj.headers==="object"){return obj.headers&&obj.headers["content-type"]}}function qstring(val){var str=String(val);if(tokenRegExp.test(str)){return str}if(str.length>0&&!textRegExp.test(str)){throw new TypeError("invalid parameter value")}return'"'+str.replace(quoteRegExp,"\\$1")+'"'}function splitType(string){var match=typeRegExp.exec(string.toLowerCase());if(!match){throw new TypeError("invalid media type")}var type=match[1];var subtype=match[2];var suffix;var index=subtype.lastIndexOf("+");if(index!==-1){suffix=subtype.substr(index+1);subtype=subtype.substr(0,index)}var obj={type:type,subtype:subtype,suffix:suffix};return obj}},{}],425:[function(require,module,exports){"use strict";module.exports=merge;var hasOwnProperty=Object.prototype.hasOwnProperty;function merge(dest,src,redefine){if(!dest){throw new TypeError("argument dest is required")}if(!src){throw new TypeError("argument src is required")}if(redefine===undefined){redefine=true}Object.getOwnPropertyNames(src).forEach(function forEachOwnPropertyName(name){if(!redefine&&hasOwnProperty.call(dest,name)){return}var descriptor=Object.getOwnPropertyDescriptor(src,name);Object.defineProperty(dest,name,descriptor)});return dest}},{}],426:[function(require,module,exports){"use strict";var http=require("http");module.exports=getCurrentNodeMethods()||getBasicNodeMethods();function getCurrentNodeMethods(){return http.METHODS&&http.METHODS.map(function lowerCaseMethod(method){return method.toLowerCase()})}function getBasicNodeMethods(){return["get","post","put","head","delete","options","trace","copy","lock","mkcol","move","purge","propfind","proppatch","unlock","report","mkactivity","checkout","merge","m-search","notify","subscribe","unsubscribe","patch","search","connect"]}},{http:undefined}],427:[function(require,module,exports){module.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana"},"application/3gpp-ims+xml":{source:"iana"},"application/a2l":{source:"iana"},"application/activemessage":{source:"iana"},"application/alto-costmap+json":{source:"iana",compressible:true},"application/alto-costmapfilter+json":{source:"iana",compressible:true},"application/alto-directory+json":{source:"iana",compressible:true},"application/alto-endpointcost+json":{source:"iana",compressible:true},"application/alto-endpointcostparams+json":{source:"iana",compressible:true},"application/alto-endpointprop+json":{source:"iana",compressible:true},"application/alto-endpointpropparams+json":{source:"iana",compressible:true},"application/alto-error+json":{source:"iana",compressible:true},"application/alto-networkmap+json":{source:"iana",compressible:true},"application/alto-networkmapfilter+json":{source:"iana",compressible:true},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:true,extensions:["atom"]},"application/atomcat+xml":{source:"iana",extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana"},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",extensions:["atomsvc"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana"},"application/bacnet-xdd+zip":{source:"iana"},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:false,extensions:["bdoc"]},"application/beep+xml":{source:"iana"},"application/calendar+json":{source:"iana",compressible:true},"application/calendar+xml":{source:"iana"},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/cbor":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana"},"application/ccxml+xml":{source:"iana",extensions:["ccxml"]},"application/cdfx+xml":{source:"iana"},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana"},"application/cellml+xml":{source:"iana"},"application/cfw":{source:"iana"},"application/clue_info+xml":{source:"iana"},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana"},"application/coap-group+json":{source:"iana",compressible:true},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana"},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana"},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana"},"application/cstadata+xml":{source:"iana"},"application/csvm+json":{source:"iana",compressible:true},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cybercash":{source:"iana"},"application/dart":{compressible:true},"application/dash+xml":{source:"iana",extensions:["mpd"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana"},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:true},"application/dicom+xml":{source:"iana"},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/docbook+xml":{source:"apache",extensions:["dbk"]},"application/dskpp+xml":{source:"iana"},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:true,extensions:["ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:false},"application/edifact":{source:"iana",compressible:false},"application/efi":{source:"iana"},"application/emergencycalldata.comment+xml":{source:"iana"},"application/emergencycalldata.control+xml":{source:"iana"},"application/emergencycalldata.deviceinfo+xml":{source:"iana"},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana"},"application/emergencycalldata.serviceinfo+xml":{source:"iana"},"application/emergencycalldata.subscriberinfo+xml":{source:"iana"},"application/emergencycalldata.veds+xml":{source:"iana"},"application/emma+xml":{source:"iana",extensions:["emma"]},"application/emotionml+xml":{source:"iana"},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana"},"application/epub+zip":{source:"iana",extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana"},"application/fido.trusted-apps+json":{compressible:true},"application/fits":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:false,extensions:["woff"]},"application/font-woff2":{compressible:false,extensions:["woff2"]},"application/framework-attributes+xml":{source:"iana"},"application/geo+json":{source:"iana",compressible:true,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geoxacml+xml":{source:"iana"},"application/gml+xml":{source:"iana",extensions:["gml"]},"application/gpx+xml":{source:"apache",extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:false,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana"},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana"},"application/ibe-pkg-reply+xml":{source:"iana"},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana"},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana"},"application/java-archive":{source:"apache",compressible:false,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:false,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:false,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:true,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:true},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:true},"application/jrd+json":{source:"iana",compressible:true},"application/json":{source:"iana",charset:"UTF-8",compressible:true,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:true},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:true,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:true},"application/jwk-set+json":{source:"iana",compressible:true},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana"},"application/kpml-response+xml":{source:"iana"},"application/ld+json":{source:"iana",compressible:true,extensions:["jsonld"]},"application/lgr+xml":{source:"iana"},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana"},"application/lost+xml":{source:"iana",extensions:["lostxml"]},"application/lostsync+xml":{source:"iana"},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",extensions:["mads"]},"application/manifest+json":{charset:"UTF-8",compressible:true,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",extensions:["mathml"]},"application/mathml-content+xml":{source:"iana"},"application/mathml-presentation+xml":{source:"iana"},"application/mbms-associated-procedure-description+xml":{source:"iana"},"application/mbms-deregister+xml":{source:"iana"},"application/mbms-envelope+xml":{source:"iana"},"application/mbms-msk+xml":{source:"iana"},"application/mbms-msk-response+xml":{source:"iana"},"application/mbms-protection-description+xml":{source:"iana"},"application/mbms-reception-report+xml":{source:"iana"},"application/mbms-register+xml":{source:"iana"},"application/mbms-register-response+xml":{source:"iana"},"application/mbms-schedule+xml":{source:"iana"},"application/mbms-user-service-description+xml":{source:"iana"},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana"},"application/media_control+xml":{source:"iana"},"application/mediaservercontrol+xml":{source:"iana",extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:true},"application/metalink+xml":{source:"apache",extensions:["metalink"]},"application/metalink4+xml":{source:"iana",extensions:["meta4"]},"application/mets+xml":{source:"iana",extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mmt-usd+xml":{source:"iana"},"application/mods+xml":{source:"iana",extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana"},"application/mrb-publish+xml":{source:"iana"},"application/msc-ivr+xml":{source:"iana"},"application/msc-mixer+xml":{source:"iana"},"application/msword":{source:"iana",compressible:false,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:true},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana"},"application/n-triples":{source:"iana"},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana"},"application/news-groupinfo":{source:"iana"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana"},"application/nss":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:false,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",extensions:["opf"]},"application/ogg":{source:"iana",compressible:false,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana"},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",extensions:["xer"]},"application/pdf":{source:"iana",compressible:false,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:false,extensions:["pgp"]},"application/pgp-keys":{source:"iana"},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana"},"application/pidf-diff+xml":{source:"iana"},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",extensions:["pls"]},"application/poc-settings+xml":{source:"iana"},"application/postscript":{source:"iana",compressible:true,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:true},"application/problem+json":{source:"iana",compressible:true},"application/problem+xml":{source:"iana"},"application/provenance+xml":{source:"iana"},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.hpub+zip":{source:"iana"},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana"},"application/pskc+xml":{source:"iana",extensions:["pskcxml"]},"application/qsig":{source:"iana"},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:true},"application/rdf+xml":{source:"iana",compressible:true,extensions:["rdf"]},"application/reginfo+xml":{source:"iana",extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:true},"application/resource-lists+xml":{source:"iana",extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",extensions:["rld"]},"application/rfc+xml":{source:"iana"},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana"},"application/rls-services+xml":{source:"iana",extensions:["rs"]},"application/route-apd+xml":{source:"iana"},"application/route-s-tsid+xml":{source:"iana"},"application/route-usd+xml":{source:"iana"},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:true,extensions:["rss"]},"application/rtf":{source:"iana",compressible:true,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana"},"application/samlmetadata+xml":{source:"iana"},"application/sbml+xml":{source:"iana",extensions:["sbml"]},"application/scaip+xml":{source:"iana"},"application/scim+json":{source:"iana",compressible:true},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/sep+xml":{source:"iana"},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",extensions:["shf"]},"application/sieve":{source:"iana"},"application/simple-filter+xml":{source:"iana"},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:true},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",extensions:["srx"]},"application/spirits-event+xml":{source:"iana"},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",extensions:["grxml"]},"application/sru+xml":{source:"iana",extensions:["sru"]},"application/ssdl+xml":{source:"apache",extensions:["ssdl"]},"application/ssml+xml":{source:"iana",extensions:["ssml"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:true},"application/tei+xml":{source:"iana",extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/trig":{source:"iana"},"application/ttml+xml":{source:"iana"},"application/tve-trigger":{source:"iana"},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana"},"application/urc-ressheet+xml":{source:"iana"},"application/urc-targetdesc+xml":{source:"iana"},"application/urc-uisocketdesc+xml":{source:"iana"},"application/vcard+json":{source:"iana",compressible:true},"application/vcard+xml":{source:"iana"},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana"},"application/vnd.3gpp-prose+xml":{source:"iana"},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana"},"application/vnd.3gpp.bsf+xml":{source:"iana"},"application/vnd.3gpp.gmop+xml":{source:"iana"},"application/vnd.3gpp.mcptt-info+xml":{source:"iana"},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana"},"application/vnd.3gpp.mid-call+xml":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana"},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana"},"application/vnd.3gpp.srvcc-info+xml":{source:"iana"},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana"},"application/vnd.3gpp.ussd+xml":{source:"iana"},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana"},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:false,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:true},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:true},"application/vnd.apple.installer+xml":{source:"iana",extensions:["mpkg"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.pkpass":{compressible:false,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avistar+xml":{source:"iana"},"application/vnd.balsamiq.bmml+xml":{source:"iana"},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:true},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana"},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:true},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana"},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:true},"application/vnd.collection.doc+json":{source:"iana",compressible:true},"application/vnd.collection.next+json":{source:"iana",compressible:true},"application/vnd.comicbook+zip":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:true},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana"},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana"},"application/vnd.cybank":{source:"iana"},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:true,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:true},"application/vnd.dataresource+json":{source:"iana",compressible:true},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume-movie":{source:"iana"},"application/vnd.desmume.movie":{source:"apache"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana"},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:true},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:true},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana"},"application/vnd.dvb.notif-container+xml":{source:"iana"},"application/vnd.dvb.notif-generic+xml":{source:"iana"},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana"},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana"},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana"},"application/vnd.dvb.notif-init+xml":{source:"iana"},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana"},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana"},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana"},"application/vnd.eszigno3+xml":{source:"iana",extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana"},"application/vnd.etsi.asic-e+zip":{source:"iana"},"application/vnd.etsi.asic-s+zip":{source:"iana"},"application/vnd.etsi.cug+xml":{source:"iana"},"application/vnd.etsi.iptvcommand+xml":{source:"iana"},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana"},"application/vnd.etsi.iptvprofile+xml":{source:"iana"},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana"},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana"},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana"},"application/vnd.etsi.iptvservice+xml":{source:"iana"},"application/vnd.etsi.iptvsync+xml":{source:"iana"},"application/vnd.etsi.iptvueprofile+xml":{source:"iana"},"application/vnd.etsi.mcid+xml":{source:"iana"},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana"},"application/vnd.etsi.pstn+xml":{source:"iana"},"application/vnd.etsi.sci+xml":{source:"iana"},"application/vnd.etsi.simservs+xml":{source:"iana"},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana"},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geo+json":{source:"iana",compressible:true},"application/vnd.geocube+xml":{source:"iana"},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:false,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:false,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:false,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:true,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:false,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana"},"application/vnd.gov.sk.e-form+zip":{source:"iana"},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana"},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:true},"application/vnd.hal+xml":{source:"iana",extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:true},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:true},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper-item+json":{source:"iana",compressible:true},"application/vnd.hyperdrive+json":{source:"iana",compressible:true},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana"},"application/vnd.imagemeter.image+zip":{source:"iana"},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:true},"application/vnd.informedcontrol.rms+xml":{source:"iana"},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana"},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana"},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana"},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana"},"application/vnd.iptc.g2.newsitem+xml":{source:"iana"},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana"},"application/vnd.iptc.g2.packageitem+xml":{source:"iana"},"application/vnd.iptc.g2.planningitem+xml":{source:"iana"},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+json":{source:"iana",compressible:true},"application/vnd.las.las+xml":{source:"iana",extensions:["lasxml"]},"application/vnd.liberty-request+xml":{source:"iana"},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana"},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana"},"application/vnd.marlin.drm.conftoken+xml":{source:"iana"},"application/vnd.marlin.drm.license+xml":{source:"iana"},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:true},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:true},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:true},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:true,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:false,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:true,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana"},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:true},"application/vnd.ms-outlook":{compressible:false,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana"},"application/vnd.ms-powerpoint":{source:"iana",compressible:false,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana"},"application/vnd.ms-printing.printticket+xml":{source:"apache"},"application/vnd.ms-printschematicket+xml":{source:"iana"},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:false,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:true},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana"},"application/vnd.nokia.iptv.config+xml":{source:"iana"},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana"},"application/vnd.nokia.landmarkcollection+xml":{source:"iana"},"application/vnd.nokia.n-gage.ac+xml":{source:"iana"},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana"},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:false,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:false,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:false,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:false,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oftn.l10n+json":{source:"iana",compressible:true},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana"},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana"},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana"},"application/vnd.oipf.dae.xhtml+xml":{source:"iana"},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana"},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana"},"application/vnd.oipf.spdlist+xml":{source:"iana"},"application/vnd.oipf.ueprofile+xml":{source:"iana"},"application/vnd.oipf.userprofile+xml":{source:"iana"},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana"},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana"},"application/vnd.oma.bcast.imd+xml":{source:"iana"},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana"},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana"},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana"},"application/vnd.oma.bcast.sprov+xml":{source:"iana"},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana"},"application/vnd.oma.cab-feature-handler+xml":{source:"iana"},"application/vnd.oma.cab-pcc+xml":{source:"iana"},"application/vnd.oma.cab-subs-invite+xml":{source:"iana"},"application/vnd.oma.cab-user-prefs+xml":{source:"iana"},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana"},"application/vnd.oma.group-usage-list+xml":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:true},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana"},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana"},"application/vnd.oma.poc.final-report+xml":{source:"iana"},"application/vnd.oma.poc.groups+xml":{source:"iana"},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana"},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana"},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana"},"application/vnd.oma.xcap-directory+xml":{source:"iana"},"application/vnd.omads-email+xml":{source:"iana"},"application/vnd.omads-file+xml":{source:"iana"},"application/vnd.omads-folder+xml":{source:"iana"},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana"},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml-template":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:false,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"apache",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml-template":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:false,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"apache",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml-template":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:false,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"apache",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana"},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana"},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana"},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana"},"application/vnd.oracle.resource+json":{source:"iana",compressible:true},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana"},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:true},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos+xml":{source:"iana"},"application/vnd.paos.xml":{source:"apache"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana"},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana"},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana"},"application/vnd.radisys.msml+xml":{source:"iana"},"application/vnd.radisys.msml-audit+xml":{source:"iana"},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana"},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana"},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana"},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana"},"application/vnd.radisys.msml-conf+xml":{source:"iana"},"application/vnd.radisys.msml-dialog+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana"},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana"},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana"},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:true},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana"},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:true,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana"},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana"},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:true},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.tmd.mediaflex.api+xml":{source:"iana"},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:true},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana"},"application/vnd.wv.ssp+xml":{source:"iana"},"application/vnd.xacml+json":{source:"iana",compressible:true},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana"},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",extensions:["zaz"]},"application/voicexml+xml":{source:"iana",extensions:["vxml"]},"application/vq-rtcpxr":{source:"iana"},"application/watcherinfo+xml":{source:"iana"},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:false,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:false,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:false,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:false,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:false,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:false},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",extensions:["res"]},"application/x-dvi":{source:"apache",compressible:false,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-otf":{source:"apache",compressible:true,extensions:["otf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-ttf":{source:"apache",compressible:true,extensions:["ttf","ttc"]},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:true,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:false,extensions:["jnlp"]},"application/x-javascript":{compressible:true},"application/x-latex":{source:"apache",compressible:false,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:false},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:true,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:false,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",compressible:false,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:true,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:false,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:false,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:true,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:true,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:true,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:true,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:true,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:false,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:true,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:true,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:true,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:true,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:true},"application/x-x509-ca-cert":{source:"apache",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:false,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana"},"application/xaml+xml":{source:"apache",extensions:["xaml"]},"application/xcap-att+xml":{source:"iana"},"application/xcap-caps+xml":{source:"iana"},"application/xcap-diff+xml":{source:"iana",extensions:["xdf"]},"application/xcap-el+xml":{source:"iana"},"application/xcap-error+xml":{source:"iana"},"application/xcap-ns+xml":{source:"iana"},"application/xcon-conference-info+xml":{source:"iana"},"application/xcon-conference-info-diff+xml":{source:"iana"},"application/xenc+xml":{source:"iana",extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:true,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache"},"application/xml":{source:"iana",compressible:true,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:true,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana"},"application/xmpp+xml":{source:"iana"},"application/xop+xml":{source:"iana",compressible:true,extensions:["xop"]},"application/xproc+xml":{source:"apache",extensions:["xpl"]},"application/xslt+xml":{source:"iana",extensions:["xslt"]},"application/xspf+xml":{source:"apache",extensions:["xspf"]},"application/xv+xml":{source:"iana",extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:true},"application/yang-data+xml":{source:"iana"},"application/yang-patch+json":{source:"iana",compressible:true},"application/yang-patch+xml":{source:"iana"},"application/yin+xml":{source:"iana",extensions:["yin"]},"application/zip":{source:"iana",compressible:false,extensions:["zip"]},"application/zlib":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:false,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana"},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:false,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:false},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana"},"audio/mp3":{compressible:false,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:false,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:false,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:false,extensions:["oga","ogg","spx"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tone":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:false},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:false},"audio/vorbis":{source:"iana",compressible:false},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:false,extensions:["wav"]},"audio/wave":{compressible:false,extensions:["wav"]},"audio/webm":{source:"apache",compressible:false,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:false,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:false,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/otf":{compressible:true,extensions:["otf"]},"image/apng":{compressible:false,extensions:["apng"]},"image/bmp":{source:"iana",compressible:true,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana"},"image/emf":{source:"iana"},"image/fits":{source:"iana"},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:false,extensions:["gif"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana"},"image/jp2":{source:"iana"},"image/jpeg":{source:"iana",compressible:false,extensions:["jpeg","jpg","jpe"]},"image/jpm":{source:"iana"},"image/jpx":{source:"iana"},"image/ktx":{source:"iana",extensions:["ktx"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:false},"image/png":{source:"iana",compressible:false,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana"},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:true,extensions:["svg","svgz"]},"image/t38":{source:"iana"},"image/tiff":{source:"iana",compressible:false,extensions:["tiff","tif"]},"image/tiff-fx":{source:"iana"},"image/vnd.adobe.photoshop":{source:"iana",compressible:true,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana"},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana"},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana"},"image/vnd.valve.source.texture":{source:"iana"},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana"},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana"},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:true,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:true,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:false},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana"},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana"},"message/global-delivery-status":{source:"iana"},"message/global-disposition-notification":{source:"iana"},"message/global-headers":{source:"iana"},"message/http":{source:"iana",compressible:false},"message/imdn+xml":{source:"iana",compressible:true},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:false},"message/rfc822":{source:"iana",compressible:true,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana"},"model/3mf":{source:"iana"},"model/gltf+json":{source:"iana",compressible:true,extensions:["gltf"]},"model/gltf-binary":{compressible:true,extensions:["glb"]},"model/iges":{source:"iana",compressible:false,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:false,extensions:["msh","mesh","silo"]},"model/vnd.collada+xml":{source:"iana",extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana"},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana"},"model/vnd.parasolid.transmit.binary":{source:"iana"},"model/vnd.parasolid.transmit.text":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.valve.source.compiled-map":{source:"iana"},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:false,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:false,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana"},"model/x3d+vrml":{source:"apache",compressible:false,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:true,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana"},"multipart/alternative":{source:"iana",compressible:false},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:false},"multipart/form-data":{source:"iana",compressible:false},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana",compressible:false},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:false},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:false},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:true,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:true},"text/cmd":{compressible:true},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/css":{source:"iana",charset:"UTF-8",compressible:true,extensions:["css"]},"text/csv":{source:"iana",compressible:true,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fwdred":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/hjson":{extensions:["hjson"]},"text/html":{source:"iana",compressible:true,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:true},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:true,extensions:["jsx"]},"text/less":{extensions:["less"]},"text/markdown":{source:"iana",compressible:true,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",compressible:true,extensions:["n3"]},"text/parameters":{source:"iana"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:true,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:true,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:true,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/slim":{extensions:["slim","slm"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:true,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:true,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:true,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{charset:"UTF-8",compressible:true,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:true},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:true},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:true,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:true,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:true,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:true,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:true,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana"},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:false,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:false,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:false,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:false,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vp8":{source:"iana"},"video/webm":{source:"apache",compressible:false,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:false,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:false,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:false,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:true},"x-shader/x-vertex":{compressible:true}}},{}],428:[function(require,module,exports){module.exports=require("./db.json")},{"./db.json":427}],429:[function(require,module,exports){"use strict";var db=require("mime-db");var extname=require("path").extname;var EXTRACT_TYPE_REGEXP=/^\s*([^;\s]*)(?:;|\s|$)/;var TEXT_TYPE_REGEXP=/^text\//i;exports.charset=charset;exports.charsets={lookup:charset};exports.contentType=contentType;exports.extension=extension;exports.extensions=Object.create(null);exports.lookup=lookup;exports.types=Object.create(null);populateMaps(exports.extensions,exports.types);function charset(type){if(!type||typeof type!=="string"){return false}var match=EXTRACT_TYPE_REGEXP.exec(type);var mime=match&&db[match[1].toLowerCase()];if(mime&&mime.charset){return mime.charset}if(match&&TEXT_TYPE_REGEXP.test(match[1])){return"UTF-8"}return false}function contentType(str){if(!str||typeof str!=="string"){return false}var mime=str.indexOf("/")===-1?exports.lookup(str):str;if(!mime){return false}if(mime.indexOf("charset")===-1){var charset=exports.charset(mime);if(charset)mime+="; charset="+charset.toLowerCase()}return mime}function extension(type){if(!type||typeof type!=="string"){return false}var match=EXTRACT_TYPE_REGEXP.exec(type);var exts=match&&exports.extensions[match[1].toLowerCase()];if(!exts||!exts.length){return false}return exts[0]}function lookup(path){if(!path||typeof path!=="string"){return false}var extension=extname("x."+path).toLowerCase().substr(1);if(!extension){return false}return exports.types[extension]||false}function populateMaps(extensions,types){var preference=["nginx","apache",undefined,"iana"];Object.keys(db).forEach(function forEachMimeType(type){var mime=db[type];var exts=mime.extensions;if(!exts||!exts.length){return}extensions[type]=exts;for(var i=0;i<exts.length;i++){var extension=exts[i];if(types[extension]){var from=preference.indexOf(db[types[extension]].source);var to=preference.indexOf(mime.source);if(types[extension]!=="application/octet-stream"&&(from>to||from===to&&types[extension].substr(0,12)==="application/")){continue}}types[extension]=type}})}},{"mime-db":428,path:undefined}],430:[function(require,module,exports){var path=require("path");var fs=require("fs");function Mime(){this.types=Object.create(null);this.extensions=Object.create(null)}Mime.prototype.define=function(map){for(var type in map){var exts=map[type];for(var i=0;i<exts.length;i++){if(process.env.DEBUG_MIME&&this.types[exts[i]]){console.warn((this._loading||"define()").replace(/.*\//,""),'changes "'+exts[i]+'" extension type from '+this.types[exts[i]]+" to "+type)}this.types[exts[i]]=type}if(!this.extensions[type]){this.extensions[type]=exts[0]}}};Mime.prototype.load=function(file){this._loading=file;var map={},content=fs.readFileSync(file,"ascii"),lines=content.split(/[\r\n]+/);lines.forEach(function(line){var fields=line.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);map[fields.shift()]=fields});this.define(map);this._loading=null};Mime.prototype.lookup=function(path,fallback){var ext=path.replace(/^.*[\.\/\\]/,"").toLowerCase();return this.types[ext]||fallback||this.default_type};Mime.prototype.extension=function(mimeType){var type=mimeType.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[type]};var mime=new Mime;mime.define(require("./types.json"));mime.default_type=mime.lookup("bin");mime.Mime=Mime;mime.charsets={lookup:function(mimeType,fallback){return/^text\/|^application\/(javascript|json)/.test(mimeType)?"UTF-8":fallback}};module.exports=mime},{"./types.json":431,fs:undefined,path:undefined}],431:[function(require,module,exports){module.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":["woff"],"application/font-woff2":["woff2"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-otf":["otf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-ttf":["ttf","ttc"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["iso"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["exe"],"application/x-msdownload":["exe","dll","com","bat","msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","wmz","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["prc","pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":["mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["ra"],"audio/x-wav":["wav"],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/otf":["otf"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jpeg":["jpeg","jpg","jpe"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["bmp"],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/sgml":["sgml","sgm"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/xml":["xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},{}],432:[function(require,module,exports){module.exports=minimatch;minimatch.Minimatch=Minimatch;var path={sep:"/"};try{path=require("path")}catch(er){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var expand=require("brace-expansion");var plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var qmark="[^/]";var star=qmark+"*?";var twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?";var reSpecials=charSet("().*{}+?[]^$\\!");function charSet(s){return s.split("").reduce(function(set,c){set[c]=true;return set},{})}var slashSplit=/\/+/;minimatch.filter=filter;function filter(pattern,options){options=options||{};return function(p,i,list){return minimatch(p,pattern,options)}}function ext(a,b){a=a||{};b=b||{};var t={};Object.keys(b).forEach(function(k){t[k]=b[k]});Object.keys(a).forEach(function(k){t[k]=a[k]});return t}minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch;var m=function minimatch(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options))};m.Minimatch=function Minimatch(pattern,options){return new orig.Minimatch(pattern,ext(def,options))};return m};Minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return Minimatch;return minimatch.defaults(def).Minimatch};function minimatch(p,pattern,options){if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==="#"){return false}if(pattern.trim()==="")return p==="";return new Minimatch(pattern,options).match(p)}function Minimatch(pattern,options){if(!(this instanceof Minimatch)){return new Minimatch(pattern,options)}if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};pattern=pattern.trim();if(path.sep!=="/"){pattern=pattern.split(path.sep).join("/")}this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==="#"){this.comment=true;return}if(!pattern){this.empty=true;return}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)this.debug=console.error;this.debug(this.pattern,set);set=this.globParts=set.map(function(s){return s.split(slashSplit)});this.debug(this.pattern,set);set=set.map(function(s,si,set){return s.map(this.parse,this)},this);this.debug(this.pattern,set);set=set.filter(function(s){return s.indexOf(false)===-1});this.debug(this.pattern,set);this.set=set}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern;var negate=false;var options=this.options;var negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==="!";i++){negate=!negate;negateOffset++}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate}minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){if(!options){if(this instanceof Minimatch){options=this.options}else{options={}}}pattern=typeof pattern==="undefined"?this.pattern:pattern;if(typeof pattern==="undefined"){throw new TypeError("undefined pattern")}if(options.nobrace||!pattern.match(/\{.*\}/)){return[pattern]}return expand(pattern)}Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(pattern,isSub){if(pattern.length>1024*64){throw new TypeError("pattern is too long")}var options=this.options;if(!options.noglobstar&&pattern==="**")return GLOBSTAR;if(pattern==="")return"";var re="";var hasMagic=!!options.nocase;var escaping=false;var patternListStack=[];var negativeLists=[];var stateChar;var inClass=false;var reClassStart=-1;var classStart=-1;var patternStart=pattern.charAt(0)==="."?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var self=this;function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+=star;hasMagic=true;break;case"?":re+=qmark;hasMagic=true;break;default:re+="\\"+stateChar;break}self.debug("clearStateChar %j %j",stateChar,re);stateChar=false}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){this.debug("%s\t%s %s %j",pattern,i,re,c);if(escaping&&reSpecials[c]){re+="\\"+c;escaping=false;continue}switch(c){case"/":return false;case"\\":clearStateChar();escaping=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",pattern,i,re,c);if(inClass){this.debug("  in class");if(c==="!"&&i===classStart+1)c="^";re+=c;continue}self.debug("call clearStateChar %j",stateChar);clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case"(":if(inClass){re+="(";continue}if(!stateChar){re+="\\(";continue}patternListStack.push({type:stateChar,start:i-1,reStart:re.length,open:plTypes[stateChar].open,close:plTypes[stateChar].close});re+=stateChar==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",stateChar,re);stateChar=false;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue}clearStateChar();hasMagic=true;var pl=patternListStack.pop();re+=pl.close;if(pl.type==="!"){negativeLists.push(pl)}pl.reEnd=re.length;continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|";escaping=false;continue}clearStateChar();re+="|";continue;case"[":clearStateChar();if(inClass){re+="\\"+c;continue}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c;escaping=false;continue}if(inClass){var cs=pattern.substring(classStart+1,i);try{RegExp("["+cs+"]")}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0]+"\\]";hasMagic=hasMagic||sp[1];inClass=false;continue}}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false}else if(reSpecials[c]&&!(c==="^"&&inClass)){re+="\\"}re+=c}}if(inClass){cs=pattern.substr(classStart+1);sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0];hasMagic=hasMagic||sp[1]}for(pl=patternListStack.pop();pl;pl=patternListStack.pop()){var tail=re.slice(pl.reStart+pl.open.length);this.debug("setting tail",re,pl);tail=tail.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(_,$1,$2){if(!$2){$2="\\"}return $1+$1+$2+"|"});this.debug("tail=%j\n   %s",tail,tail,pl,re);var t=pl.type==="*"?star:pl.type==="?"?qmark:"\\"+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+"\\("+tail}clearStateChar();if(escaping){re+="\\\\"}var addPatternStart=false;switch(re.charAt(0)){case".":case"[":case"(":addPatternStart=true}for(var n=negativeLists.length-1;n>-1;n--){var nl=negativeLists[n];var nlBefore=re.slice(0,nl.reStart);var nlFirst=re.slice(nl.reStart,nl.reEnd-8);var nlLast=re.slice(nl.reEnd-8,nl.reEnd);var nlAfter=re.slice(nl.reEnd);nlLast+=nlAfter;var openParensBefore=nlBefore.split("(").length-1;var cleanAfter=nlAfter;for(i=0;i<openParensBefore;i++){cleanAfter=cleanAfter.replace(/\)[+*?]?/,"")}nlAfter=cleanAfter;var dollar="";if(nlAfter===""&&isSub!==SUBPARSE){dollar="$"}var newRe=nlBefore+nlFirst+nlAfter+dollar+nlLast;re=newRe}if(re!==""&&hasMagic){re="(?=.)"+re}if(addPatternStart){re=patternStart+re}if(isSub===SUBPARSE){return[re,hasMagic]}if(!hasMagic){return globUnescape(pattern)}var flags=options.nocase?"i":"";try{var regExp=new RegExp("^"+re+"$",flags)}catch(er){return new RegExp("$.")}regExp._glob=pattern;regExp._src=re;return regExp}minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length){this.regexp=false;return this.regexp}var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot;var flags=options.nocase?"i":"";var re=set.map(function(pattern){return pattern.map(function(p){return p===GLOBSTAR?twoStar:typeof p==="string"?regExpEscape(p):p._src}).join("\\/")}).join("|");re="^(?:"+re+")$";if(this.negate)re="^(?!"+re+").*$";try{this.regexp=new RegExp(re,flags)}catch(ex){this.regexp=false}return this.regexp}minimatch.match=function(list,pattern,options){options=options||{};var mm=new Minimatch(pattern,options);list=list.filter(function(f){return mm.match(f)});if(mm.options.nonull&&!list.length){list.push(pattern)}return list};Minimatch.prototype.match=match;function match(f,partial){this.debug("match",f,this.pattern);if(this.comment)return false;if(this.empty)return f==="";if(f==="/"&&partial)return true;var options=this.options;if(path.sep!=="/"){f=f.split(path.sep).join("/")}f=f.split(slashSplit);this.debug(this.pattern,"split",f);var set=this.set;this.debug(this.pattern,"set",set);var filename;var i;for(i=f.length-1;i>=0;i--){filename=f[i];if(filename)break}for(i=0;i<set.length;i++){var pattern=set[i];var file=f;if(options.matchBase&&pattern.length===1){file=[filename]}var hit=this.matchOne(file,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate}}if(options.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug("matchOne",{this:this,file:file,pattern:pattern});this.debug("matchOne",file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug("matchOne loop");var p=pattern[pi];var f=file[fi];this.debug(pattern,p,f);if(p===false)return false;if(p===GLOBSTAR){this.debug("GLOBSTAR",[pattern,p,f]);var fr=fi;var pr=pi+1;if(pr===pl){this.debug("** at the end");for(;fi<fl;fi++){if(file[fi]==="."||file[fi]===".."||!options.dot&&file[fi].charAt(0)===".")return false}return true}while(fr<fl){var swallowee=file[fr];this.debug("\nglobstar while",file,fr,pattern,pr,swallowee);if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){this.debug("globstar found match!",fr,fl,swallowee);return true}else{if(swallowee==="."||swallowee===".."||!options.dot&&swallowee.charAt(0)==="."){this.debug("dot detected!",file,fr,pattern,pr);break}this.debug("globstar swallow a segment, and continue");fr++}}if(partial){this.debug("\n>>> no match, partial?",file,fr,pattern,pr);if(fr===fl)return true}return false}var hit;if(typeof p==="string"){if(options.nocase){hit=f.toLowerCase()===p.toLowerCase()}else{hit=f===p}this.debug("string match",p,f,hit)}else{hit=f.match(p);this.debug("pattern match",p,f,hit)}if(!hit)return false}if(fi===fl&&pi===pl){return true}else if(fi===fl){return partial}else if(pi===pl){var emptyFileEnd=fi===fl-1&&file[fi]==="";return emptyFileEnd}throw new Error("wtf?")};function globUnescape(s){return s.replace(/\\(.)/g,"$1")}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},{"brace-expansion":250,path:undefined}],433:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.moment=factory()})(this,function(){"use strict";var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==="[object Array]"}function isObject(input){return input!=null&&Object.prototype.toString.call(input)==="[object Object]"}function isObjectEmpty(obj){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(obj).length===0}else{var k;for(k in obj){if(obj.hasOwnProperty(k)){return false}}return true}}function isUndefined(input){return input===void 0}function isNumber(input){return typeof input==="number"||Object.prototype.toString.call(input)==="[object Number]"}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]"}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc()}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags()}return m._pf}var some;if(Array.prototype.some){some=Array.prototype.some}else{some=function(fun){var t=Object(this);var len=t.length>>>0;for(var i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true}}return false}}function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);var parsedParts=some.call(flags.parsedDateParts,function(i){return i!=null});var isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.weekdayMismatch&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid}else{return isNowValid}}return m._isValid}function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags)}else{getParsingFlags(m).userInvalidated=true}return m}var momentProperties=hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject}if(!isUndefined(from._i)){to._i=from._i}if(!isUndefined(from._f)){to._f=from._f}if(!isUndefined(from._l)){to._l=from._l}if(!isUndefined(from._strict)){to._strict=from._strict}if(!isUndefined(from._tzm)){to._tzm=from._tzm}if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC}if(!isUndefined(from._offset)){to._offset=from._offset}if(!isUndefined(from._pf)){to._pf=getParsingFlags(from)}if(!isUndefined(from._locale)){to._locale=from._locale}if(momentProperties.length>0){for(i=0;i<momentProperties.length;i++){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val}}}return to}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false}}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null}function absFloor(number){if(number<0){return Math.ceil(number)||0}else{return Math.floor(number)}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber)}return value}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function warn(msg){if(hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg)}if(firstTime){var args=[];var arg;for(var i=0;i<arguments.length;i++){arg="";if(typeof arguments[i]==="object"){arg+="\n["+i+"] ";for(var key in arguments[0]){arg+=key+": "+arguments[0][key]+", "}arg=arg.slice(0,-2)}else{arg=arguments[i]}args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+(new Error).stack);firstTime=false}return fn.apply(this,arguments)},fn)}var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg)}if(!deprecations[name]){warn(msg);deprecations[name]=true}}hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==="[object Function]"}function set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop}else{this["_"+i]=prop}}this._config=config;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop])}else if(childConfig[prop]!=null){res[prop]=childConfig[prop]}else{delete res[prop]}}}for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop])}}return res}function Locale(config){if(config!=null){this.set(config)}}var keys;if(Object.keys){keys=Object.keys}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i)}}return res}}var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar["sameElse"];return isFunction(output)?output.call(mom,now):output}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format}this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});return this._longDateFormat[key]}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d";var defaultDayOfMonthOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj){units.push({unit:u,priority:priorities[u]})}units.sort(function(a,b){return a.priority-b.priority});return units}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]()}}if(token){formatTokenFunctions[token]=func}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)}}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="",i;for(i=0;i<length;i++){output+=isFunction(array[i])?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token))}return regexes[token](config._strict,config._locale)}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token]}if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input)}}for(i=0;i<token.length;i++){tokens[token[i]]=func}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token)}}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?""+y:"+"+y});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addUnitPriority("year",1);addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input)});addParseToken("YY",function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input)});addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)});function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",true);function getIsLeapYear(){return isLeapYear(this.year())}function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this}else{return get(this,unit)}}}function get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function set$1(mom,unit,value){if(mom.isValid()&&!isNaN(value)){if(unit==="FullYear"&&isLeapYear(mom.year())&&mom.month()===1&&mom.date()===29){mom._d["set"+(mom._isUTC?"UTC":"")+unit](value,mom.month(),daysInMonth(value,mom.month()))}else{mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}}}function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]()}return this}function stringSet(units,value){if(typeof units==="object"){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units);for(var i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit])}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value)}}return this}function mod(n,x){return(n%x+x)%x}var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i}}return-1}}function daysInMonth(year,month){if(isNaN(year)||isNaN(month)){return NaN}var modMonth=mod(month,12);year+=(month-modMonth)/12;return modMonth===1?isLeapYear(year)?29:28:31-modMonth%7%2}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)});addUnitAlias("month","M");addUnitPriority("month",8);addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)});addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)});addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month}else{getParsingFlags(config).invalidMonth=input}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function localeMonths(m,format){if(!m){return isArray(this._months)?this._months:this._months["standalone"]}return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]}var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function localeMonthsShort(m,format){if(!m){return isArray(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]}function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase()}}if(strict){if(format==="MMM"){ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null}}else{if(format==="MMM"){ii=indexOf.call(this._shortMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._longMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._longMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}}}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){mom=createUTC([2e3,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom}if(typeof value==="string"){if(/^\d+$/.test(value)){value=toInt(value)}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom}}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this}else{return get(this,"Month")}}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!hasOwnProp(this,"_monthsShortRegex")){this._monthsShortRegex=defaultMonthsShortRegex}return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex}}var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!hasOwnProp(this,"_monthsRegex")){this._monthsRegex=defaultMonthsRegex}return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex}}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2e3,i]);shortPieces.push(this.monthsShort(mom,""));longPieces.push(this.months(mom,""));mixedPieces.push(this.months(mom,""));mixedPieces.push(this.monthsShort(mom,""))}shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i])}for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i])}this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<100&&y>=0&&isFinite(date.getFullYear())){date.setFullYear(y)}return date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<100&&y>=0&&isFinite(date.getUTCFullYear())){date.setUTCFullYear(y)}return date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year)}else{resYear=year;resDayOfYear=dayOfYear}return{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy)}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1}else{resYear=mom.year();resWeek=week}return{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addUnitPriority("week",5);addUnitPriority("isoWeek",5);addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addUnitPriority("day",11);addUnitPriority("weekday",11);addUnitPriority("isoWeekday",11);addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)});addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)});addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)});addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday}else{getParsingFlags(config).invalidWeekday=input}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});function parseWeekday(input,locale){if(typeof input!=="string"){return input}if(!isNaN(input)){return parseInt(input,10)}input=locale.weekdaysParse(input);if(typeof input==="number"){return input}return null}function parseIsoWeekday(input,locale){if(typeof input==="string"){return locale.weekdaysParse(input)%7||7}return isNaN(input)?null:input}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function localeWeekdays(m,format){if(!m){return isArray(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]}var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function localeWeekdaysShort(m){return m?this._weekdaysShort[m.day()]:this._weekdaysShort}var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function localeWeekdaysMin(m){return m?this._weekdaysMin[m.day()]:this._weekdaysMin}function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase()}}if(strict){if(format==="dddd"){ii=indexOf.call(this._weekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}}else{if(format==="dddd"){ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}}}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){mom=createUTC([2e3,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[i]){regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="dddd"&&this._fullWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="ddd"&&this._shortWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="dd"&&this._minWeekdaysParse[i].test(weekdayName)){return i}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i}}}function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}}function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}else{return this.day()||7}}var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!hasOwnProp(this,"_weekdaysRegex")){this._weekdaysRegex=defaultWeekdaysRegex}return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex}}var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!hasOwnProp(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=defaultWeekdaysShortRegex}return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!hasOwnProp(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=defaultWeekdaysMinRegex}return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2e3,1]).day(i);minp=this.weekdaysMin(mom,"");shortp=this.weekdaysShort(mom,"");longp=this.weekdays(mom,"");minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp)}minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<7;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i])}this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");addUnitPriority("hour",13);function matchMeridiem(isStrict,locale){return locale._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("k",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("kk",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["k","kk"],function(input,array,config){var kInput=toInt(input);array[HOUR]=kInput===24?0:kInput});addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true});addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true});addParseToken("hmmss",function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true});addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos))});addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2))});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}}var getSetHour=makeGetSet("Hours",true);var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,dayOfMonthOrdinalParse:defaultDayOfMonthOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={};var localeFamilies={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break}j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;var aliasedRequire=require;aliasedRequire("./locale/"+name);getSetGlobalLocale(oldLocale)}catch(e){}}return locales[name]}function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key)}else{data=defineLocale(key,values)}if(data){globalLocale=data}}return globalLocale._abbr}function defineLocale(name,config){if(config!==null){var parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");parentConfig=locales[name]._config}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[]}localeFamilies[config.parentLocale].push({name:name,config:config});return null}}locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config)})}getSetGlobalLocale(name);return locales[name]}else{delete locales[name];return null}}function updateLocale(name,config){if(config!=null){var locale,tmpLocale,parentConfig=baseConfig;tmpLocale=loadLocale(name);if(tmpLocale!=null){parentConfig=tmpLocale._config}config=mergeConfigs(parentConfig,config);locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;getSetGlobalLocale(name)}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale}else if(locales[name]!=null){delete locales[name]}}}return locales[name]}function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return globalLocale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)}function listLocales(){return keys(locales)}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK}if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY}getParsingFlags(m).overflow=overflow}return m}function defaults(a,b,c){if(a!=null){return a}if(b!=null){return b}return c}function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]}return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,expectedWeekday,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear!=null){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)||config._dayOfYear===0){getParsingFlags(config)._overflowDayOfYear=true}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);expectedWeekday=config._useUTC?config._d.getUTCDay():config._d.getDay();if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm)}if(config._nextDay){config._a[HOUR]=24}if(config._w&&typeof config._w.d!=="undefined"&&config._w.d!==expectedWeekday){getParsingFlags(config).weekdayMismatch=true}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true}}else{weekday=dow}}if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break}}if(dateFormat==null){config._isValid=false;return}if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}}if(timeFormat==null){config._isValid=false;return}}if(!allowTime&&timeFormat!=null){config._isValid=false;return}if(match[4]){if(tzRegex.exec(match[4])){tzFormat="Z"}else{config._isValid=false;return}}config._f=dateFormat+(timeFormat||"")+(tzFormat||"");configFromStringAndFormat(config)}else{config._isValid=false}}var rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function extractFromRFC2822Strings(yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){var result=[untruncateYear(yearStr),defaultLocaleMonthsShort.indexOf(monthStr),parseInt(dayStr,10),parseInt(hourStr,10),parseInt(minuteStr,10)];if(secondStr){result.push(parseInt(secondStr,10))}return result}function untruncateYear(yearStr){var year=parseInt(yearStr,10);if(year<=49){return 2e3+year}else if(year<=999){return 1900+year}return year}function preprocessRFC2822(s){return s.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function checkWeekday(weekdayStr,parsedInput,config){if(weekdayStr){var weekdayProvided=defaultLocaleWeekdaysShort.indexOf(weekdayStr),weekdayActual=new Date(parsedInput[0],parsedInput[1],parsedInput[2]).getDay();if(weekdayProvided!==weekdayActual){getParsingFlags(config).weekdayMismatch=true;config._isValid=false;return false}}return true}var obsOffsets={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function calculateOffset(obsOffset,militaryOffset,numOffset){if(obsOffset){return obsOffsets[obsOffset]}else if(militaryOffset){return 0}else{var hm=parseInt(numOffset,10);var m=hm%100,h=(hm-m)/100;return h*60+m}}function configFromRFC2822(config){var match=rfc2822.exec(preprocessRFC2822(config._i));if(match){var parsedArray=extractFromRFC2822Strings(match[4],match[3],match[2],match[5],match[6],match[7]);if(!checkWeekday(match[1],parsedArray,config)){return}config._a=parsedArray;config._tzm=calculateOffset(match[8],match[9],match[10]);config._d=createUTCDate.apply(null,config._a);config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);getParsingFlags(config).rfc2822=true}else{config._isValid=false}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return}configFromISO(config);if(config._isValid===false){delete config._isValid}else{return}configFromRFC2822(config);if(config._isValid===false){delete config._isValid}else{return}hooks.createFromInputFallback(config)}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return}if(config._f===hooks.RFC_2822){configFromRFC2822(config);return}config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false}else{getParsingFlags(config).unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token)}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string)}if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined}getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem)}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12}if(!isPm&&hour===12){hour=0}return hour}else{return hour}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}extend(config,bestMoment||tempConfig)}function configFromObject(config){if(config._d){return}var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)});configFromArray(config)}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,"d");res._nextDay=undefined}return res}function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||format===undefined&&input===""){return createInvalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(isMoment(input)){return new Moment(checkOverflow(input))}else if(isDate(input)){config._d=input}else if(isArray(format)){configFromStringAndArray(config)}else if(format){configFromStringAndFormat(config)}else{configFromInput(config)}if(!isValid(config)){config._d=null}return config}function configFromInput(config){var input=config._i;if(isUndefined(input)){config._d=new Date(hooks.now())}else if(isDate(input)){config._d=new Date(input.valueOf())}else if(typeof input==="string"){configFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});configFromArray(config)}else if(isObject(input)){configFromObject(config)}else if(isNumber(input)){config._d=new Date(input)}else{hooks.createFromInputFallback(config)}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(locale===true||locale===false){strict=locale;locale=undefined}if(isObject(input)&&isObjectEmpty(input)||isArray(input)&&input.length===0){input=undefined}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c)}function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other}else{return createInvalid()}});var prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other}else{return createInvalid()}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return createLocal()}res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i]}}return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}var now=function(){return Date.now?Date.now():+new Date};var ordering=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(m){for(var key in m){if(!(indexOf.call(ordering,key)!==-1&&(m[key]==null||!isNaN(m[key])))){return false}}var unitHasDecimal=false;for(var i=0;i<ordering.length;++i){if(m[ordering[i]]){if(unitHasDecimal){return false}if(parseFloat(m[ordering[i]])!==toInt(m[ordering[i]])){unitHasDecimal=true}}}return true}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._isValid=isDurationValid(normalizedInput);this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*1e3*60*60;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=getLocale();this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){if(number<0){return Math.round(-1*number)*-1}else{return Math.round(number)}}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign="+";if(offset<0){offset=-offset;sign="-"}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||"").match(matcher);if(matches===null){return null}var chunk=matches[matches.length-1]||[];var parts=(chunk+"").match(chunkOffset)||["-",0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==="+"?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res}else{return createLocal(input).local()}}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15}hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime,keepMinutes){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN}if(input!=null){if(typeof input==="string"){input=offsetFromString(matchShortOffset,input);if(input===null){return this}}else if(Math.abs(input)<16&&!keepMinutes){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this)}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?offset:getDateOffset(this)}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input}this.utcOffset(input,keepLocalTime);return this}else{return-this.utcOffset()}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m")}}return this}function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone)}else{this.utcOffset(0,true)}}return this}function hasAlignedHourOffset(input){if(!this.isValid()){return false}input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted}var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:false}function isUtcOffset(){return this.isValid()?this._isUTC:false}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false}var aspNetRegex=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var isoRegex=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(isNumber(input)){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1e3))*sign}}else if(!!(match=isoRegex.exec(input))){sign=match[1]==="-"?-1:match[1]==="+"?1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}}else if(duration==null){duration={}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}return ret}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0}}other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");tmp=val;val=period;period=tmp}val=typeof val==="string"?+val:val;dur=createDuration(val,period);addSubtract(this,dur,direction);return this}}function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return}updateOffset=updateOffset==null?true:updateOffset;if(months){setMonth(mom,get(mom,"Month")+months*isAdding)}if(days){set$1(mom,"Date",get(mom,"Date")+days*isAdding)}if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding)}if(updateOffset){hooks.updateOffset(mom,days||months)}}var add=createAdder(1,"add");var subtract=createAdder(-1,"subtract");function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",true);return diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse"}function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=hooks.calendarFormat(this,sod)||"sameElse";var output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(!isUndefined(units)?units:"millisecond");if(units==="millisecond"){return this.valueOf()>localInput.valueOf()}else{return localInput.valueOf()<this.clone().startOf(units).valueOf()}}function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(!isUndefined(units)?units:"millisecond");if(units==="millisecond"){return this.valueOf()<localInput.valueOf()}else{return this.clone().endOf(units).valueOf()<localInput.valueOf()}}function isBetween(from,to,units,inclusivity){inclusivity=inclusivity||"()";return(inclusivity[0]==="("?this.isAfter(from,units):!this.isBefore(from,units))&&(inclusivity[1]===")"?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(units||"millisecond");if(units==="millisecond"){return this.valueOf()===localInput.valueOf()}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf()}}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;if(!this.isValid()){return NaN}that=cloneWithOffset(input,this);if(!that.isValid()){return NaN}zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);switch(units){case"year":output=monthDiff(this,that)/12;break;case"month":output=monthDiff(this,that);break;case"quarter":output=monthDiff(this,that)/3;break;case"second":output=(this-that)/1e3;break;case"minute":output=(this-that)/6e4;break;case"hour":output=(this-that)/36e5;break;case"day":output=(this-that-zoneDelta)/864e5;break;case"week":output=(this-that-zoneDelta)/6048e5;break;default:output=this-that}return asFloat?output:absFloor(output)}function monthDiff(a,b){var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2)}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor)}return-(wholeMonthDiff+adjust)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(keepOffset){if(!this.isValid()){return null}var utc=keepOffset!==true;var m=utc?this.clone().utc():this;if(m.year()<0||m.year()>9999){return formatMoment(m,utc?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(isFunction(Date.prototype.toISOString)){if(utc){return this.toDate().toISOString()}else{return new Date(this._d.valueOf()).toISOString().replace("Z",formatMoment(m,"Z"))}}return formatMoment(m,utc?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var func="moment";var zone="";if(!this.isLocal()){func=this.utcOffset()===0?"moment.utc":"moment.parseZone";zone="Z"}var prefix="["+func+'("]';var year=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var datetime="-MM-DD[T]HH:mm:ss.SSS";var suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix)}function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat}var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix)}function to(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix)}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}});function localeData(){return this._locale}function startOf(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}if(units==="isoWeek"){this.isoWeekday(1)}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==="millisecond"){return this}if(units==="date"){units="day"}return this.startOf(units).add(1,units==="isoWeek"?"week":units).subtract(1,"ms")}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addUnitPriority("weekYear",1);addUnitPriority("isoWeekYear",1);addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input)});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget}return setWeekAll.call(this,input,week,weekday,dow,doy)}}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this}addFormatToken("Q",0,"Qo","quarter");addUnitAlias("quarter","Q");addUnitPriority("quarter",7);addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addUnitPriority("date",9);addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._dayOfMonthOrdinalParse||locale._ordinalParse:locale._dayOfMonthOrdinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addUnitPriority("dayOfYear",4);addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")}addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addUnitPriority("minute",14);addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addUnitPriority("second",15);addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addUnitAlias("millisecond","ms");addUnitPriority("millisecond",16);addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S"){addRegexToken(token,matchUnsigned)}function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1e3)}for(token="S";token.length<=9;token+="S"){addParseToken(token,parseMs)}var getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$2;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale();var utc=createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined}format=format||"";if(index!=null){return get$1(format,index,field,"month")}var i;var out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,"month")}return out}function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==="boolean"){if(isNumber(format)){index=format;format=undefined}format=format||""}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined}format=format||""}var locale=getLocale(),shift=localeSorted?locale._week.dow:0;if(index!=null){return get$1(format,(index+shift)%7,field,"day")}var i;var out=[];for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,"day")}return out}function listMonths(format,index){return listMonthsImpl(format,index,"months")}function listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}getSetGlobalLocale("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this}function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble()}function add$1(input,value){return addSubtract$1(this,input,value,1)}function subtract$1(input,value){return addSubtract$1(this,input,value,-1)}function absCeil(number){if(number<0){return Math.floor(number)}else{return Math.ceil(number)}}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!(milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0)){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0}data.milliseconds=milliseconds%1e3;seconds=absFloor(milliseconds/1e3);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this}function daysToMonths(days){return days*4800/146097}function monthsToDays(months){return months*146097/4800}function as(units){if(!this.isValid()){return NaN}var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==="month"?months:months/12}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return days*24+milliseconds/36e5;case"minute":return days*1440+milliseconds/6e4;case"second":return days*86400+milliseconds/1e3;case"millisecond":return Math.floor(days*864e5)+milliseconds;default:throw new Error("Unknown unit "+units)}}}function valueOf$1(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms");var asSeconds=makeAs("s");var asMinutes=makeAs("m");var asHours=makeAs("h");var asDays=makeAs("d");var asWeeks=makeAs("w");var asMonths=makeAs("M");var asYears=makeAs("y");function clone$1(){return createDuration(this)}function get$2(units){units=normalizeUnits(units);return this.isValid()?this[units+"s"]():NaN}function makeGetter(name){return function(){return this.isValid()?this._data[name]:NaN}}var milliseconds=makeGetter("milliseconds");var seconds=makeGetter("seconds");var minutes=makeGetter("minutes");var hours=makeGetter("hours");var days=makeGetter("days");var months=makeGetter("months");var years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round;var thresholds={ss:44,s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs();var seconds=round(duration.as("s"));var minutes=round(duration.as("m"));var hours=round(duration.as("h"));var days=round(duration.as("d"));var months=round(duration.as("M"));var years=round(duration.as("y"));var a=seconds<=thresholds.ss&&["s",seconds]||seconds<thresholds.s&&["ss",seconds]||minutes<=1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours<=1&&["h"]||hours<thresholds.h&&["hh",hours]||days<=1&&["d"]||days<thresholds.d&&["dd",days]||months<=1&&["M"]||months<thresholds.M&&["MM",months]||years<=1&&["y"]||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a)}function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round}if(typeof roundingFunction==="function"){round=roundingFunction;return true}return false}function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false}if(limit===undefined){return thresholds[threshold]}thresholds[threshold]=limit;if(threshold==="s"){thresholds.ss=limit-1}return true}function humanize(withSuffix){if(!this.isValid()){return this.localeData().invalidDate()}var locale=this.localeData();var output=relativeTime$1(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output)}return locale.postformat(output)}var abs$1=Math.abs;function sign(x){return(x>0)-(x<0)||+x}function toISOString$1(){if(!this.isValid()){return this.localeData().invalidDate()}var seconds=abs$1(this._milliseconds)/1e3;var days=abs$1(this._days);var months=abs$1(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds?seconds.toFixed(3).replace(/\.?0+$/,""):"";var total=this.asSeconds();if(!total){return"P0D"}var totalSign=total<0?"-":"";var ymSign=sign(this._months)!==sign(total)?"-":"";var daysSign=sign(this._days)!==sign(total)?"-":"";var hmsSign=sign(this._milliseconds)!==sign(total)?"-":"";return totalSign+"P"+(Y?ymSign+Y+"Y":"")+(M?ymSign+M+"M":"")+(D?daysSign+D+"D":"")+(h||m||s?"T":"")+(h?hmsSign+h+"H":"")+(m?hmsSign+m+"M":"")+(s?hmsSign+s+"S":"")}var proto$2=Duration.prototype;proto$2.isValid=isValid$1;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.clone=clone$1;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input,10)*1e3)});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))});hooks.version="2.20.1";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return hooks})},{}],434:[function(require,module,exports){"use strict";module.exports=morgan;module.exports.compile=compile;module.exports.format=format;module.exports.token=token;var auth=require("basic-auth");var debug=require("debug")("morgan");var deprecate=require("depd")("morgan");var onFinished=require("on-finished");var onHeaders=require("on-headers");var CLF_MONTH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var DEFAULT_BUFFER_DURATION=1e3;function morgan(format,options){var fmt=format;var opts=options||{};if(format&&typeof format==="object"){opts=format;fmt=opts.format||"default";deprecate("morgan(options): use morgan("+(typeof fmt==="string"?JSON.stringify(fmt):"format")+", options) instead")}if(fmt===undefined){deprecate("undefined format: specify a format")}var immediate=opts.immediate;var skip=opts.skip||false;var formatLine=typeof fmt!=="function"?getFormatFunction(fmt):fmt;var buffer=opts.buffer;var stream=opts.stream||process.stdout;if(buffer){deprecate("buffer option");var interval=typeof buffer!=="number"?DEFAULT_BUFFER_DURATION:buffer;stream=createBufferStream(stream,interval)}return function logger(req,res,next){req._startAt=undefined;req._startTime=undefined;req._remoteAddress=getip(req);res._startAt=undefined;res._startTime=undefined;recordStartTime.call(req);function logRequest(){if(skip!==false&&skip(req,res)){debug("skip request");return}var line=formatLine(morgan,req,res);if(line==null){debug("skip line");return}debug("log request");stream.write(line+"\n")}if(immediate){logRequest()}else{onHeaders(res,recordStartTime);onFinished(res,logRequest)}next()}}morgan.format("combined",':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"');morgan.format("common",':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length]');morgan.format("default",':remote-addr - :remote-user [:date] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent"');deprecate.property(morgan,"default","default format: use combined format");morgan.format("short",":remote-addr :remote-user :method :url HTTP/:http-version :status :res[content-length] - :response-time ms");morgan.format("tiny",":method :url :status :res[content-length] - :response-time ms");morgan.format("dev",function developmentFormatLine(tokens,req,res){var status=headersSent(res)?res.statusCode:undefined;var color=status>=500?31:status>=400?33:status>=300?36:status>=200?32:0;var fn=developmentFormatLine[color];if(!fn){fn=developmentFormatLine[color]=compile("[0m:method :url ["+color+"m:status [0m:response-time ms - :res[content-length][0m")}return fn(tokens,req,res)});morgan.token("url",function getUrlToken(req){return req.originalUrl||req.url});morgan.token("method",function getMethodToken(req){return req.method});morgan.token("response-time",function getResponseTimeToken(req,res,digits){if(!req._startAt||!res._startAt){return}var ms=(res._startAt[0]-req._startAt[0])*1e3+(res._startAt[1]-req._startAt[1])*1e-6;return ms.toFixed(digits===undefined?3:digits)});morgan.token("date",function getDateToken(req,res,format){var date=new Date;switch(format||"web"){case"clf":return clfdate(date);case"iso":return date.toISOString();case"web":return date.toUTCString()}});morgan.token("status",function getStatusToken(req,res){return headersSent(res)?String(res.statusCode):undefined});morgan.token("referrer",function getReferrerToken(req){return req.headers["referer"]||req.headers["referrer"]});morgan.token("remote-addr",getip);morgan.token("remote-user",function getRemoteUserToken(req){var credentials=auth(req);return credentials?credentials.name:undefined});morgan.token("http-version",function getHttpVersionToken(req){return req.httpVersionMajor+"."+req.httpVersionMinor});morgan.token("user-agent",function getUserAgentToken(req){return req.headers["user-agent"]});morgan.token("req",function getRequestToken(req,res,field){var header=req.headers[field.toLowerCase()];return Array.isArray(header)?header.join(", "):header});morgan.token("res",function getResponseHeader(req,res,field){if(!headersSent(res)){return undefined}var header=res.getHeader(field);return Array.isArray(header)?header.join(", "):header});function clfdate(dateTime){var date=dateTime.getUTCDate();var hour=dateTime.getUTCHours();var mins=dateTime.getUTCMinutes();var secs=dateTime.getUTCSeconds();var year=dateTime.getUTCFullYear();var month=CLF_MONTH[dateTime.getUTCMonth()];return pad2(date)+"/"+month+"/"+year+":"+pad2(hour)+":"+pad2(mins)+":"+pad2(secs)+" +0000"}function compile(format){if(typeof format!=="string"){throw new TypeError("argument format must be a string")}var fmt=format.replace(/"/g,'\\"');var js='  "use strict"\n  return "'+fmt.replace(/:([-\w]{2,})(?:\[([^\]]+)\])?/g,function(_,name,arg){var tokenArguments="req, res";var tokenFunction="tokens["+String(JSON.stringify(name))+"]";if(arg!==undefined){tokenArguments+=", "+String(JSON.stringify(arg))}return'" +\n    ('+tokenFunction+"("+tokenArguments+') || "-") + "'})+'"';return new Function("tokens, req, res",js)}function createBufferStream(stream,interval){var buf=[];var timer=null;function flush(){timer=null;stream.write(buf.join(""));buf.length=0}function write(str){if(timer===null){timer=setTimeout(flush,interval)}buf.push(str)}return{write:write}}function format(name,fmt){morgan[name]=fmt;return this}function getFormatFunction(name){var fmt=morgan[name]||name||morgan.default;return typeof fmt!=="function"?compile(fmt):fmt}function getip(req){return req.ip||req._remoteAddress||req.connection&&req.connection.remoteAddress||undefined}function headersSent(res){return typeof res.headersSent!=="boolean"?Boolean(res._header):res.headersSent}function pad2(num){var str=String(num);return(str.length===1?"0":"")+str}function recordStartTime(){this._startAt=process.hrtime();this._startTime=new Date}function token(name,fn){morgan[name]=fn;return this}},{"basic-auth":200,debug:437,depd:270,"on-finished":447,"on-headers":448}],435:[function(require,module,exports){arguments[4][245][0].apply(exports,arguments)},{"./debug":436,dup:245}],436:[function(require,module,exports){arguments[4][246][0].apply(exports,arguments)},{dup:246,ms:439}],437:[function(require,module,exports){arguments[4][247][0].apply(exports,arguments)},{"./browser.js":435,"./node.js":438,dup:247}],438:[function(require,module,exports){arguments[4][248][0].apply(exports,arguments)},{"./debug":436,dup:248,fs:undefined,net:undefined,tty:undefined,util:undefined}],439:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],440:[function(require,module,exports){"use strict";var modules=Object.create(null);module.exports=Negotiator;module.exports.Negotiator=Negotiator;function Negotiator(request){if(!(this instanceof Negotiator)){return new Negotiator(request)}this.request=request}Negotiator.prototype.charset=function charset(available){var set=this.charsets(available);return set&&set[0]};Negotiator.prototype.charsets=function charsets(available){var preferredCharsets=loadModule("charset").preferredCharsets;return preferredCharsets(this.request.headers["accept-charset"],available)};Negotiator.prototype.encoding=function encoding(available){var set=this.encodings(available);return set&&set[0]};Negotiator.prototype.encodings=function encodings(available){var preferredEncodings=loadModule("encoding").preferredEncodings;return preferredEncodings(this.request.headers["accept-encoding"],available)};Negotiator.prototype.language=function language(available){var set=this.languages(available);return set&&set[0]};Negotiator.prototype.languages=function languages(available){var preferredLanguages=loadModule("language").preferredLanguages;return preferredLanguages(this.request.headers["accept-language"],available)};Negotiator.prototype.mediaType=function mediaType(available){var set=this.mediaTypes(available);return set&&set[0]};Negotiator.prototype.mediaTypes=function mediaTypes(available){var preferredMediaTypes=loadModule("mediaType").preferredMediaTypes;return preferredMediaTypes(this.request.headers.accept,available)};Negotiator.prototype.preferredCharset=Negotiator.prototype.charset;Negotiator.prototype.preferredCharsets=Negotiator.prototype.charsets;Negotiator.prototype.preferredEncoding=Negotiator.prototype.encoding;Negotiator.prototype.preferredEncodings=Negotiator.prototype.encodings;Negotiator.prototype.preferredLanguage=Negotiator.prototype.language;Negotiator.prototype.preferredLanguages=Negotiator.prototype.languages;Negotiator.prototype.preferredMediaType=Negotiator.prototype.mediaType;Negotiator.prototype.preferredMediaTypes=Negotiator.prototype.mediaTypes;function loadModule(moduleName){var module=modules[moduleName];if(module!==undefined){return module}switch(moduleName){case"charset":module=require("./lib/charset");break;case"encoding":module=require("./lib/encoding");break;case"language":module=require("./lib/language");break;case"mediaType":module=require("./lib/mediaType");break;default:throw new Error("Cannot find module '"+moduleName+"'")}modules[moduleName]=module;return module}},{"./lib/charset":441,"./lib/encoding":442,"./lib/language":443,"./lib/mediaType":444}],441:[function(require,module,exports){"use strict";module.exports=preferredCharsets;module.exports.preferredCharsets=preferredCharsets;var simpleCharsetRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function parseAcceptCharset(accept){var accepts=accept.split(",");for(var i=0,j=0;i<accepts.length;i++){var charset=parseCharset(accepts[i].trim(),i);if(charset){accepts[j++]=charset}}accepts.length=j;return accepts}function parseCharset(str,i){var match=simpleCharsetRegExp.exec(str);if(!match)return null;var charset=match[1];var q=1;if(match[2]){var params=match[2].split(";");for(var i=0;i<params.length;i++){var p=params[i].trim().split("=");if(p[0]==="q"){q=parseFloat(p[1]);break}}}return{charset:charset,q:q,i:i}}function getCharsetPriority(charset,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(charset,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(charset,spec,index){var s=0;if(spec.charset.toLowerCase()===charset.toLowerCase()){s|=1}else if(spec.charset!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredCharsets(accept,provided){var accepts=parseAcceptCharset(accept===undefined?"*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(getFullCharset)}var priorities=provided.map(function getPriority(type,index){return getCharsetPriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getCharset(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullCharset(spec){return spec.charset}function isQuality(spec){return spec.q>0}},{}],442:[function(require,module,exports){"use strict";module.exports=preferredEncodings;module.exports.preferredEncodings=preferredEncodings;var simpleEncodingRegExp=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function parseAcceptEncoding(accept){var accepts=accept.split(",");var hasIdentity=false;var minQuality=1;for(var i=0,j=0;i<accepts.length;i++){var encoding=parseEncoding(accepts[i].trim(),i);if(encoding){accepts[j++]=encoding;hasIdentity=hasIdentity||specify("identity",encoding);minQuality=Math.min(minQuality,encoding.q||1)}}if(!hasIdentity){accepts[j++]={encoding:"identity",q:minQuality,i:i}}accepts.length=j;return accepts}function parseEncoding(str,i){var match=simpleEncodingRegExp.exec(str);if(!match)return null;var encoding=match[1];var q=1;if(match[2]){var params=match[2].split(";");for(var i=0;i<params.length;i++){var p=params[i].trim().split("=");if(p[0]==="q"){q=parseFloat(p[1]);break}}}return{encoding:encoding,q:q,i:i}}function getEncodingPriority(encoding,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(encoding,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(encoding,spec,index){var s=0;if(spec.encoding.toLowerCase()===encoding.toLowerCase()){s|=1}else if(spec.encoding!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredEncodings(accept,provided){var accepts=parseAcceptEncoding(accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(getFullEncoding)}var priorities=provided.map(function getPriority(type,index){return getEncodingPriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getEncoding(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullEncoding(spec){return spec.encoding}function isQuality(spec){return spec.q>0}},{}],443:[function(require,module,exports){"use strict";module.exports=preferredLanguages;module.exports.preferredLanguages=preferredLanguages;var simpleLanguageRegExp=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function parseAcceptLanguage(accept){var accepts=accept.split(",");for(var i=0,j=0;i<accepts.length;i++){var langauge=parseLanguage(accepts[i].trim(),i);if(langauge){accepts[j++]=langauge}}accepts.length=j;return accepts}function parseLanguage(str,i){var match=simpleLanguageRegExp.exec(str);if(!match)return null;var prefix=match[1],suffix=match[2],full=prefix;if(suffix)full+="-"+suffix;var q=1;if(match[3]){var params=match[3].split(";");for(var i=0;i<params.length;i++){var p=params[i].split("=");if(p[0]==="q")q=parseFloat(p[1])}}return{prefix:prefix,suffix:suffix,q:q,i:i,full:full}}function getLanguagePriority(language,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(language,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(language,spec,index){var p=parseLanguage(language);if(!p)return null;var s=0;if(spec.full.toLowerCase()===p.full.toLowerCase()){s|=4}else if(spec.prefix.toLowerCase()===p.full.toLowerCase()){s|=2}else if(spec.full.toLowerCase()===p.prefix.toLowerCase()){s|=1}else if(spec.full!=="*"){return null}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredLanguages(accept,provided){var accepts=parseAcceptLanguage(accept===undefined?"*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(getFullLanguage)}var priorities=provided.map(function getPriority(type,index){return getLanguagePriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getLanguage(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullLanguage(spec){return spec.full}function isQuality(spec){return spec.q>0}},{}],444:[function(require,module,exports){"use strict";module.exports=preferredMediaTypes;module.exports.preferredMediaTypes=preferredMediaTypes;var simpleMediaTypeRegExp=/^\s*([^\s\/;]+)\/([^;\s]+)\s*(?:;(.*))?$/;function parseAccept(accept){var accepts=splitMediaTypes(accept);for(var i=0,j=0;i<accepts.length;i++){var mediaType=parseMediaType(accepts[i].trim(),i);if(mediaType){accepts[j++]=mediaType}}accepts.length=j;return accepts}function parseMediaType(str,i){var match=simpleMediaTypeRegExp.exec(str);if(!match)return null;var params=Object.create(null);var q=1;var subtype=match[2];var type=match[1];if(match[3]){var kvps=splitParameters(match[3]).map(splitKeyValuePair);for(var j=0;j<kvps.length;j++){var pair=kvps[j];var key=pair[0].toLowerCase();var val=pair[1];var value=val&&val[0]==='"'&&val[val.length-1]==='"'?val.substr(1,val.length-2):val;if(key==="q"){q=parseFloat(value);break}params[key]=value}}return{type:type,subtype:subtype,params:params,q:q,i:i}}function getMediaTypePriority(type,accepted,index){var priority={o:-1,q:0,s:0};for(var i=0;i<accepted.length;i++){var spec=specify(type,accepted[i],index);if(spec&&(priority.s-spec.s||priority.q-spec.q||priority.o-spec.o)<0){priority=spec}}return priority}function specify(type,spec,index){var p=parseMediaType(type);var s=0;if(!p){return null}if(spec.type.toLowerCase()==p.type.toLowerCase()){s|=4}else if(spec.type!="*"){return null}if(spec.subtype.toLowerCase()==p.subtype.toLowerCase()){s|=2}else if(spec.subtype!="*"){return null}var keys=Object.keys(spec.params);if(keys.length>0){if(keys.every(function(k){return spec.params[k]=="*"||(spec.params[k]||"").toLowerCase()==(p.params[k]||"").toLowerCase()})){s|=1}else{return null}}return{i:index,o:spec.i,q:spec.q,s:s}}function preferredMediaTypes(accept,provided){var accepts=parseAccept(accept===undefined?"*/*":accept||"");if(!provided){return accepts.filter(isQuality).sort(compareSpecs).map(getFullType)}var priorities=provided.map(function getPriority(type,index){return getMediaTypePriority(type,accepts,index)});return priorities.filter(isQuality).sort(compareSpecs).map(function getType(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullType(spec){return spec.type+"/"+spec.subtype}function isQuality(spec){return spec.q>0}function quoteCount(string){var count=0;var index=0;while((index=string.indexOf('"',index))!==-1){count++;index++}return count}function splitKeyValuePair(str){var index=str.indexOf("=");var key;var val;if(index===-1){key=str}else{key=str.substr(0,index);val=str.substr(index+1)}return[key,val]}function splitMediaTypes(accept){var accepts=accept.split(",");for(var i=1,j=0;i<accepts.length;i++){if(quoteCount(accepts[j])%2==0){accepts[++j]=accepts[i]}else{accepts[j]+=","+accepts[i]}}accepts.length=j+1;return accepts}function splitParameters(str){var parameters=str.split(";");for(var i=1,j=0;i<parameters.length;i++){if(quoteCount(parameters[j])%2==0){parameters[++j]=parameters[i]}else{parameters[j]+=";"+parameters[i]}}parameters.length=j+1;for(var i=0;i<parameters.length;i++){parameters[i]=parameters[i].trim()}return parameters}},{}],445:[function(require,module,exports){var util=require("util"),fs=require("fs"),path=require("path"),events=require("events"),zlib=require("zlib"),stream=require("stream");var consts={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSIGFIRST:80,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,MAXFILECOMMENT:65535,ENDL64HDR:20,ENDL64SIG:117853008,ENDL64SIGFIRST:80,ENDL64OFS:8,END64HDR:56,END64SIG:101075792,END64SIGFIRST:80,END64SUB:24,END64TOT:32,END64SIZ:40,END64OFF:48,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FLG_ENTRY_ENC:1,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535};var StreamZip=function(config){var fd,fileSize,chunkSize,ready=false,that=this,op,centralDirectory,entries=config.storeEntries!==false?{}:null,fileName=config.file;open();function open(){fs.open(fileName,"r",function(err,f){if(err)return that.emit("error",err);fd=f;fs.fstat(fd,function(err,stat){if(err)return that.emit("error",err);fileSize=stat.size;chunkSize=config.chunkSize||Math.round(fileSize/1e3);chunkSize=Math.max(Math.min(chunkSize,Math.min(128*1024,fileSize)),Math.min(1024,fileSize));readCentralDirectory()})})}function readUntilFoundCallback(err,bytesRead){if(err||!bytesRead)return that.emit("error",err||"Archive read error");var buffer=op.win.buffer,pos=op.lastPos,bufferPosition=pos-op.win.position,minPos=op.minPos;while(--pos>=minPos&&--bufferPosition>=0){if(buffer.length-bufferPosition>=4&&buffer[bufferPosition]===op.firstByte){if(buffer.readUInt32LE(bufferPosition)===op.sig){op.lastBufferPosition=bufferPosition;op.lastBytesRead=bytesRead;op.complete();return}}}if(pos===minPos){return that.emit("error","Bad archive")}op.lastPos=pos+1;op.chunkSize*=2;if(pos<=minPos)return that.emit("error","Bad archive");var expandLength=Math.min(op.chunkSize,pos-minPos);op.win.expandLeft(expandLength,readUntilFoundCallback)}function readCentralDirectory(){var totalReadLength=Math.min(consts.ENDHDR+consts.MAXFILECOMMENT,fileSize);op={win:new FileWindowBuffer(fd),totalReadLength:totalReadLength,minPos:fileSize-totalReadLength,lastPos:fileSize,chunkSize:Math.min(1024,chunkSize),firstByte:consts.ENDSIGFIRST,sig:consts.ENDSIG,complete:readCentralDirectoryComplete};op.win.read(fileSize-op.chunkSize,op.chunkSize,readUntilFoundCallback)}function readCentralDirectoryComplete(){var buffer=op.win.buffer;var pos=op.lastBufferPosition;try{centralDirectory=new CentralDirectoryHeader;centralDirectory.read(buffer.slice(pos,pos+consts.ENDHDR));centralDirectory.headerOffset=op.win.position+pos;if(centralDirectory.commentLength)that.comment=buffer.slice(pos+consts.ENDHDR,pos+consts.ENDHDR+centralDirectory.commentLength).toString();else that.comment=null;that.entriesCount=centralDirectory.volumeEntries;that.centralDirectory=centralDirectory;if(centralDirectory.volumeEntries===consts.EF_ZIP64_OR_16&&centralDirectory.totalEntries===consts.EF_ZIP64_OR_16||centralDirectory.size===consts.EF_ZIP64_OR_32||centralDirectory.offset===consts.EF_ZIP64_OR_32){readZip64CentralDirectoryLocator()}else{op={};readEntries()}}catch(err){that.emit("error",err)}}function readZip64CentralDirectoryLocator(){var length=consts.ENDL64HDR;if(op.lastBufferPosition>length){op.lastBufferPosition-=length;readZip64CentralDirectoryLocatorComplete()}else{op={win:op.win,totalReadLength:length,minPos:op.win.position-length,lastPos:op.win.position,chunkSize:op.chunkSize,firstByte:consts.ENDL64SIGFIRST,sig:consts.ENDL64SIG,complete:readZip64CentralDirectoryLocatorComplete};op.win.read(op.lastPos-op.chunkSize,op.chunkSize,readUntilFoundCallback)}}function readZip64CentralDirectoryLocatorComplete(){var buffer=op.win.buffer;var locHeader=new CentralDirectoryLoc64Header;locHeader.read(buffer.slice(op.lastBufferPosition,op.lastBufferPosition+consts.ENDL64HDR));var readLength=fileSize-locHeader.headerOffset;op={win:op.win,totalReadLength:readLength,minPos:locHeader.headerOffset,lastPos:op.lastPos,chunkSize:op.chunkSize,firstByte:consts.END64SIGFIRST,sig:consts.END64SIG,complete:readZip64CentralDirectoryComplete};op.win.read(fileSize-op.chunkSize,op.chunkSize,readUntilFoundCallback)}function readZip64CentralDirectoryComplete(){var buffer=op.win.buffer;var zip64cd=new CentralDirectoryZip64Header;zip64cd.read(buffer.slice(op.lastBufferPosition,op.lastBufferPosition+consts.END64HDR));that.centralDirectory.volumeEntries=zip64cd.volumeEntries;that.centralDirectory.totalEntries=zip64cd.totalEntries;that.centralDirectory.size=zip64cd.size;that.centralDirectory.offset=zip64cd.offset;that.entriesCount=zip64cd.volumeEntries;op={};readEntries()}function readEntries(){op={win:new FileWindowBuffer(fd),pos:centralDirectory.offset,chunkSize:chunkSize,entriesLeft:centralDirectory.volumeEntries};op.win.read(op.pos,Math.min(chunkSize,fileSize-op.pos),readEntriesCallback)}function readEntriesCallback(err,bytesRead){if(err||!bytesRead)return that.emit("error",err||"Entries read error");var buffer=op.win.buffer,bufferPos=op.pos-op.win.position,bufferLength=buffer.length,entry=op.entry;try{while(op.entriesLeft>0){if(!entry){entry=new ZipEntry;entry.readHeader(buffer,bufferPos);entry.headerOffset=op.win.position+bufferPos;op.entry=entry;op.pos+=consts.CENHDR;bufferPos+=consts.CENHDR}var entryHeaderSize=entry.fnameLen+entry.extraLen+entry.comLen;var advanceBytes=entryHeaderSize+(op.entriesLeft>1?consts.CENHDR:0);if(bufferLength-bufferPos<advanceBytes){op.win.moveRight(chunkSize,readEntriesCallback,bufferPos);op.move=true;return}entry.read(buffer,bufferPos);if(!config.skipEntryNameValidation){entry.validateName()}if(entries)entries[entry.name]=entry;that.emit("entry",entry);op.entry=entry=null;op.entriesLeft--;op.pos+=entryHeaderSize;bufferPos+=entryHeaderSize}that.emit("ready")}catch(err){that.emit("error",err)}}function checkEntriesExist(){if(!entries)throw new Error("storeEntries disabled")}Object.defineProperty(this,"ready",{get:function(){return ready}});this.entry=function(name){checkEntriesExist();return entries[name]};this.entries=function(){checkEntriesExist();return entries};this.stream=function(entry,callback){return openEntry(entry,function(err,entry){if(err)return callback(err);var offset=dataOffset(entry);var entryStream=new EntryDataReaderStream(fd,offset,entry.compressedSize);if(entry.method===consts.STORED){}else if(entry.method===consts.DEFLATED||entry.method===consts.ENHANCED_DEFLATED){entryStream=entryStream.pipe(zlib.createInflateRaw())}else{return callback("Unknown compression method: "+entry.method)}if(canVerifyCrc(entry))entryStream=entryStream.pipe(new EntryVerifyStream(entryStream,entry.crc,entry.size));callback(null,entryStream)},false)};this.entryDataSync=function(entry){var err=null;openEntry(entry,function(e,en){err=e;entry=en},true);if(err)throw err;var data=new Buffer(entry.compressedSize),bytesRead;new FsRead(fd,data,0,entry.compressedSize,dataOffset(entry),function(e,br){err=e;bytesRead=br}).read(true);if(err)throw err;if(entry.method===consts.STORED){}else if(entry.method===consts.DEFLATED||entry.method===consts.ENHANCED_DEFLATED){data=zlib.inflateRawSync(data)}else{throw new Error("Unknown compression method: "+entry.method)}if(data.length!==entry.size)throw new Error("Invalid size");if(canVerifyCrc(entry)){var verify=new CrcVerify(entry.crc,entry.size);verify.data(data)}return data};function openEntry(entry,callback,sync){if(typeof entry==="string"){checkEntriesExist();entry=entries[entry];if(!entry)return callback("Entry not found")}if(!entry.isFile)return callback("Entry is not file");if(!fd)return callback("Archive closed");var buffer=new Buffer(consts.LOCHDR);new FsRead(fd,buffer,0,buffer.length,entry.offset,function(err){if(err)return callback(err);var readEx;try{entry.readDataHeader(buffer);if(entry.encrypted){readEx="Entry encrypted"}}catch(ex){readEx=ex}callback(readEx,entry)}).read(sync)}function dataOffset(entry){return entry.offset+consts.LOCHDR+entry.fnameLen+entry.extraLen}function canVerifyCrc(entry){return(entry.flags&8)!=8}function extract(entry,outPath,callback){that.stream(entry,function(err,stm){if(err){callback(err)}else{var fsStm,errThrown;stm.on("error",function(err){errThrown=err;if(fsStm){stm.unpipe(fsStm);fsStm.close(function(){callback(err)})}});fs.open(outPath,"w",function(err,fdFile){if(err)return callback(err||errThrown);if(errThrown){fs.close(fd,function(){callback(errThrown)});return}fsStm=fs.createWriteStream(outPath,{fd:fdFile});fsStm.on("finish",function(){that.emit("extract",entry,outPath);if(!errThrown)callback()});stm.pipe(fsStm)})}})}function createDirectories(baseDir,dirs,callback){if(!dirs.length)return callback();var dir=dirs.shift();dir=path.join(baseDir,path.join.apply(path,dir));fs.mkdir(dir,function(err){if(err&&err.code!=="EEXIST")return callback(err);createDirectories(baseDir,dirs,callback)})}function extractFiles(baseDir,baseRelPath,files,callback,extractedCount){if(!files.length)return callback(null,extractedCount);var file=files.shift();var targetPath=path.join(baseDir,file.name.replace(baseRelPath,""));extract(file,targetPath,function(err){if(err)return callback(err,extractedCount);extractFiles(baseDir,baseRelPath,files,callback,extractedCount+1)})}this.extract=function(entry,outPath,callback){var entryName=entry||"";if(typeof entry==="string"){entry=this.entry(entry);if(entry){entryName=entry.name}else{if(entryName.length&&entryName[entryName.length-1]!=="/")entryName+="/"}}if(!entry||entry.isDirectory){var files=[],dirs=[],allDirs={};for(var e in entries){if(Object.prototype.hasOwnProperty.call(entries,e)&&e.lastIndexOf(entryName,0)===0){var relPath=e.replace(entryName,"");var childEntry=entries[e];if(childEntry.isFile){files.push(childEntry);relPath=path.dirname(relPath)}if(relPath&&!allDirs[relPath]&&relPath!=="."){allDirs[relPath]=true;var parts=relPath.split("/").filter(function(f){return f});if(parts.length)dirs.push(parts);while(parts.length>1){parts=parts.slice(0,parts.length-1);var partsPath=parts.join("/");if(allDirs[partsPath]||partsPath==="."){break}allDirs[partsPath]=true;dirs.push(parts)}}}}dirs.sort(function(x,y){return x.length-y.length});if(dirs.length){createDirectories(outPath,dirs,function(err){if(err)callback(err);else extractFiles(outPath,entryName,files,callback,0)})}else{extractFiles(outPath,entryName,files,callback,0)}}else{fs.stat(outPath,function(err,stat){if(stat&&stat.isDirectory())extract(entry,path.join(outPath,path.basename(entry.name)),callback);else extract(entry,outPath,callback)})}};this.close=function(){if(fd){fs.close(fd,function(){fd=null})}}};StreamZip.setFs=function(customFs){fs=customFs};util.inherits(StreamZip,events.EventEmitter);var CentralDirectoryHeader=function(){};CentralDirectoryHeader.prototype.read=function(data){if(data.length!=consts.ENDHDR||data.readUInt32LE(0)!=consts.ENDSIG)throw new Error("Invalid central directory");this.volumeEntries=data.readUInt16LE(consts.ENDSUB);this.totalEntries=data.readUInt16LE(consts.ENDTOT);this.size=data.readUInt32LE(consts.ENDSIZ);this.offset=data.readUInt32LE(consts.ENDOFF);this.commentLength=data.readUInt16LE(consts.ENDCOM)};var CentralDirectoryLoc64Header=function(){};CentralDirectoryLoc64Header.prototype.read=function(data){if(data.length!=consts.ENDL64HDR||data.readUInt32LE(0)!=consts.ENDL64SIG)throw new Error("Invalid zip64 central directory locator");this.headerOffset=Util.readUInt64LE(data,consts.ENDSUB)};var CentralDirectoryZip64Header=function(){};CentralDirectoryZip64Header.prototype.read=function(data){if(data.length!=consts.END64HDR||data.readUInt32LE(0)!=consts.END64SIG)throw new Error("Invalid central directory");this.volumeEntries=Util.readUInt64LE(data,consts.END64SUB);this.totalEntries=Util.readUInt64LE(data,consts.END64TOT);this.size=Util.readUInt64LE(data,consts.END64SIZ);this.offset=Util.readUInt64LE(data,consts.END64OFF)};var ZipEntry=function(){};ZipEntry.prototype.readHeader=function(data,offset){if(data.length<offset+consts.CENHDR||data.readUInt32LE(offset)!=consts.CENSIG){throw new Error("Invalid entry header")}this.verMade=data.readUInt16LE(offset+consts.CENVEM);this.version=data.readUInt16LE(offset+consts.CENVER);this.flags=data.readUInt16LE(offset+consts.CENFLG);this.method=data.readUInt16LE(offset+consts.CENHOW);this.time=data.readUInt32LE(offset+consts.CENTIM);this.crc=data.readUInt32LE(offset+consts.CENCRC);this.compressedSize=data.readUInt32LE(offset+consts.CENSIZ);this.size=data.readUInt32LE(offset+consts.CENLEN);this.fnameLen=data.readUInt16LE(offset+consts.CENNAM);this.extraLen=data.readUInt16LE(offset+consts.CENEXT);this.comLen=data.readUInt16LE(offset+consts.CENCOM);this.diskStart=data.readUInt16LE(offset+consts.CENDSK);this.inattr=data.readUInt16LE(offset+consts.CENATT);this.attr=data.readUInt32LE(offset+consts.CENATX);this.offset=data.readUInt32LE(offset+consts.CENOFF)};ZipEntry.prototype.readDataHeader=function(data){if(data.readUInt32LE(0)!=consts.LOCSIG){throw new Error("Invalid local header")}this.version=data.readUInt16LE(consts.LOCVER);this.flags=data.readUInt16LE(consts.LOCFLG);this.method=data.readUInt16LE(consts.LOCHOW);this.time=data.readUInt32LE(consts.LOCTIM);this.crc=data.readUInt32LE(consts.LOCCRC)||this.crc;var compressedSize=data.readUInt32LE(consts.LOCSIZ);if(compressedSize&&compressedSize!==consts.EF_ZIP64_OR_32){this.compressedSize=compressedSize}var size=data.readUInt32LE(consts.LOCLEN);if(size&&size!==consts.EF_ZIP64_OR_32){this.size=size}this.fnameLen=data.readUInt16LE(consts.LOCNAM);this.extraLen=data.readUInt16LE(consts.LOCEXT)};ZipEntry.prototype.read=function(data,offset){this.name=data.slice(offset,offset+=this.fnameLen).toString();var lastChar=data[offset-1];this.isDirectory=lastChar==47||lastChar==92;if(this.extraLen){this.readExtra(data,offset);offset+=this.extraLen}this.comment=this.comLen?data.slice(offset,offset+this.comLen).toString():null};ZipEntry.prototype.validateName=function(){if(/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name)){throw new Error("Malicious entry: "+this.name)}};ZipEntry.prototype.readExtra=function(data,offset){var signature,size,maxPos=offset+this.extraLen;while(offset<maxPos){signature=data.readUInt16LE(offset);offset+=2;size=data.readUInt16LE(offset);offset+=2;if(consts.ID_ZIP64===signature){this.parseZip64Extra(data,offset,size)}offset+=size}};ZipEntry.prototype.parseZip64Extra=function(data,offset,length){if(length>=8&&this.size===consts.EF_ZIP64_OR_32){this.size=Util.readUInt64LE(data,offset);offset+=8;length-=8}if(length>=8&&this.compressedSize===consts.EF_ZIP64_OR_32){this.compressedSize=Util.readUInt64LE(data,offset);offset+=8;length-=8}if(length>=8&&this.offset===consts.EF_ZIP64_OR_32){this.offset=Util.readUInt64LE(data,offset);offset+=8;length-=8}if(length>=4&&this.diskStart===consts.EF_ZIP64_OR_16){this.diskStart=data.readUInt32LE(offset)}};Object.defineProperty(ZipEntry.prototype,"encrypted",{get:function(){return(this.flags&consts.FLG_ENTRY_ENC)==consts.FLG_ENTRY_ENC}});Object.defineProperty(ZipEntry.prototype,"isFile",{get:function(){return!this.isDirectory}});var FsRead=function(fd,buffer,offset,length,position,callback){this.fd=fd;this.buffer=buffer;this.offset=offset;this.length=length;this.position=position;this.callback=callback;this.bytesRead=0;this.waiting=false};FsRead.prototype.read=function(sync){if(StreamZip.debug){console.log("read",this.position,this.bytesRead,this.length,this.offset)}this.waiting=true;var err;if(sync){try{var bytesRead=fs.readSync(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead)}catch(e){err=e}this.readCallback(sync,err,err?bytesRead:null)}else{fs.read(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead,this.readCallback.bind(this,sync))}};FsRead.prototype.readCallback=function(sync,err,bytesRead){if(typeof bytesRead==="number")this.bytesRead+=bytesRead;if(err||!bytesRead||this.bytesRead===this.length){this.waiting=false;return this.callback(err,this.bytesRead)}else{this.read(sync)}};var FileWindowBuffer=function(fd){this.position=0;this.buffer=new Buffer(0);var fsOp=null;this.checkOp=function(){if(fsOp&&fsOp.waiting)throw new Error("Operation in progress")};this.read=function(pos,length,callback){this.checkOp();if(this.buffer.length<length)this.buffer=new Buffer(length);this.position=pos;fsOp=new FsRead(fd,this.buffer,0,length,this.position,callback).read()};this.expandLeft=function(length,callback){this.checkOp();this.buffer=Buffer.concat([new Buffer(length),this.buffer]);this.position-=length;if(this.position<0)this.position=0;fsOp=new FsRead(fd,this.buffer,0,length,this.position,callback).read()};this.expandRight=function(length,callback){this.checkOp();var offset=this.buffer.length;this.buffer=Buffer.concat([this.buffer,new Buffer(length)]);fsOp=new FsRead(fd,this.buffer,offset,length,this.position+offset,callback).read()};this.moveRight=function(length,callback,shift){this.checkOp();if(shift){this.buffer.copy(this.buffer,0,shift)}else{shift=0}this.position+=shift;fsOp=new FsRead(fd,this.buffer,this.buffer.length-shift,shift,this.position+this.buffer.length-shift,callback).read()}};var EntryDataReaderStream=function(fd,offset,length){stream.Readable.prototype.constructor.call(this);this.fd=fd;this.offset=offset;this.length=length;this.pos=0;this.readCallback=this.readCallback.bind(this)};util.inherits(EntryDataReaderStream,stream.Readable);EntryDataReaderStream.prototype._read=function(n){var buffer=new Buffer(Math.min(n,this.length-this.pos));if(buffer.length){fs.read(this.fd,buffer,0,buffer.length,this.offset+this.pos,this.readCallback)}else{this.push(null)}};EntryDataReaderStream.prototype.readCallback=function(err,bytesRead,buffer){this.pos+=bytesRead;if(err){this.emit("error",err);this.push(null)}else if(!bytesRead){this.push(null)}else{if(bytesRead!==buffer.length)buffer=buffer.slice(0,bytesRead);this.push(buffer)}};var EntryVerifyStream=function(baseStm,crc,size){stream.Transform.prototype.constructor.call(this);this.verify=new CrcVerify(crc,size);var that=this;baseStm.on("error",function(e){that.emit("error",e)})};util.inherits(EntryVerifyStream,stream.Transform);EntryVerifyStream.prototype._transform=function(data,encoding,callback){var err;try{this.verify.data(data)}catch(e){err=e}callback(err,data)};var CrcVerify=function(crc,size){this.crc=crc;this.size=size;this.state={crc:~0,size:0}};CrcVerify.prototype.data=function(data){var crcTable=CrcVerify.getCrcTable();var crc=this.state.crc,off=0,len=data.length;while(--len>=0)crc=crcTable[(crc^data[off++])&255]^crc>>>8;this.state.crc=crc;this.state.size+=data.length;if(this.state.size>=this.size){var buf=new Buffer(4);buf.writeInt32LE(~this.state.crc&4294967295,0);crc=buf.readUInt32LE(0);if(crc!==this.crc)throw new Error("Invalid CRC");if(this.state.size!==this.size)throw new Error("Invalid size")}};CrcVerify.getCrcTable=function(){var crcTable=CrcVerify.crcTable;if(!crcTable){CrcVerify.crcTable=crcTable=[];var b=new Buffer(4);for(var n=0;n<256;n++){var c=n;for(var k=8;--k>=0;)if((c&1)!=0){c=3988292384^c>>>1}else{c=c>>>1}if(c<0){b.writeInt32LE(c,0);c=b.readUInt32LE(0)}crcTable[n]=c}}return crcTable};var Util={readUInt64LE:function(buffer,offset){return buffer.readUInt32LE(offset+4)*4294967296+buffer.readUInt32LE(offset)}};module.exports=StreamZip},{events:undefined,fs:undefined,path:undefined,stream:undefined,util:undefined,zlib:undefined}],446:[function(require,module,exports){var crypto=require("crypto"),qs=require("querystring");function sha1(key,body){return crypto.createHmac("sha1",key).update(body).digest("base64")}function rsa(key,body){return crypto.createSign("RSA-SHA1").update(body).sign(key,"base64")}function rfc3986(str){return encodeURIComponent(str).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}function map(obj){var key,val,arr=[];for(key in obj){val=obj[key];if(Array.isArray(val))for(var i=0;i<val.length;i++)arr.push([key,val[i]]);else if(typeof val==="object")for(var prop in val)arr.push([key+"["+prop+"]",val[prop]]);else arr.push([key,val])}return arr}function compare(a,b){return a>b?1:a<b?-1:0}function generateBase(httpMethod,base_uri,params){var normalized=map(params).map(function(p){return[rfc3986(p[0]),rfc3986(p[1]||"")]}).sort(function(a,b){return compare(a[0],b[0])||compare(a[1],b[1])}).map(function(p){return p.join("=")}).join("&");var base=[rfc3986(httpMethod?httpMethod.toUpperCase():"GET"),rfc3986(base_uri),rfc3986(normalized)].join("&");return base}function hmacsign(httpMethod,base_uri,params,consumer_secret,token_secret){var base=generateBase(httpMethod,base_uri,params);var key=[consumer_secret||"",token_secret||""].map(rfc3986).join("&");return sha1(key,base)}function rsasign(httpMethod,base_uri,params,private_key,token_secret){var base=generateBase(httpMethod,base_uri,params);var key=private_key||"";return rsa(key,base)}function plaintext(consumer_secret,token_secret){var key=[consumer_secret||"",token_secret||""].map(rfc3986).join("&");return key}function sign(signMethod,httpMethod,base_uri,params,consumer_secret,token_secret){var method;var skipArgs=1;switch(signMethod){case"RSA-SHA1":method=rsasign;break;case"HMAC-SHA1":method=hmacsign;break;case"PLAINTEXT":method=plaintext;skipArgs=4;break;default:throw new Error("Signature method not supported: "+signMethod)}return method.apply(null,[].slice.call(arguments,skipArgs))}exports.hmacsign=hmacsign;exports.rsasign=rsasign;exports.plaintext=plaintext;exports.sign=sign;exports.rfc3986=rfc3986;exports.generateBase=generateBase},{crypto:undefined,querystring:undefined}],447:[function(require,module,exports){"use strict";module.exports=onFinished;module.exports.isFinished=isFinished;var first=require("ee-first");var defer=typeof setImmediate==="function"?setImmediate:function(fn){process.nextTick(fn.bind.apply(fn,arguments))};function onFinished(msg,listener){if(isFinished(msg)!==false){defer(listener,null,msg);return msg}attachListener(msg,listener);return msg}function isFinished(msg){var socket=msg.socket;if(typeof msg.finished==="boolean"){return Boolean(msg.finished||socket&&!socket.writable)}if(typeof msg.complete==="boolean"){return Boolean(msg.upgrade||!socket||!socket.readable||msg.complete&&!msg.readable)}return undefined}function attachFinishedListener(msg,callback){var eeMsg;var eeSocket;var finished=false;function onFinish(error){eeMsg.cancel();eeSocket.cancel();finished=true;callback(error)}eeMsg=eeSocket=first([[msg,"end","finish"]],onFinish);function onSocket(socket){msg.removeListener("socket",onSocket);if(finished)return;if(eeMsg!==eeSocket)return;eeSocket=first([[socket,"error","close"]],onFinish)}if(msg.socket){onSocket(msg.socket);return}msg.on("socket",onSocket);if(msg.socket===undefined){patchAssignSocket(msg,onSocket)}}function attachListener(msg,listener){var attached=msg.__onFinished;if(!attached||!attached.queue){attached=msg.__onFinished=createListener(msg);attachFinishedListener(msg,attached)}attached.queue.push(listener)}function createListener(msg){function listener(err){if(msg.__onFinished===listener)msg.__onFinished=null;if(!listener.queue)return;var queue=listener.queue;listener.queue=null;for(var i=0;i<queue.length;i++){queue[i](err,msg)}}listener.queue=[];return listener}function patchAssignSocket(res,callback){var assignSocket=res.assignSocket;if(typeof assignSocket!=="function")return;res.assignSocket=function _assignSocket(socket){assignSocket.call(this,socket);callback(socket)}}},{"ee-first":278}],448:[function(require,module,exports){"use strict";var slice=Array.prototype.slice;module.exports=function onHeaders(res,listener){if(!res){throw new TypeError("argument res is required")}if(typeof listener!=="function"){throw new TypeError("argument listener must be a function")}res.writeHead=createWriteHead(res.writeHead,listener)};function createWriteHead(prevWriteHead,listener){var fired=false;return function writeHead(statusCode){var args=setWriteHeadHeaders.apply(this,arguments);if(!fired){fired=true;listener.call(this);if(typeof args[0]==="number"&&this.statusCode!==args[0]){args[0]=this.statusCode;args.length=1}}prevWriteHead.apply(this,args)}}function setWriteHeadHeaders(statusCode){var length=arguments.length;var headerIndex=length>1&&typeof arguments[1]==="string"?2:1;var headers=length>=headerIndex+1?arguments[headerIndex]:undefined;this.statusCode=statusCode;if(Array.isArray(headers)){for(var i=0,len=headers.length;i<len;++i){this.setHeader(headers[i][0],headers[i][1])}}else if(headers){var keys=Object.keys(headers);for(var i=0;i<keys.length;i++){var k=keys[i];if(k)this.setHeader(k,headers[k])}}var args=new Array(Math.min(length,headerIndex));for(var i=0;i<args.length;i++){args[i]=arguments[i]}return args}},{}],449:[function(require,module,exports){"use strict";var isWindows=process.platform==="win32";var trailingSlashRe=isWindows?/[^:]\\$/:/.\/$/;module.exports=function(){var path;if(isWindows){path=process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp"}else{path=process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp"}if(trailingSlashRe.test(path)){path=path.slice(0,-1)}return path}},{}],450:[function(require,module,exports){"use strict";var url=require("url");var parse=url.parse;var Url=url.Url;module.exports=parseurl;module.exports.original=originalurl;function parseurl(req){var url=req.url;if(url===undefined){return undefined}var parsed=req._parsedUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedUrl=parsed}function originalurl(req){var url=req.originalUrl;if(typeof url!=="string"){return parseurl(req)}var parsed=req._parsedOriginalUrl;if(fresh(url,parsed)){return parsed}parsed=fastparse(url);parsed._raw=url;return req._parsedOriginalUrl=parsed}function fastparse(str){if(typeof str!=="string"||str.charCodeAt(0)!==47){return parse(str)}var pathname=str;var query=null;var search=null;for(var i=1;i<str.length;i++){switch(str.charCodeAt(i)){case 63:if(search===null){pathname=str.substring(0,i);query=str.substring(i+1);search=str.substring(i)}break;case 9:case 10:case 12:case 13:case 32:case 35:case 160:case 65279:return parse(str)}}var url=Url!==undefined?new Url:{};url.path=str;url.href=str;url.pathname=pathname;url.query=query;url.search=search;return url}function fresh(url,parsedUrl){return typeof parsedUrl==="object"&&parsedUrl!==null&&(Url===undefined||parsedUrl instanceof Url)&&parsedUrl._raw===url}},{url:undefined}],451:[function(require,module,exports){module.exports=pathtoRegexp;var MATCHING_GROUP_REGEXP=/\((?!\?)/g;function pathtoRegexp(path,keys,options){options=options||{};keys=keys||[];var strict=options.strict;var end=options.end!==false;var flags=options.sensitive?"":"i";var extraOffset=0;var keysOffset=keys.length;var i=0;var name=0;var m;if(path instanceof RegExp){while(m=MATCHING_GROUP_REGEXP.exec(path.source)){keys.push({name:name++,optional:false,offset:m.index})}return path}if(Array.isArray(path)){path=path.map(function(value){return pathtoRegexp(value,keys,options).source});return new RegExp("(?:"+path.join("|")+")",flags)}path=("^"+path+(strict?"":path[path.length-1]==="/"?"?":"/?")).replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,function(match,slash,format,key,capture,star,optional,offset){slash=slash||"";format=format||"";capture=capture||"([^\\/"+format+"]+?)";optional=optional||"";keys.push({name:key,optional:!!optional,offset:offset+extraOffset});var result=""+(optional?"":slash)+"(?:"+format+(optional?slash:"")+capture+(star?"((?:[\\/"+format+"].+?)?)":"")+")"+optional;extraOffset+=result.length-match.length;return result}).replace(/\*/g,function(star,index){var len=keys.length;while(len-- >keysOffset&&keys[len].offset>index){keys[len].offset+=3}return"(.*)"});while(m=MATCHING_GROUP_REGEXP.exec(path)){var escapeCount=0;var index=m.index;while(path.charAt(--index)==="\\"){escapeCount++}if(escapeCount%2===1){continue}if(keysOffset+i===keys.length||keys[keysOffset+i].offset>m.index){keys.splice(keysOffset+i,0,{name:name++,optional:false,offset:m.index})}i++}path+=end?"$":path[path.length-1]==="/"?"":"(?=\\/|$)";return new RegExp(path,flags)}},{}],452:[function(require,module,exports){module.exports=Pend;function Pend(){this.pending=0;this.max=Infinity;this.listeners=[];this.waiting=[];this.error=null}Pend.prototype.go=function(fn){if(this.pending<this.max){pendGo(this,fn)}else{this.waiting.push(fn)}};Pend.prototype.wait=function(cb){if(this.pending===0){cb(this.error)}else{this.listeners.push(cb)}};Pend.prototype.hold=function(){return pendHold(this)};function pendHold(self){self.pending+=1;var called=false;return onCb;function onCb(err){if(called)throw new Error("callback called twice");called=true;self.error=self.error||err;self.pending-=1;if(self.waiting.length>0&&self.pending<self.max){pendGo(self,self.waiting.shift())}else if(self.pending===0){var listeners=self.listeners;self.listeners=[];listeners.forEach(cbListener)}}function cbListener(listener){listener(self.error)}}function pendGo(self,fn){fn(pendHold(self))}},{}],453:[function(require,module,exports){(function(){var getNanoSeconds,hrtime,loadTime,moduleLoadTime,nodeLoadTime,upTime;if(typeof performance!=="undefined"&&performance!==null&&performance.now){module.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){module.exports=function(){return(getNanoSeconds()-nodeLoadTime)/1e6};hrtime=process.hrtime;getNanoSeconds=function(){var hr;hr=hrtime();return hr[0]*1e9+hr[1]};moduleLoadTime=getNanoSeconds();upTime=process.uptime()*1e9;nodeLoadTime=moduleLoadTime-upTime}else if(Date.now){module.exports=function(){return Date.now()-loadTime};loadTime=Date.now()}else{module.exports=function(){return(new Date).getTime()-loadTime};loadTime=(new Date).getTime()}}).call(this)},{}],454:[function(require,module,exports){"use strict";var fs=require("graceful-fs");var path=require("path");var extend=require("extend");var errcode=require("err-code");var retry=require("retry");var syncFs=require("./lib/syncFs");var locks={};function getLockFile(file){return file+".lock"}function canonicalPath(file,options,callback){if(!options.realpath){return callback(null,path.resolve(file))}options.fs.realpath(file,callback)}function acquireLock(file,options,callback){options.fs.mkdir(getLockFile(file),function(err){if(!err){return callback()}if(err.code!=="EEXIST"){return callback(err)}if(options.stale<=0){return callback(errcode("Lock file is already being hold","ELOCKED",{file:file}))}options.fs.stat(getLockFile(file),function(err,stat){if(err){if(err.code==="ENOENT"){return acquireLock(file,extend({},options,{stale:0}),callback)}return callback(err)}if(!isLockStale(stat,options)){return callback(errcode("Lock file is already being hold","ELOCKED",{file:file}))}removeLock(file,options,function(err){if(err){return callback(err)}acquireLock(file,extend({},options,{stale:0}),callback)})})})}function isLockStale(stat,options){return stat.mtime.getTime()<Date.now()-options.stale}function removeLock(file,options,callback){options.fs.rmdir(getLockFile(file),function(err){if(err&&err.code!=="ENOENT"){return callback(err)}callback()})}function updateLock(file,options){var lock=locks[file];if(lock.updateTimeout){return}lock.updateDelay=lock.updateDelay||options.update;lock.updateTimeout=setTimeout(function(){var mtime=Date.now()/1e3;lock.updateTimeout=null;options.fs.utimes(getLockFile(file),mtime,mtime,function(err){if(lock.released){return}if(lock.lastUpdate<=Date.now()-options.stale&&lock.lastUpdate>Date.now()-options.stale*2){return compromisedLock(file,lock,errcode(lock.updateError||"Unable to update lock within the stale threshold","ECOMPROMISED"))}if(err){if(err.code==="ENOENT"){return compromisedLock(file,lock,errcode(err,"ECOMPROMISED"))}lock.updateError=err;lock.updateDelay=1e3;return updateLock(file,options)}lock.lastUpdate=Date.now();lock.updateError=null;lock.updateDelay=null;updateLock(file,options)})},lock.updateDelay);lock.updateTimeout.unref()}function compromisedLock(file,lock,err){lock.released=true;lock.updateTimeout&&clearTimeout(lock.updateTimeout);if(locks[file]===lock){delete locks[file]}lock.compromised(err)}function lock(file,options,compromised,callback){if(typeof options==="function"){callback=compromised;compromised=options;options=null}if(!callback){callback=compromised;compromised=null}options=extend({stale:1e4,update:null,realpath:true,retries:0,fs:fs},options);options.retries=options.retries||0;options.retries=typeof options.retries==="number"?{retries:options.retries}:options.retries;options.stale=Math.max(options.stale||0,2e3);options.update=options.update==null?options.stale/2:options.update||0;options.update=Math.max(Math.min(options.update,options.stale/2),1e3);compromised=compromised||function(err){throw err};canonicalPath(file,options,function(err,file){var operation;if(err){return callback(err)}operation=retry.operation(options.retries);operation.attempt(function(){acquireLock(file,options,function(err){var lock;if(operation.retry(err)){return}if(err){return callback(operation.mainError())}locks[file]=lock={options:options,compromised:compromised,lastUpdate:Date.now()};updateLock(file,options);callback(null,function(releasedCallback){if(lock.released){return releasedCallback&&releasedCallback(errcode("Lock is already released","ERELEASED"))}unlock(file,extend({},options,{realpath:false}),releasedCallback)})})})})}function unlock(file,options,callback){if(typeof options==="function"){callback=options;options=null}options=extend({fs:fs,realpath:true},options);callback=callback||function(){};canonicalPath(file,options,function(err,file){var lock;if(err){return callback(err)}lock=locks[file];if(!lock){return callback(errcode("Lock is not acquired/owned by you","ENOTACQUIRED"))}lock.updateTimeout&&clearTimeout(lock.updateTimeout);lock.released=true;delete locks[file];removeLock(file,options,callback)})}function lockSync(file,options,compromised){var err;var release;if(typeof options==="function"){compromised=options;options=null}options=options||{};options.fs=syncFs(options.fs||fs);options.retries=options.retries||0;options.retries=typeof options.retries==="number"?{retries:options.retries}:options.retries;if(options.retries.retries){throw errcode("Cannot use retries with the sync api","ESYNC")}lock(file,options,compromised,function(_err,_release){err=_err;release=_release});if(err){throw err}return release}function unlockSync(file,options){var err;options=options||{};options.fs=syncFs(options.fs||fs);unlock(file,options,function(_err){err=_err});if(err){throw err}}function check(file,options,callback){if(typeof options==="function"){callback=options;options=null}options=extend({stale:1e4,realpath:true,fs:fs},options);options.stale=Math.max(options.stale||0,2e3);canonicalPath(file,options,function(err,file){if(err){return callback(err)}options.fs.stat(getLockFile(file),function(err,stat){if(err){return err.code==="ENOENT"?callback(null,false):callback(err)}if(options.stale<=0){return callback(null,true)}return callback(null,!isLockStale(stat,options))})})}function checkSync(file,options){var err;var locked;options=options||{};options.fs=syncFs(options.fs||fs);check(file,options,function(_err,_locked){err=_err;locked=_locked});if(err){throw err}return locked}process.on("exit",function(){Object.keys(locks).forEach(function(file){try{locks[file].options.fs.rmdirSync(getLockFile(file))}catch(e){}})});module.exports=lock;module.exports.lock=lock;module.exports.unlock=unlock;module.exports.lockSync=lockSync;module.exports.unlockSync=unlockSync;module.exports.check=check;module.exports.checkSync=checkSync},{"./lib/syncFs":455,"err-code":280,extend:299,"graceful-fs":324,path:undefined,retry:481}],455:[function(require,module,exports){"use strict";function makeSync(fs,name){var fn=fs[name+"Sync"];return function(){var callback=arguments[arguments.length-1];var args=Array.prototype.slice.call(arguments,0,-1);var ret;try{ret=fn.apply(fs,args)}catch(err){return callback(err)}callback(null,ret)}}function syncFs(fs){var fns=["mkdir","realpath","stat","rmdir","utimes"];var obj={};var key;fns.forEach(function(name){obj[name]=makeSync(fs,name)});for(key in fs){if(!obj[key]){obj[key]=fs[key]}}return obj}module.exports=syncFs},{}],456:[function(require,module,exports){"use strict";module.exports=proxyaddr;module.exports.all=alladdrs;module.exports.compile=compile;var forwarded=require("forwarded");var ipaddr=require("ipaddr.js");var DIGIT_REGEXP=/^[0-9]+$/;var isip=ipaddr.isValid;var parseip=ipaddr.parse;var IP_RANGES={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function alladdrs(req,trust){var addrs=forwarded(req);if(!trust){return addrs}if(typeof trust!=="function"){trust=compile(trust)}for(var i=0;i<addrs.length-1;i++){if(trust(addrs[i],i))continue;addrs.length=i+1}return addrs}function compile(val){if(!val){throw new TypeError("argument is required")}var trust;if(typeof val==="string"){trust=[val]}else if(Array.isArray(val)){trust=val.slice()}else{throw new TypeError("unsupported trust argument")}for(var i=0;i<trust.length;i++){val=trust[i];if(!IP_RANGES.hasOwnProperty(val)){continue}val=IP_RANGES[val];trust.splice.apply(trust,[i,1].concat(val));i+=val.length-1}return compileTrust(compileRangeSubnets(trust))}function compileRangeSubnets(arr){var rangeSubnets=new Array(arr.length);for(var i=0;i<arr.length;i++){rangeSubnets[i]=parseipNotation(arr[i])}return rangeSubnets}function compileTrust(rangeSubnets){var len=rangeSubnets.length;return len===0?trustNone:len===1?trustSingle(rangeSubnets[0]):trustMulti(rangeSubnets)}function parseipNotation(note){var pos=note.lastIndexOf("/");var str=pos!==-1?note.substring(0,pos):note;if(!isip(str)){throw new TypeError("invalid IP address: "+str)}var ip=parseip(str);if(pos===-1&&ip.kind()==="ipv6"&&ip.isIPv4MappedAddress()){ip=ip.toIPv4Address()}var max=ip.kind()==="ipv6"?128:32;var range=pos!==-1?note.substring(pos+1,note.length):null;if(range===null){range=max}else if(DIGIT_REGEXP.test(range)){range=parseInt(range,10)}else if(ip.kind()==="ipv4"&&isip(range)){range=parseNetmask(range)}else{range=null}if(range<=0||range>max){throw new TypeError("invalid range on address: "+note)}return[ip,range]}function parseNetmask(netmask){var ip=parseip(netmask);var kind=ip.kind();return kind==="ipv4"?ip.prefixLengthFromSubnetMask():null}function proxyaddr(req,trust){if(!req){throw new TypeError("req argument is required")}if(!trust){throw new TypeError("trust argument is required")}var addrs=alladdrs(req,trust);var addr=addrs[addrs.length-1];return addr}function trustNone(){return false}function trustMulti(subnets){return function trust(addr){if(!isip(addr))return false;var ip=parseip(addr);var ipconv;var kind=ip.kind();for(var i=0;i<subnets.length;i++){var subnet=subnets[i];var subnetip=subnet[0];var subnetkind=subnetip.kind();var subnetrange=subnet[1];var trusted=ip;if(kind!==subnetkind){if(subnetkind==="ipv4"&&!ip.isIPv4MappedAddress()){continue}if(!ipconv){ipconv=subnetkind==="ipv4"?ip.toIPv4Address():ip.toIPv4MappedAddress()}trusted=ipconv}if(trusted.match(subnetip,subnetrange)){return true}}return false}}function trustSingle(subnet){var subnetip=subnet[0];var subnetkind=subnetip.kind();var subnetisipv4=subnetkind==="ipv4";var subnetrange=subnet[1];return function trust(addr){if(!isip(addr))return false;var ip=parseip(addr);var kind=ip.kind();if(kind!==subnetkind){if(subnetisipv4&&!ip.isIPv4MappedAddress()){return false}ip=subnetisipv4?ip.toIPv4Address():ip.toIPv4MappedAddress()}return ip.match(subnetip,subnetrange)}}},{forwarded:321,"ipaddr.js":402}],457:[function(require,module,exports){"use strict";var replace=String.prototype.replace;var percentTwenties=/%20/g;module.exports={default:"RFC3986",formatters:{RFC1738:function(value){return replace.call(value,percentTwenties,"+")},RFC3986:function(value){return value}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],458:[function(require,module,exports){"use strict";var stringify=require("./stringify");var parse=require("./parse");var formats=require("./formats");module.exports={formats:formats,parse:parse,stringify:stringify}},{"./formats":457,"./parse":459,"./stringify":460}],459:[function(require,module,exports){"use strict";var utils=require("./utils");var has=Object.prototype.hasOwnProperty;var defaults={allowDots:false,allowPrototypes:false,arrayLimit:20,decoder:utils.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:false,strictNullHandling:false};var parseValues=function parseQueryStringValues(str,options){var obj={};var cleanStr=options.ignoreQueryPrefix?str.replace(/^\?/,""):str;var limit=options.parameterLimit===Infinity?undefined:options.parameterLimit;var parts=cleanStr.split(options.delimiter,limit);for(var i=0;i<parts.length;++i){var part=parts[i];var bracketEqualsPos=part.indexOf("]=");var pos=bracketEqualsPos===-1?part.indexOf("="):bracketEqualsPos+1;var key,val;if(pos===-1){key=options.decoder(part,defaults.decoder);val=options.strictNullHandling?null:""}else{key=options.decoder(part.slice(0,pos),defaults.decoder);val=options.decoder(part.slice(pos+1),defaults.decoder)}if(has.call(obj,key)){obj[key]=[].concat(obj[key]).concat(val)}else{obj[key]=val}}return obj};var parseObject=function(chain,val,options){var leaf=val;for(var i=chain.length-1;i>=0;--i){var obj;var root=chain[i];if(root==="[]"){obj=[];obj=obj.concat(leaf)}else{obj=options.plainObjects?Object.create(null):{};var cleanRoot=root.charAt(0)==="["&&root.charAt(root.length-1)==="]"?root.slice(1,-1):root;var index=parseInt(cleanRoot,10);if(!isNaN(index)&&root!==cleanRoot&&String(index)===cleanRoot&&index>=0&&(options.parseArrays&&index<=options.arrayLimit)){obj=[];obj[index]=leaf}else{obj[cleanRoot]=leaf}}leaf=obj}return leaf};var parseKeys=function parseQueryStringKeys(givenKey,val,options){if(!givenKey){return}var key=options.allowDots?givenKey.replace(/\.([^.[]+)/g,"[$1]"):givenKey;var brackets=/(\[[^[\]]*])/;var child=/(\[[^[\]]*])/g;var segment=brackets.exec(key);var parent=segment?key.slice(0,segment.index):key;var keys=[];if(parent){if(!options.plainObjects&&has.call(Object.prototype,parent)){if(!options.allowPrototypes){return}}keys.push(parent)}var i=0;while((segment=child.exec(key))!==null&&i<options.depth){i+=1;if(!options.plainObjects&&has.call(Object.prototype,segment[1].slice(1,-1))){if(!options.allowPrototypes){return}}keys.push(segment[1])}if(segment){keys.push("["+key.slice(segment.index)+"]")}return parseObject(keys,val,options)};module.exports=function(str,opts){var options=opts?utils.assign({},opts):{};if(options.decoder!==null&&options.decoder!==undefined&&typeof options.decoder!=="function"){throw new TypeError("Decoder has to be a function.")}options.ignoreQueryPrefix=options.ignoreQueryPrefix===true;options.delimiter=typeof options.delimiter==="string"||utils.isRegExp(options.delimiter)?options.delimiter:defaults.delimiter;options.depth=typeof options.depth==="number"?options.depth:defaults.depth;options.arrayLimit=typeof options.arrayLimit==="number"?options.arrayLimit:defaults.arrayLimit;options.parseArrays=options.parseArrays!==false;options.decoder=typeof options.decoder==="function"?options.decoder:defaults.decoder;options.allowDots=typeof options.allowDots==="boolean"?options.allowDots:defaults.allowDots;options.plainObjects=typeof options.plainObjects==="boolean"?options.plainObjects:defaults.plainObjects;options.allowPrototypes=typeof options.allowPrototypes==="boolean"?options.allowPrototypes:defaults.allowPrototypes;options.parameterLimit=typeof options.parameterLimit==="number"?options.parameterLimit:defaults.parameterLimit;options.strictNullHandling=typeof options.strictNullHandling==="boolean"?options.strictNullHandling:defaults.strictNullHandling;if(str===""||str===null||typeof str==="undefined"){return options.plainObjects?Object.create(null):{}}var tempObj=typeof str==="string"?parseValues(str,options):str;var obj=options.plainObjects?Object.create(null):{};var keys=Object.keys(tempObj);for(var i=0;i<keys.length;++i){var key=keys[i];var newObj=parseKeys(key,tempObj[key],options);obj=utils.merge(obj,newObj,options)}return utils.compact(obj)}},{"./utils":461}],460:[function(require,module,exports){"use strict";var utils=require("./utils");var formats=require("./formats");var arrayPrefixGenerators={brackets:function brackets(prefix){return prefix+"[]"},indices:function indices(prefix,key){return prefix+"["+key+"]"},repeat:function repeat(prefix){return prefix}};var toISO=Date.prototype.toISOString;var defaults={delimiter:"&",encode:true,encoder:utils.encode,encodeValuesOnly:false,serializeDate:function serializeDate(date){return toISO.call(date)},skipNulls:false,strictNullHandling:false};var stringify=function stringify(object,prefix,generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly){var obj=object;if(typeof filter==="function"){obj=filter(prefix,obj)}else if(obj instanceof Date){obj=serializeDate(obj)}else if(obj===null){if(strictNullHandling){return encoder&&!encodeValuesOnly?encoder(prefix,defaults.encoder):prefix}obj=""}if(typeof obj==="string"||typeof obj==="number"||typeof obj==="boolean"||utils.isBuffer(obj)){if(encoder){var keyValue=encodeValuesOnly?prefix:encoder(prefix,defaults.encoder);return[formatter(keyValue)+"="+formatter(encoder(obj,defaults.encoder))]}return[formatter(prefix)+"="+formatter(String(obj))]}var values=[];if(typeof obj==="undefined"){return values}var objKeys;if(Array.isArray(filter)){objKeys=filter}else{var keys=Object.keys(obj);objKeys=sort?keys.sort(sort):keys}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];if(skipNulls&&obj[key]===null){continue}if(Array.isArray(obj)){values=values.concat(stringify(obj[key],generateArrayPrefix(prefix,key),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly))}else{values=values.concat(stringify(obj[key],prefix+(allowDots?"."+key:"["+key+"]"),generateArrayPrefix,strictNullHandling,skipNulls,encoder,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly))}}return values};module.exports=function(object,opts){var obj=object;var options=opts?utils.assign({},opts):{};if(options.encoder!==null&&options.encoder!==undefined&&typeof options.encoder!=="function"){throw new TypeError("Encoder has to be a function.")}var delimiter=typeof options.delimiter==="undefined"?defaults.delimiter:options.delimiter;var strictNullHandling=typeof options.strictNullHandling==="boolean"?options.strictNullHandling:defaults.strictNullHandling;var skipNulls=typeof options.skipNulls==="boolean"?options.skipNulls:defaults.skipNulls;var encode=typeof options.encode==="boolean"?options.encode:defaults.encode;var encoder=typeof options.encoder==="function"?options.encoder:defaults.encoder;var sort=typeof options.sort==="function"?options.sort:null;var allowDots=typeof options.allowDots==="undefined"?false:options.allowDots;var serializeDate=typeof options.serializeDate==="function"?options.serializeDate:defaults.serializeDate;var encodeValuesOnly=typeof options.encodeValuesOnly==="boolean"?options.encodeValuesOnly:defaults.encodeValuesOnly;if(typeof options.format==="undefined"){options.format=formats["default"]}else if(!Object.prototype.hasOwnProperty.call(formats.formatters,options.format)){throw new TypeError("Unknown format option provided.")}var formatter=formats.formatters[options.format];var objKeys;var filter;if(typeof options.filter==="function"){filter=options.filter;obj=filter("",obj)}else if(Array.isArray(options.filter)){filter=options.filter;objKeys=filter}var keys=[];if(typeof obj!=="object"||obj===null){return""}var arrayFormat;if(options.arrayFormat in arrayPrefixGenerators){arrayFormat=options.arrayFormat}else if("indices"in options){arrayFormat=options.indices?"indices":"repeat"}else{arrayFormat="indices"}var generateArrayPrefix=arrayPrefixGenerators[arrayFormat];if(!objKeys){objKeys=Object.keys(obj)}if(sort){objKeys.sort(sort)}for(var i=0;i<objKeys.length;++i){var key=objKeys[i];if(skipNulls&&obj[key]===null){continue}keys=keys.concat(stringify(obj[key],key,generateArrayPrefix,strictNullHandling,skipNulls,encode?encoder:null,filter,sort,allowDots,serializeDate,formatter,encodeValuesOnly))}var joined=keys.join(delimiter);var prefix=options.addQueryPrefix===true?"?":"";return joined.length>0?prefix+joined:""}},{"./formats":457,"./utils":461}],461:[function(require,module,exports){"use strict";var has=Object.prototype.hasOwnProperty;var hexTable=function(){var array=[];for(var i=0;i<256;++i){array.push("%"+((i<16?"0":"")+i.toString(16)).toUpperCase())}return array}();var compactQueue=function compactQueue(queue){var obj;while(queue.length){var item=queue.pop();obj=item.obj[item.prop];if(Array.isArray(obj)){var compacted=[];for(var j=0;j<obj.length;++j){if(typeof obj[j]!=="undefined"){compacted.push(obj[j])}}item.obj[item.prop]=compacted}}return obj};exports.arrayToObject=function arrayToObject(source,options){var obj=options&&options.plainObjects?Object.create(null):{};for(var i=0;i<source.length;++i){if(typeof source[i]!=="undefined"){obj[i]=source[i]}}return obj};exports.merge=function merge(target,source,options){if(!source){return target}if(typeof source!=="object"){if(Array.isArray(target)){target.push(source)}else if(typeof target==="object"){if(options.plainObjects||options.allowPrototypes||!has.call(Object.prototype,source)){target[source]=true}}else{return[target,source]}return target}if(typeof target!=="object"){return[target].concat(source)}var mergeTarget=target;if(Array.isArray(target)&&!Array.isArray(source)){mergeTarget=exports.arrayToObject(target,options)}if(Array.isArray(target)&&Array.isArray(source)){source.forEach(function(item,i){if(has.call(target,i)){if(target[i]&&typeof target[i]==="object"){target[i]=exports.merge(target[i],item,options)}else{target.push(item)}}else{target[i]=item}});return target}return Object.keys(source).reduce(function(acc,key){var value=source[key];if(has.call(acc,key)){acc[key]=exports.merge(acc[key],value,options)}else{acc[key]=value}return acc},mergeTarget)};exports.assign=function assignSingleSource(target,source){return Object.keys(source).reduce(function(acc,key){acc[key]=source[key];return acc},target)};exports.decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.encode=function encode(str){if(str.length===0){return str}var string=typeof str==="string"?str:String(str);var out="";for(var i=0;i<string.length;++i){var c=string.charCodeAt(i);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122){out+=string.charAt(i);continue}if(c<128){out=out+hexTable[c];continue}if(c<2048){out=out+(hexTable[192|c>>6]+hexTable[128|c&63]);continue}if(c<55296||c>=57344){out=out+(hexTable[224|c>>12]+hexTable[128|c>>6&63]+hexTable[128|c&63]);continue}i+=1;c=65536+((c&1023)<<10|string.charCodeAt(i)&1023);out+=hexTable[240|c>>18]+hexTable[128|c>>12&63]+hexTable[128|c>>6&63]+hexTable[128|c&63]}return out};exports.compact=function compact(value){var queue=[{obj:{o:value},prop:"o"}];var refs=[];for(var i=0;i<queue.length;++i){var item=queue[i];var obj=item.obj[item.prop];var keys=Object.keys(obj);for(var j=0;j<keys.length;++j){var key=keys[j];var val=obj[key];if(typeof val==="object"&&val!==null&&refs.indexOf(val)===-1){queue.push({obj:obj,prop:key});refs.push(val)}}}return compactQueue(queue)};exports.isRegExp=function isRegExp(obj){return Object.prototype.toString.call(obj)==="[object RegExp]"};exports.isBuffer=function isBuffer(obj){if(obj===null||typeof obj==="undefined"){return false}return!!(obj.constructor&&obj.constructor.isBuffer&&obj.constructor.isBuffer(obj))}},{}],462:[function(require,module,exports){"use strict";module.exports=rangeParser;function rangeParser(size,str,options){var index=str.indexOf("=");if(index===-1){return-2}var arr=str.slice(index+1).split(",");var ranges=[];ranges.type=str.slice(0,index);for(var i=0;i<arr.length;i++){var range=arr[i].split("-");var start=parseInt(range[0],10);var end=parseInt(range[1],10);if(isNaN(start)){start=size-end;end=size-1}else if(isNaN(end)){end=size-1}if(end>size-1){end=size-1}if(isNaN(start)||isNaN(end)||start>end||start<0){continue}ranges.push({start:start,end:end})}if(ranges.length<1){return-1}return options&&options.combine?combineRanges(ranges):ranges}function combineRanges(ranges){var ordered=ranges.map(mapWithIndex).sort(sortByRangeStart);for(var j=0,i=1;i<ordered.length;i++){var range=ordered[i];var current=ordered[j];if(range.start>current.end+1){ordered[++j]=range}else if(range.end>current.end){current.end=range.end;current.index=Math.min(current.index,range.index)}}ordered.length=j+1;var combined=ordered.sort(sortByRangeIndex).map(mapWithoutIndex);combined.type=ranges.type;return combined}function mapWithIndex(range,index){return{start:range.start,end:range.end,index:index}}function mapWithoutIndex(range){return{start:range.start,end:range.end}}function sortByRangeIndex(a,b){return a.index-b.index}function sortByRangeStart(a,b){return a.start-b.start}},{}],463:[function(require,module,exports){"use strict";var bytes=require("bytes");var createError=require("http-errors");var iconv=require("iconv-lite");var unpipe=require("unpipe");module.exports=getRawBody;var ICONV_ENCODING_MESSAGE_REGEXP=/^Encoding not recognized: /;function getDecoder(encoding){if(!encoding)return null;try{return iconv.getDecoder(encoding)}catch(e){if(!ICONV_ENCODING_MESSAGE_REGEXP.test(e.message))throw e;throw createError(415,"specified encoding unsupported",{encoding:encoding,type:"encoding.unsupported"})}}function getRawBody(stream,options,callback){var done=callback;var opts=options||{};if(options===true||typeof options==="string"){opts={encoding:options}}if(typeof options==="function"){done=options;opts={}}if(done!==undefined&&typeof done!=="function"){throw new TypeError("argument callback must be a function")}if(!done&&!global.Promise){throw new TypeError("argument callback is required")}var encoding=opts.encoding!==true?opts.encoding:"utf-8";var limit=bytes.parse(opts.limit);var length=opts.length!=null&&!isNaN(opts.length)?parseInt(opts.length,10):null;if(done){return readStream(stream,encoding,length,limit,done)}return new Promise(function executor(resolve,reject){readStream(stream,encoding,length,limit,function onRead(err,buf){if(err)return reject(err);resolve(buf)})})}function halt(stream){unpipe(stream);if(typeof stream.pause==="function"){stream.pause()}}function readStream(stream,encoding,length,limit,callback){var complete=false;var sync=true;if(limit!==null&&length!==null&&length>limit){return done(createError(413,"request entity too large",{expected:length,length:length,limit:limit,type:"entity.too.large"}))}var state=stream._readableState;if(stream._decoder||state&&(state.encoding||state.decoder)){return done(createError(500,"stream encoding should not be set",{type:"stream.encoding.set"}))}var received=0;var decoder;try{decoder=getDecoder(encoding)}catch(err){return done(err)}var buffer=decoder?"":[];stream.on("aborted",onAborted);stream.on("close",cleanup);stream.on("data",onData);stream.on("end",onEnd);stream.on("error",onEnd);sync=false;function done(){var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}complete=true;if(sync){process.nextTick(invokeCallback)}else{invokeCallback()}function invokeCallback(){cleanup();if(args[0]){halt(stream)}callback.apply(null,args)}}function onAborted(){if(complete)return;done(createError(400,"request aborted",{code:"ECONNABORTED",expected:length,length:length,received:received,type:"request.aborted"}))}function onData(chunk){if(complete)return;received+=chunk.length;if(limit!==null&&received>limit){done(createError(413,"request entity too large",{limit:limit,received:received,type:"entity.too.large"}))}else if(decoder){buffer+=decoder.write(chunk)}else{buffer.push(chunk)}}function onEnd(err){if(complete)return;if(err)return done(err);if(length!==null&&received!==length){done(createError(400,"request size did not match content length",{expected:length,length:length,received:received,type:"request.size.invalid"}))}else{var string=decoder?buffer+(decoder.end()||""):Buffer.concat(buffer);done(null,string)}}function cleanup(){buffer=null;stream.removeListener("aborted",onAborted);stream.removeListener("data",onData);stream.removeListener("end",onEnd);stream.removeListener("error",onEnd);stream.removeListener("close",cleanup)}}},{bytes:252,"http-errors":357,"iconv-lite":383,unpipe:564}],464:[function(require,module,exports){var Reflect;(function(Reflect){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var supportsSymbol=typeof Symbol==="function";var toPrimitiveSymbol=supportsSymbol&&typeof Symbol.toPrimitive!=="undefined"?Symbol.toPrimitive:"@@toPrimitive";var iteratorSymbol=supportsSymbol&&typeof Symbol.iterator!=="undefined"?Symbol.iterator:"@@iterator";var HashMap;(function(HashMap){var supportsCreate=typeof Object.create==="function";var supportsProto={__proto__:[]}instanceof Array;var downLevel=!supportsCreate&&!supportsProto;HashMap.create=supportsCreate?function(){return MakeDictionary(Object.create(null))}:supportsProto?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})};HashMap.has=downLevel?function(map,key){return hasOwn.call(map,key)}:function(map,key){return key in map};HashMap.get=downLevel?function(map,key){return hasOwn.call(map,key)?map[key]:undefined}:function(map,key){return map[key]}})(HashMap||(HashMap={}));var functionPrototype=Object.getPrototypeOf(Function);var usePolyfill=typeof process==="object"&&process.env&&process.env["REFLECT_METADATA_USE_MAP_POLYFILL"]==="true";var _Map=!usePolyfill&&typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:CreateMapPolyfill();var _Set=!usePolyfill&&typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:CreateSetPolyfill();var _WeakMap=!usePolyfill&&typeof WeakMap==="function"?WeakMap:CreateWeakMapPolyfill();var Metadata=new _WeakMap;function decorate(decorators,target,propertyKey,attributes){if(!IsUndefined(propertyKey)){if(!IsArray(decorators))throw new TypeError;if(!IsObject(target))throw new TypeError;if(!IsObject(attributes)&&!IsUndefined(attributes)&&!IsNull(attributes))throw new TypeError;if(IsNull(attributes))attributes=undefined;propertyKey=ToPropertyKey(propertyKey);return DecorateProperty(decorators,target,propertyKey,attributes)}else{if(!IsArray(decorators))throw new TypeError;if(!IsConstructor(target))throw new TypeError;return DecorateConstructor(decorators,target)}}Reflect.decorate=decorate;function metadata(metadataKey,metadataValue){function decorator(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey)&&!IsPropertyKey(propertyKey))throw new TypeError;OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}return decorator}Reflect.metadata=metadata;function defineMetadata(metadataKey,metadataValue,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}Reflect.defineMetadata=defineMetadata;function hasMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryHasMetadata(metadataKey,target,propertyKey)}Reflect.hasMetadata=hasMetadata;function hasOwnMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryHasOwnMetadata(metadataKey,target,propertyKey)}Reflect.hasOwnMetadata=hasOwnMetadata;function getMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryGetMetadata(metadataKey,target,propertyKey)}Reflect.getMetadata=getMetadata;function getOwnMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryGetOwnMetadata(metadataKey,target,propertyKey)}Reflect.getOwnMetadata=getOwnMetadata;function getMetadataKeys(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryMetadataKeys(target,propertyKey)}Reflect.getMetadataKeys=getMetadataKeys;function getOwnMetadataKeys(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);return OrdinaryOwnMetadataKeys(target,propertyKey)}Reflect.getOwnMetadataKeys=getOwnMetadataKeys;function deleteMetadata(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey))propertyKey=ToPropertyKey(propertyKey);var metadataMap=GetOrCreateMetadataMap(target,propertyKey,false);if(IsUndefined(metadataMap))return false;if(!metadataMap.delete(metadataKey))return false;if(metadataMap.size>0)return true;var targetMetadata=Metadata.get(target);targetMetadata.delete(propertyKey);if(targetMetadata.size>0)return true;Metadata.delete(target);return true}Reflect.deleteMetadata=deleteMetadata;function DecorateConstructor(decorators,target){for(var i=decorators.length-1;i>=0;--i){var decorator=decorators[i];var decorated=decorator(target);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsConstructor(decorated))throw new TypeError;target=decorated}}return target}function DecorateProperty(decorators,target,propertyKey,descriptor){for(var i=decorators.length-1;i>=0;--i){var decorator=decorators[i];var decorated=decorator(target,propertyKey,descriptor);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsObject(decorated))throw new TypeError;descriptor=decorated}}return descriptor}function GetOrCreateMetadataMap(O,P,Create){var targetMetadata=Metadata.get(O);if(IsUndefined(targetMetadata)){if(!Create)return undefined;targetMetadata=new _Map;Metadata.set(O,targetMetadata)}var metadataMap=targetMetadata.get(P);if(IsUndefined(metadataMap)){if(!Create)return undefined;metadataMap=new _Map;targetMetadata.set(P,metadataMap)}return metadataMap}function OrdinaryHasMetadata(MetadataKey,O,P){var hasOwn=OrdinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return true;var parent=OrdinaryGetPrototypeOf(O);if(!IsNull(parent))return OrdinaryHasMetadata(MetadataKey,parent,P);return false}function OrdinaryHasOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,false);if(IsUndefined(metadataMap))return false;return ToBoolean(metadataMap.has(MetadataKey))}function OrdinaryGetMetadata(MetadataKey,O,P){var hasOwn=OrdinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return OrdinaryGetOwnMetadata(MetadataKey,O,P);var parent=OrdinaryGetPrototypeOf(O);if(!IsNull(parent))return OrdinaryGetMetadata(MetadataKey,parent,P);return undefined}function OrdinaryGetOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,false);if(IsUndefined(metadataMap))return undefined;return metadataMap.get(MetadataKey)}function OrdinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,true);metadataMap.set(MetadataKey,MetadataValue)}function OrdinaryMetadataKeys(O,P){var ownKeys=OrdinaryOwnMetadataKeys(O,P);var parent=OrdinaryGetPrototypeOf(O);if(parent===null)return ownKeys;var parentKeys=OrdinaryMetadataKeys(parent,P);if(parentKeys.length<=0)return ownKeys;if(ownKeys.length<=0)return parentKeys;var set=new _Set;var keys=[];for(var _i=0,ownKeys_1=ownKeys;_i<ownKeys_1.length;_i++){var key=ownKeys_1[_i];var hasKey=set.has(key);if(!hasKey){set.add(key);keys.push(key)}}for(var _a=0,parentKeys_1=parentKeys;_a<parentKeys_1.length;_a++){var key=parentKeys_1[_a];var hasKey=set.has(key);if(!hasKey){set.add(key);keys.push(key)}}return keys}function OrdinaryOwnMetadataKeys(O,P){var keys=[];var metadataMap=GetOrCreateMetadataMap(O,P,false);if(IsUndefined(metadataMap))return keys;var keysObj=metadataMap.keys();var iterator=GetIterator(keysObj);var k=0;while(true){var next=IteratorStep(iterator);if(!next){keys.length=k;return keys}var nextValue=IteratorValue(next);try{keys[k]=nextValue}catch(e){try{IteratorClose(iterator)}finally{throw e}}k++}}function Type(x){if(x===null)return 1;switch(typeof x){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return x===null?1:6;default:return 6}}function IsUndefined(x){return x===undefined}function IsNull(x){return x===null}function IsSymbol(x){return typeof x==="symbol"}function IsObject(x){return typeof x==="object"?x!==null:typeof x==="function"}function ToPrimitive(input,PreferredType){switch(Type(input)){case 0:return input;case 1:return input;case 2:return input;case 3:return input;case 4:return input;case 5:return input}var hint=PreferredType===3?"string":PreferredType===5?"number":"default";var exoticToPrim=GetMethod(input,toPrimitiveSymbol);if(exoticToPrim!==undefined){var result=exoticToPrim.call(input,hint);if(IsObject(result))throw new TypeError;return result}return OrdinaryToPrimitive(input,hint==="default"?"number":hint)}function OrdinaryToPrimitive(O,hint){if(hint==="string"){var toString_1=O.toString;if(IsCallable(toString_1)){var result=toString_1.call(O);if(!IsObject(result))return result}var valueOf=O.valueOf;if(IsCallable(valueOf)){var result=valueOf.call(O);if(!IsObject(result))return result}}else{var valueOf=O.valueOf;if(IsCallable(valueOf)){var result=valueOf.call(O);if(!IsObject(result))return result}var toString_2=O.toString;if(IsCallable(toString_2)){var result=toString_2.call(O);if(!IsObject(result))return result}}throw new TypeError}function ToBoolean(argument){return!!argument}function ToString(argument){return""+argument}function ToPropertyKey(argument){var key=ToPrimitive(argument,3);if(IsSymbol(key))return key;return ToString(key)}function IsArray(argument){return Array.isArray?Array.isArray(argument):argument instanceof Object?argument instanceof Array:Object.prototype.toString.call(argument)==="[object Array]"}function IsCallable(argument){return typeof argument==="function"}function IsConstructor(argument){return typeof argument==="function"}function IsPropertyKey(argument){switch(Type(argument)){case 3:return true;case 4:return true;default:return false}}function GetMethod(V,P){var func=V[P];if(func===undefined||func===null)return undefined;if(!IsCallable(func))throw new TypeError;return func}function GetIterator(obj){var method=GetMethod(obj,iteratorSymbol);if(!IsCallable(method))throw new TypeError;var iterator=method.call(obj);if(!IsObject(iterator))throw new TypeError;return iterator}function IteratorValue(iterResult){return iterResult.value}function IteratorStep(iterator){var result=iterator.next();return result.done?false:result}function IteratorClose(iterator){var f=iterator["return"];if(f)f.call(iterator)}function OrdinaryGetPrototypeOf(O){var proto=Object.getPrototypeOf(O);if(typeof O!=="function"||O===functionPrototype)return proto;if(proto!==functionPrototype)return proto;var prototype=O.prototype;var prototypeProto=prototype&&Object.getPrototypeOf(prototype);if(prototypeProto==null||prototypeProto===Object.prototype)return proto;var constructor=prototypeProto.constructor;if(typeof constructor!=="function")return proto;if(constructor===O)return proto;return constructor}function CreateMapPolyfill(){var cacheSentinel={};var arraySentinel=[];var MapIterator=function(){function MapIterator(keys,values,selector){this._index=0;this._keys=keys;this._values=values;this._selector=selector}MapIterator.prototype["@@iterator"]=function(){return this};MapIterator.prototype[iteratorSymbol]=function(){return this};MapIterator.prototype.next=function(){var index=this._index;if(index>=0&&index<this._keys.length){var result=this._selector(this._keys[index],this._values[index]);if(index+1>=this._keys.length){this._index=-1;this._keys=arraySentinel;this._values=arraySentinel}else{this._index++}return{value:result,done:false}}return{value:undefined,done:true}};MapIterator.prototype.throw=function(error){if(this._index>=0){this._index=-1;this._keys=arraySentinel;this._values=arraySentinel}throw error};MapIterator.prototype.return=function(value){if(this._index>=0){this._index=-1;this._keys=arraySentinel;this._values=arraySentinel}return{value:value,done:true}};return MapIterator}();return function(){function Map(){this._keys=[];this._values=[];this._cacheKey=cacheSentinel;this._cacheIndex=-2}Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:true,configurable:true});Map.prototype.has=function(key){return this._find(key,false)>=0};Map.prototype.get=function(key){var index=this._find(key,false);return index>=0?this._values[index]:undefined};Map.prototype.set=function(key,value){var index=this._find(key,true);this._values[index]=value;return this};Map.prototype.delete=function(key){var index=this._find(key,false);if(index>=0){var size=this._keys.length;for(var i=index+1;i<size;i++){this._keys[i-1]=this._keys[i];this._values[i-1]=this._values[i]}this._keys.length--;this._values.length--;if(key===this._cacheKey){this._cacheKey=cacheSentinel;this._cacheIndex=-2}return true}return false};Map.prototype.clear=function(){this._keys.length=0;this._values.length=0;this._cacheKey=cacheSentinel;this._cacheIndex=-2};Map.prototype.keys=function(){return new MapIterator(this._keys,this._values,getKey)};Map.prototype.values=function(){return new MapIterator(this._keys,this._values,getValue)};Map.prototype.entries=function(){return new MapIterator(this._keys,this._values,getEntry)};Map.prototype["@@iterator"]=function(){return this.entries()};Map.prototype[iteratorSymbol]=function(){return this.entries()};Map.prototype._find=function(key,insert){if(this._cacheKey!==key){this._cacheIndex=this._keys.indexOf(this._cacheKey=key)}if(this._cacheIndex<0&&insert){this._cacheIndex=this._keys.length;this._keys.push(key);this._values.push(undefined)}return this._cacheIndex};return Map}();function getKey(key,_){return key}function getValue(_,value){return value}function getEntry(key,value){return[key,value]}}function CreateSetPolyfill(){return function(){function Set(){this._map=new _Map}Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:true,configurable:true});Set.prototype.has=function(value){return this._map.has(value)};Set.prototype.add=function(value){return this._map.set(value,value),this};Set.prototype.delete=function(value){return this._map.delete(value)};Set.prototype.clear=function(){this._map.clear()};Set.prototype.keys=function(){return this._map.keys()};Set.prototype.values=function(){return this._map.values()};Set.prototype.entries=function(){return this._map.entries()};Set.prototype["@@iterator"]=function(){return this.keys()};Set.prototype[iteratorSymbol]=function(){return this.keys()};return Set}()}function CreateWeakMapPolyfill(){var UUID_SIZE=16;var keys=HashMap.create();var rootKey=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}WeakMap.prototype.has=function(target){var table=GetOrCreateWeakMapTable(target,false);return table!==undefined?HashMap.has(table,this._key):false};WeakMap.prototype.get=function(target){var table=GetOrCreateWeakMapTable(target,false);return table!==undefined?HashMap.get(table,this._key):undefined};WeakMap.prototype.set=function(target,value){var table=GetOrCreateWeakMapTable(target,true);table[this._key]=value;return this};WeakMap.prototype.delete=function(target){var table=GetOrCreateWeakMapTable(target,false);return table!==undefined?delete table[this._key]:false};WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()};return WeakMap}();function CreateUniqueKey(){var key;do{key="@@WeakMap@@"+CreateUUID()}while(HashMap.has(keys,key));keys[key]=true;return key}function GetOrCreateWeakMapTable(target,create){if(!hasOwn.call(target,rootKey)){if(!create)return undefined;Object.defineProperty(target,rootKey,{value:HashMap.create()})}return target[rootKey]}function FillRandomBytes(buffer,size){for(var i=0;i<size;++i)buffer[i]=Math.random()*255|0;return buffer}function GenRandomBytes(size){if(typeof Uint8Array==="function"){if(typeof crypto!=="undefined")return crypto.getRandomValues(new Uint8Array(size));if(typeof msCrypto!=="undefined")return msCrypto.getRandomValues(new Uint8Array(size));return FillRandomBytes(new Uint8Array(size),size)}return FillRandomBytes(new Array(size),size)}function CreateUUID(){var data=GenRandomBytes(UUID_SIZE);data[6]=data[6]&79|64;data[8]=data[8]&191|128;var result="";for(var offset=0;offset<UUID_SIZE;++offset){var byte=data[offset];if(offset===4||offset===6||offset===8)result+="-";if(byte<16)result+="0";result+=byte.toString(16).toLowerCase()}return result}}function MakeDictionary(obj){obj.__=undefined;delete obj.__;return obj}(function(__global){if(typeof __global.Reflect!=="undefined"){if(__global.Reflect!==Reflect){for(var p in Reflect){if(hasOwn.call(Reflect,p)){__global.Reflect[p]=Reflect[p]}}}}else{__global.Reflect=Reflect}})(typeof global!=="undefined"?global:typeof self!=="undefined"?self:Function("return this;")())})(Reflect||(Reflect={}))},{}],465:[function(require,module,exports){"use strict";var core=require("../"),isArray=require("lodash/isArray"),isFunction=require("lodash/isFunction"),isObjectLike=require("lodash/isObjectLike");module.exports=function(options){var errorText="Please verify options";if(!isObjectLike(options)){throw new TypeError(errorText)}if(!isFunction(options.request)){throw new TypeError(errorText+".request")}if(!isArray(options.expose)||options.expose.length===0){throw new TypeError(errorText+".expose")}var plumbing=core({PromiseImpl:options.PromiseImpl,constructorMixin:options.constructorMixin});var originalInit=options.request.Request.prototype.init;options.request.Request.prototype.init=function RP$initInterceptor(requestOptions){if(isObjectLike(requestOptions)&&!this._callback&&!this._rp_promise){plumbing.init.call(this,requestOptions)}return originalInit.apply(this,arguments)};var thenExposed=false;for(var i=0;i<options.expose.length;i+=1){var method=options.expose[i];plumbing[method==="promise"?"exposePromise":"exposePromiseMethod"](options.request.Request.prototype,null,"_rp_promise",method);if(method==="then"){thenExposed=true}}if(!thenExposed){throw new Error('Please expose "then"')}}},{"../":467,"lodash/isArray":417,"lodash/isFunction":418,"lodash/isObjectLike":420}],466:[function(require,module,exports){"use strict";function RequestError(cause,options,response){this.name="RequestError";this.message=String(cause);this.cause=cause;this.error=cause;this.options=options;this.response=response;if(Error.captureStackTrace){Error.captureStackTrace(this)}}RequestError.prototype=Object.create(Error.prototype);RequestError.prototype.constructor=RequestError;function StatusCodeError(statusCode,body,options,response){this.name="StatusCodeError";this.statusCode=statusCode;this.message=statusCode+" - "+(JSON&&JSON.stringify?JSON.stringify(body):body);this.error=body;this.options=options;this.response=response;if(Error.captureStackTrace){Error.captureStackTrace(this)}}StatusCodeError.prototype=Object.create(Error.prototype);StatusCodeError.prototype.constructor=StatusCodeError;function TransformError(cause,options,response){this.name="TransformError";this.message=String(cause);this.cause=cause;this.error=cause;this.options=options;this.response=response;if(Error.captureStackTrace){Error.captureStackTrace(this)}}TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;module.exports={RequestError:RequestError,StatusCodeError:StatusCodeError,TransformError:TransformError}},{}],467:[function(require,module,exports){"use strict";var errors=require("./errors.js"),isFunction=require("lodash/isFunction"),isObjectLike=require("lodash/isObjectLike"),isString=require("lodash/isString"),isUndefined=require("lodash/isUndefined");module.exports=function(options){var errorText="Please verify options";if(!isObjectLike(options)){throw new TypeError(errorText)}if(!isFunction(options.PromiseImpl)){throw new TypeError(errorText+".PromiseImpl")}if(!isUndefined(options.constructorMixin)&&!isFunction(options.constructorMixin)){throw new TypeError(errorText+".PromiseImpl")}var PromiseImpl=options.PromiseImpl;var constructorMixin=options.constructorMixin;var plumbing={};plumbing.init=function(requestOptions){var self=this;self._rp_promise=new PromiseImpl(function(resolve,reject){self._rp_resolve=resolve;self._rp_reject=reject;if(constructorMixin){constructorMixin.apply(self,arguments)}});self._rp_callbackOrig=requestOptions.callback;requestOptions.callback=self.callback=function RP$callback(err,response,body){plumbing.callback.call(self,err,response,body)};if(isString(requestOptions.method)){requestOptions.method=requestOptions.method.toUpperCase()}requestOptions.transform=requestOptions.transform||plumbing.defaultTransformations[requestOptions.method];self._rp_options=requestOptions;self._rp_options.simple=requestOptions.simple!==false;self._rp_options.resolveWithFullResponse=requestOptions.resolveWithFullResponse===true;self._rp_options.transform2xxOnly=requestOptions.transform2xxOnly===true};plumbing.defaultTransformations={HEAD:function(body,response,resolveWithFullResponse){return resolveWithFullResponse?response:response.headers}};plumbing.callback=function(err,response,body){var self=this;var origCallbackThrewException=false,thrownException=null;if(isFunction(self._rp_callbackOrig)){try{self._rp_callbackOrig.apply(self,arguments)}catch(e){origCallbackThrewException=true;thrownException=e}}var is2xx=!err&&/^2/.test(""+response.statusCode);if(err){self._rp_reject(new errors.RequestError(err,self._rp_options,response))}else if(self._rp_options.simple&&!is2xx){if(isFunction(self._rp_options.transform)&&self._rp_options.transform2xxOnly===false){new PromiseImpl(function(resolve){resolve(self._rp_options.transform(body,response,self._rp_options.resolveWithFullResponse))}).then(function(transformedResponse){self._rp_reject(new errors.StatusCodeError(response.statusCode,body,self._rp_options,transformedResponse))}).catch(function(transformErr){self._rp_reject(new errors.TransformError(transformErr,self._rp_options,response))})}else{self._rp_reject(new errors.StatusCodeError(response.statusCode,body,self._rp_options,response))}}else{if(isFunction(self._rp_options.transform)&&(is2xx||self._rp_options.transform2xxOnly===false)){new PromiseImpl(function(resolve){resolve(self._rp_options.transform(body,response,self._rp_options.resolveWithFullResponse))}).then(function(transformedResponse){self._rp_resolve(transformedResponse)}).catch(function(transformErr){self._rp_reject(new errors.TransformError(transformErr,self._rp_options,response))})}else if(self._rp_options.resolveWithFullResponse){self._rp_resolve(response)}else{self._rp_resolve(body)}}if(origCallbackThrewException){throw thrownException}};plumbing.exposePromiseMethod=function(exposeTo,bindTo,promisePropertyKey,methodToExpose,exposeAs){exposeAs=exposeAs||methodToExpose;if(exposeAs in exposeTo){throw new Error('Unable to expose method "'+exposeAs+'"')}exposeTo[exposeAs]=function RP$exposed(){var self=bindTo||this;return self[promisePropertyKey][methodToExpose].apply(self[promisePropertyKey],arguments)}};plumbing.exposePromise=function(exposeTo,bindTo,promisePropertyKey,exposeAs){exposeAs=exposeAs||"promise";if(exposeAs in exposeTo){throw new Error('Unable to expose method "'+exposeAs+'"')}exposeTo[exposeAs]=function RP$promise(){var self=bindTo||this;return self[promisePropertyKey]}};return plumbing}},{"./errors.js":466,"lodash/isFunction":418,"lodash/isObjectLike":420,"lodash/isString":421,"lodash/isUndefined":422}],468:[function(require,module,exports){"use strict";var configure=require("request-promise-core/configure/request2"),stealthyRequire=require("stealthy-require");var request=stealthyRequire(require.cache,function(){return require("request")},function(){require("tough-cookie")},module);configure({request:request,PromiseImpl:Promise,expose:["then","catch","promise"]});module.exports=request},{request:469,"request-promise-core/configure/request2":465,"stealthy-require":519,"tough-cookie":547}],469:[function(require,module,exports){"use strict";var extend=require("extend");var cookies=require("./lib/cookies");var helpers=require("./lib/helpers");var paramsHaveRequestBody=helpers.paramsHaveRequestBody;function initParams(uri,options,callback){if(typeof options==="function"){callback=options}var params={};if(typeof options==="object"){extend(params,options,{uri:uri})}else if(typeof uri==="string"){extend(params,{uri:uri})}else{extend(params,uri)}params.callback=callback||params.callback;return params}function request(uri,options,callback){if(typeof uri==="undefined"){throw new Error("undefined is not a valid uri or options object.")}var params=initParams(uri,options,callback);if(params.method==="HEAD"&&paramsHaveRequestBody(params)){throw new Error("HTTP HEAD requests MUST NOT include a request body.")}return new request.Request(params)}function verbFunc(verb){var method=verb.toUpperCase();return function(uri,options,callback){var params=initParams(uri,options,callback);params.method=method;return request(params,params.callback)}}request.get=verbFunc("get");request.head=verbFunc("head");request.options=verbFunc("options");request.post=verbFunc("post");request.put=verbFunc("put");request.patch=verbFunc("patch");request.del=verbFunc("delete");request["delete"]=verbFunc("delete");request.jar=function(store){return cookies.jar(store)};request.cookie=function(str){return cookies.parse(str)};function wrapRequestMethod(method,options,requester,verb){return function(uri,opts,callback){var params=initParams(uri,opts,callback);var target={};extend(true,target,options,params);target.pool=params.pool||options.pool;if(verb){target.method=verb.toUpperCase()}if(typeof requester==="function"){method=requester}return method(target,target.callback)}}request.defaults=function(options,requester){var self=this;options=options||{};if(typeof options==="function"){requester=options;options={}}var defaults=wrapRequestMethod(self,options,requester);var verbs=["get","head","post","put","patch","del","delete"];verbs.forEach(function(verb){defaults[verb]=wrapRequestMethod(self[verb],options,requester,verb)});defaults.cookie=wrapRequestMethod(self.cookie,options,requester);defaults.jar=self.jar;defaults.defaults=self.defaults;return defaults};request.forever=function(agentOptions,optionsArg){var options={};if(optionsArg){extend(options,optionsArg)}if(agentOptions){options.agentOptions=agentOptions}options.forever=true;return request.defaults(options)};module.exports=request;request.Request=require("./request");request.initParams=initParams;Object.defineProperty(request,"debug",{enumerable:true,get:function(){return request.Request.debug},set:function(debug){request.Request.debug=debug}})},{"./lib/cookies":471,"./lib/helpers":474,"./request":480,extend:299}],470:[function(require,module,exports){"use strict";var caseless=require("caseless");var uuid=require("uuid");var helpers=require("./helpers");var md5=helpers.md5;var toBase64=helpers.toBase64;function Auth(request){this.request=request;this.hasAuth=false;this.sentAuth=false;this.bearerToken=null;this.user=null;this.pass=null}Auth.prototype.basic=function(user,pass,sendImmediately){var self=this;if(typeof user!=="string"||pass!==undefined&&typeof pass!=="string"){self.request.emit("error",new Error("auth() received invalid user or password"))}self.user=user;self.pass=pass;self.hasAuth=true;var header=user+":"+(pass||"");if(sendImmediately||typeof sendImmediately==="undefined"){var authHeader="Basic "+toBase64(header);self.sentAuth=true;return authHeader}};Auth.prototype.bearer=function(bearer,sendImmediately){var self=this;self.bearerToken=bearer;self.hasAuth=true;if(sendImmediately||typeof sendImmediately==="undefined"){if(typeof bearer==="function"){bearer=bearer()}var authHeader="Bearer "+(bearer||"");self.sentAuth=true;return authHeader}};Auth.prototype.digest=function(method,path,authHeader){var self=this;var challenge={};var re=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){var match=re.exec(authHeader);if(!match){break}challenge[match[1]]=match[2]||match[3]}var ha1Compute=function(algorithm,user,realm,pass,nonce,cnonce){var ha1=md5(user+":"+realm+":"+pass);if(algorithm&&algorithm.toLowerCase()==="md5-sess"){return md5(ha1+":"+nonce+":"+cnonce)}else{return ha1}};var qop=/(^|,)\s*auth\s*($|,)/.test(challenge.qop)&&"auth";var nc=qop&&"00000001";var cnonce=qop&&uuid().replace(/-/g,"");var ha1=ha1Compute(challenge.algorithm,self.user,challenge.realm,self.pass,challenge.nonce,cnonce);var ha2=md5(method+":"+path);var digestResponse=qop?md5(ha1+":"+challenge.nonce+":"+nc+":"+cnonce+":"+qop+":"+ha2):md5(ha1+":"+challenge.nonce+":"+ha2);var authValues={username:self.user,realm:challenge.realm,nonce:challenge.nonce,uri:path,qop:qop,response:digestResponse,nc:nc,cnonce:cnonce,algorithm:challenge.algorithm,opaque:challenge.opaque};authHeader=[];for(var k in authValues){if(authValues[k]){if(k==="qop"||k==="nc"||k==="algorithm"){authHeader.push(k+"="+authValues[k])}else{authHeader.push(k+'="'+authValues[k]+'"')}}}authHeader="Digest "+authHeader.join(", ");self.sentAuth=true;return authHeader};Auth.prototype.onRequest=function(user,pass,sendImmediately,bearer){var self=this;var request=self.request;var authHeader;if(bearer===undefined&&user===undefined){self.request.emit("error",new Error("no auth mechanism defined"))}else if(bearer!==undefined){authHeader=self.bearer(bearer,sendImmediately)}else{authHeader=self.basic(user,pass,sendImmediately)}if(authHeader){request.setHeader("authorization",authHeader)}};Auth.prototype.onResponse=function(response){var self=this;var request=self.request;if(!self.hasAuth||self.sentAuth){return null}var c=caseless(response.headers);var authHeader=c.get("www-authenticate");var authVerb=authHeader&&authHeader.split(" ")[0].toLowerCase();request.debug("reauth",authVerb);switch(authVerb){case"basic":return self.basic(self.user,self.pass,true);case"bearer":return self.bearer(self.bearerToken,true);case"digest":return self.digest(request.method,request.path,authHeader)}};exports.Auth=Auth},{"./helpers":474,caseless:253,uuid:566}],471:[function(require,module,exports){"use strict";var tough=require("tough-cookie");var Cookie=tough.Cookie;var CookieJar=tough.CookieJar;exports.parse=function(str){if(str&&str.uri){str=str.uri}if(typeof str!=="string"){throw new Error("The cookie function only accepts STRING as param")}return Cookie.parse(str,{loose:true})};function RequestJar(store){var self=this;self._jar=new CookieJar(store,{looseMode:true})}RequestJar.prototype.setCookie=function(cookieOrStr,uri,options){var self=this;return self._jar.setCookieSync(cookieOrStr,uri,options||{})};RequestJar.prototype.getCookieString=function(uri){var self=this;return self._jar.getCookieStringSync(uri)};RequestJar.prototype.getCookies=function(uri){var self=this;return self._jar.getCookiesSync(uri)};exports.jar=function(store){return new RequestJar(store)}},{"tough-cookie":547}],472:[function(require,module,exports){"use strict";function formatHostname(hostname){return hostname.replace(/^\.*/,".").toLowerCase()}function parseNoProxyZone(zone){zone=zone.trim().toLowerCase();var zoneParts=zone.split(":",2);var zoneHost=formatHostname(zoneParts[0]);var zonePort=zoneParts[1];var hasPort=zone.indexOf(":")>-1;return{hostname:zoneHost,port:zonePort,hasPort:hasPort}}function uriInNoProxy(uri,noProxy){var port=uri.port||(uri.protocol==="https:"?"443":"80");var hostname=formatHostname(uri.hostname);var noProxyList=noProxy.split(",");return noProxyList.map(parseNoProxyZone).some(function(noProxyZone){var isMatchedAt=hostname.indexOf(noProxyZone.hostname);var hostnameMatched=isMatchedAt>-1&&isMatchedAt===hostname.length-noProxyZone.hostname.length;if(noProxyZone.hasPort){return port===noProxyZone.port&&hostnameMatched}return hostnameMatched})}function getProxyFromURI(uri){var noProxy=process.env.NO_PROXY||process.env.no_proxy||"";if(noProxy==="*"){return null}if(noProxy!==""&&uriInNoProxy(uri,noProxy)){return null}if(uri.protocol==="http:"){return process.env.HTTP_PROXY||process.env.http_proxy||null}if(uri.protocol==="https:"){return process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null}return null}module.exports=getProxyFromURI},{}],473:[function(require,module,exports){"use strict";var fs=require("fs");var qs=require("querystring");var validate=require("har-validator");var extend=require("extend");function Har(request){this.request=request}Har.prototype.reducer=function(obj,pair){if(obj[pair.name]===undefined){obj[pair.name]=pair.value;return obj}var arr=[obj[pair.name],pair.value];obj[pair.name]=arr;return obj};Har.prototype.prep=function(data){data.queryObj={};data.headersObj={};data.postData.jsonObj=false;data.postData.paramsObj=false;if(data.queryString&&data.queryString.length){data.queryObj=data.queryString.reduce(this.reducer,{})}if(data.headers&&data.headers.length){data.headersObj=data.headers.reduceRight(function(headers,header){headers[header.name]=header.value;return headers},{})}if(data.cookies&&data.cookies.length){var cookies=data.cookies.map(function(cookie){return cookie.name+"="+cookie.value});if(cookies.length){data.headersObj.cookie=cookies.join("; ")}}function some(arr){return arr.some(function(type){return data.postData.mimeType.indexOf(type)===0})}if(some(["multipart/mixed","multipart/related","multipart/form-data","multipart/alternative"])){data.postData.mimeType="multipart/form-data"}else if(some(["application/x-www-form-urlencoded"])){if(!data.postData.params){data.postData.text=""}else{data.postData.paramsObj=data.postData.params.reduce(this.reducer,{});data.postData.text=qs.stringify(data.postData.paramsObj)}}else if(some(["text/json","text/x-json","application/json","application/x-json"])){data.postData.mimeType="application/json";if(data.postData.text){try{data.postData.jsonObj=JSON.parse(data.postData.text)}catch(e){this.request.debug(e);data.postData.mimeType="text/plain"}}}return data};Har.prototype.options=function(options){if(!options.har){return options}var har={};extend(har,options.har);if(har.log&&har.log.entries){har=har.log.entries[0]}har.url=har.url||options.url||options.uri||options.baseUrl||"/";har.httpVersion=har.httpVersion||"HTTP/1.1";har.queryString=har.queryString||[];har.headers=har.headers||[];har.cookies=har.cookies||[];har.postData=har.postData||{};har.postData.mimeType=har.postData.mimeType||"application/octet-stream";har.bodySize=0;har.headersSize=0;har.postData.size=0;if(!validate.request(har)){return options}var req=this.prep(har);if(req.url){options.url=req.url}if(req.method){options.method=req.method}if(Object.keys(req.queryObj).length){options.qs=req.queryObj}if(Object.keys(req.headersObj).length){options.headers=req.headersObj}function test(type){return req.postData.mimeType.indexOf(type)===0}if(test("application/x-www-form-urlencoded")){options.form=req.postData.paramsObj}else if(test("application/json")){if(req.postData.jsonObj){options.body=req.postData.jsonObj;options.json=true}}else if(test("multipart/form-data")){options.formData={};req.postData.params.forEach(function(param){var attachment={};if(!param.fileName&&!param.fileName&&!param.contentType){options.formData[param.name]=param.value;return}if(param.fileName&&!param.value){attachment.value=fs.createReadStream(param.fileName)}else if(param.value){attachment.value=param.value}if(param.fileName){attachment.options={filename:param.fileName,contentType:param.contentType?param.contentType:null}}options.formData[param.name]=attachment})}else{if(req.postData.text){options.body=req.postData.text}}return options};exports.Har=Har},{extend:299,fs:undefined,"har-validator":347,querystring:undefined}],474:[function(require,module,exports){"use strict";var jsonSafeStringify=require("json-stringify-safe");var crypto=require("crypto");var Buffer=require("safe-buffer").Buffer;var defer=typeof setImmediate==="undefined"?process.nextTick:setImmediate;function paramsHaveRequestBody(params){return params.body||params.requestBodyStream||params.json&&typeof params.json!=="boolean"||params.multipart}function safeStringify(obj,replacer){var ret;try{ret=JSON.stringify(obj,replacer)}catch(e){ret=jsonSafeStringify(obj,replacer)}return ret}function md5(str){return crypto.createHash("md5").update(str).digest("hex")}function isReadStream(rs){return rs.readable&&rs.path&&rs.mode}function toBase64(str){return Buffer.from(str||"","utf8").toString("base64")}function copy(obj){var o={};Object.keys(obj).forEach(function(i){o[i]=obj[i]});return o}function version(){var numbers=process.version.replace("v","").split(".");return{major:parseInt(numbers[0],10),minor:parseInt(numbers[1],10),patch:parseInt(numbers[2],10)}}exports.paramsHaveRequestBody=paramsHaveRequestBody;exports.safeStringify=safeStringify;exports.md5=md5;exports.isReadStream=isReadStream;exports.toBase64=toBase64;exports.copy=copy;exports.version=version;exports.defer=defer},{crypto:undefined,"json-stringify-safe":409,"safe-buffer":484}],475:[function(require,module,exports){"use strict";var uuid=require("uuid");var CombinedStream=require("combined-stream");var isstream=require("isstream");var Buffer=require("safe-buffer").Buffer;function Multipart(request){this.request=request;this.boundary=uuid();this.chunked=false;this.body=null}Multipart.prototype.isChunked=function(options){var self=this;var chunked=false;var parts=options.data||options;if(!parts.forEach){self.request.emit("error",new Error("Argument error, options.multipart."))}if(options.chunked!==undefined){chunked=options.chunked}if(self.request.getHeader("transfer-encoding")==="chunked"){chunked=true}if(!chunked){parts.forEach(function(part){if(typeof part.body==="undefined"){self.request.emit("error",new Error("Body attribute missing in multipart."))}if(isstream(part.body)){chunked=true}})}return chunked};Multipart.prototype.setHeaders=function(chunked){var self=this;if(chunked&&!self.request.hasHeader("transfer-encoding")){self.request.setHeader("transfer-encoding","chunked")}var header=self.request.getHeader("content-type");if(!header||header.indexOf("multipart")===-1){self.request.setHeader("content-type","multipart/related; boundary="+self.boundary)}else{if(header.indexOf("boundary")!==-1){self.boundary=header.replace(/.*boundary=([^\s;]+).*/,"$1")}else{self.request.setHeader("content-type",header+"; boundary="+self.boundary)}}};Multipart.prototype.build=function(parts,chunked){var self=this;var body=chunked?new CombinedStream:[];function add(part){if(typeof part==="number"){part=part.toString()}return chunked?body.append(part):body.push(Buffer.from(part))}if(self.request.preambleCRLF){add("\r\n")}parts.forEach(function(part){var preamble="--"+self.boundary+"\r\n";Object.keys(part).forEach(function(key){if(key==="body"){return}preamble+=key+": "+part[key]+"\r\n"});preamble+="\r\n";add(preamble);add(part.body);add("\r\n")});add("--"+self.boundary+"--");if(self.request.postambleCRLF){add("\r\n")}return body};Multipart.prototype.onRequest=function(options){var self=this;var chunked=self.isChunked(options);var parts=options.data||options;self.setHeaders(chunked);self.chunked=chunked;self.body=self.build(parts,chunked)};exports.Multipart=Multipart},{"combined-stream":255,isstream:404,"safe-buffer":484,uuid:566}],476:[function(require,module,exports){"use strict";var url=require("url");var qs=require("qs");var caseless=require("caseless");var uuid=require("uuid");var oauth=require("oauth-sign");var crypto=require("crypto");var Buffer=require("safe-buffer").Buffer;function OAuth(request){this.request=request;this.params=null}OAuth.prototype.buildParams=function(_oauth,uri,method,query,form,qsLib){var oa={};for(var i in _oauth){oa["oauth_"+i]=_oauth[i]}if(!oa.oauth_version){oa.oauth_version="1.0"}if(!oa.oauth_timestamp){oa.oauth_timestamp=Math.floor(Date.now()/1e3).toString()}if(!oa.oauth_nonce){oa.oauth_nonce=uuid().replace(/-/g,"")}if(!oa.oauth_signature_method){oa.oauth_signature_method="HMAC-SHA1"}var consumer_secret_or_private_key=oa.oauth_consumer_secret||oa.oauth_private_key;delete oa.oauth_consumer_secret;delete oa.oauth_private_key;var token_secret=oa.oauth_token_secret;delete oa.oauth_token_secret;var realm=oa.oauth_realm;delete oa.oauth_realm;delete oa.oauth_transport_method;var baseurl=uri.protocol+"//"+uri.host+uri.pathname;var params=qsLib.parse([].concat(query,form,qsLib.stringify(oa)).join("&"));oa.oauth_signature=oauth.sign(oa.oauth_signature_method,method,baseurl,params,consumer_secret_or_private_key,token_secret);if(realm){oa.realm=realm}return oa};OAuth.prototype.buildBodyHash=function(_oauth,body){if(["HMAC-SHA1","RSA-SHA1"].indexOf(_oauth.signature_method||"HMAC-SHA1")<0){this.request.emit("error",new Error("oauth: "+_oauth.signature_method+" signature_method not supported with body_hash signing."))}var shasum=crypto.createHash("sha1");shasum.update(body||"");var sha1=shasum.digest("hex");return Buffer.from(sha1).toString("base64")};OAuth.prototype.concatParams=function(oa,sep,wrap){wrap=wrap||"";var params=Object.keys(oa).filter(function(i){return i!=="realm"&&i!=="oauth_signature"}).sort();if(oa.realm){params.splice(0,0,"realm")}params.push("oauth_signature");return params.map(function(i){return i+"="+wrap+oauth.rfc3986(oa[i])+wrap}).join(sep)};OAuth.prototype.onRequest=function(_oauth){var self=this;self.params=_oauth;var uri=self.request.uri||{};var method=self.request.method||"";var headers=caseless(self.request.headers);var body=self.request.body||"";var qsLib=self.request.qsLib||qs;var form;var query;var contentType=headers.get("content-type")||"";var formContentType="application/x-www-form-urlencoded";var transport=_oauth.transport_method||"header";if(contentType.slice(0,formContentType.length)===formContentType){contentType=formContentType;form=body}if(uri.query){query=uri.query}if(transport==="body"&&(method!=="POST"||contentType!==formContentType)){self.request.emit("error",new Error("oauth: transport_method of body requires POST "+"and content-type "+formContentType))}if(!form&&typeof _oauth.body_hash==="boolean"){_oauth.body_hash=self.buildBodyHash(_oauth,self.request.body.toString())}var oa=self.buildParams(_oauth,uri,method,query,form,qsLib);switch(transport){case"header":self.request.setHeader("Authorization","OAuth "+self.concatParams(oa,",",'"'));break;case"query":var href=self.request.uri.href+=(query?"&":"?")+self.concatParams(oa,"&");self.request.uri=url.parse(href);self.request.path=self.request.uri.path;break;case"body":self.request.body=(form?form+"&":"")+self.concatParams(oa,"&");break;default:self.request.emit("error",new Error("oauth: transport_method invalid"))}};exports.OAuth=OAuth},{caseless:253,crypto:undefined,"oauth-sign":446,qs:458,"safe-buffer":484,url:undefined,uuid:566}],477:[function(require,module,exports){"use strict";var qs=require("qs");var querystring=require("querystring");function Querystring(request){this.request=request;this.lib=null;this.useQuerystring=null;this.parseOptions=null;this.stringifyOptions=null}Querystring.prototype.init=function(options){if(this.lib){return}this.useQuerystring=options.useQuerystring;this.lib=this.useQuerystring?querystring:qs;this.parseOptions=options.qsParseOptions||{};this.stringifyOptions=options.qsStringifyOptions||{}};Querystring.prototype.stringify=function(obj){return this.useQuerystring?this.rfc3986(this.lib.stringify(obj,this.stringifyOptions.sep||null,this.stringifyOptions.eq||null,this.stringifyOptions)):this.lib.stringify(obj,this.stringifyOptions)};Querystring.prototype.parse=function(str){return this.useQuerystring?this.lib.parse(str,this.parseOptions.sep||null,this.parseOptions.eq||null,this.parseOptions):this.lib.parse(str,this.parseOptions)};Querystring.prototype.rfc3986=function(str){return str.replace(/[!'()*]/g,function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()})};Querystring.prototype.unescape=querystring.unescape;exports.Querystring=Querystring},{qs:458,querystring:undefined}],478:[function(require,module,exports){"use strict";var url=require("url");var isUrl=/^https?:/;function Redirect(request){this.request=request;this.followRedirect=true;this.followRedirects=true;this.followAllRedirects=false;this.followOriginalHttpMethod=false;this.allowRedirect=function(){return true};this.maxRedirects=10;this.redirects=[];this.redirectsFollowed=0;this.removeRefererHeader=false}Redirect.prototype.onRequest=function(options){var self=this;if(options.maxRedirects!==undefined){self.maxRedirects=options.maxRedirects}if(typeof options.followRedirect==="function"){self.allowRedirect=options.followRedirect}if(options.followRedirect!==undefined){self.followRedirects=!!options.followRedirect}if(options.followAllRedirects!==undefined){self.followAllRedirects=options.followAllRedirects}if(self.followRedirects||self.followAllRedirects){self.redirects=self.redirects||[]}if(options.removeRefererHeader!==undefined){self.removeRefererHeader=options.removeRefererHeader}if(options.followOriginalHttpMethod!==undefined){self.followOriginalHttpMethod=options.followOriginalHttpMethod}};Redirect.prototype.redirectTo=function(response){var self=this;var request=self.request;var redirectTo=null;if(response.statusCode>=300&&response.statusCode<400&&response.caseless.has("location")){var location=response.caseless.get("location");request.debug("redirect",location);if(self.followAllRedirects){redirectTo=location}else if(self.followRedirects){switch(request.method){case"PATCH":case"PUT":case"POST":case"DELETE":break;default:redirectTo=location;break}}}else if(response.statusCode===401){var authHeader=request._auth.onResponse(response);if(authHeader){request.setHeader("authorization",authHeader);redirectTo=request.uri}}return redirectTo};Redirect.prototype.onResponse=function(response){var self=this;var request=self.request;var redirectTo=self.redirectTo(response);if(!redirectTo||!self.allowRedirect.call(request,response)){return false}request.debug("redirect to",redirectTo);if(response.resume){response.resume()}if(self.redirectsFollowed>=self.maxRedirects){request.emit("error",new Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+request.uri.href));return false}self.redirectsFollowed+=1;if(!isUrl.test(redirectTo)){redirectTo=url.resolve(request.uri.href,redirectTo)}var uriPrev=request.uri;request.uri=url.parse(redirectTo);if(request.uri.protocol!==uriPrev.protocol){delete request.agent}self.redirects.push({statusCode:response.statusCode,redirectUri:redirectTo});if(self.followAllRedirects&&request.method!=="HEAD"&&response.statusCode!==401&&response.statusCode!==307){request.method=self.followOriginalHttpMethod?request.method:"GET"}delete request.src;delete request.req;delete request._started;if(response.statusCode!==401&&response.statusCode!==307){delete request.body;delete request._form;if(request.headers){request.removeHeader("host");request.removeHeader("content-type");request.removeHeader("content-length");if(request.uri.hostname!==request.originalHost.split(":")[0]){request.removeHeader("authorization")}}}if(!self.removeRefererHeader){request.setHeader("referer",uriPrev.href)}request.emit("redirect");request.init();return true};exports.Redirect=Redirect},{url:undefined}],479:[function(require,module,exports){"use strict";var url=require("url");var tunnel=require("tunnel-agent");var defaultProxyHeaderWhiteList=["accept","accept-charset","accept-encoding","accept-language","accept-ranges","cache-control","content-encoding","content-language","content-location","content-md5","content-range","content-type","connection","date","expect","max-forwards","pragma","referer","te","user-agent","via"];var defaultProxyHeaderExclusiveList=["proxy-authorization"];function constructProxyHost(uriObject){var port=uriObject.port;var protocol=uriObject.protocol;var proxyHost=uriObject.hostname+":";if(port){proxyHost+=port}else if(protocol==="https:"){proxyHost+="443"}else{proxyHost+="80"}return proxyHost}function constructProxyHeaderWhiteList(headers,proxyHeaderWhiteList){var whiteList=proxyHeaderWhiteList.reduce(function(set,header){set[header.toLowerCase()]=true;return set},{});return Object.keys(headers).filter(function(header){return whiteList[header.toLowerCase()]}).reduce(function(set,header){set[header]=headers[header];return set},{})}function constructTunnelOptions(request,proxyHeaders){var proxy=request.proxy;var tunnelOptions={proxy:{host:proxy.hostname,port:+proxy.port,proxyAuth:proxy.auth,headers:proxyHeaders},headers:request.headers,ca:request.ca,cert:request.cert,key:request.key,passphrase:request.passphrase,pfx:request.pfx,ciphers:request.ciphers,rejectUnauthorized:request.rejectUnauthorized,secureOptions:request.secureOptions,secureProtocol:request.secureProtocol};return tunnelOptions}function constructTunnelFnName(uri,proxy){var uriProtocol=uri.protocol==="https:"?"https":"http";var proxyProtocol=proxy.protocol==="https:"?"Https":"Http";return[uriProtocol,proxyProtocol].join("Over")}function getTunnelFn(request){var uri=request.uri;var proxy=request.proxy;var tunnelFnName=constructTunnelFnName(uri,proxy);return tunnel[tunnelFnName]}function Tunnel(request){this.request=request;this.proxyHeaderWhiteList=defaultProxyHeaderWhiteList;this.proxyHeaderExclusiveList=[];if(typeof request.tunnel!=="undefined"){this.tunnelOverride=request.tunnel}}Tunnel.prototype.isEnabled=function(){var self=this;var request=self.request;if(typeof self.tunnelOverride!=="undefined"){return self.tunnelOverride}if(request.uri.protocol==="https:"){return true}return false};Tunnel.prototype.setup=function(options){var self=this;var request=self.request;options=options||{};if(typeof request.proxy==="string"){request.proxy=url.parse(request.proxy)}if(!request.proxy||!request.tunnel){return false}if(options.proxyHeaderWhiteList){self.proxyHeaderWhiteList=options.proxyHeaderWhiteList}if(options.proxyHeaderExclusiveList){self.proxyHeaderExclusiveList=options.proxyHeaderExclusiveList}var proxyHeaderExclusiveList=self.proxyHeaderExclusiveList.concat(defaultProxyHeaderExclusiveList);var proxyHeaderWhiteList=self.proxyHeaderWhiteList.concat(proxyHeaderExclusiveList);var proxyHeaders=constructProxyHeaderWhiteList(request.headers,proxyHeaderWhiteList);proxyHeaders.host=constructProxyHost(request.uri);proxyHeaderExclusiveList.forEach(request.removeHeader,request);var tunnelFn=getTunnelFn(request);var tunnelOptions=constructTunnelOptions(request,proxyHeaders);request.agent=tunnelFn(tunnelOptions);return true};Tunnel.defaultProxyHeaderWhiteList=defaultProxyHeaderWhiteList;Tunnel.defaultProxyHeaderExclusiveList=defaultProxyHeaderExclusiveList;exports.Tunnel=Tunnel},{"tunnel-agent":555,url:undefined}],480:[function(require,module,exports){"use strict";var http=require("http");var https=require("https");var url=require("url");var util=require("util");var stream=require("stream");var zlib=require("zlib");var hawk=require("hawk");var aws2=require("aws-sign2");var aws4=require("aws4");var httpSignature=require("http-signature");var mime=require("mime-types");var stringstream=require("stringstream");var caseless=require("caseless");var ForeverAgent=require("forever-agent");var FormData=require("form-data");var extend=require("extend");var isstream=require("isstream");var isTypedArray=require("is-typedarray").strict;var helpers=require("./lib/helpers");var cookies=require("./lib/cookies");var getProxyFromURI=require("./lib/getProxyFromURI");var Querystring=require("./lib/querystring").Querystring;var Har=require("./lib/har").Har;var Auth=require("./lib/auth").Auth;var OAuth=require("./lib/oauth").OAuth;var Multipart=require("./lib/multipart").Multipart;var Redirect=require("./lib/redirect").Redirect;var Tunnel=require("./lib/tunnel").Tunnel;var now=require("performance-now");var Buffer=require("safe-buffer").Buffer;var safeStringify=helpers.safeStringify;var isReadStream=helpers.isReadStream;var toBase64=helpers.toBase64;var defer=helpers.defer;var copy=helpers.copy;var version=helpers.version;var globalCookieJar=cookies.jar();var globalPool={};function filterForNonReserved(reserved,options){var object={};for(var i in options){var notReserved=reserved.indexOf(i)===-1;if(notReserved){object[i]=options[i]}}return object}function filterOutReservedFunctions(reserved,options){var object={};for(var i in options){var isReserved=!(reserved.indexOf(i)===-1);var isFunction=typeof options[i]==="function";if(!(isReserved&&isFunction)){object[i]=options[i]}}return object}function requestToJSON(){var self=this;return{uri:self.uri,method:self.method,headers:self.headers}}function responseToJSON(){var self=this;return{statusCode:self.statusCode,body:self.body,headers:self.headers,request:requestToJSON.call(self.request)}}function Request(options){var self=this;if(options.har){self._har=new Har(self);options=self._har.options(options)}stream.Stream.call(self);var reserved=Object.keys(Request.prototype);var nonReserved=filterForNonReserved(reserved,options);extend(self,nonReserved);options=filterOutReservedFunctions(reserved,options);self.readable=true;self.writable=true;if(options.method){self.explicitMethod=true}self._qs=new Querystring(self);self._auth=new Auth(self);self._oauth=new OAuth(self);self._multipart=new Multipart(self);self._redirect=new Redirect(self);self._tunnel=new Tunnel(self);self.init(options)}util.inherits(Request,stream.Stream);Request.debug=process.env.NODE_DEBUG&&/\brequest\b/.test(process.env.NODE_DEBUG);function debug(){if(Request.debug){console.error("REQUEST %s",util.format.apply(util,arguments))}}Request.prototype.debug=debug;Request.prototype.init=function(options){var self=this;if(!options){options={}}self.headers=self.headers?copy(self.headers):{};for(var headerName in self.headers){if(typeof self.headers[headerName]==="undefined"){delete self.headers[headerName]}}caseless.httpify(self,self.headers);if(!self.method){self.method=options.method||"GET"}if(!self.localAddress){self.localAddress=options.localAddress}self._qs.init(options);debug(options);if(!self.pool&&self.pool!==false){self.pool=globalPool}self.dests=self.dests||[];self.__isRequestRequest=true;if(!self._callback&&self.callback){self._callback=self.callback;self.callback=function(){if(self._callbackCalled){return}self._callbackCalled=true;self._callback.apply(self,arguments)};self.on("error",self.callback.bind());self.on("complete",self.callback.bind(self,null))}if(!self.uri&&self.url){self.uri=self.url;delete self.url}if(self.baseUrl){if(typeof self.baseUrl!=="string"){return self.emit("error",new Error("options.baseUrl must be a string"))}if(typeof self.uri!=="string"){return self.emit("error",new Error("options.uri must be a string when using options.baseUrl"))}if(self.uri.indexOf("//")===0||self.uri.indexOf("://")!==-1){return self.emit("error",new Error("options.uri must be a path when using options.baseUrl"))}var baseUrlEndsWithSlash=self.baseUrl.lastIndexOf("/")===self.baseUrl.length-1;var uriStartsWithSlash=self.uri.indexOf("/")===0;if(baseUrlEndsWithSlash&&uriStartsWithSlash){self.uri=self.baseUrl+self.uri.slice(1)}else if(baseUrlEndsWithSlash||uriStartsWithSlash){self.uri=self.baseUrl+self.uri}else if(self.uri===""){self.uri=self.baseUrl}else{self.uri=self.baseUrl+"/"+self.uri}delete self.baseUrl}if(!self.uri){return self.emit("error",new Error("options.uri is a required argument"))}if(typeof self.uri==="string"){self.uri=url.parse(self.uri)}if(!self.uri.href){self.uri.href=url.format(self.uri)}if(self.uri.protocol==="unix:"){return self.emit("error",new Error("`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`"))}if(self.uri.host==="unix"){self.enableUnixSocket()}if(self.strictSSL===false){self.rejectUnauthorized=false}if(!self.uri.pathname){self.uri.pathname="/"}if(!(self.uri.host||self.uri.hostname&&self.uri.port)&&!self.uri.isUnix){var faultyUri=url.format(self.uri);var message='Invalid URI "'+faultyUri+'"';if(Object.keys(options).length===0){message+=". This can be caused by a crappy redirection."}self.abort();return self.emit("error",new Error(message))}if(!self.hasOwnProperty("proxy")){self.proxy=getProxyFromURI(self.uri)}self.tunnel=self._tunnel.isEnabled();if(self.proxy){self._tunnel.setup(options)}self._redirect.onRequest(options);self.setHost=false;if(!self.hasHeader("host")){var hostHeaderName=self.originalHostHeaderName||"host";self.setHeader(hostHeaderName,self.uri.host);self.setHost=true}self.jar(self._jar||options.jar);if(!self.uri.port){if(self.uri.protocol==="http:"){self.uri.port=80}else if(self.uri.protocol==="https:"){self.uri.port=443}}if(self.proxy&&!self.tunnel){self.port=self.proxy.port;self.host=self.proxy.hostname}else{self.port=self.uri.port;self.host=self.uri.hostname}if(options.form){self.form(options.form)}if(options.formData){var formData=options.formData;var requestForm=self.form();var appendFormValue=function(key,value){if(value&&value.hasOwnProperty("value")&&value.hasOwnProperty("options")){requestForm.append(key,value.value,value.options)}else{requestForm.append(key,value)}};for(var formKey in formData){if(formData.hasOwnProperty(formKey)){var formValue=formData[formKey];if(formValue instanceof Array){for(var j=0;j<formValue.length;j++){appendFormValue(formKey,formValue[j])}}else{appendFormValue(formKey,formValue)}}}}if(options.qs){self.qs(options.qs)}if(self.uri.path){self.path=self.uri.path}else{self.path=self.uri.pathname+(self.uri.search||"")}if(self.path.length===0){self.path="/"}if(options.aws){self.aws(options.aws)}if(options.hawk){self.hawk(options.hawk)}if(options.httpSignature){self.httpSignature(options.httpSignature)}if(options.auth){if(Object.prototype.hasOwnProperty.call(options.auth,"username")){options.auth.user=options.auth.username}if(Object.prototype.hasOwnProperty.call(options.auth,"password")){options.auth.pass=options.auth.password}self.auth(options.auth.user,options.auth.pass,options.auth.sendImmediately,options.auth.bearer)}if(self.gzip&&!self.hasHeader("accept-encoding")){self.setHeader("accept-encoding","gzip, deflate")}if(self.uri.auth&&!self.hasHeader("authorization")){var uriAuthPieces=self.uri.auth.split(":").map(function(item){return self._qs.unescape(item)});self.auth(uriAuthPieces[0],uriAuthPieces.slice(1).join(":"),true)}if(!self.tunnel&&self.proxy&&self.proxy.auth&&!self.hasHeader("proxy-authorization")){var proxyAuthPieces=self.proxy.auth.split(":").map(function(item){return self._qs.unescape(item)});var authHeader="Basic "+toBase64(proxyAuthPieces.join(":"));self.setHeader("proxy-authorization",authHeader)}if(self.proxy&&!self.tunnel){self.path=self.uri.protocol+"//"+self.uri.host+self.path}if(options.json){self.json(options.json)}if(options.multipart){self.multipart(options.multipart)}if(options.time){self.timing=true;self.elapsedTime=self.elapsedTime||0}function setContentLength(){if(isTypedArray(self.body)){self.body=Buffer.from(self.body)}if(!self.hasHeader("content-length")){var length;if(typeof self.body==="string"){length=Buffer.byteLength(self.body)}else if(Array.isArray(self.body)){length=self.body.reduce(function(a,b){return a+b.length},0)}else{length=self.body.length}if(length){self.setHeader("content-length",length)}else{self.emit("error",new Error("Argument error, options.body."))}}}if(self.body&&!isstream(self.body)){setContentLength()}if(options.oauth){self.oauth(options.oauth)}else if(self._oauth.params&&self.hasHeader("authorization")){self.oauth(self._oauth.params)}var protocol=self.proxy&&!self.tunnel?self.proxy.protocol:self.uri.protocol;var defaultModules={"http:":http,"https:":https};var httpModules=self.httpModules||{};self.httpModule=httpModules[protocol]||defaultModules[protocol];if(!self.httpModule){return self.emit("error",new Error("Invalid protocol: "+protocol))}if(options.ca){self.ca=options.ca}if(!self.agent){if(options.agentOptions){self.agentOptions=options.agentOptions}if(options.agentClass){self.agentClass=options.agentClass}else if(options.forever){var v=version();if(v.major===0&&v.minor<=10){self.agentClass=protocol==="http:"?ForeverAgent:ForeverAgent.SSL}else{self.agentClass=self.httpModule.Agent;self.agentOptions=self.agentOptions||{};self.agentOptions.keepAlive=true}}else{self.agentClass=self.httpModule.Agent}}if(self.pool===false){self.agent=false}else{self.agent=self.agent||self.getNewAgent()}self.on("pipe",function(src){if(self.ntick&&self._started){self.emit("error",new Error("You cannot pipe to this stream after the outbound request has started."))}self.src=src;if(isReadStream(src)){if(!self.hasHeader("content-type")){self.setHeader("content-type",mime.lookup(src.path))}}else{if(src.headers){for(var i in src.headers){if(!self.hasHeader(i)){self.setHeader(i,src.headers[i])}}}if(self._json&&!self.hasHeader("content-type")){self.setHeader("content-type","application/json")}if(src.method&&!self.explicitMethod){self.method=src.method}}});defer(function(){if(self._aborted){return}var end=function(){if(self._form){if(!self._auth.hasAuth){self._form.pipe(self)}else if(self._auth.hasAuth&&self._auth.sentAuth){self._form.pipe(self)}}if(self._multipart&&self._multipart.chunked){self._multipart.body.pipe(self)}if(self.body){if(isstream(self.body)){self.body.pipe(self)}else{setContentLength();if(Array.isArray(self.body)){self.body.forEach(function(part){self.write(part)})}else{self.write(self.body)}self.end()}}else if(self.requestBodyStream){console.warn("options.requestBodyStream is deprecated, please pass the request object to stream.pipe.");self.requestBodyStream.pipe(self)}else if(!self.src){if(self._auth.hasAuth&&!self._auth.sentAuth){self.end();return}if(self.method!=="GET"&&typeof self.method!=="undefined"){self.setHeader("content-length",0)}self.end()}};if(self._form&&!self.hasHeader("content-length")){self.setHeader(self._form.getHeaders(),true);self._form.getLength(function(err,length){if(!err&&!isNaN(length)){self.setHeader("content-length",length)}end()})}else{end()}self.ntick=true})};Request.prototype.getNewAgent=function(){var self=this;var Agent=self.agentClass;var options={};if(self.agentOptions){for(var i in self.agentOptions){options[i]=self.agentOptions[i]}}if(self.ca){options.ca=self.ca}if(self.ciphers){options.ciphers=self.ciphers}if(self.secureProtocol){options.secureProtocol=self.secureProtocol}if(self.secureOptions){options.secureOptions=self.secureOptions}if(typeof self.rejectUnauthorized!=="undefined"){options.rejectUnauthorized=self.rejectUnauthorized}if(self.cert&&self.key){options.key=self.key;options.cert=self.cert}if(self.pfx){options.pfx=self.pfx}if(self.passphrase){options.passphrase=self.passphrase}var poolKey="";if(Agent!==self.httpModule.Agent){poolKey+=Agent.name}var proxy=self.proxy;if(typeof proxy==="string"){proxy=url.parse(proxy)}var isHttps=proxy&&proxy.protocol==="https:"||this.uri.protocol==="https:";if(isHttps){if(options.ca){if(poolKey){poolKey+=":"}poolKey+=options.ca}if(typeof options.rejectUnauthorized!=="undefined"){if(poolKey){poolKey+=":"}poolKey+=options.rejectUnauthorized}if(options.cert){if(poolKey){poolKey+=":"}poolKey+=options.cert.toString("ascii")+options.key.toString("ascii")}if(options.pfx){if(poolKey){poolKey+=":"}poolKey+=options.pfx.toString("ascii")}if(options.ciphers){if(poolKey){poolKey+=":"}poolKey+=options.ciphers}if(options.secureProtocol){if(poolKey){poolKey+=":"}poolKey+=options.secureProtocol}if(options.secureOptions){if(poolKey){poolKey+=":"}poolKey+=options.secureOptions}}if(self.pool===globalPool&&!poolKey&&Object.keys(options).length===0&&self.httpModule.globalAgent){return self.httpModule.globalAgent}poolKey=self.uri.protocol+poolKey;if(!self.pool[poolKey]){self.pool[poolKey]=new Agent(options);if(self.pool.maxSockets){self.pool[poolKey].maxSockets=self.pool.maxSockets}}return self.pool[poolKey]};Request.prototype.start=function(){var self=this;if(self.timing){var startTime=(new Date).getTime();var startTimeNow=now()}if(self._aborted){return}self._started=true;self.method=self.method||"GET";self.href=self.uri.href;if(self.src&&self.src.stat&&self.src.stat.size&&!self.hasHeader("content-length")){self.setHeader("content-length",self.src.stat.size)}if(self._aws){self.aws(self._aws,true)}var reqOptions=copy(self);delete reqOptions.auth;debug("make request",self.uri.href);delete reqOptions.timeout;try{self.req=self.httpModule.request(reqOptions)}catch(err){self.emit("error",err);return}if(self.timing){self.startTime=startTime;self.startTimeNow=startTimeNow;self.timings={}}var timeout;if(self.timeout&&!self.timeoutTimer){if(self.timeout<0){timeout=0}else if(typeof self.timeout==="number"&&isFinite(self.timeout)){timeout=self.timeout}}self.req.on("response",self.onRequestResponse.bind(self));self.req.on("error",self.onRequestError.bind(self));self.req.on("drain",function(){self.emit("drain")});self.req.on("socket",function(socket){var isConnecting=socket._connecting||socket.connecting;if(self.timing){self.timings.socket=now()-self.startTimeNow;if(isConnecting){var onLookupTiming=function(){self.timings.lookup=now()-self.startTimeNow};var onConnectTiming=function(){self.timings.connect=now()-self.startTimeNow};socket.once("lookup",onLookupTiming);socket.once("connect",onConnectTiming);self.req.once("error",function(){socket.removeListener("lookup",onLookupTiming);socket.removeListener("connect",onConnectTiming)})}}var setReqTimeout=function(){self.req.setTimeout(timeout,function(){if(self.req){self.abort();var e=new Error("ESOCKETTIMEDOUT");e.code="ESOCKETTIMEDOUT";e.connect=false;self.emit("error",e)}})};if(timeout!==undefined){if(isConnecting){var onReqSockConnect=function(){socket.removeListener("connect",onReqSockConnect);clearTimeout(self.timeoutTimer);self.timeoutTimer=null;setReqTimeout()};socket.on("connect",onReqSockConnect);self.req.on("error",function(err){socket.removeListener("connect",onReqSockConnect)});self.timeoutTimer=setTimeout(function(){socket.removeListener("connect",onReqSockConnect);self.abort();var e=new Error("ETIMEDOUT");e.code="ETIMEDOUT";e.connect=true;self.emit("error",e)},timeout)}else{setReqTimeout()}}self.emit("socket",socket)});self.emit("request",self.req)};Request.prototype.onRequestError=function(error){var self=this;if(self._aborted){return}if(self.req&&self.req._reusedSocket&&error.code==="ECONNRESET"&&self.agent.addRequestNoreuse){self.agent={addRequest:self.agent.addRequestNoreuse.bind(self.agent)};self.start();self.req.end();return}if(self.timeout&&self.timeoutTimer){clearTimeout(self.timeoutTimer);self.timeoutTimer=null}self.emit("error",error)};Request.prototype.onRequestResponse=function(response){var self=this;if(self.timing){self.timings.response=now()-self.startTimeNow}debug("onRequestResponse",self.uri.href,response.statusCode,response.headers);response.on("end",function(){if(self.timing){self.timings.end=now()-self.startTimeNow;response.timingStart=self.startTime;if(!self.timings.socket){self.timings.socket=0}if(!self.timings.lookup){self.timings.lookup=self.timings.socket}if(!self.timings.connect){self.timings.connect=self.timings.lookup}if(!self.timings.response){self.timings.response=self.timings.connect}debug("elapsed time",self.timings.end);self.elapsedTime+=Math.round(self.timings.end);response.elapsedTime=self.elapsedTime;response.timings=self.timings;response.timingPhases={wait:self.timings.socket,dns:self.timings.lookup-self.timings.socket,tcp:self.timings.connect-self.timings.lookup,firstByte:self.timings.response-self.timings.connect,download:self.timings.end-self.timings.response,total:self.timings.end}}debug("response end",self.uri.href,response.statusCode,response.headers)});if(self._aborted){debug("aborted",self.uri.href);response.resume();return}self.response=response;response.request=self;response.toJSON=responseToJSON;if(self.httpModule===https&&self.strictSSL&&(!response.hasOwnProperty("socket")||!response.socket.authorized)){debug("strict ssl error",self.uri.href);var sslErr=response.hasOwnProperty("socket")?response.socket.authorizationError:self.uri.href+" does not support SSL";self.emit("error",new Error("SSL Error: "+sslErr));return}self.originalHost=self.getHeader("host");if(!self.originalHostHeaderName){self.originalHostHeaderName=self.hasHeader("host")}if(self.setHost){self.removeHeader("host")}if(self.timeout&&self.timeoutTimer){clearTimeout(self.timeoutTimer);self.timeoutTimer=null}var targetCookieJar=self._jar&&self._jar.setCookie?self._jar:globalCookieJar;var addCookie=function(cookie){try{targetCookieJar.setCookie(cookie,self.uri.href,{ignoreError:true})}catch(e){self.emit("error",e)}};response.caseless=caseless(response.headers);if(response.caseless.has("set-cookie")&&!self._disableCookies){var headerName=response.caseless.has("set-cookie");if(Array.isArray(response.headers[headerName])){response.headers[headerName].forEach(addCookie)}else{addCookie(response.headers[headerName])}}if(self._redirect.onResponse(response)){return}else{response.on("close",function(){if(!self._ended){self.response.emit("end")}});response.once("end",function(){self._ended=true});var noBody=function(code){return self.method==="HEAD"||code>=100&&code<200||code===204||code===304};var responseContent;if(self.gzip&&!noBody(response.statusCode)){var contentEncoding=response.headers["content-encoding"]||"identity";contentEncoding=contentEncoding.trim().toLowerCase();var zlibOptions={flush:zlib.Z_SYNC_FLUSH,finishFlush:zlib.Z_SYNC_FLUSH};if(contentEncoding==="gzip"){responseContent=zlib.createGunzip(zlibOptions);response.pipe(responseContent)}else if(contentEncoding==="deflate"){responseContent=zlib.createInflate(zlibOptions);response.pipe(responseContent)}else{if(contentEncoding!=="identity"){debug("ignoring unrecognized Content-Encoding "+contentEncoding)}responseContent=response}}else{responseContent=response}if(self.encoding){if(self.dests.length!==0){console.error("Ignoring encoding parameter as this stream is being piped to another stream which makes the encoding option invalid.")}else if(responseContent.setEncoding){responseContent.setEncoding(self.encoding)}else{responseContent=responseContent.pipe(stringstream(self.encoding))}}if(self._paused){responseContent.pause()}self.responseContent=responseContent;self.emit("response",response);self.dests.forEach(function(dest){self.pipeDest(dest)});responseContent.on("data",function(chunk){if(self.timing&&!self.responseStarted){self.responseStartTime=(new Date).getTime();response.responseStartTime=self.responseStartTime}self._destdata=true;self.emit("data",chunk)});responseContent.once("end",function(chunk){self.emit("end",chunk)});responseContent.on("error",function(error){self.emit("error",error)});responseContent.on("close",function(){self.emit("close")});if(self.callback){self.readResponseBody(response)}else{self.on("end",function(){if(self._aborted){debug("aborted",self.uri.href);return}self.emit("complete",response)})}}debug("finish init function",self.uri.href)};Request.prototype.readResponseBody=function(response){var self=this;debug("reading response's body");var buffers=[];var bufferLength=0;var strings=[];self.on("data",function(chunk){if(!Buffer.isBuffer(chunk)){strings.push(chunk)}else if(chunk.length){bufferLength+=chunk.length;buffers.push(chunk)}});self.on("end",function(){debug("end event",self.uri.href);if(self._aborted){debug("aborted",self.uri.href);buffers=[];bufferLength=0;return}if(bufferLength){debug("has body",self.uri.href,bufferLength);response.body=Buffer.concat(buffers,bufferLength);if(self.encoding!==null){response.body=response.body.toString(self.encoding)}buffers=[];bufferLength=0}else if(strings.length){if(self.encoding==="utf8"&&strings[0].length>0&&strings[0][0]==="\ufeff"){strings[0]=strings[0].substring(1)}response.body=strings.join("")}if(self._json){try{response.body=JSON.parse(response.body,self._jsonReviver)}catch(e){debug("invalid JSON received",self.uri.href)}}debug("emitting complete",self.uri.href);if(typeof response.body==="undefined"&&!self._json){response.body=self.encoding===null?Buffer.alloc(0):""}self.emit("complete",response,response.body)})};Request.prototype.abort=function(){var self=this;self._aborted=true;if(self.req){self.req.abort()}else if(self.response){self.response.destroy()}self.emit("abort")};Request.prototype.pipeDest=function(dest){var self=this;var response=self.response;if(dest.headers&&!dest.headersSent){if(response.caseless.has("content-type")){var ctname=response.caseless.has("content-type");if(dest.setHeader){dest.setHeader(ctname,response.headers[ctname])}else{dest.headers[ctname]=response.headers[ctname]}}if(response.caseless.has("content-length")){var clname=response.caseless.has("content-length");if(dest.setHeader){dest.setHeader(clname,response.headers[clname])}else{dest.headers[clname]=response.headers[clname]}}}if(dest.setHeader&&!dest.headersSent){for(var i in response.headers){if(!self.gzip||i!=="content-encoding"){dest.setHeader(i,response.headers[i])}}dest.statusCode=response.statusCode}if(self.pipefilter){self.pipefilter(response,dest)}};Request.prototype.qs=function(q,clobber){var self=this;var base;if(!clobber&&self.uri.query){base=self._qs.parse(self.uri.query)}else{base={}}for(var i in q){base[i]=q[i]}var qs=self._qs.stringify(base);if(qs===""){return self}self.uri=url.parse(self.uri.href.split("?")[0]+"?"+qs);self.url=self.uri;self.path=self.uri.path;if(self.uri.host==="unix"){self.enableUnixSocket()}return self};Request.prototype.form=function(form){var self=this;if(form){if(!/^application\/x-www-form-urlencoded\b/.test(self.getHeader("content-type"))){self.setHeader("content-type","application/x-www-form-urlencoded")}self.body=typeof form==="string"?self._qs.rfc3986(form.toString("utf8")):self._qs.stringify(form).toString("utf8");return self}self._form=new FormData;self._form.on("error",function(err){err.message="form-data: "+err.message;self.emit("error",err);self.abort()});return self._form};Request.prototype.multipart=function(multipart){var self=this;self._multipart.onRequest(multipart);if(!self._multipart.chunked){self.body=self._multipart.body}return self};Request.prototype.json=function(val){var self=this;if(!self.hasHeader("accept")){self.setHeader("accept","application/json")}if(typeof self.jsonReplacer==="function"){self._jsonReplacer=self.jsonReplacer}self._json=true;if(typeof val==="boolean"){if(self.body!==undefined){if(!/^application\/x-www-form-urlencoded\b/.test(self.getHeader("content-type"))){self.body=safeStringify(self.body,self._jsonReplacer)}else{self.body=self._qs.rfc3986(self.body)}if(!self.hasHeader("content-type")){self.setHeader("content-type","application/json")}}}else{self.body=safeStringify(val,self._jsonReplacer);if(!self.hasHeader("content-type")){self.setHeader("content-type","application/json")}}if(typeof self.jsonReviver==="function"){self._jsonReviver=self.jsonReviver}return self};Request.prototype.getHeader=function(name,headers){var self=this;var result,re,match;if(!headers){headers=self.headers}Object.keys(headers).forEach(function(key){if(key.length!==name.length){return}re=new RegExp(name,"i");match=key.match(re);if(match){result=headers[key]}});return result};Request.prototype.enableUnixSocket=function(){var unixParts=this.uri.path.split(":");var host=unixParts[0];var path=unixParts[1];this.socketPath=host;this.uri.pathname=path;this.uri.path=path;this.uri.host=host;this.uri.hostname=host;this.uri.isUnix=true};Request.prototype.auth=function(user,pass,sendImmediately,bearer){var self=this;self._auth.onRequest(user,pass,sendImmediately,bearer);return self};Request.prototype.aws=function(opts,now){var self=this;if(!now){self._aws=opts;return self}if(opts.sign_version===4||opts.sign_version==="4"){var options={host:self.uri.host,path:self.uri.path,method:self.method,headers:{"content-type":self.getHeader("content-type")||""},body:self.body};var signRes=aws4.sign(options,{accessKeyId:opts.key,secretAccessKey:opts.secret,sessionToken:opts.session});self.setHeader("authorization",signRes.headers.Authorization);self.setHeader("x-amz-date",signRes.headers["X-Amz-Date"]);if(signRes.headers["X-Amz-Security-Token"]){self.setHeader("x-amz-security-token",signRes.headers["X-Amz-Security-Token"])}}else{var date=new Date;self.setHeader("date",date.toUTCString());var auth={key:opts.key,secret:opts.secret,verb:self.method.toUpperCase(),date:date,contentType:self.getHeader("content-type")||"",md5:self.getHeader("content-md5")||"",amazonHeaders:aws2.canonicalizeHeaders(self.headers)};var path=self.uri.path;if(opts.bucket&&path){auth.resource="/"+opts.bucket+path}else if(opts.bucket&&!path){auth.resource="/"+opts.bucket}else if(!opts.bucket&&path){auth.resource=path}else if(!opts.bucket&&!path){auth.resource="/"}auth.resource=aws2.canonicalizeResource(auth.resource);self.setHeader("authorization",aws2.authorization(auth))}return self};Request.prototype.httpSignature=function(opts){var self=this;httpSignature.signRequest({getHeader:function(header){return self.getHeader(header,self.headers)},setHeader:function(header,value){self.setHeader(header,value)},method:self.method,path:self.path},opts);debug("httpSignature authorization",self.getHeader("authorization"));return self};Request.prototype.hawk=function(opts){var self=this;self.setHeader("Authorization",hawk.client.header(self.uri,self.method,opts).field)};Request.prototype.oauth=function(_oauth){var self=this;self._oauth.onRequest(_oauth);return self};Request.prototype.jar=function(jar){var self=this;var cookies;if(self._redirect.redirectsFollowed===0){self.originalCookieHeader=self.getHeader("cookie")}if(!jar){cookies=false;self._disableCookies=true}else{var targetCookieJar=jar&&jar.getCookieString?jar:globalCookieJar;var urihref=self.uri.href;if(targetCookieJar){cookies=targetCookieJar.getCookieString(urihref)}}if(cookies&&cookies.length){if(self.originalCookieHeader){self.setHeader("cookie",self.originalCookieHeader+"; "+cookies)}else{self.setHeader("cookie",cookies)}}self._jar=jar;return self};Request.prototype.pipe=function(dest,opts){var self=this;if(self.response){if(self._destdata){self.emit("error",new Error("You cannot pipe after data has been emitted from the response."))}else if(self._ended){self.emit("error",new Error("You cannot pipe after the response has been ended."))}else{stream.Stream.prototype.pipe.call(self,dest,opts);self.pipeDest(dest);return dest}}else{self.dests.push(dest);stream.Stream.prototype.pipe.call(self,dest,opts);return dest}};Request.prototype.write=function(){var self=this;if(self._aborted){return}if(!self._started){self.start()}if(self.req){return self.req.write.apply(self.req,arguments)}};Request.prototype.end=function(chunk){var self=this;if(self._aborted){return}if(chunk){self.write(chunk)}if(!self._started){self.start()}if(self.req){self.req.end()}};Request.prototype.pause=function(){var self=this;if(!self.responseContent){self._paused=true}else{self.responseContent.pause.apply(self.responseContent,arguments)}};Request.prototype.resume=function(){var self=this;if(!self.responseContent){self._paused=false}else{self.responseContent.resume.apply(self.responseContent,arguments)}};Request.prototype.destroy=function(){var self=this;if(!self._ended){self.end()}else if(self.response){self.response.destroy()}};Request.defaultProxyHeaderWhiteList=Tunnel.defaultProxyHeaderWhiteList.slice();Request.defaultProxyHeaderExclusiveList=Tunnel.defaultProxyHeaderExclusiveList.slice();Request.prototype.toJSON=requestToJSON;module.exports=Request},{"./lib/auth":470,"./lib/cookies":471,"./lib/getProxyFromURI":472,"./lib/har":473,"./lib/helpers":474,"./lib/multipart":475,"./lib/oauth":476,"./lib/querystring":477,"./lib/redirect":478,"./lib/tunnel":479,"aws-sign2":196,aws4:197,caseless:253,extend:299,"forever-agent":318,"form-data":319,hawk:351,http:undefined,"http-signature":359,https:undefined,"is-typedarray":403,isstream:404,"mime-types":429,"performance-now":453,"safe-buffer":484,stream:undefined,stringstream:520,url:undefined,util:undefined,zlib:undefined}],481:[function(require,module,exports){module.exports=require("./lib/retry")},{"./lib/retry":482}],482:[function(require,module,exports){var RetryOperation=require("./retry_operation");exports.operation=function(options){var timeouts=exports.timeouts(options);return new RetryOperation(timeouts,{forever:options&&options.forever,unref:options&&options.unref})};exports.timeouts=function(options){if(options instanceof Array){return[].concat(options)}var opts={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:Infinity,randomize:false};for(var key in options){opts[key]=options[key]}if(opts.minTimeout>opts.maxTimeout){throw new Error("minTimeout is greater than maxTimeout")}var timeouts=[];for(var i=0;i<opts.retries;i++){timeouts.push(this.createTimeout(i,opts))}if(options&&options.forever&&!timeouts.length){timeouts.push(this.createTimeout(i,opts))}timeouts.sort(function(a,b){return a-b});return timeouts};exports.createTimeout=function(attempt,opts){var random=opts.randomize?Math.random()+1:1;var timeout=Math.round(random*opts.minTimeout*Math.pow(opts.factor,attempt));timeout=Math.min(timeout,opts.maxTimeout);return timeout};exports.wrap=function(obj,options,methods){if(options instanceof Array){methods=options;options=null}if(!methods){methods=[];for(var key in obj){if(typeof obj[key]==="function"){methods.push(key)}}}for(var i=0;i<methods.length;i++){var method=methods[i];var original=obj[method];obj[method]=function retryWrapper(){var op=exports.operation(options);var args=Array.prototype.slice.call(arguments);var callback=args.pop();args.push(function(err){if(op.retry(err)){return}if(err){arguments[0]=op.mainError()}callback.apply(this,arguments)});op.attempt(function(){original.apply(obj,args)})};obj[method].options=options}}},{"./retry_operation":483}],483:[function(require,module,exports){function RetryOperation(timeouts,options){if(typeof options==="boolean"){options={forever:options}}this._timeouts=timeouts;this._options=options||{};this._fn=null;this._errors=[];this._attempts=1;this._operationTimeout=null;this._operationTimeoutCb=null;this._timeout=null;if(this._options.forever){this._cachedTimeouts=this._timeouts.slice(0)}}module.exports=RetryOperation;RetryOperation.prototype.stop=function(){if(this._timeout){clearTimeout(this._timeout)}this._timeouts=[];this._cachedTimeouts=null};RetryOperation.prototype.retry=function(err){if(this._timeout){clearTimeout(this._timeout)}if(!err){return false}this._errors.push(err);var timeout=this._timeouts.shift();if(timeout===undefined){if(this._cachedTimeouts){this._errors.splice(this._errors.length-1,this._errors.length);this._timeouts=this._cachedTimeouts.slice(0);timeout=this._timeouts.shift()}else{return false}}var self=this;var timer=setTimeout(function(){self._attempts++;if(self._operationTimeoutCb){self._timeout=setTimeout(function(){self._operationTimeoutCb(self._attempts)},self._operationTimeout);if(this._options.unref){self._timeout.unref()}}self._fn(self._attempts)},timeout);if(this._options.unref){timer.unref()}return true};RetryOperation.prototype.attempt=function(fn,timeoutOps){this._fn=fn;if(timeoutOps){if(timeoutOps.timeout){this._operationTimeout=timeoutOps.timeout}if(timeoutOps.cb){this._operationTimeoutCb=timeoutOps.cb}}var self=this;if(this._operationTimeoutCb){this._timeout=setTimeout(function(){self._operationTimeoutCb()},self._operationTimeout)}this._fn(this._attempts)};RetryOperation.prototype.try=function(fn){console.log("Using RetryOperation.try() is deprecated");this.attempt(fn)};RetryOperation.prototype.start=function(fn){console.log("Using RetryOperation.start() is deprecated");this.attempt(fn)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(this._errors.length===0){return null}var counts={};var mainError=null;var mainErrorCount=0;for(var i=0;i<this._errors.length;i++){var error=this._errors[i];var message=error.message;var count=(counts[message]||0)+1;counts[message]=count;if(count>=mainErrorCount){mainError=error;mainErrorCount=count}}return mainError}},{}],484:[function(require,module,exports){var buffer=require("buffer");var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key]}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==="number"){throw new TypeError("Argument must not be a number")}return Buffer(arg,encodingOrOffset,length)};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==="string"){buf.fill(fill,encoding)}else{buf.fill(fill)}}else{buf.fill(0)}return buf};SafeBuffer.allocUnsafe=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return Buffer(size)};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return buffer.SlowBuffer(size)}},{buffer:undefined}],485:[function(require,module,exports){"use strict";var createError=require("http-errors");var debug=require("debug")("send");var deprecate=require("depd")("send");var destroy=require("destroy");var encodeUrl=require("encodeurl");var escapeHtml=require("escape-html");var etag=require("etag");var fresh=require("fresh");var fs=require("fs");var mime=require("mime");var ms=require("ms");var onFinished=require("on-finished");var parseRange=require("range-parser");var path=require("path");var statuses=require("statuses");var Stream=require("stream");var util=require("util");var extname=path.extname;var join=path.join;var normalize=path.normalize;var resolve=path.resolve;var sep=path.sep;var BYTES_RANGE_REGEXP=/^ *bytes=/;var MAX_MAXAGE=60*60*24*365*1e3;var UP_PATH_REGEXP=/(?:^|[\\/])\.\.(?:[\\/]|$)/;module.exports=send;module.exports.mime=mime;function send(req,path,options){return new SendStream(req,path,options)}function SendStream(req,path,options){Stream.call(this);var opts=options||{};this.options=opts;this.path=path;this.req=req;this._acceptRanges=opts.acceptRanges!==undefined?Boolean(opts.acceptRanges):true;this._cacheControl=opts.cacheControl!==undefined?Boolean(opts.cacheControl):true;this._etag=opts.etag!==undefined?Boolean(opts.etag):true;this._dotfiles=opts.dotfiles!==undefined?opts.dotfiles:"ignore";if(this._dotfiles!=="ignore"&&this._dotfiles!=="allow"&&this._dotfiles!=="deny"){throw new TypeError('dotfiles option must be "allow", "deny", or "ignore"')}this._hidden=Boolean(opts.hidden);if(opts.hidden!==undefined){deprecate("hidden: use dotfiles: '"+(this._hidden?"allow":"ignore")+"' instead")}if(opts.dotfiles===undefined){this._dotfiles=undefined}this._extensions=opts.extensions!==undefined?normalizeList(opts.extensions,"extensions option"):[];this._immutable=opts.immutable!==undefined?Boolean(opts.immutable):false;this._index=opts.index!==undefined?normalizeList(opts.index,"index option"):["index.html"];this._lastModified=opts.lastModified!==undefined?Boolean(opts.lastModified):true;this._maxage=opts.maxAge||opts.maxage;this._maxage=typeof this._maxage==="string"?ms(this._maxage):Number(this._maxage);this._maxage=!isNaN(this._maxage)?Math.min(Math.max(0,this._maxage),MAX_MAXAGE):0;this._root=opts.root?resolve(opts.root):null;if(!this._root&&opts.from){this.from(opts.from)}}util.inherits(SendStream,Stream);SendStream.prototype.etag=deprecate.function(function etag(val){this._etag=Boolean(val);debug("etag %s",this._etag);return this},"send.etag: pass etag as option");SendStream.prototype.hidden=deprecate.function(function hidden(val){this._hidden=Boolean(val);this._dotfiles=undefined;debug("hidden %s",this._hidden);return this},"send.hidden: use dotfiles option");SendStream.prototype.index=deprecate.function(function index(paths){var index=!paths?[]:normalizeList(paths,"paths argument");debug("index %o",paths);this._index=index;return this},"send.index: pass index as option");SendStream.prototype.root=function root(path){this._root=resolve(String(path));debug("root %s",this._root);return this};SendStream.prototype.from=deprecate.function(SendStream.prototype.root,"send.from: pass root as option");SendStream.prototype.root=deprecate.function(SendStream.prototype.root,"send.root: pass root as option");SendStream.prototype.maxage=deprecate.function(function maxage(maxAge){this._maxage=typeof maxAge==="string"?ms(maxAge):Number(maxAge);this._maxage=!isNaN(this._maxage)?Math.min(Math.max(0,this._maxage),MAX_MAXAGE):0;debug("max-age %d",this._maxage);return this},"send.maxage: pass maxAge as option");SendStream.prototype.error=function error(status,err){if(hasListeners(this,"error")){return this.emit("error",createError(status,err,{expose:false}))}var res=this.res;var msg=statuses[status]||String(status);var doc=createHtmlDocument("Error",escapeHtml(msg));clearHeaders(res);if(err&&err.headers){setHeaders(res,err.headers)}res.statusCode=status;res.setHeader("Content-Type","text/html; charset=UTF-8");res.setHeader("Content-Length",Buffer.byteLength(doc));res.setHeader("Content-Security-Policy","default-src 'self'");res.setHeader("X-Content-Type-Options","nosniff");res.end(doc)};SendStream.prototype.hasTrailingSlash=function hasTrailingSlash(){return this.path[this.path.length-1]==="/"};SendStream.prototype.isConditionalGET=function isConditionalGET(){return this.req.headers["if-match"]||this.req.headers["if-unmodified-since"]||this.req.headers["if-none-match"]||this.req.headers["if-modified-since"]};SendStream.prototype.isPreconditionFailure=function isPreconditionFailure(){var req=this.req;var res=this.res;var match=req.headers["if-match"];if(match){var etag=res.getHeader("ETag");return!etag||match!=="*"&&parseTokenList(match).every(function(match){return match!==etag&&match!=="W/"+etag&&"W/"+match!==etag})}var unmodifiedSince=parseHttpDate(req.headers["if-unmodified-since"]);if(!isNaN(unmodifiedSince)){var lastModified=parseHttpDate(res.getHeader("Last-Modified"));return isNaN(lastModified)||lastModified>unmodifiedSince}return false};SendStream.prototype.removeContentHeaderFields=function removeContentHeaderFields(){var res=this.res;var headers=getHeaderNames(res);for(var i=0;i<headers.length;i++){var header=headers[i];if(header.substr(0,8)==="content-"&&header!=="content-location"){res.removeHeader(header)}}};SendStream.prototype.notModified=function notModified(){var res=this.res;debug("not modified");this.removeContentHeaderFields();res.statusCode=304;res.end()};SendStream.prototype.headersAlreadySent=function headersAlreadySent(){var err=new Error("Can't set headers after they are sent.");debug("headers already sent");this.error(500,err)};SendStream.prototype.isCachable=function isCachable(){var statusCode=this.res.statusCode;return statusCode>=200&&statusCode<300||statusCode===304};SendStream.prototype.onStatError=function onStatError(error){switch(error.code){case"ENAMETOOLONG":case"ENOENT":case"ENOTDIR":this.error(404,error);break;default:this.error(500,error);break}};SendStream.prototype.isFresh=function isFresh(){return fresh(this.req.headers,{etag:this.res.getHeader("ETag"),"last-modified":this.res.getHeader("Last-Modified")})};SendStream.prototype.isRangeFresh=function isRangeFresh(){var ifRange=this.req.headers["if-range"];if(!ifRange){return true}if(ifRange.indexOf('"')!==-1){var etag=this.res.getHeader("ETag");return Boolean(etag&&ifRange.indexOf(etag)!==-1)}var lastModified=this.res.getHeader("Last-Modified");return parseHttpDate(lastModified)<=parseHttpDate(ifRange)};SendStream.prototype.redirect=function redirect(path){var res=this.res;if(hasListeners(this,"directory")){this.emit("directory",res,path);return}if(this.hasTrailingSlash()){this.error(403);return}var loc=encodeUrl(collapseLeadingSlashes(this.path+"/"));var doc=createHtmlDocument("Redirecting",'Redirecting to <a href="'+escapeHtml(loc)+'">'+escapeHtml(loc)+"</a>");res.statusCode=301;res.setHeader("Content-Type","text/html; charset=UTF-8");res.setHeader("Content-Length",Buffer.byteLength(doc));res.setHeader("Content-Security-Policy","default-src 'self'");res.setHeader("X-Content-Type-Options","nosniff");res.setHeader("Location",loc);res.end(doc)};SendStream.prototype.pipe=function pipe(res){var root=this._root;this.res=res;var path=decode(this.path);if(path===-1){this.error(400);return res}if(~path.indexOf("\0")){this.error(400);return res}var parts;if(root!==null){if(path){path=normalize("."+sep+path)}if(UP_PATH_REGEXP.test(path)){debug('malicious path "%s"',path);this.error(403);return res}parts=path.split(sep);path=normalize(join(root,path));root=normalize(root+sep)}else{if(UP_PATH_REGEXP.test(path)){debug('malicious path "%s"',path);this.error(403);return res}parts=normalize(path).split(sep);path=resolve(path)}if(containsDotFile(parts)){var access=this._dotfiles;if(access===undefined){access=parts[parts.length-1][0]==="."?this._hidden?"allow":"ignore":"allow"}debug('%s dotfile "%s"',access,path);switch(access){case"allow":break;case"deny":this.error(403);return res;case"ignore":default:this.error(404);return res}}if(this._index.length&&this.hasTrailingSlash()){this.sendIndex(path);return res}this.sendFile(path);return res};SendStream.prototype.send=function send(path,stat){var len=stat.size;var options=this.options;var opts={};var res=this.res;var req=this.req;var ranges=req.headers.range;var offset=options.start||0;if(headersSent(res)){this.headersAlreadySent();return}debug('pipe "%s"',path);this.setHeader(path,stat);this.type(path);if(this.isConditionalGET()){if(this.isPreconditionFailure()){this.error(412);return}if(this.isCachable()&&this.isFresh()){this.notModified();return}}len=Math.max(0,len-offset);if(options.end!==undefined){var bytes=options.end-offset+1;if(len>bytes)len=bytes}if(this._acceptRanges&&BYTES_RANGE_REGEXP.test(ranges)){ranges=parseRange(len,ranges,{combine:true});if(!this.isRangeFresh()){debug("range stale");ranges=-2}if(ranges===-1){debug("range unsatisfiable");res.setHeader("Content-Range",contentRange("bytes",len));return this.error(416,{headers:{"Content-Range":res.getHeader("Content-Range")}})}if(ranges!==-2&&ranges.length===1){debug("range %j",ranges);res.statusCode=206;res.setHeader("Content-Range",contentRange("bytes",len,ranges[0]));offset+=ranges[0].start;len=ranges[0].end-ranges[0].start+1}}for(var prop in options){opts[prop]=options[prop]}opts.start=offset;opts.end=Math.max(offset,offset+len-1);res.setHeader("Content-Length",len);if(req.method==="HEAD"){res.end();return}this.stream(path,opts)};SendStream.prototype.sendFile=function sendFile(path){var i=0;var self=this;debug('stat "%s"',path);fs.stat(path,function onstat(err,stat){if(err&&err.code==="ENOENT"&&!extname(path)&&path[path.length-1]!==sep){return next(err)}if(err)return self.onStatError(err);if(stat.isDirectory())return self.redirect(path);self.emit("file",path,stat);self.send(path,stat)});function next(err){if(self._extensions.length<=i){return err?self.onStatError(err):self.error(404)}var p=path+"."+self._extensions[i++];debug('stat "%s"',p);fs.stat(p,function(err,stat){if(err)return next(err);if(stat.isDirectory())return next();self.emit("file",p,stat);self.send(p,stat)})}};SendStream.prototype.sendIndex=function sendIndex(path){var i=-1;var self=this;function next(err){if(++i>=self._index.length){if(err)return self.onStatError(err);return self.error(404)}var p=join(path,self._index[i]);debug('stat "%s"',p);fs.stat(p,function(err,stat){if(err)return next(err);if(stat.isDirectory())return next();self.emit("file",p,stat);self.send(p,stat)})}next()};SendStream.prototype.stream=function stream(path,options){var finished=false;var self=this;var res=this.res;var stream=fs.createReadStream(path,options);this.emit("stream",stream);stream.pipe(res);onFinished(res,function onfinished(){finished=true;destroy(stream)});stream.on("error",function onerror(err){if(finished)return;finished=true;destroy(stream);self.onStatError(err)});stream.on("end",function onend(){self.emit("end")})};SendStream.prototype.type=function type(path){var res=this.res;if(res.getHeader("Content-Type"))return;var type=mime.lookup(path);if(!type){debug("no content-type");return}var charset=mime.charsets.lookup(type);debug("content-type %s",type);res.setHeader("Content-Type",type+(charset?"; charset="+charset:""))};SendStream.prototype.setHeader=function setHeader(path,stat){var res=this.res;this.emit("headers",res,path,stat);if(this._acceptRanges&&!res.getHeader("Accept-Ranges")){debug("accept ranges");res.setHeader("Accept-Ranges","bytes")}if(this._cacheControl&&!res.getHeader("Cache-Control")){var cacheControl="public, max-age="+Math.floor(this._maxage/1e3);if(this._immutable){cacheControl+=", immutable"}debug("cache-control %s",cacheControl);res.setHeader("Cache-Control",cacheControl)}if(this._lastModified&&!res.getHeader("Last-Modified")){var modified=stat.mtime.toUTCString();debug("modified %s",modified);res.setHeader("Last-Modified",modified)}if(this._etag&&!res.getHeader("ETag")){var val=etag(stat);debug("etag %s",val);res.setHeader("ETag",val)}};function clearHeaders(res){var headers=getHeaderNames(res);for(var i=0;i<headers.length;i++){res.removeHeader(headers[i])}}function collapseLeadingSlashes(str){for(var i=0;i<str.length;i++){if(str[i]!=="/"){break}}return i>1?"/"+str.substr(i):str}function containsDotFile(parts){for(var i=0;i<parts.length;i++){var part=parts[i];if(part.length>1&&part[0]==="."){return true}}return false}function contentRange(type,size,range){return type+" "+(range?range.start+"-"+range.end:"*")+"/"+size}function createHtmlDocument(title,body){return"<!DOCTYPE html>\n"+'<html lang="en">\n'+"<head>\n"+'<meta charset="utf-8">\n'+"<title>"+title+"</title>\n"+"</head>\n"+"<body>\n"+"<pre>"+body+"</pre>\n"+"</body>\n"+"<html>\n"}function decode(path){try{return decodeURIComponent(path)}catch(err){return-1}}function getHeaderNames(res){return typeof res.getHeaderNames!=="function"?Object.keys(res._headers||{}):res.getHeaderNames()}function hasListeners(emitter,type){var count=typeof emitter.listenerCount!=="function"?emitter.listeners(type).length:emitter.listenerCount(type);return count>0}function headersSent(res){return typeof res.headersSent!=="boolean"?Boolean(res._header):res.headersSent}function normalizeList(val,name){var list=[].concat(val||[]);for(var i=0;i<list.length;i++){if(typeof list[i]!=="string"){throw new TypeError(name+" must be array of strings or false")}}return list}function parseHttpDate(date){var timestamp=date&&Date.parse(date);return typeof timestamp==="number"?timestamp:NaN}function parseTokenList(str){var end=0;var list=[];var start=0;for(var i=0,len=str.length;i<len;i++){switch(str.charCodeAt(i)){case 32:if(start===end){start=end=i+1}break;case 44:list.push(str.substring(start,end));start=end=i+1;break;default:end=i+1;break}}list.push(str.substring(start,end));return list}function setHeaders(res,headers){var keys=Object.keys(headers);for(var i=0;i<keys.length;i++){var key=keys[i];res.setHeader(key,headers[key])}}},{debug:488,depd:270,destroy:274,encodeurl:279,"escape-html":281,etag:282,fresh:322,fs:undefined,"http-errors":357,mime:430,ms:439,"on-finished":447,path:undefined,"range-parser":462,statuses:518,stream:undefined,util:undefined}],486:[function(require,module,exports){arguments[4][245][0].apply(exports,arguments)},{"./debug":487,dup:245}],487:[function(require,module,exports){arguments[4][246][0].apply(exports,arguments)},{dup:246,ms:439}],488:[function(require,module,exports){arguments[4][247][0].apply(exports,arguments)},{"./browser.js":486,"./node.js":489,dup:247}],489:[function(require,module,exports){arguments[4][248][0].apply(exports,arguments)},{"./debug":487,dup:248,fs:undefined,net:undefined,tty:undefined,util:undefined}],490:[function(require,module,exports){"use strict";var encodeUrl=require("encodeurl");var escapeHtml=require("escape-html");var parseUrl=require("parseurl");var resolve=require("path").resolve;var send=require("send");var url=require("url");module.exports=serveStatic;module.exports.mime=send.mime;function serveStatic(root,options){if(!root){throw new TypeError("root path required")}if(typeof root!=="string"){throw new TypeError("root path must be a string")}var opts=Object.create(options||null);var fallthrough=opts.fallthrough!==false;var redirect=opts.redirect!==false;var setHeaders=opts.setHeaders;if(setHeaders&&typeof setHeaders!=="function"){throw new TypeError("option setHeaders must be function")}opts.maxage=opts.maxage||opts.maxAge||0;opts.root=resolve(root);var onDirectory=redirect?createRedirectDirectoryListener():createNotFoundDirectoryListener();return function serveStatic(req,res,next){if(req.method!=="GET"&&req.method!=="HEAD"){if(fallthrough){return next()}res.statusCode=405;res.setHeader("Allow","GET, HEAD");res.setHeader("Content-Length","0");res.end();return}var forwardError=!fallthrough;var originalUrl=parseUrl.original(req);var path=parseUrl(req).pathname;if(path==="/"&&originalUrl.pathname.substr(-1)!=="/"){path=""}var stream=send(req,path,opts);stream.on("directory",onDirectory);if(setHeaders){stream.on("headers",setHeaders)}if(fallthrough){stream.on("file",function onFile(){forwardError=true})}stream.on("error",function error(err){if(forwardError||!(err.statusCode<500)){next(err);return}next()});stream.pipe(res)}}function collapseLeadingSlashes(str){for(var i=0;i<str.length;i++){if(str.charCodeAt(i)!==47){break}}return i>1?"/"+str.substr(i):str}function createHtmlDocument(title,body){return"<!DOCTYPE html>\n"+'<html lang="en">\n'+"<head>\n"+'<meta charset="utf-8">\n'+"<title>"+title+"</title>\n"+"</head>\n"+"<body>\n"+"<pre>"+body+"</pre>\n"+"</body>\n"}function createNotFoundDirectoryListener(){return function notFound(){this.error(404)}}function createRedirectDirectoryListener(){return function redirect(res){if(this.hasTrailingSlash()){this.error(404);return}var originalUrl=parseUrl.original(this.req);originalUrl.path=null;originalUrl.pathname=collapseLeadingSlashes(originalUrl.pathname+"/");var loc=encodeUrl(url.format(originalUrl));var doc=createHtmlDocument("Redirecting",'Redirecting to <a href="'+escapeHtml(loc)+'">'+escapeHtml(loc)+"</a>");res.statusCode=301;res.setHeader("Content-Type","text/html; charset=UTF-8");res.setHeader("Content-Length",Buffer.byteLength(doc));res.setHeader("Content-Security-Policy","default-src 'self'");res.setHeader("X-Content-Type-Options","nosniff");res.setHeader("Location",loc);res.end(doc)}}},{encodeurl:279,"escape-html":281,parseurl:450,path:undefined,send:485,url:undefined}],491:[function(require,module,exports){arguments[4][358][0].apply(exports,arguments)},{dup:358}],492:[function(require,module,exports){(function(name,root,factory){if(typeof exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define(factory)}else{root[name]=factory()}})("slugify",this,function(){var charMap=JSON.parse('{"$":"dollar","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"OE","":"oe","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"dz","":"G","":"g","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"\'","":"\'","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"indian rupee","":"russian ruble","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial"}');function replace(string,options){options=typeof options==="string"?{replacement:options}:options||{};string=string.split("").reduce(function(result,ch){if(charMap[ch]){ch=charMap[ch]}ch=ch.replace(options.remove||/[^\w\s$*_+~.()'"!\-:@]/g,"");result+=ch;return result},"").replace(/^\s+|\s+$/g,"").replace(/[-\s]+/g,options.replacement||"-").replace("#{replacement}$","");return options.lower?string.toLowerCase():string}replace.extend=function(customMap){for(var key in customMap){charMap[key]=customMap[key]}};return replace})},{}],493:[function(require,module,exports){"use strict";const Dgram=require("dgram");const Dns=require("dns");const Hoek=require("hoek");const internals={};exports.time=function(options,callback){if(arguments.length!==2){callback=arguments[0];options={}}const settings=Hoek.clone(options);settings.host=settings.host||"time.google.com";settings.port=settings.port||123;settings.resolveReference=settings.resolveReference||false;let timeoutId=null;let sent=0;const finish=Hoek.once((err,result)=>{clearTimeout(timeoutId);socket.removeAllListeners();socket.once("error",Hoek.ignore);try{socket.close()}catch(ignoreErr){}return callback(err,result)});if(settings.timeout){timeoutId=setTimeout(()=>{return finish(new Error("Timeout"))},settings.timeout)}const socket=Dgram.createSocket("udp4");socket.once("error",err=>finish(err));socket.on("message",(buffer,rinfo)=>{const received=Date.now();const message=new internals.NtpMessage(buffer);if(!message.isValid){return finish(new Error("Invalid server response"),message)}if(message.originateTimestamp!==sent){return finish(new Error("Wrong originate timestamp"),message)}const T1=message.originateTimestamp;const T2=message.receiveTimestamp;const T3=message.transmitTimestamp;const T4=received;message.d=T4-T1-(T3-T2);message.t=(T2-T1+(T3-T4))/2;message.receivedLocally=received;if(!settings.resolveReference||message.stratum!=="secondary"){return finish(null,message)}Dns.reverse(message.referenceId,(err,domains)=>{if(!err){message.referenceHost=domains[0]}return finish(null,message)})});const message=new Buffer(48);for(let i=0;i<48;++i){message[i]=0}message[0]=(0<<6)+(4<<3)+(3<<0);sent=Date.now();internals.fromMsecs(sent,message,40);socket.send(message,0,message.length,settings.port,settings.host,(err,bytes)=>{if(err||bytes!==48){return finish(err||new Error("Could not send entire message"))}})};internals.NtpMessage=function(buffer){this.isValid=false;if(buffer.length!==48){return}const li=buffer[0]>>6;switch(li){case 0:this.leapIndicator="no-warning";break;case 1:this.leapIndicator="last-minute-61";break;case 2:this.leapIndicator="last-minute-59";break;case 3:this.leapIndicator="alarm";break}const vn=(buffer[0]&56)>>3;this.version=vn;const mode=buffer[0]&7;switch(mode){case 1:this.mode="symmetric-active";break;case 2:this.mode="symmetric-passive";break;case 3:this.mode="client";break;case 4:this.mode="server";break;case 5:this.mode="broadcast";break;case 0:case 6:case 7:this.mode="reserved";break}const stratum=buffer[1];if(stratum===0){this.stratum="death"}else if(stratum===1){this.stratum="primary"}else if(stratum<=15){this.stratum="secondary"}else{this.stratum="reserved"}this.pollInterval=Math.round(Math.pow(2,buffer[2]))*1e3;this.precision=Math.pow(2,buffer[3])*1e3;const rootDelay=256*(256*(256*buffer[4]+buffer[5])+buffer[6])+buffer[7];this.rootDelay=1e3*(rootDelay/65536);this.rootDispersion=((buffer[8]<<8)+buffer[9]+((buffer[10]<<8)+buffer[11])/Math.pow(2,16))*1e3;this.referenceId="";switch(this.stratum){case"death":case"primary":this.referenceId=String.fromCharCode(buffer[12])+String.fromCharCode(buffer[13])+String.fromCharCode(buffer[14])+String.fromCharCode(buffer[15]);break;case"secondary":this.referenceId=""+buffer[12]+"."+buffer[13]+"."+buffer[14]+"."+buffer[15];break}this.referenceTimestamp=internals.toMsecs(buffer,16);this.originateTimestamp=internals.toMsecs(buffer,24);this.receiveTimestamp=internals.toMsecs(buffer,32);this.transmitTimestamp=internals.toMsecs(buffer,40);if(this.version===4&&this.stratum!=="reserved"&&this.mode==="server"&&this.originateTimestamp&&this.receiveTimestamp&&this.transmitTimestamp){this.isValid=true}return this};internals.toMsecs=function(buffer,offset){let seconds=0;let fraction=0;for(let i=0;i<4;++i){seconds=seconds*256+buffer[offset+i]}for(let i=4;i<8;++i){fraction=fraction*256+buffer[offset+i]}return(seconds-2208988800+fraction/Math.pow(2,32))*1e3};internals.fromMsecs=function(ts,buffer,offset){const seconds=Math.floor(ts/1e3)+2208988800;const fraction=Math.round(ts%1e3/1e3*Math.pow(2,32));buffer[offset+0]=(seconds&4278190080)>>24;buffer[offset+1]=(seconds&16711680)>>16;buffer[offset+2]=(seconds&65280)>>8;buffer[offset+3]=seconds&255;buffer[offset+4]=(fraction&4278190080)>>24;buffer[offset+5]=(fraction&16711680)>>16;buffer[offset+6]=(fraction&65280)>>8;buffer[offset+7]=fraction&255};internals.last={offset:0,expires:0,host:"",port:0};exports.offset=function(options,callback){if(arguments.length!==2){callback=arguments[0];options={}}const now=Date.now();const clockSyncRefresh=options.clockSyncRefresh||24*60*60*1e3;if(internals.last.offset&&internals.last.host===options.host&&internals.last.port===options.port&&now<internals.last.expires){process.nextTick(()=>callback(null,internals.last.offset));return}exports.time(options,(err,time)=>{if(err){return callback(err,0)}internals.last={offset:Math.round(time.t),expires:now+clockSyncRefresh,host:options.host,port:options.port};return callback(null,internals.last.offset)})};internals.now={started:false,intervalId:null};exports.start=function(options,callback){if(arguments.length!==2){callback=arguments[0];options={}}if(internals.now.started){process.nextTick(()=>callback());return}const report=err=>{if(err&&options.onError){options.onError(err)}};internals.now.started=true;exports.offset(options,(err,offset)=>{report(err);internals.now.intervalId=setInterval(()=>{exports.offset(options,report)},options.clockSyncRefresh||24*60*60*1e3);return callback()})};exports.stop=function(){if(!internals.now.started){return}clearInterval(internals.now.intervalId);internals.now.started=false;internals.now.intervalId=null};exports.isLive=function(){return internals.now.started};exports.now=function(){const now=Date.now();if(!exports.isLive()||now>=internals.last.expires){return now}return now+internals.last.offset}},{dgram:undefined,dns:undefined,hoek:356}],494:[function(require,module,exports){var algInfo={dsa:{parts:["p","q","g","y"],sizePart:"p"},rsa:{parts:["e","n"],sizePart:"n"},ecdsa:{parts:["curve","Q"],sizePart:"Q"},ed25519:{parts:["R"],normalize:false,sizePart:"R"}};algInfo["curve25519"]=algInfo["ed25519"];var algPrivInfo={dsa:{parts:["p","q","g","y","x"]},rsa:{parts:["n","e","d","iqmp","p","q"]},ecdsa:{parts:["curve","Q","d"]},ed25519:{parts:["R","r"],normalize:false}};algPrivInfo["curve25519"]=algPrivInfo["ed25519"];var hashAlgs={md5:true,sha1:true,sha256:true,sha384:true,sha512:true};var curves={nistp256:{size:256,pkcs8oid:"1.2.840.10045.3.1.7",p:new Buffer(("00"+"ffffffff 00000001 00000000 00000000"+"00000000 ffffffff ffffffff ffffffff").replace(/ /g,""),"hex"),a:new Buffer(("00"+"FFFFFFFF 00000001 00000000 00000000"+"00000000 FFFFFFFF FFFFFFFF FFFFFFFC").replace(/ /g,""),"hex"),b:new Buffer(("5ac635d8 aa3a93e7 b3ebbd55 769886bc"+"651d06b0 cc53b0f6 3bce3c3e 27d2604b").replace(/ /g,""),"hex"),s:new Buffer(("00"+"c49d3608 86e70493 6a6678e1 139d26b7"+"819f7e90").replace(/ /g,""),"hex"),n:new Buffer(("00"+"ffffffff 00000000 ffffffff ffffffff"+"bce6faad a7179e84 f3b9cac2 fc632551").replace(/ /g,""),"hex"),G:new Buffer(("04"+"6b17d1f2 e12c4247 f8bce6e5 63a440f2"+"77037d81 2deb33a0 f4a13945 d898c296"+"4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16"+"2bce3357 6b315ece cbb64068 37bf51f5").replace(/ /g,""),"hex")},nistp384:{size:384,pkcs8oid:"1.3.132.0.34",p:new Buffer(("00"+"ffffffff ffffffff ffffffff ffffffff"+"ffffffff ffffffff ffffffff fffffffe"+"ffffffff 00000000 00000000 ffffffff").replace(/ /g,""),"hex"),a:new Buffer(("00"+"FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF"+"FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFE"+"FFFFFFFF 00000000 00000000 FFFFFFFC").replace(/ /g,""),"hex"),b:new Buffer(("b3312fa7 e23ee7e4 988e056b e3f82d19"+"181d9c6e fe814112 0314088f 5013875a"+"c656398d 8a2ed19d 2a85c8ed d3ec2aef").replace(/ /g,""),"hex"),s:new Buffer(("00"+"a335926a a319a27a 1d00896a 6773a482"+"7acdac73").replace(/ /g,""),"hex"),n:new Buffer(("00"+"ffffffff ffffffff ffffffff ffffffff"+"ffffffff ffffffff c7634d81 f4372ddf"+"581a0db2 48b0a77a ecec196a ccc52973").replace(/ /g,""),"hex"),G:new Buffer(("04"+"aa87ca22 be8b0537 8eb1c71e f320ad74"+"6e1d3b62 8ba79b98 59f741e0 82542a38"+"5502f25d bf55296c 3a545e38 72760ab7"+"3617de4a 96262c6f 5d9e98bf 9292dc29"+"f8f41dbd 289a147c e9da3113 b5f0b8c0"+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f").replace(/ /g,""),"hex")},nistp521:{size:521,pkcs8oid:"1.3.132.0.35",p:new Buffer(("01ffffff ffffffff ffffffff ffffffff"+"ffffffff ffffffff ffffffff ffffffff"+"ffffffff ffffffff ffffffff ffffffff"+"ffffffff ffffffff ffffffff ffffffff"+"ffff").replace(/ /g,""),"hex"),a:new Buffer(("01FF"+"FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF"+"FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF"+"FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFF"+"FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFC").replace(/ /g,""),"hex"),b:new Buffer(("51"+"953eb961 8e1c9a1f 929a21a0 b68540ee"+"a2da725b 99b315f3 b8b48991 8ef109e1"+"56193951 ec7e937b 1652c0bd 3bb1bf07"+"3573df88 3d2c34f1 ef451fd4 6b503f00").replace(/ /g,""),"hex"),s:new Buffer(("00"+"d09e8800 291cb853 96cc6717 393284aa"+"a0da64ba").replace(/ /g,""),"hex"),n:new Buffer(("01ff"+"ffffffff ffffffff ffffffff ffffffff"+"ffffffff ffffffff ffffffff fffffffa"+"51868783 bf2f966b 7fcc0148 f709a5d0"+"3bb5c9b8 899c47ae bb6fb71e 91386409").replace(/ /g,""),"hex"),G:new Buffer(("04"+"00c6 858e06b7 0404e9cd 9e3ecb66 2395b442"+"9c648139 053fb521 f828af60 6b4d3dba"+"a14b5e77 efe75928 fe1dc127 a2ffa8de"+"3348b3c1 856a429b f97e7e31 c2e5bd66"+"0118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9"+"98f54449 579b4468 17afbd17 273e662c"+"97ee7299 5ef42640 c550b901 3fad0761"+"353c7086 a272c240 88be9476 9fd16650").replace(/ /g,""),"hex")}};module.exports={info:algInfo,privInfo:algPrivInfo,hashAlgs:hashAlgs,curves:curves}},{}],495:[function(require,module,exports){module.exports=Certificate;var assert=require("assert-plus");var algs=require("./algs");var crypto=require("crypto");var Fingerprint=require("./fingerprint");var Signature=require("./signature");var errs=require("./errors");var util=require("util");var utils=require("./utils");var Key=require("./key");var PrivateKey=require("./private-key");var Identity=require("./identity");var formats={};formats["openssh"]=require("./formats/openssh-cert");formats["x509"]=require("./formats/x509");formats["pem"]=require("./formats/x509-pem");var CertificateParseError=errs.CertificateParseError;var InvalidAlgorithmError=errs.InvalidAlgorithmError;function Certificate(opts){assert.object(opts,"options");assert.arrayOfObject(opts.subjects,"options.subjects");utils.assertCompatible(opts.subjects[0],Identity,[1,0],"options.subjects");utils.assertCompatible(opts.subjectKey,Key,[1,0],"options.subjectKey");utils.assertCompatible(opts.issuer,Identity,[1,0],"options.issuer");if(opts.issuerKey!==undefined){utils.assertCompatible(opts.issuerKey,Key,[1,0],"options.issuerKey")}assert.object(opts.signatures,"options.signatures");assert.buffer(opts.serial,"options.serial");assert.date(opts.validFrom,"options.validFrom");assert.date(opts.validUntil,"optons.validUntil");assert.optionalArrayOfString(opts.purposes,"options.purposes");this._hashCache={};this.subjects=opts.subjects;this.issuer=opts.issuer;this.subjectKey=opts.subjectKey;this.issuerKey=opts.issuerKey;this.signatures=opts.signatures;this.serial=opts.serial;this.validFrom=opts.validFrom;this.validUntil=opts.validUntil;this.purposes=opts.purposes}Certificate.formats=formats;Certificate.prototype.toBuffer=function(format,options){if(format===undefined)format="x509";assert.string(format,"format");assert.object(formats[format],"formats[format]");assert.optionalObject(options,"options");return formats[format].write(this,options)};Certificate.prototype.toString=function(format,options){if(format===undefined)format="pem";return this.toBuffer(format,options).toString()};Certificate.prototype.fingerprint=function(algo){if(algo===undefined)algo="sha256";assert.string(algo,"algorithm");var opts={type:"certificate",hash:this.hash(algo),algorithm:algo};return new Fingerprint(opts)};Certificate.prototype.hash=function(algo){assert.string(algo,"algorithm");algo=algo.toLowerCase();if(algs.hashAlgs[algo]===undefined)throw new InvalidAlgorithmError(algo);if(this._hashCache[algo])return this._hashCache[algo];var hash=crypto.createHash(algo).update(this.toBuffer("x509")).digest();this._hashCache[algo]=hash;return hash};Certificate.prototype.isExpired=function(when){if(when===undefined)when=new Date;return!(when.getTime()>=this.validFrom.getTime()&&when.getTime()<this.validUntil.getTime())};Certificate.prototype.isSignedBy=function(issuerCert){utils.assertCompatible(issuerCert,Certificate,[1,0],"issuer");if(!this.issuer.equals(issuerCert.subjects[0]))return false;if(this.issuer.purposes&&this.issuer.purposes.length>0&&this.issuer.purposes.indexOf("ca")===-1){return false}return this.isSignedByKey(issuerCert.subjectKey)};Certificate.prototype.isSignedByKey=function(issuerKey){utils.assertCompatible(issuerKey,Key,[1,2],"issuerKey");if(this.issuerKey!==undefined){return this.issuerKey.fingerprint("sha512").matches(issuerKey)}var fmt=Object.keys(this.signatures)[0];var valid=formats[fmt].verify(this,issuerKey);if(valid)this.issuerKey=issuerKey;return valid};Certificate.prototype.signWith=function(key){utils.assertCompatible(key,PrivateKey,[1,2],"key");var fmts=Object.keys(formats);var didOne=false;for(var i=0;i<fmts.length;++i){if(fmts[i]!=="pem"){var ret=formats[fmts[i]].sign(this,key);if(ret===true)didOne=true}}if(!didOne){throw new Error("Failed to sign the certificate for any "+"available certificate formats")}};Certificate.createSelfSigned=function(subjectOrSubjects,key,options){var subjects;if(Array.isArray(subjectOrSubjects))subjects=subjectOrSubjects;else subjects=[subjectOrSubjects];assert.arrayOfObject(subjects);subjects.forEach(function(subject){utils.assertCompatible(subject,Identity,[1,0],"subject")});utils.assertCompatible(key,PrivateKey,[1,2],"private key");assert.optionalObject(options,"options");if(options===undefined)options={};assert.optionalObject(options.validFrom,"options.validFrom");assert.optionalObject(options.validUntil,"options.validUntil");var validFrom=options.validFrom;var validUntil=options.validUntil;if(validFrom===undefined)validFrom=new Date;if(validUntil===undefined){assert.optionalNumber(options.lifetime,"options.lifetime");var lifetime=options.lifetime;if(lifetime===undefined)lifetime=10*365*24*3600;validUntil=new Date;validUntil.setTime(validUntil.getTime()+lifetime*1e3)}assert.optionalBuffer(options.serial,"options.serial");var serial=options.serial;if(serial===undefined)serial=new Buffer("0000000000000001","hex");var purposes=options.purposes;if(purposes===undefined)purposes=[];if(purposes.indexOf("signature")===-1)purposes.push("signature");if(purposes.indexOf("ca")===-1)purposes.push("ca");if(purposes.indexOf("crl")===-1)purposes.push("crl");if(purposes.length<=3){var hostSubjects=subjects.filter(function(subject){return subject.type==="host"});var userSubjects=subjects.filter(function(subject){return subject.type==="user"});if(hostSubjects.length>0){if(purposes.indexOf("serverAuth")===-1)purposes.push("serverAuth")}if(userSubjects.length>0){if(purposes.indexOf("clientAuth")===-1)purposes.push("clientAuth")}if(userSubjects.length>0||hostSubjects.length>0){if(purposes.indexOf("keyAgreement")===-1)purposes.push("keyAgreement");if(key.type==="rsa"&&purposes.indexOf("encryption")===-1)purposes.push("encryption")}}var cert=new Certificate({subjects:subjects,issuer:subjects[0],subjectKey:key.toPublic(),issuerKey:key.toPublic(),signatures:{},serial:serial,validFrom:validFrom,validUntil:validUntil,purposes:purposes});cert.signWith(key);return cert};Certificate.create=function(subjectOrSubjects,key,issuer,issuerKey,options){var subjects;if(Array.isArray(subjectOrSubjects))subjects=subjectOrSubjects;else subjects=[subjectOrSubjects];assert.arrayOfObject(subjects);subjects.forEach(function(subject){utils.assertCompatible(subject,Identity,[1,0],"subject")});utils.assertCompatible(key,Key,[1,0],"key");if(PrivateKey.isPrivateKey(key))key=key.toPublic();utils.assertCompatible(issuer,Identity,[1,0],"issuer");utils.assertCompatible(issuerKey,PrivateKey,[1,2],"issuer key");assert.optionalObject(options,"options");if(options===undefined)options={};assert.optionalObject(options.validFrom,"options.validFrom");assert.optionalObject(options.validUntil,"options.validUntil");var validFrom=options.validFrom;var validUntil=options.validUntil;if(validFrom===undefined)validFrom=new Date;if(validUntil===undefined){assert.optionalNumber(options.lifetime,"options.lifetime");var lifetime=options.lifetime;if(lifetime===undefined)lifetime=10*365*24*3600;validUntil=new Date;validUntil.setTime(validUntil.getTime()+lifetime*1e3)}assert.optionalBuffer(options.serial,"options.serial");var serial=options.serial;if(serial===undefined)serial=new Buffer("0000000000000001","hex");var purposes=options.purposes;if(purposes===undefined)purposes=[];if(purposes.indexOf("signature")===-1)purposes.push("signature");if(options.ca===true){if(purposes.indexOf("ca")===-1)purposes.push("ca");if(purposes.indexOf("crl")===-1)purposes.push("crl")}var hostSubjects=subjects.filter(function(subject){return subject.type==="host"});var userSubjects=subjects.filter(function(subject){return subject.type==="user"});if(hostSubjects.length>0){if(purposes.indexOf("serverAuth")===-1)purposes.push("serverAuth")}if(userSubjects.length>0){if(purposes.indexOf("clientAuth")===-1)purposes.push("clientAuth")}if(userSubjects.length>0||hostSubjects.length>0){if(purposes.indexOf("keyAgreement")===-1)purposes.push("keyAgreement");if(key.type==="rsa"&&purposes.indexOf("encryption")===-1)purposes.push("encryption")}var cert=new Certificate({subjects:subjects,issuer:issuer,subjectKey:key,issuerKey:issuerKey.toPublic(),signatures:{},serial:serial,validFrom:validFrom,validUntil:validUntil,purposes:purposes});cert.signWith(issuerKey);return cert};Certificate.parse=function(data,format,options){if(typeof data!=="string")assert.buffer(data,"data");if(format===undefined)format="auto";assert.string(format,"format");if(typeof options==="string")options={filename:options};assert.optionalObject(options,"options");if(options===undefined)options={};assert.optionalString(options.filename,"options.filename");if(options.filename===undefined)options.filename="(unnamed)";assert.object(formats[format],"formats[format]");try{var k=formats[format].read(data,options);return k}catch(e){throw new CertificateParseError(options.filename,format,e)}};Certificate.isCertificate=function(obj,ver){return utils.isCompatible(obj,Certificate,ver)};Certificate.prototype._sshpkApiVersion=[1,0];Certificate._oldVersionDetect=function(obj){return[1,0]}},{"./algs":494,"./errors":498,"./fingerprint":499,"./formats/openssh-cert":501,"./formats/x509":509,"./formats/x509-pem":508,"./identity":510,"./key":512,"./private-key":513,"./signature":514,"./utils":516,"assert-plus":185,crypto:undefined,util:undefined}],496:[function(require,module,exports){module.exports={DiffieHellman:DiffieHellman,generateECDSA:generateECDSA,generateED25519:generateED25519};var assert=require("assert-plus");var crypto=require("crypto");var algs=require("./algs");var utils=require("./utils");var nacl;var Key=require("./key");var PrivateKey=require("./private-key");var CRYPTO_HAVE_ECDH=crypto.createECDH!==undefined;var ecdh,ec,jsbn;function DiffieHellman(key){utils.assertCompatible(key,Key,[1,4],"key");this._isPriv=PrivateKey.isPrivateKey(key,[1,3]);this._algo=key.type;this._curve=key.curve;this._key=key;if(key.type==="dsa"){if(!CRYPTO_HAVE_ECDH){throw new Error("Due to bugs in the node 0.10 "+"crypto API, node 0.12.x or later is required "+"to use DH")}this._dh=crypto.createDiffieHellman(key.part.p.data,undefined,key.part.g.data,undefined);this._p=key.part.p;this._g=key.part.g;if(this._isPriv)this._dh.setPrivateKey(key.part.x.data);this._dh.setPublicKey(key.part.y.data)}else if(key.type==="ecdsa"){if(!CRYPTO_HAVE_ECDH){if(ecdh===undefined)ecdh=require("ecc-jsbn");if(ec===undefined)ec=require("ecc-jsbn/lib/ec");if(jsbn===undefined)jsbn=require("jsbn").BigInteger;this._ecParams=new X9ECParameters(this._curve);if(this._isPriv){this._priv=new ECPrivate(this._ecParams,key.part.d.data)}return}var curve={nistp256:"prime256v1",nistp384:"secp384r1",nistp521:"secp521r1"}[key.curve];this._dh=crypto.createECDH(curve);if(typeof this._dh!=="object"||typeof this._dh.setPrivateKey!=="function"){CRYPTO_HAVE_ECDH=false;DiffieHellman.call(this,key);return}if(this._isPriv)this._dh.setPrivateKey(key.part.d.data);this._dh.setPublicKey(key.part.Q.data)}else if(key.type==="curve25519"){if(nacl===undefined)nacl=require("tweetnacl");if(this._isPriv){this._priv=key.part.r.data}}else{throw new Error("DH not supported for "+key.type+" keys")}}DiffieHellman.prototype.getPublicKey=function(){if(this._isPriv)return this._key.toPublic();return this._key};DiffieHellman.prototype.getPrivateKey=function(){if(this._isPriv)return this._key;else return undefined};DiffieHellman.prototype.getKey=DiffieHellman.prototype.getPrivateKey;DiffieHellman.prototype._keyCheck=function(pk,isPub){assert.object(pk,"key");if(!isPub)utils.assertCompatible(pk,PrivateKey,[1,3],"key");utils.assertCompatible(pk,Key,[1,4],"key");if(pk.type!==this._algo){throw new Error("A "+pk.type+" key cannot be used in "+this._algo+" Diffie-Hellman")}if(pk.curve!==this._curve){throw new Error("A key from the "+pk.curve+" curve "+"cannot be used with a "+this._curve+" Diffie-Hellman")}if(pk.type==="dsa"){assert.deepEqual(pk.part.p,this._p,"DSA key prime does not match");assert.deepEqual(pk.part.g,this._g,"DSA key generator does not match")}};DiffieHellman.prototype.setKey=function(pk){this._keyCheck(pk);if(pk.type==="dsa"){this._dh.setPrivateKey(pk.part.x.data);this._dh.setPublicKey(pk.part.y.data)}else if(pk.type==="ecdsa"){if(CRYPTO_HAVE_ECDH){this._dh.setPrivateKey(pk.part.d.data);this._dh.setPublicKey(pk.part.Q.data)}else{this._priv=new ECPrivate(this._ecParams,pk.part.d.data)}}else if(pk.type==="curve25519"){this._priv=pk.part.r.data;if(this._priv[0]===0)this._priv=this._priv.slice(1);this._priv=this._priv.slice(0,32)}this._key=pk;this._isPriv=true};DiffieHellman.prototype.setPrivateKey=DiffieHellman.prototype.setKey;DiffieHellman.prototype.computeSecret=function(otherpk){this._keyCheck(otherpk,true);if(!this._isPriv)throw new Error("DH exchange has not been initialized with "+"a private key yet");var pub;if(this._algo==="dsa"){return this._dh.computeSecret(otherpk.part.y.data)}else if(this._algo==="ecdsa"){if(CRYPTO_HAVE_ECDH){return this._dh.computeSecret(otherpk.part.Q.data)}else{pub=new ECPublic(this._ecParams,otherpk.part.Q.data);return this._priv.deriveSharedSecret(pub)}}else if(this._algo==="curve25519"){pub=otherpk.part.R.data;while(pub[0]===0&&pub.length>32)pub=pub.slice(1);assert.strictEqual(pub.length,32);assert.strictEqual(this._priv.length,64);var priv=this._priv.slice(0,32);var secret=nacl.box.before(new Uint8Array(pub),new Uint8Array(priv));return new Buffer(secret)}throw new Error("Invalid algorithm: "+this._algo)};DiffieHellman.prototype.generateKey=function(){var parts=[];var priv,pub;if(this._algo==="dsa"){this._dh.generateKeys();parts.push({name:"p",data:this._p.data});parts.push({name:"q",data:this._key.part.q.data});parts.push({name:"g",data:this._g.data});parts.push({name:"y",data:this._dh.getPublicKey()});parts.push({name:"x",data:this._dh.getPrivateKey()});this._key=new PrivateKey({type:"dsa",parts:parts});this._isPriv=true;return this._key}else if(this._algo==="ecdsa"){if(CRYPTO_HAVE_ECDH){this._dh.generateKeys();parts.push({name:"curve",data:new Buffer(this._curve)});parts.push({name:"Q",data:this._dh.getPublicKey()});parts.push({name:"d",data:this._dh.getPrivateKey()});this._key=new PrivateKey({type:"ecdsa",curve:this._curve,parts:parts});this._isPriv=true;return this._key}else{var n=this._ecParams.getN();var r=new jsbn(crypto.randomBytes(n.bitLength()));var n1=n.subtract(jsbn.ONE);priv=r.mod(n1).add(jsbn.ONE);pub=this._ecParams.getG().multiply(priv);priv=new Buffer(priv.toByteArray());pub=new Buffer(this._ecParams.getCurve().encodePointHex(pub),"hex");this._priv=new ECPrivate(this._ecParams,priv);parts.push({name:"curve",data:new Buffer(this._curve)});parts.push({name:"Q",data:pub});parts.push({name:"d",data:priv});this._key=new PrivateKey({type:"ecdsa",curve:this._curve,parts:parts});this._isPriv=true;return this._key}}else if(this._algo==="curve25519"){var pair=nacl.box.keyPair();priv=new Buffer(pair.secretKey);pub=new Buffer(pair.publicKey);priv=Buffer.concat([priv,pub]);assert.strictEqual(priv.length,64);assert.strictEqual(pub.length,32);parts.push({name:"R",data:pub});parts.push({name:"r",data:priv});this._key=new PrivateKey({type:"curve25519",parts:parts});this._isPriv=true;return this._key}throw new Error("Invalid algorithm: "+this._algo)};DiffieHellman.prototype.generateKeys=DiffieHellman.prototype.generateKey;function X9ECParameters(name){var params=algs.curves[name];assert.object(params);var p=new jsbn(params.p);var a=new jsbn(params.a);var b=new jsbn(params.b);var n=new jsbn(params.n);var h=jsbn.ONE;var curve=new ec.ECCurveFp(p,a,b);var G=curve.decodePointHex(params.G.toString("hex"));this.curve=curve;this.g=G;this.n=n;this.h=h}X9ECParameters.prototype.getCurve=function(){return this.curve};X9ECParameters.prototype.getG=function(){return this.g};X9ECParameters.prototype.getN=function(){return this.n};X9ECParameters.prototype.getH=function(){return this.h};function ECPublic(params,buffer){this._params=params;if(buffer[0]===0)buffer=buffer.slice(1);this._pub=params.getCurve().decodePointHex(buffer.toString("hex"))}function ECPrivate(params,buffer){this._params=params;this._priv=new jsbn(utils.mpNormalize(buffer))}ECPrivate.prototype.deriveSharedSecret=function(pubKey){assert.ok(pubKey instanceof ECPublic);var S=pubKey._pub.multiply(this._priv);return new Buffer(S.getX().toBigInteger().toByteArray())};function generateED25519(){if(nacl===undefined)nacl=require("tweetnacl");var pair=nacl.sign.keyPair();var priv=new Buffer(pair.secretKey);var pub=new Buffer(pair.publicKey);assert.strictEqual(priv.length,64);assert.strictEqual(pub.length,32);var parts=[];parts.push({name:"R",data:pub});parts.push({name:"r",data:priv});var key=new PrivateKey({type:"ed25519",parts:parts});return key}function generateECDSA(curve){var parts=[];var key;if(CRYPTO_HAVE_ECDH){var osCurve={nistp256:"prime256v1",nistp384:"secp384r1",nistp521:"secp521r1"}[curve];var dh=crypto.createECDH(osCurve);dh.generateKeys();parts.push({name:"curve",data:new Buffer(curve)});parts.push({name:"Q",data:dh.getPublicKey()});parts.push({name:"d",data:dh.getPrivateKey()});key=new PrivateKey({type:"ecdsa",curve:curve,parts:parts});return key}else{if(ecdh===undefined)ecdh=require("ecc-jsbn");if(ec===undefined)ec=require("ecc-jsbn/lib/ec");if(jsbn===undefined)jsbn=require("jsbn").BigInteger;var ecParams=new X9ECParameters(curve);var n=ecParams.getN();var cByteLen=Math.ceil((n.bitLength()+64)/8);var c=new jsbn(crypto.randomBytes(cByteLen));var n1=n.subtract(jsbn.ONE);var priv=c.mod(n1).add(jsbn.ONE);var pub=ecParams.getG().multiply(priv);priv=new Buffer(priv.toByteArray());pub=new Buffer(ecParams.getCurve().encodePointHex(pub),"hex");parts.push({name:"curve",data:new Buffer(curve)});parts.push({name:"Q",data:pub});parts.push({name:"d",data:priv});key=new PrivateKey({type:"ecdsa",curve:curve,parts:parts});return key}}},{"./algs":494,"./key":512,"./private-key":513,"./utils":516,"assert-plus":185,crypto:undefined,"ecc-jsbn":275,"ecc-jsbn/lib/ec":276,jsbn:405,tweetnacl:556}],497:[function(require,module,exports){module.exports={Verifier:Verifier,Signer:Signer};var nacl;var stream=require("stream");var util=require("util");var assert=require("assert-plus");var Signature=require("./signature");function Verifier(key,hashAlgo){if(nacl===undefined)nacl=require("tweetnacl");if(hashAlgo.toLowerCase()!=="sha512")throw new Error("ED25519 only supports the use of "+"SHA-512 hashes");this.key=key;this.chunks=[];stream.Writable.call(this,{})}util.inherits(Verifier,stream.Writable);Verifier.prototype._write=function(chunk,enc,cb){this.chunks.push(chunk);cb()};Verifier.prototype.update=function(chunk){if(typeof chunk==="string")chunk=new Buffer(chunk,"binary");this.chunks.push(chunk)};Verifier.prototype.verify=function(signature,fmt){var sig;if(Signature.isSignature(signature,[2,0])){if(signature.type!=="ed25519")return false;sig=signature.toBuffer("raw")}else if(typeof signature==="string"){sig=new Buffer(signature,"base64")}else if(Signature.isSignature(signature,[1,0])){throw new Error("signature was created by too old "+"a version of sshpk and cannot be verified")}assert.buffer(sig);return nacl.sign.detached.verify(new Uint8Array(Buffer.concat(this.chunks)),new Uint8Array(sig),new Uint8Array(this.key.part.R.data))};function Signer(key,hashAlgo){if(nacl===undefined)nacl=require("tweetnacl");if(hashAlgo.toLowerCase()!=="sha512")throw new Error("ED25519 only supports the use of "+"SHA-512 hashes");this.key=key;this.chunks=[];stream.Writable.call(this,{})}util.inherits(Signer,stream.Writable);Signer.prototype._write=function(chunk,enc,cb){this.chunks.push(chunk);cb()};Signer.prototype.update=function(chunk){if(typeof chunk==="string")chunk=new Buffer(chunk,"binary");this.chunks.push(chunk)};Signer.prototype.sign=function(){var sig=nacl.sign.detached(new Uint8Array(Buffer.concat(this.chunks)),new Uint8Array(this.key.part.r.data));var sigBuf=new Buffer(sig);var sigObj=Signature.parse(sigBuf,"ed25519","raw");sigObj.hashAlgorithm="sha512";return sigObj}},{"./signature":514,"assert-plus":185,stream:undefined,tweetnacl:556,util:undefined}],498:[function(require,module,exports){var assert=require("assert-plus");var util=require("util");function FingerprintFormatError(fp,format){if(Error.captureStackTrace)Error.captureStackTrace(this,FingerprintFormatError);this.name="FingerprintFormatError";this.fingerprint=fp;this.format=format;this.message="Fingerprint format is not supported, or is invalid: ";if(fp!==undefined)this.message+=" fingerprint = "+fp;if(format!==undefined)this.message+=" format = "+format}util.inherits(FingerprintFormatError,Error);function InvalidAlgorithmError(alg){if(Error.captureStackTrace)Error.captureStackTrace(this,InvalidAlgorithmError);this.name="InvalidAlgorithmError";this.algorithm=alg;this.message='Algorithm "'+alg+'" is not supported'}util.inherits(InvalidAlgorithmError,Error);function KeyParseError(name,format,innerErr){if(Error.captureStackTrace)Error.captureStackTrace(this,KeyParseError);this.name="KeyParseError";this.format=format;this.keyName=name;this.innerErr=innerErr;this.message="Failed to parse "+name+" as a valid "+format+" format key: "+innerErr.message}util.inherits(KeyParseError,Error);function SignatureParseError(type,format,innerErr){if(Error.captureStackTrace)Error.captureStackTrace(this,SignatureParseError);this.name="SignatureParseError";this.type=type;this.format=format;this.innerErr=innerErr;this.message="Failed to parse the given data as a "+type+" signature in "+format+" format: "+innerErr.message}util.inherits(SignatureParseError,Error);function CertificateParseError(name,format,innerErr){if(Error.captureStackTrace)Error.captureStackTrace(this,CertificateParseError);this.name="CertificateParseError";this.format=format;this.certName=name;this.innerErr=innerErr;this.message="Failed to parse "+name+" as a valid "+format+" format certificate: "+innerErr.message}util.inherits(CertificateParseError,Error);function KeyEncryptedError(name,format){if(Error.captureStackTrace)Error.captureStackTrace(this,KeyEncryptedError);this.name="KeyEncryptedError";this.format=format;this.keyName=name;this.message="The "+format+" format key "+name+" is "+"encrypted (password-protected), and no passphrase was "+"provided in `options`"}util.inherits(KeyEncryptedError,Error);module.exports={FingerprintFormatError:FingerprintFormatError,InvalidAlgorithmError:InvalidAlgorithmError,KeyParseError:KeyParseError,SignatureParseError:SignatureParseError,KeyEncryptedError:KeyEncryptedError,CertificateParseError:CertificateParseError}},{"assert-plus":185,util:undefined}],499:[function(require,module,exports){module.exports=Fingerprint;var assert=require("assert-plus");var algs=require("./algs");var crypto=require("crypto");var errs=require("./errors");var Key=require("./key");var Certificate=require("./certificate");var utils=require("./utils");var FingerprintFormatError=errs.FingerprintFormatError;var InvalidAlgorithmError=errs.InvalidAlgorithmError;function Fingerprint(opts){assert.object(opts,"options");assert.string(opts.type,"options.type");assert.buffer(opts.hash,"options.hash");assert.string(opts.algorithm,"options.algorithm");this.algorithm=opts.algorithm.toLowerCase();if(algs.hashAlgs[this.algorithm]!==true)throw new InvalidAlgorithmError(this.algorithm);this.hash=opts.hash;this.type=opts.type}Fingerprint.prototype.toString=function(format){if(format===undefined){if(this.algorithm==="md5")format="hex";else format="base64"}assert.string(format);switch(format){case"hex":return addColons(this.hash.toString("hex"));case"base64":return sshBase64Format(this.algorithm,this.hash.toString("base64"));default:throw new FingerprintFormatError(undefined,format)}};Fingerprint.prototype.matches=function(other){assert.object(other,"key or certificate");if(this.type==="key"){utils.assertCompatible(other,Key,[1,0],"key")}else{utils.assertCompatible(other,Certificate,[1,0],"certificate")}var theirHash=other.hash(this.algorithm);var theirHash2=crypto.createHash(this.algorithm).update(theirHash).digest("base64");if(this.hash2===undefined)this.hash2=crypto.createHash(this.algorithm).update(this.hash).digest("base64");return this.hash2===theirHash2};Fingerprint.parse=function(fp,options){assert.string(fp,"fingerprint");var alg,hash,enAlgs;if(Array.isArray(options)){enAlgs=options;options={}}assert.optionalObject(options,"options");if(options===undefined)options={};if(options.enAlgs!==undefined)enAlgs=options.enAlgs;assert.optionalArrayOfString(enAlgs,"algorithms");var parts=fp.split(":");if(parts.length==2){alg=parts[0].toLowerCase();var base64RE=/^[A-Za-z0-9+\/=]+$/;if(!base64RE.test(parts[1]))throw new FingerprintFormatError(fp);try{hash=new Buffer(parts[1],"base64")}catch(e){throw new FingerprintFormatError(fp)}}else if(parts.length>2){alg="md5";if(parts[0].toLowerCase()==="md5")parts=parts.slice(1);parts=parts.join("");var md5RE=/^[a-fA-F0-9]+$/;if(!md5RE.test(parts))throw new FingerprintFormatError(fp);try{hash=new Buffer(parts,"hex")}catch(e){throw new FingerprintFormatError(fp)}}if(alg===undefined)throw new FingerprintFormatError(fp);if(algs.hashAlgs[alg]===undefined)throw new InvalidAlgorithmError(alg);if(enAlgs!==undefined){enAlgs=enAlgs.map(function(a){return a.toLowerCase()});if(enAlgs.indexOf(alg)===-1)throw new InvalidAlgorithmError(alg)}return new Fingerprint({algorithm:alg,hash:hash,type:options.type||"key"})};function addColons(s){return s.replace(/(.{2})(?=.)/g,"$1:")}function base64Strip(s){return s.replace(/=*$/,"")}function sshBase64Format(alg,h){return alg.toUpperCase()+":"+base64Strip(h)}Fingerprint.isFingerprint=function(obj,ver){return utils.isCompatible(obj,Fingerprint,ver)};Fingerprint.prototype._sshpkApiVersion=[1,1];Fingerprint._oldVersionDetect=function(obj){assert.func(obj.toString);assert.func(obj.matches);return[1,0]}},{"./algs":494,"./certificate":495,"./errors":498,"./key":512,"./utils":516,"assert-plus":185,crypto:undefined}],500:[function(require,module,exports){module.exports={read:read,write:write};var assert=require("assert-plus");var utils=require("../utils");var Key=require("../key");var PrivateKey=require("../private-key");var pem=require("./pem");var ssh=require("./ssh");var rfc4253=require("./rfc4253");function read(buf,options){if(typeof buf==="string"){if(buf.trim().match(/^[-]+[ ]*BEGIN/))return pem.read(buf,options);if(buf.match(/^\s*ssh-[a-z]/))return ssh.read(buf,options);if(buf.match(/^\s*ecdsa-/))return ssh.read(buf,options);buf=new Buffer(buf,"binary")}else{assert.buffer(buf);if(findPEMHeader(buf))return pem.read(buf,options);if(findSSHHeader(buf))return ssh.read(buf,options)}if(buf.readUInt32BE(0)<buf.length)return rfc4253.read(buf,options);throw new Error("Failed to auto-detect format of key")}function findSSHHeader(buf){var offset=0;while(offset<buf.length&&(buf[offset]===32||buf[offset]===10||buf[offset]===9))++offset;if(offset+4<=buf.length&&buf.slice(offset,offset+4).toString("ascii")==="ssh-")return true;if(offset+6<=buf.length&&buf.slice(offset,offset+6).toString("ascii")==="ecdsa-")return true;return false}function findPEMHeader(buf){var offset=0;while(offset<buf.length&&(buf[offset]===32||buf[offset]===10))++offset;if(buf[offset]!==45)return false;while(offset<buf.length&&buf[offset]===45)++offset;while(offset<buf.length&&buf[offset]===32)++offset;if(offset+5>buf.length||buf.slice(offset,offset+5).toString("ascii")!=="BEGIN")return false;return true}function write(key,options){throw new Error('"auto" format cannot be used for writing')}},{"../key":512,"../private-key":513,"../utils":516,"./pem":502,"./rfc4253":505,"./ssh":507,"assert-plus":185}],501:[function(require,module,exports){module.exports={read:read,verify:verify,sign:sign,signAsync:signAsync,write:write,fromBuffer:fromBuffer,toBuffer:toBuffer};var assert=require("assert-plus");var SSHBuffer=require("../ssh-buffer");var crypto=require("crypto");var algs=require("../algs");var Key=require("../key");var PrivateKey=require("../private-key");var Identity=require("../identity");var rfc4253=require("./rfc4253");var Signature=require("../signature");var utils=require("../utils");var Certificate=require("../certificate");function verify(cert,key){return false}var TYPES={user:1,host:2};Object.keys(TYPES).forEach(function(k){TYPES[TYPES[k]]=k});var ECDSA_ALGO=/^ecdsa-sha2-([^@-]+)-cert-v01@openssh.com$/;function read(buf,options){if(Buffer.isBuffer(buf))buf=buf.toString("ascii");var parts=buf.trim().split(/[ \t\n]+/g);if(parts.length<2||parts.length>3)throw new Error("Not a valid SSH certificate line");var algo=parts[0];var data=parts[1];data=new Buffer(data,"base64");return fromBuffer(data,algo)}function fromBuffer(data,algo,partial){var sshbuf=new SSHBuffer({buffer:data});var innerAlgo=sshbuf.readString();if(algo!==undefined&&innerAlgo!==algo)throw new Error("SSH certificate algorithm mismatch");if(algo===undefined)algo=innerAlgo;var cert={};cert.signatures={};cert.signatures.openssh={};cert.signatures.openssh.nonce=sshbuf.readBuffer();var key={};var parts=key.parts=[];key.type=getAlg(algo);var partCount=algs.info[key.type].parts.length;while(parts.length<partCount)parts.push(sshbuf.readPart());assert.ok(parts.length>=1,"key must have at least one part");var algInfo=algs.info[key.type];if(key.type==="ecdsa"){var res=ECDSA_ALGO.exec(algo);assert.ok(res!==null);assert.strictEqual(res[1],parts[0].data.toString())}for(var i=0;i<algInfo.parts.length;++i){parts[i].name=algInfo.parts[i];if(parts[i].name!=="curve"&&algInfo.normalize!==false){var p=parts[i];p.data=utils.mpNormalize(p.data)}}cert.subjectKey=new Key(key);cert.serial=sshbuf.readInt64();var type=TYPES[sshbuf.readInt()];assert.string(type,"valid cert type");cert.signatures.openssh.keyId=sshbuf.readString();var principals=[];var pbuf=sshbuf.readBuffer();var psshbuf=new SSHBuffer({buffer:pbuf});while(!psshbuf.atEnd())principals.push(psshbuf.readString());if(principals.length===0)principals=["*"];cert.subjects=principals.map(function(pr){if(type==="user")return Identity.forUser(pr);else if(type==="host")return Identity.forHost(pr);throw new Error("Unknown identity type "+type)});cert.validFrom=int64ToDate(sshbuf.readInt64());cert.validUntil=int64ToDate(sshbuf.readInt64());cert.signatures.openssh.critical=sshbuf.readBuffer();cert.signatures.openssh.exts=sshbuf.readBuffer();sshbuf.readBuffer();var signingKeyBuf=sshbuf.readBuffer();cert.issuerKey=rfc4253.read(signingKeyBuf);cert.issuer=Identity.forHost("**");var sigBuf=sshbuf.readBuffer();cert.signatures.openssh.signature=Signature.parse(sigBuf,cert.issuerKey.type,"ssh");if(partial!==undefined){partial.remainder=sshbuf.remainder();partial.consumed=sshbuf._offset}return new Certificate(cert)}function int64ToDate(buf){var i=buf.readUInt32BE(0)*4294967296;i+=buf.readUInt32BE(4);var d=new Date;d.setTime(i*1e3);d.sourceInt64=buf;return d}function dateToInt64(date){if(date.sourceInt64!==undefined)return date.sourceInt64;var i=Math.round(date.getTime()/1e3);var upper=Math.floor(i/4294967296);var lower=Math.floor(i%4294967296);var buf=new Buffer(8);buf.writeUInt32BE(upper,0);buf.writeUInt32BE(lower,4);return buf}function sign(cert,key){if(cert.signatures.openssh===undefined)cert.signatures.openssh={};try{var blob=toBuffer(cert,true)}catch(e){delete cert.signatures.openssh;return false}var sig=cert.signatures.openssh;var hashAlgo=undefined;if(key.type==="rsa"||key.type==="dsa")hashAlgo="sha1";var signer=key.createSign(hashAlgo);signer.write(blob);sig.signature=signer.sign();return true}function signAsync(cert,signer,done){if(cert.signatures.openssh===undefined)cert.signatures.openssh={};try{var blob=toBuffer(cert,true)}catch(e){delete cert.signatures.openssh;done(e);return}var sig=cert.signatures.openssh;signer(blob,function(err,signature){if(err){done(err);return}try{signature.toBuffer("ssh")}catch(e){done(e);return}sig.signature=signature;done()})}function write(cert,options){if(options===undefined)options={};var blob=toBuffer(cert);var out=getCertType(cert.subjectKey)+" "+blob.toString("base64");if(options.comment)out=out+" "+options.comment;return out}function toBuffer(cert,noSig){assert.object(cert.signatures.openssh,"signature for openssh format");var sig=cert.signatures.openssh;if(sig.nonce===undefined)sig.nonce=crypto.randomBytes(16);var buf=new SSHBuffer({});buf.writeString(getCertType(cert.subjectKey));buf.writeBuffer(sig.nonce);var key=cert.subjectKey;var algInfo=algs.info[key.type];algInfo.parts.forEach(function(part){buf.writePart(key.part[part])});buf.writeInt64(cert.serial);var type=cert.subjects[0].type;assert.notStrictEqual(type,"unknown");cert.subjects.forEach(function(id){assert.strictEqual(id.type,type)});type=TYPES[type];buf.writeInt(type);if(sig.keyId===undefined){sig.keyId=cert.subjects[0].type+"_"+(cert.subjects[0].uid||cert.subjects[0].hostname)}buf.writeString(sig.keyId);var sub=new SSHBuffer({});cert.subjects.forEach(function(id){if(type===TYPES.host)sub.writeString(id.hostname);else if(type===TYPES.user)sub.writeString(id.uid)});buf.writeBuffer(sub.toBuffer());buf.writeInt64(dateToInt64(cert.validFrom));buf.writeInt64(dateToInt64(cert.validUntil));if(sig.critical===undefined)sig.critical=new Buffer(0);buf.writeBuffer(sig.critical);if(sig.exts===undefined)sig.exts=new Buffer(0);buf.writeBuffer(sig.exts);buf.writeBuffer(new Buffer(0));sub=rfc4253.write(cert.issuerKey);buf.writeBuffer(sub);if(!noSig)buf.writeBuffer(sig.signature.toBuffer("ssh"));return buf.toBuffer()}function getAlg(certType){if(certType==="ssh-rsa-cert-v01@openssh.com")return"rsa";if(certType==="ssh-dss-cert-v01@openssh.com")return"dsa";if(certType.match(ECDSA_ALGO))return"ecdsa";if(certType==="ssh-ed25519-cert-v01@openssh.com")return"ed25519";throw new Error("Unsupported cert type "+certType)}function getCertType(key){if(key.type==="rsa")return"ssh-rsa-cert-v01@openssh.com";if(key.type==="dsa")return"ssh-dss-cert-v01@openssh.com";if(key.type==="ecdsa")return"ecdsa-sha2-"+key.curve+"-cert-v01@openssh.com";if(key.type==="ed25519")return"ssh-ed25519-cert-v01@openssh.com";throw new Error("Unsupported key type "+key.type)}},{"../algs":494,"../certificate":495,"../identity":510,"../key":512,"../private-key":513,"../signature":514,"../ssh-buffer":515,"../utils":516,"./rfc4253":505,"assert-plus":185,crypto:undefined}],502:[function(require,module,exports){module.exports={read:read,write:write};var assert=require("assert-plus");var asn1=require("asn1");var crypto=require("crypto");var algs=require("../algs");var utils=require("../utils");var Key=require("../key");var PrivateKey=require("../private-key");var pkcs1=require("./pkcs1");var pkcs8=require("./pkcs8");var sshpriv=require("./ssh-private");var rfc4253=require("./rfc4253");var errors=require("../errors");function read(buf,options,forceType){var input=buf;if(typeof buf!=="string"){assert.buffer(buf,"buf");buf=buf.toString("ascii")}var lines=buf.trim().split("\n");var m=lines[0].match(/[-]+[ ]*BEGIN ([A-Z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);assert.ok(m,"invalid PEM header");var m2=lines[lines.length-1].match(/[-]+[ ]*END ([A-Z0-9]+ )?(PUBLIC|PRIVATE) KEY[ ]*[-]+/);assert.ok(m2,"invalid PEM footer");assert.equal(m[2],m2[2]);var type=m[2].toLowerCase();var alg;if(m[1]){assert.equal(m[1],m2[1],"PEM header and footer mismatch");alg=m[1].trim()}var headers={};while(true){lines=lines.slice(1);m=lines[0].match(/^([A-Za-z0-9-]+): (.+)$/);if(!m)break;headers[m[1].toLowerCase()]=m[2]}var cipher,key,iv;if(headers["proc-type"]){var parts=headers["proc-type"].split(",");if(parts[0]==="4"&&parts[1]==="ENCRYPTED"){if(typeof options.passphrase==="string"){options.passphrase=new Buffer(options.passphrase,"utf-8")}if(!Buffer.isBuffer(options.passphrase)){throw new errors.KeyEncryptedError(options.filename,"PEM")}else{parts=headers["dek-info"].split(",");assert.ok(parts.length===2);cipher=parts[0].toLowerCase();iv=new Buffer(parts[1],"hex");key=utils.opensslKeyDeriv(cipher,iv,options.passphrase,1).key}}}lines=lines.slice(0,-1).join("");buf=new Buffer(lines,"base64");if(cipher&&key&&iv){var cipherStream=crypto.createDecipheriv(cipher,key,iv);var chunk,chunks=[];cipherStream.once("error",function(e){if(e.toString().indexOf("bad decrypt")!==-1){throw new Error("Incorrect passphrase "+"supplied, could not decrypt key")}throw e});cipherStream.write(buf);cipherStream.end();while((chunk=cipherStream.read())!==null)chunks.push(chunk);buf=Buffer.concat(chunks)}if(alg&&alg.toLowerCase()==="openssh")return sshpriv.readSSHPrivate(type,buf,options);if(alg&&alg.toLowerCase()==="ssh2")return rfc4253.readType(type,buf,options);var der=new asn1.BerReader(buf);der.originalInput=input;der.readSequence();if(alg){if(forceType)assert.strictEqual(forceType,"pkcs1");return pkcs1.readPkcs1(alg,type,der)}else{if(forceType)assert.strictEqual(forceType,"pkcs8");return pkcs8.readPkcs8(alg,type,der)}}function write(key,options,type){assert.object(key);var alg={ecdsa:"EC",rsa:"RSA",dsa:"DSA"}[key.type];var header;var der=new asn1.BerWriter;if(PrivateKey.isPrivateKey(key)){if(type&&type==="pkcs8"){header="PRIVATE KEY";pkcs8.writePkcs8(der,key)}else{if(type)assert.strictEqual(type,"pkcs1");header=alg+" PRIVATE KEY";pkcs1.writePkcs1(der,key)}}else if(Key.isKey(key)){if(type&&type==="pkcs1"){header=alg+" PUBLIC KEY";pkcs1.writePkcs1(der,key)}else{if(type)assert.strictEqual(type,"pkcs8");header="PUBLIC KEY";pkcs8.writePkcs8(der,key)}}else{throw new Error("key is not a Key or PrivateKey")}var tmp=der.buffer.toString("base64");var len=tmp.length+tmp.length/64+18+16+header.length*2+10;var buf=new Buffer(len);var o=0;o+=buf.write("-----BEGIN "+header+"-----\n",o);for(var i=0;i<tmp.length;){var limit=i+64;if(limit>tmp.length)limit=tmp.length;o+=buf.write(tmp.slice(i,limit),o);buf[o++]=10;i=limit}o+=buf.write("-----END "+header+"-----\n",o);return buf.slice(0,o)}},{"../algs":494,"../errors":498,"../key":512,"../private-key":513,"../utils":516,"./pkcs1":503,"./pkcs8":504,"./rfc4253":505,"./ssh-private":506,asn1:184,"assert-plus":185,crypto:undefined}],503:[function(require,module,exports){module.exports={read:read,readPkcs1:readPkcs1,write:write,writePkcs1:writePkcs1};var assert=require("assert-plus");var asn1=require("asn1");var algs=require("../algs");var utils=require("../utils");var Key=require("../key");var PrivateKey=require("../private-key");var pem=require("./pem");var pkcs8=require("./pkcs8");var readECDSACurve=pkcs8.readECDSACurve;function read(buf,options){return pem.read(buf,options,"pkcs1")}function write(key,options){return pem.write(key,options,"pkcs1")}function readMPInt(der,nm){assert.strictEqual(der.peek(),asn1.Ber.Integer,nm+" is not an Integer");return utils.mpNormalize(der.readString(asn1.Ber.Integer,true))}function readPkcs1(alg,type,der){switch(alg){case"RSA":if(type==="public")return readPkcs1RSAPublic(der);else if(type==="private")return readPkcs1RSAPrivate(der);throw new Error("Unknown key type: "+type);case"DSA":if(type==="public")return readPkcs1DSAPublic(der);else if(type==="private")return readPkcs1DSAPrivate(der);throw new Error("Unknown key type: "+type);case"EC":case"ECDSA":if(type==="private")return readPkcs1ECDSAPrivate(der);else if(type==="public")return readPkcs1ECDSAPublic(der);throw new Error("Unknown key type: "+type);default:throw new Error("Unknown key algo: "+alg)}}function readPkcs1RSAPublic(der){var n=readMPInt(der,"modulus");var e=readMPInt(der,"exponent");var key={type:"rsa",parts:[{name:"e",data:e},{name:"n",data:n}]};return new Key(key)}function readPkcs1RSAPrivate(der){var version=readMPInt(der,"version");assert.strictEqual(version[0],0);var n=readMPInt(der,"modulus");var e=readMPInt(der,"public exponent");var d=readMPInt(der,"private exponent");var p=readMPInt(der,"prime1");var q=readMPInt(der,"prime2");var dmodp=readMPInt(der,"exponent1");var dmodq=readMPInt(der,"exponent2");var iqmp=readMPInt(der,"iqmp");var key={type:"rsa",parts:[{name:"n",data:n},{name:"e",data:e},{name:"d",data:d},{name:"iqmp",data:iqmp},{name:"p",data:p},{name:"q",data:q},{name:"dmodp",data:dmodp},{name:"dmodq",data:dmodq}]};return new PrivateKey(key)}function readPkcs1DSAPrivate(der){var version=readMPInt(der,"version");assert.strictEqual(version.readUInt8(0),0);var p=readMPInt(der,"p");var q=readMPInt(der,"q");var g=readMPInt(der,"g");var y=readMPInt(der,"y");var x=readMPInt(der,"x");var key={type:"dsa",parts:[{name:"p",data:p},{name:"q",data:q},{name:"g",data:g},{name:"y",data:y},{name:"x",data:x}]};return new PrivateKey(key)}function readPkcs1DSAPublic(der){var y=readMPInt(der,"y");var p=readMPInt(der,"p");var q=readMPInt(der,"q");var g=readMPInt(der,"g");var key={type:"dsa",parts:[{name:"y",data:y},{name:"p",data:p},{name:"q",data:q},{name:"g",data:g}]};return new Key(key)}function readPkcs1ECDSAPublic(der){der.readSequence();var oid=der.readOID();assert.strictEqual(oid,"1.2.840.10045.2.1","must be ecPublicKey");var curveOid=der.readOID();var curve;var curves=Object.keys(algs.curves);for(var j=0;j<curves.length;++j){var c=curves[j];var cd=algs.curves[c];if(cd.pkcs8oid===curveOid){curve=c;break}}assert.string(curve,"a known ECDSA named curve");var Q=der.readString(asn1.Ber.BitString,true);Q=utils.ecNormalize(Q);var key={type:"ecdsa",parts:[{name:"curve",data:new Buffer(curve)},{name:"Q",data:Q}]};return new Key(key)}function readPkcs1ECDSAPrivate(der){var version=readMPInt(der,"version");assert.strictEqual(version.readUInt8(0),1);var d=der.readString(asn1.Ber.OctetString,true);der.readSequence(160);var curve=readECDSACurve(der);assert.string(curve,"a known elliptic curve");der.readSequence(161);var Q=der.readString(asn1.Ber.BitString,true);Q=utils.ecNormalize(Q);var key={type:"ecdsa",parts:[{name:"curve",data:new Buffer(curve)},{name:"Q",data:Q},{name:"d",data:d}]};return new PrivateKey(key)}function writePkcs1(der,key){der.startSequence();switch(key.type){case"rsa":if(PrivateKey.isPrivateKey(key))writePkcs1RSAPrivate(der,key);else writePkcs1RSAPublic(der,key);break;case"dsa":if(PrivateKey.isPrivateKey(key))writePkcs1DSAPrivate(der,key);else writePkcs1DSAPublic(der,key);break;case"ecdsa":if(PrivateKey.isPrivateKey(key))writePkcs1ECDSAPrivate(der,key);else writePkcs1ECDSAPublic(der,key);break;default:throw new Error("Unknown key algo: "+key.type)}der.endSequence()}function writePkcs1RSAPublic(der,key){der.writeBuffer(key.part.n.data,asn1.Ber.Integer);der.writeBuffer(key.part.e.data,asn1.Ber.Integer)}function writePkcs1RSAPrivate(der,key){var ver=new Buffer(1);ver[0]=0;der.writeBuffer(ver,asn1.Ber.Integer);der.writeBuffer(key.part.n.data,asn1.Ber.Integer);der.writeBuffer(key.part.e.data,asn1.Ber.Integer);der.writeBuffer(key.part.d.data,asn1.Ber.Integer);der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);if(!key.part.dmodp||!key.part.dmodq)utils.addRSAMissing(key);der.writeBuffer(key.part.dmodp.data,asn1.Ber.Integer);der.writeBuffer(key.part.dmodq.data,asn1.Ber.Integer);der.writeBuffer(key.part.iqmp.data,asn1.Ber.Integer)}function writePkcs1DSAPrivate(der,key){var ver=new Buffer(1);ver[0]=0;der.writeBuffer(ver,asn1.Ber.Integer);der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);der.writeBuffer(key.part.g.data,asn1.Ber.Integer);der.writeBuffer(key.part.y.data,asn1.Ber.Integer);der.writeBuffer(key.part.x.data,asn1.Ber.Integer)}function writePkcs1DSAPublic(der,key){der.writeBuffer(key.part.y.data,asn1.Ber.Integer);der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);der.writeBuffer(key.part.g.data,asn1.Ber.Integer)}function writePkcs1ECDSAPublic(der,key){der.startSequence();der.writeOID("1.2.840.10045.2.1");var curve=key.part.curve.data.toString();var curveOid=algs.curves[curve].pkcs8oid;assert.string(curveOid,"a known ECDSA named curve");der.writeOID(curveOid);der.endSequence();var Q=utils.ecNormalize(key.part.Q.data,true);der.writeBuffer(Q,asn1.Ber.BitString)}function writePkcs1ECDSAPrivate(der,key){var ver=new Buffer(1);ver[0]=1;der.writeBuffer(ver,asn1.Ber.Integer);der.writeBuffer(key.part.d.data,asn1.Ber.OctetString);der.startSequence(160);var curve=key.part.curve.data.toString();var curveOid=algs.curves[curve].pkcs8oid;assert.string(curveOid,"a known ECDSA named curve");der.writeOID(curveOid);der.endSequence();der.startSequence(161);var Q=utils.ecNormalize(key.part.Q.data,true);der.writeBuffer(Q,asn1.Ber.BitString);der.endSequence()}},{"../algs":494,"../key":512,"../private-key":513,"../utils":516,"./pem":502,"./pkcs8":504,asn1:184,"assert-plus":185}],504:[function(require,module,exports){module.exports={read:read,readPkcs8:readPkcs8,write:write,writePkcs8:writePkcs8,readECDSACurve:readECDSACurve,writeECDSACurve:writeECDSACurve};var assert=require("assert-plus");var asn1=require("asn1");var algs=require("../algs");var utils=require("../utils");var Key=require("../key");var PrivateKey=require("../private-key");var pem=require("./pem");function read(buf,options){return pem.read(buf,options,"pkcs8")}function write(key,options){return pem.write(key,options,"pkcs8")}function readMPInt(der,nm){assert.strictEqual(der.peek(),asn1.Ber.Integer,nm+" is not an Integer");return utils.mpNormalize(der.readString(asn1.Ber.Integer,true))}function readPkcs8(alg,type,der){if(der.peek()===asn1.Ber.Integer){assert.strictEqual(type,"private","unexpected Integer at start of public key");der.readString(asn1.Ber.Integer,true)}der.readSequence();var next=der.offset+der.length;var oid=der.readOID();switch(oid){case"1.2.840.113549.1.1.1":der._offset=next;if(type==="public")return readPkcs8RSAPublic(der);else return readPkcs8RSAPrivate(der);case"1.2.840.10040.4.1":if(type==="public")return readPkcs8DSAPublic(der);else return readPkcs8DSAPrivate(der);case"1.2.840.10045.2.1":if(type==="public")return readPkcs8ECDSAPublic(der);else return readPkcs8ECDSAPrivate(der);default:throw new Error("Unknown key type OID "+oid)}}function readPkcs8RSAPublic(der){der.readSequence(asn1.Ber.BitString);der.readByte();der.readSequence();var n=readMPInt(der,"modulus");var e=readMPInt(der,"exponent");var key={type:"rsa",source:der.originalInput,parts:[{name:"e",data:e},{name:"n",data:n}]};return new Key(key)}function readPkcs8RSAPrivate(der){der.readSequence(asn1.Ber.OctetString);der.readSequence();var ver=readMPInt(der,"version");assert.equal(ver[0],0,"unknown RSA private key version");var n=readMPInt(der,"modulus");var e=readMPInt(der,"public exponent");var d=readMPInt(der,"private exponent");var p=readMPInt(der,"prime1");var q=readMPInt(der,"prime2");var dmodp=readMPInt(der,"exponent1");var dmodq=readMPInt(der,"exponent2");var iqmp=readMPInt(der,"iqmp");var key={type:"rsa",parts:[{name:"n",data:n},{name:"e",data:e},{name:"d",data:d},{name:"iqmp",data:iqmp},{name:"p",data:p},{name:"q",data:q},{name:"dmodp",data:dmodp},{name:"dmodq",data:dmodq}]};return new PrivateKey(key)}function readPkcs8DSAPublic(der){der.readSequence();var p=readMPInt(der,"p");var q=readMPInt(der,"q");var g=readMPInt(der,"g");der.readSequence(asn1.Ber.BitString);der.readByte();var y=readMPInt(der,"y");var key={type:"dsa",parts:[{name:"p",data:p},{name:"q",data:q},{name:"g",data:g},{name:"y",data:y}]};return new Key(key)}function readPkcs8DSAPrivate(der){der.readSequence();var p=readMPInt(der,"p");var q=readMPInt(der,"q");var g=readMPInt(der,"g");der.readSequence(asn1.Ber.OctetString);var x=readMPInt(der,"x");var y=utils.calculateDSAPublic(g,p,x);var key={type:"dsa",parts:[{name:"p",data:p},{name:"q",data:q},{name:"g",data:g},{name:"y",data:y},{name:"x",data:x}]};return new PrivateKey(key)}function readECDSACurve(der){var curveName,curveNames;var j,c,cd;if(der.peek()===asn1.Ber.OID){var oid=der.readOID();curveNames=Object.keys(algs.curves);for(j=0;j<curveNames.length;++j){c=curveNames[j];cd=algs.curves[c];if(cd.pkcs8oid===oid){curveName=c;break}}}else{der.readSequence();var version=der.readString(asn1.Ber.Integer,true);assert.strictEqual(version[0],1,"ECDSA key not version 1");var curve={};der.readSequence();var fieldTypeOid=der.readOID();assert.strictEqual(fieldTypeOid,"1.2.840.10045.1.1","ECDSA key is not from a prime-field");var p=curve.p=utils.mpNormalize(der.readString(asn1.Ber.Integer,true));curve.size=p.length*8-utils.countZeros(p);der.readSequence();curve.a=utils.mpNormalize(der.readString(asn1.Ber.OctetString,true));curve.b=utils.mpNormalize(der.readString(asn1.Ber.OctetString,true));if(der.peek()===asn1.Ber.BitString)curve.s=der.readString(asn1.Ber.BitString,true);curve.G=der.readString(asn1.Ber.OctetString,true);assert.strictEqual(curve.G[0],4,"uncompressed G is required");curve.n=utils.mpNormalize(der.readString(asn1.Ber.Integer,true));curve.h=utils.mpNormalize(der.readString(asn1.Ber.Integer,true));assert.strictEqual(curve.h[0],1,"a cofactor=1 curve is "+"required");curveNames=Object.keys(algs.curves);var ks=Object.keys(curve);for(j=0;j<curveNames.length;++j){c=curveNames[j];cd=algs.curves[c];var equal=true;for(var i=0;i<ks.length;++i){var k=ks[i];if(cd[k]===undefined)continue;if(typeof cd[k]==="object"&&cd[k].equals!==undefined){if(!cd[k].equals(curve[k])){equal=false;break}}else if(Buffer.isBuffer(cd[k])){if(cd[k].toString("binary")!==curve[k].toString("binary")){equal=false;break}}else{if(cd[k]!==curve[k]){equal=false;break}}}if(equal){curveName=c;break}}}return curveName}function readPkcs8ECDSAPrivate(der){var curveName=readECDSACurve(der);assert.string(curveName,"a known elliptic curve");der.readSequence(asn1.Ber.OctetString);der.readSequence();var version=readMPInt(der,"version");assert.equal(version[0],1,"unknown version of ECDSA key");var d=der.readString(asn1.Ber.OctetString,true);der.readSequence(161);var Q=der.readString(asn1.Ber.BitString,true);Q=utils.ecNormalize(Q);var key={type:"ecdsa",parts:[{name:"curve",data:new Buffer(curveName)},{name:"Q",data:Q},{name:"d",data:d}]};return new PrivateKey(key)}function readPkcs8ECDSAPublic(der){var curveName=readECDSACurve(der);assert.string(curveName,"a known elliptic curve");var Q=der.readString(asn1.Ber.BitString,true);Q=utils.ecNormalize(Q);var key={type:"ecdsa",parts:[{name:"curve",data:new Buffer(curveName)},{name:"Q",data:Q}]};return new Key(key)}function writePkcs8(der,key){der.startSequence();if(PrivateKey.isPrivateKey(key)){var sillyInt=new Buffer(1);sillyInt[0]=0;der.writeBuffer(sillyInt,asn1.Ber.Integer)}der.startSequence();switch(key.type){case"rsa":der.writeOID("1.2.840.113549.1.1.1");if(PrivateKey.isPrivateKey(key))writePkcs8RSAPrivate(key,der);else writePkcs8RSAPublic(key,der);break;case"dsa":der.writeOID("1.2.840.10040.4.1");if(PrivateKey.isPrivateKey(key))writePkcs8DSAPrivate(key,der);else writePkcs8DSAPublic(key,der);break;case"ecdsa":der.writeOID("1.2.840.10045.2.1");if(PrivateKey.isPrivateKey(key))writePkcs8ECDSAPrivate(key,der);else writePkcs8ECDSAPublic(key,der);break;default:throw new Error("Unsupported key type: "+key.type)}der.endSequence()}function writePkcs8RSAPrivate(key,der){der.writeNull();der.endSequence();der.startSequence(asn1.Ber.OctetString);der.startSequence();var version=new Buffer(1);version[0]=0;der.writeBuffer(version,asn1.Ber.Integer);der.writeBuffer(key.part.n.data,asn1.Ber.Integer);der.writeBuffer(key.part.e.data,asn1.Ber.Integer);der.writeBuffer(key.part.d.data,asn1.Ber.Integer);der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);if(!key.part.dmodp||!key.part.dmodq)utils.addRSAMissing(key);der.writeBuffer(key.part.dmodp.data,asn1.Ber.Integer);der.writeBuffer(key.part.dmodq.data,asn1.Ber.Integer);der.writeBuffer(key.part.iqmp.data,asn1.Ber.Integer);der.endSequence();der.endSequence()}function writePkcs8RSAPublic(key,der){der.writeNull();der.endSequence();der.startSequence(asn1.Ber.BitString);der.writeByte(0);der.startSequence();der.writeBuffer(key.part.n.data,asn1.Ber.Integer);der.writeBuffer(key.part.e.data,asn1.Ber.Integer);der.endSequence();der.endSequence()}function writePkcs8DSAPrivate(key,der){der.startSequence();der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);der.writeBuffer(key.part.g.data,asn1.Ber.Integer);der.endSequence();der.endSequence();der.startSequence(asn1.Ber.OctetString);der.writeBuffer(key.part.x.data,asn1.Ber.Integer);der.endSequence()}function writePkcs8DSAPublic(key,der){der.startSequence();der.writeBuffer(key.part.p.data,asn1.Ber.Integer);der.writeBuffer(key.part.q.data,asn1.Ber.Integer);der.writeBuffer(key.part.g.data,asn1.Ber.Integer);der.endSequence();der.endSequence();der.startSequence(asn1.Ber.BitString);der.writeByte(0);der.writeBuffer(key.part.y.data,asn1.Ber.Integer);der.endSequence()}function writeECDSACurve(key,der){var curve=algs.curves[key.curve];if(curve.pkcs8oid){der.writeOID(curve.pkcs8oid)}else{der.startSequence();var version=new Buffer(1);version.writeUInt8(1,0);der.writeBuffer(version,asn1.Ber.Integer);der.startSequence();der.writeOID("1.2.840.10045.1.1");der.writeBuffer(curve.p,asn1.Ber.Integer);der.endSequence();der.startSequence();var a=curve.p;if(a[0]===0)a=a.slice(1);der.writeBuffer(a,asn1.Ber.OctetString);der.writeBuffer(curve.b,asn1.Ber.OctetString);der.writeBuffer(curve.s,asn1.Ber.BitString);der.endSequence();der.writeBuffer(curve.G,asn1.Ber.OctetString);der.writeBuffer(curve.n,asn1.Ber.Integer);var h=curve.h;if(!h){h=new Buffer(1);h[0]=1}der.writeBuffer(h,asn1.Ber.Integer);der.endSequence()}}function writePkcs8ECDSAPublic(key,der){writeECDSACurve(key,der);der.endSequence();var Q=utils.ecNormalize(key.part.Q.data,true);der.writeBuffer(Q,asn1.Ber.BitString)}function writePkcs8ECDSAPrivate(key,der){writeECDSACurve(key,der);der.endSequence();der.startSequence(asn1.Ber.OctetString);der.startSequence();var version=new Buffer(1);version[0]=1;der.writeBuffer(version,asn1.Ber.Integer);der.writeBuffer(key.part.d.data,asn1.Ber.OctetString);der.startSequence(161);var Q=utils.ecNormalize(key.part.Q.data,true);der.writeBuffer(Q,asn1.Ber.BitString);der.endSequence();der.endSequence();der.endSequence()}},{"../algs":494,"../key":512,"../private-key":513,"../utils":516,"./pem":502,asn1:184,"assert-plus":185}],505:[function(require,module,exports){module.exports={read:read.bind(undefined,false,undefined),readType:read.bind(undefined,false),write:write,readPartial:read.bind(undefined,true),readInternal:read,keyTypeToAlg:keyTypeToAlg,algToKeyType:algToKeyType};var assert=require("assert-plus");var algs=require("../algs");var utils=require("../utils");var Key=require("../key");var PrivateKey=require("../private-key");var SSHBuffer=require("../ssh-buffer");function algToKeyType(alg){assert.string(alg);if(alg==="ssh-dss")return"dsa";else if(alg==="ssh-rsa")return"rsa";else if(alg==="ssh-ed25519")return"ed25519";else if(alg==="ssh-curve25519")return"curve25519";else if(alg.match(/^ecdsa-sha2-/))return"ecdsa";else throw new Error("Unknown algorithm "+alg)}function keyTypeToAlg(key){assert.object(key);if(key.type==="dsa")return"ssh-dss";else if(key.type==="rsa")return"ssh-rsa";else if(key.type==="ed25519")return"ssh-ed25519";else if(key.type==="curve25519")return"ssh-curve25519";else if(key.type==="ecdsa")return"ecdsa-sha2-"+key.part.curve.data.toString();else throw new Error("Unknown key type "+key.type)}function read(partial,type,buf,options){if(typeof buf==="string")buf=new Buffer(buf);assert.buffer(buf,"buf");var key={};var parts=key.parts=[];var sshbuf=new SSHBuffer({buffer:buf});var alg=sshbuf.readString();assert.ok(!sshbuf.atEnd(),"key must have at least one part");key.type=algToKeyType(alg);var partCount=algs.info[key.type].parts.length;if(type&&type==="private")partCount=algs.privInfo[key.type].parts.length;while(!sshbuf.atEnd()&&parts.length<partCount)parts.push(sshbuf.readPart());while(!partial&&!sshbuf.atEnd())parts.push(sshbuf.readPart());assert.ok(parts.length>=1,"key must have at least one part");assert.ok(partial||sshbuf.atEnd(),"leftover bytes at end of key");var Constructor=Key;var algInfo=algs.info[key.type];if(type==="private"||algInfo.parts.length!==parts.length){algInfo=algs.privInfo[key.type];Constructor=PrivateKey}assert.strictEqual(algInfo.parts.length,parts.length);if(key.type==="ecdsa"){var res=/^ecdsa-sha2-(.+)$/.exec(alg);assert.ok(res!==null);assert.strictEqual(res[1],parts[0].data.toString())}var normalized=true;for(var i=0;i<algInfo.parts.length;++i){parts[i].name=algInfo.parts[i];if(parts[i].name!=="curve"&&algInfo.normalize!==false){var p=parts[i];var nd=utils.mpNormalize(p.data);if(nd!==p.data){p.data=nd;normalized=false}}}if(normalized)key._rfc4253Cache=sshbuf.toBuffer();if(partial&&typeof partial==="object"){partial.remainder=sshbuf.remainder();partial.consumed=sshbuf._offset}return new Constructor(key)}function write(key,options){assert.object(key);var alg=keyTypeToAlg(key);var i;var algInfo=algs.info[key.type];if(PrivateKey.isPrivateKey(key))algInfo=algs.privInfo[key.type];var parts=algInfo.parts;var buf=new SSHBuffer({});buf.writeString(alg);for(i=0;i<parts.length;++i){var data=key.part[parts[i]].data;if(algInfo.normalize!==false)data=utils.mpNormalize(data);buf.writeBuffer(data)}return buf.toBuffer()}},{"../algs":494,"../key":512,"../private-key":513,"../ssh-buffer":515,"../utils":516,"assert-plus":185}],506:[function(require,module,exports){module.exports={read:read,readSSHPrivate:readSSHPrivate,write:write};var assert=require("assert-plus");var asn1=require("asn1");var algs=require("../algs");var utils=require("../utils");var crypto=require("crypto");var Key=require("../key");var PrivateKey=require("../private-key");var pem=require("./pem");var rfc4253=require("./rfc4253");var SSHBuffer=require("../ssh-buffer");var errors=require("../errors");var bcrypt;function read(buf,options){return pem.read(buf,options)}var MAGIC="openssh-key-v1";function readSSHPrivate(type,buf,options){buf=new SSHBuffer({buffer:buf});var magic=buf.readCString();assert.strictEqual(magic,MAGIC,"bad magic string");var cipher=buf.readString();var kdf=buf.readString();var kdfOpts=buf.readBuffer();var nkeys=buf.readInt();if(nkeys!==1){throw new Error("OpenSSH-format key file contains "+"multiple keys: this is unsupported.")}var pubKey=buf.readBuffer();if(type==="public"){assert.ok(buf.atEnd(),"excess bytes left after key");return rfc4253.read(pubKey)}var privKeyBlob=buf.readBuffer();assert.ok(buf.atEnd(),"excess bytes left after key");var kdfOptsBuf=new SSHBuffer({buffer:kdfOpts});switch(kdf){case"none":if(cipher!=="none"){throw new Error('OpenSSH-format key uses KDF "none" '+'but specifies a cipher other than "none"')}break;case"bcrypt":var salt=kdfOptsBuf.readBuffer();var rounds=kdfOptsBuf.readInt();var cinf=utils.opensshCipherInfo(cipher);if(bcrypt===undefined){bcrypt=require("bcrypt-pbkdf")}if(typeof options.passphrase==="string"){options.passphrase=new Buffer(options.passphrase,"utf-8")}if(!Buffer.isBuffer(options.passphrase)){throw new errors.KeyEncryptedError(options.filename,"OpenSSH")}var pass=new Uint8Array(options.passphrase);var salti=new Uint8Array(salt);var out=new Uint8Array(cinf.keySize+cinf.blockSize);var res=bcrypt.pbkdf(pass,pass.length,salti,salti.length,out,out.length,rounds);if(res!==0){throw new Error("bcrypt_pbkdf function returned "+"failure, parameters invalid")}out=new Buffer(out);var ckey=out.slice(0,cinf.keySize);var iv=out.slice(cinf.keySize,cinf.keySize+cinf.blockSize);var cipherStream=crypto.createDecipheriv(cinf.opensslName,ckey,iv);cipherStream.setAutoPadding(false);var chunk,chunks=[];cipherStream.once("error",function(e){if(e.toString().indexOf("bad decrypt")!==-1){throw new Error("Incorrect passphrase "+"supplied, could not decrypt key")}throw e});cipherStream.write(privKeyBlob);cipherStream.end();while((chunk=cipherStream.read())!==null)chunks.push(chunk);privKeyBlob=Buffer.concat(chunks);break;default:throw new Error('OpenSSH-format key uses unknown KDF "'+kdf+'"')}buf=new SSHBuffer({buffer:privKeyBlob});var checkInt1=buf.readInt();var checkInt2=buf.readInt();if(checkInt1!==checkInt2){throw new Error("Incorrect passphrase supplied, could not "+"decrypt key")}var ret={};var key=rfc4253.readInternal(ret,"private",buf.remainder());buf.skip(ret.consumed);var comment=buf.readString();key.comment=comment;return key}function write(key,options){var pubKey;if(PrivateKey.isPrivateKey(key))pubKey=key.toPublic();else pubKey=key;var cipher="none";var kdf="none";var kdfopts=new Buffer(0);var cinf={blockSize:8};var passphrase;if(options!==undefined){passphrase=options.passphrase;if(typeof passphrase==="string")passphrase=new Buffer(passphrase,"utf-8");if(passphrase!==undefined){assert.buffer(passphrase,"options.passphrase");assert.optionalString(options.cipher,"options.cipher");cipher=options.cipher;if(cipher===undefined)cipher="aes128-ctr";cinf=utils.opensshCipherInfo(cipher);kdf="bcrypt"}}var privBuf;if(PrivateKey.isPrivateKey(key)){privBuf=new SSHBuffer({});var checkInt=crypto.randomBytes(4).readUInt32BE(0);privBuf.writeInt(checkInt);privBuf.writeInt(checkInt);privBuf.write(key.toBuffer("rfc4253"));privBuf.writeString(key.comment||"");var n=1;while(privBuf._offset%cinf.blockSize!==0)privBuf.writeChar(n++);privBuf=privBuf.toBuffer()}switch(kdf){case"none":break;case"bcrypt":var salt=crypto.randomBytes(16);var rounds=16;var kdfssh=new SSHBuffer({});kdfssh.writeBuffer(salt);kdfssh.writeInt(rounds);kdfopts=kdfssh.toBuffer();if(bcrypt===undefined){bcrypt=require("bcrypt-pbkdf")}var pass=new Uint8Array(passphrase);var salti=new Uint8Array(salt);var out=new Uint8Array(cinf.keySize+cinf.blockSize);var res=bcrypt.pbkdf(pass,pass.length,salti,salti.length,out,out.length,rounds);if(res!==0){throw new Error("bcrypt_pbkdf function returned "+"failure, parameters invalid")}out=new Buffer(out);var ckey=out.slice(0,cinf.keySize);var iv=out.slice(cinf.keySize,cinf.keySize+cinf.blockSize);var cipherStream=crypto.createCipheriv(cinf.opensslName,ckey,iv);cipherStream.setAutoPadding(false);var chunk,chunks=[];cipherStream.once("error",function(e){throw e});cipherStream.write(privBuf);cipherStream.end();while((chunk=cipherStream.read())!==null)chunks.push(chunk);privBuf=Buffer.concat(chunks);break;default:throw new Error("Unsupported kdf "+kdf)}var buf=new SSHBuffer({});buf.writeCString(MAGIC);buf.writeString(cipher);buf.writeString(kdf);buf.writeBuffer(kdfopts);buf.writeInt(1);buf.writeBuffer(pubKey.toBuffer("rfc4253"));if(privBuf)buf.writeBuffer(privBuf);buf=buf.toBuffer();var header;if(PrivateKey.isPrivateKey(key))header="OPENSSH PRIVATE KEY";else header="OPENSSH PUBLIC KEY";var tmp=buf.toString("base64");var len=tmp.length+tmp.length/70+18+16+header.length*2+10;buf=new Buffer(len);var o=0;o+=buf.write("-----BEGIN "+header+"-----\n",o);for(var i=0;i<tmp.length;){var limit=i+70;if(limit>tmp.length)limit=tmp.length;o+=buf.write(tmp.slice(i,limit),o);buf[o++]=10;i=limit}o+=buf.write("-----END "+header+"-----\n",o);return buf.slice(0,o)}},{"../algs":494,"../errors":498,"../key":512,"../private-key":513,"../ssh-buffer":515,"../utils":516,"./pem":502,"./rfc4253":505,asn1:184,"assert-plus":185,"bcrypt-pbkdf":201,crypto:undefined}],507:[function(require,module,exports){module.exports={read:read,write:write};var assert=require("assert-plus");var rfc4253=require("./rfc4253");var utils=require("../utils");var Key=require("../key");var PrivateKey=require("../private-key");var sshpriv=require("./ssh-private");var SSHKEY_RE=/^([a-z0-9-]+)[ \t]+([a-zA-Z0-9+\/]+[=]*)([\n \t]+([^\n]+))?$/;var SSHKEY_RE2=/^([a-z0-9-]+)[ \t]+([a-zA-Z0-9+\/ \t\n]+[=]*)(.*)$/;function read(buf,options){if(typeof buf!=="string"){assert.buffer(buf,"buf");buf=buf.toString("ascii")}var trimmed=buf.trim().replace(/[\\\r]/g,"");var m=trimmed.match(SSHKEY_RE);if(!m)m=trimmed.match(SSHKEY_RE2);assert.ok(m,"key must match regex");var type=rfc4253.algToKeyType(m[1]);var kbuf=new Buffer(m[2],"base64");var key;var ret={};if(m[4]){try{key=rfc4253.read(kbuf)}catch(e){m=trimmed.match(SSHKEY_RE2);assert.ok(m,"key must match regex");kbuf=new Buffer(m[2],"base64");key=rfc4253.readInternal(ret,"public",kbuf)}}else{key=rfc4253.readInternal(ret,"public",kbuf)}assert.strictEqual(type,key.type);if(m[4]&&m[4].length>0){key.comment=m[4]}else if(ret.consumed){var data=m[2]+m[3];var realOffset=Math.ceil(ret.consumed/3)*4;data=data.slice(0,realOffset-2).replace(/[^a-zA-Z0-9+\/=]/g,"")+data.slice(realOffset-2);var padding=ret.consumed%3;if(padding>0&&data.slice(realOffset-1,realOffset)!=="=")realOffset--;while(data.slice(realOffset,realOffset+1)==="=")realOffset++;var trailer=data.slice(realOffset);trailer=trailer.replace(/[\r\n]/g," ").replace(/^\s+/,"");if(trailer.match(/^[a-zA-Z0-9]/))key.comment=trailer}return key}function write(key,options){assert.object(key);if(!Key.isKey(key))throw new Error("Must be a public key");var parts=[];var alg=rfc4253.keyTypeToAlg(key);parts.push(alg);var buf=rfc4253.write(key);parts.push(buf.toString("base64"));if(key.comment)parts.push(key.comment);return new Buffer(parts.join(" "))}},{"../key":512,"../private-key":513,"../utils":516,"./rfc4253":505,"./ssh-private":506,"assert-plus":185}],508:[function(require,module,exports){var x509=require("./x509");module.exports={read:read,verify:x509.verify,sign:x509.sign,write:write};var assert=require("assert-plus");var asn1=require("asn1");var algs=require("../algs");var utils=require("../utils");var Key=require("../key");var PrivateKey=require("../private-key");var pem=require("./pem");var Identity=require("../identity");var Signature=require("../signature");var Certificate=require("../certificate");function read(buf,options){if(typeof buf!=="string"){assert.buffer(buf,"buf");buf=buf.toString("ascii")}var lines=buf.trim().split(/[\r\n]+/g);var m=lines[0].match(/[-]+[ ]*BEGIN CERTIFICATE[ ]*[-]+/);assert.ok(m,"invalid PEM header");var m2=lines[lines.length-1].match(/[-]+[ ]*END CERTIFICATE[ ]*[-]+/);assert.ok(m2,"invalid PEM footer");var headers={};while(true){lines=lines.slice(1);m=lines[0].match(/^([A-Za-z0-9-]+): (.+)$/);if(!m)break;headers[m[1].toLowerCase()]=m[2]}lines=lines.slice(0,-1).join("");buf=new Buffer(lines,"base64");return x509.read(buf,options)}function write(cert,options){var dbuf=x509.write(cert,options);var header="CERTIFICATE";var tmp=dbuf.toString("base64");var len=tmp.length+tmp.length/64+18+16+header.length*2+10;var buf=new Buffer(len);var o=0;o+=buf.write("-----BEGIN "+header+"-----\n",o);for(var i=0;i<tmp.length;){var limit=i+64;if(limit>tmp.length)limit=tmp.length;o+=buf.write(tmp.slice(i,limit),o);buf[o++]=10;i=limit}o+=buf.write("-----END "+header+"-----\n",o);return buf.slice(0,o)}},{"../algs":494,"../certificate":495,"../identity":510,"../key":512,"../private-key":513,"../signature":514,"../utils":516,"./pem":502,"./x509":509,asn1:184,"assert-plus":185}],509:[function(require,module,exports){module.exports={read:read,verify:verify,sign:sign,signAsync:signAsync,write:write};var assert=require("assert-plus");var asn1=require("asn1");var algs=require("../algs");var utils=require("../utils");var Key=require("../key");var PrivateKey=require("../private-key");var pem=require("./pem");var Identity=require("../identity");var Signature=require("../signature");var Certificate=require("../certificate");var pkcs8=require("./pkcs8");function readMPInt(der,nm){assert.strictEqual(der.peek(),asn1.Ber.Integer,nm+" is not an Integer");return utils.mpNormalize(der.readString(asn1.Ber.Integer,true))}function verify(cert,key){var sig=cert.signatures.x509;assert.object(sig,"x509 signature");var algParts=sig.algo.split("-");if(algParts[0]!==key.type)return false;var blob=sig.cache;if(blob===undefined){var der=new asn1.BerWriter;writeTBSCert(cert,der);blob=der.buffer}var verifier=key.createVerify(algParts[1]);verifier.write(blob);return verifier.verify(sig.signature)}function Local(i){return asn1.Ber.Context|asn1.Ber.Constructor|i}function Context(i){return asn1.Ber.Context|i}var SIGN_ALGS={"rsa-md5":"1.2.840.113549.1.1.4","rsa-sha1":"1.2.840.113549.1.1.5","rsa-sha256":"1.2.840.113549.1.1.11","rsa-sha384":"1.2.840.113549.1.1.12","rsa-sha512":"1.2.840.113549.1.1.13","dsa-sha1":"1.2.840.10040.4.3","dsa-sha256":"2.16.840.1.101.3.4.3.2","ecdsa-sha1":"1.2.840.10045.4.1","ecdsa-sha256":"1.2.840.10045.4.3.2","ecdsa-sha384":"1.2.840.10045.4.3.3","ecdsa-sha512":"1.2.840.10045.4.3.4"};Object.keys(SIGN_ALGS).forEach(function(k){SIGN_ALGS[SIGN_ALGS[k]]=k});SIGN_ALGS["1.3.14.3.2.3"]="rsa-md5";SIGN_ALGS["1.3.14.3.2.29"]="rsa-sha1";var EXTS={issuerKeyId:"2.5.29.35",altName:"2.5.29.17",basicConstraints:"2.5.29.19",keyUsage:"2.5.29.15",extKeyUsage:"2.5.29.37"};function read(buf,options){if(typeof buf==="string"){buf=new Buffer(buf,"binary")}assert.buffer(buf,"buf");var der=new asn1.BerReader(buf);der.readSequence();if(Math.abs(der.length-der.remain)>1){throw new Error("DER sequence does not contain whole byte "+"stream")}var tbsStart=der.offset;der.readSequence();var sigOffset=der.offset+der.length;var tbsEnd=sigOffset;if(der.peek()===Local(0)){der.readSequence(Local(0));var version=der.readInt();assert.ok(version<=3,"only x.509 versions up to v3 supported")}var cert={};cert.signatures={};var sig=cert.signatures.x509={};sig.extras={};cert.serial=readMPInt(der,"serial");der.readSequence();var after=der.offset+der.length;var certAlgOid=der.readOID();var certAlg=SIGN_ALGS[certAlgOid];if(certAlg===undefined)throw new Error("unknown signature algorithm "+certAlgOid);der._offset=after;cert.issuer=Identity.parseAsn1(der);der.readSequence();cert.validFrom=readDate(der);cert.validUntil=readDate(der);cert.subjects=[Identity.parseAsn1(der)];der.readSequence();after=der.offset+der.length;cert.subjectKey=pkcs8.readPkcs8(undefined,"public",der);der._offset=after;if(der.peek()===Local(1)){der.readSequence(Local(1));sig.extras.issuerUniqueID=buf.slice(der.offset,der.offset+der.length);der._offset+=der.length}if(der.peek()===Local(2)){der.readSequence(Local(2));sig.extras.subjectUniqueID=buf.slice(der.offset,der.offset+der.length);der._offset+=der.length}if(der.peek()===Local(3)){der.readSequence(Local(3));var extEnd=der.offset+der.length;der.readSequence();while(der.offset<extEnd)readExtension(cert,buf,der);assert.strictEqual(der.offset,extEnd)}assert.strictEqual(der.offset,sigOffset);der.readSequence();after=der.offset+der.length;var sigAlgOid=der.readOID();var sigAlg=SIGN_ALGS[sigAlgOid];if(sigAlg===undefined)throw new Error("unknown signature algorithm "+sigAlgOid);der._offset=after;var sigData=der.readString(asn1.Ber.BitString,true);if(sigData[0]===0)sigData=sigData.slice(1);var algParts=sigAlg.split("-");sig.signature=Signature.parse(sigData,algParts[0],"asn1");sig.signature.hashAlgorithm=algParts[1];sig.algo=sigAlg;sig.cache=buf.slice(tbsStart,tbsEnd);return new Certificate(cert)}function readDate(der){if(der.peek()===asn1.Ber.UTCTime){return utcTimeToDate(der.readString(asn1.Ber.UTCTime))}else if(der.peek()===asn1.Ber.GeneralizedTime){return gTimeToDate(der.readString(asn1.Ber.GeneralizedTime))}else{throw new Error("Unsupported date format")}}var ALTNAME={OtherName:Local(0),RFC822Name:Context(1),DNSName:Context(2),X400Address:Local(3),DirectoryName:Local(4),EDIPartyName:Local(5),URI:Context(6),IPAddress:Context(7),OID:Context(8)};var EXTPURPOSE={serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",joyentDocker:"1.3.6.1.4.1.38678.1.4.1",joyentCmon:"1.3.6.1.4.1.38678.1.4.2"};var EXTPURPOSE_REV={};Object.keys(EXTPURPOSE).forEach(function(k){EXTPURPOSE_REV[EXTPURPOSE[k]]=k});var KEYUSEBITS=["signature","identity","keyEncryption","encryption","keyAgreement","ca","crl"];function readExtension(cert,buf,der){der.readSequence();var after=der.offset+der.length;var extId=der.readOID();var id;var sig=cert.signatures.x509;sig.extras.exts=[];var critical;if(der.peek()===asn1.Ber.Boolean)critical=der.readBoolean();switch(extId){case EXTS.basicConstraints:der.readSequence(asn1.Ber.OctetString);der.readSequence();var bcEnd=der.offset+der.length;var ca=false;if(der.peek()===asn1.Ber.Boolean)ca=der.readBoolean();if(cert.purposes===undefined)cert.purposes=[];if(ca===true)cert.purposes.push("ca");var bc={oid:extId,critical:critical};if(der.offset<bcEnd&&der.peek()===asn1.Ber.Integer)bc.pathLen=der.readInt();sig.extras.exts.push(bc);break;case EXTS.extKeyUsage:der.readSequence(asn1.Ber.OctetString);der.readSequence();if(cert.purposes===undefined)cert.purposes=[];var ekEnd=der.offset+der.length;while(der.offset<ekEnd){var oid=der.readOID();cert.purposes.push(EXTPURPOSE_REV[oid]||oid)}if(cert.purposes.indexOf("serverAuth")!==-1&&cert.purposes.indexOf("clientAuth")===-1){cert.subjects.forEach(function(ide){if(ide.type!=="host"){ide.type="host";ide.hostname=ide.uid||ide.email||ide.components[0].value}})}else if(cert.purposes.indexOf("clientAuth")!==-1&&cert.purposes.indexOf("serverAuth")===-1){cert.subjects.forEach(function(ide){if(ide.type!=="user"){ide.type="user";ide.uid=ide.hostname||ide.email||ide.components[0].value}})}sig.extras.exts.push({oid:extId,critical:critical});break;case EXTS.keyUsage:der.readSequence(asn1.Ber.OctetString);var bits=der.readString(asn1.Ber.BitString,true);var setBits=readBitField(bits,KEYUSEBITS);setBits.forEach(function(bit){if(cert.purposes===undefined)cert.purposes=[];if(cert.purposes.indexOf(bit)===-1)cert.purposes.push(bit)});sig.extras.exts.push({oid:extId,critical:critical,bits:bits});break;case EXTS.altName:der.readSequence(asn1.Ber.OctetString);der.readSequence();var aeEnd=der.offset+der.length;while(der.offset<aeEnd){switch(der.peek()){case ALTNAME.OtherName:case ALTNAME.EDIPartyName:der.readSequence();der._offset+=der.length;break;case ALTNAME.OID:der.readOID(ALTNAME.OID);break;case ALTNAME.RFC822Name:var email=der.readString(ALTNAME.RFC822Name);id=Identity.forEmail(email);if(!cert.subjects[0].equals(id))cert.subjects.push(id);break;case ALTNAME.DirectoryName:der.readSequence(ALTNAME.DirectoryName);id=Identity.parseAsn1(der);if(!cert.subjects[0].equals(id))cert.subjects.push(id);break;case ALTNAME.DNSName:var host=der.readString(ALTNAME.DNSName);id=Identity.forHost(host);if(!cert.subjects[0].equals(id))cert.subjects.push(id);break;default:der.readString(der.peek());break}}sig.extras.exts.push({oid:extId,critical:critical});break;default:sig.extras.exts.push({oid:extId,critical:critical,data:der.readString(asn1.Ber.OctetString,true)});break}der._offset=after}var UTCTIME_RE=/^([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;function utcTimeToDate(t){var m=t.match(UTCTIME_RE);assert.ok(m,"timestamps must be in UTC");var d=new Date;var thisYear=d.getUTCFullYear();var century=Math.floor(thisYear/100)*100;var year=parseInt(m[1],10);if(thisYear%100<50&&year>=60)year+=century-1;else year+=century;d.setUTCFullYear(year,parseInt(m[2],10)-1,parseInt(m[3],10));d.setUTCHours(parseInt(m[4],10),parseInt(m[5],10));if(m[6]&&m[6].length>0)d.setUTCSeconds(parseInt(m[6],10));return d}var GTIME_RE=/^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})?Z$/;function gTimeToDate(t){var m=t.match(GTIME_RE);assert.ok(m);var d=new Date;d.setUTCFullYear(parseInt(m[1],10),parseInt(m[2],10)-1,parseInt(m[3],10));d.setUTCHours(parseInt(m[4],10),parseInt(m[5],10));if(m[6]&&m[6].length>0)d.setUTCSeconds(parseInt(m[6],10));return d}function zeroPad(n){var s=""+n;while(s.length<2)s="0"+s;return s}function dateToUTCTime(d){var s="";s+=zeroPad(d.getUTCFullYear()%100);s+=zeroPad(d.getUTCMonth()+1);s+=zeroPad(d.getUTCDate());s+=zeroPad(d.getUTCHours());s+=zeroPad(d.getUTCMinutes());s+=zeroPad(d.getUTCSeconds());s+="Z";return s}function sign(cert,key){if(cert.signatures.x509===undefined)cert.signatures.x509={};var sig=cert.signatures.x509;sig.algo=key.type+"-"+key.defaultHashAlgorithm();if(SIGN_ALGS[sig.algo]===undefined)return false;var der=new asn1.BerWriter;writeTBSCert(cert,der);var blob=der.buffer;sig.cache=blob;var signer=key.createSign();signer.write(blob);cert.signatures.x509.signature=signer.sign();return true}function signAsync(cert,signer,done){if(cert.signatures.x509===undefined)cert.signatures.x509={};var sig=cert.signatures.x509;var der=new asn1.BerWriter;writeTBSCert(cert,der);var blob=der.buffer;sig.cache=blob;signer(blob,function(err,signature){if(err){done(err);return}sig.algo=signature.type+"-"+signature.hashAlgorithm;if(SIGN_ALGS[sig.algo]===undefined){done(new Error('Invalid signing algorithm "'+sig.algo+'"'));return}sig.signature=signature;done()})}function write(cert,options){var sig=cert.signatures.x509;assert.object(sig,"x509 signature");var der=new asn1.BerWriter;der.startSequence();if(sig.cache){der._ensure(sig.cache.length);sig.cache.copy(der._buf,der._offset);der._offset+=sig.cache.length}else{writeTBSCert(cert,der)}der.startSequence();der.writeOID(SIGN_ALGS[sig.algo]);if(sig.algo.match(/^rsa-/))der.writeNull();der.endSequence();var sigData=sig.signature.toBuffer("asn1");var data=new Buffer(sigData.length+1);data[0]=0;sigData.copy(data,1);der.writeBuffer(data,asn1.Ber.BitString);der.endSequence();return der.buffer}function writeTBSCert(cert,der){var sig=cert.signatures.x509;assert.object(sig,"x509 signature");der.startSequence();der.startSequence(Local(0));der.writeInt(2);der.endSequence();der.writeBuffer(utils.mpNormalize(cert.serial),asn1.Ber.Integer);der.startSequence();der.writeOID(SIGN_ALGS[sig.algo]);der.endSequence();cert.issuer.toAsn1(der);der.startSequence();der.writeString(dateToUTCTime(cert.validFrom),asn1.Ber.UTCTime);der.writeString(dateToUTCTime(cert.validUntil),asn1.Ber.UTCTime);der.endSequence();var subject=cert.subjects[0];var altNames=cert.subjects.slice(1);subject.toAsn1(der);pkcs8.writePkcs8(der,cert.subjectKey);if(sig.extras&&sig.extras.issuerUniqueID){der.writeBuffer(sig.extras.issuerUniqueID,Local(1))}if(sig.extras&&sig.extras.subjectUniqueID){der.writeBuffer(sig.extras.subjectUniqueID,Local(2))}if(altNames.length>0||subject.type==="host"||cert.purposes!==undefined&&cert.purposes.length>0||sig.extras&&sig.extras.exts){der.startSequence(Local(3));der.startSequence();var exts=[];if(cert.purposes!==undefined&&cert.purposes.length>0){exts.push({oid:EXTS.basicConstraints,critical:true});exts.push({oid:EXTS.keyUsage,critical:true});exts.push({oid:EXTS.extKeyUsage,critical:true})}exts.push({oid:EXTS.altName});if(sig.extras&&sig.extras.exts)exts=sig.extras.exts;for(var i=0;i<exts.length;++i){der.startSequence();der.writeOID(exts[i].oid);if(exts[i].critical!==undefined)der.writeBoolean(exts[i].critical);if(exts[i].oid===EXTS.altName){der.startSequence(asn1.Ber.OctetString);der.startSequence();if(subject.type==="host"){der.writeString(subject.hostname,Context(2))}for(var j=0;j<altNames.length;++j){if(altNames[j].type==="host"){der.writeString(altNames[j].hostname,ALTNAME.DNSName)}else if(altNames[j].type==="email"){der.writeString(altNames[j].email,ALTNAME.RFC822Name)}else{der.startSequence(ALTNAME.DirectoryName);altNames[j].toAsn1(der);der.endSequence()}}der.endSequence();der.endSequence()}else if(exts[i].oid===EXTS.basicConstraints){der.startSequence(asn1.Ber.OctetString);der.startSequence();var ca=cert.purposes.indexOf("ca")!==-1;var pathLen=exts[i].pathLen;der.writeBoolean(ca);if(pathLen!==undefined)der.writeInt(pathLen);der.endSequence();der.endSequence()}else if(exts[i].oid===EXTS.extKeyUsage){der.startSequence(asn1.Ber.OctetString);der.startSequence();cert.purposes.forEach(function(purpose){if(purpose==="ca")return;if(KEYUSEBITS.indexOf(purpose)!==-1)return;var oid=purpose;if(EXTPURPOSE[purpose]!==undefined)oid=EXTPURPOSE[purpose];der.writeOID(oid)});der.endSequence();der.endSequence()}else if(exts[i].oid===EXTS.keyUsage){der.startSequence(asn1.Ber.OctetString);if(exts[i].bits!==undefined){der.writeBuffer(exts[i].bits,asn1.Ber.BitString)}else{var bits=writeBitField(cert.purposes,KEYUSEBITS);der.writeBuffer(bits,asn1.Ber.BitString)}der.endSequence()}else{der.writeBuffer(exts[i].data,asn1.Ber.OctetString)}der.endSequence()}der.endSequence();der.endSequence()}der.endSequence()}function readBitField(bits,bitIndex){var bitLen=8*(bits.length-1)-bits[0];var setBits={};for(var i=0;i<bitLen;++i){var byteN=1+Math.floor(i/8);var bit=7-i%8;var mask=1<<bit;var bitVal=(bits[byteN]&mask)!==0;var name=bitIndex[i];if(bitVal&&typeof name==="string"){setBits[name]=true}}return Object.keys(setBits)}function writeBitField(setBits,bitIndex){var bitLen=bitIndex.length;var blen=Math.ceil(bitLen/8);var unused=blen*8-bitLen;var bits=new Buffer(1+blen);bits.fill(0);bits[0]=unused;for(var i=0;i<bitLen;++i){var byteN=1+Math.floor(i/8);var bit=7-i%8;var mask=1<<bit;var name=bitIndex[i];if(name===undefined)continue;var bitVal=setBits.indexOf(name)!==-1;if(bitVal){bits[byteN]|=mask}}return bits}},{"../algs":494,"../certificate":495,"../identity":510,"../key":512,"../private-key":513,"../signature":514,"../utils":516,"./pem":502,"./pkcs8":504,asn1:184,"assert-plus":185}],510:[function(require,module,exports){module.exports=Identity;var assert=require("assert-plus");var algs=require("./algs");var crypto=require("crypto");var Fingerprint=require("./fingerprint");var Signature=require("./signature");var errs=require("./errors");var util=require("util");var utils=require("./utils");var asn1=require("asn1");var DNS_NAME_RE=/^([*]|[a-z0-9][a-z0-9\-]{0,62})(?:\.([*]|[a-z0-9][a-z0-9\-]{0,62}))*$/i;var oids={};oids.cn="2.5.4.3";oids.o="2.5.4.10";oids.ou="2.5.4.11";oids.l="2.5.4.7";oids.s="2.5.4.8";oids.c="2.5.4.6";oids.sn="2.5.4.4";oids.dc="0.9.2342.19200300.100.1.25";oids.uid="0.9.2342.19200300.100.1.1";oids.mail="0.9.2342.19200300.100.1.3";var unoids={};Object.keys(oids).forEach(function(k){unoids[oids[k]]=k});function Identity(opts){var self=this;assert.object(opts,"options");assert.arrayOfObject(opts.components,"options.components");this.components=opts.components;this.componentLookup={};this.components.forEach(function(c){if(c.name&&!c.oid)c.oid=oids[c.name];if(c.oid&&!c.name)c.name=unoids[c.oid];if(self.componentLookup[c.name]===undefined)self.componentLookup[c.name]=[];self.componentLookup[c.name].push(c)});if(this.componentLookup.cn&&this.componentLookup.cn.length>0){this.cn=this.componentLookup.cn[0].value}assert.optionalString(opts.type,"options.type");if(opts.type===undefined){if(this.components.length===1&&this.componentLookup.cn&&this.componentLookup.cn.length===1&&this.componentLookup.cn[0].value.match(DNS_NAME_RE)){this.type="host";this.hostname=this.componentLookup.cn[0].value}else if(this.componentLookup.dc&&this.components.length===this.componentLookup.dc.length){this.type="host";this.hostname=this.componentLookup.dc.map(function(c){return c.value}).join(".")}else if(this.componentLookup.uid&&this.components.length===this.componentLookup.uid.length){this.type="user";this.uid=this.componentLookup.uid[0].value}else if(this.componentLookup.cn&&this.componentLookup.cn.length===1&&this.componentLookup.cn[0].value.match(DNS_NAME_RE)){this.type="host";this.hostname=this.componentLookup.cn[0].value}else if(this.componentLookup.uid&&this.componentLookup.uid.length===1){this.type="user";this.uid=this.componentLookup.uid[0].value}else if(this.componentLookup.mail&&this.componentLookup.mail.length===1){this.type="email";this.email=this.componentLookup.mail[0].value}else if(this.componentLookup.cn&&this.componentLookup.cn.length===1){this.type="user";this.uid=this.componentLookup.cn[0].value}else{this.type="unknown"}}else{this.type=opts.type;if(this.type==="host")this.hostname=opts.hostname;else if(this.type==="user")this.uid=opts.uid;else if(this.type==="email")this.email=opts.email;else throw new Error("Unknown type "+this.type)}}Identity.prototype.toString=function(){return this.components.map(function(c){return c.name.toUpperCase()+"="+c.value}).join(", ")};var NOT_PRINTABLE=/[^a-zA-Z0-9 '(),+.\/:=?-]/;var NOT_IA5=/[^\x00-\x7f]/;Identity.prototype.toAsn1=function(der,tag){der.startSequence(tag);this.components.forEach(function(c){der.startSequence(asn1.Ber.Constructor|asn1.Ber.Set);der.startSequence();der.writeOID(c.oid);if(c.value.match(NOT_IA5)){var v=new Buffer(c.value,"utf8");der.writeBuffer(v,asn1.Ber.Utf8String)}else if(c.value.match(NOT_PRINTABLE)){der.writeString(c.value,asn1.Ber.IA5String)}else{der.writeString(c.value,asn1.Ber.PrintableString)}der.endSequence();der.endSequence()});der.endSequence()};function globMatch(a,b){if(a==="**"||b==="**")return true;var aParts=a.split(".");var bParts=b.split(".");if(aParts.length!==bParts.length)return false;for(var i=0;i<aParts.length;++i){if(aParts[i]==="*"||bParts[i]==="*")continue;if(aParts[i]!==bParts[i])return false}return true}Identity.prototype.equals=function(other){if(!Identity.isIdentity(other,[1,0]))return false;if(other.components.length!==this.components.length)return false;for(var i=0;i<this.components.length;++i){if(this.components[i].oid!==other.components[i].oid)return false;if(!globMatch(this.components[i].value,other.components[i].value)){return false}}return true};Identity.forHost=function(hostname){assert.string(hostname,"hostname");return new Identity({type:"host",hostname:hostname,components:[{name:"cn",value:hostname}]})};Identity.forUser=function(uid){assert.string(uid,"uid");return new Identity({type:"user",uid:uid,components:[{name:"uid",value:uid}]})};Identity.forEmail=function(email){assert.string(email,"email");return new Identity({type:"email",email:email,components:[{name:"mail",value:email}]})};Identity.parseDN=function(dn){assert.string(dn,"dn");var parts=dn.split(",");var cmps=parts.map(function(c){c=c.trim();var eqPos=c.indexOf("=");var name=c.slice(0,eqPos).toLowerCase();var value=c.slice(eqPos+1);return{name:name,value:value}});return new Identity({components:cmps})};Identity.parseAsn1=function(der,top){var components=[];der.readSequence(top);var end=der.offset+der.length;while(der.offset<end){der.readSequence(asn1.Ber.Constructor|asn1.Ber.Set);var after=der.offset+der.length;der.readSequence();var oid=der.readOID();var type=der.peek();var value;switch(type){case asn1.Ber.PrintableString:case asn1.Ber.IA5String:case asn1.Ber.OctetString:case asn1.Ber.T61String:value=der.readString(type);break;case asn1.Ber.Utf8String:value=der.readString(type,true);value=value.toString("utf8");break;case asn1.Ber.CharacterString:case asn1.Ber.BMPString:value=der.readString(type,true);value=value.toString("utf16le");break;default:throw new Error("Unknown asn1 type "+type)}components.push({oid:oid,value:value});der._offset=after}der._offset=end;return new Identity({components:components})};Identity.isIdentity=function(obj,ver){return utils.isCompatible(obj,Identity,ver)};Identity.prototype._sshpkApiVersion=[1,0];Identity._oldVersionDetect=function(obj){return[1,0]}},{"./algs":494,"./errors":498,"./fingerprint":499,"./signature":514,"./utils":516,asn1:184,"assert-plus":185,crypto:undefined,util:undefined}],511:[function(require,module,exports){var Key=require("./key");var Fingerprint=require("./fingerprint");var Signature=require("./signature");var PrivateKey=require("./private-key");var Certificate=require("./certificate");var Identity=require("./identity");var errs=require("./errors");module.exports={Key:Key,parseKey:Key.parse,Fingerprint:Fingerprint,parseFingerprint:Fingerprint.parse,Signature:Signature,parseSignature:Signature.parse,PrivateKey:PrivateKey,parsePrivateKey:PrivateKey.parse,generatePrivateKey:PrivateKey.generate,Certificate:Certificate,parseCertificate:Certificate.parse,createSelfSignedCertificate:Certificate.createSelfSigned,createCertificate:Certificate.create,Identity:Identity,identityFromDN:Identity.parseDN,identityForHost:Identity.forHost,identityForUser:Identity.forUser,identityForEmail:Identity.forEmail,FingerprintFormatError:errs.FingerprintFormatError,InvalidAlgorithmError:errs.InvalidAlgorithmError,KeyParseError:errs.KeyParseError,SignatureParseError:errs.SignatureParseError,KeyEncryptedError:errs.KeyEncryptedError,CertificateParseError:errs.CertificateParseError}},{"./certificate":495,"./errors":498,"./fingerprint":499,"./identity":510,"./key":512,"./private-key":513,"./signature":514}],512:[function(require,module,exports){module.exports=Key;var assert=require("assert-plus");var algs=require("./algs");var crypto=require("crypto");var Fingerprint=require("./fingerprint");var Signature=require("./signature");var DiffieHellman=require("./dhe").DiffieHellman;var errs=require("./errors");var utils=require("./utils");var PrivateKey=require("./private-key");var edCompat;try{edCompat=require("./ed-compat")}catch(e){}var InvalidAlgorithmError=errs.InvalidAlgorithmError;var KeyParseError=errs.KeyParseError;var formats={};formats["auto"]=require("./formats/auto");formats["pem"]=require("./formats/pem");formats["pkcs1"]=require("./formats/pkcs1");formats["pkcs8"]=require("./formats/pkcs8");formats["rfc4253"]=require("./formats/rfc4253");formats["ssh"]=require("./formats/ssh");formats["ssh-private"]=require("./formats/ssh-private");formats["openssh"]=formats["ssh-private"];function Key(opts){assert.object(opts,"options");assert.arrayOfObject(opts.parts,"options.parts");assert.string(opts.type,"options.type");assert.optionalString(opts.comment,"options.comment");var algInfo=algs.info[opts.type];if(typeof algInfo!=="object")throw new InvalidAlgorithmError(opts.type);var partLookup={};for(var i=0;i<opts.parts.length;++i){var part=opts.parts[i];partLookup[part.name]=part}this.type=opts.type;this.parts=opts.parts;this.part=partLookup;this.comment=undefined;this.source=opts.source;this._rfc4253Cache=opts._rfc4253Cache;this._hashCache={};var sz;this.curve=undefined;if(this.type==="ecdsa"){var curve=this.part.curve.data.toString();this.curve=curve;sz=algs.curves[curve].size}else if(this.type==="ed25519"||this.type==="curve25519"){sz=256;this.curve="curve25519"}else{var szPart=this.part[algInfo.sizePart];sz=szPart.data.length;sz=sz*8-utils.countZeros(szPart.data)}this.size=sz}Key.formats=formats;Key.prototype.toBuffer=function(format,options){if(format===undefined)format="ssh";assert.string(format,"format");assert.object(formats[format],"formats[format]");assert.optionalObject(options,"options");if(format==="rfc4253"){if(this._rfc4253Cache===undefined)this._rfc4253Cache=formats["rfc4253"].write(this);return this._rfc4253Cache}return formats[format].write(this,options)};Key.prototype.toString=function(format,options){return this.toBuffer(format,options).toString()};Key.prototype.hash=function(algo){assert.string(algo,"algorithm");algo=algo.toLowerCase();if(algs.hashAlgs[algo]===undefined)throw new InvalidAlgorithmError(algo);if(this._hashCache[algo])return this._hashCache[algo];var hash=crypto.createHash(algo).update(this.toBuffer("rfc4253")).digest();this._hashCache[algo]=hash;return hash};Key.prototype.fingerprint=function(algo){if(algo===undefined)algo="sha256";assert.string(algo,"algorithm");var opts={type:"key",hash:this.hash(algo),algorithm:algo};return new Fingerprint(opts)};Key.prototype.defaultHashAlgorithm=function(){var hashAlgo="sha1";if(this.type==="rsa")hashAlgo="sha256";if(this.type==="dsa"&&this.size>1024)hashAlgo="sha256";if(this.type==="ed25519")hashAlgo="sha512";if(this.type==="ecdsa"){if(this.size<=256)hashAlgo="sha256";else if(this.size<=384)hashAlgo="sha384";else hashAlgo="sha512"}return hashAlgo};Key.prototype.createVerify=function(hashAlgo){if(hashAlgo===undefined)hashAlgo=this.defaultHashAlgorithm();assert.string(hashAlgo,"hash algorithm");if(this.type==="ed25519"&&edCompat!==undefined)return new edCompat.Verifier(this,hashAlgo);if(this.type==="curve25519")throw new Error("Curve25519 keys are not suitable for "+"signing or verification");var v,nm,err;try{nm=hashAlgo.toUpperCase();v=crypto.createVerify(nm)}catch(e){err=e}if(v===undefined||err instanceof Error&&err.message.match(/Unknown message digest/)){nm="RSA-";nm+=hashAlgo.toUpperCase();v=crypto.createVerify(nm)}assert.ok(v,"failed to create verifier");var oldVerify=v.verify.bind(v);var key=this.toBuffer("pkcs8");var curve=this.curve;var self=this;v.verify=function(signature,fmt){if(Signature.isSignature(signature,[2,0])){if(signature.type!==self.type)return false;if(signature.hashAlgorithm&&signature.hashAlgorithm!==hashAlgo)return false;if(signature.curve&&self.type==="ecdsa"&&signature.curve!==curve)return false;return oldVerify(key,signature.toBuffer("asn1"))}else if(typeof signature==="string"||Buffer.isBuffer(signature)){return oldVerify(key,signature,fmt)}else if(Signature.isSignature(signature,[1,0])){throw new Error("signature was created by too old "+"a version of sshpk and cannot be verified")}else{throw new TypeError("signature must be a string, "+"Buffer, or Signature object")}};return v};Key.prototype.createDiffieHellman=function(){if(this.type==="rsa")throw new Error("RSA keys do not support Diffie-Hellman");return new DiffieHellman(this)};Key.prototype.createDH=Key.prototype.createDiffieHellman;Key.parse=function(data,format,options){if(typeof data!=="string")assert.buffer(data,"data");if(format===undefined)format="auto";assert.string(format,"format");if(typeof options==="string")options={filename:options};assert.optionalObject(options,"options");if(options===undefined)options={};assert.optionalString(options.filename,"options.filename");if(options.filename===undefined)options.filename="(unnamed)";assert.object(formats[format],"formats[format]");try{var k=formats[format].read(data,options);if(k instanceof PrivateKey)k=k.toPublic();if(!k.comment)k.comment=options.filename;return k}catch(e){if(e.name==="KeyEncryptedError")throw e;throw new KeyParseError(options.filename,format,e)}};Key.isKey=function(obj,ver){return utils.isCompatible(obj,Key,ver)};Key.prototype._sshpkApiVersion=[1,5];Key._oldVersionDetect=function(obj){assert.func(obj.toBuffer);assert.func(obj.fingerprint);if(obj.createDH)return[1,4];if(obj.defaultHashAlgorithm)return[1,3];if(obj.formats["auto"])return[1,2];if(obj.formats["pkcs1"])return[1,1];return[1,0]}},{"./algs":494,"./dhe":496,"./ed-compat":497,"./errors":498,"./fingerprint":499,"./formats/auto":500,"./formats/pem":502,"./formats/pkcs1":503,"./formats/pkcs8":504,"./formats/rfc4253":505,"./formats/ssh":507,"./formats/ssh-private":506,"./private-key":513,"./signature":514,"./utils":516,"assert-plus":185,crypto:undefined}],513:[function(require,module,exports){module.exports=PrivateKey;var assert=require("assert-plus");var algs=require("./algs");var crypto=require("crypto");var Fingerprint=require("./fingerprint");var Signature=require("./signature");var errs=require("./errors");var util=require("util");var utils=require("./utils");var dhe=require("./dhe");var generateECDSA=dhe.generateECDSA;var generateED25519=dhe.generateED25519;var edCompat;var nacl;try{edCompat=require("./ed-compat")}catch(e){}var Key=require("./key");var InvalidAlgorithmError=errs.InvalidAlgorithmError;var KeyParseError=errs.KeyParseError;var KeyEncryptedError=errs.KeyEncryptedError;var formats={};formats["auto"]=require("./formats/auto");formats["pem"]=require("./formats/pem");formats["pkcs1"]=require("./formats/pkcs1");formats["pkcs8"]=require("./formats/pkcs8");formats["rfc4253"]=require("./formats/rfc4253");formats["ssh-private"]=require("./formats/ssh-private");formats["openssh"]=formats["ssh-private"];formats["ssh"]=formats["ssh-private"];function PrivateKey(opts){assert.object(opts,"options");Key.call(this,opts);this._pubCache=undefined}util.inherits(PrivateKey,Key);PrivateKey.formats=formats;PrivateKey.prototype.toBuffer=function(format,options){if(format===undefined)format="pkcs1";assert.string(format,"format");assert.object(formats[format],"formats[format]");assert.optionalObject(options,"options");return formats[format].write(this,options)};PrivateKey.prototype.hash=function(algo){return this.toPublic().hash(algo)};PrivateKey.prototype.toPublic=function(){if(this._pubCache)return this._pubCache;var algInfo=algs.info[this.type];var pubParts=[];for(var i=0;i<algInfo.parts.length;++i){var p=algInfo.parts[i];pubParts.push(this.part[p])}this._pubCache=new Key({type:this.type,source:this,parts:pubParts});if(this.comment)this._pubCache.comment=this.comment;return this._pubCache};PrivateKey.prototype.derive=function(newType){assert.string(newType,"type");var priv,pub,pair;if(this.type==="ed25519"&&newType==="curve25519"){if(nacl===undefined)nacl=require("tweetnacl");priv=this.part.r.data;if(priv[0]===0)priv=priv.slice(1);priv=priv.slice(0,32);pair=nacl.box.keyPair.fromSecretKey(new Uint8Array(priv));pub=new Buffer(pair.publicKey);priv=Buffer.concat([priv,pub]);return new PrivateKey({type:"curve25519",parts:[{name:"R",data:utils.mpNormalize(pub)},{name:"r",data:priv}]})}else if(this.type==="curve25519"&&newType==="ed25519"){if(nacl===undefined)nacl=require("tweetnacl");priv=this.part.r.data;if(priv[0]===0)priv=priv.slice(1);priv=priv.slice(0,32);pair=nacl.sign.keyPair.fromSeed(new Uint8Array(priv));pub=new Buffer(pair.publicKey);priv=Buffer.concat([priv,pub]);return new PrivateKey({type:"ed25519",parts:[{name:"R",data:utils.mpNormalize(pub)},{name:"r",data:priv}]})}throw new Error("Key derivation not supported from "+this.type+" to "+newType)};PrivateKey.prototype.createVerify=function(hashAlgo){return this.toPublic().createVerify(hashAlgo)};PrivateKey.prototype.createSign=function(hashAlgo){if(hashAlgo===undefined)hashAlgo=this.defaultHashAlgorithm();assert.string(hashAlgo,"hash algorithm");if(this.type==="ed25519"&&edCompat!==undefined)return new edCompat.Signer(this,hashAlgo);if(this.type==="curve25519")throw new Error("Curve25519 keys are not suitable for "+"signing or verification");var v,nm,err;try{nm=hashAlgo.toUpperCase();v=crypto.createSign(nm)}catch(e){err=e}if(v===undefined||err instanceof Error&&err.message.match(/Unknown message digest/)){nm="RSA-";nm+=hashAlgo.toUpperCase();v=crypto.createSign(nm)}assert.ok(v,"failed to create verifier");var oldSign=v.sign.bind(v);var key=this.toBuffer("pkcs1");var type=this.type;var curve=this.curve;v.sign=function(){var sig=oldSign(key);if(typeof sig==="string")sig=new Buffer(sig,"binary");sig=Signature.parse(sig,type,"asn1");sig.hashAlgorithm=hashAlgo;sig.curve=curve;return sig};return v};PrivateKey.parse=function(data,format,options){if(typeof data!=="string")assert.buffer(data,"data");if(format===undefined)format="auto";assert.string(format,"format");if(typeof options==="string")options={filename:options};assert.optionalObject(options,"options");if(options===undefined)options={};assert.optionalString(options.filename,"options.filename");if(options.filename===undefined)options.filename="(unnamed)";assert.object(formats[format],"formats[format]");try{var k=formats[format].read(data,options);assert.ok(k instanceof PrivateKey,"key is not a private key");if(!k.comment)k.comment=options.filename;return k}catch(e){if(e.name==="KeyEncryptedError")throw e;throw new KeyParseError(options.filename,format,e)}};PrivateKey.isPrivateKey=function(obj,ver){return utils.isCompatible(obj,PrivateKey,ver)};PrivateKey.generate=function(type,options){if(options===undefined)options={};assert.object(options,"options");switch(type){case"ecdsa":if(options.curve===undefined)options.curve="nistp256";assert.string(options.curve,"options.curve");return generateECDSA(options.curve);case"ed25519":return generateED25519();default:throw new Error("Key generation not supported with key "+'type "'+type+'"')}};PrivateKey.prototype._sshpkApiVersion=[1,4];PrivateKey._oldVersionDetect=function(obj){assert.func(obj.toPublic);assert.func(obj.createSign);if(obj.derive)return[1,3];if(obj.defaultHashAlgorithm)return[1,2];if(obj.formats["auto"])return[1,1];return[1,0]}},{"./algs":494,"./dhe":496,"./ed-compat":497,"./errors":498,"./fingerprint":499,"./formats/auto":500,"./formats/pem":502,"./formats/pkcs1":503,"./formats/pkcs8":504,"./formats/rfc4253":505,"./formats/ssh-private":506,"./key":512,"./signature":514,"./utils":516,"assert-plus":185,crypto:undefined,tweetnacl:556,util:undefined}],514:[function(require,module,exports){module.exports=Signature;var assert=require("assert-plus");var algs=require("./algs");var crypto=require("crypto");var errs=require("./errors");var utils=require("./utils");var asn1=require("asn1");var SSHBuffer=require("./ssh-buffer");var InvalidAlgorithmError=errs.InvalidAlgorithmError;var SignatureParseError=errs.SignatureParseError;function Signature(opts){assert.object(opts,"options");assert.arrayOfObject(opts.parts,"options.parts");assert.string(opts.type,"options.type");var partLookup={};for(var i=0;i<opts.parts.length;++i){var part=opts.parts[i];partLookup[part.name]=part}this.type=opts.type;this.hashAlgorithm=opts.hashAlgo;this.curve=opts.curve;this.parts=opts.parts;this.part=partLookup}Signature.prototype.toBuffer=function(format){if(format===undefined)format="asn1";assert.string(format,"format");var buf;var stype="ssh-"+this.type;switch(this.type){case"rsa":switch(this.hashAlgorithm){case"sha256":stype="rsa-sha2-256";break;case"sha512":stype="rsa-sha2-512";break;case"sha1":case undefined:break;default:throw new Error("SSH signature "+"format does not support hash "+"algorithm "+this.hashAlgorithm)}if(format==="ssh"){buf=new SSHBuffer({});buf.writeString(stype);buf.writePart(this.part.sig);return buf.toBuffer()}else{return this.part.sig.data}break;case"ed25519":if(format==="ssh"){buf=new SSHBuffer({});buf.writeString(stype);buf.writePart(this.part.sig);return buf.toBuffer()}else{return this.part.sig.data}break;case"dsa":case"ecdsa":var r,s;if(format==="asn1"){var der=new asn1.BerWriter;der.startSequence();r=utils.mpNormalize(this.part.r.data);s=utils.mpNormalize(this.part.s.data);der.writeBuffer(r,asn1.Ber.Integer);der.writeBuffer(s,asn1.Ber.Integer);der.endSequence();return der.buffer}else if(format==="ssh"&&this.type==="dsa"){buf=new SSHBuffer({});buf.writeString("ssh-dss");r=this.part.r.data;if(r.length>20&&r[0]===0)r=r.slice(1);s=this.part.s.data;if(s.length>20&&s[0]===0)s=s.slice(1);if(this.hashAlgorithm&&this.hashAlgorithm!=="sha1"||r.length+s.length!==40){throw new Error("OpenSSH only supports "+"DSA signatures with SHA1 hash")}buf.writeBuffer(Buffer.concat([r,s]));return buf.toBuffer()}else if(format==="ssh"&&this.type==="ecdsa"){var inner=new SSHBuffer({});r=this.part.r.data;inner.writeBuffer(r);inner.writePart(this.part.s);buf=new SSHBuffer({});var curve;if(r[0]===0)r=r.slice(1);var sz=r.length*8;if(sz===256)curve="nistp256";else if(sz===384)curve="nistp384";else if(sz===528)curve="nistp521";buf.writeString("ecdsa-sha2-"+curve);buf.writeBuffer(inner.toBuffer());return buf.toBuffer()}throw new Error("Invalid signature format");default:throw new Error("Invalid signature data")}};Signature.prototype.toString=function(format){assert.optionalString(format,"format");return this.toBuffer(format).toString("base64")};Signature.parse=function(data,type,format){if(typeof data==="string")data=new Buffer(data,"base64");assert.buffer(data,"data");assert.string(format,"format");assert.string(type,"type");var opts={};opts.type=type.toLowerCase();opts.parts=[];try{assert.ok(data.length>0,"signature must not be empty");switch(opts.type){case"rsa":return parseOneNum(data,type,format,opts);case"ed25519":return parseOneNum(data,type,format,opts);case"dsa":case"ecdsa":if(format==="asn1")return parseDSAasn1(data,type,format,opts);else if(opts.type==="dsa")return parseDSA(data,type,format,opts);else return parseECDSA(data,type,format,opts);default:throw new InvalidAlgorithmError(type)}}catch(e){if(e instanceof InvalidAlgorithmError)throw e;throw new SignatureParseError(type,format,e)}};function parseOneNum(data,type,format,opts){if(format==="ssh"){try{var buf=new SSHBuffer({buffer:data});var head=buf.readString()}catch(e){}if(buf!==undefined){var msg="SSH signature does not match expected "+"type (expected "+type+", got "+head+")";switch(head){case"ssh-rsa":assert.strictEqual(type,"rsa",msg);opts.hashAlgo="sha1";break;case"rsa-sha2-256":assert.strictEqual(type,"rsa",msg);opts.hashAlgo="sha256";break;case"rsa-sha2-512":assert.strictEqual(type,"rsa",msg);opts.hashAlgo="sha512";break;case"ssh-ed25519":assert.strictEqual(type,"ed25519",msg);opts.hashAlgo="sha512";break;default:throw new Error("Unknown SSH signature "+"type: "+head)}var sig=buf.readPart();assert.ok(buf.atEnd(),"extra trailing bytes");sig.name="sig";opts.parts.push(sig);return new Signature(opts)}}opts.parts.push({name:"sig",data:data});return new Signature(opts)}function parseDSAasn1(data,type,format,opts){var der=new asn1.BerReader(data);der.readSequence();var r=der.readString(asn1.Ber.Integer,true);var s=der.readString(asn1.Ber.Integer,true);opts.parts.push({name:"r",data:utils.mpNormalize(r)});opts.parts.push({name:"s",data:utils.mpNormalize(s)});return new Signature(opts)}function parseDSA(data,type,format,opts){if(data.length!=40){var buf=new SSHBuffer({buffer:data});var d=buf.readBuffer();if(d.toString("ascii")==="ssh-dss")d=buf.readBuffer();assert.ok(buf.atEnd(),"extra trailing bytes");assert.strictEqual(d.length,40,"invalid inner length");data=d}opts.parts.push({name:"r",data:data.slice(0,20)});opts.parts.push({name:"s",data:data.slice(20,40)});return new Signature(opts)}function parseECDSA(data,type,format,opts){var buf=new SSHBuffer({buffer:data});var r,s;var inner=buf.readBuffer();var stype=inner.toString("ascii");if(stype.slice(0,6)==="ecdsa-"){var parts=stype.split("-");assert.strictEqual(parts[0],"ecdsa");assert.strictEqual(parts[1],"sha2");opts.curve=parts[2];switch(opts.curve){case"nistp256":opts.hashAlgo="sha256";break;case"nistp384":opts.hashAlgo="sha384";break;case"nistp521":opts.hashAlgo="sha512";break;default:throw new Error("Unsupported ECDSA curve: "+opts.curve)}inner=buf.readBuffer();assert.ok(buf.atEnd(),"extra trailing bytes on outer");buf=new SSHBuffer({buffer:inner});r=buf.readPart()}else{r={data:inner}}s=buf.readPart();assert.ok(buf.atEnd(),"extra trailing bytes");r.name="r";s.name="s";opts.parts.push(r);opts.parts.push(s);return new Signature(opts)}Signature.isSignature=function(obj,ver){return utils.isCompatible(obj,Signature,ver)};Signature.prototype._sshpkApiVersion=[2,1];Signature._oldVersionDetect=function(obj){assert.func(obj.toBuffer);if(obj.hasOwnProperty("hashAlgorithm"))return[2,0];return[1,0]}},{"./algs":494,"./errors":498,"./ssh-buffer":515,"./utils":516,asn1:184,"assert-plus":185,crypto:undefined}],515:[function(require,module,exports){module.exports=SSHBuffer;var assert=require("assert-plus");function SSHBuffer(opts){assert.object(opts,"options");if(opts.buffer!==undefined)assert.buffer(opts.buffer,"options.buffer");this._size=opts.buffer?opts.buffer.length:1024;this._buffer=opts.buffer||new Buffer(this._size);this._offset=0}SSHBuffer.prototype.toBuffer=function(){return this._buffer.slice(0,this._offset)};SSHBuffer.prototype.atEnd=function(){return this._offset>=this._buffer.length};SSHBuffer.prototype.remainder=function(){return this._buffer.slice(this._offset)};SSHBuffer.prototype.skip=function(n){this._offset+=n};SSHBuffer.prototype.expand=function(){this._size*=2;var buf=new Buffer(this._size);this._buffer.copy(buf,0);this._buffer=buf};SSHBuffer.prototype.readPart=function(){return{data:this.readBuffer()}};SSHBuffer.prototype.readBuffer=function(){var len=this._buffer.readUInt32BE(this._offset);this._offset+=4;assert.ok(this._offset+len<=this._buffer.length,"length out of bounds at +0x"+this._offset.toString(16)+" (data truncated?)");var buf=this._buffer.slice(this._offset,this._offset+len);this._offset+=len;return buf};SSHBuffer.prototype.readString=function(){return this.readBuffer().toString()};SSHBuffer.prototype.readCString=function(){var offset=this._offset;while(offset<this._buffer.length&&this._buffer[offset]!==0)offset++;assert.ok(offset<this._buffer.length,"c string does not terminate");var str=this._buffer.slice(this._offset,offset).toString();this._offset=offset+1;return str};SSHBuffer.prototype.readInt=function(){var v=this._buffer.readUInt32BE(this._offset);this._offset+=4;return v};SSHBuffer.prototype.readInt64=function(){assert.ok(this._offset+8<this._buffer.length,"buffer not long enough to read Int64");var v=this._buffer.slice(this._offset,this._offset+8);this._offset+=8;return v};SSHBuffer.prototype.readChar=function(){var v=this._buffer[this._offset++];return v};SSHBuffer.prototype.writeBuffer=function(buf){while(this._offset+4+buf.length>this._size)this.expand();this._buffer.writeUInt32BE(buf.length,this._offset);this._offset+=4;buf.copy(this._buffer,this._offset);this._offset+=buf.length};SSHBuffer.prototype.writeString=function(str){this.writeBuffer(new Buffer(str,"utf8"))};SSHBuffer.prototype.writeCString=function(str){while(this._offset+1+str.length>this._size)this.expand();this._buffer.write(str,this._offset);this._offset+=str.length;this._buffer[this._offset++]=0};SSHBuffer.prototype.writeInt=function(v){while(this._offset+4>this._size)this.expand();this._buffer.writeUInt32BE(v,this._offset);this._offset+=4};SSHBuffer.prototype.writeInt64=function(v){assert.buffer(v,"value");if(v.length>8){var lead=v.slice(0,v.length-8);for(var i=0;i<lead.length;++i){assert.strictEqual(lead[i],0,"must fit in 64 bits of precision")}v=v.slice(v.length-8,v.length)}while(this._offset+8>this._size)this.expand();v.copy(this._buffer,this._offset);this._offset+=8};SSHBuffer.prototype.writeChar=function(v){while(this._offset+1>this._size)this.expand();this._buffer[this._offset++]=v};SSHBuffer.prototype.writePart=function(p){this.writeBuffer(p.data)};SSHBuffer.prototype.write=function(buf){while(this._offset+buf.length>this._size)this.expand();buf.copy(this._buffer,this._offset);this._offset+=buf.length}},{"assert-plus":185}],516:[function(require,module,exports){module.exports={bufferSplit:bufferSplit,addRSAMissing:addRSAMissing,calculateDSAPublic:calculateDSAPublic,mpNormalize:mpNormalize,ecNormalize:ecNormalize,countZeros:countZeros,assertCompatible:assertCompatible,isCompatible:isCompatible,opensslKeyDeriv:opensslKeyDeriv,opensshCipherInfo:opensshCipherInfo};var assert=require("assert-plus");var PrivateKey=require("./private-key");var crypto=require("crypto");var MAX_CLASS_DEPTH=3;function isCompatible(obj,klass,needVer){if(obj===null||typeof obj!=="object")return false;if(needVer===undefined)needVer=klass.prototype._sshpkApiVersion;if(obj instanceof klass&&klass.prototype._sshpkApiVersion[0]==needVer[0])return true;var proto=Object.getPrototypeOf(obj);var depth=0;while(proto.constructor.name!==klass.name){proto=Object.getPrototypeOf(proto);if(!proto||++depth>MAX_CLASS_DEPTH)return false}if(proto.constructor.name!==klass.name)return false;var ver=proto._sshpkApiVersion;if(ver===undefined)ver=klass._oldVersionDetect(obj);if(ver[0]!=needVer[0]||ver[1]<needVer[1])return false;return true}function assertCompatible(obj,klass,needVer,name){if(name===undefined)name="object";assert.ok(obj,name+" must not be null");assert.object(obj,name+" must be an object");if(needVer===undefined)needVer=klass.prototype._sshpkApiVersion;if(obj instanceof klass&&klass.prototype._sshpkApiVersion[0]==needVer[0])return;var proto=Object.getPrototypeOf(obj);var depth=0;while(proto.constructor.name!==klass.name){proto=Object.getPrototypeOf(proto);assert.ok(proto&&++depth<=MAX_CLASS_DEPTH,name+" must be a "+klass.name+" instance")}assert.strictEqual(proto.constructor.name,klass.name,name+" must be a "+klass.name+" instance");var ver=proto._sshpkApiVersion;if(ver===undefined)ver=klass._oldVersionDetect(obj);assert.ok(ver[0]==needVer[0]&&ver[1]>=needVer[1],name+" must be compatible with "+klass.name+" klass "+"version "+needVer[0]+"."+needVer[1])}var CIPHER_LEN={"des-ede3-cbc":{key:7,iv:8},"aes-128-cbc":{key:16,iv:16}};var PKCS5_SALT_LEN=8;function opensslKeyDeriv(cipher,salt,passphrase,count){assert.buffer(salt,"salt");assert.buffer(passphrase,"passphrase");assert.number(count,"iteration count");var clen=CIPHER_LEN[cipher];assert.object(clen,"supported cipher");salt=salt.slice(0,PKCS5_SALT_LEN);var D,D_prev,bufs;var material=new Buffer(0);while(material.length<clen.key+clen.iv){bufs=[];if(D_prev)bufs.push(D_prev);bufs.push(passphrase);bufs.push(salt);D=Buffer.concat(bufs);for(var j=0;j<count;++j)D=crypto.createHash("md5").update(D).digest();material=Buffer.concat([material,D]);D_prev=D}return{key:material.slice(0,clen.key),iv:material.slice(clen.key,clen.key+clen.iv)}}function countZeros(buf){var o=0,obit=8;while(o<buf.length){var mask=1<<obit;if((buf[o]&mask)===mask)break;obit--;if(obit<0){o++;obit=8}}return o*8+(8-obit)-1}function bufferSplit(buf,chr){assert.buffer(buf);assert.string(chr);var parts=[];var lastPart=0;var matches=0;for(var i=0;i<buf.length;++i){if(buf[i]===chr.charCodeAt(matches))++matches;else if(buf[i]===chr.charCodeAt(0))matches=1;else matches=0;if(matches>=chr.length){var newPart=i+1;parts.push(buf.slice(lastPart,newPart-matches));lastPart=newPart;matches=0}}if(lastPart<=buf.length)parts.push(buf.slice(lastPart,buf.length));return parts}function ecNormalize(buf,addZero){assert.buffer(buf);if(buf[0]===0&&buf[1]===4){if(addZero)return buf;return buf.slice(1)}else if(buf[0]===4){if(!addZero)return buf}else{while(buf[0]===0)buf=buf.slice(1);if(buf[0]===2||buf[0]===3)throw new Error("Compressed elliptic curve points "+"are not supported");if(buf[0]!==4)throw new Error("Not a valid elliptic curve point");if(!addZero)return buf}var b=new Buffer(buf.length+1);b[0]=0;buf.copy(b,1);return b}function mpNormalize(buf){assert.buffer(buf);while(buf.length>1&&buf[0]===0&&(buf[1]&128)===0)buf=buf.slice(1);if((buf[0]&128)===128){var b=new Buffer(buf.length+1);b[0]=0;buf.copy(b,1);buf=b}return buf}function bigintToMpBuf(bigint){var buf=new Buffer(bigint.toByteArray());buf=mpNormalize(buf);return buf}function calculateDSAPublic(g,p,x){assert.buffer(g);assert.buffer(p);assert.buffer(x);try{var bigInt=require("jsbn").BigInteger}catch(e){throw new Error("To load a PKCS#8 format DSA private key, "+"the node jsbn library is required.")}g=new bigInt(g);p=new bigInt(p);x=new bigInt(x);var y=g.modPow(x,p);var ybuf=bigintToMpBuf(y);return ybuf}function addRSAMissing(key){assert.object(key);assertCompatible(key,PrivateKey,[1,1]);try{var bigInt=require("jsbn").BigInteger}catch(e){throw new Error("To write a PEM private key from "+"this source, the node jsbn lib is required.")}var d=new bigInt(key.part.d.data);var buf;if(!key.part.dmodp){var p=new bigInt(key.part.p.data);var dmodp=d.mod(p.subtract(1));buf=bigintToMpBuf(dmodp);key.part.dmodp={name:"dmodp",data:buf};key.parts.push(key.part.dmodp)}if(!key.part.dmodq){var q=new bigInt(key.part.q.data);var dmodq=d.mod(q.subtract(1));buf=bigintToMpBuf(dmodq);key.part.dmodq={name:"dmodq",data:buf};key.parts.push(key.part.dmodq)}}function opensshCipherInfo(cipher){var inf={};switch(cipher){case"3des-cbc":inf.keySize=24;inf.blockSize=8;inf.opensslName="des-ede3-cbc";break;case"blowfish-cbc":inf.keySize=16;inf.blockSize=8;inf.opensslName="bf-cbc";break;case"aes128-cbc":case"aes128-ctr":case"aes128-gcm@openssh.com":inf.keySize=16;inf.blockSize=16;inf.opensslName="aes-128-"+cipher.slice(7,10);break;case"aes192-cbc":case"aes192-ctr":case"aes192-gcm@openssh.com":inf.keySize=24;inf.blockSize=16;inf.opensslName="aes-192-"+cipher.slice(7,10);break;case"aes256-cbc":case"aes256-ctr":case"aes256-gcm@openssh.com":inf.keySize=32;inf.blockSize=16;inf.opensslName="aes-256-"+cipher.slice(7,10);break;default:throw new Error('Unsupported openssl cipher "'+cipher+'"')}return inf}},{"./private-key":513,"assert-plus":185,crypto:undefined,jsbn:405}],517:[function(require,module,exports){module.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],518:[function(require,module,exports){"use strict";var codes=require("./codes.json");module.exports=status;status.codes=populateStatusesMap(status,codes);status.redirect={300:true,301:true,302:true,303:true,305:true,307:true,308:true};status.empty={204:true,205:true,304:true};status.retry={502:true,503:true,504:true};function populateStatusesMap(statuses,codes){var arr=[];Object.keys(codes).forEach(function forEachCode(code){var message=codes[code];var status=Number(code);statuses[status]=message;statuses[message]=status;statuses[message.toLowerCase()]=status;arr.push(status)});return arr}function status(code){if(typeof code==="number"){if(!status[code])throw new Error("invalid status code: "+code);return code}if(typeof code!=="string"){throw new TypeError("code must be a number or string")}var n=parseInt(code,10);if(!isNaN(n)){if(!status[n])throw new Error("invalid status code: "+n);return n}n=status[code.toLowerCase()];if(!n)throw new Error('invalid status message: "'+code+'"');return n}},{"./codes.json":517}],519:[function(require,module,exports){"use strict";var isNative=/\.node$/;function forEach(obj,callback){for(var key in obj){if(!Object.prototype.hasOwnProperty.call(obj,key)){continue}callback(key)}}function assign(target,source){forEach(source,function(key){target[key]=source[key]});return target}function clearCache(requireCache){forEach(requireCache,function(resolvedPath){if(!isNative.test(resolvedPath)){delete requireCache[resolvedPath]}})}module.exports=function(requireCache,callback,callbackForModulesToKeep,module){var originalCache=assign({},requireCache);clearCache(requireCache);if(callbackForModulesToKeep){var originalModuleChildren=module.children?module.children.slice():false;callbackForModulesToKeep();var modulesToKeep=[];forEach(requireCache,function(key){modulesToKeep.push(key)});clearCache(requireCache);if(module.children){module.children=originalModuleChildren}for(var i=0;i<modulesToKeep.length;i+=1){if(originalCache[modulesToKeep[i]]){requireCache[modulesToKeep[i]]=originalCache[modulesToKeep[i]]}}}var freshModule=callback();var stealthCache=callbackForModulesToKeep?assign({},requireCache):false;clearCache(requireCache);if(callbackForModulesToKeep){for(var k=0;k<modulesToKeep.length;k+=1){if(stealthCache[modulesToKeep[k]]){requireCache[modulesToKeep[k]]=stealthCache[modulesToKeep[k]]}}}assign(requireCache,originalCache);return freshModule}},{}],520:[function(require,module,exports){var util=require("util");var Stream=require("stream");var StringDecoder=require("string_decoder").StringDecoder;module.exports=StringStream;module.exports.AlignedStringDecoder=AlignedStringDecoder;function StringStream(from,to){if(!(this instanceof StringStream))return new StringStream(from,to);Stream.call(this);if(from==null)from="utf8";this.readable=this.writable=true;this.paused=false;this.toEncoding=to==null?from:to;this.fromEncoding=to==null?"":from;this.decoder=new AlignedStringDecoder(this.toEncoding)}util.inherits(StringStream,Stream);StringStream.prototype.write=function(data){if(!this.writable){var err=new Error("stream not writable");err.code="EPIPE";this.emit("error",err);return false}if(this.fromEncoding){if(Buffer.isBuffer(data))data=data.toString();data=new Buffer(data,this.fromEncoding)}var string=this.decoder.write(data);if(string.length)this.emit("data",string);return!this.paused};StringStream.prototype.flush=function(){if(this.decoder.flush){var string=this.decoder.flush();if(string.length)this.emit("data",string)}};StringStream.prototype.end=function(){if(!this.writable&&!this.readable)return;this.flush();this.emit("end");this.writable=this.readable=false;this.destroy()};StringStream.prototype.destroy=function(){this.decoder=null;this.writable=this.readable=false;this.emit("close")};StringStream.prototype.pause=function(){this.paused=true};StringStream.prototype.resume=function(){if(this.paused)this.emit("drain");this.paused=false};function AlignedStringDecoder(encoding){StringDecoder.call(this,encoding);switch(this.encoding){case"base64":this.write=alignedWrite;this.alignedBuffer=new Buffer(3);this.alignedBytes=0;break}}util.inherits(AlignedStringDecoder,StringDecoder);AlignedStringDecoder.prototype.flush=function(){if(!this.alignedBuffer||!this.alignedBytes)return"";var leftover=this.alignedBuffer.toString(this.encoding,0,this.alignedBytes);this.alignedBytes=0;return leftover};function alignedWrite(buffer){var rem=(this.alignedBytes+buffer.length)%this.alignedBuffer.length;if(!rem&&!this.alignedBytes)return buffer.toString(this.encoding);var returnBuffer=new Buffer(this.alignedBytes+buffer.length-rem);this.alignedBuffer.copy(returnBuffer,0,0,this.alignedBytes);buffer.copy(returnBuffer,this.alignedBytes,0,buffer.length-rem);buffer.copy(this.alignedBuffer,0,buffer.length-rem,buffer.length);this.alignedBytes=rem;return returnBuffer.toString(this.encoding)}},{stream:undefined,string_decoder:undefined,util:undefined}],521:[function(require,module,exports){"use strict";const os=require("os");const hasFlag=require("has-flag");const env=process.env;function translateLevel(level){if(level===0){return false}return{level:level,hasBasic:true,has256:level>=2,has16m:level>=3}}function supportsColor(stream){if(hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")){return 0}if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor")){return 3}if(hasFlag("color=256")){return 2}if(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always")){return 1}if(stream&&!stream.isTTY){return 0}if(process.platform==="win32"){const osRelease=os.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(osRelease[0])>=10&&Number(osRelease[2])>=10586){return Number(osRelease[2])>=14931?3:2}return 1}if("CI"in env){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(sign=>sign in env)||env.CI_NAME==="codeship"){return 1}return 0}if("TEAMCITY_VERSION"in env){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0}if("TERM_PROGRAM"in env){const version=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return version>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(env.TERM)){return 2}if(/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)){return 1}if("COLORTERM"in env){return 1}if(env.TERM==="dumb"){return 0}return 0}function getSupportLevel(stream){let level=supportsColor(stream);if("FORCE_COLOR"in env){level=env.FORCE_COLOR.length>0&&parseInt(env.FORCE_COLOR,10)===0?0:level||1}return translateLevel(level)}module.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},{"has-flag":348,os:undefined}],522:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const property_definition_1=require("./property-definition");class ObjectDefinition{constructor(){this.ctr=(()=>{});this.beforeDeserialized=(()=>{});this.onDeserialized=(()=>{});this.properties=new Map}getProperty(key){let property=this.properties.get(key);if(!property){property=new property_definition_1.PropertyDefinition;this.properties.set(key,property)}return property}}exports.ObjectDefinition=ObjectDefinition;exports.objectDefinitions=new Map;function getDefinition(target){let definition=exports.objectDefinitions.get(target);if(!definition){definition=new ObjectDefinition;exports.objectDefinitions.set(target,definition)}return definition}exports.getDefinition=getDefinition;function getInheritanceChain(type){if(!type){return[]}const parent=Object.getPrototypeOf(type);return[type.constructor].concat(getInheritanceChain(parent))}exports.getInheritanceChain=getInheritanceChain;function getChildClassDefinitions(parentType){const childDefs=[];exports.objectDefinitions.forEach((def,type)=>{const superClass=Object.getPrototypeOf(type.prototype).constructor;if(superClass===parentType){childDefs.push([type,def])}});return childDefs}function getTypedInheritanceChain(type,object){const parentDef=exports.objectDefinitions.get(type);let childDefs=[];if(object&&parentDef&&parentDef.discriminatorProperty){childDefs=childDefs.concat(getChildClassDefinitions(type))}let actualType;while(childDefs.length!==0&&!actualType){const[t,def]=childDefs.shift();if(def.hasOwnProperty("discriminatorValue")){if(object&&parentDef&&def.discriminatorValue===object[parentDef.discriminatorProperty]){if(def.hasOwnProperty("discriminatorProperty")){return getTypedInheritanceChain(t,object)}actualType=t}}else{childDefs=childDefs.concat(getChildClassDefinitions(t))}}if(!actualType){actualType=type}const inheritanceChain=new Set(getInheritanceChain(Object.create(actualType.prototype)));return Array.from(inheritanceChain).filter(t=>exports.objectDefinitions.has(t))}exports.getTypedInheritanceChain=getTypedInheritanceChain},{"./property-definition":523}],523:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class PropertyDefinition{constructor(){this.array=false;this.set=false;this.readonly=false;this.writeonly=false}}exports.PropertyDefinition=PropertyDefinition},{}],524:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class BufferConverter{constructor(encoding="json"){this._encoding=encoding}serialize(property){if(this._encoding==="json"){return property.toJSON()}return property.toString(this._encoding)}deserialize(value){if(this._encoding==="json"){return Buffer.from(value.data)}return Buffer.from(value,this._encoding)}collapseArrayWithSingleItem(){return false}}exports.BufferConverter=BufferConverter},{}],525:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const date_converter_1=require("./date-converter");const buffer_converter_1=require("./buffer-converter");exports.propertyConverters=new Map;exports.propertyConverters.set(Buffer,new buffer_converter_1.BufferConverter);exports.propertyConverters.set(Date,new date_converter_1.DateConverter)},{"./buffer-converter":524,"./date-converter":526}],526:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class DateConverter{serialize(property){return property.toString()}deserialize(value){return new Date(value)}collapseArrayWithSingleItem(){return false}}exports.DateConverter=DateConverter},{}],527:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./converter"));__export(require("./buffer-converter"));__export(require("./date-converter"))},{"./buffer-converter":524,"./converter":525,"./date-converter":526}],528:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function BeforeDeserialized(){return function(target,key){const definition=object_definition_1.getDefinition(target.constructor);definition.beforeDeserialized=target[key]}}exports.BeforeDeserialized=BeforeDeserialized},{"../classes/object-definition":522}],529:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./json-object"));__export(require("./json-property"));__export(require("./json-type"));__export(require("./json-element-type"));__export(require("./json-converter"));__export(require("./json-readonly"));__export(require("./json-writeonly"));__export(require("./json-discriminator-property"));__export(require("./json-discriminator-value"));__export(require("./json-constructor"));__export(require("./before-deserialized"));__export(require("./on-deserialized"))},{"./before-deserialized":528,"./json-constructor":530,"./json-converter":531,"./json-discriminator-property":532,"./json-discriminator-value":533,"./json-element-type":534,"./json-object":535,"./json-property":536,"./json-readonly":537,"./json-type":538,"./json-writeonly":539,"./on-deserialized":540}],530:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonConstructor(){return function(target,key){const definition=object_definition_1.getDefinition(target.constructor);definition.ctr=target[key]}}exports.JsonConstructor=JsonConstructor},{"../classes/object-definition":522}],531:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonConverter(converter){return function(target,key){const property=object_definition_1.getDefinition(target.constructor).getProperty(key);if(typeof converter==="function"){property.converter=new converter}else{property.converter=converter}}}exports.JsonConverter=JsonConverter},{"../classes/object-definition":522}],532:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonDiscriminatorProperty(property){return function(constructor){object_definition_1.getDefinition(constructor).discriminatorProperty=property}}exports.JsonDiscriminatorProperty=JsonDiscriminatorProperty},{"../classes/object-definition":522}],533:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonDiscriminatorValue(value){return function(constructor){object_definition_1.getDefinition(constructor).discriminatorValue=value}}exports.JsonDiscriminatorValue=JsonDiscriminatorValue},{"../classes/object-definition":522}],534:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonElementType(type){return function(target,key){const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.type=type}}exports.JsonElementType=JsonElementType},{"../classes/object-definition":522}],535:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonObject(){return function(constructor){object_definition_1.getDefinition(constructor)}}exports.JsonObject=JsonObject},{"../classes/object-definition":522}],536:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});require("reflect-metadata");const object_definition_1=require("../classes/object-definition");function JsonProperty(propertyName){return function(target,key){const type=Reflect.getMetadata("design:type",target,key);const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.serializedName=propertyName||key;property.array=type===Array;property.set=type===Set;if(!property.array&&!property.set&&!property.type){property.type=type}}}exports.JsonProperty=JsonProperty},{"../classes/object-definition":522,"reflect-metadata":545}],537:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonReadonly(){return function(target,key){const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.readonly=true}}exports.JsonReadonly=JsonReadonly},{"../classes/object-definition":522}],538:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonType(type){return function(target,key){const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.type=type}}exports.JsonType=JsonType},{"../classes/object-definition":522}],539:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function JsonWriteonly(){return function(target,key){const property=object_definition_1.getDefinition(target.constructor).getProperty(key);property.writeonly=true}}exports.JsonWriteonly=JsonWriteonly},{"../classes/object-definition":522}],540:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");function OnDeserialized(){return function(target,key){const definition=object_definition_1.getDefinition(target.constructor);definition.onDeserialized=target[key]}}exports.OnDeserialized=OnDeserialized},{"../classes/object-definition":522}],541:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./json"));__export(require("./decorators"));__export(require("./converters"))},{"./converters":527,"./decorators":529,"./json":542}],542:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const serialize_1=require("./methods/serialize");const deserialize_1=require("./methods/deserialize");class JSON{static deserialize(object,type,options){return deserialize_1.deserialize(object,type,options)}static parse(json,type,options){return this.deserialize(global.JSON.parse(json),type,options)}static serialize(value){return serialize_1.serialize(value)}static stringify(object){return global.JSON.stringify(this.serialize(object))}}exports.JSON=JSON},{"./methods/deserialize":543,"./methods/serialize":544}],543:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const object_definition_1=require("../classes/object-definition");const converter_1=require("../converters/converter");function deserialize(object,type,options={runConstructor:false}){if(object&&object.constructor===Array){return object.map(o=>deserializeRootObject(o,type,options))}return deserializeRootObject(object,type,options)}exports.deserialize=deserialize;function deserializeRootObject(object,objectType=Object,options){if(!object_definition_1.objectDefinitions.has(objectType)){return object}const values=object;const[type,...superTypes]=object_definition_1.getTypedInheritanceChain(objectType,values);const output=Object.create(type.prototype);const definitions=[...superTypes.reverse(),type].map(t=>object_definition_1.objectDefinitions.get(t)).filter(t=>!!t);definitions.forEach(d=>{if(options.runConstructor){d.ctr.call(output)}d.beforeDeserialized.call(output);d.properties.forEach((p,key)=>{if(!p.type){throw new Error(`Cannot deserialize property '${key}' without type!`)}const value=values[p.serializedName];if(value==undefined||p.readonly){return}if(p.array||p.set){output[key]=deserializeArray(value,p,options);if(p.set){output[key]=new Set(output[key])}return}output[key]=deserializeObject(value,p,options)});d.onDeserialized.call(output)});return output}function deserializeArray(array,definition,options){const converter=definition.converter||converter_1.propertyConverters.get(definition.type);const arr=array instanceof Array?array:converter&&converter.collapseArrayWithSingleItem()?[array]:array;return arr.map(v=>deserializeObject(v,definition,options))}function deserializeObject(object,definition,options){const primitive=definition.type===String||definition.type===Boolean||definition.type===Number;const value=object;const converter=definition.converter||converter_1.propertyConverters.get(definition.type);if(converter){return converter.deserialize(value)}if(!primitive){const objDefinition=object_definition_1.objectDefinitions.get(definition.type);if(objDefinition){return deserialize(value,definition.type)}}return value}},{"../classes/object-definition":522,"../converters/converter":525}],544:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const converter_1=require("./../converters/converter");const object_definition_1=require("../classes/object-definition");function serialize(value,type){if(value.constructor===Array){return value.map(o=>serializeRootObject(o,type))}return serializeRootObject(value,type)}exports.serialize=serialize;function serializeRootObject(object,type=Object.getPrototypeOf(object).constructor){const inheritanceChain=object_definition_1.getTypedInheritanceChain(type);if(inheritanceChain.length===0){return object}const definitions=inheritanceChain.map(t=>object_definition_1.objectDefinitions.get(t)).filter(t=>!!t);const output={};definitions.forEach(d=>{d.properties.forEach((p,key)=>{if(!p.type){throw new Error(`Cannot serialize property '${key}' without type!`)}const value=object[key];if(value==undefined||p.writeonly){return}if(p.set){output[p.serializedName]=serializeArray(Array.from(value||[]),p);return}if(p.array){output[p.serializedName]=serializeArray(value,p);return}output[p.serializedName]=serializeObject(value,p)})});return output}function serializeArray(array,definition){const arr=array.map(v=>serializeObject(v,definition));if(arr.length===1){const converter=definition.converter||converter_1.propertyConverters.get(definition.type);if(converter&&converter.collapseArrayWithSingleItem()){return arr[0]}}return arr}function serializeObject(object,definition){const primitive=definition.type===String||definition.type===Boolean||definition.type===Number;const value=object;const converter=definition.converter||converter_1.propertyConverters.get(definition.type);if(converter){return converter.serialize(value)}if(!primitive){const objDefinition=object_definition_1.objectDefinitions.get(definition.type);if(objDefinition){if(value instanceof definition.type){return serialize(value)}return serialize(value,definition.type)}}return value}},{"../classes/object-definition":522,"./../converters/converter":525}],545:[function(require,module,exports){arguments[4][464][0].apply(exports,arguments)},{dup:464}],546:[function(require,module,exports){const fs=require("fs");const path=require("path");const crypto=require("crypto");const osTmpDir=require("os-tmpdir");const _c=process.binding("constants");const tmpDir=osTmpDir(),RANDOM_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",TEMPLATE_PATTERN=/XXXXXX/,DEFAULT_TRIES=3,CREATE_FLAGS=(_c.O_CREAT||_c.fs.O_CREAT)|(_c.O_EXCL||_c.fs.O_EXCL)|(_c.O_RDWR||_c.fs.O_RDWR),EBADF=_c.EBADF||_c.os.errno.EBADF,ENOENT=_c.ENOENT||_c.os.errno.ENOENT,DIR_MODE=448,FILE_MODE=384,_removeObjects=[];var _gracefulCleanup=false,_uncaughtException=false;function _randomChars(howMany){var value=[],rnd=null;try{rnd=crypto.randomBytes(howMany)}catch(e){rnd=crypto.pseudoRandomBytes(howMany)}for(var i=0;i<howMany;i++){value.push(RANDOM_CHARS[rnd[i]%RANDOM_CHARS.length])}return value.join("")}function _isUndefined(obj){return typeof obj==="undefined"}function _parseArguments(options,callback){if(typeof options=="function"){return[callback||{},options]}if(_isUndefined(options)){return[{},callback]}return[options,callback]}function _generateTmpName(opts){if(opts.name){return path.join(opts.dir||tmpDir,opts.name)}if(opts.template){return opts.template.replace(TEMPLATE_PATTERN,_randomChars(6))}const name=[opts.prefix||"tmp-",process.pid,_randomChars(12),opts.postfix||""].join("");return path.join(opts.dir||tmpDir,name)}function tmpName(options,callback){var args=_parseArguments(options,callback),opts=args[0],cb=args[1],tries=opts.name?1:opts.tries||DEFAULT_TRIES;if(isNaN(tries)||tries<0)return cb(new Error("Invalid tries"));if(opts.template&&!opts.template.match(TEMPLATE_PATTERN))return cb(new Error("Invalid template provided"));(function _getUniqueName(){const name=_generateTmpName(opts);fs.stat(name,function(err){if(!err){if(tries-- >0)return _getUniqueName();return cb(new Error("Could not get a unique tmp filename, max tries reached "+name))}cb(null,name)})})()}function tmpNameSync(options){var args=_parseArguments(options),opts=args[0],tries=opts.name?1:opts.tries||DEFAULT_TRIES;if(isNaN(tries)||tries<0)throw new Error("Invalid tries");if(opts.template&&!opts.template.match(TEMPLATE_PATTERN))throw new Error("Invalid template provided");do{const name=_generateTmpName(opts);try{fs.statSync(name)}catch(e){return name}}while(tries-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function file(options,callback){var args=_parseArguments(options,callback),opts=args[0],cb=args[1];opts.postfix=_isUndefined(opts.postfix)?".tmp":opts.postfix;tmpName(opts,function _tmpNameCreated(err,name){if(err)return cb(err);fs.open(name,CREATE_FLAGS,opts.mode||FILE_MODE,function _fileCreated(err,fd){if(err)return cb(err);if(opts.discardDescriptor){return fs.close(fd,function _discardCallback(err){if(err){try{fs.unlinkSync(name)}catch(e){if(!isENOENT(e)){err=e}}return cb(err)}cb(null,name,undefined,_prepareTmpFileRemoveCallback(name,-1,opts))})}if(opts.detachDescriptor){return cb(null,name,fd,_prepareTmpFileRemoveCallback(name,-1,opts))}cb(null,name,fd,_prepareTmpFileRemoveCallback(name,fd,opts))})})}function fileSync(options){var args=_parseArguments(options),opts=args[0];opts.postfix=opts.postfix||".tmp";const discardOrDetachDescriptor=opts.discardDescriptor||opts.detachDescriptor;const name=tmpNameSync(opts);var fd=fs.openSync(name,CREATE_FLAGS,opts.mode||FILE_MODE);if(opts.discardDescriptor){fs.closeSync(fd);fd=undefined}return{name:name,fd:fd,removeCallback:_prepareTmpFileRemoveCallback(name,discardOrDetachDescriptor?-1:fd,opts)}}function _rmdirRecursiveSync(root){const dirs=[root];do{var dir=dirs.pop(),deferred=false,files=fs.readdirSync(dir);for(var i=0,length=files.length;i<length;i++){var file=path.join(dir,files[i]),stat=fs.lstatSync(file);if(stat.isDirectory()){if(!deferred){deferred=true;dirs.push(dir)}dirs.push(file)}else{fs.unlinkSync(file)}}if(!deferred){fs.rmdirSync(dir)}}while(dirs.length!==0)}function dir(options,callback){var args=_parseArguments(options,callback),opts=args[0],cb=args[1];tmpName(opts,function _tmpNameCreated(err,name){if(err)return cb(err);fs.mkdir(name,opts.mode||DIR_MODE,function _dirCreated(err){if(err)return cb(err);cb(null,name,_prepareTmpDirRemoveCallback(name,opts))})})}function dirSync(options){var args=_parseArguments(options),opts=args[0];const name=tmpNameSync(opts);fs.mkdirSync(name,opts.mode||DIR_MODE);return{name:name,removeCallback:_prepareTmpDirRemoveCallback(name,opts)}}function _prepareTmpFileRemoveCallback(name,fd,opts){const removeCallback=_prepareRemoveCallback(function _removeCallback(fdPath){try{if(0<=fdPath[0]){fs.closeSync(fdPath[0])}}catch(e){if(!isEBADF(e)&&!isENOENT(e)){throw e}}try{fs.unlinkSync(fdPath[1])}catch(e){if(!isENOENT(e)){throw e}}},[fd,name]);if(!opts.keep){_removeObjects.unshift(removeCallback)}return removeCallback}function _prepareTmpDirRemoveCallback(name,opts){const removeFunction=opts.unsafeCleanup?_rmdirRecursiveSync:fs.rmdirSync.bind(fs);const removeCallback=_prepareRemoveCallback(removeFunction,name);if(!opts.keep){_removeObjects.unshift(removeCallback)}return removeCallback}function _prepareRemoveCallback(removeFunction,arg){var called=false;return function _cleanupCallback(next){if(!called){const index=_removeObjects.indexOf(_cleanupCallback);if(index>=0){_removeObjects.splice(index,1)}called=true;removeFunction(arg)}if(next)next(null)}}function _garbageCollector(){if(_uncaughtException&&!_gracefulCleanup){return}while(_removeObjects.length){try{_removeObjects[0].call(null)}catch(e){}}}function isEBADF(error){return isExpectedError(error,-EBADF,"EBADF")}function isENOENT(error){return isExpectedError(error,-ENOENT,"ENOENT")}function isExpectedError(error,code,errno){return error.code==code||error.code==errno}function setGracefulCleanup(){_gracefulCleanup=true}const version=process.versions.node.split(".").map(function(value){return parseInt(value,10)});if(version[0]===0&&(version[1]<9||version[1]===9&&version[2]<5)){process.addListener("uncaughtException",function _uncaughtExceptionThrown(err){_uncaughtException=true;_garbageCollector();throw err})}process.addListener("exit",function _exit(code){if(code)_uncaughtException=true;_garbageCollector()});module.exports.tmpdir=tmpDir;module.exports.dir=dir;module.exports.dirSync=dirSync;module.exports.file=file;module.exports.fileSync=fileSync;module.exports.tmpName=tmpName;module.exports.tmpNameSync=tmpNameSync;module.exports.setGracefulCleanup=setGracefulCleanup},{crypto:undefined,fs:undefined,"os-tmpdir":449,path:undefined}],547:[function(require,module,exports){"use strict";var net=require("net");var urlParse=require("url").parse;var pubsuffix=require("./pubsuffix");var Store=require("./store").Store;var MemoryCookieStore=require("./memstore").MemoryCookieStore;var pathMatch=require("./pathMatch").pathMatch;var VERSION=require("../package.json").version;var punycode;try{punycode=require("punycode")}catch(e){console.warn("cookie: can't load punycode; won't use punycode for domain normalization")}var DATE_DELIM=/[\x09\x20-\x2F\x3B-\x40\x5B-\x60\x7B-\x7E]/;var COOKIE_OCTET=/[\x21\x23-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]/;var COOKIE_OCTETS=new RegExp("^"+COOKIE_OCTET.source+"+$");var CONTROL_CHARS=/[\x00-\x1F]/;var COOKIE_PAIR=/^(([^=;]+))\s{0,256}=\s*([^\n\r\0]*)/;var LOOSE_COOKIE_PAIR=/^((?:=)?([^=;]*)\s{0,256}=\s*)?([^\n\r\0]*)/;var PATH_VALUE=/[\x20-\x3A\x3C-\x7E]+/;var DAY_OF_MONTH=/^(\d{1,2})[^\d]*$/;var TIME=/^(\d{1,2})[^\d]*:(\d{1,2})[^\d]*:(\d{1,2})[^\d]*$/;var MONTH=/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i;var MONTH_TO_NUM={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11};var NUM_TO_MONTH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var NUM_TO_DAY=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var YEAR=/^(\d{2}|\d{4})$/;var MAX_TIME=2147483647e3;var MIN_TIME=0;function parseDate(str){if(!str){return}var tokens=str.split(DATE_DELIM);if(!tokens){return}var hour=null;var minutes=null;var seconds=null;var day=null;var month=null;var year=null;for(var i=0;i<tokens.length;i++){var token=tokens[i].trim();if(!token.length){continue}var result;if(seconds===null){result=TIME.exec(token);if(result){hour=parseInt(result[1],10);minutes=parseInt(result[2],10);seconds=parseInt(result[3],10);if(hour>23||minutes>59||seconds>59){return}continue}}if(day===null){result=DAY_OF_MONTH.exec(token);if(result){day=parseInt(result,10);if(day<1||day>31){return}continue}}if(month===null){result=MONTH.exec(token);if(result){month=MONTH_TO_NUM[result[1].toLowerCase()];continue}}if(year===null){result=YEAR.exec(token);if(result){year=parseInt(result[0],10);if(70<=year&&year<=99){year+=1900}else if(0<=year&&year<=69){year+=2e3}if(year<1601){return}}}}if(seconds===null||day===null||month===null||year===null){return}return new Date(Date.UTC(year,month,day,hour,minutes,seconds))}function formatDate(date){var d=date.getUTCDate();d=d>=10?d:"0"+d;var h=date.getUTCHours();h=h>=10?h:"0"+h;var m=date.getUTCMinutes();m=m>=10?m:"0"+m;var s=date.getUTCSeconds();s=s>=10?s:"0"+s;return NUM_TO_DAY[date.getUTCDay()]+", "+d+" "+NUM_TO_MONTH[date.getUTCMonth()]+" "+date.getUTCFullYear()+" "+h+":"+m+":"+s+" GMT"}function canonicalDomain(str){if(str==null){return null}str=str.trim().replace(/^\./,"");if(punycode&&/[^\u0001-\u007f]/.test(str)){str=punycode.toASCII(str)}return str.toLowerCase()}function domainMatch(str,domStr,canonicalize){if(str==null||domStr==null){return null}if(canonicalize!==false){str=canonicalDomain(str);domStr=canonicalDomain(domStr)}if(str==domStr){return true}if(net.isIP(str)){return false}var idx=str.indexOf(domStr);if(idx<=0){return false}if(str.length!==domStr.length+idx){return false}if(str.substr(idx-1,1)!=="."){return false}return true}function defaultPath(path){if(!path||path.substr(0,1)!=="/"){return"/"}if(path==="/"){return path}var rightSlash=path.lastIndexOf("/");if(rightSlash===0){return"/"}return path.slice(0,rightSlash)}function parse(str,options){if(!options||typeof options!=="object"){options={}}str=str.trim();var firstSemi=str.indexOf(";");var pairRe=options.loose?LOOSE_COOKIE_PAIR:COOKIE_PAIR;var result=pairRe.exec(firstSemi===-1?str:str.substr(0,firstSemi));if(!result){return}var c=new Cookie;if(result[1]){c.key=result[2].trim()}else{c.key=""}c.value=result[3].trim();if(CONTROL_CHARS.test(c.key)||CONTROL_CHARS.test(c.value)){return}if(firstSemi===-1){return c}var unparsed=str.slice(firstSemi+1).trim();if(unparsed.length===0){return c}var cookie_avs=unparsed.split(";");while(cookie_avs.length){var av=cookie_avs.shift().trim();if(av.length===0){continue}var av_sep=av.indexOf("=");var av_key,av_value;if(av_sep===-1){av_key=av;av_value=null}else{av_key=av.substr(0,av_sep);av_value=av.substr(av_sep+1)}av_key=av_key.trim().toLowerCase();if(av_value){av_value=av_value.trim()}switch(av_key){case"expires":if(av_value){var exp=parseDate(av_value);if(exp){c.expires=exp}}break;case"max-age":if(av_value){if(/^-?[0-9]+$/.test(av_value)){var delta=parseInt(av_value,10);c.setMaxAge(delta)}}break;case"domain":if(av_value){var domain=av_value.trim().replace(/^\./,"");if(domain){c.domain=domain.toLowerCase()}}break;case"path":c.path=av_value&&av_value[0]==="/"?av_value:null;break;case"secure":c.secure=true;break;case"httponly":c.httpOnly=true;break;default:c.extensions=c.extensions||[];c.extensions.push(av);break}}return c}function jsonParse(str){var obj;try{obj=JSON.parse(str)}catch(e){return e}return obj}function fromJSON(str){if(!str){return null}var obj;if(typeof str==="string"){obj=jsonParse(str);if(obj instanceof Error){return null}}else{obj=str}var c=new Cookie;for(var i=0;i<Cookie.serializableProperties.length;i++){var prop=Cookie.serializableProperties[i];if(obj[prop]===undefined||obj[prop]===Cookie.prototype[prop]){continue}if(prop==="expires"||prop==="creation"||prop==="lastAccessed"){if(obj[prop]===null){c[prop]=null}else{c[prop]=obj[prop]=="Infinity"?"Infinity":new Date(obj[prop])}}else{c[prop]=obj[prop]}}return c}function cookieCompare(a,b){var cmp=0;var aPathLen=a.path?a.path.length:0;var bPathLen=b.path?b.path.length:0;cmp=bPathLen-aPathLen;if(cmp!==0){return cmp}var aTime=a.creation?a.creation.getTime():MAX_TIME;var bTime=b.creation?b.creation.getTime():MAX_TIME;cmp=aTime-bTime;if(cmp!==0){return cmp}cmp=a.creationIndex-b.creationIndex;return cmp}function permutePath(path){if(path==="/"){return["/"]}if(path.lastIndexOf("/")===path.length-1){path=path.substr(0,path.length-1)}var permutations=[path];while(path.length>1){var lindex=path.lastIndexOf("/");if(lindex===0){break}path=path.substr(0,lindex);permutations.push(path)}permutations.push("/");return permutations}function getCookieContext(url){if(url instanceof Object){return url}try{url=decodeURI(url)}catch(err){}return urlParse(url)}function Cookie(options){options=options||{};Object.keys(options).forEach(function(prop){if(Cookie.prototype.hasOwnProperty(prop)&&Cookie.prototype[prop]!==options[prop]&&prop.substr(0,1)!=="_"){this[prop]=options[prop]}},this);this.creation=this.creation||new Date;Object.defineProperty(this,"creationIndex",{configurable:false,enumerable:false,writable:true,value:++Cookie.cookiesCreated})}Cookie.cookiesCreated=0;Cookie.parse=parse;Cookie.fromJSON=fromJSON;Cookie.prototype.key="";Cookie.prototype.value="";Cookie.prototype.expires="Infinity";Cookie.prototype.maxAge=null;Cookie.prototype.domain=null;Cookie.prototype.path=null;Cookie.prototype.secure=false;Cookie.prototype.httpOnly=false;Cookie.prototype.extensions=null;Cookie.prototype.hostOnly=null;Cookie.prototype.pathIsDefault=null;Cookie.prototype.creation=null;Cookie.prototype.lastAccessed=null;Object.defineProperty(Cookie.prototype,"creationIndex",{configurable:true,enumerable:false,writable:true,value:0});Cookie.serializableProperties=Object.keys(Cookie.prototype).filter(function(prop){return!(Cookie.prototype[prop]instanceof Function||prop==="creationIndex"||prop.substr(0,1)==="_")});Cookie.prototype.inspect=function inspect(){var now=Date.now();return'Cookie="'+this.toString()+"; hostOnly="+(this.hostOnly!=null?this.hostOnly:"?")+"; aAge="+(this.lastAccessed?now-this.lastAccessed.getTime()+"ms":"?")+"; cAge="+(this.creation?now-this.creation.getTime()+"ms":"?")+'"'};Cookie.prototype.toJSON=function(){var obj={};var props=Cookie.serializableProperties;for(var i=0;i<props.length;i++){var prop=props[i];if(this[prop]===Cookie.prototype[prop]){continue}if(prop==="expires"||prop==="creation"||prop==="lastAccessed"){if(this[prop]===null){obj[prop]=null}else{obj[prop]=this[prop]=="Infinity"?"Infinity":this[prop].toISOString()}}else if(prop==="maxAge"){if(this[prop]!==null){obj[prop]=this[prop]==Infinity||this[prop]==-Infinity?this[prop].toString():this[prop]}}else{if(this[prop]!==Cookie.prototype[prop]){obj[prop]=this[prop]}}}return obj};Cookie.prototype.clone=function(){return fromJSON(this.toJSON())};Cookie.prototype.validate=function validate(){if(!COOKIE_OCTETS.test(this.value)){return false}if(this.expires!=Infinity&&!(this.expires instanceof Date)&&!parseDate(this.expires)){return false}if(this.maxAge!=null&&this.maxAge<=0){return false}if(this.path!=null&&!PATH_VALUE.test(this.path)){return false}var cdomain=this.cdomain();if(cdomain){if(cdomain.match(/\.$/)){return false}var suffix=pubsuffix.getPublicSuffix(cdomain);if(suffix==null){return false}}return true};Cookie.prototype.setExpires=function setExpires(exp){if(exp instanceof Date){this.expires=exp}else{this.expires=parseDate(exp)||"Infinity"}};Cookie.prototype.setMaxAge=function setMaxAge(age){if(age===Infinity||age===-Infinity){this.maxAge=age.toString()}else{this.maxAge=age}};Cookie.prototype.cookieString=function cookieString(){var val=this.value;if(val==null){val=""}if(this.key===""){return val}return this.key+"="+val};Cookie.prototype.toString=function toString(){var str=this.cookieString();if(this.expires!=Infinity){if(this.expires instanceof Date){str+="; Expires="+formatDate(this.expires)}else{str+="; Expires="+this.expires}}if(this.maxAge!=null&&this.maxAge!=Infinity){str+="; Max-Age="+this.maxAge}if(this.domain&&!this.hostOnly){str+="; Domain="+this.domain}if(this.path){str+="; Path="+this.path}if(this.secure){str+="; Secure"}if(this.httpOnly){str+="; HttpOnly"}if(this.extensions){this.extensions.forEach(function(ext){str+="; "+ext})}return str};Cookie.prototype.TTL=function TTL(now){if(this.maxAge!=null){return this.maxAge<=0?0:this.maxAge*1e3}var expires=this.expires;if(expires!=Infinity){if(!(expires instanceof Date)){expires=parseDate(expires)||Infinity}if(expires==Infinity){return Infinity}return expires.getTime()-(now||Date.now())}return Infinity};Cookie.prototype.expiryTime=function expiryTime(now){if(this.maxAge!=null){var relativeTo=now||this.creation||new Date;var age=this.maxAge<=0?-Infinity:this.maxAge*1e3;return relativeTo.getTime()+age}if(this.expires==Infinity){return Infinity}return this.expires.getTime()};Cookie.prototype.expiryDate=function expiryDate(now){var millisec=this.expiryTime(now);if(millisec==Infinity){return new Date(MAX_TIME)}else if(millisec==-Infinity){return new Date(MIN_TIME)}else{return new Date(millisec)}};Cookie.prototype.isPersistent=function isPersistent(){return this.maxAge!=null||this.expires!=Infinity};Cookie.prototype.cdomain=Cookie.prototype.canonicalizedDomain=function canonicalizedDomain(){if(this.domain==null){return null}return canonicalDomain(this.domain)};function CookieJar(store,options){if(typeof options==="boolean"){options={rejectPublicSuffixes:options}}else if(options==null){options={}}if(options.rejectPublicSuffixes!=null){this.rejectPublicSuffixes=options.rejectPublicSuffixes}if(options.looseMode!=null){this.enableLooseMode=options.looseMode}if(!store){store=new MemoryCookieStore}this.store=store}CookieJar.prototype.store=null;CookieJar.prototype.rejectPublicSuffixes=true;CookieJar.prototype.enableLooseMode=false;var CAN_BE_SYNC=[];CAN_BE_SYNC.push("setCookie");CookieJar.prototype.setCookie=function(cookie,url,options,cb){var err;var context=getCookieContext(url);if(options instanceof Function){cb=options;options={}}var host=canonicalDomain(context.hostname);var loose=this.enableLooseMode;if(options.loose!=null){loose=options.loose}if(!(cookie instanceof Cookie)){cookie=Cookie.parse(cookie,{loose:loose})}if(!cookie){err=new Error("Cookie failed to parse");return cb(options.ignoreError?null:err)}var now=options.now||new Date;if(this.rejectPublicSuffixes&&cookie.domain){var suffix=pubsuffix.getPublicSuffix(cookie.cdomain());if(suffix==null){err=new Error("Cookie has domain set to a public suffix");return cb(options.ignoreError?null:err)}}if(cookie.domain){if(!domainMatch(host,cookie.cdomain(),false)){err=new Error("Cookie not in this host's domain. Cookie:"+cookie.cdomain()+" Request:"+host);return cb(options.ignoreError?null:err)}if(cookie.hostOnly==null){cookie.hostOnly=false}}else{cookie.hostOnly=true;cookie.domain=host}if(!cookie.path||cookie.path[0]!=="/"){cookie.path=defaultPath(context.pathname);cookie.pathIsDefault=true}if(options.http===false&&cookie.httpOnly){err=new Error("Cookie is HttpOnly and this isn't an HTTP API");return cb(options.ignoreError?null:err)}var store=this.store;if(!store.updateCookie){store.updateCookie=function(oldCookie,newCookie,cb){this.putCookie(newCookie,cb)}}function withCookie(err,oldCookie){if(err){return cb(err)}var next=function(err){if(err){return cb(err)}else{cb(null,cookie)}};if(oldCookie){if(options.http===false&&oldCookie.httpOnly){err=new Error("old Cookie is HttpOnly and this isn't an HTTP API");return cb(options.ignoreError?null:err)}cookie.creation=oldCookie.creation;cookie.creationIndex=oldCookie.creationIndex;cookie.lastAccessed=now;store.updateCookie(oldCookie,cookie,next)}else{cookie.creation=cookie.lastAccessed=now;store.putCookie(cookie,next)}}store.findCookie(cookie.domain,cookie.path,cookie.key,withCookie)};CAN_BE_SYNC.push("getCookies");CookieJar.prototype.getCookies=function(url,options,cb){var context=getCookieContext(url);if(options instanceof Function){cb=options;options={}}var host=canonicalDomain(context.hostname);var path=context.pathname||"/";var secure=options.secure;if(secure==null&&context.protocol&&(context.protocol=="https:"||context.protocol=="wss:")){secure=true}var http=options.http;if(http==null){http=true}var now=options.now||Date.now();var expireCheck=options.expire!==false;var allPaths=!!options.allPaths;var store=this.store;function matchingCookie(c){if(c.hostOnly){if(c.domain!=host){return false}}else{if(!domainMatch(host,c.domain,false)){return false}}if(!allPaths&&!pathMatch(path,c.path)){return false}if(c.secure&&!secure){return false}if(c.httpOnly&&!http){return false}if(expireCheck&&c.expiryTime()<=now){store.removeCookie(c.domain,c.path,c.key,function(){});return false}return true}store.findCookies(host,allPaths?null:path,function(err,cookies){if(err){return cb(err)}cookies=cookies.filter(matchingCookie);if(options.sort!==false){cookies=cookies.sort(cookieCompare)}var now=new Date;cookies.forEach(function(c){c.lastAccessed=now});cb(null,cookies)})};CAN_BE_SYNC.push("getCookieString");CookieJar.prototype.getCookieString=function(){var args=Array.prototype.slice.call(arguments,0);var cb=args.pop();var next=function(err,cookies){if(err){cb(err)}else{cb(null,cookies.sort(cookieCompare).map(function(c){return c.cookieString()}).join("; "))}};args.push(next);this.getCookies.apply(this,args)};CAN_BE_SYNC.push("getSetCookieStrings");CookieJar.prototype.getSetCookieStrings=function(){var args=Array.prototype.slice.call(arguments,0);var cb=args.pop();var next=function(err,cookies){if(err){cb(err)}else{cb(null,cookies.map(function(c){return c.toString()}))}};args.push(next);this.getCookies.apply(this,args)};CAN_BE_SYNC.push("serialize");CookieJar.prototype.serialize=function(cb){var type=this.store.constructor.name;if(type==="Object"){type=null}var serialized={version:"tough-cookie@"+VERSION,storeType:type,rejectPublicSuffixes:!!this.rejectPublicSuffixes,cookies:[]};if(!(this.store.getAllCookies&&typeof this.store.getAllCookies==="function")){return cb(new Error("store does not support getAllCookies and cannot be serialized"))}this.store.getAllCookies(function(err,cookies){if(err){return cb(err)}serialized.cookies=cookies.map(function(cookie){cookie=cookie instanceof Cookie?cookie.toJSON():cookie;delete cookie.creationIndex;return cookie});return cb(null,serialized)})};CookieJar.prototype.toJSON=function(){return this.serializeSync()};CAN_BE_SYNC.push("_importCookies");CookieJar.prototype._importCookies=function(serialized,cb){var jar=this;var cookies=serialized.cookies;if(!cookies||!Array.isArray(cookies)){return cb(new Error("serialized jar has no cookies array"))}cookies=cookies.slice();function putNext(err){if(err){return cb(err)}if(!cookies.length){return cb(err,jar)}var cookie;try{cookie=fromJSON(cookies.shift())}catch(e){return cb(e)}if(cookie===null){return putNext(null)}jar.store.putCookie(cookie,putNext)}putNext()};CookieJar.deserialize=function(strOrObj,store,cb){if(arguments.length!==3){cb=store;store=null}var serialized;if(typeof strOrObj==="string"){serialized=jsonParse(strOrObj);if(serialized instanceof Error){return cb(serialized)}}else{serialized=strOrObj}var jar=new CookieJar(store,serialized.rejectPublicSuffixes);jar._importCookies(serialized,function(err){if(err){return cb(err)}cb(null,jar)})};CookieJar.deserializeSync=function(strOrObj,store){var serialized=typeof strOrObj==="string"?JSON.parse(strOrObj):strOrObj;var jar=new CookieJar(store,serialized.rejectPublicSuffixes);if(!jar.store.synchronous){throw new Error("CookieJar store is not synchronous; use async API instead.")}jar._importCookiesSync(serialized);return jar};CookieJar.fromJSON=CookieJar.deserializeSync;CAN_BE_SYNC.push("clone");CookieJar.prototype.clone=function(newStore,cb){if(arguments.length===1){cb=newStore;newStore=null}this.serialize(function(err,serialized){if(err){return cb(err)}CookieJar.deserialize(newStore,serialized,cb)})};function syncWrap(method){return function(){if(!this.store.synchronous){throw new Error("CookieJar store is not synchronous; use async API instead.")}var args=Array.prototype.slice.call(arguments);var syncErr,syncResult;args.push(function syncCb(err,result){syncErr=err;syncResult=result});this[method].apply(this,args);if(syncErr){throw syncErr}return syncResult}}CAN_BE_SYNC.forEach(function(method){CookieJar.prototype[method+"Sync"]=syncWrap(method)});module.exports={CookieJar:CookieJar,Cookie:Cookie,Store:Store,MemoryCookieStore:MemoryCookieStore,parseDate:parseDate,formatDate:formatDate,parse:parse,fromJSON:fromJSON,domainMatch:domainMatch,defaultPath:defaultPath,pathMatch:pathMatch,getPublicSuffix:pubsuffix.getPublicSuffix,cookieCompare:cookieCompare,permuteDomain:require("./permuteDomain").permuteDomain,permutePath:permutePath,canonicalDomain:canonicalDomain}},{"../package.json":553,"./memstore":548,"./pathMatch":549,"./permuteDomain":550,"./pubsuffix":551,"./store":552,net:undefined,punycode:undefined,url:undefined}],548:[function(require,module,exports){"use strict";var Store=require("./store").Store;var permuteDomain=require("./permuteDomain").permuteDomain;var pathMatch=require("./pathMatch").pathMatch;var util=require("util");function MemoryCookieStore(){Store.call(this);this.idx={}}util.inherits(MemoryCookieStore,Store);exports.MemoryCookieStore=MemoryCookieStore;MemoryCookieStore.prototype.idx=null;MemoryCookieStore.prototype.synchronous=true;MemoryCookieStore.prototype.inspect=function(){return"{ idx: "+util.inspect(this.idx,false,2)+" }"};MemoryCookieStore.prototype.findCookie=function(domain,path,key,cb){if(!this.idx[domain]){return cb(null,undefined)}if(!this.idx[domain][path]){return cb(null,undefined)}return cb(null,this.idx[domain][path][key]||null)};MemoryCookieStore.prototype.findCookies=function(domain,path,cb){var results=[];if(!domain){return cb(null,[])}var pathMatcher;if(!path){pathMatcher=function matchAll(domainIndex){for(var curPath in domainIndex){var pathIndex=domainIndex[curPath];for(var key in pathIndex){results.push(pathIndex[key])}}}}else{pathMatcher=function matchRFC(domainIndex){Object.keys(domainIndex).forEach(function(cookiePath){if(pathMatch(path,cookiePath)){var pathIndex=domainIndex[cookiePath];for(var key in pathIndex){results.push(pathIndex[key])}}})}}var domains=permuteDomain(domain)||[domain];var idx=this.idx;domains.forEach(function(curDomain){var domainIndex=idx[curDomain];if(!domainIndex){return}pathMatcher(domainIndex)});cb(null,results)};MemoryCookieStore.prototype.putCookie=function(cookie,cb){if(!this.idx[cookie.domain]){this.idx[cookie.domain]={}}if(!this.idx[cookie.domain][cookie.path]){this.idx[cookie.domain][cookie.path]={}}this.idx[cookie.domain][cookie.path][cookie.key]=cookie;cb(null)};MemoryCookieStore.prototype.updateCookie=function(oldCookie,newCookie,cb){this.putCookie(newCookie,cb)};MemoryCookieStore.prototype.removeCookie=function(domain,path,key,cb){if(this.idx[domain]&&this.idx[domain][path]&&this.idx[domain][path][key]){delete this.idx[domain][path][key]}cb(null)};MemoryCookieStore.prototype.removeCookies=function(domain,path,cb){if(this.idx[domain]){if(path){delete this.idx[domain][path]}else{delete this.idx[domain]}}return cb(null)};MemoryCookieStore.prototype.getAllCookies=function(cb){var cookies=[];var idx=this.idx;var domains=Object.keys(idx);domains.forEach(function(domain){var paths=Object.keys(idx[domain]);paths.forEach(function(path){var keys=Object.keys(idx[domain][path]);keys.forEach(function(key){if(key!==null){cookies.push(idx[domain][path][key])}})})});cookies.sort(function(a,b){return(a.creationIndex||0)-(b.creationIndex||0)});cb(null,cookies)}},{"./pathMatch":549,"./permuteDomain":550,"./store":552,util:undefined}],549:[function(require,module,exports){"use strict";function pathMatch(reqPath,cookiePath){if(cookiePath===reqPath){return true}var idx=reqPath.indexOf(cookiePath);if(idx===0){if(cookiePath.substr(-1)==="/"){return true}if(reqPath.substr(cookiePath.length,1)==="/"){return true}}return false}exports.pathMatch=pathMatch},{}],550:[function(require,module,exports){"use strict";var pubsuffix=require("./pubsuffix");function permuteDomain(domain){var pubSuf=pubsuffix.getPublicSuffix(domain);if(!pubSuf){return null}if(pubSuf==domain){return[domain]}var prefix=domain.slice(0,-(pubSuf.length+1));var parts=prefix.split(".").reverse();var cur=pubSuf;var permutations=[cur];while(parts.length){cur=parts.shift()+"."+cur;permutations.push(cur)}return permutations}exports.permuteDomain=permuteDomain},{"./pubsuffix":551}],551:[function(require,module,exports){"use strict";var punycode=require("punycode");module.exports.getPublicSuffix=function getPublicSuffix(domain){if(!domain){return null}if(domain.match(/^\./)){return null}var asciiDomain=punycode.toASCII(domain);var converted=false;if(asciiDomain!==domain){domain=asciiDomain;converted=true}if(index[domain]){return null}domain=domain.toLowerCase();var parts=domain.split(".").reverse();var suffix="";var suffixLen=0;for(var i=0;i<parts.length;i++){var part=parts[i];var starstr="*"+suffix;var partstr=part+suffix;if(index[starstr]){suffixLen=i+1;if(index[partstr]===false){suffixLen--}}else if(index[partstr]){suffixLen=i+1}suffix="."+partstr}if(index["*"+suffix]){return null}suffixLen=suffixLen||1;if(parts.length>suffixLen){var publicSuffix=parts.slice(0,suffixLen+1).reverse().join(".");return converted?punycode.toUnicode(publicSuffix):publicSuffix}return null};var index=module.exports.index=Object.freeze({ac:true,"com.ac":true,"edu.ac":true,"gov.ac":true,"net.ac":true,"mil.ac":true,"org.ac":true,ad:true,"nom.ad":true,ae:true,"co.ae":true,"net.ae":true,"org.ae":true,"sch.ae":true,"ac.ae":true,"gov.ae":true,"mil.ae":true,aero:true,"accident-investigation.aero":true,"accident-prevention.aero":true,"aerobatic.aero":true,"aeroclub.aero":true,"aerodrome.aero":true,"agents.aero":true,"aircraft.aero":true,"airline.aero":true,"airport.aero":true,"air-surveillance.aero":true,"airtraffic.aero":true,"air-traffic-control.aero":true,"ambulance.aero":true,"amusement.aero":true,"association.aero":true,"author.aero":true,"ballooning.aero":true,"broker.aero":true,"caa.aero":true,"cargo.aero":true,"catering.aero":true,"certification.aero":true,"championship.aero":true,"charter.aero":true,"civilaviation.aero":true,"club.aero":true,"conference.aero":true,"consultant.aero":true,"consulting.aero":true,"control.aero":true,"council.aero":true,"crew.aero":true,"design.aero":true,"dgca.aero":true,"educator.aero":true,"emergency.aero":true,"engine.aero":true,"engineer.aero":true,"entertainment.aero":true,"equipment.aero":true,"exchange.aero":true,"express.aero":true,"federation.aero":true,"flight.aero":true,"freight.aero":true,"fuel.aero":true,"gliding.aero":true,"government.aero":true,"groundhandling.aero":true,"group.aero":true,"hanggliding.aero":true,"homebuilt.aero":true,"insurance.aero":true,"journal.aero":true,"journalist.aero":true,"leasing.aero":true,"logistics.aero":true,"magazine.aero":true,"maintenance.aero":true,"media.aero":true,"microlight.aero":true,"modelling.aero":true,"navigation.aero":true,"parachuting.aero":true,"paragliding.aero":true,"passenger-association.aero":true,"pilot.aero":true,"press.aero":true,"production.aero":true,"recreation.aero":true,"repbody.aero":true,"res.aero":true,"research.aero":true,"rotorcraft.aero":true,"safety.aero":true,"scientist.aero":true,"services.aero":true,"show.aero":true,"skydiving.aero":true,"software.aero":true,"student.aero":true,"trader.aero":true,"trading.aero":true,"trainer.aero":true,"union.aero":true,"workinggroup.aero":true,"works.aero":true,af:true,"gov.af":true,"com.af":true,"org.af":true,"net.af":true,"edu.af":true,ag:true,"com.ag":true,"org.ag":true,"net.ag":true,"co.ag":true,"nom.ag":true,ai:true,"off.ai":true,"com.ai":true,"net.ai":true,"org.ai":true,al:true,"com.al":true,"edu.al":true,"gov.al":true,"mil.al":true,"net.al":true,"org.al":true,am:true,ao:true,"ed.ao":true,"gv.ao":true,"og.ao":true,"co.ao":true,"pb.ao":true,"it.ao":true,aq:true,ar:true,"com.ar":true,"edu.ar":true,"gob.ar":true,"gov.ar":true,"int.ar":true,"mil.ar":true,"net.ar":true,"org.ar":true,"tur.ar":true,arpa:true,"e164.arpa":true,"in-addr.arpa":true,"ip6.arpa":true,"iris.arpa":true,"uri.arpa":true,"urn.arpa":true,as:true,"gov.as":true,asia:true,at:true,"ac.at":true,"co.at":true,"gv.at":true,"or.at":true,au:true,"com.au":true,"net.au":true,"org.au":true,"edu.au":true,"gov.au":true,"asn.au":true,"id.au":true,"info.au":true,"conf.au":true,"oz.au":true,"act.au":true,"nsw.au":true,"nt.au":true,"qld.au":true,"sa.au":true,"tas.au":true,"vic.au":true,"wa.au":true,"act.edu.au":true,"nsw.edu.au":true,"nt.edu.au":true,"qld.edu.au":true,"sa.edu.au":true,"tas.edu.au":true,"vic.edu.au":true,"wa.edu.au":true,"qld.gov.au":true,"sa.gov.au":true,"tas.gov.au":true,"vic.gov.au":true,"wa.gov.au":true,aw:true,"com.aw":true,ax:true,az:true,"com.az":true,"net.az":true,"int.az":true,"gov.az":true,"org.az":true,"edu.az":true,"info.az":true,"pp.az":true,"mil.az":true,"name.az":true,"pro.az":true,"biz.az":true,ba:true,"com.ba":true,"edu.ba":true,"gov.ba":true,"mil.ba":true,"net.ba":true,"org.ba":true,bb:true,"biz.bb":true,"co.bb":true,"com.bb":true,"edu.bb":true,"gov.bb":true,"info.bb":true,"net.bb":true,"org.bb":true,"store.bb":true,"tv.bb":true,"*.bd":true,be:true,"ac.be":true,bf:true,"gov.bf":true,bg:true,"a.bg":true,"b.bg":true,"c.bg":true,"d.bg":true,"e.bg":true,"f.bg":true,"g.bg":true,"h.bg":true,"i.bg":true,"j.bg":true,"k.bg":true,"l.bg":true,"m.bg":true,"n.bg":true,"o.bg":true,"p.bg":true,"q.bg":true,"r.bg":true,"s.bg":true,"t.bg":true,"u.bg":true,"v.bg":true,"w.bg":true,"x.bg":true,"y.bg":true,"z.bg":true,"0.bg":true,"1.bg":true,"2.bg":true,"3.bg":true,"4.bg":true,"5.bg":true,"6.bg":true,"7.bg":true,"8.bg":true,"9.bg":true,bh:true,"com.bh":true,"edu.bh":true,"net.bh":true,"org.bh":true,"gov.bh":true,bi:true,"co.bi":true,"com.bi":true,"edu.bi":true,"or.bi":true,"org.bi":true,biz:true,bj:true,"asso.bj":true,"barreau.bj":true,"gouv.bj":true,bm:true,"com.bm":true,"edu.bm":true,"gov.bm":true,"net.bm":true,"org.bm":true,"*.bn":true,bo:true,"com.bo":true,"edu.bo":true,"gov.bo":true,"gob.bo":true,"int.bo":true,"org.bo":true,"net.bo":true,"mil.bo":true,"tv.bo":true,br:true,"adm.br":true,"adv.br":true,"agr.br":true,"am.br":true,"arq.br":true,"art.br":true,"ato.br":true,"b.br":true,"bio.br":true,"blog.br":true,"bmd.br":true,"cim.br":true,"cng.br":true,"cnt.br":true,"com.br":true,"coop.br":true,"ecn.br":true,"eco.br":true,"edu.br":true,"emp.br":true,"eng.br":true,"esp.br":true,"etc.br":true,"eti.br":true,"far.br":true,"flog.br":true,"fm.br":true,"fnd.br":true,"fot.br":true,"fst.br":true,"g12.br":true,"ggf.br":true,"gov.br":true,"imb.br":true,"ind.br":true,"inf.br":true,"jor.br":true,"jus.br":true,"leg.br":true,"lel.br":true,"mat.br":true,"med.br":true,"mil.br":true,"mp.br":true,"mus.br":true,"net.br":true,"*.nom.br":true,"not.br":true,"ntr.br":true,"odo.br":true,"org.br":true,"ppg.br":true,"pro.br":true,"psc.br":true,"psi.br":true,"qsl.br":true,"radio.br":true,"rec.br":true,"slg.br":true,"srv.br":true,"taxi.br":true,"teo.br":true,"tmp.br":true,"trd.br":true,"tur.br":true,"tv.br":true,"vet.br":true,"vlog.br":true,"wiki.br":true,"zlg.br":true,bs:true,"com.bs":true,"net.bs":true,"org.bs":true,"edu.bs":true,"gov.bs":true,bt:true,"com.bt":true,"edu.bt":true,"gov.bt":true,"net.bt":true,"org.bt":true,bv:true,bw:true,"co.bw":true,"org.bw":true,by:true,"gov.by":true,"mil.by":true,"com.by":true,"of.by":true,bz:true,"com.bz":true,"net.bz":true,"org.bz":true,"edu.bz":true,"gov.bz":true,ca:true,"ab.ca":true,"bc.ca":true,"mb.ca":true,"nb.ca":true,"nf.ca":true,"nl.ca":true,"ns.ca":true,"nt.ca":true,"nu.ca":true,"on.ca":true,"pe.ca":true,"qc.ca":true,"sk.ca":true,"yk.ca":true,"gc.ca":true,cat:true,cc:true,cd:true,"gov.cd":true,cf:true,cg:true,ch:true,ci:true,"org.ci":true,"or.ci":true,"com.ci":true,"co.ci":true,"edu.ci":true,"ed.ci":true,"ac.ci":true,"net.ci":true,"go.ci":true,"asso.ci":true,"xn--aroport-bya.ci":true,"int.ci":true,"presse.ci":true,"md.ci":true,"gouv.ci":true,"*.ck":true,"www.ck":false,cl:true,"gov.cl":true,"gob.cl":true,"co.cl":true,"mil.cl":true,cm:true,"co.cm":true,"com.cm":true,"gov.cm":true,"net.cm":true,cn:true,"ac.cn":true,"com.cn":true,"edu.cn":true,"gov.cn":true,"net.cn":true,"org.cn":true,"mil.cn":true,"xn--55qx5d.cn":true,"xn--io0a7i.cn":true,"xn--od0alg.cn":true,"ah.cn":true,"bj.cn":true,"cq.cn":true,"fj.cn":true,"gd.cn":true,"gs.cn":true,"gz.cn":true,"gx.cn":true,"ha.cn":true,"hb.cn":true,"he.cn":true,"hi.cn":true,"hl.cn":true,"hn.cn":true,"jl.cn":true,"js.cn":true,"jx.cn":true,"ln.cn":true,"nm.cn":true,"nx.cn":true,"qh.cn":true,"sc.cn":true,"sd.cn":true,"sh.cn":true,"sn.cn":true,"sx.cn":true,"tj.cn":true,"xj.cn":true,"xz.cn":true,"yn.cn":true,"zj.cn":true,"hk.cn":true,"mo.cn":true,"tw.cn":true,co:true,"arts.co":true,"com.co":true,"edu.co":true,"firm.co":true,"gov.co":true,"info.co":true,"int.co":true,"mil.co":true,"net.co":true,"nom.co":true,"org.co":true,"rec.co":true,"web.co":true,com:true,coop:true,cr:true,"ac.cr":true,"co.cr":true,"ed.cr":true,"fi.cr":true,"go.cr":true,"or.cr":true,"sa.cr":true,cu:true,"com.cu":true,"edu.cu":true,"org.cu":true,"net.cu":true,"gov.cu":true,"inf.cu":true,cv:true,cw:true,"com.cw":true,"edu.cw":true,"net.cw":true,"org.cw":true,cx:true,"gov.cx":true,cy:true,"ac.cy":true,"biz.cy":true,"com.cy":true,"ekloges.cy":true,"gov.cy":true,"ltd.cy":true,"name.cy":true,"net.cy":true,"org.cy":true,"parliament.cy":true,"press.cy":true,"pro.cy":true,"tm.cy":true,cz:true,de:true,dj:true,dk:true,dm:true,"com.dm":true,"net.dm":true,"org.dm":true,"edu.dm":true,"gov.dm":true,do:true,"art.do":true,"com.do":true,"edu.do":true,"gob.do":true,"gov.do":true,"mil.do":true,"net.do":true,"org.do":true,"sld.do":true,"web.do":true,dz:true,"com.dz":true,"org.dz":true,"net.dz":true,"gov.dz":true,"edu.dz":true,"asso.dz":true,"pol.dz":true,"art.dz":true,ec:true,"com.ec":true,"info.ec":true,"net.ec":true,"fin.ec":true,"k12.ec":true,"med.ec":true,"pro.ec":true,"org.ec":true,"edu.ec":true,"gov.ec":true,"gob.ec":true,"mil.ec":true,edu:true,ee:true,"edu.ee":true,"gov.ee":true,"riik.ee":true,"lib.ee":true,"med.ee":true,"com.ee":true,"pri.ee":true,"aip.ee":true,"org.ee":true,"fie.ee":true,eg:true,"com.eg":true,"edu.eg":true,"eun.eg":true,"gov.eg":true,"mil.eg":true,"name.eg":true,"net.eg":true,"org.eg":true,"sci.eg":true,"*.er":true,es:true,"com.es":true,"nom.es":true,"org.es":true,"gob.es":true,"edu.es":true,et:true,"com.et":true,"gov.et":true,"org.et":true,"edu.et":true,"biz.et":true,"name.et":true,"info.et":true,"net.et":true,eu:true,fi:true,"aland.fi":true,"*.fj":true,"*.fk":true,fm:true,fo:true,fr:true,"com.fr":true,"asso.fr":true,"nom.fr":true,"prd.fr":true,"presse.fr":true,"tm.fr":true,"aeroport.fr":true,"assedic.fr":true,"avocat.fr":true,"avoues.fr":true,"cci.fr":true,"chambagri.fr":true,"chirurgiens-dentistes.fr":true,"experts-comptables.fr":true,"geometre-expert.fr":true,"gouv.fr":true,"greta.fr":true,"huissier-justice.fr":true,"medecin.fr":true,"notaires.fr":true,"pharmacien.fr":true,"port.fr":true,"veterinaire.fr":true,ga:true,gb:true,gd:true,ge:true,"com.ge":true,"edu.ge":true,"gov.ge":true,"org.ge":true,"mil.ge":true,"net.ge":true,"pvt.ge":true,gf:true,gg:true,"co.gg":true,"net.gg":true,"org.gg":true,gh:true,"com.gh":true,"edu.gh":true,"gov.gh":true,"org.gh":true,"mil.gh":true,gi:true,"com.gi":true,"ltd.gi":true,"gov.gi":true,"mod.gi":true,"edu.gi":true,"org.gi":true,gl:true,"co.gl":true,"com.gl":true,"edu.gl":true,"net.gl":true,"org.gl":true,gm:true,gn:true,"ac.gn":true,"com.gn":true,"edu.gn":true,"gov.gn":true,"org.gn":true,"net.gn":true,gov:true,gp:true,"com.gp":true,"net.gp":true,"mobi.gp":true,"edu.gp":true,"org.gp":true,"asso.gp":true,gq:true,gr:true,"com.gr":true,"edu.gr":true,"net.gr":true,"org.gr":true,"gov.gr":true,gs:true,gt:true,"com.gt":true,"edu.gt":true,"gob.gt":true,"ind.gt":true,"mil.gt":true,"net.gt":true,"org.gt":true,"*.gu":true,gw:true,gy:true,"co.gy":true,"com.gy":true,"edu.gy":true,"gov.gy":true,"net.gy":true,"org.gy":true,hk:true,"com.hk":true,"edu.hk":true,"gov.hk":true,"idv.hk":true,"net.hk":true,"org.hk":true,"xn--55qx5d.hk":true,"xn--wcvs22d.hk":true,"xn--lcvr32d.hk":true,"xn--mxtq1m.hk":true,"xn--gmqw5a.hk":true,"xn--ciqpn.hk":true,"xn--gmq050i.hk":true,"xn--zf0avx.hk":true,"xn--io0a7i.hk":true,"xn--mk0axi.hk":true,"xn--od0alg.hk":true,"xn--od0aq3b.hk":true,"xn--tn0ag.hk":true,"xn--uc0atv.hk":true,"xn--uc0ay4a.hk":true,hm:true,hn:true,"com.hn":true,"edu.hn":true,"org.hn":true,"net.hn":true,"mil.hn":true,"gob.hn":true,hr:true,"iz.hr":true,"from.hr":true,"name.hr":true,"com.hr":true,ht:true,"com.ht":true,"shop.ht":true,"firm.ht":true,"info.ht":true,"adult.ht":true,"net.ht":true,"pro.ht":true,"org.ht":true,"med.ht":true,"art.ht":true,"coop.ht":true,"pol.ht":true,"asso.ht":true,"edu.ht":true,"rel.ht":true,"gouv.ht":true,"perso.ht":true,hu:true,"co.hu":true,"info.hu":true,"org.hu":true,"priv.hu":true,"sport.hu":true,"tm.hu":true,"2000.hu":true,"agrar.hu":true,"bolt.hu":true,"casino.hu":true,"city.hu":true,"erotica.hu":true,"erotika.hu":true,"film.hu":true,"forum.hu":true,"games.hu":true,"hotel.hu":true,"ingatlan.hu":true,"jogasz.hu":true,"konyvelo.hu":true,"lakas.hu":true,"media.hu":true,"news.hu":true,"reklam.hu":true,"sex.hu":true,"shop.hu":true,"suli.hu":true,"szex.hu":true,"tozsde.hu":true,"utazas.hu":true,"video.hu":true,id:true,"ac.id":true,"biz.id":true,"co.id":true,"desa.id":true,"go.id":true,"mil.id":true,"my.id":true,"net.id":true,"or.id":true,"sch.id":true,"web.id":true,ie:true,"gov.ie":true,il:true,"ac.il":true,"co.il":true,"gov.il":true,"idf.il":true,"k12.il":true,"muni.il":true,"net.il":true,"org.il":true,im:true,"ac.im":true,"co.im":true,"com.im":true,"ltd.co.im":true,"net.im":true,"org.im":true,"plc.co.im":true,"tt.im":true,"tv.im":true,in:true,"co.in":true,"firm.in":true,"net.in":true,"org.in":true,"gen.in":true,"ind.in":true,"nic.in":true,"ac.in":true,"edu.in":true,"res.in":true,"gov.in":true,"mil.in":true,info:true,int:true,"eu.int":true,io:true,"com.io":true,iq:true,"gov.iq":true,"edu.iq":true,"mil.iq":true,"com.iq":true,"org.iq":true,"net.iq":true,ir:true,"ac.ir":true,"co.ir":true,"gov.ir":true,"id.ir":true,"net.ir":true,"org.ir":true,"sch.ir":true,"xn--mgba3a4f16a.ir":true,"xn--mgba3a4fra.ir":true,is:true,"net.is":true,"com.is":true,"edu.is":true,"gov.is":true,"org.is":true,"int.is":true,it:true,"gov.it":true,"edu.it":true,"abr.it":true,"abruzzo.it":true,"aosta-valley.it":true,"aostavalley.it":true,"bas.it":true,"basilicata.it":true,"cal.it":true,"calabria.it":true,"cam.it":true,"campania.it":true,"emilia-romagna.it":true,"emiliaromagna.it":true,"emr.it":true,"friuli-v-giulia.it":true,"friuli-ve-giulia.it":true,"friuli-vegiulia.it":true,"friuli-venezia-giulia.it":true,"friuli-veneziagiulia.it":true,"friuli-vgiulia.it":true,"friuliv-giulia.it":true,"friulive-giulia.it":true,"friulivegiulia.it":true,"friulivenezia-giulia.it":true,"friuliveneziagiulia.it":true,"friulivgiulia.it":true,"fvg.it":true,"laz.it":true,"lazio.it":true,"lig.it":true,"liguria.it":true,"lom.it":true,"lombardia.it":true,"lombardy.it":true,"lucania.it":true,"mar.it":true,"marche.it":true,"mol.it":true,"molise.it":true,"piedmont.it":true,"piemonte.it":true,"pmn.it":true,"pug.it":true,"puglia.it":true,"sar.it":true,"sardegna.it":true,"sardinia.it":true,"sic.it":true,"sicilia.it":true,"sicily.it":true,"taa.it":true,"tos.it":true,"toscana.it":true,"trentino-a-adige.it":true,"trentino-aadige.it":true,"trentino-alto-adige.it":true,"trentino-altoadige.it":true,"trentino-s-tirol.it":true,"trentino-stirol.it":true,"trentino-sud-tirol.it":true,"trentino-sudtirol.it":true,"trentino-sued-tirol.it":true,"trentino-suedtirol.it":true,"trentinoa-adige.it":true,"trentinoaadige.it":true,"trentinoalto-adige.it":true,"trentinoaltoadige.it":true,"trentinos-tirol.it":true,"trentinostirol.it":true,"trentinosud-tirol.it":true,"trentinosudtirol.it":true,"trentinosued-tirol.it":true,"trentinosuedtirol.it":true,"tuscany.it":true,"umb.it":true,"umbria.it":true,"val-d-aosta.it":true,"val-daosta.it":true,"vald-aosta.it":true,"valdaosta.it":true,"valle-aosta.it":true,"valle-d-aosta.it":true,"valle-daosta.it":true,"valleaosta.it":true,"valled-aosta.it":true,"valledaosta.it":true,"vallee-aoste.it":true,"valleeaoste.it":true,"vao.it":true,"vda.it":true,"ven.it":true,"veneto.it":true,"ag.it":true,"agrigento.it":true,"al.it":true,"alessandria.it":true,"alto-adige.it":true,"altoadige.it":true,"an.it":true,"ancona.it":true,"andria-barletta-trani.it":true,"andria-trani-barletta.it":true,"andriabarlettatrani.it":true,"andriatranibarletta.it":true,"ao.it":true,"aosta.it":true,"aoste.it":true,"ap.it":true,"aq.it":true,"aquila.it":true,"ar.it":true,"arezzo.it":true,"ascoli-piceno.it":true,"ascolipiceno.it":true,"asti.it":true,"at.it":true,"av.it":true,"avellino.it":true,"ba.it":true,"balsan.it":true,"bari.it":true,"barletta-trani-andria.it":true,"barlettatraniandria.it":true,"belluno.it":true,"benevento.it":true,"bergamo.it":true,"bg.it":true,"bi.it":true,"biella.it":true,"bl.it":true,"bn.it":true,"bo.it":true,"bologna.it":true,"bolzano.it":true,"bozen.it":true,"br.it":true,"brescia.it":true,"brindisi.it":true,"bs.it":true,"bt.it":true,"bz.it":true,"ca.it":true,"cagliari.it":true,"caltanissetta.it":true,"campidano-medio.it":true,"campidanomedio.it":true,"campobasso.it":true,"carbonia-iglesias.it":true,"carboniaiglesias.it":true,"carrara-massa.it":true,"carraramassa.it":true,"caserta.it":true,"catania.it":true,"catanzaro.it":true,"cb.it":true,"ce.it":true,"cesena-forli.it":true,"cesenaforli.it":true,"ch.it":true,"chieti.it":true,"ci.it":true,"cl.it":true,"cn.it":true,"co.it":true,"como.it":true,"cosenza.it":true,"cr.it":true,"cremona.it":true,"crotone.it":true,"cs.it":true,"ct.it":true,"cuneo.it":true,"cz.it":true,"dell-ogliastra.it":true,"dellogliastra.it":true,"en.it":true,"enna.it":true,"fc.it":true,"fe.it":true,"fermo.it":true,"ferrara.it":true,"fg.it":true,"fi.it":true,"firenze.it":true,"florence.it":true,"fm.it":true,"foggia.it":true,"forli-cesena.it":true,"forlicesena.it":true,"fr.it":true,"frosinone.it":true,"ge.it":true,"genoa.it":true,"genova.it":true,"go.it":true,"gorizia.it":true,"gr.it":true,"grosseto.it":true,"iglesias-carbonia.it":true,"iglesiascarbonia.it":true,"im.it":true,"imperia.it":true,"is.it":true,"isernia.it":true,"kr.it":true,"la-spezia.it":true,"laquila.it":true,"laspezia.it":true,"latina.it":true,"lc.it":true,"le.it":true,"lecce.it":true,"lecco.it":true,"li.it":true,"livorno.it":true,"lo.it":true,"lodi.it":true,"lt.it":true,"lu.it":true,"lucca.it":true,"macerata.it":true,"mantova.it":true,"massa-carrara.it":true,"massacarrara.it":true,"matera.it":true,"mb.it":true,"mc.it":true,"me.it":true,"medio-campidano.it":true,"mediocampidano.it":true,"messina.it":true,"mi.it":true,"milan.it":true,"milano.it":true,"mn.it":true,"mo.it":true,"modena.it":true,"monza-brianza.it":true,"monza-e-della-brianza.it":true,"monza.it":true,"monzabrianza.it":true,"monzaebrianza.it":true,"monzaedellabrianza.it":true,"ms.it":true,"mt.it":true,"na.it":true,"naples.it":true,"napoli.it":true,"no.it":true,"novara.it":true,"nu.it":true,"nuoro.it":true,"og.it":true,"ogliastra.it":true,"olbia-tempio.it":true,"olbiatempio.it":true,"or.it":true,"oristano.it":true,"ot.it":true,"pa.it":true,"padova.it":true,"padua.it":true,"palermo.it":true,"parma.it":true,"pavia.it":true,"pc.it":true,"pd.it":true,"pe.it":true,"perugia.it":true,"pesaro-urbino.it":true,"pesarourbino.it":true,"pescara.it":true,"pg.it":true,"pi.it":true,"piacenza.it":true,"pisa.it":true,"pistoia.it":true,"pn.it":true,"po.it":true,"pordenone.it":true,"potenza.it":true,"pr.it":true,"prato.it":true,"pt.it":true,"pu.it":true,"pv.it":true,"pz.it":true,"ra.it":true,"ragusa.it":true,"ravenna.it":true,"rc.it":true,"re.it":true,"reggio-calabria.it":true,"reggio-emilia.it":true,"reggiocalabria.it":true,"reggioemilia.it":true,"rg.it":true,"ri.it":true,"rieti.it":true,"rimini.it":true,"rm.it":true,"rn.it":true,"ro.it":true,"roma.it":true,"rome.it":true,"rovigo.it":true,"sa.it":true,"salerno.it":true,"sassari.it":true,"savona.it":true,"si.it":true,"siena.it":true,"siracusa.it":true,"so.it":true,"sondrio.it":true,"sp.it":true,"sr.it":true,"ss.it":true,"suedtirol.it":true,"sv.it":true,"ta.it":true,"taranto.it":true,"te.it":true,"tempio-olbia.it":true,"tempioolbia.it":true,"teramo.it":true,"terni.it":true,"tn.it":true,"to.it":true,"torino.it":true,"tp.it":true,"tr.it":true,"trani-andria-barletta.it":true,"trani-barletta-andria.it":true,"traniandriabarletta.it":true,"tranibarlettaandria.it":true,"trapani.it":true,"trentino.it":true,"trento.it":true,"treviso.it":true,"trieste.it":true,"ts.it":true,"turin.it":true,"tv.it":true,"ud.it":true,"udine.it":true,"urbino-pesaro.it":true,"urbinopesaro.it":true,"va.it":true,"varese.it":true,"vb.it":true,"vc.it":true,"ve.it":true,"venezia.it":true,"venice.it":true,"verbania.it":true,"vercelli.it":true,"verona.it":true,"vi.it":true,"vibo-valentia.it":true,"vibovalentia.it":true,"vicenza.it":true,"viterbo.it":true,"vr.it":true,"vs.it":true,"vt.it":true,"vv.it":true,je:true,"co.je":true,"net.je":true,"org.je":true,"*.jm":true,jo:true,"com.jo":true,"org.jo":true,"net.jo":true,"edu.jo":true,"sch.jo":true,"gov.jo":true,"mil.jo":true,"name.jo":true,jobs:true,jp:true,"ac.jp":true,"ad.jp":true,"co.jp":true,"ed.jp":true,"go.jp":true,"gr.jp":true,"lg.jp":true,"ne.jp":true,"or.jp":true,"aichi.jp":true,"akita.jp":true,"aomori.jp":true,"chiba.jp":true,"ehime.jp":true,"fukui.jp":true,"fukuoka.jp":true,"fukushima.jp":true,"gifu.jp":true,"gunma.jp":true,"hiroshima.jp":true,"hokkaido.jp":true,"hyogo.jp":true,"ibaraki.jp":true,"ishikawa.jp":true,"iwate.jp":true,"kagawa.jp":true,"kagoshima.jp":true,"kanagawa.jp":true,"kochi.jp":true,"kumamoto.jp":true,"kyoto.jp":true,"mie.jp":true,"miyagi.jp":true,"miyazaki.jp":true,"nagano.jp":true,"nagasaki.jp":true,"nara.jp":true,"niigata.jp":true,"oita.jp":true,"okayama.jp":true,"okinawa.jp":true,"osaka.jp":true,"saga.jp":true,"saitama.jp":true,"shiga.jp":true,"shimane.jp":true,"shizuoka.jp":true,"tochigi.jp":true,"tokushima.jp":true,"tokyo.jp":true,"tottori.jp":true,"toyama.jp":true,"wakayama.jp":true,"yamagata.jp":true,"yamaguchi.jp":true,"yamanashi.jp":true,"xn--4pvxs.jp":true,"xn--vgu402c.jp":true,"xn--c3s14m.jp":true,"xn--f6qx53a.jp":true,"xn--8pvr4u.jp":true,"xn--uist22h.jp":true,"xn--djrs72d6uy.jp":true,"xn--mkru45i.jp":true,"xn--0trq7p7nn.jp":true,"xn--8ltr62k.jp":true,"xn--2m4a15e.jp":true,"xn--efvn9s.jp":true,"xn--32vp30h.jp":true,"xn--4it797k.jp":true,"xn--1lqs71d.jp":true,"xn--5rtp49c.jp":true,"xn--5js045d.jp":true,"xn--ehqz56n.jp":true,"xn--1lqs03n.jp":true,"xn--qqqt11m.jp":true,"xn--kbrq7o.jp":true,"xn--pssu33l.jp":true,"xn--ntsq17g.jp":true,"xn--uisz3g.jp":true,"xn--6btw5a.jp":true,"xn--1ctwo.jp":true,"xn--6orx2r.jp":true,"xn--rht61e.jp":true,"xn--rht27z.jp":true,"xn--djty4k.jp":true,"xn--nit225k.jp":true,"xn--rht3d.jp":true,"xn--klty5x.jp":true,"xn--kltx9a.jp":true,"xn--kltp7d.jp":true,"xn--uuwu58a.jp":true,"xn--zbx025d.jp":true,"xn--ntso0iqx3a.jp":true,"xn--elqq16h.jp":true,"xn--4it168d.jp":true,"xn--klt787d.jp":true,"xn--rny31h.jp":true,"xn--7t0a264c.jp":true,"xn--5rtq34k.jp":true,"xn--k7yn95e.jp":true,"xn--tor131o.jp":true,"xn--d5qv7z876c.jp":true,"*.kawasaki.jp":true,"*.kitakyushu.jp":true,"*.kobe.jp":true,"*.nagoya.jp":true,"*.sapporo.jp":true,"*.sendai.jp":true,"*.yokohama.jp":true,"city.kawasaki.jp":false,"city.kitakyushu.jp":false,"city.kobe.jp":false,"city.nagoya.jp":false,"city.sapporo.jp":false,"city.sendai.jp":false,"city.yokohama.jp":false,"aisai.aichi.jp":true,"ama.aichi.jp":true,"anjo.aichi.jp":true,"asuke.aichi.jp":true,"chiryu.aichi.jp":true,"chita.aichi.jp":true,"fuso.aichi.jp":true,"gamagori.aichi.jp":true,"handa.aichi.jp":true,"hazu.aichi.jp":true,"hekinan.aichi.jp":true,"higashiura.aichi.jp":true,"ichinomiya.aichi.jp":true,"inazawa.aichi.jp":true,"inuyama.aichi.jp":true,"isshiki.aichi.jp":true,"iwakura.aichi.jp":true,"kanie.aichi.jp":true,"kariya.aichi.jp":true,"kasugai.aichi.jp":true,"kira.aichi.jp":true,"kiyosu.aichi.jp":true,"komaki.aichi.jp":true,"konan.aichi.jp":true,"kota.aichi.jp":true,"mihama.aichi.jp":true,"miyoshi.aichi.jp":true,"nishio.aichi.jp":true,"nisshin.aichi.jp":true,"obu.aichi.jp":true,"oguchi.aichi.jp":true,"oharu.aichi.jp":true,"okazaki.aichi.jp":true,"owariasahi.aichi.jp":true,"seto.aichi.jp":true,"shikatsu.aichi.jp":true,"shinshiro.aichi.jp":true,"shitara.aichi.jp":true,"tahara.aichi.jp":true,"takahama.aichi.jp":true,"tobishima.aichi.jp":true,"toei.aichi.jp":true,"togo.aichi.jp":true,"tokai.aichi.jp":true,"tokoname.aichi.jp":true,"toyoake.aichi.jp":true,"toyohashi.aichi.jp":true,"toyokawa.aichi.jp":true,"toyone.aichi.jp":true,"toyota.aichi.jp":true,"tsushima.aichi.jp":true,"yatomi.aichi.jp":true,"akita.akita.jp":true,"daisen.akita.jp":true,"fujisato.akita.jp":true,"gojome.akita.jp":true,"hachirogata.akita.jp":true,"happou.akita.jp":true,"higashinaruse.akita.jp":true,"honjo.akita.jp":true,"honjyo.akita.jp":true,"ikawa.akita.jp":true,"kamikoani.akita.jp":true,"kamioka.akita.jp":true,"katagami.akita.jp":true,"kazuno.akita.jp":true,"kitaakita.akita.jp":true,"kosaka.akita.jp":true,"kyowa.akita.jp":true,"misato.akita.jp":true,"mitane.akita.jp":true,"moriyoshi.akita.jp":true,"nikaho.akita.jp":true,"noshiro.akita.jp":true,"odate.akita.jp":true,"oga.akita.jp":true,"ogata.akita.jp":true,"semboku.akita.jp":true,"yokote.akita.jp":true,"yurihonjo.akita.jp":true,"aomori.aomori.jp":true,"gonohe.aomori.jp":true,"hachinohe.aomori.jp":true,"hashikami.aomori.jp":true,"hiranai.aomori.jp":true,"hirosaki.aomori.jp":true,"itayanagi.aomori.jp":true,"kuroishi.aomori.jp":true,"misawa.aomori.jp":true,"mutsu.aomori.jp":true,"nakadomari.aomori.jp":true,"noheji.aomori.jp":true,"oirase.aomori.jp":true,"owani.aomori.jp":true,"rokunohe.aomori.jp":true,"sannohe.aomori.jp":true,"shichinohe.aomori.jp":true,"shingo.aomori.jp":true,"takko.aomori.jp":true,"towada.aomori.jp":true,"tsugaru.aomori.jp":true,"tsuruta.aomori.jp":true,"abiko.chiba.jp":true,"asahi.chiba.jp":true,"chonan.chiba.jp":true,"chosei.chiba.jp":true,"choshi.chiba.jp":true,"chuo.chiba.jp":true,"funabashi.chiba.jp":true,"futtsu.chiba.jp":true,"hanamigawa.chiba.jp":true,"ichihara.chiba.jp":true,"ichikawa.chiba.jp":true,"ichinomiya.chiba.jp":true,"inzai.chiba.jp":true,"isumi.chiba.jp":true,"kamagaya.chiba.jp":true,"kamogawa.chiba.jp":true,"kashiwa.chiba.jp":true,"katori.chiba.jp":true,"katsuura.chiba.jp":true,"kimitsu.chiba.jp":true,"kisarazu.chiba.jp":true,"kozaki.chiba.jp":true,"kujukuri.chiba.jp":true,"kyonan.chiba.jp":true,"matsudo.chiba.jp":true,"midori.chiba.jp":true,"mihama.chiba.jp":true,"minamiboso.chiba.jp":true,"mobara.chiba.jp":true,"mutsuzawa.chiba.jp":true,"nagara.chiba.jp":true,"nagareyama.chiba.jp":true,"narashino.chiba.jp":true,"narita.chiba.jp":true,"noda.chiba.jp":true,"oamishirasato.chiba.jp":true,"omigawa.chiba.jp":true,"onjuku.chiba.jp":true,"otaki.chiba.jp":true,"sakae.chiba.jp":true,"sakura.chiba.jp":true,"shimofusa.chiba.jp":true,"shirako.chiba.jp":true,"shiroi.chiba.jp":true,"shisui.chiba.jp":true,"sodegaura.chiba.jp":true,"sosa.chiba.jp":true,"tako.chiba.jp":true,"tateyama.chiba.jp":true,"togane.chiba.jp":true,"tohnosho.chiba.jp":true,"tomisato.chiba.jp":true,"urayasu.chiba.jp":true,"yachimata.chiba.jp":true,"yachiyo.chiba.jp":true,"yokaichiba.chiba.jp":true,"yokoshibahikari.chiba.jp":true,"yotsukaido.chiba.jp":true,"ainan.ehime.jp":true,"honai.ehime.jp":true,"ikata.ehime.jp":true,"imabari.ehime.jp":true,"iyo.ehime.jp":true,"kamijima.ehime.jp":true,"kihoku.ehime.jp":true,"kumakogen.ehime.jp":true,"masaki.ehime.jp":true,"matsuno.ehime.jp":true,"matsuyama.ehime.jp":true,"namikata.ehime.jp":true,"niihama.ehime.jp":true,"ozu.ehime.jp":true,"saijo.ehime.jp":true,"seiyo.ehime.jp":true,"shikokuchuo.ehime.jp":true,"tobe.ehime.jp":true,"toon.ehime.jp":true,"uchiko.ehime.jp":true,"uwajima.ehime.jp":true,"yawatahama.ehime.jp":true,"echizen.fukui.jp":true,"eiheiji.fukui.jp":true,"fukui.fukui.jp":true,"ikeda.fukui.jp":true,"katsuyama.fukui.jp":true,"mihama.fukui.jp":true,"minamiechizen.fukui.jp":true,"obama.fukui.jp":true,"ohi.fukui.jp":true,"ono.fukui.jp":true,"sabae.fukui.jp":true,"sakai.fukui.jp":true,"takahama.fukui.jp":true,"tsuruga.fukui.jp":true,"wakasa.fukui.jp":true,"ashiya.fukuoka.jp":true,"buzen.fukuoka.jp":true,"chikugo.fukuoka.jp":true,"chikuho.fukuoka.jp":true,"chikujo.fukuoka.jp":true,"chikushino.fukuoka.jp":true,"chikuzen.fukuoka.jp":true,"chuo.fukuoka.jp":true,"dazaifu.fukuoka.jp":true,"fukuchi.fukuoka.jp":true,"hakata.fukuoka.jp":true,"higashi.fukuoka.jp":true,"hirokawa.fukuoka.jp":true,"hisayama.fukuoka.jp":true,"iizuka.fukuoka.jp":true,"inatsuki.fukuoka.jp":true,"kaho.fukuoka.jp":true,"kasuga.fukuoka.jp":true,"kasuya.fukuoka.jp":true,"kawara.fukuoka.jp":true,"keisen.fukuoka.jp":true,"koga.fukuoka.jp":true,"kurate.fukuoka.jp":true,"kurogi.fukuoka.jp":true,"kurume.fukuoka.jp":true,"minami.fukuoka.jp":true,"miyako.fukuoka.jp":true,"miyama.fukuoka.jp":true,"miyawaka.fukuoka.jp":true,"mizumaki.fukuoka.jp":true,"munakata.fukuoka.jp":true,"nakagawa.fukuoka.jp":true,"nakama.fukuoka.jp":true,"nishi.fukuoka.jp":true,"nogata.fukuoka.jp":true,"ogori.fukuoka.jp":true,"okagaki.fukuoka.jp":true,"okawa.fukuoka.jp":true,"oki.fukuoka.jp":true,"omuta.fukuoka.jp":true,"onga.fukuoka.jp":true,"onojo.fukuoka.jp":true,"oto.fukuoka.jp":true,"saigawa.fukuoka.jp":true,"sasaguri.fukuoka.jp":true,"shingu.fukuoka.jp":true,"shinyoshitomi.fukuoka.jp":true,"shonai.fukuoka.jp":true,"soeda.fukuoka.jp":true,"sue.fukuoka.jp":true,"tachiarai.fukuoka.jp":true,"tagawa.fukuoka.jp":true,"takata.fukuoka.jp":true,"toho.fukuoka.jp":true,"toyotsu.fukuoka.jp":true,"tsuiki.fukuoka.jp":true,"ukiha.fukuoka.jp":true,"umi.fukuoka.jp":true,"usui.fukuoka.jp":true,"yamada.fukuoka.jp":true,"yame.fukuoka.jp":true,"yanagawa.fukuoka.jp":true,"yukuhashi.fukuoka.jp":true,"aizubange.fukushima.jp":true,"aizumisato.fukushima.jp":true,"aizuwakamatsu.fukushima.jp":true,"asakawa.fukushima.jp":true,"bandai.fukushima.jp":true,"date.fukushima.jp":true,"fukushima.fukushima.jp":true,"furudono.fukushima.jp":true,"futaba.fukushima.jp":true,"hanawa.fukushima.jp":true,"higashi.fukushima.jp":true,"hirata.fukushima.jp":true,"hirono.fukushima.jp":true,"iitate.fukushima.jp":true,"inawashiro.fukushima.jp":true,"ishikawa.fukushima.jp":true,"iwaki.fukushima.jp":true,"izumizaki.fukushima.jp":true,"kagamiishi.fukushima.jp":true,"kaneyama.fukushima.jp":true,"kawamata.fukushima.jp":true,"kitakata.fukushima.jp":true,"kitashiobara.fukushima.jp":true,"koori.fukushima.jp":true,"koriyama.fukushima.jp":true,"kunimi.fukushima.jp":true,"miharu.fukushima.jp":true,"mishima.fukushima.jp":true,"namie.fukushima.jp":true,"nango.fukushima.jp":true,"nishiaizu.fukushima.jp":true,"nishigo.fukushima.jp":true,"okuma.fukushima.jp":true,"omotego.fukushima.jp":true,"ono.fukushima.jp":true,"otama.fukushima.jp":true,"samegawa.fukushima.jp":true,"shimogo.fukushima.jp":true,"shirakawa.fukushima.jp":true,"showa.fukushima.jp":true,"soma.fukushima.jp":true,"sukagawa.fukushima.jp":true,"taishin.fukushima.jp":true,"tamakawa.fukushima.jp":true,"tanagura.fukushima.jp":true,"tenei.fukushima.jp":true,"yabuki.fukushima.jp":true,"yamato.fukushima.jp":true,"yamatsuri.fukushima.jp":true,"yanaizu.fukushima.jp":true,"yugawa.fukushima.jp":true,"anpachi.gifu.jp":true,"ena.gifu.jp":true,"gifu.gifu.jp":true,"ginan.gifu.jp":true,"godo.gifu.jp":true,"gujo.gifu.jp":true,"hashima.gifu.jp":true,"hichiso.gifu.jp":true,"hida.gifu.jp":true,"higashishirakawa.gifu.jp":true,"ibigawa.gifu.jp":true,"ikeda.gifu.jp":true,"kakamigahara.gifu.jp":true,"kani.gifu.jp":true,"kasahara.gifu.jp":true,"kasamatsu.gifu.jp":true,"kawaue.gifu.jp":true,"kitagata.gifu.jp":true,"mino.gifu.jp":true,"minokamo.gifu.jp":true,"mitake.gifu.jp":true,"mizunami.gifu.jp":true,"motosu.gifu.jp":true,"nakatsugawa.gifu.jp":true,"ogaki.gifu.jp":true,"sakahogi.gifu.jp":true,"seki.gifu.jp":true,"sekigahara.gifu.jp":true,"shirakawa.gifu.jp":true,"tajimi.gifu.jp":true,"takayama.gifu.jp":true,"tarui.gifu.jp":true,"toki.gifu.jp":true,"tomika.gifu.jp":true,"wanouchi.gifu.jp":true,"yamagata.gifu.jp":true,"yaotsu.gifu.jp":true,"yoro.gifu.jp":true,"annaka.gunma.jp":true,"chiyoda.gunma.jp":true,"fujioka.gunma.jp":true,"higashiagatsuma.gunma.jp":true,"isesaki.gunma.jp":true,"itakura.gunma.jp":true,"kanna.gunma.jp":true,"kanra.gunma.jp":true,"katashina.gunma.jp":true,"kawaba.gunma.jp":true,"kiryu.gunma.jp":true,"kusatsu.gunma.jp":true,"maebashi.gunma.jp":true,"meiwa.gunma.jp":true,"midori.gunma.jp":true,"minakami.gunma.jp":true,"naganohara.gunma.jp":true,"nakanojo.gunma.jp":true,"nanmoku.gunma.jp":true,"numata.gunma.jp":true,"oizumi.gunma.jp":true,"ora.gunma.jp":true,"ota.gunma.jp":true,"shibukawa.gunma.jp":true,"shimonita.gunma.jp":true,"shinto.gunma.jp":true,"showa.gunma.jp":true,"takasaki.gunma.jp":true,"takayama.gunma.jp":true,"tamamura.gunma.jp":true,"tatebayashi.gunma.jp":true,"tomioka.gunma.jp":true,"tsukiyono.gunma.jp":true,"tsumagoi.gunma.jp":true,"ueno.gunma.jp":true,"yoshioka.gunma.jp":true,"asaminami.hiroshima.jp":true,"daiwa.hiroshima.jp":true,"etajima.hiroshima.jp":true,"fuchu.hiroshima.jp":true,"fukuyama.hiroshima.jp":true,"hatsukaichi.hiroshima.jp":true,"higashihiroshima.hiroshima.jp":true,"hongo.hiroshima.jp":true,"jinsekikogen.hiroshima.jp":true,"kaita.hiroshima.jp":true,"kui.hiroshima.jp":true,"kumano.hiroshima.jp":true,"kure.hiroshima.jp":true,"mihara.hiroshima.jp":true,"miyoshi.hiroshima.jp":true,"naka.hiroshima.jp":true,"onomichi.hiroshima.jp":true,"osakikamijima.hiroshima.jp":true,"otake.hiroshima.jp":true,"saka.hiroshima.jp":true,"sera.hiroshima.jp":true,"seranishi.hiroshima.jp":true,"shinichi.hiroshima.jp":true,"shobara.hiroshima.jp":true,"takehara.hiroshima.jp":true,"abashiri.hokkaido.jp":true,"abira.hokkaido.jp":true,"aibetsu.hokkaido.jp":true,"akabira.hokkaido.jp":true,"akkeshi.hokkaido.jp":true,"asahikawa.hokkaido.jp":true,"ashibetsu.hokkaido.jp":true,"ashoro.hokkaido.jp":true,"assabu.hokkaido.jp":true,"atsuma.hokkaido.jp":true,"bibai.hokkaido.jp":true,"biei.hokkaido.jp":true,"bifuka.hokkaido.jp":true,"bihoro.hokkaido.jp":true,"biratori.hokkaido.jp":true,"chippubetsu.hokkaido.jp":true,"chitose.hokkaido.jp":true,"date.hokkaido.jp":true,"ebetsu.hokkaido.jp":true,"embetsu.hokkaido.jp":true,"eniwa.hokkaido.jp":true,"erimo.hokkaido.jp":true,"esan.hokkaido.jp":true,"esashi.hokkaido.jp":true,"fukagawa.hokkaido.jp":true,"fukushima.hokkaido.jp":true,"furano.hokkaido.jp":true,"furubira.hokkaido.jp":true,"haboro.hokkaido.jp":true,"hakodate.hokkaido.jp":true,"hamatonbetsu.hokkaido.jp":true,"hidaka.hokkaido.jp":true,"higashikagura.hokkaido.jp":true,"higashikawa.hokkaido.jp":true,"hiroo.hokkaido.jp":true,"hokuryu.hokkaido.jp":true,"hokuto.hokkaido.jp":true,"honbetsu.hokkaido.jp":true,"horokanai.hokkaido.jp":true,"horonobe.hokkaido.jp":true,"ikeda.hokkaido.jp":true,"imakane.hokkaido.jp":true,"ishikari.hokkaido.jp":true,"iwamizawa.hokkaido.jp":true,"iwanai.hokkaido.jp":true,"kamifurano.hokkaido.jp":true,"kamikawa.hokkaido.jp":true,"kamishihoro.hokkaido.jp":true,"kamisunagawa.hokkaido.jp":true,"kamoenai.hokkaido.jp":true,"kayabe.hokkaido.jp":true,"kembuchi.hokkaido.jp":true,"kikonai.hokkaido.jp":true,"kimobetsu.hokkaido.jp":true,"kitahiroshima.hokkaido.jp":true,"kitami.hokkaido.jp":true,"kiyosato.hokkaido.jp":true,"koshimizu.hokkaido.jp":true,"kunneppu.hokkaido.jp":true,"kuriyama.hokkaido.jp":true,"kuromatsunai.hokkaido.jp":true,"kushiro.hokkaido.jp":true,"kutchan.hokkaido.jp":true,"kyowa.hokkaido.jp":true,"mashike.hokkaido.jp":true,"matsumae.hokkaido.jp":true,"mikasa.hokkaido.jp":true,"minamifurano.hokkaido.jp":true,"mombetsu.hokkaido.jp":true,"moseushi.hokkaido.jp":true,"mukawa.hokkaido.jp":true,"muroran.hokkaido.jp":true,"naie.hokkaido.jp":true,"nakagawa.hokkaido.jp":true,"nakasatsunai.hokkaido.jp":true,"nakatombetsu.hokkaido.jp":true,"nanae.hokkaido.jp":true,"nanporo.hokkaido.jp":true,"nayoro.hokkaido.jp":true,"nemuro.hokkaido.jp":true,"niikappu.hokkaido.jp":true,"niki.hokkaido.jp":true,"nishiokoppe.hokkaido.jp":true,"noboribetsu.hokkaido.jp":true,"numata.hokkaido.jp":true,"obihiro.hokkaido.jp":true,"obira.hokkaido.jp":true,"oketo.hokkaido.jp":true,"okoppe.hokkaido.jp":true,"otaru.hokkaido.jp":true,"otobe.hokkaido.jp":true,"otofuke.hokkaido.jp":true,"otoineppu.hokkaido.jp":true,"oumu.hokkaido.jp":true,"ozora.hokkaido.jp":true,"pippu.hokkaido.jp":true,"rankoshi.hokkaido.jp":true,"rebun.hokkaido.jp":true,"rikubetsu.hokkaido.jp":true,"rishiri.hokkaido.jp":true,"rishirifuji.hokkaido.jp":true,"saroma.hokkaido.jp":true,"sarufutsu.hokkaido.jp":true,"shakotan.hokkaido.jp":true,"shari.hokkaido.jp":true,"shibecha.hokkaido.jp":true,"shibetsu.hokkaido.jp":true,"shikabe.hokkaido.jp":true,"shikaoi.hokkaido.jp":true,"shimamaki.hokkaido.jp":true,"shimizu.hokkaido.jp":true,"shimokawa.hokkaido.jp":true,"shinshinotsu.hokkaido.jp":true,"shintoku.hokkaido.jp":true,"shiranuka.hokkaido.jp":true,"shiraoi.hokkaido.jp":true,"shiriuchi.hokkaido.jp":true,"sobetsu.hokkaido.jp":true,"sunagawa.hokkaido.jp":true,"taiki.hokkaido.jp":true,"takasu.hokkaido.jp":true,"takikawa.hokkaido.jp":true,"takinoue.hokkaido.jp":true,"teshikaga.hokkaido.jp":true,"tobetsu.hokkaido.jp":true,"tohma.hokkaido.jp":true,"tomakomai.hokkaido.jp":true,"tomari.hokkaido.jp":true,"toya.hokkaido.jp":true,"toyako.hokkaido.jp":true,"toyotomi.hokkaido.jp":true,"toyoura.hokkaido.jp":true,"tsubetsu.hokkaido.jp":true,"tsukigata.hokkaido.jp":true,"urakawa.hokkaido.jp":true,"urausu.hokkaido.jp":true,"uryu.hokkaido.jp":true,"utashinai.hokkaido.jp":true,"wakkanai.hokkaido.jp":true,"wassamu.hokkaido.jp":true,"yakumo.hokkaido.jp":true,"yoichi.hokkaido.jp":true,"aioi.hyogo.jp":true,"akashi.hyogo.jp":true,"ako.hyogo.jp":true,"amagasaki.hyogo.jp":true,"aogaki.hyogo.jp":true,"asago.hyogo.jp":true,"ashiya.hyogo.jp":true,"awaji.hyogo.jp":true,"fukusaki.hyogo.jp":true,"goshiki.hyogo.jp":true,"harima.hyogo.jp":true,"himeji.hyogo.jp":true,"ichikawa.hyogo.jp":true,"inagawa.hyogo.jp":true,"itami.hyogo.jp":true,"kakogawa.hyogo.jp":true,"kamigori.hyogo.jp":true,"kamikawa.hyogo.jp":true,"kasai.hyogo.jp":true,"kasuga.hyogo.jp":true,"kawanishi.hyogo.jp":true,"miki.hyogo.jp":true,"minamiawaji.hyogo.jp":true,"nishinomiya.hyogo.jp":true,"nishiwaki.hyogo.jp":true,"ono.hyogo.jp":true,"sanda.hyogo.jp":true,"sannan.hyogo.jp":true,"sasayama.hyogo.jp":true,"sayo.hyogo.jp":true,"shingu.hyogo.jp":true,"shinonsen.hyogo.jp":true,"shiso.hyogo.jp":true,"sumoto.hyogo.jp":true,"taishi.hyogo.jp":true,"taka.hyogo.jp":true,"takarazuka.hyogo.jp":true,"takasago.hyogo.jp":true,"takino.hyogo.jp":true,"tamba.hyogo.jp":true,"tatsuno.hyogo.jp":true,"toyooka.hyogo.jp":true,"yabu.hyogo.jp":true,"yashiro.hyogo.jp":true,"yoka.hyogo.jp":true,"yokawa.hyogo.jp":true,"ami.ibaraki.jp":true,"asahi.ibaraki.jp":true,"bando.ibaraki.jp":true,"chikusei.ibaraki.jp":true,"daigo.ibaraki.jp":true,"fujishiro.ibaraki.jp":true,"hitachi.ibaraki.jp":true,"hitachinaka.ibaraki.jp":true,"hitachiomiya.ibaraki.jp":true,"hitachiota.ibaraki.jp":true,"ibaraki.ibaraki.jp":true,"ina.ibaraki.jp":true,"inashiki.ibaraki.jp":true,"itako.ibaraki.jp":true,"iwama.ibaraki.jp":true,"joso.ibaraki.jp":true,"kamisu.ibaraki.jp":true,"kasama.ibaraki.jp":true,"kashima.ibaraki.jp":true,"kasumigaura.ibaraki.jp":true,"koga.ibaraki.jp":true,"miho.ibaraki.jp":true,"mito.ibaraki.jp":true,"moriya.ibaraki.jp":true,"naka.ibaraki.jp":true,"namegata.ibaraki.jp":true,"oarai.ibaraki.jp":true,"ogawa.ibaraki.jp":true,"omitama.ibaraki.jp":true,"ryugasaki.ibaraki.jp":true,"sakai.ibaraki.jp":true,"sakuragawa.ibaraki.jp":true,"shimodate.ibaraki.jp":true,"shimotsuma.ibaraki.jp":true,"shirosato.ibaraki.jp":true,"sowa.ibaraki.jp":true,"suifu.ibaraki.jp":true,"takahagi.ibaraki.jp":true,"tamatsukuri.ibaraki.jp":true,"tokai.ibaraki.jp":true,"tomobe.ibaraki.jp":true,"tone.ibaraki.jp":true,"toride.ibaraki.jp":true,"tsuchiura.ibaraki.jp":true,"tsukuba.ibaraki.jp":true,"uchihara.ibaraki.jp":true,"ushiku.ibaraki.jp":true,"yachiyo.ibaraki.jp":true,"yamagata.ibaraki.jp":true,"yawara.ibaraki.jp":true,"yuki.ibaraki.jp":true,"anamizu.ishikawa.jp":true,"hakui.ishikawa.jp":true,"hakusan.ishikawa.jp":true,"kaga.ishikawa.jp":true,"kahoku.ishikawa.jp":true,"kanazawa.ishikawa.jp":true,"kawakita.ishikawa.jp":true,"komatsu.ishikawa.jp":true,"nakanoto.ishikawa.jp":true,"nanao.ishikawa.jp":true,"nomi.ishikawa.jp":true,"nonoichi.ishikawa.jp":true,"noto.ishikawa.jp":true,"shika.ishikawa.jp":true,"suzu.ishikawa.jp":true,"tsubata.ishikawa.jp":true,"tsurugi.ishikawa.jp":true,"uchinada.ishikawa.jp":true,"wajima.ishikawa.jp":true,"fudai.iwate.jp":true,"fujisawa.iwate.jp":true,"hanamaki.iwate.jp":true,"hiraizumi.iwate.jp":true,"hirono.iwate.jp":true,"ichinohe.iwate.jp":true,"ichinoseki.iwate.jp":true,"iwaizumi.iwate.jp":true,"iwate.iwate.jp":true,"joboji.iwate.jp":true,"kamaishi.iwate.jp":true,"kanegasaki.iwate.jp":true,"karumai.iwate.jp":true,"kawai.iwate.jp":true,"kitakami.iwate.jp":true,"kuji.iwate.jp":true,"kunohe.iwate.jp":true,"kuzumaki.iwate.jp":true,"miyako.iwate.jp":true,"mizusawa.iwate.jp":true,"morioka.iwate.jp":true,"ninohe.iwate.jp":true,"noda.iwate.jp":true,"ofunato.iwate.jp":true,"oshu.iwate.jp":true,"otsuchi.iwate.jp":true,"rikuzentakata.iwate.jp":true,"shiwa.iwate.jp":true,"shizukuishi.iwate.jp":true,"sumita.iwate.jp":true,"tanohata.iwate.jp":true,"tono.iwate.jp":true,"yahaba.iwate.jp":true,"yamada.iwate.jp":true,"ayagawa.kagawa.jp":true,"higashikagawa.kagawa.jp":true,"kanonji.kagawa.jp":true,"kotohira.kagawa.jp":true,"manno.kagawa.jp":true,"marugame.kagawa.jp":true,"mitoyo.kagawa.jp":true,"naoshima.kagawa.jp":true,"sanuki.kagawa.jp":true,"tadotsu.kagawa.jp":true,"takamatsu.kagawa.jp":true,"tonosho.kagawa.jp":true,"uchinomi.kagawa.jp":true,"utazu.kagawa.jp":true,"zentsuji.kagawa.jp":true,"akune.kagoshima.jp":true,"amami.kagoshima.jp":true,"hioki.kagoshima.jp":true,"isa.kagoshima.jp":true,"isen.kagoshima.jp":true,"izumi.kagoshima.jp":true,"kagoshima.kagoshima.jp":true,"kanoya.kagoshima.jp":true,"kawanabe.kagoshima.jp":true,"kinko.kagoshima.jp":true,"kouyama.kagoshima.jp":true,"makurazaki.kagoshima.jp":true,"matsumoto.kagoshima.jp":true,"minamitane.kagoshima.jp":true,"nakatane.kagoshima.jp":true,"nishinoomote.kagoshima.jp":true,"satsumasendai.kagoshima.jp":true,"soo.kagoshima.jp":true,"tarumizu.kagoshima.jp":true,"yusui.kagoshima.jp":true,"aikawa.kanagawa.jp":true,"atsugi.kanagawa.jp":true,"ayase.kanagawa.jp":true,"chigasaki.kanagawa.jp":true,"ebina.kanagawa.jp":true,"fujisawa.kanagawa.jp":true,"hadano.kanagawa.jp":true,"hakone.kanagawa.jp":true,"hiratsuka.kanagawa.jp":true,"isehara.kanagawa.jp":true,"kaisei.kanagawa.jp":true,"kamakura.kanagawa.jp":true,"kiyokawa.kanagawa.jp":true,"matsuda.kanagawa.jp":true,"minamiashigara.kanagawa.jp":true,"miura.kanagawa.jp":true,"nakai.kanagawa.jp":true,"ninomiya.kanagawa.jp":true,"odawara.kanagawa.jp":true,"oi.kanagawa.jp":true,"oiso.kanagawa.jp":true,"sagamihara.kanagawa.jp":true,"samukawa.kanagawa.jp":true,"tsukui.kanagawa.jp":true,"yamakita.kanagawa.jp":true,"yamato.kanagawa.jp":true,"yokosuka.kanagawa.jp":true,"yugawara.kanagawa.jp":true,"zama.kanagawa.jp":true,"zushi.kanagawa.jp":true,"aki.kochi.jp":true,"geisei.kochi.jp":true,"hidaka.kochi.jp":true,"higashitsuno.kochi.jp":true,"ino.kochi.jp":true,"kagami.kochi.jp":true,"kami.kochi.jp":true,"kitagawa.kochi.jp":true,"kochi.kochi.jp":true,"mihara.kochi.jp":true,"motoyama.kochi.jp":true,"muroto.kochi.jp":true,"nahari.kochi.jp":true,"nakamura.kochi.jp":true,"nankoku.kochi.jp":true,"nishitosa.kochi.jp":true,"niyodogawa.kochi.jp":true,"ochi.kochi.jp":true,"okawa.kochi.jp":true,"otoyo.kochi.jp":true,"otsuki.kochi.jp":true,"sakawa.kochi.jp":true,"sukumo.kochi.jp":true,"susaki.kochi.jp":true,"tosa.kochi.jp":true,"tosashimizu.kochi.jp":true,"toyo.kochi.jp":true,"tsuno.kochi.jp":true,"umaji.kochi.jp":true,"yasuda.kochi.jp":true,"yusuhara.kochi.jp":true,"amakusa.kumamoto.jp":true,"arao.kumamoto.jp":true,"aso.kumamoto.jp":true,"choyo.kumamoto.jp":true,"gyokuto.kumamoto.jp":true,"kamiamakusa.kumamoto.jp":true,"kikuchi.kumamoto.jp":true,"kumamoto.kumamoto.jp":true,"mashiki.kumamoto.jp":true,"mifune.kumamoto.jp":true,"minamata.kumamoto.jp":true,"minamioguni.kumamoto.jp":true,"nagasu.kumamoto.jp":true,"nishihara.kumamoto.jp":true,"oguni.kumamoto.jp":true,"ozu.kumamoto.jp":true,"sumoto.kumamoto.jp":true,"takamori.kumamoto.jp":true,"uki.kumamoto.jp":true,"uto.kumamoto.jp":true,"yamaga.kumamoto.jp":true,"yamato.kumamoto.jp":true,"yatsushiro.kumamoto.jp":true,"ayabe.kyoto.jp":true,"fukuchiyama.kyoto.jp":true,"higashiyama.kyoto.jp":true,"ide.kyoto.jp":true,"ine.kyoto.jp":true,"joyo.kyoto.jp":true,"kameoka.kyoto.jp":true,"kamo.kyoto.jp":true,"kita.kyoto.jp":true,"kizu.kyoto.jp":true,"kumiyama.kyoto.jp":true,"kyotamba.kyoto.jp":true,"kyotanabe.kyoto.jp":true,"kyotango.kyoto.jp":true,"maizuru.kyoto.jp":true,"minami.kyoto.jp":true,"minamiyamashiro.kyoto.jp":true,"miyazu.kyoto.jp":true,"muko.kyoto.jp":true,"nagaokakyo.kyoto.jp":true,"nakagyo.kyoto.jp":true,"nantan.kyoto.jp":true,"oyamazaki.kyoto.jp":true,"sakyo.kyoto.jp":true,"seika.kyoto.jp":true,"tanabe.kyoto.jp":true,"uji.kyoto.jp":true,"ujitawara.kyoto.jp":true,"wazuka.kyoto.jp":true,"yamashina.kyoto.jp":true,"yawata.kyoto.jp":true,"asahi.mie.jp":true,"inabe.mie.jp":true,"ise.mie.jp":true,"kameyama.mie.jp":true,"kawagoe.mie.jp":true,"kiho.mie.jp":true,"kisosaki.mie.jp":true,"kiwa.mie.jp":true,"komono.mie.jp":true,"kumano.mie.jp":true,"kuwana.mie.jp":true,"matsusaka.mie.jp":true,"meiwa.mie.jp":true,"mihama.mie.jp":true,"minamiise.mie.jp":true,"misugi.mie.jp":true,"miyama.mie.jp":true,"nabari.mie.jp":true,"shima.mie.jp":true,"suzuka.mie.jp":true,"tado.mie.jp":true,"taiki.mie.jp":true,"taki.mie.jp":true,"tamaki.mie.jp":true,"toba.mie.jp":true,"tsu.mie.jp":true,"udono.mie.jp":true,"ureshino.mie.jp":true,"watarai.mie.jp":true,"yokkaichi.mie.jp":true,"furukawa.miyagi.jp":true,"higashimatsushima.miyagi.jp":true,"ishinomaki.miyagi.jp":true,"iwanuma.miyagi.jp":true,"kakuda.miyagi.jp":true,"kami.miyagi.jp":true,"kawasaki.miyagi.jp":true,"marumori.miyagi.jp":true,"matsushima.miyagi.jp":true,"minamisanriku.miyagi.jp":true,"misato.miyagi.jp":true,"murata.miyagi.jp":true,"natori.miyagi.jp":true,"ogawara.miyagi.jp":true,"ohira.miyagi.jp":true,"onagawa.miyagi.jp":true,"osaki.miyagi.jp":true,"rifu.miyagi.jp":true,"semine.miyagi.jp":true,"shibata.miyagi.jp":true,"shichikashuku.miyagi.jp":true,"shikama.miyagi.jp":true,"shiogama.miyagi.jp":true,"shiroishi.miyagi.jp":true,"tagajo.miyagi.jp":true,"taiwa.miyagi.jp":true,"tome.miyagi.jp":true,"tomiya.miyagi.jp":true,"wakuya.miyagi.jp":true,"watari.miyagi.jp":true,"yamamoto.miyagi.jp":true,"zao.miyagi.jp":true,"aya.miyazaki.jp":true,"ebino.miyazaki.jp":true,"gokase.miyazaki.jp":true,"hyuga.miyazaki.jp":true,"kadogawa.miyazaki.jp":true,"kawaminami.miyazaki.jp":true,"kijo.miyazaki.jp":true,"kitagawa.miyazaki.jp":true,"kitakata.miyazaki.jp":true,"kitaura.miyazaki.jp":true,"kobayashi.miyazaki.jp":true,"kunitomi.miyazaki.jp":true,"kushima.miyazaki.jp":true,"mimata.miyazaki.jp":true,"miyakonojo.miyazaki.jp":true,"miyazaki.miyazaki.jp":true,"morotsuka.miyazaki.jp":true,"nichinan.miyazaki.jp":true,"nishimera.miyazaki.jp":true,"nobeoka.miyazaki.jp":true,"saito.miyazaki.jp":true,"shiiba.miyazaki.jp":true,"shintomi.miyazaki.jp":true,"takaharu.miyazaki.jp":true,"takanabe.miyazaki.jp":true,"takazaki.miyazaki.jp":true,"tsuno.miyazaki.jp":true,"achi.nagano.jp":true,"agematsu.nagano.jp":true,"anan.nagano.jp":true,"aoki.nagano.jp":true,"asahi.nagano.jp":true,"azumino.nagano.jp":true,"chikuhoku.nagano.jp":true,"chikuma.nagano.jp":true,"chino.nagano.jp":true,"fujimi.nagano.jp":true,"hakuba.nagano.jp":true,"hara.nagano.jp":true,"hiraya.nagano.jp":true,"iida.nagano.jp":true,"iijima.nagano.jp":true,"iiyama.nagano.jp":true,"iizuna.nagano.jp":true,"ikeda.nagano.jp":true,"ikusaka.nagano.jp":true,"ina.nagano.jp":true,"karuizawa.nagano.jp":true,"kawakami.nagano.jp":true,"kiso.nagano.jp":true,"kisofukushima.nagano.jp":true,"kitaaiki.nagano.jp":true,"komagane.nagano.jp":true,"komoro.nagano.jp":true,"matsukawa.nagano.jp":true,"matsumoto.nagano.jp":true,"miasa.nagano.jp":true,"minamiaiki.nagano.jp":true,"minamimaki.nagano.jp":true,"minamiminowa.nagano.jp":true,"minowa.nagano.jp":true,"miyada.nagano.jp":true,"miyota.nagano.jp":true,"mochizuki.nagano.jp":true,"nagano.nagano.jp":true,"nagawa.nagano.jp":true,"nagiso.nagano.jp":true,"nakagawa.nagano.jp":true,"nakano.nagano.jp":true,"nozawaonsen.nagano.jp":true,"obuse.nagano.jp":true,"ogawa.nagano.jp":true,"okaya.nagano.jp":true,"omachi.nagano.jp":true,"omi.nagano.jp":true,"ookuwa.nagano.jp":true,"ooshika.nagano.jp":true,"otaki.nagano.jp":true,"otari.nagano.jp":true,"sakae.nagano.jp":true,"sakaki.nagano.jp":true,"saku.nagano.jp":true,"sakuho.nagano.jp":true,"shimosuwa.nagano.jp":true,"shinanomachi.nagano.jp":true,"shiojiri.nagano.jp":true,"suwa.nagano.jp":true,"suzaka.nagano.jp":true,"takagi.nagano.jp":true,"takamori.nagano.jp":true,"takayama.nagano.jp":true,"tateshina.nagano.jp":true,"tatsuno.nagano.jp":true,"togakushi.nagano.jp":true,"togura.nagano.jp":true,"tomi.nagano.jp":true,"ueda.nagano.jp":true,"wada.nagano.jp":true,"yamagata.nagano.jp":true,"yamanouchi.nagano.jp":true,"yasaka.nagano.jp":true,"yasuoka.nagano.jp":true,"chijiwa.nagasaki.jp":true,"futsu.nagasaki.jp":true,"goto.nagasaki.jp":true,"hasami.nagasaki.jp":true,"hirado.nagasaki.jp":true,"iki.nagasaki.jp":true,"isahaya.nagasaki.jp":true,"kawatana.nagasaki.jp":true,"kuchinotsu.nagasaki.jp":true,"matsuura.nagasaki.jp":true,"nagasaki.nagasaki.jp":true,"obama.nagasaki.jp":true,"omura.nagasaki.jp":true,"oseto.nagasaki.jp":true,"saikai.nagasaki.jp":true,"sasebo.nagasaki.jp":true,"seihi.nagasaki.jp":true,"shimabara.nagasaki.jp":true,"shinkamigoto.nagasaki.jp":true,"togitsu.nagasaki.jp":true,"tsushima.nagasaki.jp":true,"unzen.nagasaki.jp":true,"ando.nara.jp":true,"gose.nara.jp":true,"heguri.nara.jp":true,"higashiyoshino.nara.jp":true,"ikaruga.nara.jp":true,"ikoma.nara.jp":true,"kamikitayama.nara.jp":true,"kanmaki.nara.jp":true,"kashiba.nara.jp":true,"kashihara.nara.jp":true,"katsuragi.nara.jp":true,"kawai.nara.jp":true,"kawakami.nara.jp":true,"kawanishi.nara.jp":true,"koryo.nara.jp":true,"kurotaki.nara.jp":true,"mitsue.nara.jp":true,"miyake.nara.jp":true,"nara.nara.jp":true,"nosegawa.nara.jp":true,"oji.nara.jp":true,"ouda.nara.jp":true,"oyodo.nara.jp":true,"sakurai.nara.jp":true,"sango.nara.jp":true,"shimoichi.nara.jp":true,"shimokitayama.nara.jp":true,"shinjo.nara.jp":true,"soni.nara.jp":true,"takatori.nara.jp":true,"tawaramoto.nara.jp":true,"tenkawa.nara.jp":true,"tenri.nara.jp":true,"uda.nara.jp":true,"yamatokoriyama.nara.jp":true,"yamatotakada.nara.jp":true,"yamazoe.nara.jp":true,"yoshino.nara.jp":true,"aga.niigata.jp":true,"agano.niigata.jp":true,"gosen.niigata.jp":true,"itoigawa.niigata.jp":true,"izumozaki.niigata.jp":true,"joetsu.niigata.jp":true,"kamo.niigata.jp":true,"kariwa.niigata.jp":true,"kashiwazaki.niigata.jp":true,"minamiuonuma.niigata.jp":true,"mitsuke.niigata.jp":true,"muika.niigata.jp":true,"murakami.niigata.jp":true,"myoko.niigata.jp":true,"nagaoka.niigata.jp":true,"niigata.niigata.jp":true,"ojiya.niigata.jp":true,"omi.niigata.jp":true,"sado.niigata.jp":true,"sanjo.niigata.jp":true,"seiro.niigata.jp":true,"seirou.niigata.jp":true,"sekikawa.niigata.jp":true,"shibata.niigata.jp":true,"tagami.niigata.jp":true,"tainai.niigata.jp":true,"tochio.niigata.jp":true,"tokamachi.niigata.jp":true,"tsubame.niigata.jp":true,"tsunan.niigata.jp":true,"uonuma.niigata.jp":true,"yahiko.niigata.jp":true,"yoita.niigata.jp":true,"yuzawa.niigata.jp":true,"beppu.oita.jp":true,"bungoono.oita.jp":true,"bungotakada.oita.jp":true,"hasama.oita.jp":true,"hiji.oita.jp":true,"himeshima.oita.jp":true,"hita.oita.jp":true,"kamitsue.oita.jp":true,"kokonoe.oita.jp":true,"kuju.oita.jp":true,"kunisaki.oita.jp":true,"kusu.oita.jp":true,"oita.oita.jp":true,"saiki.oita.jp":true,"taketa.oita.jp":true,"tsukumi.oita.jp":true,"usa.oita.jp":true,"usuki.oita.jp":true,"yufu.oita.jp":true,"akaiwa.okayama.jp":true,"asakuchi.okayama.jp":true,"bizen.okayama.jp":true,"hayashima.okayama.jp":true,"ibara.okayama.jp":true,"kagamino.okayama.jp":true,"kasaoka.okayama.jp":true,"kibichuo.okayama.jp":true,"kumenan.okayama.jp":true,"kurashiki.okayama.jp":true,"maniwa.okayama.jp":true,"misaki.okayama.jp":true,"nagi.okayama.jp":true,"niimi.okayama.jp":true,"nishiawakura.okayama.jp":true,"okayama.okayama.jp":true,"satosho.okayama.jp":true,"setouchi.okayama.jp":true,"shinjo.okayama.jp":true,"shoo.okayama.jp":true,"soja.okayama.jp":true,"takahashi.okayama.jp":true,"tamano.okayama.jp":true,"tsuyama.okayama.jp":true,"wake.okayama.jp":true,"yakage.okayama.jp":true,"aguni.okinawa.jp":true,"ginowan.okinawa.jp":true,"ginoza.okinawa.jp":true,"gushikami.okinawa.jp":true,"haebaru.okinawa.jp":true,"higashi.okinawa.jp":true,"hirara.okinawa.jp":true,"iheya.okinawa.jp":true,"ishigaki.okinawa.jp":true,"ishikawa.okinawa.jp":true,"itoman.okinawa.jp":true,"izena.okinawa.jp":true,"kadena.okinawa.jp":true,"kin.okinawa.jp":true,"kitadaito.okinawa.jp":true,"kitanakagusuku.okinawa.jp":true,"kumejima.okinawa.jp":true,"kunigami.okinawa.jp":true,"minamidaito.okinawa.jp":true,"motobu.okinawa.jp":true,"nago.okinawa.jp":true,"naha.okinawa.jp":true,"nakagusuku.okinawa.jp":true,"nakijin.okinawa.jp":true,"nanjo.okinawa.jp":true,"nishihara.okinawa.jp":true,"ogimi.okinawa.jp":true,"okinawa.okinawa.jp":true,"onna.okinawa.jp":true,"shimoji.okinawa.jp":true,"taketomi.okinawa.jp":true,"tarama.okinawa.jp":true,"tokashiki.okinawa.jp":true,"tomigusuku.okinawa.jp":true,"tonaki.okinawa.jp":true,"urasoe.okinawa.jp":true,"uruma.okinawa.jp":true,"yaese.okinawa.jp":true,"yomitan.okinawa.jp":true,"yonabaru.okinawa.jp":true,"yonaguni.okinawa.jp":true,"zamami.okinawa.jp":true,"abeno.osaka.jp":true,"chihayaakasaka.osaka.jp":true,"chuo.osaka.jp":true,"daito.osaka.jp":true,"fujiidera.osaka.jp":true,"habikino.osaka.jp":true,"hannan.osaka.jp":true,"higashiosaka.osaka.jp":true,"higashisumiyoshi.osaka.jp":true,"higashiyodogawa.osaka.jp":true,"hirakata.osaka.jp":true,"ibaraki.osaka.jp":true,"ikeda.osaka.jp":true,"izumi.osaka.jp":true,"izumiotsu.osaka.jp":true,"izumisano.osaka.jp":true,"kadoma.osaka.jp":true,"kaizuka.osaka.jp":true,"kanan.osaka.jp":true,"kashiwara.osaka.jp":true,"katano.osaka.jp":true,"kawachinagano.osaka.jp":true,"kishiwada.osaka.jp":true,"kita.osaka.jp":true,"kumatori.osaka.jp":true,"matsubara.osaka.jp":true,"minato.osaka.jp":true,"minoh.osaka.jp":true,"misaki.osaka.jp":true,"moriguchi.osaka.jp":true,"neyagawa.osaka.jp":true,"nishi.osaka.jp":true,"nose.osaka.jp":true,"osakasayama.osaka.jp":true,"sakai.osaka.jp":true,"sayama.osaka.jp":true,"sennan.osaka.jp":true,"settsu.osaka.jp":true,"shijonawate.osaka.jp":true,"shimamoto.osaka.jp":true,"suita.osaka.jp":true,"tadaoka.osaka.jp":true,"taishi.osaka.jp":true,"tajiri.osaka.jp":true,"takaishi.osaka.jp":true,"takatsuki.osaka.jp":true,"tondabayashi.osaka.jp":true,"toyonaka.osaka.jp":true,"toyono.osaka.jp":true,"yao.osaka.jp":true,"ariake.saga.jp":true,"arita.saga.jp":true,"fukudomi.saga.jp":true,"genkai.saga.jp":true,"hamatama.saga.jp":true,"hizen.saga.jp":true,"imari.saga.jp":true,"kamimine.saga.jp":true,"kanzaki.saga.jp":true,"karatsu.saga.jp":true,"kashima.saga.jp":true,"kitagata.saga.jp":true,"kitahata.saga.jp":true,"kiyama.saga.jp":true,"kouhoku.saga.jp":true,"kyuragi.saga.jp":true,"nishiarita.saga.jp":true,"ogi.saga.jp":true,"omachi.saga.jp":true,"ouchi.saga.jp":true,"saga.saga.jp":true,"shiroishi.saga.jp":true,"taku.saga.jp":true,"tara.saga.jp":true,"tosu.saga.jp":true,"yoshinogari.saga.jp":true,"arakawa.saitama.jp":true,"asaka.saitama.jp":true,"chichibu.saitama.jp":true,"fujimi.saitama.jp":true,"fujimino.saitama.jp":true,"fukaya.saitama.jp":true,"hanno.saitama.jp":true,"hanyu.saitama.jp":true,"hasuda.saitama.jp":true,"hatogaya.saitama.jp":true,"hatoyama.saitama.jp":true,"hidaka.saitama.jp":true,"higashichichibu.saitama.jp":true,"higashimatsuyama.saitama.jp":true,"honjo.saitama.jp":true,"ina.saitama.jp":true,"iruma.saitama.jp":true,"iwatsuki.saitama.jp":true,"kamiizumi.saitama.jp":true,"kamikawa.saitama.jp":true,"kamisato.saitama.jp":true,"kasukabe.saitama.jp":true,"kawagoe.saitama.jp":true,"kawaguchi.saitama.jp":true,"kawajima.saitama.jp":true,"kazo.saitama.jp":true,"kitamoto.saitama.jp":true,"koshigaya.saitama.jp":true,"kounosu.saitama.jp":true,"kuki.saitama.jp":true,"kumagaya.saitama.jp":true,"matsubushi.saitama.jp":true,"minano.saitama.jp":true,"misato.saitama.jp":true,"miyashiro.saitama.jp":true,"miyoshi.saitama.jp":true,"moroyama.saitama.jp":true,"nagatoro.saitama.jp":true,"namegawa.saitama.jp":true,"niiza.saitama.jp":true,"ogano.saitama.jp":true,"ogawa.saitama.jp":true,"ogose.saitama.jp":true,"okegawa.saitama.jp":true,"omiya.saitama.jp":true,"otaki.saitama.jp":true,"ranzan.saitama.jp":true,"ryokami.saitama.jp":true,"saitama.saitama.jp":true,"sakado.saitama.jp":true,"satte.saitama.jp":true,"sayama.saitama.jp":true,"shiki.saitama.jp":true,"shiraoka.saitama.jp":true,"soka.saitama.jp":true,"sugito.saitama.jp":true,"toda.saitama.jp":true,"tokigawa.saitama.jp":true,"tokorozawa.saitama.jp":true,"tsurugashima.saitama.jp":true,"urawa.saitama.jp":true,"warabi.saitama.jp":true,"yashio.saitama.jp":true,"yokoze.saitama.jp":true,"yono.saitama.jp":true,"yorii.saitama.jp":true,"yoshida.saitama.jp":true,"yoshikawa.saitama.jp":true,"yoshimi.saitama.jp":true,"aisho.shiga.jp":true,"gamo.shiga.jp":true,"higashiomi.shiga.jp":true,"hikone.shiga.jp":true,"koka.shiga.jp":true,"konan.shiga.jp":true,"kosei.shiga.jp":true,"koto.shiga.jp":true,"kusatsu.shiga.jp":true,"maibara.shiga.jp":true,"moriyama.shiga.jp":true,"nagahama.shiga.jp":true,"nishiazai.shiga.jp":true,"notogawa.shiga.jp":true,"omihachiman.shiga.jp":true,"otsu.shiga.jp":true,"ritto.shiga.jp":true,"ryuoh.shiga.jp":true,"takashima.shiga.jp":true,"takatsuki.shiga.jp":true,"torahime.shiga.jp":true,"toyosato.shiga.jp":true,"yasu.shiga.jp":true,"akagi.shimane.jp":true,"ama.shimane.jp":true,"gotsu.shimane.jp":true,"hamada.shimane.jp":true,"higashiizumo.shimane.jp":true,"hikawa.shimane.jp":true,"hikimi.shimane.jp":true,"izumo.shimane.jp":true,"kakinoki.shimane.jp":true,"masuda.shimane.jp":true,"matsue.shimane.jp":true,"misato.shimane.jp":true,"nishinoshima.shimane.jp":true,"ohda.shimane.jp":true,"okinoshima.shimane.jp":true,"okuizumo.shimane.jp":true,"shimane.shimane.jp":true,"tamayu.shimane.jp":true,"tsuwano.shimane.jp":true,"unnan.shimane.jp":true,"yakumo.shimane.jp":true,"yasugi.shimane.jp":true,"yatsuka.shimane.jp":true,"arai.shizuoka.jp":true,"atami.shizuoka.jp":true,"fuji.shizuoka.jp":true,"fujieda.shizuoka.jp":true,"fujikawa.shizuoka.jp":true,"fujinomiya.shizuoka.jp":true,"fukuroi.shizuoka.jp":true,"gotemba.shizuoka.jp":true,"haibara.shizuoka.jp":true,"hamamatsu.shizuoka.jp":true,"higashiizu.shizuoka.jp":true,"ito.shizuoka.jp":true,"iwata.shizuoka.jp":true,"izu.shizuoka.jp":true,"izunokuni.shizuoka.jp":true,"kakegawa.shizuoka.jp":true,"kannami.shizuoka.jp":true,"kawanehon.shizuoka.jp":true,"kawazu.shizuoka.jp":true,"kikugawa.shizuoka.jp":true,"kosai.shizuoka.jp":true,"makinohara.shizuoka.jp":true,"matsuzaki.shizuoka.jp":true,"minamiizu.shizuoka.jp":true,"mishima.shizuoka.jp":true,"morimachi.shizuoka.jp":true,"nishiizu.shizuoka.jp":true,"numazu.shizuoka.jp":true,"omaezaki.shizuoka.jp":true,"shimada.shizuoka.jp":true,"shimizu.shizuoka.jp":true,"shimoda.shizuoka.jp":true,"shizuoka.shizuoka.jp":true,"susono.shizuoka.jp":true,"yaizu.shizuoka.jp":true,"yoshida.shizuoka.jp":true,"ashikaga.tochigi.jp":true,"bato.tochigi.jp":true,"haga.tochigi.jp":true,"ichikai.tochigi.jp":true,"iwafune.tochigi.jp":true,"kaminokawa.tochigi.jp":true,"kanuma.tochigi.jp":true,"karasuyama.tochigi.jp":true,"kuroiso.tochigi.jp":true,"mashiko.tochigi.jp":true,"mibu.tochigi.jp":true,"moka.tochigi.jp":true,"motegi.tochigi.jp":true,"nasu.tochigi.jp":true,"nasushiobara.tochigi.jp":true,"nikko.tochigi.jp":true,"nishikata.tochigi.jp":true,"nogi.tochigi.jp":true,"ohira.tochigi.jp":true,"ohtawara.tochigi.jp":true,"oyama.tochigi.jp":true,"sakura.tochigi.jp":true,"sano.tochigi.jp":true,"shimotsuke.tochigi.jp":true,"shioya.tochigi.jp":true,"takanezawa.tochigi.jp":true,"tochigi.tochigi.jp":true,"tsuga.tochigi.jp":true,"ujiie.tochigi.jp":true,"utsunomiya.tochigi.jp":true,"yaita.tochigi.jp":true,"aizumi.tokushima.jp":true,"anan.tokushima.jp":true,"ichiba.tokushima.jp":true,"itano.tokushima.jp":true,"kainan.tokushima.jp":true,"komatsushima.tokushima.jp":true,"matsushige.tokushima.jp":true,"mima.tokushima.jp":true,"minami.tokushima.jp":true,"miyoshi.tokushima.jp":true,"mugi.tokushima.jp":true,"nakagawa.tokushima.jp":true,"naruto.tokushima.jp":true,"sanagochi.tokushima.jp":true,"shishikui.tokushima.jp":true,"tokushima.tokushima.jp":true,"wajiki.tokushima.jp":true,"adachi.tokyo.jp":true,"akiruno.tokyo.jp":true,"akishima.tokyo.jp":true,"aogashima.tokyo.jp":true,"arakawa.tokyo.jp":true,"bunkyo.tokyo.jp":true,"chiyoda.tokyo.jp":true,"chofu.tokyo.jp":true,"chuo.tokyo.jp":true,"edogawa.tokyo.jp":true,"fuchu.tokyo.jp":true,"fussa.tokyo.jp":true,"hachijo.tokyo.jp":true,"hachioji.tokyo.jp":true,"hamura.tokyo.jp":true,"higashikurume.tokyo.jp":true,"higashimurayama.tokyo.jp":true,"higashiyamato.tokyo.jp":true,"hino.tokyo.jp":true,"hinode.tokyo.jp":true,"hinohara.tokyo.jp":true,"inagi.tokyo.jp":true,"itabashi.tokyo.jp":true,"katsushika.tokyo.jp":true,"kita.tokyo.jp":true,"kiyose.tokyo.jp":true,"kodaira.tokyo.jp":true,"koganei.tokyo.jp":true,"kokubunji.tokyo.jp":true,"komae.tokyo.jp":true,"koto.tokyo.jp":true,"kouzushima.tokyo.jp":true,"kunitachi.tokyo.jp":true,"machida.tokyo.jp":true,"meguro.tokyo.jp":true,"minato.tokyo.jp":true,"mitaka.tokyo.jp":true,"mizuho.tokyo.jp":true,"musashimurayama.tokyo.jp":true,"musashino.tokyo.jp":true,"nakano.tokyo.jp":true,"nerima.tokyo.jp":true,"ogasawara.tokyo.jp":true,"okutama.tokyo.jp":true,"ome.tokyo.jp":true,"oshima.tokyo.jp":true,"ota.tokyo.jp":true,"setagaya.tokyo.jp":true,"shibuya.tokyo.jp":true,"shinagawa.tokyo.jp":true,"shinjuku.tokyo.jp":true,"suginami.tokyo.jp":true,"sumida.tokyo.jp":true,"tachikawa.tokyo.jp":true,"taito.tokyo.jp":true,"tama.tokyo.jp":true,"toshima.tokyo.jp":true,"chizu.tottori.jp":true,"hino.tottori.jp":true,"kawahara.tottori.jp":true,"koge.tottori.jp":true,"kotoura.tottori.jp":true,"misasa.tottori.jp":true,"nanbu.tottori.jp":true,"nichinan.tottori.jp":true,"sakaiminato.tottori.jp":true,"tottori.tottori.jp":true,"wakasa.tottori.jp":true,"yazu.tottori.jp":true,"yonago.tottori.jp":true,"asahi.toyama.jp":true,"fuchu.toyama.jp":true,"fukumitsu.toyama.jp":true,"funahashi.toyama.jp":true,"himi.toyama.jp":true,"imizu.toyama.jp":true,"inami.toyama.jp":true,"johana.toyama.jp":true,"kamiichi.toyama.jp":true,"kurobe.toyama.jp":true,"nakaniikawa.toyama.jp":true,"namerikawa.toyama.jp":true,"nanto.toyama.jp":true,"nyuzen.toyama.jp":true,"oyabe.toyama.jp":true,"taira.toyama.jp":true,"takaoka.toyama.jp":true,"tateyama.toyama.jp":true,"toga.toyama.jp":true,"tonami.toyama.jp":true,"toyama.toyama.jp":true,"unazuki.toyama.jp":true,"uozu.toyama.jp":true,"yamada.toyama.jp":true,"arida.wakayama.jp":true,"aridagawa.wakayama.jp":true,"gobo.wakayama.jp":true,"hashimoto.wakayama.jp":true,"hidaka.wakayama.jp":true,"hirogawa.wakayama.jp":true,"inami.wakayama.jp":true,"iwade.wakayama.jp":true,"kainan.wakayama.jp":true,"kamitonda.wakayama.jp":true,"katsuragi.wakayama.jp":true,"kimino.wakayama.jp":true,"kinokawa.wakayama.jp":true,"kitayama.wakayama.jp":true,"koya.wakayama.jp":true,"koza.wakayama.jp":true,"kozagawa.wakayama.jp":true,"kudoyama.wakayama.jp":true,"kushimoto.wakayama.jp":true,"mihama.wakayama.jp":true,"misato.wakayama.jp":true,"nachikatsuura.wakayama.jp":true,"shingu.wakayama.jp":true,"shirahama.wakayama.jp":true,"taiji.wakayama.jp":true,"tanabe.wakayama.jp":true,"wakayama.wakayama.jp":true,"yuasa.wakayama.jp":true,"yura.wakayama.jp":true,"asahi.yamagata.jp":true,"funagata.yamagata.jp":true,"higashine.yamagata.jp":true,"iide.yamagata.jp":true,"kahoku.yamagata.jp":true,"kaminoyama.yamagata.jp":true,"kaneyama.yamagata.jp":true,"kawanishi.yamagata.jp":true,"mamurogawa.yamagata.jp":true,"mikawa.yamagata.jp":true,"murayama.yamagata.jp":true,"nagai.yamagata.jp":true,"nakayama.yamagata.jp":true,"nanyo.yamagata.jp":true,"nishikawa.yamagata.jp":true,"obanazawa.yamagata.jp":true,"oe.yamagata.jp":true,"oguni.yamagata.jp":true,"ohkura.yamagata.jp":true,"oishida.yamagata.jp":true,"sagae.yamagata.jp":true,"sakata.yamagata.jp":true,"sakegawa.yamagata.jp":true,"shinjo.yamagata.jp":true,"shirataka.yamagata.jp":true,"shonai.yamagata.jp":true,"takahata.yamagata.jp":true,"tendo.yamagata.jp":true,"tozawa.yamagata.jp":true,"tsuruoka.yamagata.jp":true,"yamagata.yamagata.jp":true,"yamanobe.yamagata.jp":true,"yonezawa.yamagata.jp":true,"yuza.yamagata.jp":true,"abu.yamaguchi.jp":true,"hagi.yamaguchi.jp":true,"hikari.yamaguchi.jp":true,"hofu.yamaguchi.jp":true,"iwakuni.yamaguchi.jp":true,"kudamatsu.yamaguchi.jp":true,"mitou.yamaguchi.jp":true,"nagato.yamaguchi.jp":true,"oshima.yamaguchi.jp":true,"shimonoseki.yamaguchi.jp":true,"shunan.yamaguchi.jp":true,"tabuse.yamaguchi.jp":true,"tokuyama.yamaguchi.jp":true,"toyota.yamaguchi.jp":true,"ube.yamaguchi.jp":true,"yuu.yamaguchi.jp":true,"chuo.yamanashi.jp":true,"doshi.yamanashi.jp":true,"fuefuki.yamanashi.jp":true,"fujikawa.yamanashi.jp":true,"fujikawaguchiko.yamanashi.jp":true,"fujiyoshida.yamanashi.jp":true,"hayakawa.yamanashi.jp":true,"hokuto.yamanashi.jp":true,"ichikawamisato.yamanashi.jp":true,"kai.yamanashi.jp":true,"kofu.yamanashi.jp":true,"koshu.yamanashi.jp":true,"kosuge.yamanashi.jp":true,"minami-alps.yamanashi.jp":true,"minobu.yamanashi.jp":true,"nakamichi.yamanashi.jp":true,"nanbu.yamanashi.jp":true,"narusawa.yamanashi.jp":true,"nirasaki.yamanashi.jp":true,"nishikatsura.yamanashi.jp":true,"oshino.yamanashi.jp":true,"otsuki.yamanashi.jp":true,"showa.yamanashi.jp":true,"tabayama.yamanashi.jp":true,"tsuru.yamanashi.jp":true,"uenohara.yamanashi.jp":true,"yamanakako.yamanashi.jp":true,"yamanashi.yamanashi.jp":true,"*.ke":true,kg:true,"org.kg":true,"net.kg":true,"com.kg":true,"edu.kg":true,"gov.kg":true,"mil.kg":true,"*.kh":true,ki:true,"edu.ki":true,"biz.ki":true,"net.ki":true,"org.ki":true,"gov.ki":true,"info.ki":true,"com.ki":true,km:true,"org.km":true,"nom.km":true,"gov.km":true,"prd.km":true,"tm.km":true,"edu.km":true,"mil.km":true,"ass.km":true,"com.km":true,"coop.km":true,"asso.km":true,"presse.km":true,"medecin.km":true,"notaires.km":true,"pharmaciens.km":true,"veterinaire.km":true,"gouv.km":true,kn:true,"net.kn":true,"org.kn":true,"edu.kn":true,"gov.kn":true,kp:true,"com.kp":true,"edu.kp":true,"gov.kp":true,"org.kp":true,"rep.kp":true,"tra.kp":true,kr:true,"ac.kr":true,"co.kr":true,"es.kr":true,"go.kr":true,"hs.kr":true,"kg.kr":true,"mil.kr":true,"ms.kr":true,"ne.kr":true,"or.kr":true,"pe.kr":true,"re.kr":true,"sc.kr":true,"busan.kr":true,"chungbuk.kr":true,"chungnam.kr":true,"daegu.kr":true,"daejeon.kr":true,"gangwon.kr":true,"gwangju.kr":true,"gyeongbuk.kr":true,"gyeonggi.kr":true,"gyeongnam.kr":true,"incheon.kr":true,"jeju.kr":true,"jeonbuk.kr":true,"jeonnam.kr":true,"seoul.kr":true,"ulsan.kr":true,"*.kw":true,ky:true,"edu.ky":true,"gov.ky":true,"com.ky":true,"org.ky":true,"net.ky":true,kz:true,"org.kz":true,"edu.kz":true,"net.kz":true,"gov.kz":true,"mil.kz":true,"com.kz":true,la:true,"int.la":true,"net.la":true,"info.la":true,"edu.la":true,"gov.la":true,"per.la":true,"com.la":true,"org.la":true,lb:true,"com.lb":true,"edu.lb":true,"gov.lb":true,"net.lb":true,"org.lb":true,lc:true,"com.lc":true,"net.lc":true,"co.lc":true,"org.lc":true,"edu.lc":true,"gov.lc":true,li:true,lk:true,"gov.lk":true,"sch.lk":true,"net.lk":true,"int.lk":true,"com.lk":true,"org.lk":true,"edu.lk":true,"ngo.lk":true,"soc.lk":true,"web.lk":true,"ltd.lk":true,"assn.lk":true,"grp.lk":true,"hotel.lk":true,"ac.lk":true,lr:true,"com.lr":true,"edu.lr":true,"gov.lr":true,"org.lr":true,"net.lr":true,ls:true,"co.ls":true,"org.ls":true,lt:true,"gov.lt":true,lu:true,lv:true,"com.lv":true,"edu.lv":true,"gov.lv":true,"org.lv":true,"mil.lv":true,"id.lv":true,"net.lv":true,"asn.lv":true,"conf.lv":true,ly:true,"com.ly":true,"net.ly":true,"gov.ly":true,"plc.ly":true,"edu.ly":true,"sch.ly":true,"med.ly":true,"org.ly":true,"id.ly":true,ma:true,"co.ma":true,"net.ma":true,"gov.ma":true,"org.ma":true,"ac.ma":true,"press.ma":true,mc:true,"tm.mc":true,"asso.mc":true,md:true,me:true,"co.me":true,"net.me":true,"org.me":true,"edu.me":true,"ac.me":true,"gov.me":true,"its.me":true,"priv.me":true,mg:true,"org.mg":true,"nom.mg":true,"gov.mg":true,"prd.mg":true,"tm.mg":true,"edu.mg":true,"mil.mg":true,"com.mg":true,"co.mg":true,mh:true,mil:true,mk:true,"com.mk":true,"org.mk":true,"net.mk":true,"edu.mk":true,"gov.mk":true,"inf.mk":true,"name.mk":true,ml:true,"com.ml":true,"edu.ml":true,"gouv.ml":true,"gov.ml":true,"net.ml":true,"org.ml":true,"presse.ml":true,"*.mm":true,mn:true,"gov.mn":true,"edu.mn":true,"org.mn":true,mo:true,"com.mo":true,"net.mo":true,"org.mo":true,"edu.mo":true,"gov.mo":true,mobi:true,mp:true,mq:true,mr:true,"gov.mr":true,ms:true,"com.ms":true,"edu.ms":true,"gov.ms":true,"net.ms":true,"org.ms":true,mt:true,"com.mt":true,"edu.mt":true,"net.mt":true,"org.mt":true,mu:true,"com.mu":true,"net.mu":true,"org.mu":true,"gov.mu":true,"ac.mu":true,"co.mu":true,"or.mu":true,museum:true,"academy.museum":true,"agriculture.museum":true,"air.museum":true,"airguard.museum":true,"alabama.museum":true,"alaska.museum":true,"amber.museum":true,"ambulance.museum":true,"american.museum":true,"americana.museum":true,"americanantiques.museum":true,"americanart.museum":true,"amsterdam.museum":true,"and.museum":true,"annefrank.museum":true,"anthro.museum":true,"anthropology.museum":true,"antiques.museum":true,"aquarium.museum":true,"arboretum.museum":true,"archaeological.museum":true,"archaeology.museum":true,"architecture.museum":true,"art.museum":true,"artanddesign.museum":true,"artcenter.museum":true,"artdeco.museum":true,"arteducation.museum":true,"artgallery.museum":true,"arts.museum":true,"artsandcrafts.museum":true,"asmatart.museum":true,"assassination.museum":true,"assisi.museum":true,"association.museum":true,"astronomy.museum":true,"atlanta.museum":true,"austin.museum":true,"australia.museum":true,"automotive.museum":true,"aviation.museum":true,"axis.museum":true,"badajoz.museum":true,"baghdad.museum":true,"bahn.museum":true,"bale.museum":true,"baltimore.museum":true,"barcelona.museum":true,"baseball.museum":true,"basel.museum":true,"baths.museum":true,"bauern.museum":true,"beauxarts.museum":true,"beeldengeluid.museum":true,"bellevue.museum":true,"bergbau.museum":true,"berkeley.museum":true,"berlin.museum":true,"bern.museum":true,"bible.museum":true,"bilbao.museum":true,"bill.museum":true,"birdart.museum":true,"birthplace.museum":true,"bonn.museum":true,"boston.museum":true,"botanical.museum":true,"botanicalgarden.museum":true,"botanicgarden.museum":true,"botany.museum":true,"brandywinevalley.museum":true,"brasil.museum":true,"bristol.museum":true,"british.museum":true,"britishcolumbia.museum":true,"broadcast.museum":true,"brunel.museum":true,"brussel.museum":true,"brussels.museum":true,"bruxelles.museum":true,"building.museum":true,"burghof.museum":true,"bus.museum":true,"bushey.museum":true,"cadaques.museum":true,"california.museum":true,"cambridge.museum":true,"can.museum":true,"canada.museum":true,"capebreton.museum":true,"carrier.museum":true,"cartoonart.museum":true,"casadelamoneda.museum":true,"castle.museum":true,"castres.museum":true,"celtic.museum":true,"center.museum":true,"chattanooga.museum":true,"cheltenham.museum":true,"chesapeakebay.museum":true,"chicago.museum":true,"children.museum":true,"childrens.museum":true,"childrensgarden.museum":true,"chiropractic.museum":true,"chocolate.museum":true,"christiansburg.museum":true,"cincinnati.museum":true,"cinema.museum":true,"circus.museum":true,"civilisation.museum":true,"civilization.museum":true,"civilwar.museum":true,"clinton.museum":true,"clock.museum":true,"coal.museum":true,"coastaldefence.museum":true,"cody.museum":true,"coldwar.museum":true,"collection.museum":true,"colonialwilliamsburg.museum":true,"coloradoplateau.museum":true,"columbia.museum":true,"columbus.museum":true,"communication.museum":true,"communications.museum":true,"community.museum":true,"computer.museum":true,"computerhistory.museum":true,"xn--comunicaes-v6a2o.museum":true,"contemporary.museum":true,"contemporaryart.museum":true,"convent.museum":true,"copenhagen.museum":true,"corporation.museum":true,"xn--correios-e-telecomunicaes-ghc29a.museum":true,"corvette.museum":true,"costume.museum":true,"countryestate.museum":true,"county.museum":true,"crafts.museum":true,"cranbrook.museum":true,"creation.museum":true,"cultural.museum":true,"culturalcenter.museum":true,"culture.museum":true,"cyber.museum":true,"cymru.museum":true,"dali.museum":true,"dallas.museum":true,"database.museum":true,"ddr.museum":true,"decorativearts.museum":true,"delaware.museum":true,"delmenhorst.museum":true,"denmark.museum":true,"depot.museum":true,"design.museum":true,"detroit.museum":true,"dinosaur.museum":true,"discovery.museum":true,"dolls.museum":true,"donostia.museum":true,"durham.museum":true,"eastafrica.museum":true,"eastcoast.museum":true,"education.museum":true,"educational.museum":true,"egyptian.museum":true,"eisenbahn.museum":true,"elburg.museum":true,"elvendrell.museum":true,"embroidery.museum":true,"encyclopedic.museum":true,"england.museum":true,"entomology.museum":true,"environment.museum":true,"environmentalconservation.museum":true,"epilepsy.museum":true,"essex.museum":true,"estate.museum":true,"ethnology.museum":true,"exeter.museum":true,"exhibition.museum":true,"family.museum":true,"farm.museum":true,"farmequipment.museum":true,"farmers.museum":true,"farmstead.museum":true,"field.museum":true,"figueres.museum":true,"filatelia.museum":true,"film.museum":true,"fineart.museum":true,"finearts.museum":true,"finland.museum":true,"flanders.museum":true,"florida.museum":true,"force.museum":true,"fortmissoula.museum":true,"fortworth.museum":true,"foundation.museum":true,"francaise.museum":true,"frankfurt.museum":true,"franziskaner.museum":true,"freemasonry.museum":true,"freiburg.museum":true,"fribourg.museum":true,"frog.museum":true,"fundacio.museum":true,"furniture.museum":true,"gallery.museum":true,"garden.museum":true,"gateway.museum":true,"geelvinck.museum":true,"gemological.museum":true,"geology.museum":true,"georgia.museum":true,"giessen.museum":true,"glas.museum":true,"glass.museum":true,"gorge.museum":true,"grandrapids.museum":true,"graz.museum":true,"guernsey.museum":true,"halloffame.museum":true,"hamburg.museum":true,"handson.museum":true,"harvestcelebration.museum":true,"hawaii.museum":true,"health.museum":true,"heimatunduhren.museum":true,"hellas.museum":true,"helsinki.museum":true,"hembygdsforbund.museum":true,"heritage.museum":true,"histoire.museum":true,"historical.museum":true,"historicalsociety.museum":true,"historichouses.museum":true,"historisch.museum":true,"historisches.museum":true,"history.museum":true,"historyofscience.museum":true,"horology.museum":true,"house.museum":true,"humanities.museum":true,"illustration.museum":true,"imageandsound.museum":true,"indian.museum":true,"indiana.museum":true,"indianapolis.museum":true,"indianmarket.museum":true,"intelligence.museum":true,"interactive.museum":true,"iraq.museum":true,"iron.museum":true,"isleofman.museum":true,"jamison.museum":true,"jefferson.museum":true,"jerusalem.museum":true,"jewelry.museum":true,"jewish.museum":true,"jewishart.museum":true,"jfk.museum":true,"journalism.museum":true,"judaica.museum":true,"judygarland.museum":true,"juedisches.museum":true,"juif.museum":true,"karate.museum":true,"karikatur.museum":true,"kids.museum":true,"koebenhavn.museum":true,"koeln.museum":true,"kunst.museum":true,"kunstsammlung.museum":true,"kunstunddesign.museum":true,"labor.museum":true,"labour.museum":true,"lajolla.museum":true,"lancashire.museum":true,"landes.museum":true,"lans.museum":true,"xn--lns-qla.museum":true,"larsson.museum":true,"lewismiller.museum":true,"lincoln.museum":true,"linz.museum":true,"living.museum":true,"livinghistory.museum":true,"localhistory.museum":true,"london.museum":true,"losangeles.museum":true,"louvre.museum":true,"loyalist.museum":true,"lucerne.museum":true,"luxembourg.museum":true,"luzern.museum":true,"mad.museum":true,"madrid.museum":true,"mallorca.museum":true,"manchester.museum":true,"mansion.museum":true,"mansions.museum":true,"manx.museum":true,"marburg.museum":true,"maritime.museum":true,"maritimo.museum":true,"maryland.museum":true,"marylhurst.museum":true,"media.museum":true,"medical.museum":true,"medizinhistorisches.museum":true,"meeres.museum":true,"memorial.museum":true,"mesaverde.museum":true,"michigan.museum":true,"midatlantic.museum":true,"military.museum":true,"mill.museum":true,"miners.museum":true,"mining.museum":true,"minnesota.museum":true,"missile.museum":true,"missoula.museum":true,"modern.museum":true,"moma.museum":true,"money.museum":true,"monmouth.museum":true,"monticello.museum":true,"montreal.museum":true,"moscow.museum":true,"motorcycle.museum":true,"muenchen.museum":true,"muenster.museum":true,"mulhouse.museum":true,"muncie.museum":true,"museet.museum":true,"museumcenter.museum":true,"museumvereniging.museum":true,"music.museum":true,"national.museum":true,"nationalfirearms.museum":true,"nationalheritage.museum":true,"nativeamerican.museum":true,"naturalhistory.museum":true,"naturalhistorymuseum.museum":true,"naturalsciences.museum":true,"nature.museum":true,"naturhistorisches.museum":true,"natuurwetenschappen.museum":true,"naumburg.museum":true,"naval.museum":true,"nebraska.museum":true,"neues.museum":true,"newhampshire.museum":true,"newjersey.museum":true,"newmexico.museum":true,"newport.museum":true,"newspaper.museum":true,"newyork.museum":true,"niepce.museum":true,"norfolk.museum":true,"north.museum":true,"nrw.museum":true,"nuernberg.museum":true,"nuremberg.museum":true,"nyc.museum":true,"nyny.museum":true,"oceanographic.museum":true,"oceanographique.museum":true,"omaha.museum":true,"online.museum":true,"ontario.museum":true,"openair.museum":true,"oregon.museum":true,"oregontrail.museum":true,"otago.museum":true,"oxford.museum":true,"pacific.museum":true,"paderborn.museum":true,"palace.museum":true,"paleo.museum":true,"palmsprings.museum":true,"panama.museum":true,"paris.museum":true,"pasadena.museum":true,"pharmacy.museum":true,"philadelphia.museum":true,"philadelphiaarea.museum":true,"philately.museum":true,"phoenix.museum":true,"photography.museum":true,"pilots.museum":true,"pittsburgh.museum":true,"planetarium.museum":true,"plantation.museum":true,"plants.museum":true,"plaza.museum":true,"portal.museum":true,"portland.museum":true,"portlligat.museum":true,"posts-and-telecommunications.museum":true,"preservation.museum":true,"presidio.museum":true,"press.museum":true,"project.museum":true,"public.museum":true,"pubol.museum":true,"quebec.museum":true,"railroad.museum":true,"railway.museum":true,"research.museum":true,"resistance.museum":true,"riodejaneiro.museum":true,"rochester.museum":true,"rockart.museum":true,"roma.museum":true,"russia.museum":true,"saintlouis.museum":true,"salem.museum":true,"salvadordali.museum":true,"salzburg.museum":true,"sandiego.museum":true,"sanfrancisco.museum":true,"santabarbara.museum":true,"santacruz.museum":true,"santafe.museum":true,"saskatchewan.museum":true,"satx.museum":true,"savannahga.museum":true,"schlesisches.museum":true,"schoenbrunn.museum":true,"schokoladen.museum":true,"school.museum":true,"schweiz.museum":true,"science.museum":true,"scienceandhistory.museum":true,"scienceandindustry.museum":true,"sciencecenter.museum":true,"sciencecenters.museum":true,"science-fiction.museum":true,"sciencehistory.museum":true,"sciences.museum":true,"sciencesnaturelles.museum":true,"scotland.museum":true,"seaport.museum":true,"settlement.museum":true,"settlers.museum":true,"shell.museum":true,"sherbrooke.museum":true,"sibenik.museum":true,"silk.museum":true,"ski.museum":true,"skole.museum":true,"society.museum":true,"sologne.museum":true,"soundandvision.museum":true,"southcarolina.museum":true,"southwest.museum":true,"space.museum":true,"spy.museum":true,"square.museum":true,"stadt.museum":true,"stalbans.museum":true,"starnberg.museum":true,"state.museum":true,"stateofdelaware.museum":true,"station.museum":true,"steam.museum":true,"steiermark.museum":true,"stjohn.museum":true,"stockholm.museum":true,"stpetersburg.museum":true,"stuttgart.museum":true,"suisse.museum":true,"surgeonshall.museum":true,"surrey.museum":true,"svizzera.museum":true,"sweden.museum":true,"sydney.museum":true,"tank.museum":true,"tcm.museum":true,"technology.museum":true,"telekommunikation.museum":true,"television.museum":true,"texas.museum":true,"textile.museum":true,"theater.museum":true,"time.museum":true,"timekeeping.museum":true,"topology.museum":true,"torino.museum":true,"touch.museum":true,"town.museum":true,"transport.museum":true,"tree.museum":true,"trolley.museum":true,"trust.museum":true,"trustee.museum":true,"uhren.museum":true,"ulm.museum":true,"undersea.museum":true,"university.museum":true,"usa.museum":true,"usantiques.museum":true,"usarts.museum":true,"uscountryestate.museum":true,"usculture.museum":true,"usdecorativearts.museum":true,"usgarden.museum":true,"ushistory.museum":true,"ushuaia.museum":true,"uslivinghistory.museum":true,"utah.museum":true,"uvic.museum":true,"valley.museum":true,"vantaa.museum":true,"versailles.museum":true,"viking.museum":true,"village.museum":true,"virginia.museum":true,"virtual.museum":true,"virtuel.museum":true,"vlaanderen.museum":true,"volkenkunde.museum":true,"wales.museum":true,"wallonie.museum":true,"war.museum":true,"washingtondc.museum":true,"watchandclock.museum":true,"watch-and-clock.museum":true,"western.museum":true,"westfalen.museum":true,"whaling.museum":true,"wildlife.museum":true,"williamsburg.museum":true,"windmill.museum":true,"workshop.museum":true,"york.museum":true,"yorkshire.museum":true,"yosemite.museum":true,"youth.museum":true,"zoological.museum":true,"zoology.museum":true,"xn--9dbhblg6di.museum":true,"xn--h1aegh.museum":true,mv:true,"aero.mv":true,"biz.mv":true,"com.mv":true,"coop.mv":true,"edu.mv":true,"gov.mv":true,"info.mv":true,"int.mv":true,"mil.mv":true,"museum.mv":true,"name.mv":true,"net.mv":true,"org.mv":true,"pro.mv":true,mw:true,"ac.mw":true,"biz.mw":true,"co.mw":true,"com.mw":true,"coop.mw":true,"edu.mw":true,"gov.mw":true,"int.mw":true,"museum.mw":true,"net.mw":true,"org.mw":true,mx:true,"com.mx":true,"org.mx":true,"gob.mx":true,"edu.mx":true,"net.mx":true,my:true,"com.my":true,"net.my":true,"org.my":true,"gov.my":true,"edu.my":true,"mil.my":true,"name.my":true,mz:true,"ac.mz":true,"adv.mz":true,"co.mz":true,"edu.mz":true,"gov.mz":true,"mil.mz":true,"net.mz":true,"org.mz":true,na:true,"info.na":true,"pro.na":true,"name.na":true,"school.na":true,"or.na":true,"dr.na":true,"us.na":true,"mx.na":true,"ca.na":true,"in.na":true,"cc.na":true,"tv.na":true,"ws.na":true,"mobi.na":true,"co.na":true,"com.na":true,"org.na":true,name:true,nc:true,"asso.nc":true,ne:true,net:true,nf:true,"com.nf":true,"net.nf":true,"per.nf":true,"rec.nf":true,"web.nf":true,"arts.nf":true,"firm.nf":true,"info.nf":true,"other.nf":true,"store.nf":true,ng:true,"com.ng":true,"edu.ng":true,"gov.ng":true,"i.ng":true,"mil.ng":true,"mobi.ng":true,"name.ng":true,"net.ng":true,"org.ng":true,"sch.ng":true,"com.ni":true,"gob.ni":true,"edu.ni":true,"org.ni":true,"nom.ni":true,"net.ni":true,"mil.ni":true,"co.ni":true,"biz.ni":true,"web.ni":true,"int.ni":true,"ac.ni":true,"in.ni":true,"info.ni":true,nl:true,"bv.nl":true,no:true,"fhs.no":true,"vgs.no":true,"fylkesbibl.no":true,"folkebibl.no":true,"museum.no":true,"idrett.no":true,"priv.no":true,"mil.no":true,"stat.no":true,"dep.no":true,"kommune.no":true,"herad.no":true,"aa.no":true,"ah.no":true,"bu.no":true,"fm.no":true,"hl.no":true,"hm.no":true,"jan-mayen.no":true,"mr.no":true,"nl.no":true,"nt.no":true,"of.no":true,"ol.no":true,"oslo.no":true,"rl.no":true,"sf.no":true,"st.no":true,"svalbard.no":true,"tm.no":true,"tr.no":true,"va.no":true,"vf.no":true,"gs.aa.no":true,"gs.ah.no":true,"gs.bu.no":true,"gs.fm.no":true,"gs.hl.no":true,"gs.hm.no":true,"gs.jan-mayen.no":true,"gs.mr.no":true,"gs.nl.no":true,"gs.nt.no":true,"gs.of.no":true,"gs.ol.no":true,"gs.oslo.no":true,"gs.rl.no":true,"gs.sf.no":true,"gs.st.no":true,"gs.svalbard.no":true,"gs.tm.no":true,"gs.tr.no":true,"gs.va.no":true,"gs.vf.no":true,"akrehamn.no":true,"xn--krehamn-dxa.no":true,"algard.no":true,"xn--lgrd-poac.no":true,"arna.no":true,"brumunddal.no":true,"bryne.no":true,"bronnoysund.no":true,"xn--brnnysund-m8ac.no":true,"drobak.no":true,"xn--drbak-wua.no":true,"egersund.no":true,"fetsund.no":true,"floro.no":true,"xn--flor-jra.no":true,"fredrikstad.no":true,"hokksund.no":true,"honefoss.no":true,"xn--hnefoss-q1a.no":true,"jessheim.no":true,"jorpeland.no":true,"xn--jrpeland-54a.no":true,"kirkenes.no":true,"kopervik.no":true,"krokstadelva.no":true,"langevag.no":true,"xn--langevg-jxa.no":true,"leirvik.no":true,"mjondalen.no":true,"xn--mjndalen-64a.no":true,"mo-i-rana.no":true,"mosjoen.no":true,"xn--mosjen-eya.no":true,"nesoddtangen.no":true,"orkanger.no":true,"osoyro.no":true,"xn--osyro-wua.no":true,"raholt.no":true,"xn--rholt-mra.no":true,"sandnessjoen.no":true,"xn--sandnessjen-ogb.no":true,"skedsmokorset.no":true,"slattum.no":true,"spjelkavik.no":true,"stathelle.no":true,"stavern.no":true,"stjordalshalsen.no":true,"xn--stjrdalshalsen-sqb.no":true,"tananger.no":true,"tranby.no":true,"vossevangen.no":true,"afjord.no":true,"xn--fjord-lra.no":true,"agdenes.no":true,"al.no":true,"xn--l-1fa.no":true,"alesund.no":true,"xn--lesund-hua.no":true,"alstahaug.no":true,"alta.no":true,"xn--lt-liac.no":true,"alaheadju.no":true,"xn--laheadju-7ya.no":true,"alvdal.no":true,"amli.no":true,"xn--mli-tla.no":true,"amot.no":true,"xn--mot-tla.no":true,"andebu.no":true,"andoy.no":true,"xn--andy-ira.no":true,"andasuolo.no":true,"ardal.no":true,"xn--rdal-poa.no":true,"aremark.no":true,"arendal.no":true,"xn--s-1fa.no":true,"aseral.no":true,"xn--seral-lra.no":true,"asker.no":true,"askim.no":true,"askvoll.no":true,"askoy.no":true,"xn--asky-ira.no":true,"asnes.no":true,"xn--snes-poa.no":true,"audnedaln.no":true,"aukra.no":true,"aure.no":true,"aurland.no":true,"aurskog-holand.no":true,"xn--aurskog-hland-jnb.no":true,"austevoll.no":true,"austrheim.no":true,"averoy.no":true,"xn--avery-yua.no":true,"balestrand.no":true,"ballangen.no":true,"balat.no":true,"xn--blt-elab.no":true,"balsfjord.no":true,"bahccavuotna.no":true,"xn--bhccavuotna-k7a.no":true,"bamble.no":true,"bardu.no":true,"beardu.no":true,"beiarn.no":true,"bajddar.no":true,"xn--bjddar-pta.no":true,"baidar.no":true,"xn--bidr-5nac.no":true,"berg.no":true,"bergen.no":true,"berlevag.no":true,"xn--berlevg-jxa.no":true,"bearalvahki.no":true,"xn--bearalvhki-y4a.no":true,"bindal.no":true,"birkenes.no":true,"bjarkoy.no":true,"xn--bjarky-fya.no":true,"bjerkreim.no":true,"bjugn.no":true,"bodo.no":true,"xn--bod-2na.no":true,"badaddja.no":true,"xn--bdddj-mrabd.no":true,"budejju.no":true,"bokn.no":true,"bremanger.no":true,"bronnoy.no":true,"xn--brnny-wuac.no":true,"bygland.no":true,"bykle.no":true,"barum.no":true,"xn--brum-voa.no":true,"bo.telemark.no":true,"xn--b-5ga.telemark.no":true,"bo.nordland.no":true,"xn--b-5ga.nordland.no":true,"bievat.no":true,"xn--bievt-0qa.no":true,"bomlo.no":true,"xn--bmlo-gra.no":true,"batsfjord.no":true,"xn--btsfjord-9za.no":true,"bahcavuotna.no":true,"xn--bhcavuotna-s4a.no":true,"dovre.no":true,"drammen.no":true,"drangedal.no":true,"dyroy.no":true,"xn--dyry-ira.no":true,"donna.no":true,"xn--dnna-gra.no":true,"eid.no":true,"eidfjord.no":true,"eidsberg.no":true,"eidskog.no":true,"eidsvoll.no":true,"eigersund.no":true,"elverum.no":true,"enebakk.no":true,"engerdal.no":true,"etne.no":true,"etnedal.no":true,"evenes.no":true,"evenassi.no":true,"xn--eveni-0qa01ga.no":true,"evje-og-hornnes.no":true,"farsund.no":true,"fauske.no":true,"fuossko.no":true,"fuoisku.no":true,"fedje.no":true,"fet.no":true,"finnoy.no":true,"xn--finny-yua.no":true,"fitjar.no":true,"fjaler.no":true,"fjell.no":true,"flakstad.no":true,"flatanger.no":true,"flekkefjord.no":true,"flesberg.no":true,"flora.no":true,"fla.no":true,"xn--fl-zia.no":true,"folldal.no":true,"forsand.no":true,"fosnes.no":true,"frei.no":true,"frogn.no":true,"froland.no":true,"frosta.no":true,"frana.no":true,"xn--frna-woa.no":true,"froya.no":true,"xn--frya-hra.no":true,"fusa.no":true,"fyresdal.no":true,"forde.no":true,"xn--frde-gra.no":true,"gamvik.no":true,"gangaviika.no":true,"xn--ggaviika-8ya47h.no":true,"gaular.no":true,"gausdal.no":true,"gildeskal.no":true,"xn--gildeskl-g0a.no":true,"giske.no":true,"gjemnes.no":true,"gjerdrum.no":true,"gjerstad.no":true,"gjesdal.no":true,"gjovik.no":true,"xn--gjvik-wua.no":true,"gloppen.no":true,"gol.no":true,"gran.no":true,"grane.no":true,"granvin.no":true,"gratangen.no":true,"grimstad.no":true,"grong.no":true,"kraanghke.no":true,"xn--kranghke-b0a.no":true,"grue.no":true,"gulen.no":true,"hadsel.no":true,"halden.no":true,"halsa.no":true,"hamar.no":true,"hamaroy.no":true,"habmer.no":true,"xn--hbmer-xqa.no":true,"hapmir.no":true,"xn--hpmir-xqa.no":true,"hammerfest.no":true,"hammarfeasta.no":true,"xn--hmmrfeasta-s4ac.no":true,"haram.no":true,"hareid.no":true,"harstad.no":true,"hasvik.no":true,"aknoluokta.no":true,"xn--koluokta-7ya57h.no":true,"hattfjelldal.no":true,"aarborte.no":true,"haugesund.no":true,"hemne.no":true,"hemnes.no":true,"hemsedal.no":true,"heroy.more-og-romsdal.no":true,"xn--hery-ira.xn--mre-og-romsdal-qqb.no":true,"heroy.nordland.no":true,"xn--hery-ira.nordland.no":true,"hitra.no":true,"hjartdal.no":true,"hjelmeland.no":true,"hobol.no":true,"xn--hobl-ira.no":true,"hof.no":true,"hol.no":true,"hole.no":true,"holmestrand.no":true,"holtalen.no":true,"xn--holtlen-hxa.no":true,"hornindal.no":true,"horten.no":true,"hurdal.no":true,"hurum.no":true,"hvaler.no":true,"hyllestad.no":true,"hagebostad.no":true,"xn--hgebostad-g3a.no":true,"hoyanger.no":true,"xn--hyanger-q1a.no":true,"hoylandet.no":true,"xn--hylandet-54a.no":true,"ha.no":true,"xn--h-2fa.no":true,"ibestad.no":true,"inderoy.no":true,"xn--indery-fya.no":true,"iveland.no":true,"jevnaker.no":true,"jondal.no":true,"jolster.no":true,"xn--jlster-bya.no":true,"karasjok.no":true,"karasjohka.no":true,"xn--krjohka-hwab49j.no":true,"karlsoy.no":true,"galsa.no":true,"xn--gls-elac.no":true,"karmoy.no":true,"xn--karmy-yua.no":true,"kautokeino.no":true,"guovdageaidnu.no":true,"klepp.no":true,"klabu.no":true,"xn--klbu-woa.no":true,"kongsberg.no":true,"kongsvinger.no":true,"kragero.no":true,"xn--krager-gya.no":true,"kristiansand.no":true,"kristiansund.no":true,"krodsherad.no":true,"xn--krdsherad-m8a.no":true,"kvalsund.no":true,"rahkkeravju.no":true,"xn--rhkkervju-01af.no":true,"kvam.no":true,"kvinesdal.no":true,"kvinnherad.no":true,"kviteseid.no":true,"kvitsoy.no":true,"xn--kvitsy-fya.no":true,"kvafjord.no":true,"xn--kvfjord-nxa.no":true,"giehtavuoatna.no":true,"kvanangen.no":true,"xn--kvnangen-k0a.no":true,"navuotna.no":true,"xn--nvuotna-hwa.no":true,"kafjord.no":true,"xn--kfjord-iua.no":true,"gaivuotna.no":true,"xn--givuotna-8ya.no":true,"larvik.no":true,"lavangen.no":true,"lavagis.no":true,"loabat.no":true,"xn--loabt-0qa.no":true,"lebesby.no":true,"davvesiida.no":true,"leikanger.no":true,"leirfjord.no":true,"leka.no":true,"leksvik.no":true,"lenvik.no":true,"leangaviika.no":true,"xn--leagaviika-52b.no":true,"lesja.no":true,"levanger.no":true,"lier.no":true,"lierne.no":true,"lillehammer.no":true,"lillesand.no":true,"lindesnes.no":true,"lindas.no":true,"xn--linds-pra.no":true,"lom.no":true,"loppa.no":true,"lahppi.no":true,"xn--lhppi-xqa.no":true,"lund.no":true,"lunner.no":true,"luroy.no":true,"xn--lury-ira.no":true,"luster.no":true,"lyngdal.no":true,"lyngen.no":true,"ivgu.no":true,"lardal.no":true,"lerdal.no":true,"xn--lrdal-sra.no":true,"lodingen.no":true,"xn--ldingen-q1a.no":true,"lorenskog.no":true,"xn--lrenskog-54a.no":true,"loten.no":true,"xn--lten-gra.no":true,"malvik.no":true,"masoy.no":true,"xn--msy-ula0h.no":true,"muosat.no":true,"xn--muost-0qa.no":true,"mandal.no":true,"marker.no":true,"marnardal.no":true,"masfjorden.no":true,"meland.no":true,"meldal.no":true,"melhus.no":true,"meloy.no":true,"xn--mely-ira.no":true,"meraker.no":true,"xn--merker-kua.no":true,"moareke.no":true,"xn--moreke-jua.no":true,"midsund.no":true,"midtre-gauldal.no":true,"modalen.no":true,"modum.no":true,"molde.no":true,"moskenes.no":true,"moss.no":true,"mosvik.no":true,"malselv.no":true,"xn--mlselv-iua.no":true,"malatvuopmi.no":true,"xn--mlatvuopmi-s4a.no":true,"namdalseid.no":true,"aejrie.no":true,"namsos.no":true,"namsskogan.no":true,"naamesjevuemie.no":true,"xn--nmesjevuemie-tcba.no":true,"laakesvuemie.no":true,"nannestad.no":true,"narvik.no":true,"narviika.no":true,"naustdal.no":true,"nedre-eiker.no":true,"nes.akershus.no":true,"nes.buskerud.no":true,"nesna.no":true,"nesodden.no":true,"nesseby.no":true,"unjarga.no":true,"xn--unjrga-rta.no":true,"nesset.no":true,"nissedal.no":true,"nittedal.no":true,"nord-aurdal.no":true,"nord-fron.no":true,"nord-odal.no":true,"norddal.no":true,"nordkapp.no":true,"davvenjarga.no":true,"xn--davvenjrga-y4a.no":true,"nordre-land.no":true,"nordreisa.no":true,"raisa.no":true,"xn--risa-5na.no":true,"nore-og-uvdal.no":true,"notodden.no":true,"naroy.no":true,"xn--nry-yla5g.no":true,"notteroy.no":true,"xn--nttery-byae.no":true,"odda.no":true,"oksnes.no":true,"xn--ksnes-uua.no":true,"oppdal.no":true,"oppegard.no":true,"xn--oppegrd-ixa.no":true,"orkdal.no":true,"orland.no":true,"xn--rland-uua.no":true,"orskog.no":true,"xn--rskog-uua.no":true,"orsta.no":true,"xn--rsta-fra.no":true,"os.hedmark.no":true,"os.hordaland.no":true,"osen.no":true,"osteroy.no":true,"xn--ostery-fya.no":true,"ostre-toten.no":true,"xn--stre-toten-zcb.no":true,"overhalla.no":true,"ovre-eiker.no":true,"xn--vre-eiker-k8a.no":true,"oyer.no":true,"xn--yer-zna.no":true,"oygarden.no":true,"xn--ygarden-p1a.no":true,"oystre-slidre.no":true,"xn--ystre-slidre-ujb.no":true,"porsanger.no":true,"porsangu.no":true,"xn--porsgu-sta26f.no":true,"porsgrunn.no":true,"radoy.no":true,"xn--rady-ira.no":true,"rakkestad.no":true,"rana.no":true,"ruovat.no":true,"randaberg.no":true,"rauma.no":true,"rendalen.no":true,"rennebu.no":true,"rennesoy.no":true,"xn--rennesy-v1a.no":true,"rindal.no":true,"ringebu.no":true,"ringerike.no":true,"ringsaker.no":true,"rissa.no":true,"risor.no":true,"xn--risr-ira.no":true,"roan.no":true,"rollag.no":true,"rygge.no":true,"ralingen.no":true,"xn--rlingen-mxa.no":true,"rodoy.no":true,"xn--rdy-0nab.no":true,"romskog.no":true,"xn--rmskog-bya.no":true,"roros.no":true,"xn--rros-gra.no":true,"rost.no":true,"xn--rst-0na.no":true,"royken.no":true,"xn--ryken-vua.no":true,"royrvik.no":true,"xn--ryrvik-bya.no":true,"rade.no":true,"xn--rde-ula.no":true,"salangen.no":true,"siellak.no":true,"saltdal.no":true,"salat.no":true,"xn--slt-elab.no":true,"xn--slat-5na.no":true,"samnanger.no":true,"sande.more-og-romsdal.no":true,"sande.xn--mre-og-romsdal-qqb.no":true,"sande.vestfold.no":true,"sandefjord.no":true,"sandnes.no":true,"sandoy.no":true,"xn--sandy-yua.no":true,"sarpsborg.no":true,"sauda.no":true,"sauherad.no":true,"sel.no":true,"selbu.no":true,"selje.no":true,"seljord.no":true,"sigdal.no":true,"siljan.no":true,"sirdal.no":true,"skaun.no":true,"skedsmo.no":true,"ski.no":true,"skien.no":true,"skiptvet.no":true,"skjervoy.no":true,"xn--skjervy-v1a.no":true,"skierva.no":true,"xn--skierv-uta.no":true,"skjak.no":true,"xn--skjk-soa.no":true,"skodje.no":true,"skanland.no":true,"xn--sknland-fxa.no":true,"skanit.no":true,"xn--sknit-yqa.no":true,"smola.no":true,"xn--smla-hra.no":true,"snillfjord.no":true,"snasa.no":true,"xn--snsa-roa.no":true,"snoasa.no":true,"snaase.no":true,"xn--snase-nra.no":true,"sogndal.no":true,"sokndal.no":true,"sola.no":true,"solund.no":true,"songdalen.no":true,"sortland.no":true,"spydeberg.no":true,"stange.no":true,"stavanger.no":true,"steigen.no":true,"steinkjer.no":true,"stjordal.no":true,"xn--stjrdal-s1a.no":true,"stokke.no":true,"stor-elvdal.no":true,"stord.no":true,"stordal.no":true,"storfjord.no":true,"omasvuotna.no":true,"strand.no":true,"stranda.no":true,"stryn.no":true,"sula.no":true,"suldal.no":true,"sund.no":true,"sunndal.no":true,"surnadal.no":true,"sveio.no":true,"svelvik.no":true,"sykkylven.no":true,"sogne.no":true,"xn--sgne-gra.no":true,"somna.no":true,"xn--smna-gra.no":true,"sondre-land.no":true,"xn--sndre-land-0cb.no":true,"sor-aurdal.no":true,"xn--sr-aurdal-l8a.no":true,"sor-fron.no":true,"xn--sr-fron-q1a.no":true,"sor-odal.no":true,"xn--sr-odal-q1a.no":true,"sor-varanger.no":true,"xn--sr-varanger-ggb.no":true,"matta-varjjat.no":true,"xn--mtta-vrjjat-k7af.no":true,"sorfold.no":true,"xn--srfold-bya.no":true,"sorreisa.no":true,"xn--srreisa-q1a.no":true,"sorum.no":true,"xn--srum-gra.no":true,"tana.no":true,"deatnu.no":true,"time.no":true,"tingvoll.no":true,"tinn.no":true,"tjeldsund.no":true,"dielddanuorri.no":true,"tjome.no":true,"xn--tjme-hra.no":true,"tokke.no":true,"tolga.no":true,"torsken.no":true,"tranoy.no":true,"xn--trany-yua.no":true,"tromso.no":true,"xn--troms-zua.no":true,"tromsa.no":true,"romsa.no":true,"trondheim.no":true,"troandin.no":true,"trysil.no":true,"trana.no":true,"xn--trna-woa.no":true,"trogstad.no":true,"xn--trgstad-r1a.no":true,"tvedestrand.no":true,"tydal.no":true,"tynset.no":true,"tysfjord.no":true,"divtasvuodna.no":true,"divttasvuotna.no":true,"tysnes.no":true,"tysvar.no":true,"xn--tysvr-vra.no":true,"tonsberg.no":true,"xn--tnsberg-q1a.no":true,"ullensaker.no":true,"ullensvang.no":true,"ulvik.no":true,"utsira.no":true,"vadso.no":true,"xn--vads-jra.no":true,"cahcesuolo.no":true,"xn--hcesuolo-7ya35b.no":true,"vaksdal.no":true,"valle.no":true,"vang.no":true,"vanylven.no":true,"vardo.no":true,"xn--vard-jra.no":true,"varggat.no":true,"xn--vrggt-xqad.no":true,"vefsn.no":true,"vaapste.no":true,"vega.no":true,"vegarshei.no":true,"xn--vegrshei-c0a.no":true,"vennesla.no":true,"verdal.no":true,"verran.no":true,"vestby.no":true,"vestnes.no":true,"vestre-slidre.no":true,"vestre-toten.no":true,"vestvagoy.no":true,"xn--vestvgy-ixa6o.no":true,"vevelstad.no":true,"vik.no":true,"vikna.no":true,"vindafjord.no":true,"volda.no":true,"voss.no":true,"varoy.no":true,"xn--vry-yla5g.no":true,"vagan.no":true,"xn--vgan-qoa.no":true,"voagat.no":true,"vagsoy.no":true,"xn--vgsy-qoa0j.no":true,"vaga.no":true,"xn--vg-yiab.no":true,"valer.ostfold.no":true,"xn--vler-qoa.xn--stfold-9xa.no":true,"valer.hedmark.no":true,"xn--vler-qoa.hedmark.no":true,"*.np":true,nr:true,"biz.nr":true,"info.nr":true,"gov.nr":true,"edu.nr":true,"org.nr":true,"net.nr":true,"com.nr":true,nu:true,nz:true,"ac.nz":true,"co.nz":true,"cri.nz":true,"geek.nz":true,"gen.nz":true,"govt.nz":true,"health.nz":true,"iwi.nz":true,"kiwi.nz":true,"maori.nz":true,"mil.nz":true,"xn--mori-qsa.nz":true,"net.nz":true,"org.nz":true,"parliament.nz":true,"school.nz":true,om:true,"co.om":true,"com.om":true,"edu.om":true,"gov.om":true,"med.om":true,"museum.om":true,"net.om":true,"org.om":true,"pro.om":true,org:true,pa:true,"ac.pa":true,"gob.pa":true,"com.pa":true,"org.pa":true,"sld.pa":true,"edu.pa":true,"net.pa":true,"ing.pa":true,"abo.pa":true,"med.pa":true,"nom.pa":true,pe:true,"edu.pe":true,"gob.pe":true,"nom.pe":true,"mil.pe":true,"org.pe":true,"com.pe":true,"net.pe":true,pf:true,"com.pf":true,"org.pf":true,"edu.pf":true,"*.pg":true,ph:true,"com.ph":true,"net.ph":true,"org.ph":true,"gov.ph":true,"edu.ph":true,"ngo.ph":true,"mil.ph":true,"i.ph":true,pk:true,"com.pk":true,"net.pk":true,"edu.pk":true,"org.pk":true,"fam.pk":true,"biz.pk":true,"web.pk":true,"gov.pk":true,"gob.pk":true,"gok.pk":true,"gon.pk":true,"gop.pk":true,"gos.pk":true,"info.pk":true,pl:true,"com.pl":true,"net.pl":true,"org.pl":true,"aid.pl":true,"agro.pl":true,"atm.pl":true,"auto.pl":true,"biz.pl":true,"edu.pl":true,"gmina.pl":true,"gsm.pl":true,"info.pl":true,"mail.pl":true,"miasta.pl":true,"media.pl":true,"mil.pl":true,"nieruchomosci.pl":true,"nom.pl":true,"pc.pl":true,"powiat.pl":true,"priv.pl":true,"realestate.pl":true,"rel.pl":true,"sex.pl":true,"shop.pl":true,"sklep.pl":true,"sos.pl":true,"szkola.pl":true,"targi.pl":true,"tm.pl":true,"tourism.pl":true,"travel.pl":true,"turystyka.pl":true,"gov.pl":true,"ap.gov.pl":true,"ic.gov.pl":true,"is.gov.pl":true,"us.gov.pl":true,"kmpsp.gov.pl":true,"kppsp.gov.pl":true,"kwpsp.gov.pl":true,"psp.gov.pl":true,"wskr.gov.pl":true,"kwp.gov.pl":true,"mw.gov.pl":true,"ug.gov.pl":true,"um.gov.pl":true,"umig.gov.pl":true,"ugim.gov.pl":true,"upow.gov.pl":true,"uw.gov.pl":true,"starostwo.gov.pl":true,"pa.gov.pl":true,"po.gov.pl":true,"psse.gov.pl":true,"pup.gov.pl":true,"rzgw.gov.pl":true,"sa.gov.pl":true,"so.gov.pl":true,"sr.gov.pl":true,"wsa.gov.pl":true,"sko.gov.pl":true,"uzs.gov.pl":true,"wiih.gov.pl":true,"winb.gov.pl":true,"pinb.gov.pl":true,"wios.gov.pl":true,"witd.gov.pl":true,"wzmiuw.gov.pl":true,"piw.gov.pl":true,"wiw.gov.pl":true,"griw.gov.pl":true,"wif.gov.pl":true,"oum.gov.pl":true,"sdn.gov.pl":true,"zp.gov.pl":true,"uppo.gov.pl":true,"mup.gov.pl":true,"wuoz.gov.pl":true,"konsulat.gov.pl":true,"oirm.gov.pl":true,"augustow.pl":true,"babia-gora.pl":true,"bedzin.pl":true,"beskidy.pl":true,"bialowieza.pl":true,"bialystok.pl":true,"bielawa.pl":true,"bieszczady.pl":true,"boleslawiec.pl":true,"bydgoszcz.pl":true,"bytom.pl":true,"cieszyn.pl":true,"czeladz.pl":true,"czest.pl":true,"dlugoleka.pl":true,"elblag.pl":true,"elk.pl":true,"glogow.pl":true,"gniezno.pl":true,"gorlice.pl":true,"grajewo.pl":true,"ilawa.pl":true,"jaworzno.pl":true,"jelenia-gora.pl":true,"jgora.pl":true,"kalisz.pl":true,"kazimierz-dolny.pl":true,"karpacz.pl":true,"kartuzy.pl":true,"kaszuby.pl":true,"katowice.pl":true,"kepno.pl":true,"ketrzyn.pl":true,"klodzko.pl":true,"kobierzyce.pl":true,"kolobrzeg.pl":true,"konin.pl":true,"konskowola.pl":true,"kutno.pl":true,"lapy.pl":true,"lebork.pl":true,"legnica.pl":true,"lezajsk.pl":true,"limanowa.pl":true,"lomza.pl":true,"lowicz.pl":true,"lubin.pl":true,"lukow.pl":true,"malbork.pl":true,"malopolska.pl":true,"mazowsze.pl":true,"mazury.pl":true,"mielec.pl":true,"mielno.pl":true,"mragowo.pl":true,"naklo.pl":true,"nowaruda.pl":true,"nysa.pl":true,"olawa.pl":true,"olecko.pl":true,"olkusz.pl":true,"olsztyn.pl":true,"opoczno.pl":true,"opole.pl":true,"ostroda.pl":true,"ostroleka.pl":true,"ostrowiec.pl":true,"ostrowwlkp.pl":true,"pila.pl":true,"pisz.pl":true,"podhale.pl":true,"podlasie.pl":true,"polkowice.pl":true,"pomorze.pl":true,"pomorskie.pl":true,"prochowice.pl":true,"pruszkow.pl":true,"przeworsk.pl":true,"pulawy.pl":true,"radom.pl":true,"rawa-maz.pl":true,"rybnik.pl":true,"rzeszow.pl":true,"sanok.pl":true,"sejny.pl":true,"slask.pl":true,"slupsk.pl":true,"sosnowiec.pl":true,"stalowa-wola.pl":true,"skoczow.pl":true,"starachowice.pl":true,"stargard.pl":true,"suwalki.pl":true,"swidnica.pl":true,"swiebodzin.pl":true,"swinoujscie.pl":true,"szczecin.pl":true,"szczytno.pl":true,"tarnobrzeg.pl":true,"tgory.pl":true,"turek.pl":true,"tychy.pl":true,"ustka.pl":true,"walbrzych.pl":true,"warmia.pl":true,"warszawa.pl":true,"waw.pl":true,"wegrow.pl":true,"wielun.pl":true,"wlocl.pl":true,"wloclawek.pl":true,"wodzislaw.pl":true,"wolomin.pl":true,"wroclaw.pl":true,"zachpomor.pl":true,"zagan.pl":true,"zarow.pl":true,"zgora.pl":true,"zgorzelec.pl":true,pm:true,pn:true,"gov.pn":true,"co.pn":true,"org.pn":true,"edu.pn":true,"net.pn":true,post:true,pr:true,"com.pr":true,"net.pr":true,"org.pr":true,"gov.pr":true,"edu.pr":true,"isla.pr":true,"pro.pr":true,"biz.pr":true,"info.pr":true,"name.pr":true,"est.pr":true,"prof.pr":true,"ac.pr":true,pro:true,"aaa.pro":true,"aca.pro":true,"acct.pro":true,"avocat.pro":true,"bar.pro":true,"cpa.pro":true,"eng.pro":true,"jur.pro":true,"law.pro":true,"med.pro":true,"recht.pro":true,ps:true,"edu.ps":true,"gov.ps":true,"sec.ps":true,"plo.ps":true,"com.ps":true,"org.ps":true,"net.ps":true,pt:true,"net.pt":true,"gov.pt":true,"org.pt":true,"edu.pt":true,"int.pt":true,"publ.pt":true,"com.pt":true,"nome.pt":true,pw:true,"co.pw":true,"ne.pw":true,"or.pw":true,"ed.pw":true,"go.pw":true,"belau.pw":true,py:true,"com.py":true,"coop.py":true,"edu.py":true,"gov.py":true,"mil.py":true,"net.py":true,"org.py":true,qa:true,"com.qa":true,"edu.qa":true,"gov.qa":true,"mil.qa":true,"name.qa":true,"net.qa":true,"org.qa":true,"sch.qa":true,re:true,"asso.re":true,"com.re":true,"nom.re":true,ro:true,"arts.ro":true,"com.ro":true,"firm.ro":true,"info.ro":true,"nom.ro":true,"nt.ro":true,"org.ro":true,"rec.ro":true,"store.ro":true,"tm.ro":true,"www.ro":true,rs:true,"ac.rs":true,"co.rs":true,"edu.rs":true,"gov.rs":true,"in.rs":true,"org.rs":true,ru:true,"ac.ru":true,"com.ru":true,"edu.ru":true,"int.ru":true,"net.ru":true,"org.ru":true,"pp.ru":true,"adygeya.ru":true,"altai.ru":true,"amur.ru":true,"arkhangelsk.ru":true,"astrakhan.ru":true,"bashkiria.ru":true,"belgorod.ru":true,"bir.ru":true,"bryansk.ru":true,"buryatia.ru":true,"cbg.ru":true,"chel.ru":true,"chelyabinsk.ru":true,"chita.ru":true,"chukotka.ru":true,"chuvashia.ru":true,"dagestan.ru":true,"dudinka.ru":true,"e-burg.ru":true,"grozny.ru":true,"irkutsk.ru":true,"ivanovo.ru":true,"izhevsk.ru":true,"jar.ru":true,"joshkar-ola.ru":true,"kalmykia.ru":true,"kaluga.ru":true,"kamchatka.ru":true,"karelia.ru":true,"kazan.ru":true,"kchr.ru":true,"kemerovo.ru":true,"khabarovsk.ru":true,"khakassia.ru":true,"khv.ru":true,"kirov.ru":true,"koenig.ru":true,"komi.ru":true,"kostroma.ru":true,"krasnoyarsk.ru":true,"kuban.ru":true,"kurgan.ru":true,"kursk.ru":true,"lipetsk.ru":true,"magadan.ru":true,"mari.ru":true,"mari-el.ru":true,"marine.ru":true,"mordovia.ru":true,"msk.ru":true,"murmansk.ru":true,"nalchik.ru":true,"nnov.ru":true,"nov.ru":true,"novosibirsk.ru":true,"nsk.ru":true,"omsk.ru":true,"orenburg.ru":true,"oryol.ru":true,"palana.ru":true,"penza.ru":true,"perm.ru":true,"ptz.ru":true,"rnd.ru":true,"ryazan.ru":true,"sakhalin.ru":true,"samara.ru":true,"saratov.ru":true,"simbirsk.ru":true,"smolensk.ru":true,"spb.ru":true,"stavropol.ru":true,"stv.ru":true,"surgut.ru":true,"tambov.ru":true,"tatarstan.ru":true,"tom.ru":true,"tomsk.ru":true,"tsaritsyn.ru":true,"tsk.ru":true,"tula.ru":true,"tuva.ru":true,"tver.ru":true,"tyumen.ru":true,"udm.ru":true,"udmurtia.ru":true,"ulan-ude.ru":true,"vladikavkaz.ru":true,"vladimir.ru":true,"vladivostok.ru":true,"volgograd.ru":true,"vologda.ru":true,"voronezh.ru":true,"vrn.ru":true,"vyatka.ru":true,"yakutia.ru":true,"yamal.ru":true,"yaroslavl.ru":true,"yekaterinburg.ru":true,"yuzhno-sakhalinsk.ru":true,"amursk.ru":true,"baikal.ru":true,"cmw.ru":true,"fareast.ru":true,"jamal.ru":true,"kms.ru":true,"k-uralsk.ru":true,"kustanai.ru":true,"kuzbass.ru":true,"mytis.ru":true,"nakhodka.ru":true,"nkz.ru":true,"norilsk.ru":true,"oskol.ru":true,"pyatigorsk.ru":true,"rubtsovsk.ru":true,"snz.ru":true,"syzran.ru":true,"vdonsk.ru":true,"zgrad.ru":true,"gov.ru":true,"mil.ru":true,"test.ru":true,rw:true,"gov.rw":true,"net.rw":true,"edu.rw":true,"ac.rw":true,"com.rw":true,"co.rw":true,"int.rw":true,"mil.rw":true,"gouv.rw":true,sa:true,"com.sa":true,"net.sa":true,"org.sa":true,"gov.sa":true,"med.sa":true,"pub.sa":true,"edu.sa":true,"sch.sa":true,sb:true,"com.sb":true,"edu.sb":true,"gov.sb":true,"net.sb":true,"org.sb":true,sc:true,"com.sc":true,"gov.sc":true,"net.sc":true,"org.sc":true,"edu.sc":true,sd:true,"com.sd":true,"net.sd":true,"org.sd":true,"edu.sd":true,"med.sd":true,"tv.sd":true,"gov.sd":true,"info.sd":true,se:true,"a.se":true,"ac.se":true,"b.se":true,"bd.se":true,"brand.se":true,"c.se":true,"d.se":true,"e.se":true,"f.se":true,"fh.se":true,"fhsk.se":true,"fhv.se":true,"g.se":true,"h.se":true,"i.se":true,"k.se":true,"komforb.se":true,"kommunalforbund.se":true,"komvux.se":true,"l.se":true,"lanbib.se":true,"m.se":true,"n.se":true,"naturbruksgymn.se":true,"o.se":true,"org.se":true,"p.se":true,"parti.se":true,"pp.se":true,"press.se":true,"r.se":true,"s.se":true,"t.se":true,"tm.se":true,"u.se":true,"w.se":true,"x.se":true,"y.se":true,"z.se":true,sg:true,"com.sg":true,"net.sg":true,"org.sg":true,"gov.sg":true,"edu.sg":true,"per.sg":true,sh:true,"com.sh":true,"net.sh":true,"gov.sh":true,"org.sh":true,"mil.sh":true,si:true,sj:true,sk:true,sl:true,"com.sl":true,"net.sl":true,"edu.sl":true,"gov.sl":true,"org.sl":true,sm:true,sn:true,"art.sn":true,"com.sn":true,"edu.sn":true,"gouv.sn":true,"org.sn":true,"perso.sn":true,"univ.sn":true,so:true,"com.so":true,"net.so":true,"org.so":true,sr:true,st:true,"co.st":true,"com.st":true,"consulado.st":true,"edu.st":true,"embaixada.st":true,"gov.st":true,"mil.st":true,"net.st":true,"org.st":true,"principe.st":true,"saotome.st":true,"store.st":true,su:true,"adygeya.su":true,"arkhangelsk.su":true,"balashov.su":true,"bashkiria.su":true,"bryansk.su":true,"dagestan.su":true,"grozny.su":true,"ivanovo.su":true,"kalmykia.su":true,"kaluga.su":true,"karelia.su":true,"khakassia.su":true,"krasnodar.su":true,"kurgan.su":true,"lenug.su":true,"mordovia.su":true,"msk.su":true,"murmansk.su":true,"nalchik.su":true,"nov.su":true,"obninsk.su":true,"penza.su":true,"pokrovsk.su":true,"sochi.su":true,"spb.su":true,"togliatti.su":true,"troitsk.su":true,"tula.su":true,"tuva.su":true,"vladikavkaz.su":true,"vladimir.su":true,"vologda.su":true,sv:true,"com.sv":true,"edu.sv":true,"gob.sv":true,"org.sv":true,"red.sv":true,sx:true,"gov.sx":true,sy:true,"edu.sy":true,"gov.sy":true,"net.sy":true,"mil.sy":true,"com.sy":true,"org.sy":true,sz:true,"co.sz":true,"ac.sz":true,"org.sz":true,tc:true,td:true,tel:true,tf:true,tg:true,th:true,"ac.th":true,"co.th":true,"go.th":true,"in.th":true,"mi.th":true,"net.th":true,"or.th":true,tj:true,"ac.tj":true,"biz.tj":true,"co.tj":true,"com.tj":true,"edu.tj":true,"go.tj":true,"gov.tj":true,"int.tj":true,"mil.tj":true,"name.tj":true,"net.tj":true,"nic.tj":true,"org.tj":true,"test.tj":true,"web.tj":true,tk:true,tl:true,"gov.tl":true,tm:true,"com.tm":true,"co.tm":true,"org.tm":true,"net.tm":true,"nom.tm":true,"gov.tm":true,"mil.tm":true,"edu.tm":true,tn:true,"com.tn":true,"ens.tn":true,"fin.tn":true,"gov.tn":true,"ind.tn":true,"intl.tn":true,"nat.tn":true,"net.tn":true,"org.tn":true,"info.tn":true,"perso.tn":true,"tourism.tn":true,"edunet.tn":true,"rnrt.tn":true,"rns.tn":true,"rnu.tn":true,"mincom.tn":true,"agrinet.tn":true,"defense.tn":true,"turen.tn":true,to:true,"com.to":true,"gov.to":true,"net.to":true,"org.to":true,"edu.to":true,"mil.to":true,tr:true,"com.tr":true,"info.tr":true,"biz.tr":true,"net.tr":true,"org.tr":true,"web.tr":true,"gen.tr":true,"tv.tr":true,"av.tr":true,"dr.tr":true,"bbs.tr":true,"name.tr":true,"tel.tr":true,"gov.tr":true,"bel.tr":true,"pol.tr":true,"mil.tr":true,"k12.tr":true,"edu.tr":true,"kep.tr":true,"nc.tr":true,"gov.nc.tr":true,travel:true,tt:true,"co.tt":true,"com.tt":true,"org.tt":true,"net.tt":true,"biz.tt":true,"info.tt":true,"pro.tt":true,"int.tt":true,"coop.tt":true,"jobs.tt":true,"mobi.tt":true,"travel.tt":true,"museum.tt":true,"aero.tt":true,"name.tt":true,"gov.tt":true,"edu.tt":true,tv:true,tw:true,"edu.tw":true,"gov.tw":true,"mil.tw":true,"com.tw":true,"net.tw":true,"org.tw":true,"idv.tw":true,"game.tw":true,"ebiz.tw":true,"club.tw":true,"xn--zf0ao64a.tw":true,"xn--uc0atv.tw":true,"xn--czrw28b.tw":true,tz:true,"ac.tz":true,"co.tz":true,"go.tz":true,"hotel.tz":true,"info.tz":true,"me.tz":true,"mil.tz":true,"mobi.tz":true,"ne.tz":true,"or.tz":true,"sc.tz":true,"tv.tz":true,ua:true,"com.ua":true,"edu.ua":true,"gov.ua":true,"in.ua":true,"net.ua":true,"org.ua":true,"cherkassy.ua":true,"cherkasy.ua":true,"chernigov.ua":true,"chernihiv.ua":true,"chernivtsi.ua":true,"chernovtsy.ua":true,"ck.ua":true,"cn.ua":true,"cr.ua":true,"crimea.ua":true,"cv.ua":true,"dn.ua":true,"dnepropetrovsk.ua":true,"dnipropetrovsk.ua":true,"dominic.ua":true,"donetsk.ua":true,"dp.ua":true,"if.ua":true,"ivano-frankivsk.ua":true,"kh.ua":true,"kharkiv.ua":true,"kharkov.ua":true,"kherson.ua":true,"khmelnitskiy.ua":true,"khmelnytskyi.ua":true,"kiev.ua":true,"kirovograd.ua":true,"km.ua":true,"kr.ua":true,"krym.ua":true,"ks.ua":true,"kv.ua":true,"kyiv.ua":true,"lg.ua":true,"lt.ua":true,"lugansk.ua":true,"lutsk.ua":true,"lv.ua":true,"lviv.ua":true,"mk.ua":true,"mykolaiv.ua":true,"nikolaev.ua":true,"od.ua":true,"odesa.ua":true,"odessa.ua":true,"pl.ua":true,"poltava.ua":true,"rivne.ua":true,"rovno.ua":true,"rv.ua":true,"sb.ua":true,"sebastopol.ua":true,"sevastopol.ua":true,"sm.ua":true,"sumy.ua":true,"te.ua":true,"ternopil.ua":true,"uz.ua":true,"uzhgorod.ua":true,"vinnica.ua":true,"vinnytsia.ua":true,"vn.ua":true,"volyn.ua":true,"yalta.ua":true,"zaporizhzhe.ua":true,"zaporizhzhia.ua":true,"zhitomir.ua":true,"zhytomyr.ua":true,"zp.ua":true,"zt.ua":true,ug:true,"co.ug":true,"or.ug":true,"ac.ug":true,"sc.ug":true,"go.ug":true,"ne.ug":true,"com.ug":true,"org.ug":true,uk:true,"ac.uk":true,"co.uk":true,"gov.uk":true,"ltd.uk":true,"me.uk":true,"net.uk":true,"nhs.uk":true,"org.uk":true,"plc.uk":true,"police.uk":true,"*.sch.uk":true,us:true,"dni.us":true,"fed.us":true,"isa.us":true,"kids.us":true,"nsn.us":true,"ak.us":true,"al.us":true,"ar.us":true,"as.us":true,"az.us":true,"ca.us":true,"co.us":true,"ct.us":true,"dc.us":true,"de.us":true,"fl.us":true,"ga.us":true,"gu.us":true,"hi.us":true,"ia.us":true,"id.us":true,"il.us":true,"in.us":true,"ks.us":true,"ky.us":true,"la.us":true,"ma.us":true,"md.us":true,"me.us":true,"mi.us":true,"mn.us":true,"mo.us":true,"ms.us":true,"mt.us":true,"nc.us":true,"nd.us":true,"ne.us":true,"nh.us":true,"nj.us":true,"nm.us":true,"nv.us":true,"ny.us":true,"oh.us":true,"ok.us":true,"or.us":true,"pa.us":true,"pr.us":true,"ri.us":true,"sc.us":true,"sd.us":true,"tn.us":true,"tx.us":true,"ut.us":true,"vi.us":true,"vt.us":true,"va.us":true,"wa.us":true,"wi.us":true,"wv.us":true,"wy.us":true,"k12.ak.us":true,"k12.al.us":true,"k12.ar.us":true,"k12.as.us":true,"k12.az.us":true,"k12.ca.us":true,"k12.co.us":true,"k12.ct.us":true,"k12.dc.us":true,"k12.de.us":true,"k12.fl.us":true,"k12.ga.us":true,"k12.gu.us":true,"k12.ia.us":true,"k12.id.us":true,"k12.il.us":true,"k12.in.us":true,"k12.ks.us":true,"k12.ky.us":true,"k12.la.us":true,"k12.ma.us":true,"k12.md.us":true,"k12.me.us":true,"k12.mi.us":true,"k12.mn.us":true,"k12.mo.us":true,"k12.ms.us":true,"k12.mt.us":true,"k12.nc.us":true,"k12.ne.us":true,"k12.nh.us":true,"k12.nj.us":true,"k12.nm.us":true,"k12.nv.us":true,"k12.ny.us":true,"k12.oh.us":true,"k12.ok.us":true,"k12.or.us":true,"k12.pa.us":true,"k12.pr.us":true,"k12.ri.us":true,"k12.sc.us":true,"k12.tn.us":true,"k12.tx.us":true,"k12.ut.us":true,"k12.vi.us":true,"k12.vt.us":true,"k12.va.us":true,"k12.wa.us":true,"k12.wi.us":true,"k12.wy.us":true,"cc.ak.us":true,"cc.al.us":true,"cc.ar.us":true,"cc.as.us":true,"cc.az.us":true,"cc.ca.us":true,"cc.co.us":true,"cc.ct.us":true,"cc.dc.us":true,"cc.de.us":true,"cc.fl.us":true,"cc.ga.us":true,"cc.gu.us":true,"cc.hi.us":true,"cc.ia.us":true,"cc.id.us":true,"cc.il.us":true,"cc.in.us":true,"cc.ks.us":true,"cc.ky.us":true,"cc.la.us":true,"cc.ma.us":true,"cc.md.us":true,"cc.me.us":true,"cc.mi.us":true,"cc.mn.us":true,"cc.mo.us":true,"cc.ms.us":true,"cc.mt.us":true,"cc.nc.us":true,"cc.nd.us":true,"cc.ne.us":true,"cc.nh.us":true,"cc.nj.us":true,"cc.nm.us":true,"cc.nv.us":true,"cc.ny.us":true,"cc.oh.us":true,"cc.ok.us":true,"cc.or.us":true,"cc.pa.us":true,"cc.pr.us":true,"cc.ri.us":true,"cc.sc.us":true,"cc.sd.us":true,"cc.tn.us":true,"cc.tx.us":true,"cc.ut.us":true,"cc.vi.us":true,"cc.vt.us":true,"cc.va.us":true,"cc.wa.us":true,"cc.wi.us":true,"cc.wv.us":true,"cc.wy.us":true,"lib.ak.us":true,"lib.al.us":true,"lib.ar.us":true,"lib.as.us":true,"lib.az.us":true,"lib.ca.us":true,"lib.co.us":true,"lib.ct.us":true,"lib.dc.us":true,"lib.fl.us":true,"lib.ga.us":true,"lib.gu.us":true,"lib.hi.us":true,"lib.ia.us":true,"lib.id.us":true,"lib.il.us":true,"lib.in.us":true,"lib.ks.us":true,"lib.ky.us":true,"lib.la.us":true,"lib.ma.us":true,"lib.md.us":true,"lib.me.us":true,"lib.mi.us":true,"lib.mn.us":true,"lib.mo.us":true,"lib.ms.us":true,"lib.mt.us":true,"lib.nc.us":true,"lib.nd.us":true,"lib.ne.us":true,"lib.nh.us":true,"lib.nj.us":true,"lib.nm.us":true,"lib.nv.us":true,"lib.ny.us":true,"lib.oh.us":true,"lib.ok.us":true,"lib.or.us":true,"lib.pa.us":true,"lib.pr.us":true,"lib.ri.us":true,"lib.sc.us":true,"lib.sd.us":true,"lib.tn.us":true,"lib.tx.us":true,"lib.ut.us":true,"lib.vi.us":true,"lib.vt.us":true,"lib.va.us":true,"lib.wa.us":true,"lib.wi.us":true,"lib.wy.us":true,"pvt.k12.ma.us":true,"chtr.k12.ma.us":true,"paroch.k12.ma.us":true,uy:true,"com.uy":true,"edu.uy":true,"gub.uy":true,"mil.uy":true,"net.uy":true,"org.uy":true,uz:true,"co.uz":true,"com.uz":true,"net.uz":true,"org.uz":true,va:true,vc:true,"com.vc":true,"net.vc":true,"org.vc":true,"gov.vc":true,"mil.vc":true,"edu.vc":true,ve:true,"arts.ve":true,"co.ve":true,"com.ve":true,"e12.ve":true,"edu.ve":true,"firm.ve":true,"gob.ve":true,"gov.ve":true,"info.ve":true,"int.ve":true,"mil.ve":true,"net.ve":true,"org.ve":true,"rec.ve":true,"store.ve":true,"tec.ve":true,"web.ve":true,vg:true,vi:true,"co.vi":true,"com.vi":true,"k12.vi":true,"net.vi":true,"org.vi":true,vn:true,"com.vn":true,"net.vn":true,"org.vn":true,"edu.vn":true,"gov.vn":true,"int.vn":true,"ac.vn":true,"biz.vn":true,"info.vn":true,"name.vn":true,"pro.vn":true,"health.vn":true,vu:true,"com.vu":true,"edu.vu":true,"net.vu":true,"org.vu":true,wf:true,ws:true,"com.ws":true,"net.ws":true,"org.ws":true,"gov.ws":true,"edu.ws":true,yt:true,"xn--mgbaam7a8h":true,"xn--y9a3aq":true,"xn--54b7fta0cc":true,"xn--90ais":true,"xn--fiqs8s":true,"xn--fiqz9s":true,"xn--lgbbat1ad8j":true,"xn--wgbh1c":true,"xn--e1a4c":true,"xn--node":true,"xn--qxam":true,"xn--j6w193g":true,"xn--h2brj9c":true,"xn--mgbbh1a71e":true,"xn--fpcrj9c3d":true,"xn--gecrj9c":true,"xn--s9brj9c":true,"xn--45brj9c":true,"xn--xkc2dl3a5ee0h":true,"xn--mgba3a4f16a":true,"xn--mgba3a4fra":true,"xn--mgbtx2b":true,"xn--mgbayh7gpa":true,"xn--3e0b707e":true,"xn--80ao21a":true,"xn--fzc2c9e2c":true,"xn--xkc2al3hye2a":true,"xn--mgbc0a9azcg":true,"xn--d1alf":true,"xn--l1acc":true,"xn--mix891f":true,"xn--mix082f":true,"xn--mgbx4cd0ab":true,"xn--mgb9awbf":true,"xn--mgbai9azgqp6j":true,"xn--mgbai9a5eva00b":true,"xn--ygbi2ammx":true,"xn--90a3ac":true,"xn--o1ac.xn--90a3ac":true,"xn--c1avg.xn--90a3ac":true,"xn--90azh.xn--90a3ac":true,"xn--d1at.xn--90a3ac":true,"xn--o1ach.xn--90a3ac":true,"xn--80au.xn--90a3ac":true,"xn--p1ai":true,"xn--wgbl6a":true,"xn--mgberp4a5d4ar":true,"xn--mgberp4a5d4a87g":true,"xn--mgbqly7c0a67fbc":true,"xn--mgbqly7cvafr":true,"xn--mgbpl2fh":true,"xn--yfro4i67o":true,"xn--clchc0ea0b2g2a9gcd":true,"xn--ogbpf8fl":true,"xn--mgbtf8fl":true,"xn--o3cw4h":true,"xn--pgbs0dh":true,"xn--kpry57d":true,"xn--kprw13d":true,"xn--nnx388a":true,"xn--j1amh":true,"xn--mgb2ddes":true,xxx:true,"*.ye":true,"ac.za":true,"agric.za":true,"alt.za":true,"co.za":true,"edu.za":true,"gov.za":true,"grondar.za":true,"law.za":true,"mil.za":true,"net.za":true,"ngo.za":true,"nis.za":true,"nom.za":true,"org.za":true,"school.za":true,"tm.za":true,"web.za":true,zm:true,"ac.zm":true,"biz.zm":true,"co.zm":true,"com.zm":true,"edu.zm":true,"gov.zm":true,"info.zm":true,"mil.zm":true,"net.zm":true,"org.zm":true,"sch.zm":true,"*.zw":true,aaa:true,aarp:true,abarth:true,abb:true,abbott:true,abbvie:true,abc:true,able:true,abogado:true,abudhabi:true,academy:true,accenture:true,accountant:true,accountants:true,aco:true,active:true,actor:true,adac:true,ads:true,adult:true,aeg:true,aetna:true,afamilycompany:true,afl:true,africa:true,agakhan:true,agency:true,aig:true,aigo:true,airbus:true,airforce:true,airtel:true,akdn:true,alfaromeo:true,alibaba:true,alipay:true,allfinanz:true,allstate:true,ally:true,alsace:true,alstom:true,americanexpress:true,americanfamily:true,amex:true,amfam:true,amica:true,amsterdam:true,analytics:true,android:true,anquan:true,anz:true,aol:true,apartments:true,app:true,apple:true,aquarelle:true,arab:true,aramco:true,archi:true,army:true,art:true,arte:true,asda:true,associates:true,athleta:true,attorney:true,auction:true,audi:true,audible:true,audio:true,auspost:true,author:true,auto:true,autos:true,avianca:true,aws:true,axa:true,azure:true,baby:true,baidu:true,banamex:true,bananarepublic:true,band:true,bank:true,bar:true,barcelona:true,barclaycard:true,barclays:true,barefoot:true,bargains:true,baseball:true,basketball:true,bauhaus:true,bayern:true,bbc:true,bbt:true,bbva:true,bcg:true,bcn:true,beats:true,beauty:true,beer:true,bentley:true,berlin:true,best:true,bestbuy:true,bet:true,bharti:true,bible:true,bid:true,bike:true,bing:true,bingo:true,bio:true,black:true,blackfriday:true,blanco:true,blockbuster:true,blog:true,bloomberg:true,blue:true,bms:true,bmw:true,bnl:true,bnpparibas:true,boats:true,boehringer:true,bofa:true,bom:true,bond:true,boo:true,book:true,booking:true,boots:true,bosch:true,bostik:true,boston:true,bot:true,boutique:true,box:true,bradesco:true,bridgestone:true,broadway:true,broker:true,brother:true,brussels:true,budapest:true,bugatti:true,build:true,builders:true,business:true,buy:true,buzz:true,bzh:true,cab:true,cafe:true,cal:true,call:true,calvinklein:true,cam:true,camera:true,camp:true,cancerresearch:true,canon:true,capetown:true,capital:true,capitalone:true,car:true,caravan:true,cards:true,care:true,career:true,careers:true,cars:true,cartier:true,casa:true,case:true,caseih:true,cash:true,casino:true,catering:true,catholic:true,cba:true,cbn:true,cbre:true,cbs:true,ceb:true,center:true,ceo:true,cern:true,cfa:true,cfd:true,chanel:true,channel:true,chase:true,chat:true,cheap:true,chintai:true,chloe:true,christmas:true,chrome:true,chrysler:true,church:true,cipriani:true,circle:true,cisco:true,citadel:true,citi:true,citic:true,city:true,cityeats:true,claims:true,cleaning:true,click:true,clinic:true,clinique:true,clothing:true,cloud:true,club:true,clubmed:true,coach:true,codes:true,coffee:true,college:true,cologne:true,comcast:true,commbank:true,community:true,company:true,compare:true,computer:true,comsec:true,condos:true,construction:true,consulting:true,contact:true,contractors:true,cooking:true,cookingchannel:true,cool:true,corsica:true,country:true,coupon:true,coupons:true,courses:true,credit:true,creditcard:true,creditunion:true,cricket:true,crown:true,crs:true,cruise:true,cruises:true,csc:true,cuisinella:true,cymru:true,cyou:true,dabur:true,dad:true,dance:true,data:true,date:true,dating:true,datsun:true,day:true,dclk:true,dds:true,deal:true,dealer:true,deals:true,degree:true,delivery:true,dell:true,deloitte:true,delta:true,democrat:true,dental:true,dentist:true,desi:true,design:true,dev:true,dhl:true,diamonds:true,diet:true,digital:true,direct:true,directory:true,discount:true,discover:true,dish:true,diy:true,dnp:true,docs:true,doctor:true,dodge:true,dog:true,doha:true,domains:true,dot:true,download:true,drive:true,dtv:true,dubai:true,duck:true,dunlop:true,duns:true,dupont:true,durban:true,dvag:true,dvr:true,dwg:true,earth:true,eat:true,eco:true,edeka:true,education:true,email:true,emerck:true,emerson:true,energy:true,engineer:true,engineering:true,enterprises:true,epost:true,epson:true,equipment:true,ericsson:true,erni:true,esq:true,estate:true,esurance:true,etisalat:true,eurovision:true,eus:true,events:true,everbank:true,exchange:true,expert:true,exposed:true,express:true,extraspace:true,fage:true,fail:true,fairwinds:true,faith:true,family:true,fan:true,fans:true,farm:true,farmers:true,fashion:true,fast:true,fedex:true,feedback:true,ferrari:true,ferrero:true,fiat:true,fidelity:true,fido:true,film:true,final:true,finance:true,financial:true,fire:true,firestone:true,firmdale:true,fish:true,fishing:true,fit:true,fitness:true,flickr:true,flights:true,flir:true,florist:true,flowers:true,fly:true,foo:true,food:true,foodnetwork:true,football:true,ford:true,forex:true,forsale:true,forum:true,foundation:true,fox:true,free:true,fresenius:true,frl:true,frogans:true,frontdoor:true,frontier:true,ftr:true,fujitsu:true,fujixerox:true,fun:true,fund:true,furniture:true,futbol:true,fyi:true,gal:true,gallery:true,gallo:true,gallup:true,game:true,games:true,gap:true,garden:true,gbiz:true,gdn:true,gea:true,gent:true,genting:true,george:true,ggee:true,gift:true,gifts:true,gives:true,giving:true,glade:true,glass:true,gle:true,global:true,globo:true,gmail:true,gmbh:true,gmo:true,gmx:true,godaddy:true,gold:true,goldpoint:true,golf:true,goo:true,goodhands:true,goodyear:true,goog:true,google:true,gop:true,got:true,grainger:true,graphics:true,gratis:true,green:true,gripe:true,grocery:true,group:true,guardian:true,gucci:true,guge:true,guide:true,guitars:true,guru:true,hair:true,hamburg:true,hangout:true,haus:true,hbo:true,hdfc:true,hdfcbank:true,health:true,healthcare:true,help:true,helsinki:true,here:true,hermes:true,hgtv:true,hiphop:true,hisamitsu:true,hitachi:true,hiv:true,hkt:true,hockey:true,holdings:true,holiday:true,homedepot:true,homegoods:true,homes:true,homesense:true,honda:true,honeywell:true,horse:true,host:true,hosting:true,hot:true,hoteles:true,hotels:true,hotmail:true,house:true,how:true,hsbc:true,htc:true,hughes:true,hyatt:true,hyundai:true,ibm:true,icbc:true,ice:true,icu:true,ieee:true,ifm:true,iinet:true,ikano:true,imamat:true,imdb:true,immo:true,immobilien:true,industries:true,infiniti:true,ing:true,ink:true,institute:true,insurance:true,insure:true,intel:true,international:true,intuit:true,investments:true,ipiranga:true,irish:true,iselect:true,ismaili:true,ist:true,istanbul:true,itau:true,itv:true,iveco:true,iwc:true,jaguar:true,java:true,jcb:true,jcp:true,jeep:true,jetzt:true,jewelry:true,jio:true,jlc:true,jll:true,jmp:true,jnj:true,joburg:true,jot:true,joy:true,jpmorgan:true,jprs:true,juegos:true,juniper:true,kaufen:true,kddi:true,kerryhotels:true,kerrylogistics:true,kerryproperties:true,kfh:true,kia:true,kim:true,kinder:true,kindle:true,kitchen:true,kiwi:true,koeln:true,komatsu:true,kosher:true,kpmg:true,kpn:true,krd:true,kred:true,kuokgroup:true,kyoto:true,lacaixa:true,ladbrokes:true,lamborghini:true,lamer:true,lancaster:true,lancia:true,lancome:true,land:true,landrover:true,lanxess:true,lasalle:true,lat:true,latino:true,latrobe:true,law:true,lawyer:true,lds:true,lease:true,leclerc:true,lefrak:true,legal:true,lego:true,lexus:true,lgbt:true,liaison:true,lidl:true,life:true,lifeinsurance:true,lifestyle:true,lighting:true,like:true,lilly:true,limited:true,limo:true,lincoln:true,linde:true,link:true,lipsy:true,live:true,living:true,lixil:true,loan:true,loans:true,locker:true,locus:true,loft:true,lol:true,london:true,lotte:true,lotto:true,love:true,lpl:true,lplfinancial:true,ltd:true,ltda:true,lundbeck:true,lupin:true,luxe:true,luxury:true,macys:true,madrid:true,maif:true,maison:true,makeup:true,man:true,management:true,mango:true,map:true,market:true,marketing:true,markets:true,marriott:true,marshalls:true,maserati:true,mattel:true,mba:true,mcd:true,mcdonalds:true,mckinsey:true,med:true,media:true,meet:true,melbourne:true,meme:true,memorial:true,men:true,menu:true,meo:true,merckmsd:true,metlife:true,miami:true,microsoft:true,mini:true,mint:true,mit:true,mitsubishi:true,mlb:true,mls:true,mma:true,mobile:true,mobily:true,moda:true,moe:true,moi:true,mom:true,monash:true,money:true,monster:true,montblanc:true,mopar:true,mormon:true,mortgage:true,moscow:true,moto:true,motorcycles:true,mov:true,movie:true,movistar:true,msd:true,mtn:true,mtpc:true,mtr:true,mutual:true,mutuelle:true,nab:true,nadex:true,nagoya:true,nationwide:true,natura:true,navy:true,nba:true,nec:true,netbank:true,netflix:true,network:true,neustar:true,new:true,newholland:true,news:true,next:true,nextdirect:true,nexus:true,nfl:true,ngo:true,nhk:true,nico:true,nike:true,nikon:true,ninja:true,nissan:true,nissay:true,nokia:true,northwesternmutual:true,norton:true,now:true,nowruz:true,nowtv:true,nra:true,nrw:true,ntt:true,nyc:true,obi:true,observer:true,off:true,office:true,okinawa:true,olayan:true,olayangroup:true,oldnavy:true,ollo:true,omega:true,one:true,ong:true,onl:true,online:true,onyourside:true,ooo:true,open:true,oracle:true,orange:true,organic:true,orientexpress:true,origins:true,osaka:true,otsuka:true,ott:true,ovh:true,page:true,pamperedchef:true,panasonic:true,panerai:true,paris:true,pars:true,partners:true,parts:true,party:true,passagens:true,pay:true,pccw:true,pet:true,pfizer:true,pharmacy:true,phd:true,philips:true,phone:true,photo:true,photography:true,photos:true,physio:true,piaget:true,pics:true,pictet:true,pictures:true,pid:true,pin:true,ping:true,pink:true,pioneer:true,pizza:true,place:true,play:true,playstation:true,plumbing:true,plus:true,pnc:true,pohl:true,poker:true,politie:true,porn:true,pramerica:true,praxi:true,press:true,prime:true,prod:true,productions:true,prof:true,progressive:true,promo:true,properties:true,property:true,protection:true,pru:true,prudential:true,pub:true,pwc:true,qpon:true,quebec:true,quest:true,qvc:true,racing:true,radio:true,raid:true,read:true,realestate:true,realtor:true,realty:true,recipes:true,red:true,redstone:true,redumbrella:true,rehab:true,reise:true,reisen:true,reit:true,reliance:true,ren:true,rent:true,rentals:true,repair:true,report:true,republican:true,rest:true,restaurant:true,review:true,reviews:true,rexroth:true,rich:true,richardli:true,ricoh:true,rightathome:true,ril:true,rio:true,rip:true,rmit:true,rocher:true,rocks:true,rodeo:true,rogers:true,room:true,rsvp:true,ruhr:true,run:true,rwe:true,ryukyu:true,saarland:true,safe:true,safety:true,sakura:true,sale:true,salon:true,samsclub:true,samsung:true,sandvik:true,sandvikcoromant:true,sanofi:true,sap:true,sapo:true,sarl:true,sas:true,save:true,saxo:true,sbi:true,sbs:true,sca:true,scb:true,schaeffler:true,schmidt:true,scholarships:true,school:true,schule:true,schwarz:true,science:true,scjohnson:true,scor:true,scot:true,search:true,seat:true,secure:true,security:true,seek:true,select:true,sener:true,services:true,ses:true,seven:true,sew:true,sex:true,sexy:true,sfr:true,shangrila:true,sharp:true,shaw:true,shell:true,shia:true,shiksha:true,shoes:true,shop:true,shopping:true,shouji:true,show:true,showtime:true,shriram:true,silk:true,sina:true,singles:true,site:true,ski:true,skin:true,sky:true,skype:true,sling:true,smart:true,smile:true,sncf:true,soccer:true,social:true,softbank:true,software:true,sohu:true,solar:true,solutions:true,song:true,sony:true,soy:true,space:true,spiegel:true,spot:true,spreadbetting:true,srl:true,srt:true,stada:true,staples:true,star:true,starhub:true,statebank:true,statefarm:true,statoil:true,stc:true,stcgroup:true,stockholm:true,storage:true,store:true,stream:true,studio:true,study:true,style:true,sucks:true,supplies:true,supply:true,support:true,surf:true,surgery:true,suzuki:true,swatch:true,swiftcover:true,swiss:true,sydney:true,symantec:true,systems:true,tab:true,taipei:true,talk:true,taobao:true,target:true,tatamotors:true,tatar:true,tattoo:true,tax:true,taxi:true,tci:true,tdk:true,team:true,tech:true,technology:true,telecity:true,telefonica:true,temasek:true,tennis:true,teva:true,thd:true,theater:true,theatre:true,theguardian:true,tiaa:true,tickets:true,tienda:true,tiffany:true,tips:true,tires:true,tirol:true,tjmaxx:true,tjx:true,tkmaxx:true,tmall:true,today:true,tokyo:true,tools:true,top:true,toray:true,toshiba:true,total:true,tours:true,town:true,toyota:true,toys:true,trade:true,trading:true,training:true,travelchannel:true,travelers:true,travelersinsurance:true,trust:true,trv:true,tube:true,tui:true,tunes:true,tushu:true,tvs:true,ubank:true,ubs:true,uconnect:true,unicom:true,university:true,uno:true,uol:true,ups:true,vacations:true,vana:true,vanguard:true,vegas:true,ventures:true,verisign:true,versicherung:true,vet:true,viajes:true,video:true,vig:true,viking:true,villas:true,vin:true,vip:true,virgin:true,visa:true,vision:true,vista:true,vistaprint:true,viva:true,vivo:true,vlaanderen:true,vodka:true,volkswagen:true,volvo:true,vote:true,voting:true,voto:true,voyage:true,vuelos:true,wales:true,walmart:true,walter:true,wang:true,wanggou:true,warman:true,watch:true,watches:true,weather:true,weatherchannel:true,webcam:true,weber:true,website:true,wed:true,wedding:true,weibo:true,weir:true,whoswho:true,wien:true,wiki:true,williamhill:true,win:true,windows:true,wine:true,winners:true,wme:true,wolterskluwer:true,woodside:true,work:true,works:true,world:true,wow:true,wtc:true,wtf:true,xbox:true,xerox:true,xfinity:true,xihuan:true,xin:true,"xn--11b4c3d":true,"xn--1ck2e1b":true,"xn--1qqw23a":true,"xn--30rr7y":true,"xn--3bst00m":true,"xn--3ds443g":true,"xn--3oq18vl8pn36a":true,"xn--3pxu8k":true,"xn--42c2d9a":true,"xn--45q11c":true,"xn--4gbrim":true,"xn--4gq48lf9j":true,"xn--55qw42g":true,"xn--55qx5d":true,"xn--5su34j936bgsg":true,"xn--5tzm5g":true,"xn--6frz82g":true,"xn--6qq986b3xl":true,"xn--80adxhks":true,"xn--80aqecdr1a":true,"xn--80asehdb":true,"xn--80aswg":true,"xn--8y0a063a":true,"xn--9dbq2a":true,"xn--9et52u":true,"xn--9krt00a":true,"xn--b4w605ferd":true,"xn--bck1b9a5dre4c":true,"xn--c1avg":true,"xn--c2br7g":true,"xn--cck2b3b":true,"xn--cg4bki":true,"xn--czr694b":true,"xn--czrs0t":true,"xn--czru2d":true,"xn--d1acj3b":true,"xn--eckvdtc9d":true,"xn--efvy88h":true,"xn--estv75g":true,"xn--fct429k":true,"xn--fhbei":true,"xn--fiq228c5hs":true,"xn--fiq64b":true,"xn--fjq720a":true,"xn--flw351e":true,"xn--fzys8d69uvgm":true,"xn--g2xx48c":true,"xn--gckr3f0f":true,"xn--gk3at1e":true,"xn--hxt814e":true,"xn--i1b6b1a6a2e":true,"xn--imr513n":true,"xn--io0a7i":true,"xn--j1aef":true,"xn--jlq61u9w7b":true,"xn--jvr189m":true,"xn--kcrx77d1x4a":true,"xn--kpu716f":true,"xn--kput3i":true,"xn--mgba3a3ejt":true,"xn--mgba7c0bbn0a":true,"xn--mgbaakc7dvf":true,"xn--mgbab2bd":true,"xn--mgbb9fbpob":true,"xn--mgbca7dzdo":true,"xn--mgbi4ecexp":true,"xn--mgbt3dhd":true,"xn--mk1bu44c":true,"xn--mxtq1m":true,"xn--ngbc5azd":true,"xn--ngbe9e0a":true,"xn--ngbrx":true,"xn--nqv7f":true,"xn--nqv7fs00ema":true,"xn--nyqy26a":true,"xn--p1acf":true,"xn--pbt977c":true,"xn--pssy2u":true,"xn--q9jyb4c":true,"xn--qcka1pmc":true,"xn--rhqv96g":true,"xn--rovu88b":true,"xn--ses554g":true,"xn--t60b56a":true,"xn--tckwe":true,"xn--tiq49xqyj":true,"xn--unup4y":true,"xn--vermgensberater-ctb":true,"xn--vermgensberatung-pwb":true,"xn--vhquv":true,"xn--vuq861b":true,"xn--w4r85el8fhu5dnra":true,"xn--w4rs40l":true,"xn--xhq521b":true,"xn--zfr164b":true,xperia:true,xyz:true,yachts:true,yahoo:true,yamaxun:true,yandex:true,yodobashi:true,yoga:true,yokohama:true,you:true,youtube:true,yun:true,zappos:true,zara:true,zero:true,zip:true,zippo:true,zone:true,zuerich:true,"beep.pl":true,"*.compute.estate":true,"*.alces.network":true,"*.alwaysdata.net":true,"cloudfront.net":true,"compute.amazonaws.com":true,"ap-northeast-1.compute.amazonaws.com":true,"ap-northeast-2.compute.amazonaws.com":true,"ap-southeast-1.compute.amazonaws.com":true,"ap-southeast-2.compute.amazonaws.com":true,"eu-central-1.compute.amazonaws.com":true,"eu-west-1.compute.amazonaws.com":true,"sa-east-1.compute.amazonaws.com":true,"us-gov-west-1.compute.amazonaws.com":true,"us-west-1.compute.amazonaws.com":true,"us-west-2.compute.amazonaws.com":true,"compute-1.amazonaws.com":true,"z-1.compute-1.amazonaws.com":true,"z-2.compute-1.amazonaws.com":true,"us-east-1.amazonaws.com":true,"compute.amazonaws.com.cn":true,"cn-north-1.compute.amazonaws.com.cn":true,"elasticbeanstalk.com":true,"elb.amazonaws.com":true,"s3.amazonaws.com":true,"s3-ap-northeast-1.amazonaws.com":true,"s3-ap-northeast-2.amazonaws.com":true,"s3-ap-southeast-1.amazonaws.com":true,"s3-ap-southeast-2.amazonaws.com":true,"s3-eu-central-1.amazonaws.com":true,"s3-eu-west-1.amazonaws.com":true,"s3-external-1.amazonaws.com":true,"s3-external-2.amazonaws.com":true,"s3-fips-us-gov-west-1.amazonaws.com":true,"s3-sa-east-1.amazonaws.com":true,"s3-us-gov-west-1.amazonaws.com":true,"s3-us-west-1.amazonaws.com":true,"s3-us-west-2.amazonaws.com":true,"s3.ap-northeast-2.amazonaws.com":true,"s3.cn-north-1.amazonaws.com.cn":true,"s3.eu-central-1.amazonaws.com":true,"on-aptible.com":true,"pimienta.org":true,"poivron.org":true,"potager.org":true,"sweetpepper.org":true,"myasustor.com":true,"myfritz.net":true,"backplaneapp.io":true,"betainabox.com":true,"bnr.la":true,"boxfuse.io":true,"browsersafetymark.io":true,"mycd.eu":true,"ae.org":true,"ar.com":true,"br.com":true,"cn.com":true,"com.de":true,"com.se":true,"de.com":true,"eu.com":true,"gb.com":true,"gb.net":true,"hu.com":true,"hu.net":true,"jp.net":true,"jpn.com":true,"kr.com":true,"mex.com":true,"no.com":true,"qc.com":true,"ru.com":true,"sa.com":true,"se.com":true,"se.net":true,"uk.com":true,"uk.net":true,"us.com":true,"uy.com":true,"za.bz":true,"za.com":true,"africa.com":true,"gr.com":true,"in.net":true,"us.org":true,"co.com":true,"c.la":true,"certmgr.org":true,"xenapponazure.com":true,"virtueeldomein.nl":true,"cloudcontrolled.com":true,"cloudcontrolapp.com":true,"co.ca":true,"co.cz":true,"c.cdn77.org":true,"cdn77-ssl.net":true,"r.cdn77.net":true,"rsc.cdn77.org":true,"ssl.origin.cdn77-secure.org":true,"cloudns.asia":true,"cloudns.biz":true,"cloudns.club":true,"cloudns.cc":true,"cloudns.eu":true,"cloudns.in":true,"cloudns.info":true,"cloudns.org":true,"cloudns.pro":true,"cloudns.pw":true,"cloudns.us":true,"co.nl":true,"co.no":true,"*.platform.sh":true,"realm.cz":true,"*.cryptonomic.net":true,"cupcake.is":true,"cyon.link":true,"cyon.site":true,"daplie.me":true,"biz.dk":true,"co.dk":true,"firm.dk":true,"reg.dk":true,"store.dk":true,"dedyn.io":true,"dnshome.de":true,"dreamhosters.com":true,"mydrobo.com":true,"drud.io":true,"drud.us":true,"duckdns.org":true,"dy.fi":true,"tunk.org":true,"dyndns-at-home.com":true,"dyndns-at-work.com":true,"dyndns-blog.com":true,"dyndns-free.com":true,"dyndns-home.com":true,"dyndns-ip.com":true,"dyndns-mail.com":true,"dyndns-office.com":true,"dyndns-pics.com":true,"dyndns-remote.com":true,"dyndns-server.com":true,"dyndns-web.com":true,"dyndns-wiki.com":true,"dyndns-work.com":true,"dyndns.biz":true,"dyndns.info":true,"dyndns.org":true,"dyndns.tv":true,"at-band-camp.net":true,"ath.cx":true,"barrel-of-knowledge.info":true,"barrell-of-knowledge.info":true,"better-than.tv":true,"blogdns.com":true,"blogdns.net":true,"blogdns.org":true,"blogsite.org":true,"boldlygoingnowhere.org":true,"broke-it.net":true,"buyshouses.net":true,"cechire.com":true,"dnsalias.com":true,"dnsalias.net":true,"dnsalias.org":true,"dnsdojo.com":true,"dnsdojo.net":true,"dnsdojo.org":true,"does-it.net":true,"doesntexist.com":true,"doesntexist.org":true,"dontexist.com":true,"dontexist.net":true,"dontexist.org":true,"doomdns.com":true,"doomdns.org":true,"dvrdns.org":true,"dyn-o-saur.com":true,"dynalias.com":true,"dynalias.net":true,"dynalias.org":true,"dynathome.net":true,"dyndns.ws":true,"endofinternet.net":true,"endofinternet.org":true,"endoftheinternet.org":true,"est-a-la-maison.com":true,"est-a-la-masion.com":true,"est-le-patron.com":true,"est-mon-blogueur.com":true,"for-better.biz":true,"for-more.biz":true,"for-our.info":true,"for-some.biz":true,"for-the.biz":true,"forgot.her.name":true,"forgot.his.name":true,"from-ak.com":true,"from-al.com":true,"from-ar.com":true,"from-az.net":true,"from-ca.com":true,"from-co.net":true,"from-ct.com":true,"from-dc.com":true,"from-de.com":true,"from-fl.com":true,"from-ga.com":true,"from-hi.com":true,"from-ia.com":true,"from-id.com":true,"from-il.com":true,"from-in.com":true,"from-ks.com":true,"from-ky.com":true,"from-la.net":true,"from-ma.com":true,"from-md.com":true,"from-me.org":true,"from-mi.com":true,"from-mn.com":true,"from-mo.com":true,"from-ms.com":true,"from-mt.com":true,"from-nc.com":true,"from-nd.com":true,"from-ne.com":true,"from-nh.com":true,"from-nj.com":true,"from-nm.com":true,"from-nv.com":true,"from-ny.net":true,"from-oh.com":true,"from-ok.com":true,"from-or.com":true,"from-pa.com":true,"from-pr.com":true,"from-ri.com":true,"from-sc.com":true,"from-sd.com":true,"from-tn.com":true,"from-tx.com":true,"from-ut.com":true,"from-va.com":true,"from-vt.com":true,"from-wa.com":true,"from-wi.com":true,"from-wv.com":true,"from-wy.com":true,"ftpaccess.cc":true,"fuettertdasnetz.de":true,"game-host.org":true,"game-server.cc":true,"getmyip.com":true,"gets-it.net":true,"go.dyndns.org":true,"gotdns.com":true,"gotdns.org":true,"groks-the.info":true,"groks-this.info":true,"ham-radio-op.net":true,"here-for-more.info":true,"hobby-site.com":true,"hobby-site.org":true,"home.dyndns.org":true,"homedns.org":true,"homeftp.net":true,"homeftp.org":true,"homeip.net":true,"homelinux.com":true,"homelinux.net":true,"homelinux.org":true,"homeunix.com":true,"homeunix.net":true,"homeunix.org":true,"iamallama.com":true,"in-the-band.net":true,"is-a-anarchist.com":true,"is-a-blogger.com":true,"is-a-bookkeeper.com":true,"is-a-bruinsfan.org":true,"is-a-bulls-fan.com":true,"is-a-candidate.org":true,"is-a-caterer.com":true,"is-a-celticsfan.org":true,"is-a-chef.com":true,"is-a-chef.net":true,"is-a-chef.org":true,"is-a-conservative.com":true,"is-a-cpa.com":true,"is-a-cubicle-slave.com":true,"is-a-democrat.com":true,"is-a-designer.com":true,"is-a-doctor.com":true,"is-a-financialadvisor.com":true,"is-a-geek.com":true,"is-a-geek.net":true,"is-a-geek.org":true,"is-a-green.com":true,"is-a-guru.com":true,"is-a-hard-worker.com":true,"is-a-hunter.com":true,"is-a-knight.org":true,"is-a-landscaper.com":true,"is-a-lawyer.com":true,"is-a-liberal.com":true,"is-a-libertarian.com":true,"is-a-linux-user.org":true,"is-a-llama.com":true,"is-a-musician.com":true,"is-a-nascarfan.com":true,"is-a-nurse.com":true,"is-a-painter.com":true,"is-a-patsfan.org":true,"is-a-personaltrainer.com":true,"is-a-photographer.com":true,"is-a-player.com":true,"is-a-republican.com":true,"is-a-rockstar.com":true,"is-a-socialist.com":true,"is-a-soxfan.org":true,"is-a-student.com":true,"is-a-teacher.com":true,"is-a-techie.com":true,"is-a-therapist.com":true,"is-an-accountant.com":true,"is-an-actor.com":true,"is-an-actress.com":true,"is-an-anarchist.com":true,"is-an-artist.com":true,"is-an-engineer.com":true,"is-an-entertainer.com":true,"is-by.us":true,"is-certified.com":true,"is-found.org":true,"is-gone.com":true,"is-into-anime.com":true,"is-into-cars.com":true,"is-into-cartoons.com":true,"is-into-games.com":true,"is-leet.com":true,"is-lost.org":true,"is-not-certified.com":true,"is-saved.org":true,"is-slick.com":true,"is-uberleet.com":true,"is-very-bad.org":true,"is-very-evil.org":true,"is-very-good.org":true,"is-very-nice.org":true,"is-very-sweet.org":true,"is-with-theband.com":true,"isa-geek.com":true,"isa-geek.net":true,"isa-geek.org":true,"isa-hockeynut.com":true,"issmarterthanyou.com":true,"isteingeek.de":true,"istmein.de":true,"kicks-ass.net":true,"kicks-ass.org":true,"knowsitall.info":true,"land-4-sale.us":true,"lebtimnetz.de":true,"leitungsen.de":true,"likes-pie.com":true,"likescandy.com":true,"merseine.nu":true,"mine.nu":true,"misconfused.org":true,"mypets.ws":true,"myphotos.cc":true,"neat-url.com":true,"office-on-the.net":true,"on-the-web.tv":true,"podzone.net":true,"podzone.org":true,"readmyblog.org":true,"saves-the-whales.com":true,"scrapper-site.net":true,"scrapping.cc":true,"selfip.biz":true,"selfip.com":true,"selfip.info":true,"selfip.net":true,"selfip.org":true,"sells-for-less.com":true,"sells-for-u.com":true,"sells-it.net":true,"sellsyourhome.org":true,"servebbs.com":true,"servebbs.net":true,"servebbs.org":true,"serveftp.net":true,"serveftp.org":true,"servegame.org":true,"shacknet.nu":true,"simple-url.com":true,"space-to-rent.com":true,"stuff-4-sale.org":true,"stuff-4-sale.us":true,"teaches-yoga.com":true,"thruhere.net":true,"traeumtgerade.de":true,"webhop.biz":true,"webhop.info":true,"webhop.net":true,"webhop.org":true,"worse-than.tv":true,"writesthisblog.com":true,"ddnss.de":true,"dyn.ddnss.de":true,"dyndns.ddnss.de":true,"dyndns1.de":true,"dyn-ip24.de":true,"home-webserver.de":true,"dyn.home-webserver.de":true,"myhome-server.de":true,"ddnss.org":true,"dynv6.net":true,"e4.cz":true,"eu.org":true,"al.eu.org":true,"asso.eu.org":true,"at.eu.org":true,"au.eu.org":true,"be.eu.org":true,"bg.eu.org":true,"ca.eu.org":true,"cd.eu.org":true,"ch.eu.org":true,"cn.eu.org":true,"cy.eu.org":true,"cz.eu.org":true,"de.eu.org":true,"dk.eu.org":true,"edu.eu.org":true,"ee.eu.org":true,"es.eu.org":true,"fi.eu.org":true,"fr.eu.org":true,"gr.eu.org":true,"hr.eu.org":true,"hu.eu.org":true,"ie.eu.org":true,"il.eu.org":true,"in.eu.org":true,"int.eu.org":true,"is.eu.org":true,"it.eu.org":true,"jp.eu.org":true,"kr.eu.org":true,"lt.eu.org":true,"lu.eu.org":true,"lv.eu.org":true,"mc.eu.org":true,"me.eu.org":true,"mk.eu.org":true,"mt.eu.org":true,"my.eu.org":true,"net.eu.org":true,"ng.eu.org":true,"nl.eu.org":true,"no.eu.org":true,"nz.eu.org":true,"paris.eu.org":true,"pl.eu.org":true,"pt.eu.org":true,"q-a.eu.org":true,"ro.eu.org":true,"ru.eu.org":true,"se.eu.org":true,"si.eu.org":true,"sk.eu.org":true,"tr.eu.org":true,"uk.eu.org":true,"us.eu.org":true,"eu-1.evennode.com":true,"eu-2.evennode.com":true,"us-1.evennode.com":true,"us-2.evennode.com":true,"apps.fbsbx.com":true,"a.ssl.fastly.net":true,"b.ssl.fastly.net":true,"global.ssl.fastly.net":true,"a.prod.fastly.net":true,"global.prod.fastly.net":true,"fhapp.xyz":true,"firebaseapp.com":true,"flynnhub.com":true,"freebox-os.com":true,"freeboxos.com":true,"fbx-os.fr":true,"fbxos.fr":true,"freebox-os.fr":true,"freeboxos.fr":true,"myfusion.cloud":true,"futuremailing.at":true,"*.ex.ortsinfo.at":true,"*.kunden.ortsinfo.at":true,"service.gov.uk":true,"github.io":true,"githubusercontent.com":true,"githubcloud.com":true,"*.api.githubcloud.com":true,"*.ext.githubcloud.com":true,"gist.githubcloud.com":true,"*.githubcloudusercontent.com":true,"gitlab.io":true,"ro.com":true,"ro.im":true,"shop.ro":true,"goip.de":true,"*.0emm.com":true,"appspot.com":true,"blogspot.ae":true,"blogspot.al":true,"blogspot.am":true,"blogspot.ba":true,"blogspot.be":true,"blogspot.bg":true,"blogspot.bj":true,"blogspot.ca":true,"blogspot.cf":true,"blogspot.ch":true,"blogspot.cl":true,"blogspot.co.at":true,"blogspot.co.id":true,"blogspot.co.il":true,"blogspot.co.ke":true,"blogspot.co.nz":true,"blogspot.co.uk":true,"blogspot.co.za":true,"blogspot.com":true,"blogspot.com.ar":true,"blogspot.com.au":true,"blogspot.com.br":true,"blogspot.com.by":true,"blogspot.com.co":true,"blogspot.com.cy":true,"blogspot.com.ee":true,"blogspot.com.eg":true,"blogspot.com.es":true,"blogspot.com.mt":true,"blogspot.com.ng":true,"blogspot.com.tr":true,"blogspot.com.uy":true,"blogspot.cv":true,"blogspot.cz":true,"blogspot.de":true,"blogspot.dk":true,"blogspot.fi":true,"blogspot.fr":true,"blogspot.gr":true,"blogspot.hk":true,"blogspot.hr":true,"blogspot.hu":true,"blogspot.ie":true,"blogspot.in":true,"blogspot.is":true,"blogspot.it":true,"blogspot.jp":true,"blogspot.kr":true,"blogspot.li":true,"blogspot.lt":true,"blogspot.lu":true,"blogspot.md":true,"blogspot.mk":true,"blogspot.mr":true,"blogspot.mx":true,"blogspot.my":true,"blogspot.nl":true,"blogspot.no":true,"blogspot.pe":true,"blogspot.pt":true,"blogspot.qa":true,"blogspot.re":true,"blogspot.ro":true,"blogspot.rs":true,"blogspot.ru":true,"blogspot.se":true,"blogspot.sg":true,"blogspot.si":true,"blogspot.sk":true,"blogspot.sn":true,"blogspot.td":true,"blogspot.tw":true,"blogspot.ug":true,"blogspot.vn":true,"cloudfunctions.net":true,"codespot.com":true,"googleapis.com":true,"googlecode.com":true,"pagespeedmobilizer.com":true,"publishproxy.com":true,"withgoogle.com":true,"withyoutube.com":true,"hashbang.sh":true,"hasura-app.io":true,"hepforge.org":true,"herokuapp.com":true,"herokussl.com":true,"iki.fi":true,"biz.at":true,"info.at":true,"ac.leg.br":true,"al.leg.br":true,"am.leg.br":true,"ap.leg.br":true,"ba.leg.br":true,"ce.leg.br":true,"df.leg.br":true,"es.leg.br":true,"go.leg.br":true,"ma.leg.br":true,"mg.leg.br":true,"ms.leg.br":true,"mt.leg.br":true,"pa.leg.br":true,"pb.leg.br":true,"pe.leg.br":true,"pi.leg.br":true,"pr.leg.br":true,"rj.leg.br":true,"rn.leg.br":true,"ro.leg.br":true,"rr.leg.br":true,"rs.leg.br":true,"sc.leg.br":true,"se.leg.br":true,"sp.leg.br":true,"to.leg.br":true,"*.triton.zone":true,"*.cns.joyent.com":true,"js.org":true,"keymachine.de":true,"knightpoint.systems":true,"co.krd":true,"edu.krd":true,"*.magentosite.cloud":true,"meteorapp.com":true,"eu.meteorapp.com":true,"co.pl":true,"azurewebsites.net":true,"azure-mobile.net":true,"cloudapp.net":true,"bmoattachments.org":true,"4u.com":true,"ngrok.io":true,"nfshost.com":true,"nsupdate.info":true,"nerdpol.ovh":true,"blogsyte.com":true,"brasilia.me":true,"cable-modem.org":true,"ciscofreak.com":true,"collegefan.org":true,"couchpotatofries.org":true,"damnserver.com":true,"ddns.me":true,"ditchyourip.com":true,"dnsfor.me":true,"dnsiskinky.com":true,"dvrcam.info":true,"dynns.com":true,"eating-organic.net":true,"fantasyleague.cc":true,"geekgalaxy.com":true,"golffan.us":true,"health-carereform.com":true,"homesecuritymac.com":true,"homesecuritypc.com":true,"hopto.me":true,"ilovecollege.info":true,"loginto.me":true,"mlbfan.org":true,"mmafan.biz":true,"myactivedirectory.com":true,"mydissent.net":true,"myeffect.net":true,"mymediapc.net":true,"mypsx.net":true,"mysecuritycamera.com":true,"mysecuritycamera.net":true,"mysecuritycamera.org":true,"net-freaks.com":true,"nflfan.org":true,"nhlfan.net":true,"no-ip.ca":true,"no-ip.co.uk":true,"no-ip.net":true,"noip.us":true,"onthewifi.com":true,"pgafan.net":true,"point2this.com":true,"pointto.us":true,"privatizehealthinsurance.net":true,"quicksytes.com":true,"read-books.org":true,"securitytactics.com":true,"serveexchange.com":true,"servehumour.com":true,"servep2p.com":true,"servesarcasm.com":true,"stufftoread.com":true,"ufcfan.org":true,"unusualperson.com":true,"workisboring.com":true,"3utilities.com":true,"bounceme.net":true,"ddns.net":true,"ddnsking.com":true,"gotdns.ch":true,"hopto.org":true,"myftp.biz":true,"myftp.org":true,"myvnc.com":true,"no-ip.biz":true,"no-ip.info":true,"no-ip.org":true,"noip.me":true,"redirectme.net":true,"servebeer.com":true,"serveblog.net":true,"servecounterstrike.com":true,"serveftp.com":true,"servegame.com":true,"servehalflife.com":true,"servehttp.com":true,"serveirc.com":true,"serveminecraft.net":true,"servemp3.com":true,"servepics.com":true,"servequake.com":true,"sytes.net":true,"webhop.me":true,"zapto.org":true,"nyc.mn":true,"nid.io":true,"opencraft.hosting":true,"operaunite.com":true,"outsystemscloud.com":true,"ownprovider.com":true,"oy.lc":true,"pgfog.com":true,"pagefrontapp.com":true,"art.pl":true,"gliwice.pl":true,"krakow.pl":true,"poznan.pl":true,"wroc.pl":true,"zakopane.pl":true,"pantheonsite.io":true,"gotpantheon.com":true,"mypep.link":true,"xen.prgmr.com":true,"priv.at":true,"protonet.io":true,"chirurgiens-dentistes-en-france.fr":true,"qa2.com":true,"dev-myqnapcloud.com":true,"alpha-myqnapcloud.com":true,"myqnapcloud.com":true,"rackmaze.com":true,"rackmaze.net":true,"rhcloud.com":true,"hzc.io":true,"wellbeingzone.eu":true,"ptplus.fit":true,"wellbeingzone.co.uk":true,"sandcats.io":true,"logoip.de":true,"logoip.com":true,"firewall-gateway.com":true,"firewall-gateway.de":true,"my-gateway.de":true,"my-router.de":true,"spdns.de":true,"spdns.eu":true,"firewall-gateway.net":true,"my-firewall.org":true,"myfirewall.org":true,"spdns.org":true,"biz.ua":true,"co.ua":true,"pp.ua":true,"shiftedit.io":true,"myshopblocks.com":true,"1kapp.com":true,"appchizi.com":true,"applinzi.com":true,"sinaapp.com":true,"vipsinaapp.com":true,"bounty-full.com":true,"alpha.bounty-full.com":true,"beta.bounty-full.com":true,"static.land":true,"dev.static.land":true,"sites.static.land":true,"apps.lair.io":true,"*.stolos.io":true,"spacekit.io":true,"stackspace.space":true,"diskstation.me":true,"dscloud.biz":true,"dscloud.me":true,"dscloud.mobi":true,"dsmynas.com":true,"dsmynas.net":true,"dsmynas.org":true,"familyds.com":true,"familyds.net":true,"familyds.org":true,"i234.me":true,"myds.me":true,"synology.me":true,"taifun-dns.de":true,"gda.pl":true,"gdansk.pl":true,"gdynia.pl":true,"med.pl":true,"sopot.pl":true,"bloxcms.com":true,"townnews-staging.com":true,"*.transurl.be":true,"*.transurl.eu":true,"*.transurl.nl":true,"tuxfamily.org":true,"hk.com":true,"hk.org":true,"ltd.hk":true,"inc.hk":true,"lib.de.us":true,"router.management":true,"wmflabs.org":true,"yolasite.com":true,"za.net":true,"za.org":true,"now.sh":true})},{punycode:undefined}],552:[function(require,module,exports){"use strict";function Store(){}exports.Store=Store;Store.prototype.synchronous=false;Store.prototype.findCookie=function(domain,path,key,cb){throw new Error("findCookie is not implemented")};Store.prototype.findCookies=function(domain,path,cb){throw new Error("findCookies is not implemented")};Store.prototype.putCookie=function(cookie,cb){throw new Error("putCookie is not implemented")};Store.prototype.updateCookie=function(oldCookie,newCookie,cb){throw new Error("updateCookie is not implemented")};Store.prototype.removeCookie=function(domain,path,key,cb){throw new Error("removeCookie is not implemented")};Store.prototype.removeCookies=function(domain,path,cb){throw new Error("removeCookies is not implemented")};Store.prototype.getAllCookies=function(cb){throw new Error("getAllCookies is not implemented (therefore jar cannot be serialized)")}},{}],553:[function(require,module,exports){module.exports={_from:"tough-cookie@~2.3.3",_id:"tough-cookie@2.3.3",_inBundle:false,_integrity:"sha1-C2GKVWW23qkL80JdBNVe3EdadWE=",_location:"/tough-cookie",_phantomChildren:{},_requested:{type:"range",registry:true,raw:"tough-cookie@~2.3.3",name:"tough-cookie",escapedName:"tough-cookie",rawSpec:"~2.3.3",saveSpec:null,fetchSpec:"~2.3.3"},_requiredBy:["/request","/request-promise-native"],_resolved:"https://registry.npmjs.org/tough-cookie/-/tough-cookie-2.3.3.tgz",_shasum:"0b618a5565b6dea90bf3425d04d55edc475a7561",_spec:"tough-cookie@~2.3.3",_where:"C:\\Users\\Daniel\\GitHub\\r2-streamer-js\\node_modules\\request",author:{name:"Jeremy Stashewsky",email:"jstashewsky@salesforce.com"},bugs:{url:"https://github.com/salesforce/tough-cookie/issues"},bundleDependencies:false,contributors:[{name:"Alexander Savin"},{name:"Ian Livingstone"},{name:"Ivan Nikulin"},{name:"Lalit Kapoor"},{name:"Sam Thompson"},{name:"Sebastian Mayr"}],dependencies:{punycode:"^1.4.1"},deprecated:false,description:"RFC6265 Cookies and Cookie Jar for node.js",devDependencies:{async:"^1.4.2","string.prototype.repeat":"^0.2.0",vows:"^0.8.1"},engines:{node:">=0.8"},files:["lib"],homepage:"https://github.com/salesforce/tough-cookie",keywords:["HTTP","cookie","cookies","set-cookie","cookiejar","jar","RFC6265","RFC2965"],license:"BSD-3-Clause",main:"./lib/cookie",name:"tough-cookie",repository:{type:"git",url:"git://github.com/salesforce/tough-cookie.git"},scripts:{suffixup:"curl -o public_suffix_list.dat https://publicsuffix.org/list/public_suffix_list.dat && ./generate-pubsuffix.js",test:"vows test/*_test.js"},version:"2.3.3"}},{}],554:[function(require,module,exports){var __extends;var __assign;var __rest;var __decorate;var __param;var __metadata;var __awaiter;var __generator;var __exportStar;var __values;var __read;var __spread;var __await;var __asyncGenerator;var __asyncDelegator;var __asyncValues;var __makeTemplateObject;(function(factory){var root=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],function(exports){factory(createExporter(root,createExporter(exports)))})}else if(typeof module==="object"&&typeof module.exports==="object"){factory(createExporter(root,createExporter(module.exports)))}else{factory(createExporter(root))}function createExporter(exports,previous){if(exports!==root){if(typeof Object.create==="function"){Object.defineProperty(exports,"__esModule",{value:true})}else{exports.__esModule=true}}return function(id,v){return exports[id]=previous?previous(id,v):v}}})(function(exporter){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};__extends=function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};__rest=function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)if(e.indexOf(p[i])<0)t[p[i]]=s[p[i]];return t};__decorate=function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};__param=function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}};__metadata=function(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)};__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};__generator=function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=y[op[0]&2?"return":op[0]?"throw":"next"])&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[0,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};__exportStar=function(m,exports){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]};__values=function(o){var m=typeof Symbol==="function"&&o[Symbol.iterator],i=0;if(m)return m.call(o);return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}}};__read=function(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar};__spread=function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar};__await=function(v){return this instanceof __await?(this.v=v,this):new __await(v)};__asyncGenerator=function(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}};__asyncDelegator=function(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){if(o[n])i[n]=function(v){return(p=!p)?{value:__await(o[n](v)),done:n==="return"}:f?f(v):v}}};__asyncValues=function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator];return m?m.call(o):typeof __values==="function"?__values(o):o[Symbol.iterator]()};__makeTemplateObject=function(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw})}else{cooked.raw=raw}return cooked};exporter("__extends",__extends);exporter("__assign",__assign);exporter("__rest",__rest);exporter("__decorate",__decorate);exporter("__param",__param);exporter("__metadata",__metadata);exporter("__awaiter",__awaiter);exporter("__generator",__generator);exporter("__exportStar",__exportStar);exporter("__values",__values);exporter("__read",__read);exporter("__spread",__spread);exporter("__await",__await);exporter("__asyncGenerator",__asyncGenerator);exporter("__asyncDelegator",__asyncDelegator);exporter("__asyncValues",__asyncValues);exporter("__makeTemplateObject",__makeTemplateObject)})},{}],555:[function(require,module,exports){"use strict";var net=require("net"),tls=require("tls"),http=require("http"),https=require("https"),events=require("events"),assert=require("assert"),util=require("util"),Buffer=require("safe-buffer").Buffer;exports.httpOverHttp=httpOverHttp;exports.httpsOverHttp=httpsOverHttp;exports.httpOverHttps=httpOverHttps;exports.httpsOverHttps=httpsOverHttps;function httpOverHttp(options){var agent=new TunnelingAgent(options);agent.request=http.request;return agent}function httpsOverHttp(options){var agent=new TunnelingAgent(options);agent.request=http.request;agent.createSocket=createSecureSocket;agent.defaultPort=443;return agent}function httpOverHttps(options){var agent=new TunnelingAgent(options);agent.request=https.request;return agent}function httpsOverHttps(options){var agent=new TunnelingAgent(options);agent.request=https.request;agent.createSocket=createSecureSocket;agent.defaultPort=443;return agent}function TunnelingAgent(options){var self=this;self.options=options||{};self.proxyOptions=self.options.proxy||{};self.maxSockets=self.options.maxSockets||http.Agent.defaultMaxSockets;self.requests=[];self.sockets=[];self.on("free",function onFree(socket,host,port){for(var i=0,len=self.requests.length;i<len;++i){var pending=self.requests[i];if(pending.host===host&&pending.port===port){self.requests.splice(i,1);pending.request.onSocket(socket);return}}socket.destroy();self.removeSocket(socket)})}util.inherits(TunnelingAgent,events.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(req,options){var self=this;if(typeof options==="string"){options={host:options,port:arguments[2],path:arguments[3]}}if(self.sockets.length>=this.maxSockets){self.requests.push({host:options.host,port:options.port,request:req});return}self.createConnection({host:options.host,port:options.port,request:req})};TunnelingAgent.prototype.createConnection=function createConnection(pending){var self=this;self.createSocket(pending,function(socket){socket.on("free",onFree);socket.on("close",onCloseOrRemove);socket.on("agentRemove",onCloseOrRemove);pending.request.onSocket(socket);function onFree(){self.emit("free",socket,pending.host,pending.port)}function onCloseOrRemove(err){self.removeSocket(socket);socket.removeListener("free",onFree);socket.removeListener("close",onCloseOrRemove);socket.removeListener("agentRemove",onCloseOrRemove)}})};TunnelingAgent.prototype.createSocket=function createSocket(options,cb){var self=this;var placeholder={};self.sockets.push(placeholder);var connectOptions=mergeOptions({},self.proxyOptions,{method:"CONNECT",path:options.host+":"+options.port,agent:false});if(connectOptions.proxyAuth){connectOptions.headers=connectOptions.headers||{};connectOptions.headers["Proxy-Authorization"]="Basic "+Buffer.from(connectOptions.proxyAuth).toString("base64")}debug("making CONNECT request");var connectReq=self.request(connectOptions);connectReq.useChunkedEncodingByDefault=false;connectReq.once("response",onResponse);connectReq.once("upgrade",onUpgrade);connectReq.once("connect",onConnect);connectReq.once("error",onError);connectReq.end();function onResponse(res){res.upgrade=true}function onUpgrade(res,socket,head){process.nextTick(function(){onConnect(res,socket,head)})}function onConnect(res,socket,head){connectReq.removeAllListeners();socket.removeAllListeners();if(res.statusCode===200){assert.equal(head.length,0);debug("tunneling connection has established");self.sockets[self.sockets.indexOf(placeholder)]=socket;cb(socket)}else{debug("tunneling socket could not be established, statusCode=%d",res.statusCode);var error=new Error("tunneling socket could not be established, "+"statusCode="+res.statusCode);error.code="ECONNRESET";options.request.emit("error",error);self.removeSocket(placeholder)}}function onError(cause){connectReq.removeAllListeners();debug("tunneling socket could not be established, cause=%s\n",cause.message,cause.stack);var error=new Error("tunneling socket could not be established, "+"cause="+cause.message);error.code="ECONNRESET";options.request.emit("error",error);self.removeSocket(placeholder)}};TunnelingAgent.prototype.removeSocket=function removeSocket(socket){var pos=this.sockets.indexOf(socket);if(pos===-1)return;this.sockets.splice(pos,1);var pending=this.requests.shift();if(pending){this.createConnection(pending)}};function createSecureSocket(options,cb){var self=this;TunnelingAgent.prototype.createSocket.call(self,options,function(socket){var secureSocket=tls.connect(0,mergeOptions({},self.options,{servername:options.host,socket:socket}));self.sockets[self.sockets.indexOf(socket)]=secureSocket;cb(secureSocket)})}function mergeOptions(target){for(var i=1,len=arguments.length;i<len;++i){var overrides=arguments[i];if(typeof overrides==="object"){var keys=Object.keys(overrides);for(var j=0,keyLen=keys.length;j<keyLen;++j){var k=keys[j];if(overrides[k]!==undefined){target[k]=overrides[k]}}}}return target}var debug;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){debug=function(){var args=Array.prototype.slice.call(arguments);if(typeof args[0]==="string"){args[0]="TUNNEL: "+args[0]}else{args.unshift("TUNNEL:")}console.error.apply(console,args)}}else{debug=function(){}}exports.debug=debug},{assert:undefined,events:undefined,http:undefined,https:undefined,net:undefined,"safe-buffer":484,tls:undefined,util:undefined}],556:[function(require,module,exports){(function(nacl){"use strict";var gf=function(init){var i,r=new Float64Array(16);if(init)for(i=0;i<init.length;i++)r[i]=init[i];return r};var randombytes=function(){throw new Error("no PRNG")};var _0=new Uint8Array(16);var _9=new Uint8Array(32);_9[0]=9;var gf0=gf(),gf1=gf([1]),_121665=gf([56129,1]),D=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),D2=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),X=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(x,i,h,l){x[i]=h>>24&255;x[i+1]=h>>16&255;x[i+2]=h>>8&255;x[i+3]=h&255;x[i+4]=l>>24&255;x[i+5]=l>>16&255;x[i+6]=l>>8&255;x[i+7]=l&255}function vn(x,xi,y,yi,n){var i,d=0;for(i=0;i<n;i++)d|=x[xi+i]^y[yi+i];return(1&d-1>>>8)-1}function crypto_verify_16(x,xi,y,yi){return vn(x,xi,y,yi,16)}function crypto_verify_32(x,xi,y,yi){return vn(x,xi,y,yi,32)}function core_salsa20(o,p,k,c){var j0=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,j1=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,j2=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,j3=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,j4=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,j5=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,j6=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,j7=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,j8=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,j9=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,j10=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,j11=k[16]&255|(k[17]&255)<<8|(k[18]&255)<<16|(k[19]&255)<<24,j12=k[20]&255|(k[21]&255)<<8|(k[22]&255)<<16|(k[23]&255)<<24,j13=k[24]&255|(k[25]&255)<<8|(k[26]&255)<<16|(k[27]&255)<<24,j14=k[28]&255|(k[29]&255)<<8|(k[30]&255)<<16|(k[31]&255)<<24,j15=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>32-7;u=x4+x0|0;x8^=u<<9|u>>>32-9;u=x8+x4|0;x12^=u<<13|u>>>32-13;u=x12+x8|0;x0^=u<<18|u>>>32-18;u=x5+x1|0;x9^=u<<7|u>>>32-7;u=x9+x5|0;x13^=u<<9|u>>>32-9;u=x13+x9|0;x1^=u<<13|u>>>32-13;u=x1+x13|0;x5^=u<<18|u>>>32-18;u=x10+x6|0;x14^=u<<7|u>>>32-7;u=x14+x10|0;x2^=u<<9|u>>>32-9;u=x2+x14|0;x6^=u<<13|u>>>32-13;u=x6+x2|0;x10^=u<<18|u>>>32-18;u=x15+x11|0;x3^=u<<7|u>>>32-7;u=x3+x15|0;x7^=u<<9|u>>>32-9;u=x7+x3|0;x11^=u<<13|u>>>32-13;u=x11+x7|0;x15^=u<<18|u>>>32-18;u=x0+x3|0;x1^=u<<7|u>>>32-7;u=x1+x0|0;x2^=u<<9|u>>>32-9;u=x2+x1|0;x3^=u<<13|u>>>32-13;u=x3+x2|0;x0^=u<<18|u>>>32-18;u=x5+x4|0;x6^=u<<7|u>>>32-7;u=x6+x5|0;x7^=u<<9|u>>>32-9;u=x7+x6|0;x4^=u<<13|u>>>32-13;u=x4+x7|0;x5^=u<<18|u>>>32-18;u=x10+x9|0;x11^=u<<7|u>>>32-7;u=x11+x10|0;x8^=u<<9|u>>>32-9;u=x8+x11|0;x9^=u<<13|u>>>32-13;u=x9+x8|0;x10^=u<<18|u>>>32-18;u=x15+x14|0;x12^=u<<7|u>>>32-7;u=x12+x15|0;x13^=u<<9|u>>>32-9;u=x13+x12|0;x14^=u<<13|u>>>32-13;u=x14+x13|0;x15^=u<<18|u>>>32-18}x0=x0+j0|0;x1=x1+j1|0;x2=x2+j2|0;x3=x3+j3|0;x4=x4+j4|0;x5=x5+j5|0;x6=x6+j6|0;x7=x7+j7|0;x8=x8+j8|0;x9=x9+j9|0;x10=x10+j10|0;x11=x11+j11|0;x12=x12+j12|0;x13=x13+j13|0;x14=x14+j14|0;x15=x15+j15|0;o[0]=x0>>>0&255;o[1]=x0>>>8&255;o[2]=x0>>>16&255;o[3]=x0>>>24&255;o[4]=x1>>>0&255;o[5]=x1>>>8&255;o[6]=x1>>>16&255;o[7]=x1>>>24&255;o[8]=x2>>>0&255;o[9]=x2>>>8&255;o[10]=x2>>>16&255;o[11]=x2>>>24&255;o[12]=x3>>>0&255;o[13]=x3>>>8&255;o[14]=x3>>>16&255;o[15]=x3>>>24&255;o[16]=x4>>>0&255;o[17]=x4>>>8&255;o[18]=x4>>>16&255;o[19]=x4>>>24&255;o[20]=x5>>>0&255;o[21]=x5>>>8&255;o[22]=x5>>>16&255;o[23]=x5>>>24&255;o[24]=x6>>>0&255;o[25]=x6>>>8&255;o[26]=x6>>>16&255;o[27]=x6>>>24&255;o[28]=x7>>>0&255;o[29]=x7>>>8&255;o[30]=x7>>>16&255;o[31]=x7>>>24&255;o[32]=x8>>>0&255;o[33]=x8>>>8&255;o[34]=x8>>>16&255;o[35]=x8>>>24&255;o[36]=x9>>>0&255;o[37]=x9>>>8&255;o[38]=x9>>>16&255;o[39]=x9>>>24&255;o[40]=x10>>>0&255;o[41]=x10>>>8&255;o[42]=x10>>>16&255;o[43]=x10>>>24&255;o[44]=x11>>>0&255;o[45]=x11>>>8&255;o[46]=x11>>>16&255;o[47]=x11>>>24&255;o[48]=x12>>>0&255;o[49]=x12>>>8&255;o[50]=x12>>>16&255;o[51]=x12>>>24&255;o[52]=x13>>>0&255;o[53]=x13>>>8&255;o[54]=x13>>>16&255;o[55]=x13>>>24&255;o[56]=x14>>>0&255;o[57]=x14>>>8&255;o[58]=x14>>>16&255;o[59]=x14>>>24&255;o[60]=x15>>>0&255;o[61]=x15>>>8&255;o[62]=x15>>>16&255;o[63]=x15>>>24&255}function core_hsalsa20(o,p,k,c){var j0=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,j1=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,j2=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,j3=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,j4=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,j5=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,j6=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,j7=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,j8=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,j9=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,j10=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,j11=k[16]&255|(k[17]&255)<<8|(k[18]&255)<<16|(k[19]&255)<<24,j12=k[20]&255|(k[21]&255)<<8|(k[22]&255)<<16|(k[23]&255)<<24,j13=k[24]&255|(k[25]&255)<<8|(k[26]&255)<<16|(k[27]&255)<<24,j14=k[28]&255|(k[29]&255)<<8|(k[30]&255)<<16|(k[31]&255)<<24,j15=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24;var x0=j0,x1=j1,x2=j2,x3=j3,x4=j4,x5=j5,x6=j6,x7=j7,x8=j8,x9=j9,x10=j10,x11=j11,x12=j12,x13=j13,x14=j14,x15=j15,u;for(var i=0;i<20;i+=2){u=x0+x12|0;x4^=u<<7|u>>>32-7;u=x4+x0|0;x8^=u<<9|u>>>32-9;u=x8+x4|0;x12^=u<<13|u>>>32-13;u=x12+x8|0;x0^=u<<18|u>>>32-18;u=x5+x1|0;x9^=u<<7|u>>>32-7;u=x9+x5|0;x13^=u<<9|u>>>32-9;u=x13+x9|0;x1^=u<<13|u>>>32-13;u=x1+x13|0;x5^=u<<18|u>>>32-18;u=x10+x6|0;x14^=u<<7|u>>>32-7;u=x14+x10|0;x2^=u<<9|u>>>32-9;u=x2+x14|0;x6^=u<<13|u>>>32-13;u=x6+x2|0;x10^=u<<18|u>>>32-18;u=x15+x11|0;x3^=u<<7|u>>>32-7;u=x3+x15|0;x7^=u<<9|u>>>32-9;u=x7+x3|0;x11^=u<<13|u>>>32-13;u=x11+x7|0;x15^=u<<18|u>>>32-18;u=x0+x3|0;x1^=u<<7|u>>>32-7;u=x1+x0|0;x2^=u<<9|u>>>32-9;u=x2+x1|0;x3^=u<<13|u>>>32-13;u=x3+x2|0;x0^=u<<18|u>>>32-18;u=x5+x4|0;x6^=u<<7|u>>>32-7;u=x6+x5|0;x7^=u<<9|u>>>32-9;u=x7+x6|0;x4^=u<<13|u>>>32-13;u=x4+x7|0;x5^=u<<18|u>>>32-18;u=x10+x9|0;x11^=u<<7|u>>>32-7;u=x11+x10|0;x8^=u<<9|u>>>32-9;u=x8+x11|0;x9^=u<<13|u>>>32-13;u=x9+x8|0;x10^=u<<18|u>>>32-18;u=x15+x14|0;x12^=u<<7|u>>>32-7;u=x12+x15|0;x13^=u<<9|u>>>32-9;u=x13+x12|0;x14^=u<<13|u>>>32-13;u=x14+x13|0;x15^=u<<18|u>>>32-18}o[0]=x0>>>0&255;o[1]=x0>>>8&255;o[2]=x0>>>16&255;o[3]=x0>>>24&255;o[4]=x5>>>0&255;o[5]=x5>>>8&255;o[6]=x5>>>16&255;o[7]=x5>>>24&255;o[8]=x10>>>0&255;o[9]=x10>>>8&255;o[10]=x10>>>16&255;o[11]=x10>>>24&255;o[12]=x15>>>0&255;o[13]=x15>>>8&255;o[14]=x15>>>16&255;o[15]=x15>>>24&255;o[16]=x6>>>0&255;o[17]=x6>>>8&255;o[18]=x6>>>16&255;o[19]=x6>>>24&255;o[20]=x7>>>0&255;o[21]=x7>>>8&255;o[22]=x7>>>16&255;o[23]=x7>>>24&255;o[24]=x8>>>0&255;o[25]=x8>>>8&255;o[26]=x8>>>16&255;o[27]=x8>>>24&255;o[28]=x9>>>0&255;o[29]=x9>>>8&255;o[30]=x9>>>16&255;o[31]=x9>>>24&255}function crypto_core_salsa20(out,inp,k,c){core_salsa20(out,inp,k,c)}function crypto_core_hsalsa20(out,inp,k,c){core_hsalsa20(out,inp,k,c)}var sigma=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=m[mpos+i]^x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&255)|0;z[i]=u&255;u>>>=8}b-=64;cpos+=64;mpos+=64}if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=m[mpos+i]^x[i]}return 0}function crypto_stream_salsa20(c,cpos,b,n,k){var z=new Uint8Array(16),x=new Uint8Array(64);var u,i;for(i=0;i<16;i++)z[i]=0;for(i=0;i<8;i++)z[i]=n[i];while(b>=64){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<64;i++)c[cpos+i]=x[i];u=1;for(i=8;i<16;i++){u=u+(z[i]&255)|0;z[i]=u&255;u>>>=8}b-=64;cpos+=64}if(b>0){crypto_core_salsa20(x,z,k,sigma);for(i=0;i<b;i++)c[cpos+i]=x[i]}return 0}function crypto_stream(c,cpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20(c,cpos,d,sn,s)}function crypto_stream_xor(c,cpos,m,mpos,d,n,k){var s=new Uint8Array(32);crypto_core_hsalsa20(s,n,k,sigma);var sn=new Uint8Array(8);for(var i=0;i<8;i++)sn[i]=n[i+16];return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s)}var poly1305=function(key){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var t0,t1,t2,t3,t4,t5,t6,t7;t0=key[0]&255|(key[1]&255)<<8;this.r[0]=t0&8191;t1=key[2]&255|(key[3]&255)<<8;this.r[1]=(t0>>>13|t1<<3)&8191;t2=key[4]&255|(key[5]&255)<<8;this.r[2]=(t1>>>10|t2<<6)&7939;t3=key[6]&255|(key[7]&255)<<8;this.r[3]=(t2>>>7|t3<<9)&8191;t4=key[8]&255|(key[9]&255)<<8;this.r[4]=(t3>>>4|t4<<12)&255;this.r[5]=t4>>>1&8190;t5=key[10]&255|(key[11]&255)<<8;this.r[6]=(t4>>>14|t5<<2)&8191;t6=key[12]&255|(key[13]&255)<<8;this.r[7]=(t5>>>11|t6<<5)&8065;t7=key[14]&255|(key[15]&255)<<8;this.r[8]=(t6>>>8|t7<<8)&8191;this.r[9]=t7>>>5&127;this.pad[0]=key[16]&255|(key[17]&255)<<8;this.pad[1]=key[18]&255|(key[19]&255)<<8;this.pad[2]=key[20]&255|(key[21]&255)<<8;this.pad[3]=key[22]&255|(key[23]&255)<<8;this.pad[4]=key[24]&255|(key[25]&255)<<8;this.pad[5]=key[26]&255|(key[27]&255)<<8;this.pad[6]=key[28]&255|(key[29]&255)<<8;this.pad[7]=key[30]&255|(key[31]&255)<<8};poly1305.prototype.blocks=function(m,mpos,bytes){var hibit=this.fin?0:1<<11;var t0,t1,t2,t3,t4,t5,t6,t7,c;var d0,d1,d2,d3,d4,d5,d6,d7,d8,d9;var h0=this.h[0],h1=this.h[1],h2=this.h[2],h3=this.h[3],h4=this.h[4],h5=this.h[5],h6=this.h[6],h7=this.h[7],h8=this.h[8],h9=this.h[9];var r0=this.r[0],r1=this.r[1],r2=this.r[2],r3=this.r[3],r4=this.r[4],r5=this.r[5],r6=this.r[6],r7=this.r[7],r8=this.r[8],r9=this.r[9];while(bytes>=16){t0=m[mpos+0]&255|(m[mpos+1]&255)<<8;h0+=t0&8191;t1=m[mpos+2]&255|(m[mpos+3]&255)<<8;h1+=(t0>>>13|t1<<3)&8191;t2=m[mpos+4]&255|(m[mpos+5]&255)<<8;h2+=(t1>>>10|t2<<6)&8191;t3=m[mpos+6]&255|(m[mpos+7]&255)<<8;h3+=(t2>>>7|t3<<9)&8191;t4=m[mpos+8]&255|(m[mpos+9]&255)<<8;h4+=(t3>>>4|t4<<12)&8191;h5+=t4>>>1&8191;t5=m[mpos+10]&255|(m[mpos+11]&255)<<8;h6+=(t4>>>14|t5<<2)&8191;t6=m[mpos+12]&255|(m[mpos+13]&255)<<8;h7+=(t5>>>11|t6<<5)&8191;t7=m[mpos+14]&255|(m[mpos+15]&255)<<8;h8+=(t6>>>8|t7<<8)&8191;h9+=t7>>>5|hibit;c=0;d0=c;d0+=h0*r0;d0+=h1*(5*r9);d0+=h2*(5*r8);d0+=h3*(5*r7);d0+=h4*(5*r6);c=d0>>>13;d0&=8191;d0+=h5*(5*r5);d0+=h6*(5*r4);d0+=h7*(5*r3);d0+=h8*(5*r2);d0+=h9*(5*r1);c+=d0>>>13;d0&=8191;d1=c;d1+=h0*r1;d1+=h1*r0;d1+=h2*(5*r9);d1+=h3*(5*r8);d1+=h4*(5*r7);c=d1>>>13;d1&=8191;d1+=h5*(5*r6);d1+=h6*(5*r5);d1+=h7*(5*r4);d1+=h8*(5*r3);d1+=h9*(5*r2);c+=d1>>>13;d1&=8191;d2=c;d2+=h0*r2;d2+=h1*r1;d2+=h2*r0;d2+=h3*(5*r9);d2+=h4*(5*r8);c=d2>>>13;d2&=8191;d2+=h5*(5*r7);d2+=h6*(5*r6);d2+=h7*(5*r5);d2+=h8*(5*r4);d2+=h9*(5*r3);c+=d2>>>13;d2&=8191;d3=c;d3+=h0*r3;d3+=h1*r2;d3+=h2*r1;d3+=h3*r0;d3+=h4*(5*r9);c=d3>>>13;d3&=8191;d3+=h5*(5*r8);d3+=h6*(5*r7);d3+=h7*(5*r6);d3+=h8*(5*r5);d3+=h9*(5*r4);c+=d3>>>13;d3&=8191;d4=c;d4+=h0*r4;d4+=h1*r3;d4+=h2*r2;d4+=h3*r1;d4+=h4*r0;c=d4>>>13;d4&=8191;d4+=h5*(5*r9);d4+=h6*(5*r8);d4+=h7*(5*r7);d4+=h8*(5*r6);d4+=h9*(5*r5);c+=d4>>>13;d4&=8191;d5=c;d5+=h0*r5;d5+=h1*r4;d5+=h2*r3;d5+=h3*r2;d5+=h4*r1;c=d5>>>13;d5&=8191;d5+=h5*r0;d5+=h6*(5*r9);d5+=h7*(5*r8);d5+=h8*(5*r7);d5+=h9*(5*r6);c+=d5>>>13;d5&=8191;d6=c;d6+=h0*r6;d6+=h1*r5;d6+=h2*r4;d6+=h3*r3;d6+=h4*r2;c=d6>>>13;d6&=8191;d6+=h5*r1;d6+=h6*r0;d6+=h7*(5*r9);d6+=h8*(5*r8);d6+=h9*(5*r7);c+=d6>>>13;d6&=8191;d7=c;d7+=h0*r7;d7+=h1*r6;d7+=h2*r5;d7+=h3*r4;d7+=h4*r3;c=d7>>>13;d7&=8191;d7+=h5*r2;d7+=h6*r1;d7+=h7*r0;d7+=h8*(5*r9);d7+=h9*(5*r8);c+=d7>>>13;d7&=8191;d8=c;d8+=h0*r8;d8+=h1*r7;d8+=h2*r6;d8+=h3*r5;d8+=h4*r4;c=d8>>>13;d8&=8191;d8+=h5*r3;d8+=h6*r2;d8+=h7*r1;d8+=h8*r0;d8+=h9*(5*r9);c+=d8>>>13;d8&=8191;d9=c;d9+=h0*r9;d9+=h1*r8;d9+=h2*r7;d9+=h3*r6;d9+=h4*r5;c=d9>>>13;d9&=8191;d9+=h5*r4;d9+=h6*r3;d9+=h7*r2;d9+=h8*r1;d9+=h9*r0;c+=d9>>>13;d9&=8191;c=(c<<2)+c|0;c=c+d0|0;d0=c&8191;c=c>>>13;d1+=c;h0=d0;h1=d1;h2=d2;h3=d3;h4=d4;h5=d5;h6=d6;h7=d7;h8=d8;h9=d9;mpos+=16;bytes-=16}this.h[0]=h0;this.h[1]=h1;this.h[2]=h2;this.h[3]=h3;this.h[4]=h4;this.h[5]=h5;this.h[6]=h6;this.h[7]=h7;this.h[8]=h8;this.h[9]=h9};poly1305.prototype.finish=function(mac,macpos){var g=new Uint16Array(10);var c,mask,f,i;if(this.leftover){i=this.leftover;this.buffer[i++]=1;for(;i<16;i++)this.buffer[i]=0;this.fin=1;this.blocks(this.buffer,0,16)}c=this.h[1]>>>13;this.h[1]&=8191;for(i=2;i<10;i++){this.h[i]+=c;c=this.h[i]>>>13;this.h[i]&=8191}this.h[0]+=c*5;c=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=c;c=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=c;g[0]=this.h[0]+5;c=g[0]>>>13;g[0]&=8191;for(i=1;i<10;i++){g[i]=this.h[i]+c;c=g[i]>>>13;g[i]&=8191}g[9]-=1<<13;mask=(c^1)-1;for(i=0;i<10;i++)g[i]&=mask;mask=~mask;for(i=0;i<10;i++)this.h[i]=this.h[i]&mask|g[i];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;f=this.h[0]+this.pad[0];this.h[0]=f&65535;for(i=1;i<8;i++){f=(this.h[i]+this.pad[i]|0)+(f>>>16)|0;this.h[i]=f&65535}mac[macpos+0]=this.h[0]>>>0&255;mac[macpos+1]=this.h[0]>>>8&255;mac[macpos+2]=this.h[1]>>>0&255;mac[macpos+3]=this.h[1]>>>8&255;mac[macpos+4]=this.h[2]>>>0&255;mac[macpos+5]=this.h[2]>>>8&255;mac[macpos+6]=this.h[3]>>>0&255;mac[macpos+7]=this.h[3]>>>8&255;mac[macpos+8]=this.h[4]>>>0&255;mac[macpos+9]=this.h[4]>>>8&255;mac[macpos+10]=this.h[5]>>>0&255;mac[macpos+11]=this.h[5]>>>8&255;mac[macpos+12]=this.h[6]>>>0&255;mac[macpos+13]=this.h[6]>>>8&255;mac[macpos+14]=this.h[7]>>>0&255;mac[macpos+15]=this.h[7]>>>8&255};poly1305.prototype.update=function(m,mpos,bytes){var i,want;if(this.leftover){want=16-this.leftover;if(want>bytes)want=bytes;for(i=0;i<want;i++)this.buffer[this.leftover+i]=m[mpos+i];bytes-=want;mpos+=want;this.leftover+=want;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}if(bytes>=16){want=bytes-bytes%16;this.blocks(m,mpos,want);mpos+=want;bytes-=want}if(bytes){for(i=0;i<bytes;i++)this.buffer[this.leftover+i]=m[mpos+i];this.leftover+=bytes}};function crypto_onetimeauth(out,outpos,m,mpos,n,k){var s=new poly1305(k);s.update(m,mpos,n);s.finish(out,outpos);return 0}function crypto_onetimeauth_verify(h,hpos,m,mpos,n,k){var x=new Uint8Array(16);crypto_onetimeauth(x,0,m,mpos,n,k);return crypto_verify_16(h,hpos,x,0)}function crypto_secretbox(c,m,d,n,k){var i;if(d<32)return-1;crypto_stream_xor(c,0,m,0,d,n,k);crypto_onetimeauth(c,16,c,32,d-32,c);for(i=0;i<16;i++)c[i]=0;return 0}function crypto_secretbox_open(m,c,d,n,k){var i;var x=new Uint8Array(32);if(d<32)return-1;crypto_stream(x,0,32,n,k);if(crypto_onetimeauth_verify(c,16,c,32,d-32,x)!==0)return-1;crypto_stream_xor(m,0,c,0,d,n,k);for(i=0;i<32;i++)m[i]=0;return 0}function set25519(r,a){var i;for(i=0;i<16;i++)r[i]=a[i]|0}function car25519(o){var i,v,c=1;for(i=0;i<16;i++){v=o[i]+c+65535;c=Math.floor(v/65536);o[i]=v-c*65536}o[0]+=c-1+37*(c-1)}function sel25519(p,q,b){var t,c=~(b-1);for(var i=0;i<16;i++){t=c&(p[i]^q[i]);p[i]^=t;q[i]^=t}}function pack25519(o,n){var i,j,b;var m=gf(),t=gf();for(i=0;i<16;i++)t[i]=n[i];car25519(t);car25519(t);car25519(t);for(j=0;j<2;j++){m[0]=t[0]-65517;for(i=1;i<15;i++){m[i]=t[i]-65535-(m[i-1]>>16&1);m[i-1]&=65535}m[15]=t[15]-32767-(m[14]>>16&1);b=m[15]>>16&1;m[14]&=65535;sel25519(t,m,1-b)}for(i=0;i<16;i++){o[2*i]=t[i]&255;o[2*i+1]=t[i]>>8}}function neq25519(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);pack25519(c,a);pack25519(d,b);return crypto_verify_32(c,0,d,0)}function par25519(a){var d=new Uint8Array(32);pack25519(d,a);return d[0]&1}function unpack25519(o,n){var i;for(i=0;i<16;i++)o[i]=n[2*i]+(n[2*i+1]<<8);o[15]&=32767}function A(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]+b[i]}function Z(o,a,b){for(var i=0;i<16;i++)o[i]=a[i]-b[i]}function M(o,a,b){var v,c,t0=0,t1=0,t2=0,t3=0,t4=0,t5=0,t6=0,t7=0,t8=0,t9=0,t10=0,t11=0,t12=0,t13=0,t14=0,t15=0,t16=0,t17=0,t18=0,t19=0,t20=0,t21=0,t22=0,t23=0,t24=0,t25=0,t26=0,t27=0,t28=0,t29=0,t30=0,b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];v=a[0];t0+=v*b0;t1+=v*b1;t2+=v*b2;t3+=v*b3;t4+=v*b4;t5+=v*b5;t6+=v*b6;t7+=v*b7;t8+=v*b8;t9+=v*b9;t10+=v*b10;t11+=v*b11;t12+=v*b12;t13+=v*b13;t14+=v*b14;t15+=v*b15;v=a[1];t1+=v*b0;t2+=v*b1;t3+=v*b2;t4+=v*b3;t5+=v*b4;t6+=v*b5;t7+=v*b6;t8+=v*b7;t9+=v*b8;t10+=v*b9;t11+=v*b10;t12+=v*b11;t13+=v*b12;t14+=v*b13;t15+=v*b14;t16+=v*b15;v=a[2];t2+=v*b0;t3+=v*b1;t4+=v*b2;t5+=v*b3;t6+=v*b4;t7+=v*b5;t8+=v*b6;t9+=v*b7;t10+=v*b8;t11+=v*b9;t12+=v*b10;t13+=v*b11;t14+=v*b12;t15+=v*b13;t16+=v*b14;t17+=v*b15;v=a[3];t3+=v*b0;t4+=v*b1;t5+=v*b2;t6+=v*b3;t7+=v*b4;t8+=v*b5;t9+=v*b6;t10+=v*b7;t11+=v*b8;t12+=v*b9;t13+=v*b10;t14+=v*b11;t15+=v*b12;t16+=v*b13;t17+=v*b14;t18+=v*b15;v=a[4];t4+=v*b0;t5+=v*b1;t6+=v*b2;t7+=v*b3;t8+=v*b4;t9+=v*b5;t10+=v*b6;t11+=v*b7;t12+=v*b8;t13+=v*b9;t14+=v*b10;t15+=v*b11;t16+=v*b12;t17+=v*b13;t18+=v*b14;t19+=v*b15;v=a[5];t5+=v*b0;t6+=v*b1;t7+=v*b2;t8+=v*b3;t9+=v*b4;t10+=v*b5;t11+=v*b6;t12+=v*b7;t13+=v*b8;t14+=v*b9;t15+=v*b10;t16+=v*b11;t17+=v*b12;t18+=v*b13;t19+=v*b14;t20+=v*b15;v=a[6];t6+=v*b0;t7+=v*b1;t8+=v*b2;t9+=v*b3;t10+=v*b4;t11+=v*b5;t12+=v*b6;t13+=v*b7;t14+=v*b8;t15+=v*b9;t16+=v*b10;t17+=v*b11;t18+=v*b12;t19+=v*b13;t20+=v*b14;t21+=v*b15;v=a[7];t7+=v*b0;t8+=v*b1;t9+=v*b2;t10+=v*b3;t11+=v*b4;t12+=v*b5;t13+=v*b6;t14+=v*b7;t15+=v*b8;t16+=v*b9;t17+=v*b10;t18+=v*b11;t19+=v*b12;t20+=v*b13;t21+=v*b14;t22+=v*b15;v=a[8];t8+=v*b0;t9+=v*b1;t10+=v*b2;t11+=v*b3;t12+=v*b4;t13+=v*b5;t14+=v*b6;t15+=v*b7;t16+=v*b8;t17+=v*b9;t18+=v*b10;t19+=v*b11;t20+=v*b12;t21+=v*b13;t22+=v*b14;t23+=v*b15;v=a[9];t9+=v*b0;t10+=v*b1;t11+=v*b2;t12+=v*b3;t13+=v*b4;t14+=v*b5;t15+=v*b6;t16+=v*b7;t17+=v*b8;t18+=v*b9;t19+=v*b10;t20+=v*b11;t21+=v*b12;t22+=v*b13;t23+=v*b14;t24+=v*b15;v=a[10];t10+=v*b0;t11+=v*b1;t12+=v*b2;t13+=v*b3;t14+=v*b4;t15+=v*b5;t16+=v*b6;t17+=v*b7;t18+=v*b8;t19+=v*b9;t20+=v*b10;t21+=v*b11;t22+=v*b12;t23+=v*b13;t24+=v*b14;t25+=v*b15;v=a[11];t11+=v*b0;t12+=v*b1;t13+=v*b2;t14+=v*b3;t15+=v*b4;t16+=v*b5;t17+=v*b6;t18+=v*b7;t19+=v*b8;t20+=v*b9;t21+=v*b10;t22+=v*b11;t23+=v*b12;t24+=v*b13;t25+=v*b14;t26+=v*b15;v=a[12];t12+=v*b0;t13+=v*b1;t14+=v*b2;t15+=v*b3;t16+=v*b4;t17+=v*b5;t18+=v*b6;t19+=v*b7;t20+=v*b8;t21+=v*b9;t22+=v*b10;t23+=v*b11;t24+=v*b12;t25+=v*b13;t26+=v*b14;t27+=v*b15;v=a[13];t13+=v*b0;t14+=v*b1;t15+=v*b2;t16+=v*b3;t17+=v*b4;t18+=v*b5;t19+=v*b6;t20+=v*b7;t21+=v*b8;t22+=v*b9;t23+=v*b10;t24+=v*b11;t25+=v*b12;t26+=v*b13;t27+=v*b14;t28+=v*b15;v=a[14];t14+=v*b0;t15+=v*b1;t16+=v*b2;t17+=v*b3;t18+=v*b4;t19+=v*b5;t20+=v*b6;t21+=v*b7;t22+=v*b8;t23+=v*b9;t24+=v*b10;t25+=v*b11;t26+=v*b12;t27+=v*b13;t28+=v*b14;t29+=v*b15;v=a[15];t15+=v*b0;t16+=v*b1;t17+=v*b2;t18+=v*b3;t19+=v*b4;t20+=v*b5;t21+=v*b6;t22+=v*b7;t23+=v*b8;t24+=v*b9;t25+=v*b10;t26+=v*b11;t27+=v*b12;t28+=v*b13;t29+=v*b14;t30+=v*b15;t0+=38*t16;t1+=38*t17;t2+=38*t18;t3+=38*t19;t4+=38*t20;t5+=38*t21;t6+=38*t22;t7+=38*t23;t8+=38*t24;t9+=38*t25;t10+=38*t26;t11+=38*t27;t12+=38*t28;t13+=38*t29;t14+=38*t30;c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);c=1;v=t0+c+65535;c=Math.floor(v/65536);t0=v-c*65536;v=t1+c+65535;c=Math.floor(v/65536);t1=v-c*65536;v=t2+c+65535;c=Math.floor(v/65536);t2=v-c*65536;v=t3+c+65535;c=Math.floor(v/65536);t3=v-c*65536;v=t4+c+65535;c=Math.floor(v/65536);t4=v-c*65536;v=t5+c+65535;c=Math.floor(v/65536);t5=v-c*65536;v=t6+c+65535;c=Math.floor(v/65536);t6=v-c*65536;v=t7+c+65535;c=Math.floor(v/65536);t7=v-c*65536;v=t8+c+65535;c=Math.floor(v/65536);t8=v-c*65536;v=t9+c+65535;c=Math.floor(v/65536);t9=v-c*65536;v=t10+c+65535;c=Math.floor(v/65536);t10=v-c*65536;v=t11+c+65535;c=Math.floor(v/65536);t11=v-c*65536;v=t12+c+65535;c=Math.floor(v/65536);t12=v-c*65536;v=t13+c+65535;c=Math.floor(v/65536);t13=v-c*65536;v=t14+c+65535;c=Math.floor(v/65536);t14=v-c*65536;v=t15+c+65535;c=Math.floor(v/65536);t15=v-c*65536;t0+=c-1+37*(c-1);o[0]=t0;o[1]=t1;o[2]=t2;o[3]=t3;o[4]=t4;o[5]=t5;o[6]=t6;o[7]=t7;o[8]=t8;o[9]=t9;o[10]=t10;o[11]=t11;o[12]=t12;o[13]=t13;o[14]=t14;o[15]=t15}function S(o,a){M(o,a,a)}function inv25519(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=253;a>=0;a--){S(c,c);if(a!==2&&a!==4)M(c,c,i)}for(a=0;a<16;a++)o[a]=c[a]}function pow2523(o,i){var c=gf();var a;for(a=0;a<16;a++)c[a]=i[a];for(a=250;a>=0;a--){S(c,c);if(a!==1)M(c,c,i)}for(a=0;a<16;a++)o[a]=c[a]}function crypto_scalarmult(q,n,p){var z=new Uint8Array(32);var x=new Float64Array(80),r,i;var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf();for(i=0;i<31;i++)z[i]=n[i];z[31]=n[31]&127|64;z[0]&=248;unpack25519(x,p);for(i=0;i<16;i++){b[i]=x[i];d[i]=a[i]=c[i]=0}a[0]=d[0]=1;for(i=254;i>=0;--i){r=z[i>>>3]>>>(i&7)&1;sel25519(a,b,r);sel25519(c,d,r);A(e,a,c);Z(a,a,c);A(c,b,d);Z(b,b,d);S(d,e);S(f,a);M(a,c,a);M(c,b,e);A(e,a,c);Z(a,a,c);S(b,a);Z(c,d,f);M(a,c,_121665);A(a,a,d);M(c,c,a);M(a,d,f);M(d,b,x);S(b,e);sel25519(a,b,r);sel25519(c,d,r)}for(i=0;i<16;i++){x[i+16]=a[i];x[i+32]=c[i];x[i+48]=b[i];x[i+64]=d[i]}var x32=x.subarray(32);var x16=x.subarray(16);inv25519(x32,x32);M(x16,x16,x32);pack25519(q,x16);return 0}function crypto_scalarmult_base(q,n){return crypto_scalarmult(q,n,_9)}function crypto_box_keypair(y,x){randombytes(x,32);return crypto_scalarmult_base(y,x)}function crypto_box_beforenm(k,y,x){var s=new Uint8Array(32);crypto_scalarmult(s,x,y);return crypto_core_hsalsa20(k,_0,s,sigma)}var crypto_box_afternm=crypto_secretbox;var crypto_box_open_afternm=crypto_secretbox_open;function crypto_box(c,m,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_afternm(c,m,d,n,k)}function crypto_box_open(m,c,d,n,y,x){var k=new Uint8Array(32);crypto_box_beforenm(k,y,x);return crypto_box_open_afternm(m,c,d,n,k)}var K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(hh,hl,m,n){var wh=new Int32Array(16),wl=new Int32Array(16),bh0,bh1,bh2,bh3,bh4,bh5,bh6,bh7,bl0,bl1,bl2,bl3,bl4,bl5,bl6,bl7,th,tl,i,j,h,l,a,b,c,d;var ah0=hh[0],ah1=hh[1],ah2=hh[2],ah3=hh[3],ah4=hh[4],ah5=hh[5],ah6=hh[6],ah7=hh[7],al0=hl[0],al1=hl[1],al2=hl[2],al3=hl[3],al4=hl[4],al5=hl[5],al6=hl[6],al7=hl[7];var pos=0;while(n>=128){for(i=0;i<16;i++){j=8*i+pos;wh[i]=m[j+0]<<24|m[j+1]<<16|m[j+2]<<8|m[j+3];wl[i]=m[j+4]<<24|m[j+5]<<16|m[j+6]<<8|m[j+7]}for(i=0;i<80;i++){bh0=ah0;bh1=ah1;bh2=ah2;bh3=ah3;bh4=ah4;bh5=ah5;bh6=ah6;bh7=ah7;bl0=al0;bl1=al1;bl2=al2;bl3=al3;bl4=al4;bl5=al5;bl6=al6;bl7=al7;h=ah7;l=al7;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=(ah4>>>14|al4<<32-14)^(ah4>>>18|al4<<32-18)^(al4>>>41-32|ah4<<32-(41-32));l=(al4>>>14|ah4<<32-14)^(al4>>>18|ah4<<32-18)^(ah4>>>41-32|al4<<32-(41-32));a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=ah4&ah5^~ah4&ah6;l=al4&al5^~al4&al6;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=K[i*2];l=K[i*2+1];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=wh[i%16];l=wl[i%16];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;th=c&65535|d<<16;tl=a&65535|b<<16;h=th;l=tl;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=(ah0>>>28|al0<<32-28)^(al0>>>34-32|ah0<<32-(34-32))^(al0>>>39-32|ah0<<32-(39-32));l=(al0>>>28|ah0<<32-28)^(ah0>>>34-32|al0<<32-(34-32))^(ah0>>>39-32|al0<<32-(39-32));a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;h=ah0&ah1^ah0&ah2^ah1&ah2;l=al0&al1^al0&al2^al1&al2;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh7=c&65535|d<<16;bl7=a&65535|b<<16;h=bh3;l=bl3;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=th;l=tl;a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;bh3=c&65535|d<<16;bl3=a&65535|b<<16;ah1=bh0;ah2=bh1;ah3=bh2;ah4=bh3;ah5=bh4;ah6=bh5;ah7=bh6;ah0=bh7;al1=bl0;al2=bl1;al3=bl2;al4=bl3;al5=bl4;al6=bl5;al7=bl6;al0=bl7;if(i%16===15){for(j=0;j<16;j++){h=wh[j];l=wl[j];a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=wh[(j+9)%16];l=wl[(j+9)%16];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;th=wh[(j+1)%16];tl=wl[(j+1)%16];h=(th>>>1|tl<<32-1)^(th>>>8|tl<<32-8)^th>>>7;l=(tl>>>1|th<<32-1)^(tl>>>8|th<<32-8)^(tl>>>7|th<<32-7);a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;th=wh[(j+14)%16];tl=wl[(j+14)%16];h=(th>>>19|tl<<32-19)^(tl>>>61-32|th<<32-(61-32))^th>>>6;l=(tl>>>19|th<<32-19)^(th>>>61-32|tl<<32-(61-32))^(tl>>>6|th<<32-6);a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;wh[j]=c&65535|d<<16;wl[j]=a&65535|b<<16}}}h=ah0;l=al0;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[0];l=hl[0];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[0]=ah0=c&65535|d<<16;hl[0]=al0=a&65535|b<<16;h=ah1;l=al1;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[1];l=hl[1];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[1]=ah1=c&65535|d<<16;hl[1]=al1=a&65535|b<<16;h=ah2;l=al2;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[2];l=hl[2];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[2]=ah2=c&65535|d<<16;hl[2]=al2=a&65535|b<<16;h=ah3;l=al3;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[3];l=hl[3];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[3]=ah3=c&65535|d<<16;hl[3]=al3=a&65535|b<<16;h=ah4;l=al4;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[4];l=hl[4];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[4]=ah4=c&65535|d<<16;hl[4]=al4=a&65535|b<<16;h=ah5;l=al5;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[5];l=hl[5];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[5]=ah5=c&65535|d<<16;hl[5]=al5=a&65535|b<<16;h=ah6;l=al6;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[6];l=hl[6];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[6]=ah6=c&65535|d<<16;hl[6]=al6=a&65535|b<<16;h=ah7;l=al7;a=l&65535;b=l>>>16;c=h&65535;d=h>>>16;h=hh[7];l=hl[7];a+=l&65535;b+=l>>>16;c+=h&65535;d+=h>>>16;b+=a>>>16;c+=b>>>16;d+=c>>>16;hh[7]=ah7=c&65535|d<<16;hl[7]=al7=a&65535|b<<16;pos+=128;n-=128}return n}function crypto_hash(out,m,n){var hh=new Int32Array(8),hl=new Int32Array(8),x=new Uint8Array(256),i,b=n;hh[0]=1779033703;hh[1]=3144134277;hh[2]=1013904242;hh[3]=2773480762;hh[4]=1359893119;hh[5]=2600822924;hh[6]=528734635;hh[7]=1541459225;hl[0]=4089235720;hl[1]=2227873595;hl[2]=4271175723;hl[3]=1595750129;hl[4]=2917565137;hl[5]=725511199;hl[6]=4215389547;hl[7]=327033209;crypto_hashblocks_hl(hh,hl,m,n);n%=128;for(i=0;i<n;i++)x[i]=m[b-n+i];x[n]=128;n=256-128*(n<112?1:0);x[n-9]=0;ts64(x,n-8,b/536870912|0,b<<3);crypto_hashblocks_hl(hh,hl,x,n);for(i=0;i<8;i++)ts64(out,8*i,hh[i],hl[i]);return 0}function add(p,q){var a=gf(),b=gf(),c=gf(),d=gf(),e=gf(),f=gf(),g=gf(),h=gf(),t=gf();Z(a,p[1],p[0]);Z(t,q[1],q[0]);M(a,a,t);A(b,p[0],p[1]);A(t,q[0],q[1]);M(b,b,t);M(c,p[3],q[3]);M(c,c,D2);M(d,p[2],q[2]);A(d,d,d);Z(e,b,a);Z(f,d,c);A(g,d,c);A(h,b,a);M(p[0],e,f);M(p[1],h,g);M(p[2],g,f);M(p[3],e,h)}function cswap(p,q,b){var i;for(i=0;i<4;i++){sel25519(p[i],q[i],b)}}function pack(r,p){var tx=gf(),ty=gf(),zi=gf();inv25519(zi,p[2]);M(tx,p[0],zi);M(ty,p[1],zi);pack25519(r,ty);r[31]^=par25519(tx)<<7}function scalarmult(p,q,s){var b,i;set25519(p[0],gf0);set25519(p[1],gf1);set25519(p[2],gf1);set25519(p[3],gf0);for(i=255;i>=0;--i){b=s[i/8|0]>>(i&7)&1;cswap(p,q,b);add(q,p);add(p,p);cswap(p,q,b)}}function scalarbase(p,s){var q=[gf(),gf(),gf(),gf()];set25519(q[0],X);set25519(q[1],Y);set25519(q[2],gf1);M(q[3],X,Y);scalarmult(p,q,s)}function crypto_sign_keypair(pk,sk,seeded){var d=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()];var i;if(!seeded)randombytes(sk,32);crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;scalarbase(p,d);pack(pk,p);for(i=0;i<32;i++)sk[i+32]=pk[i];return 0}var L=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(r,x){var carry,i,j,k;for(i=63;i>=32;--i){carry=0;for(j=i-32,k=i-12;j<k;++j){x[j]+=carry-16*x[i]*L[j-(i-32)];carry=x[j]+128>>8;x[j]-=carry*256}x[j]+=carry;x[i]=0}carry=0;for(j=0;j<32;j++){x[j]+=carry-(x[31]>>4)*L[j];carry=x[j]>>8;x[j]&=255}for(j=0;j<32;j++)x[j]-=carry*L[j];for(i=0;i<32;i++){x[i+1]+=x[i]>>8;r[i]=x[i]&255}}function reduce(r){var x=new Float64Array(64),i;for(i=0;i<64;i++)x[i]=r[i];for(i=0;i<64;i++)r[i]=0;modL(r,x)}function crypto_sign(sm,m,n,sk){var d=new Uint8Array(64),h=new Uint8Array(64),r=new Uint8Array(64);var i,j,x=new Float64Array(64);var p=[gf(),gf(),gf(),gf()];crypto_hash(d,sk,32);d[0]&=248;d[31]&=127;d[31]|=64;var smlen=n+64;for(i=0;i<n;i++)sm[64+i]=m[i];for(i=0;i<32;i++)sm[32+i]=d[32+i];crypto_hash(r,sm.subarray(32),n+32);reduce(r);scalarbase(p,r);pack(sm,p);for(i=32;i<64;i++)sm[i]=sk[i];crypto_hash(h,sm,n+64);reduce(h);for(i=0;i<64;i++)x[i]=0;for(i=0;i<32;i++)x[i]=r[i];for(i=0;i<32;i++){for(j=0;j<32;j++){x[i+j]+=h[i]*d[j]}}modL(sm.subarray(32),x);return smlen}function unpackneg(r,p){var t=gf(),chk=gf(),num=gf(),den=gf(),den2=gf(),den4=gf(),den6=gf();set25519(r[2],gf1);unpack25519(r[1],p);S(num,r[1]);M(den,num,D);Z(num,num,r[2]);A(den,r[2],den);S(den2,den);S(den4,den2);M(den6,den4,den2);M(t,den6,num);M(t,t,den);pow2523(t,t);M(t,t,num);M(t,t,den);M(t,t,den);M(r[0],t,den);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))M(r[0],r[0],I);S(chk,r[0]);M(chk,chk,den);if(neq25519(chk,num))return-1;if(par25519(r[0])===p[31]>>7)Z(r[0],gf0,r[0]);M(r[3],r[0],r[1]);return 0}function crypto_sign_open(m,sm,n,pk){var i,mlen;var t=new Uint8Array(32),h=new Uint8Array(64);var p=[gf(),gf(),gf(),gf()],q=[gf(),gf(),gf(),gf()];mlen=-1;if(n<64)return-1;if(unpackneg(q,pk))return-1;for(i=0;i<n;i++)m[i]=sm[i];for(i=0;i<32;i++)m[i+32]=pk[i];crypto_hash(h,m,n);reduce(h);scalarmult(p,q,h);scalarbase(q,sm.subarray(32));add(p,q);pack(t,p);n-=64;if(crypto_verify_32(sm,0,t,0)){for(i=0;i<n;i++)m[i]=0;return-1}for(i=0;i<n;i++)m[i]=sm[i+64];mlen=n;return mlen}var crypto_secretbox_KEYBYTES=32,crypto_secretbox_NONCEBYTES=24,crypto_secretbox_ZEROBYTES=32,crypto_secretbox_BOXZEROBYTES=16,crypto_scalarmult_BYTES=32,crypto_scalarmult_SCALARBYTES=32,crypto_box_PUBLICKEYBYTES=32,crypto_box_SECRETKEYBYTES=32,crypto_box_BEFORENMBYTES=32,crypto_box_NONCEBYTES=crypto_secretbox_NONCEBYTES,crypto_box_ZEROBYTES=crypto_secretbox_ZEROBYTES,crypto_box_BOXZEROBYTES=crypto_secretbox_BOXZEROBYTES,crypto_sign_BYTES=64,crypto_sign_PUBLICKEYBYTES=32,crypto_sign_SECRETKEYBYTES=64,crypto_sign_SEEDBYTES=32,crypto_hash_BYTES=64;nacl.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_box_afternm,crypto_box:crypto_box,crypto_box_open:crypto_box_open,crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:crypto_secretbox_KEYBYTES,crypto_secretbox_NONCEBYTES:crypto_secretbox_NONCEBYTES,crypto_secretbox_ZEROBYTES:crypto_secretbox_ZEROBYTES,crypto_secretbox_BOXZEROBYTES:crypto_secretbox_BOXZEROBYTES,crypto_scalarmult_BYTES:crypto_scalarmult_BYTES,crypto_scalarmult_SCALARBYTES:crypto_scalarmult_SCALARBYTES,crypto_box_PUBLICKEYBYTES:crypto_box_PUBLICKEYBYTES,crypto_box_SECRETKEYBYTES:crypto_box_SECRETKEYBYTES,crypto_box_BEFORENMBYTES:crypto_box_BEFORENMBYTES,crypto_box_NONCEBYTES:crypto_box_NONCEBYTES,crypto_box_ZEROBYTES:crypto_box_ZEROBYTES,crypto_box_BOXZEROBYTES:crypto_box_BOXZEROBYTES,crypto_sign_BYTES:crypto_sign_BYTES,crypto_sign_PUBLICKEYBYTES:crypto_sign_PUBLICKEYBYTES,crypto_sign_SECRETKEYBYTES:crypto_sign_SECRETKEYBYTES,crypto_sign_SEEDBYTES:crypto_sign_SEEDBYTES,crypto_hash_BYTES:crypto_hash_BYTES};function checkLengths(k,n){if(k.length!==crypto_secretbox_KEYBYTES)throw new Error("bad key size");if(n.length!==crypto_secretbox_NONCEBYTES)throw new Error("bad nonce size")}function checkBoxLengths(pk,sk){if(pk.length!==crypto_box_PUBLICKEYBYTES)throw new Error("bad public key size");if(sk.length!==crypto_box_SECRETKEYBYTES)throw new Error("bad secret key size")}function checkArrayTypes(){var t,i;for(i=0;i<arguments.length;i++){if((t=Object.prototype.toString.call(arguments[i]))!=="[object Uint8Array]")throw new TypeError("unexpected type "+t+", use Uint8Array")}}function cleanup(arr){for(var i=0;i<arr.length;i++)arr[i]=0}if(!nacl.util){nacl.util={};nacl.util.decodeUTF8=nacl.util.encodeUTF8=nacl.util.encodeBase64=nacl.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}}nacl.randomBytes=function(n){var b=new Uint8Array(n);randombytes(b,n);return b};nacl.secretbox=function(msg,nonce,key){checkArrayTypes(msg,nonce,key);checkLengths(key,nonce);var m=new Uint8Array(crypto_secretbox_ZEROBYTES+msg.length);var c=new Uint8Array(m.length);for(var i=0;i<msg.length;i++)m[i+crypto_secretbox_ZEROBYTES]=msg[i];crypto_secretbox(c,m,m.length,nonce,key);return c.subarray(crypto_secretbox_BOXZEROBYTES)};nacl.secretbox.open=function(box,nonce,key){checkArrayTypes(box,nonce,key);checkLengths(key,nonce);var c=new Uint8Array(crypto_secretbox_BOXZEROBYTES+box.length);var m=new Uint8Array(c.length);for(var i=0;i<box.length;i++)c[i+crypto_secretbox_BOXZEROBYTES]=box[i];if(c.length<32)return false;if(crypto_secretbox_open(m,c,c.length,nonce,key)!==0)return false;return m.subarray(crypto_secretbox_ZEROBYTES)};nacl.secretbox.keyLength=crypto_secretbox_KEYBYTES;nacl.secretbox.nonceLength=crypto_secretbox_NONCEBYTES;nacl.secretbox.overheadLength=crypto_secretbox_BOXZEROBYTES;nacl.scalarMult=function(n,p){checkArrayTypes(n,p);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error("bad n size");if(p.length!==crypto_scalarmult_BYTES)throw new Error("bad p size");var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult(q,n,p);return q};nacl.scalarMult.base=function(n){checkArrayTypes(n);if(n.length!==crypto_scalarmult_SCALARBYTES)throw new Error("bad n size");var q=new Uint8Array(crypto_scalarmult_BYTES);crypto_scalarmult_base(q,n);return q};nacl.scalarMult.scalarLength=crypto_scalarmult_SCALARBYTES;nacl.scalarMult.groupElementLength=crypto_scalarmult_BYTES;nacl.box=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox(msg,nonce,k)};nacl.box.before=function(publicKey,secretKey){checkArrayTypes(publicKey,secretKey);checkBoxLengths(publicKey,secretKey);var k=new Uint8Array(crypto_box_BEFORENMBYTES);crypto_box_beforenm(k,publicKey,secretKey);return k};nacl.box.after=nacl.secretbox;nacl.box.open=function(msg,nonce,publicKey,secretKey){var k=nacl.box.before(publicKey,secretKey);return nacl.secretbox.open(msg,nonce,k)};nacl.box.open.after=nacl.secretbox.open;nacl.box.keyPair=function(){var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_box_SECRETKEYBYTES);crypto_box_keypair(pk,sk);return{publicKey:pk,secretKey:sk}};nacl.box.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_box_SECRETKEYBYTES)throw new Error("bad secret key size");var pk=new Uint8Array(crypto_box_PUBLICKEYBYTES);crypto_scalarmult_base(pk,secretKey);return{publicKey:pk,secretKey:new Uint8Array(secretKey)}};nacl.box.publicKeyLength=crypto_box_PUBLICKEYBYTES;nacl.box.secretKeyLength=crypto_box_SECRETKEYBYTES;nacl.box.sharedKeyLength=crypto_box_BEFORENMBYTES;nacl.box.nonceLength=crypto_box_NONCEBYTES;nacl.box.overheadLength=nacl.secretbox.overheadLength;nacl.sign=function(msg,secretKey){checkArrayTypes(msg,secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error("bad secret key size");var signedMsg=new Uint8Array(crypto_sign_BYTES+msg.length);crypto_sign(signedMsg,msg,msg.length,secretKey);return signedMsg};nacl.sign.open=function(signedMsg,publicKey){if(arguments.length!==2)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");checkArrayTypes(signedMsg,publicKey);if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error("bad public key size");var tmp=new Uint8Array(signedMsg.length);var mlen=crypto_sign_open(tmp,signedMsg,signedMsg.length,publicKey);if(mlen<0)return null;var m=new Uint8Array(mlen);for(var i=0;i<m.length;i++)m[i]=tmp[i];return m};nacl.sign.detached=function(msg,secretKey){var signedMsg=nacl.sign(msg,secretKey);var sig=new Uint8Array(crypto_sign_BYTES);for(var i=0;i<sig.length;i++)sig[i]=signedMsg[i];return sig};nacl.sign.detached.verify=function(msg,sig,publicKey){checkArrayTypes(msg,sig,publicKey);if(sig.length!==crypto_sign_BYTES)throw new Error("bad signature size");if(publicKey.length!==crypto_sign_PUBLICKEYBYTES)throw new Error("bad public key size");var sm=new Uint8Array(crypto_sign_BYTES+msg.length);var m=new Uint8Array(crypto_sign_BYTES+msg.length);var i;for(i=0;i<crypto_sign_BYTES;i++)sm[i]=sig[i];for(i=0;i<msg.length;i++)sm[i+crypto_sign_BYTES]=msg[i];return crypto_sign_open(m,sm,sm.length,publicKey)>=0};nacl.sign.keyPair=function(){var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);crypto_sign_keypair(pk,sk);return{publicKey:pk,secretKey:sk}};nacl.sign.keyPair.fromSecretKey=function(secretKey){checkArrayTypes(secretKey);if(secretKey.length!==crypto_sign_SECRETKEYBYTES)throw new Error("bad secret key size");var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);for(var i=0;i<pk.length;i++)pk[i]=secretKey[32+i];return{publicKey:pk,secretKey:new Uint8Array(secretKey)}};nacl.sign.keyPair.fromSeed=function(seed){checkArrayTypes(seed);if(seed.length!==crypto_sign_SEEDBYTES)throw new Error("bad seed size");var pk=new Uint8Array(crypto_sign_PUBLICKEYBYTES);var sk=new Uint8Array(crypto_sign_SECRETKEYBYTES);for(var i=0;i<32;i++)sk[i]=seed[i];crypto_sign_keypair(pk,sk,true);return{publicKey:pk,secretKey:sk}};nacl.sign.publicKeyLength=crypto_sign_PUBLICKEYBYTES;nacl.sign.secretKeyLength=crypto_sign_SECRETKEYBYTES;nacl.sign.seedLength=crypto_sign_SEEDBYTES;nacl.sign.signatureLength=crypto_sign_BYTES;nacl.hash=function(msg){checkArrayTypes(msg);var h=new Uint8Array(crypto_hash_BYTES);crypto_hash(h,msg,msg.length);return h};nacl.hash.hashLength=crypto_hash_BYTES;nacl.verify=function(x,y){checkArrayTypes(x,y);if(x.length===0||y.length===0)return false;if(x.length!==y.length)return false;return vn(x,0,y,0,x.length)===0?true:false};nacl.setPRNG=function(fn){randombytes=fn};(function(){var crypto=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(crypto&&crypto.getRandomValues){var QUOTA=65536;nacl.setPRNG(function(x,n){var i,v=new Uint8Array(n);for(i=0;i<n;i+=QUOTA){crypto.getRandomValues(v.subarray(i,i+Math.min(n-i,QUOTA)))}for(i=0;i<n;i++)x[i]=v[i];cleanup(v)})}else if(typeof require!=="undefined"){crypto=require("crypto");if(crypto&&crypto.randomBytes){nacl.setPRNG(function(x,n){var i,v=crypto.randomBytes(n);for(i=0;i<n;i++)x[i]=v[i];cleanup(v)})}}})()})(typeof module!=="undefined"&&module.exports?module.exports:self.nacl=self.nacl||{})},{crypto:undefined}],557:[function(require,module,exports){"use strict";var typer=require("media-typer");var mime=require("mime-types");module.exports=typeofrequest;module.exports.is=typeis;module.exports.hasBody=hasbody;module.exports.normalize=normalize;module.exports.match=mimeMatch;function typeis(value,types_){var i;var types=types_;var val=tryNormalizeType(value);if(!val){return false}if(types&&!Array.isArray(types)){types=new Array(arguments.length-1);for(i=0;i<types.length;i++){types[i]=arguments[i+1]}}if(!types||!types.length){return val}var type;for(i=0;i<types.length;i++){if(mimeMatch(normalize(type=types[i]),val)){return type[0]==="+"||type.indexOf("*")!==-1?val:type}}return false}function hasbody(req){return req.headers["transfer-encoding"]!==undefined||!isNaN(req.headers["content-length"])}function typeofrequest(req,types_){var types=types_;if(!hasbody(req)){return null}if(arguments.length>2){types=new Array(arguments.length-1);for(var i=0;i<types.length;i++){types[i]=arguments[i+1]}}var value=req.headers["content-type"];return typeis(value,types)}function normalize(type){if(typeof type!=="string"){return false}switch(type){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":return"multipart/*"}if(type[0]==="+"){return"*/*"+type}return type.indexOf("/")===-1?mime.lookup(type):type}function mimeMatch(expected,actual){if(expected===false){return false}var actualParts=actual.split("/");var expectedParts=expected.split("/");if(actualParts.length!==2||expectedParts.length!==2){return false}if(expectedParts[0]!=="*"&&expectedParts[0]!==actualParts[0]){return false}if(expectedParts[1].substr(0,2)==="*+"){return expectedParts[1].length<=actualParts[1].length+1&&expectedParts[1].substr(1)===actualParts[1].substr(1-expectedParts[1].length)}if(expectedParts[1]!=="*"&&expectedParts[1]!==actualParts[1]){return false}return true}function normalizeType(value){var type=typer.parse(value);type.parameters=undefined;return typer.format(type)}function tryNormalizeType(value){try{return normalizeType(value)}catch(err){return null}}},{"media-typer":424,"mime-types":429}],558:[function(require,module,exports){"use strict";module.exports=require("./lib/compare")},{"./lib/compare":560}],559:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var bytes="b";var kiloBytes="k";var megaBytes="m";var gigaBytes="g";var teraBytes="t";function isDefined(value){return value!==undefined}var ByteAssertion=function(){function ByteAssertion(number){_classCallCheck(this,ByteAssertion);this.number=number}_createClass(ByteAssertion,[{key:"_parse",value:function _parse(expression){var matches=new RegExp("(<=|>=|<|>|==?)?s*(.*?)s*([kmgt])?b?s*$").exec(expression);return{value:isDefined(matches[2])?parseInt(matches[2]):0,operator:matches[1]||"==",unit:matches[3]||bytes}}},{key:"_magnify",value:function _magnify(value,unit){if(unit===kiloBytes)return value*=1024;if(unit===megaBytes)return value*=1024*1024;if(unit===gigaBytes)return value*=1024*1024*1024;if(unit===teraBytes)return value*=1024*1024*1024*1024;return value}},{key:"assert",value:function assert(expression){var parts=this._parse(expression);if(parts.operator==="<")return this.lessThan(parts.value,parts.unit);if(parts.operator==="<=")return this.lessThanOrEqual(parts.value,parts.unit);if(parts.operator===">")return this.greaterThan(parts.value,parts.unit);if(parts.operator===">=")return this.greaterThanOrEqual(parts.value,parts.unit);return this.equalTo(parts.value,parts.unit)}},{key:"lessThan",value:function lessThan(unitNumber,unit){var magnifiedValue=this._magnify(unitNumber,unit);return isDefined(this.number)&&this.number<magnifiedValue}},{key:"lessThanOrEqual",value:function lessThanOrEqual(unitNumber,unit){var magnifiedValue=this._magnify(unitNumber,unit);return isDefined(this.number)&&this.number<=magnifiedValue}},{key:"equalTo",value:function equalTo(number,unit){var magnifiedValue=this._magnify(number,unit);return isDefined(this.number)&&this.number===magnifiedValue}},{key:"greaterThan",value:function greaterThan(number,unit){var magnifiedValue=this._magnify(number,unit);return isDefined(this.number)&&this.number>magnifiedValue}},{key:"greaterThanOrEqual",value:function greaterThanOrEqual(number,unit){var magnifiedValue=this._magnify(number,unit);return isDefined(this.number)&&this.number>=magnifiedValue}}]);return ByteAssertion}();exports.default=ByteAssertion},{}],560:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDate=isDate;exports.isNumber=isNumber;var _dateAssertion=require("./dateAssertion");var _dateAssertion2=_interopRequireDefault(_dateAssertion);var _byteAssertion=require("./byteAssertion");var _byteAssertion2=_interopRequireDefault(_byteAssertion);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isDate(date){return new _dateAssertion2.default(date)}function isNumber(number){return new _byteAssertion2.default(number)}},{"./byteAssertion":559,"./dateAssertion":561}],561:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _moment=require("moment");var _moment2=_interopRequireDefault(_moment);var _dates=require("./dates");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var DateAssertion=function(){function DateAssertion(date){_classCallCheck(this,DateAssertion);this.date=date}_createClass(DateAssertion,[{key:"_parse",value:function _parse(expression){var matches=new RegExp("(<=|<|>|==?)?s*(.*?)s*([a-z]*)?s*$").exec(expression);return{value:parseInt(matches[2]||0),operator:matches[1]||"==",unit:(0,_dates.normalise)(matches[3]||"days")}}},{key:"_diff",value:function _diff(value,unit){var targetDate=(0,_moment2.default)().subtract(value,unit);var modified=(0,_moment2.default)(this.date);var unitDifference=(0,_moment2.default)(targetDate.format()).diff(modified,"seconds");return unitDifference}},{key:"assert",value:function assert(expression){var parts=this._parse(expression);if(parts.operator==="<")return this.lessThan(parts.value,parts.unit);if(parts.operator===">")return this.greaterThan(parts.value,parts.unit);if(parts.operator==="<=")return this.lessThanOrEqual(parts.value,parts.unit);if(parts.operator===">=")return this.greaterThanOrEqual(parts.value,parts.unit);return this.equalTo(parts.value,parts.unit)}},{key:"lessThan",value:function lessThan(unitNumber,unit){return this._diff(unitNumber,unit)<0}},{key:"equalTo",value:function equalTo(number,unit){return this._diff(number,unit)===0}},{key:"greaterThan",value:function greaterThan(number,unit){return this._diff(number,unit)>0}},{key:"lessThanOrEqual",value:function lessThanOrEqual(number,unit){return this._diff(number,unit)<=0}},{key:"greaterThanOrEqual",value:function greaterThanOrEqual(number,unit){return this._diff(number,unit)>=0}}]);return DateAssertion}();exports.default=DateAssertion},{"./dates":562,moment:433}],562:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.normalise=normalise;var _unitNormaliser=require("./unitNormaliser");var _unitNormaliser2=_interopRequireDefault(_unitNormaliser);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var normaliser=new _unitNormaliser2.default;normaliser.addAlias("hours","hour");normaliser.addAlias("hours","h");normaliser.addAlias("days","d");normaliser.addAlias("days","day");normaliser.addAlias("minutes","m");normaliser.addAlias("minutes","minute");normaliser.addAlias("minutes","min");normaliser.addAlias("minutes","mins");function normalise(name){return normaliser.normalise(name)}},{"./unitNormaliser":563}],563:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var UnitNormaliser=function(){function UnitNormaliser(){_classCallCheck(this,UnitNormaliser);this.namesVarients={}}_createClass(UnitNormaliser,[{key:"addAlias",value:function addAlias(unitName,alias){if(!unitName)throw new Error("absent name!");if(!alias)throw new Error("absent alias!");if(!this.namesVarients[unitName]){this.namesVarients[unitName]=unitName}this.namesVarients[alias.toLowerCase()]=unitName}},{key:"normalise",value:function normalise(alias){if(!alias)return;return this.namesVarients[alias.toLowerCase()]}}]);return UnitNormaliser}();exports.default=UnitNormaliser},{}],564:[function(require,module,exports){"use strict";module.exports=unpipe;function hasPipeDataListeners(stream){var listeners=stream.listeners("data");for(var i=0;i<listeners.length;i++){if(listeners[i].name==="ondata"){return true}}return false}function unpipe(stream){if(!stream){throw new TypeError("argument stream is required")}if(typeof stream.unpipe==="function"){stream.unpipe();return}if(!hasPipeDataListeners(stream)){return}var listener;var listeners=stream.listeners("close");for(var i=0;i<listeners.length;i++){listener=listeners[i];if(listener.name!=="cleanup"&&listener.name!=="onclose"){continue}listener.call(stream)}}},{}],565:[function(require,module,exports){exports=module.exports=function(a,b){if(a&&b){for(var key in b){a[key]=b[key]}}return a}},{}],566:[function(require,module,exports){var v1=require("./v1");var v4=require("./v4");var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid},{"./v1":569,"./v4":570}],567:[function(require,module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}module.exports=bytesToUuid},{}],568:[function(require,module,exports){var rb=require("crypto").randomBytes;function rng(){return rb(16)}module.exports=rng},{crypto:undefined}],569:[function(require,module,exports){var rng=require("./lib/rng");var bytesToUuid=require("./lib/bytesToUuid");var _seedBytes=rng();var _nodeId=[_seedBytes[0]|1,_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]];var _clockseq=(_seedBytes[6]<<8|_seedBytes[7])&16383;var _lastMSecs=0,_lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;var node=options.node||_nodeId;for(var n=0;n<6;++n){b[i+n]=node[n]}return buf?buf:bytesToUuid(b)}module.exports=v1},{"./lib/bytesToUuid":567,"./lib/rng":568}],570:[function(require,module,exports){var rng=require("./lib/rng");var bytesToUuid=require("./lib/bytesToUuid");function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options=="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},{"./lib/bytesToUuid":567,"./lib/rng":568}],571:[function(require,module,exports){"use strict";module.exports=vary;module.exports.append=append;var FIELD_NAME_REGEXP=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function append(header,field){if(typeof header!=="string"){throw new TypeError("header argument is required")}if(!field){throw new TypeError("field argument is required")}var fields=!Array.isArray(field)?parse(String(field)):field;for(var j=0;j<fields.length;j++){if(!FIELD_NAME_REGEXP.test(fields[j])){throw new TypeError("field argument contains an invalid header name")}}if(header==="*"){return header}var val=header;var vals=parse(header.toLowerCase());if(fields.indexOf("*")!==-1||vals.indexOf("*")!==-1){return"*"}for(var i=0;i<fields.length;i++){var fld=fields[i].toLowerCase();if(vals.indexOf(fld)===-1){vals.push(fld);val=val?val+", "+fields[i]:fields[i]}}return val}function parse(header){var end=0;var list=[];var start=0;for(var i=0,len=header.length;i<len;i++){switch(header.charCodeAt(i)){case 32:if(start===end){start=end=i+1}break;case 44:list.push(header.substring(start,end));start=end=i+1;break;default:end=i+1;break}}list.push(header.substring(start,end));return list}function vary(res,field){if(!res||!res.getHeader||!res.setHeader){throw new TypeError("res argument is required")}var val=res.getHeader("Vary")||"";var header=Array.isArray(val)?val.join(", "):String(val);if(val=append(header,field)){res.setHeader("Vary",val)}}},{}],572:[function(require,module,exports){var mod_assertplus=require("assert-plus");var mod_util=require("util");var mod_extsprintf=require("extsprintf");var mod_isError=require("core-util-is").isError;var sprintf=mod_extsprintf.sprintf;module.exports=VError;VError.VError=VError;VError.SError=SError;VError.WError=WError;VError.MultiError=MultiError;function parseConstructorArguments(args){var argv,options,sprintf_args,shortmessage,k;mod_assertplus.object(args,"args");mod_assertplus.bool(args.strict,"args.strict");mod_assertplus.array(args.argv,"args.argv");argv=args.argv;if(argv.length===0){options={};sprintf_args=[]}else if(mod_isError(argv[0])){options={cause:argv[0]};sprintf_args=argv.slice(1)}else if(typeof argv[0]==="object"){options={};for(k in argv[0]){options[k]=argv[0][k]}sprintf_args=argv.slice(1)}else{mod_assertplus.string(argv[0],"first argument to VError, SError, or WError "+"constructor must be a string, object, or Error");options={};sprintf_args=argv}mod_assertplus.object(options);if(!options.strict&&!args.strict){sprintf_args=sprintf_args.map(function(a){return a===null?"null":a===undefined?"undefined":a})}if(sprintf_args.length===0){shortmessage=""}else{shortmessage=sprintf.apply(null,sprintf_args)}return{options:options,shortmessage:shortmessage}}function VError(){var args,obj,parsed,cause,ctor,message,k;args=Array.prototype.slice.call(arguments,0);if(!(this instanceof VError)){obj=Object.create(VError.prototype);VError.apply(obj,arguments);return obj}parsed=parseConstructorArguments({argv:args,strict:false});if(parsed.options.name){mod_assertplus.string(parsed.options.name,'error\'s "name" must be a string');this.name=parsed.options.name}this.jse_shortmsg=parsed.shortmessage;message=parsed.shortmessage;cause=parsed.options.cause;if(cause){mod_assertplus.ok(mod_isError(cause),"cause is not an Error");this.jse_cause=cause;if(!parsed.options.skipCauseMessage){message+=": "+cause.message}}this.jse_info={};if(parsed.options.info){for(k in parsed.options.info){this.jse_info[k]=parsed.options.info[k]}}this.message=message;Error.call(this,message);if(Error.captureStackTrace){ctor=parsed.options.constructorOpt||this.constructor;Error.captureStackTrace(this,ctor)}return this}mod_util.inherits(VError,Error);VError.prototype.name="VError";VError.prototype.toString=function ve_toString(){var str=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;if(this.message)str+=": "+this.message;return str};VError.prototype.cause=function ve_cause(){var cause=VError.cause(this);return cause===null?undefined:cause};VError.cause=function(err){mod_assertplus.ok(mod_isError(err),"err must be an Error");return mod_isError(err.jse_cause)?err.jse_cause:null};VError.info=function(err){var rv,cause,k;mod_assertplus.ok(mod_isError(err),"err must be an Error");cause=VError.cause(err);if(cause!==null){rv=VError.info(cause)}else{rv={}}if(typeof err.jse_info=="object"&&err.jse_info!==null){for(k in err.jse_info){rv[k]=err.jse_info[k]}}return rv};VError.findCauseByName=function(err,name){var cause;mod_assertplus.ok(mod_isError(err),"err must be an Error");mod_assertplus.string(name,"name");mod_assertplus.ok(name.length>0,"name cannot be empty");for(cause=err;cause!==null;cause=VError.cause(cause)){mod_assertplus.ok(mod_isError(cause));if(cause.name==name){return cause}}return null};VError.hasCauseWithName=function(err,name){return VError.findCauseByName(err,name)!==null};VError.fullStack=function(err){mod_assertplus.ok(mod_isError(err),"err must be an Error");var cause=VError.cause(err);if(cause){return err.stack+"\ncaused by: "+VError.fullStack(cause)}return err.stack};VError.errorFromList=function(errors){mod_assertplus.arrayOfObject(errors,"errors");if(errors.length===0){return null}errors.forEach(function(e){mod_assertplus.ok(mod_isError(e))});if(errors.length==1){return errors[0]}return new MultiError(errors)};VError.errorForEach=function(err,func){mod_assertplus.ok(mod_isError(err),"err must be an Error");mod_assertplus.func(func,"func");if(err instanceof MultiError){err.errors().forEach(function iterError(e){func(e)})}else{func(err)}};function SError(){var args,obj,parsed,options;args=Array.prototype.slice.call(arguments,0);if(!(this instanceof SError)){obj=Object.create(SError.prototype);SError.apply(obj,arguments);return obj}parsed=parseConstructorArguments({argv:args,strict:true});options=parsed.options;VError.call(this,options,"%s",parsed.shortmessage);return this}mod_util.inherits(SError,VError);function MultiError(errors){mod_assertplus.array(errors,"list of errors");mod_assertplus.ok(errors.length>0,"must be at least one error");this.ase_errors=errors;VError.call(this,{cause:errors[0]},"first of %d error%s",errors.length,errors.length==1?"":"s")}mod_util.inherits(MultiError,VError);MultiError.prototype.name="MultiError";MultiError.prototype.errors=function me_errors(){return this.ase_errors.slice(0)};function WError(){var args,obj,parsed,options;args=Array.prototype.slice.call(arguments,0);if(!(this instanceof WError)){obj=Object.create(WError.prototype);WError.apply(obj,args);return obj}parsed=parseConstructorArguments({argv:args,strict:false});options=parsed.options;options["skipCauseMessage"]=true;VError.call(this,options,"%s",parsed.shortmessage);return this}mod_util.inherits(WError,VError);WError.prototype.name="WError";WError.prototype.toString=function we_toString(){var str=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;if(this.message)str+=": "+this.message;if(this.jse_cause&&this.jse_cause.message)str+="; caused by "+this.jse_cause.toString();return str};WError.prototype.cause=function we_cause(c){if(mod_isError(c))this.jse_cause=c;return this.jse_cause}},{"assert-plus":185,"core-util-is":261,extsprintf:300,util:undefined}],573:[function(require,module,exports){function DOMParser(options){this.options=options||{locator:{}}}DOMParser.prototype.parseFromString=function(source,mimeType){var options=this.options;var sax=new XMLReader;var domBuilder=options.domBuilder||new DOMHandler;var errorHandler=options.errorHandler;var locator=options.locator;var defaultNSMap=options.xmlns||{};var entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};if(locator){domBuilder.setDocumentLocator(locator)}sax.errorHandler=buildErrorHandler(errorHandler,domBuilder,locator);sax.domBuilder=options.domBuilder||domBuilder;if(/\/x?html?$/.test(mimeType)){entityMap.nbsp="";entityMap.copy="";defaultNSMap[""]="http://www.w3.org/1999/xhtml"}defaultNSMap.xml=defaultNSMap.xml||"http://www.w3.org/XML/1998/namespace";if(source){sax.parse(source,defaultNSMap,entityMap)}else{sax.errorHandler.error("invalid doc source")}return domBuilder.doc};function buildErrorHandler(errorImpl,domBuilder,locator){if(!errorImpl){if(domBuilder instanceof DOMHandler){return domBuilder}errorImpl=domBuilder}var errorHandler={};var isCallback=errorImpl instanceof Function;locator=locator||{};function build(key){var fn=errorImpl[key];if(!fn&&isCallback){fn=errorImpl.length==2?function(msg){errorImpl(key,msg)}:errorImpl}errorHandler[key]=fn&&function(msg){fn("[xmldom "+key+"]\t"+msg+_locator(locator))}||function(){}}build("warning");build("error");build("fatalError");return errorHandler}function DOMHandler(){this.cdata=false}function position(locator,node){node.lineNumber=locator.lineNumber;node.columnNumber=locator.columnNumber}DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null);if(this.locator){this.doc.documentURI=this.locator.systemId}},startElement:function(namespaceURI,localName,qName,attrs){var doc=this.doc;var el=doc.createElementNS(namespaceURI,qName||localName);var len=attrs.length;appendElement(this,el);this.currentElement=el;this.locator&&position(this.locator,el);for(var i=0;i<len;i++){var namespaceURI=attrs.getURI(i);var value=attrs.getValue(i);var qName=attrs.getQName(i);var attr=doc.createAttributeNS(namespaceURI,qName);this.locator&&position(attrs.getLocator(i),attr);attr.value=attr.nodeValue=value;el.setAttributeNode(attr)}},endElement:function(namespaceURI,localName,qName){var current=this.currentElement;var tagName=current.tagName;this.currentElement=current.parentNode},startPrefixMapping:function(prefix,uri){},endPrefixMapping:function(prefix){},processingInstruction:function(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins);appendElement(this,ins)},ignorableWhitespace:function(ch,start,length){},characters:function(chars,start,length){chars=_toString.apply(this,arguments);if(chars){if(this.cdata){var charNode=this.doc.createCDATASection(chars)}else{var charNode=this.doc.createTextNode(chars)}if(this.currentElement){this.currentElement.appendChild(charNode)}else if(/^\s*$/.test(chars)){this.doc.appendChild(charNode)}this.locator&&position(this.locator,charNode)}},skippedEntity:function(name){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(locator){if(this.locator=locator){locator.lineNumber=0}},comment:function(chars,start,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm);appendElement(this,comm)},startCDATA:function(){this.cdata=true},endCDATA:function(){this.cdata=false},startDTD:function(name,publicId,systemId){var impl=this.doc.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt);appendElement(this,dt)}},warning:function(error){console.warn("[xmldom warning]\t"+error,_locator(this.locator))},error:function(error){console.error("[xmldom error]\t"+error,_locator(this.locator))},fatalError:function(error){console.error("[xmldom fatalError]\t"+error,_locator(this.locator));throw error}};function _locator(l){if(l){return"\n@"+(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]"}}function _toString(chars,start,length){if(typeof chars=="string"){return chars.substr(start,length)}else{if(chars.length>=start+length||start){return new java.lang.String(chars,start,length)+""}return chars}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null}});function appendElement(hander,node){if(!hander.currentElement){hander.doc.appendChild(node)}else{hander.currentElement.appendChild(node)}}var XMLReader=require("./sax").XMLReader;var DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer;exports.DOMParser=DOMParser},{"./dom":574,"./sax":575}],574:[function(require,module,exports){function copy(src,dest){for(var p in src){dest[p]=src[p]}}function _extends(Class,Super){var pt=Class.prototype;if(Object.create){var ppt=Object.create(Super.prototype);pt.__proto__=ppt}if(!(pt instanceof Super)){function t(){}t.prototype=Super.prototype;t=new t;copy(pt,t);Class.prototype=pt=t}if(pt.constructor!=Class){if(typeof Class!="function"){console.error("unknow Class:"+Class)}pt.constructor=Class}}var htmlns="http://www.w3.org/1999/xhtml";var NodeType={};var ELEMENT_NODE=NodeType.ELEMENT_NODE=1;var ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2;var TEXT_NODE=NodeType.TEXT_NODE=3;var CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4;var ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5;var ENTITY_NODE=NodeType.ENTITY_NODE=6;var PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7;var COMMENT_NODE=NodeType.COMMENT_NODE=8;var DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9;var DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10;var DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11;var NOTATION_NODE=NodeType.NOTATION_NODE=12;var ExceptionCode={};var ExceptionMessage={};var INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);var DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);var WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);var INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);var NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);var NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);var NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);var INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);var SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);var INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);var NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);var INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(code,message){if(message instanceof Error){var error=message}else{error=this;Error.call(this,ExceptionMessage[code]);this.message=ExceptionMessage[code];if(Error.captureStackTrace)Error.captureStackTrace(this,DOMException)}error.code=code;if(message)this.message=this.message+": "+message;return error}DOMException.prototype=Error.prototype;copy(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function(index){return this[index]||null},toString:function(isHTML,nodeFilter){for(var buf=[],i=0;i<this.length;i++){serializeToString(this[i],buf,isHTML,nodeFilter)}return buf.join("")}};function LiveNodeList(node,refresh){this._node=node;this._refresh=refresh;_updateLiveList(this)}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length);copy(ls,list);list._inc=inc}}LiveNodeList.prototype.item=function(i){_updateLiveList(this);return this[i]};_extends(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(list,node){var i=list.length;while(i--){if(list[i]===node){return i}}}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr){list[_findNodeIndex(list,oldAttr)]=newAttr}else{list[list.length++]=newAttr}if(el){newAttr.ownerElement=el;var doc=el.ownerDocument;if(doc){oldAttr&&_onRemoveAttribute(doc,el,oldAttr);_onAddAttribute(doc,el,newAttr)}}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,attr);if(i>=0){var lastIndex=list.length-1;while(i<lastIndex){list[i]=list[++i]}list.length=lastIndex;if(el){var doc=el.ownerDocument;if(doc){_onRemoveAttribute(doc,el,attr);attr.ownerElement=null}}}else{throw DOMException(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr))}}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(key){var i=this.length;while(i--){var attr=this[i];if(attr.nodeName==key){return attr}}},setNamedItem:function(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement){throw new DOMException(INUSE_ATTRIBUTE_ERR)}var oldAttr=this.getNamedItem(attr.nodeName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr},setNamedItemNS:function(attr){var el=attr.ownerElement,oldAttr;if(el&&el!=this._ownerElement){throw new DOMException(INUSE_ATTRIBUTE_ERR)}oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr},removeNamedItem:function(key){var attr=this.getNamedItem(key);_removeNamedNode(this._ownerElement,this,attr);return attr},removeNamedItemNS:function(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);_removeNamedNode(this._ownerElement,this,attr);return attr},getNamedItemNS:function(namespaceURI,localName){var i=this.length;while(i--){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI){return node}}return null}};function DOMImplementation(features){this._features={};if(features){for(var feature in features){this._features=features[feature]}}}DOMImplementation.prototype={hasFeature:function(feature,version){var versions=this._features[feature.toLowerCase()];if(versions&&(!version||version in versions)){return true}else{return false}},createDocument:function(namespaceURI,qualifiedName,doctype){var doc=new Document;doc.implementation=this;doc.childNodes=new NodeList;doc.doctype=doctype;if(doctype){doc.appendChild(doctype)}if(qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root)}return doc},createDocumentType:function(qualifiedName,publicId,systemId){var node=new DocumentType;node.name=qualifiedName;node.nodeName=qualifiedName;node.publicId=publicId;node.systemId=systemId;return node}};function Node(){}Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(newChild,refChild){return _insertBefore(this,newChild,refChild)},replaceChild:function(newChild,oldChild){this.insertBefore(newChild,oldChild);if(oldChild){this.removeChild(oldChild)}},removeChild:function(oldChild){return _removeChild(this,oldChild)},appendChild:function(newChild){return this.insertBefore(newChild,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(deep){return cloneNode(this.ownerDocument||this,this,deep)},normalize:function(){var child=this.firstChild;while(child){var next=child.nextSibling;if(next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE){this.removeChild(next);child.appendData(next.data)}else{child.normalize();child=next}}},isSupported:function(feature,version){return this.ownerDocument.implementation.hasFeature(feature,version)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(namespaceURI){var el=this;while(el){var map=el._nsMap;if(map){for(var n in map){if(map[n]==namespaceURI){return n}}}el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},lookupNamespaceURI:function(prefix){var el=this;while(el){var map=el._nsMap;if(map){if(prefix in map){return map[prefix]}}el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},isDefaultNamespace:function(namespaceURI){var prefix=this.lookupPrefix(namespaceURI);return prefix==null}};function _xmlEncoder(c){return c=="<"&&"&lt;"||c==">"&&"&gt;"||c=="&"&&"&amp;"||c=='"'&&"&quot;"||"&#"+c.charCodeAt()+";"}copy(NodeType,Node);copy(NodeType,Node.prototype);function _visitNode(node,callback){if(callback(node)){return true}if(node=node.firstChild){do{if(_visitNode(node,callback)){return true}}while(node=node.nextSibling)}}function Document(){}function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns=="http://www.w3.org/2000/xmlns/"){el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value}}function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns=="http://www.w3.org/2000/xmlns/"){delete el._nsMap[newAttr.prefix?newAttr.localName:""]}}function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild){cs[cs.length++]=newChild}else{var child=el.firstChild;var i=0;while(child){cs[i++]=child;child=child.nextSibling}cs.length=i}}}function _removeChild(parentNode,child){var previous=child.previousSibling;var next=child.nextSibling;if(previous){previous.nextSibling=next}else{parentNode.firstChild=next}if(next){next.previousSibling=previous}else{parentNode.lastChild=previous}_onUpdateChild(parentNode.ownerDocument,parentNode);return child}function _insertBefore(parentNode,newChild,nextChild){var cp=newChild.parentNode;if(cp){cp.removeChild(newChild)}if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=newChild.firstChild;if(newFirst==null){return newChild}var newLast=newChild.lastChild}else{newFirst=newLast=newChild}var pre=nextChild?nextChild.previousSibling:parentNode.lastChild;newFirst.previousSibling=pre;newLast.nextSibling=nextChild;if(pre){pre.nextSibling=newFirst}else{parentNode.firstChild=newFirst}if(nextChild==null){parentNode.lastChild=newLast}else{nextChild.previousSibling=newLast}do{newFirst.parentNode=parentNode}while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){newChild.firstChild=newChild.lastChild=null}return newChild}function _appendSingleChild(parentNode,newChild){var cp=newChild.parentNode;if(cp){var pre=parentNode.lastChild;cp.removeChild(newChild);var pre=parentNode.lastChild}var pre=parentNode.lastChild;newChild.parentNode=parentNode;newChild.previousSibling=pre;newChild.nextSibling=null;if(pre){pre.nextSibling=newChild}else{parentNode.firstChild=newChild}parentNode.lastChild=newChild;_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);return newChild}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){var child=newChild.firstChild;while(child){var next=child.nextSibling;this.insertBefore(child,refChild);child=next}return newChild}if(this.documentElement==null&&newChild.nodeType==ELEMENT_NODE){this.documentElement=newChild}return _insertBefore(this,newChild,refChild),newChild.ownerDocument=this,newChild},removeChild:function(oldChild){if(this.documentElement==oldChild){this.documentElement=null}return _removeChild(this,oldChild)},importNode:function(importedNode,deep){return importNode(this,importedNode,deep)},getElementById:function(id){var rtv=null;_visitNode(this.documentElement,function(node){if(node.nodeType==ELEMENT_NODE){if(node.getAttribute("id")==id){rtv=node;return true}}});return rtv},createElement:function(tagName){var node=new Element;node.ownerDocument=this;node.nodeName=tagName;node.tagName=tagName;node.childNodes=new NodeList;var attrs=node.attributes=new NamedNodeMap;attrs._ownerElement=node;return node},createDocumentFragment:function(){var node=new DocumentFragment;node.ownerDocument=this;node.childNodes=new NodeList;return node},createTextNode:function(data){var node=new Text;node.ownerDocument=this;node.appendData(data);return node},createComment:function(data){var node=new Comment;node.ownerDocument=this;node.appendData(data);return node},createCDATASection:function(data){var node=new CDATASection;node.ownerDocument=this;node.appendData(data);return node},createProcessingInstruction:function(target,data){var node=new ProcessingInstruction;node.ownerDocument=this;node.tagName=node.target=target;node.nodeValue=node.data=data;return node},createAttribute:function(name){var node=new Attr;node.ownerDocument=this;node.name=name;node.nodeName=name;node.localName=name;node.specified=true;return node},createEntityReference:function(name){var node=new EntityReference;node.ownerDocument=this;node.nodeName=name;return node},createElementNS:function(namespaceURI,qualifiedName){var node=new Element;var pl=qualifiedName.split(":");var attrs=node.attributes=new NamedNodeMap;node.childNodes=new NodeList;node.ownerDocument=this;node.nodeName=qualifiedName;node.tagName=qualifiedName;node.namespaceURI=namespaceURI;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1]}else{node.localName=qualifiedName}attrs._ownerElement=node;return node},createAttributeNS:function(namespaceURI,qualifiedName){var node=new Attr;var pl=qualifiedName.split(":");node.ownerDocument=this;node.nodeName=qualifiedName;node.name=qualifiedName;node.namespaceURI=namespaceURI;node.specified=true;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1]}else{node.localName=qualifiedName}return node}};_extends(Document,Node);function Element(){this._nsMap={}}Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(name){return this.getAttributeNode(name)!=null},getAttribute:function(name){var attr=this.getAttributeNode(name);return attr&&attr.value||""},getAttributeNode:function(name){return this.attributes.getNamedItem(name)},setAttribute:function(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr)},removeAttribute:function(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr)},appendChild:function(newChild){if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){return this.insertBefore(newChild,null)}else{return _appendSingleChild(this,newChild)}},setAttributeNode:function(newAttr){return this.attributes.setNamedItem(newAttr)},setAttributeNodeNS:function(newAttr){return this.attributes.setNamedItemNS(newAttr)},removeAttributeNode:function(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName)},removeAttributeNS:function(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old)},hasAttributeNS:function(namespaceURI,localName){return this.getAttributeNodeNS(namespaceURI,localName)!=null},getAttributeNS:function(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||""},setAttributeNS:function(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr)},getAttributeNodeNS:function(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName)},getElementsByTagName:function(tagName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType==ELEMENT_NODE&&(tagName==="*"||node.tagName==tagName)){ls.push(node)}});return ls})},getElementsByTagNameNS:function(namespaceURI,localName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE&&(namespaceURI==="*"||node.namespaceURI===namespaceURI)&&(localName==="*"||node.localName==localName)){ls.push(node)}});return ls})}};Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS;_extends(Element,Node);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends(Attr,Node);function CharacterData(){}CharacterData.prototype={data:"",substringData:function(offset,count){return this.data.substring(offset,offset+count)},appendData:function(text){text=this.data+text;this.nodeValue=this.data=text;this.length=text.length},insertData:function(offset,text){this.replaceData(offset,0,text)},appendChild:function(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(offset,count){this.replaceData(offset,count,"")},replaceData:function(offset,count,text){var start=this.data.substring(0,offset);var end=this.data.substring(offset+count);text=start+text+end;this.nodeValue=this.data=text;this.length=text.length}};_extends(CharacterData,Node);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(offset){var text=this.data;var newText=text.substring(offset);text=text.substring(0,offset);this.data=this.nodeValue=text;this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);if(this.parentNode){this.parentNode.insertBefore(newNode,this.nextSibling)}return newNode}};_extends(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends(DocumentType,Node);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends(Notation,Node);function Entity(){}Entity.prototype.nodeType=ENTITY_NODE;_extends(Entity,Node);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends(EntityReference,Node);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends(DocumentFragment,Node);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends(ProcessingInstruction,Node);function XMLSerializer(){}XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter)};Node.prototype.toString=nodeSerializeToString;function nodeSerializeToString(isHtml,nodeFilter){var buf=[];var refNode=this.nodeType==9?this.documentElement:this;var prefix=refNode.prefix;var uri=refNode.namespaceURI;if(uri&&prefix==null){var prefix=refNode.lookupPrefix(uri);if(prefix==null){var visibleNamespaces=[{namespace:uri,prefix:null}]}}serializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);return buf.join("")}function needNamespaceDefine(node,isHTML,visibleNamespaces){var prefix=node.prefix||"";var uri=node.namespaceURI;if(!prefix&&!uri){return false}if(prefix==="xml"&&uri==="http://www.w3.org/XML/1998/namespace"||uri=="http://www.w3.org/2000/xmlns/"){return false}var i=visibleNamespaces.length;while(i--){var ns=visibleNamespaces[i];if(ns.prefix==prefix){return ns.namespace!=uri}}return true}function serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){if(nodeFilter){node=nodeFilter(node);if(node){if(typeof node=="string"){buf.push(node);return}}else{return}}switch(node.nodeType){case ELEMENT_NODE:if(!visibleNamespaces)visibleNamespaces=[];var startVisibleNamespaces=visibleNamespaces.length;var attrs=node.attributes;var len=attrs.length;var child=node.firstChild;var nodeName=node.tagName;isHTML=htmlns===node.namespaceURI||isHTML;buf.push("<",nodeName);for(var i=0;i<len;i++){var attr=attrs.item(i);if(attr.prefix=="xmlns"){visibleNamespaces.push({prefix:attr.localName,namespace:attr.value})}else if(attr.nodeName=="xmlns"){visibleNamespaces.push({prefix:"",namespace:attr.value})}}for(var i=0;i<len;i++){var attr=attrs.item(i);if(needNamespaceDefine(attr,isHTML,visibleNamespaces)){var prefix=attr.prefix||"";var uri=attr.namespaceURI;var ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,'="',uri,'"');visibleNamespaces.push({prefix:prefix,namespace:uri})}serializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces)}if(needNamespaceDefine(node,isHTML,visibleNamespaces)){var prefix=node.prefix||"";var uri=node.namespaceURI;var ns=prefix?" xmlns:"+prefix:" xmlns";buf.push(ns,'="',uri,'"');visibleNamespaces.push({prefix:prefix,namespace:uri})}if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){buf.push(">");if(isHTML&&/^script$/i.test(nodeName)){while(child){if(child.data){buf.push(child.data)}else{serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces)}child=child.nextSibling}}else{while(child){serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);child=child.nextSibling}}buf.push("</",nodeName,">")}else{buf.push("/>")}return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var child=node.firstChild;while(child){serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);child=child.nextSibling}return;case ATTRIBUTE_NODE:return buf.push(" ",node.name,'="',node.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return buf.push(node.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("\x3c!--",node.data,"--\x3e");case DOCUMENT_TYPE_NODE:var pubid=node.publicId;var sysid=node.systemId;buf.push("<!DOCTYPE ",node.name);if(pubid){buf.push(' PUBLIC "',pubid);if(sysid&&sysid!="."){buf.push('" "',sysid)}buf.push('">')}else if(sysid&&sysid!="."){buf.push(' SYSTEM "',sysid,'">')}else{var sub=node.internalSubset;if(sub){buf.push(" [",sub,"]")}buf.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName)}}function importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:node2=node.cloneNode(false);node2.ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=true;break}if(!node2){node2=node.cloneNode(false)}node2.ownerDocument=doc;node2.parentNode=null;if(deep){var child=node.firstChild;while(child){node2.appendChild(importNode(doc,child,deep));child=child.nextSibling}}return node2}function cloneNode(doc,node,deep){var node2=new node.constructor;for(var n in node){var v=node[n];if(typeof v!="object"){if(v!=node2[n]){node2[n]=v}}}if(node.childNodes){node2.childNodes=new NodeList}node2.ownerDocument=doc;switch(node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var attrs2=node2.attributes=new NamedNodeMap;var len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++){node2.setAttributeNode(cloneNode(doc,attrs.item(i),true))}break;case ATTRIBUTE_NODE:deep=true}if(deep){var child=node.firstChild;while(child){node2.appendChild(cloneNode(doc,child,deep));child=child.nextSibling}}return node2}function __set__(object,key,value){object[key]=value}try{if(Object.defineProperty){Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){_updateLiveList(this);return this.$$length}});Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:while(this.firstChild){this.removeChild(this.firstChild)}if(data||String(data)){this.appendChild(this.ownerDocument.createTextNode(data))}break;default:this.data=data;this.value=data;this.nodeValue=data}}});function getTextContent(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];node=node.firstChild;while(node){if(node.nodeType!==7&&node.nodeType!==8){buf.push(getTextContent(node))}node=node.nextSibling}return buf.join("");default:return node.nodeValue}}__set__=function(object,key,value){object["$$"+key]=value}}}catch(e){}exports.DOMImplementation=DOMImplementation;exports.XMLSerializer=XMLSerializer},{}],575:[function(require,module,exports){var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");var tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$");var S_TAG=0;var S_ATTR=1;var S_ATTR_SPACE=2;var S_EQ=3;var S_ATTR_NOQUOT_VALUE=4;var S_ATTR_END=5;var S_TAG_SPACE=6;var S_TAG_CLOSE=7;function XMLReader(){}XMLReader.prototype={parse:function(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument();_copy(defaultNSMap,defaultNSMap={});parse(source,defaultNSMap,entityMap,domBuilder,this.errorHandler);domBuilder.endDocument()}};function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(code>65535){code-=65536;var surrogate1=55296+(code>>10),surrogate2=56320+(code&1023);return String.fromCharCode(surrogate1,surrogate2)}else{return String.fromCharCode(code)}}function entityReplacer(a){var k=a.slice(1,-1);if(k in entityMap){return entityMap[k]}else if(k.charAt(0)==="#"){return fixedFromCharCode(parseInt(k.substr(1).replace("x","0x")))}else{errorHandler.error("entity not found:"+a);return a}}function appendText(end){if(end>start){var xt=source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);locator&&position(start);domBuilder.characters(xt,0,end-start);start=end}}function position(p,m){while(p>=lineEnd&&(m=linePattern.exec(source))){lineStart=m.index;lineEnd=lineStart+m[0].length;locator.lineNumber++}locator.columnNumber=p-lineStart+1}var lineStart=0;var lineEnd=0;var linePattern=/.*(?:\r\n?|\n)|.*$/g;var locator=domBuilder.locator;var parseStack=[{currentNSMap:defaultNSMapCopy}];var closeMap={};var start=0;while(true){try{var tagStart=source.indexOf("<",start);if(tagStart<0){if(!source.substr(start).match(/^\s*$/)){var doc=domBuilder.doc;var text=doc.createTextNode(source.substr(start));doc.appendChild(text);domBuilder.currentElement=text}return}if(tagStart>start){appendText(tagStart)}switch(source.charAt(tagStart+1)){case"/":var end=source.indexOf(">",tagStart+3);var tagName=source.substring(tagStart+2,end);var config=parseStack.pop();if(end<0){tagName=source.substring(tagStart+2).replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" is not complete:"+config.tagName);end=tagStart+1+tagName.length}else if(tagName.match(/\s</)){tagName=tagName.replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" maybe not complete");end=tagStart+1+tagName.length}var localNSMap=config.localNSMap;var endMatch=config.tagName==tagName;var endIgnoreCaseMach=endMatch||config.tagName&&config.tagName.toLowerCase()==tagName.toLowerCase();if(endIgnoreCaseMach){domBuilder.endElement(config.uri,config.localName,tagName);if(localNSMap){for(var prefix in localNSMap){domBuilder.endPrefixMapping(prefix)}}if(!endMatch){errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config.tagName)}}else{parseStack.push(config)}end++;break;case"?":locator&&position(tagStart);end=parseInstruction(source,tagStart,domBuilder);break;case"!":locator&&position(tagStart);end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes;var currentNSMap=parseStack[parseStack.length-1].currentNSMap;var end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);var len=el.length;if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)){el.closed=true;if(!entityMap.nbsp){errorHandler.warning("unclosed xml attribute")}}if(locator&&len){var locator2=copyLocator(locator,{});for(var i=0;i<len;i++){var a=el[i];position(a.offset);a.locator=copyLocator(locator,{})}domBuilder.locator=locator2;if(appendElement(el,domBuilder,currentNSMap)){parseStack.push(el)}domBuilder.locator=locator}else{if(appendElement(el,domBuilder,currentNSMap)){parseStack.push(el)}}if(el.uri==="http://www.w3.org/1999/xhtml"&&!el.closed){end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)}else{end++}}}catch(e){errorHandler.error("element parse error: "+e);end=-1}if(end>start){start=end}else{appendText(Math.max(tagStart,start)+1)}}}function copyLocator(f,t){t.lineNumber=f.lineNumber;t.columnNumber=f.columnNumber;return t}function parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){var attrName;var value;var p=++start;var s=S_TAG;while(true){var c=source.charAt(p);switch(c){case"=":if(s===S_ATTR){attrName=source.slice(start,p);s=S_EQ}else if(s===S_ATTR_SPACE){s=S_EQ}else{throw new Error("attribute equal must after attrName")}break;case"'":case'"':if(s===S_EQ||s===S_ATTR){if(s===S_ATTR){errorHandler.warning('attribute value must after "="');attrName=source.slice(start,p)}start=p+1;p=source.indexOf(c,start);if(p>0){value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);el.add(attrName,value,start-1);s=S_ATTR_END}else{throw new Error("attribute value no end '"+c+"' match")}}else if(s==S_ATTR_NOQUOT_VALUE){value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);el.add(attrName,value,start);errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+")!!");start=p+1;s=S_ATTR_END}else{throw new Error('attribute value must after "="')}break;case"/":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:s=S_TAG_CLOSE;el.closed=true;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')")}break;case"":errorHandler.error("unexpected end of input");if(s==S_TAG){el.setTagName(source.slice(start,p))}return p;case">":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:value=source.slice(start,p);if(value.slice(-1)==="/"){el.closed=true;value=value.slice(0,-1)}case S_ATTR_SPACE:if(s===S_ATTR_SPACE){value=attrName}if(s==S_ATTR_NOQUOT_VALUE){errorHandler.warning('attribute "'+value+'" missed quot(")!!');el.add(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)}else{if(currentNSMap[""]!=="http://www.w3.org/1999/xhtml"||!value.match(/^(?:disabled|checked|selected)$/i)){errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!')}el.add(value,value,start)}break;case S_EQ:throw new Error("attribute value missed!!")}return p;case"":c=" ";default:if(c<=" "){switch(s){case S_TAG:el.setTagName(source.slice(start,p));s=S_TAG_SPACE;break;case S_ATTR:attrName=source.slice(start,p);s=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var value=source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);errorHandler.warning('attribute "'+value+'" missed quot(")!!');el.add(attrName,value,start);case S_ATTR_END:s=S_TAG_SPACE;break}}else{switch(s){case S_ATTR_SPACE:var tagName=el.tagName;if(currentNSMap[""]!=="http://www.w3.org/1999/xhtml"||!attrName.match(/^(?:disabled|checked|selected)$/i)){errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead2!!')}el.add(attrName,attrName,start);start=p;s=S_ATTR;break;case S_ATTR_END:errorHandler.warning('attribute space is required"'+attrName+'"!!');case S_TAG_SPACE:s=S_ATTR;start=p;break;case S_EQ:s=S_ATTR_NOQUOT_VALUE;start=p;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}}p++}}function appendElement(el,domBuilder,currentNSMap){var tagName=el.tagName;var localNSMap=null;var i=el.length;while(i--){var a=el[i];var qName=a.qName;var value=a.value;var nsp=qName.indexOf(":");if(nsp>0){var prefix=a.prefix=qName.slice(0,nsp);var localName=qName.slice(nsp+1);var nsPrefix=prefix==="xmlns"&&localName}else{localName=qName;prefix=null;nsPrefix=qName==="xmlns"&&""}a.localName=localName;if(nsPrefix!==false){if(localNSMap==null){localNSMap={};_copy(currentNSMap,currentNSMap={})}currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value;a.uri="http://www.w3.org/2000/xmlns/";domBuilder.startPrefixMapping(nsPrefix,value)}}var i=el.length;while(i--){a=el[i];var prefix=a.prefix;if(prefix){if(prefix==="xml"){a.uri="http://www.w3.org/XML/1998/namespace"}if(prefix!=="xmlns"){a.uri=currentNSMap[prefix||""]}}}var nsp=tagName.indexOf(":");if(nsp>0){prefix=el.prefix=tagName.slice(0,nsp);localName=el.localName=tagName.slice(nsp+1)}else{prefix=null;localName=el.localName=tagName}var ns=el.uri=currentNSMap[prefix||""];domBuilder.startElement(ns,localName,tagName,el);if(el.closed){domBuilder.endElement(ns,localName,tagName);if(localNSMap){for(prefix in localNSMap){domBuilder.endPrefixMapping(prefix)}}}else{el.currentNSMap=currentNSMap;el.localNSMap=localNSMap;return true}}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd);var text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text)){if(/^script$/i.test(tagName)){domBuilder.characters(text,0,text.length);return elEndStart}text=text.replace(/&#?\w+;/g,entityReplacer);domBuilder.characters(text,0,text.length);return elEndStart}}return elStartEnd+1}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];if(pos==null){pos=source.lastIndexOf("</"+tagName+">");if(pos<elStartEnd){pos=source.lastIndexOf("</"+tagName)}closeMap[tagName]=pos}return pos<elStartEnd}function _copy(source,target){for(var n in source){target[n]=source[n]}}function parseDCC(source,start,domBuilder,errorHandler){var next=source.charAt(start+2);switch(next){case"-":if(source.charAt(start+3)==="-"){var end=source.indexOf("--\x3e",start+4);if(end>start){domBuilder.comment(source,start+4,end-start-4);return end+3}else{errorHandler.error("Unclosed comment");return-1}}else{return-1}default:if(source.substr(start+3,6)=="CDATA["){var end=source.indexOf("]]>",start+9);domBuilder.startCDATA();domBuilder.characters(source,start+9,end-start-9);domBuilder.endCDATA();return end+3}var matchs=split(source,start);var len=matchs.length;if(len>1&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0];var pubid=len>3&&/^public$/i.test(matchs[2][0])&&matchs[3][0];var sysid=len>4&&matchs[4][0];var lastMatch=matchs[len-1];domBuilder.startDTD(name,pubid&&pubid.replace(/^(['"])(.*?)\1$/,"$2"),sysid&&sysid.replace(/^(['"])(.*?)\1$/,"$2"));domBuilder.endDTD();return lastMatch.index+lastMatch[0].length}}return-1}function parseInstruction(source,start,domBuilder){var end=source.indexOf("?>",start);if(end){var match=source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(match){var len=match[0].length;domBuilder.processingInstruction(match[1],match[2]);return end+2}else{return-1}}return-1}function ElementAttributes(source){}ElementAttributes.prototype={setTagName:function(tagName){if(!tagNamePattern.test(tagName)){throw new Error("invalid tagName:"+tagName)}this.tagName=tagName},add:function(qName,value,offset){if(!tagNamePattern.test(qName)){throw new Error("invalid attribute:"+qName)}this[this.length++]={qName:qName,value:value,offset:offset}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function _set_proto_(thiz,parent){thiz.__proto__=parent;return thiz}if(!(_set_proto_({},_set_proto_.prototype)instanceof _set_proto_)){_set_proto_=function(thiz,parent){function p(){}p.prototype=parent;p=new p;for(parent in thiz){p[parent]=thiz[parent]}return p}}function split(source,start){var match;var buf=[];var reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;reg.lastIndex=start;reg.exec(source);while(match=reg.exec(source)){buf.push(match);if(match[1])return buf}}exports.XMLReader=XMLReader},{}],576:[function(require,module,exports){var xpath=typeof exports==="undefined"?{}:exports;(function(exports){"use strict";function curry(func){var slice=Array.prototype.slice,totalargs=func.length,partial=function(args,fn){return function(){return fn.apply(this,args.concat(slice.call(arguments)))}},fn=function(){var args=slice.call(arguments);return args.length<totalargs?partial(args,fn):func.apply(this,slice.apply(arguments,[0,totalargs]))};return fn}var forEach=curry(function(f,xs){for(var i=0;i<xs.length;i+=1){f(xs[i],i,xs)}});var reduce=curry(function(f,seed,xs){var acc=seed;forEach(function(x,i){acc=f(acc,x,i)},xs);return acc});var map=curry(function(f,xs){var mapped=new Array(xs.length);forEach(function(x,i){mapped[i]=f(x)},xs);return mapped});var filter=curry(function(f,xs){var filtered=[];forEach(function(x,i){if(f(x,i)){filtered.push(x)}},xs);return filtered});function compose(){if(arguments.length===0){throw new Error("compose requires at least one argument")}var funcs=Array.prototype.slice.call(arguments).reverse();var f0=funcs[0];var fRem=funcs.slice(1);return function(){return reduce(function(acc,next){return next(acc)},f0.apply(null,arguments),fRem)}}var includes=curry(function(values,value){for(var i=0;i<values.length;i+=1){if(values[i]===value){return true}}return false});function always(value){return function(){return value}}var prop=curry(function(name,obj){return obj[name]});function toString(x){return x.toString()}var join=curry(function(s,xs){return xs.join(s)});var wrap=curry(function(pref,suf,str){return pref+str+suf});function assign(target){var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to}XPathParser.prototype=new Object;XPathParser.prototype.constructor=XPathParser;XPathParser.superclass=Object.prototype;function XPathParser(){this.init()}XPathParser.prototype.init=function(){this.reduceActions=[];this.reduceActions[3]=function(rhs){return new OrOperation(rhs[0],rhs[2])};this.reduceActions[5]=function(rhs){return new AndOperation(rhs[0],rhs[2])};this.reduceActions[7]=function(rhs){return new EqualsOperation(rhs[0],rhs[2])};this.reduceActions[8]=function(rhs){return new NotEqualOperation(rhs[0],rhs[2])};this.reduceActions[10]=function(rhs){return new LessThanOperation(rhs[0],rhs[2])};this.reduceActions[11]=function(rhs){return new GreaterThanOperation(rhs[0],rhs[2])};this.reduceActions[12]=function(rhs){return new LessThanOrEqualOperation(rhs[0],rhs[2])};this.reduceActions[13]=function(rhs){return new GreaterThanOrEqualOperation(rhs[0],rhs[2])};this.reduceActions[15]=function(rhs){return new PlusOperation(rhs[0],rhs[2])};this.reduceActions[16]=function(rhs){return new MinusOperation(rhs[0],rhs[2])};this.reduceActions[18]=function(rhs){return new MultiplyOperation(rhs[0],rhs[2])};this.reduceActions[19]=function(rhs){return new DivOperation(rhs[0],rhs[2])};this.reduceActions[20]=function(rhs){return new ModOperation(rhs[0],rhs[2])};this.reduceActions[22]=function(rhs){return new UnaryMinusOperation(rhs[1])};this.reduceActions[24]=function(rhs){return new BarOperation(rhs[0],rhs[2])};this.reduceActions[25]=function(rhs){return new PathExpr(undefined,undefined,rhs[0])};this.reduceActions[27]=function(rhs){rhs[0].locationPath=rhs[2];return rhs[0]};this.reduceActions[28]=function(rhs){rhs[0].locationPath=rhs[2];rhs[0].locationPath.steps.unshift(new Step(Step.DESCENDANTORSELF,NodeTest.nodeTest,[]));return rhs[0]};this.reduceActions[29]=function(rhs){return new PathExpr(rhs[0],[],undefined)};this.reduceActions[30]=function(rhs){if(Utilities.instance_of(rhs[0],PathExpr)){if(rhs[0].filterPredicates==undefined){rhs[0].filterPredicates=[]}rhs[0].filterPredicates.push(rhs[1]);return rhs[0]}else{return new PathExpr(rhs[0],[rhs[1]],undefined)}};this.reduceActions[32]=function(rhs){return rhs[1]};this.reduceActions[33]=function(rhs){return new XString(rhs[0])};this.reduceActions[34]=function(rhs){return new XNumber(rhs[0])};this.reduceActions[36]=function(rhs){return new FunctionCall(rhs[0],[])};this.reduceActions[37]=function(rhs){return new FunctionCall(rhs[0],rhs[2])};this.reduceActions[38]=function(rhs){return[rhs[0]]};this.reduceActions[39]=function(rhs){rhs[2].unshift(rhs[0]);return rhs[2]};this.reduceActions[43]=function(rhs){return new LocationPath(true,[])};this.reduceActions[44]=function(rhs){rhs[1].absolute=true;return rhs[1]};this.reduceActions[46]=function(rhs){return new LocationPath(false,[rhs[0]])};this.reduceActions[47]=function(rhs){rhs[0].steps.push(rhs[2]);return rhs[0]};this.reduceActions[49]=function(rhs){return new Step(rhs[0],rhs[1],[])};this.reduceActions[50]=function(rhs){return new Step(Step.CHILD,rhs[0],[])};this.reduceActions[51]=function(rhs){return new Step(rhs[0],rhs[1],rhs[2])};this.reduceActions[52]=function(rhs){return new Step(Step.CHILD,rhs[0],rhs[1])};this.reduceActions[54]=function(rhs){return[rhs[0]]};this.reduceActions[55]=function(rhs){rhs[1].unshift(rhs[0]);return rhs[1]};this.reduceActions[56]=function(rhs){if(rhs[0]=="ancestor"){return Step.ANCESTOR}else if(rhs[0]=="ancestor-or-self"){return Step.ANCESTORORSELF}else if(rhs[0]=="attribute"){return Step.ATTRIBUTE}else if(rhs[0]=="child"){return Step.CHILD}else if(rhs[0]=="descendant"){return Step.DESCENDANT}else if(rhs[0]=="descendant-or-self"){return Step.DESCENDANTORSELF}else if(rhs[0]=="following"){return Step.FOLLOWING}else if(rhs[0]=="following-sibling"){return Step.FOLLOWINGSIBLING}else if(rhs[0]=="namespace"){return Step.NAMESPACE}else if(rhs[0]=="parent"){return Step.PARENT}else if(rhs[0]=="preceding"){return Step.PRECEDING}else if(rhs[0]=="preceding-sibling"){return Step.PRECEDINGSIBLING}else if(rhs[0]=="self"){return Step.SELF}return-1};this.reduceActions[57]=function(rhs){return Step.ATTRIBUTE};this.reduceActions[59]=function(rhs){if(rhs[0]=="comment"){return NodeTest.commentTest}else if(rhs[0]=="text"){return NodeTest.textTest}else if(rhs[0]=="processing-instruction"){return NodeTest.anyPiTest}else if(rhs[0]=="node"){return NodeTest.nodeTest}return new NodeTest(-1,undefined)};this.reduceActions[60]=function(rhs){return new NodeTest.PITest(rhs[2])};this.reduceActions[61]=function(rhs){return rhs[1]};this.reduceActions[63]=function(rhs){rhs[1].absolute=true;rhs[1].steps.unshift(new Step(Step.DESCENDANTORSELF,NodeTest.nodeTest,[]));return rhs[1]};this.reduceActions[64]=function(rhs){rhs[0].steps.push(new Step(Step.DESCENDANTORSELF,NodeTest.nodeTest,[]));rhs[0].steps.push(rhs[2]);return rhs[0]};this.reduceActions[65]=function(rhs){return new Step(Step.SELF,NodeTest.nodeTest,[])};this.reduceActions[66]=function(rhs){return new Step(Step.PARENT,NodeTest.nodeTest,[])};this.reduceActions[67]=function(rhs){return new VariableReference(rhs[1])};this.reduceActions[68]=function(rhs){return NodeTest.nameTestAny};this.reduceActions[69]=function(rhs){return new NodeTest.NameTestPrefixAny(rhs[0].split(":")[0])};this.reduceActions[70]=function(rhs){return new NodeTest.NameTestQName(rhs[0])}};XPathParser.actionTable=[" s s        sssssssss    s ss  s  ss","                 s                  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                rrrrr               "," s s        sssssssss    s ss  s  ss","rs  rrrrrrrr s  sssssrrrrrr  rrs rs "," s s        sssssssss    s ss  s  ss","                            s       ","                            s       ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","  s                                 ","                            s       "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr  r  ","a                                   ","r       s                    rr  r  ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrs  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  srrrrrrrr         rrrrrrs rr sr  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r   rrrrrrrr         rrrrrr  rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","                sssss               ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  srrrrrrrr         rrrrrrs rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","              s                     ","                             s      ","                rrrrr               "," s s        sssssssss    s sss s  ss","r  srrrrrrrr         rrrrrrs rr  r  "," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss    s ss  s  ss"," s s        sssssssss      ss  s  ss"," s s        sssssssss    s ss  s  ss"," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr rr  "," s           s  sssss          s  s "," s           s  sssss          s  s ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr sr  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             s      ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  ","                             rr     ","                             s      ","                             rs     ","r      sr                    rr  r  ","r   s  rr            s       rr  r  ","r   rssrr            rss     rr  r  ","r   rssrr            rss     rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrr            rrrss   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrsss         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrr   rr  r  ","r   rrrrrrrr         rrrrrr  rr  r  ","                                 r  ","                                 s  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  srrrrrrrr         rrrrrrs rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr  r  ","r  rrrrrrrrr         rrrrrrr rr rr  ","r  rrrrrrrrr         rrrrrrr rr rr  "," s s        sssssssss    s ss  s  ss","r  rrrrrrrrr         rrrrrrr rr rr  ","                             r      "];XPathParser.actionTableNumber=[" 1 0        /.-,+*)('    & %$  #  \"!","                 J                  ","a  aaaaaaaaa         aaaaaaa aa  a  ","                YYYYY               "," 1 0        /.-,+*)('    & %$  #  \"!","K1  KKKKKKKK .  +*)('KKKKKK  KK# K\" "," 1 0        /.-,+*)('    & %$  #  \"!","                            N       ","                            O       ","e  eeeeeeeee         eeeeeee ee ee  ","f  fffffffff         fffffff ff ff  ","d  ddddddddd         ddddddd dd dd  ","B  BBBBBBBBB         BBBBBBB BB BB  ","A  AAAAAAAAA         AAAAAAA AA AA  ","  P                                 ","                            Q       "," 1           .  +*)('          #  \" ","b  bbbbbbbbb         bbbbbbb bb  b  ","                                    ","!       S                    !!  !  ",'"      T"                    ""  "  ',"$   V  $$            U       $$  $  ","&   &ZY&&            &XW     &&  &  ",")   )))))            )))\\[   ))  )  ",".   ....._^]         .....   ..  .  ","1   11111111         11111   11  1  ","5   55555555         55555`  55  5  ","7   77777777         777777  77  7  ","9   99999999         999999  99  9  ",":  c::::::::         ::::::b :: a:  ","I  fIIIIIIII         IIIIIIe II  I  ","=  =========         ======= == ==  ","?  ?????????         ??????? ?? ??  ","C  CCCCCCCCC         CCCCCCC CC CC  ","J   JJJJJJJJ         JJJJJJ  JJ  J  ","M   MMMMMMMM         MMMMMM  MM  M  ","N  NNNNNNNNN         NNNNNNN NN  N  ","P  PPPPPPPPP         PPPPPPP PP  P  ","                +*)('               ","R  RRRRRRRRR         RRRRRRR RR aR  ","U  UUUUUUUUU         UUUUUUU UU  U  ","Z  ZZZZZZZZZ         ZZZZZZZ ZZ ZZ  ","c  ccccccccc         ccccccc cc cc  ","                             j      ","L  fLLLLLLLL         LLLLLLe LL  L  ","6   66666666         66666   66  6  ","              k                     ","                             l      ","                XXXXX               "," 1 0        /.-,+*)('    & %$m #  \"!","_  f________         ______e __  _  "," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1 0        /.-,+*)('      %$  #  \"!"," 1 0        /.-,+*)('    & %$  #  \"!"," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ",">  >>>>>>>>>         >>>>>>> >> >>  "," 1           .  +*)('          #  \" "," 1           .  +*)('          #  \" ","Q  QQQQQQQQQ         QQQQQQQ QQ aQ  ","V  VVVVVVVVV         VVVVVVV VV aV  ","T  TTTTTTTTT         TTTTTTT TT  T  ","@  @@@@@@@@@         @@@@@@@ @@ @@  ","                                   ","[  [[[[[[[[[         [[[[[[[ [[ [[  ","D  DDDDDDDDD         DDDDDDD DD DD  ","                             HH     ","                                   ","                             F     ","#      T#                    ##  #  ","%   V  %%            U       %%  %  ","'   'ZY''            'XW     ''  '  ","(   (ZY((            (XW     ((  (  ","+   +++++            +++\\[   ++  +  ","*   *****            ***\\[   **  *  ","-   -----            ---\\[   --  -  ",",   ,,,,,            ,,,\\[   ,,  ,  ","0   00000_^]         00000   00  0  ","/   /////_^]         /////   //  /  ","2   22222222         22222   22  2  ","3   33333333         33333   33  3  ","4   44444444         44444   44  4  ","8   88888888         888888  88  8  ","                                 ^  ","                                   ",";  f;;;;;;;;         ;;;;;;e ;;  ;  ","<  f<<<<<<<<         <<<<<<e <<  <  ","O  OOOOOOOOO         OOOOOOO OO  O  ","`  `````````         ``````` ``  `  ","S  SSSSSSSSS         SSSSSSS SS  S  ","W  WWWWWWWWW         WWWWWWW WW  W  ","\\  \\\\\\\\\\\\\\\\\\         \\\\\\\\\\\\\\ \\\\ \\\\  ","E  EEEEEEEEE         EEEEEEE EE EE  "," 1 0        /.-,+*)('    & %$  #  \"!","]  ]]]]]]]]]         ]]]]]]] ]] ]]  ","                             G      "];XPathParser.gotoTable=["3456789:;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","L456789:;<=>?@ AB  CDEFGH IJ ","            M        EFGH IJ ","       N;<=>?@ AB  CDEFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","            S        EFGH IJ ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","              e              ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                        h  J ","              i          j   ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABpqCDEFGH IJ ","                             ","  r6789:;<=>?@ AB  CDEFGH IJ ","   s789:;<=>?@ AB  CDEFGH IJ ","    t89:;<=>?@ AB  CDEFGH IJ ","    u89:;<=>?@ AB  CDEFGH IJ ","     v9:;<=>?@ AB  CDEFGH IJ ","     w9:;<=>?@ AB  CDEFGH IJ ","     x9:;<=>?@ AB  CDEFGH IJ ","     y9:;<=>?@ AB  CDEFGH IJ ","      z:;<=>?@ AB  CDEFGH IJ ","      {:;<=>?@ AB  CDEFGH IJ ","       |;<=>?@ AB  CDEFGH IJ ","       };<=>?@ AB  CDEFGH IJ ","       ~;<=>?@ AB  CDEFGH IJ ","         =>?@ AB  CDEFGH IJ ","456789:;<=>?@ AB  CDEFGH IJ","                    EFGH IJ ","                    EFGH IJ ","                             ","                      GH IJ ","                      GH IJ ","              i             ","              i             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","                             ","o456789:;<=>?@ ABqCDEFGH IJ ","                             ","                             "];XPathParser.productions=[[1,1,2],[2,1,3],[3,1,4],[3,3,3,-9,4],[4,1,5],[4,3,4,-8,5],[5,1,6],[5,3,5,-22,6],[5,3,5,-5,6],[6,1,7],[6,3,6,-23,7],[6,3,6,-24,7],[6,3,6,-6,7],[6,3,6,-7,7],[7,1,8],[7,3,7,-25,8],[7,3,7,-26,8],[8,1,9],[8,3,8,-12,9],[8,3,8,-11,9],[8,3,8,-10,9],[9,1,10],[9,2,-26,9],[10,1,11],[10,3,10,-27,11],[11,1,12],[11,1,13],[11,3,13,-28,14],[11,3,13,-4,14],[13,1,15],[13,2,13,16],[15,1,17],[15,3,-29,2,-30],[15,1,-15],[15,1,-16],[15,1,18],[18,3,-13,-29,-30],[18,4,-13,-29,19,-30],[19,1,20],[19,3,20,-31,19],[20,1,2],[12,1,14],[12,1,21],[21,1,-28],[21,2,-28,14],[21,1,22],[14,1,23],[14,3,14,-28,23],[14,1,24],[23,2,25,26],[23,1,26],[23,3,25,26,27],[23,2,26,27],[23,1,28],[27,1,16],[27,2,16,27],[25,2,-14,-3],[25,1,-32],[26,1,29],[26,3,-20,-29,-30],[26,4,-21,-29,-15,-30],[16,3,-33,30,-34],[30,1,2],[22,2,-4,14],[24,3,14,-4,23],[28,1,-35],[28,1,-2],[17,2,-36,-18],[29,1,-17],[29,1,-19],[29,1,-18]];XPathParser.DOUBLEDOT=2;XPathParser.DOUBLECOLON=3;XPathParser.DOUBLESLASH=4;XPathParser.NOTEQUAL=5;XPathParser.LESSTHANOREQUAL=6;XPathParser.GREATERTHANOREQUAL=7;XPathParser.AND=8;XPathParser.OR=9;XPathParser.MOD=10;XPathParser.DIV=11;XPathParser.MULTIPLYOPERATOR=12;XPathParser.FUNCTIONNAME=13;XPathParser.AXISNAME=14;XPathParser.LITERAL=15;XPathParser.NUMBER=16;XPathParser.ASTERISKNAMETEST=17;XPathParser.QNAME=18;XPathParser.NCNAMECOLONASTERISK=19;XPathParser.NODETYPE=20;XPathParser.PROCESSINGINSTRUCTIONWITHLITERAL=21;XPathParser.EQUALS=22;XPathParser.LESSTHAN=23;XPathParser.GREATERTHAN=24;XPathParser.PLUS=25;XPathParser.MINUS=26;XPathParser.BAR=27;XPathParser.SLASH=28;XPathParser.LEFTPARENTHESIS=29;XPathParser.RIGHTPARENTHESIS=30;XPathParser.COMMA=31;XPathParser.AT=32;XPathParser.LEFTBRACKET=33;XPathParser.RIGHTBRACKET=34;XPathParser.DOT=35;XPathParser.DOLLAR=36;XPathParser.prototype.tokenize=function(s1){var types=[];var values=[];var s=s1+"\0";var pos=0;var c=s.charAt(pos++);while(1){while(c==" "||c=="\t"||c=="\r"||c=="\n"){c=s.charAt(pos++)}if(c=="\0"||pos>=s.length){break}if(c=="("){types.push(XPathParser.LEFTPARENTHESIS);values.push(c);c=s.charAt(pos++);continue}if(c==")"){types.push(XPathParser.RIGHTPARENTHESIS);values.push(c);c=s.charAt(pos++);continue}if(c=="["){types.push(XPathParser.LEFTBRACKET);values.push(c);c=s.charAt(pos++);continue}if(c=="]"){types.push(XPathParser.RIGHTBRACKET);values.push(c);c=s.charAt(pos++);continue}if(c=="@"){types.push(XPathParser.AT);values.push(c);c=s.charAt(pos++);continue}if(c==","){types.push(XPathParser.COMMA);values.push(c);c=s.charAt(pos++);continue}if(c=="|"){types.push(XPathParser.BAR);values.push(c);c=s.charAt(pos++);continue}if(c=="+"){types.push(XPathParser.PLUS);values.push(c);c=s.charAt(pos++);continue}if(c=="-"){types.push(XPathParser.MINUS);values.push(c);c=s.charAt(pos++);continue}if(c=="="){types.push(XPathParser.EQUALS);values.push(c);c=s.charAt(pos++);continue}if(c=="$"){types.push(XPathParser.DOLLAR);values.push(c);c=s.charAt(pos++);continue}if(c=="."){c=s.charAt(pos++);if(c=="."){types.push(XPathParser.DOUBLEDOT);values.push("..");c=s.charAt(pos++);continue}if(c>="0"&&c<="9"){var number="."+c;c=s.charAt(pos++);while(c>="0"&&c<="9"){number+=c;c=s.charAt(pos++)}types.push(XPathParser.NUMBER);values.push(number);continue}types.push(XPathParser.DOT);values.push(".");continue}if(c=="'"||c=='"'){var delimiter=c;var literal="";while(pos<s.length&&(c=s.charAt(pos))!==delimiter){literal+=c;pos+=1}if(c!==delimiter){throw XPathException.fromMessage("Unterminated string literal: "+delimiter+literal)}pos+=1;types.push(XPathParser.LITERAL);values.push(literal);c=s.charAt(pos++);continue}if(c>="0"&&c<="9"){var number=c;c=s.charAt(pos++);while(c>="0"&&c<="9"){number+=c;c=s.charAt(pos++)}if(c=="."){if(s.charAt(pos)>="0"&&s.charAt(pos)<="9"){number+=c;number+=s.charAt(pos++);c=s.charAt(pos++);while(c>="0"&&c<="9"){number+=c;c=s.charAt(pos++)}}}types.push(XPathParser.NUMBER);values.push(number);continue}if(c=="*"){if(types.length>0){var last=types[types.length-1];if(last!=XPathParser.AT&&last!=XPathParser.DOUBLECOLON&&last!=XPathParser.LEFTPARENTHESIS&&last!=XPathParser.LEFTBRACKET&&last!=XPathParser.AND&&last!=XPathParser.OR&&last!=XPathParser.MOD&&last!=XPathParser.DIV&&last!=XPathParser.MULTIPLYOPERATOR&&last!=XPathParser.SLASH&&last!=XPathParser.DOUBLESLASH&&last!=XPathParser.BAR&&last!=XPathParser.PLUS&&last!=XPathParser.MINUS&&last!=XPathParser.EQUALS&&last!=XPathParser.NOTEQUAL&&last!=XPathParser.LESSTHAN&&last!=XPathParser.LESSTHANOREQUAL&&last!=XPathParser.GREATERTHAN&&last!=XPathParser.GREATERTHANOREQUAL){types.push(XPathParser.MULTIPLYOPERATOR);values.push(c);c=s.charAt(pos++);continue}}types.push(XPathParser.ASTERISKNAMETEST);values.push(c);c=s.charAt(pos++);continue}if(c==":"){if(s.charAt(pos)==":"){types.push(XPathParser.DOUBLECOLON);values.push("::");pos++;c=s.charAt(pos++);continue}}if(c=="/"){c=s.charAt(pos++);if(c=="/"){types.push(XPathParser.DOUBLESLASH);values.push("//");c=s.charAt(pos++);continue}types.push(XPathParser.SLASH);values.push("/");continue}if(c=="!"){if(s.charAt(pos)=="="){types.push(XPathParser.NOTEQUAL);values.push("!=");pos++;c=s.charAt(pos++);continue}}if(c=="<"){if(s.charAt(pos)=="="){types.push(XPathParser.LESSTHANOREQUAL);values.push("<=");pos++;c=s.charAt(pos++);continue}types.push(XPathParser.LESSTHAN);values.push("<");c=s.charAt(pos++);continue}if(c==">"){if(s.charAt(pos)=="="){types.push(XPathParser.GREATERTHANOREQUAL);values.push(">=");pos++;c=s.charAt(pos++);continue}types.push(XPathParser.GREATERTHAN);values.push(">");c=s.charAt(pos++);continue}if(c=="_"||Utilities.isLetter(c.charCodeAt(0))){var name=c;c=s.charAt(pos++);while(Utilities.isNCNameChar(c.charCodeAt(0))){name+=c;c=s.charAt(pos++)}if(types.length>0){var last=types[types.length-1];if(last!=XPathParser.AT&&last!=XPathParser.DOUBLECOLON&&last!=XPathParser.LEFTPARENTHESIS&&last!=XPathParser.LEFTBRACKET&&last!=XPathParser.AND&&last!=XPathParser.OR&&last!=XPathParser.MOD&&last!=XPathParser.DIV&&last!=XPathParser.MULTIPLYOPERATOR&&last!=XPathParser.SLASH&&last!=XPathParser.DOUBLESLASH&&last!=XPathParser.BAR&&last!=XPathParser.PLUS&&last!=XPathParser.MINUS&&last!=XPathParser.EQUALS&&last!=XPathParser.NOTEQUAL&&last!=XPathParser.LESSTHAN&&last!=XPathParser.LESSTHANOREQUAL&&last!=XPathParser.GREATERTHAN&&last!=XPathParser.GREATERTHANOREQUAL){if(name=="and"){types.push(XPathParser.AND);values.push(name);continue}if(name=="or"){types.push(XPathParser.OR);values.push(name);continue}if(name=="mod"){types.push(XPathParser.MOD);values.push(name);continue}if(name=="div"){types.push(XPathParser.DIV);values.push(name);continue}}}if(c==":"){if(s.charAt(pos)=="*"){types.push(XPathParser.NCNAMECOLONASTERISK);values.push(name+":*");pos++;c=s.charAt(pos++);continue}if(s.charAt(pos)=="_"||Utilities.isLetter(s.charCodeAt(pos))){name+=":";c=s.charAt(pos++);while(Utilities.isNCNameChar(c.charCodeAt(0))){name+=c;c=s.charAt(pos++)}if(c=="("){types.push(XPathParser.FUNCTIONNAME);values.push(name);continue}types.push(XPathParser.QNAME);values.push(name);continue}if(s.charAt(pos)==":"){types.push(XPathParser.AXISNAME);values.push(name);continue}}if(c=="("){if(name=="comment"||name=="text"||name=="node"){types.push(XPathParser.NODETYPE);values.push(name);continue}if(name=="processing-instruction"){if(s.charAt(pos)==")"){types.push(XPathParser.NODETYPE)}else{types.push(XPathParser.PROCESSINGINSTRUCTIONWITHLITERAL)}values.push(name);continue}types.push(XPathParser.FUNCTIONNAME);values.push(name);continue}types.push(XPathParser.QNAME);values.push(name);continue}throw new Error("Unexpected character "+c)}types.push(1);values.push("[EOF]");return[types,values]};XPathParser.SHIFT="s";XPathParser.REDUCE="r";XPathParser.ACCEPT="a";XPathParser.prototype.parse=function(s){var types;var values;var res=this.tokenize(s);if(res==undefined){return undefined}types=res[0];values=res[1];var tokenPos=0;var state=[];var tokenType=[];var tokenValue=[];var s;var a;var t;state.push(0);tokenType.push(1);tokenValue.push("_S");a=types[tokenPos];t=values[tokenPos++];while(1){s=state[state.length-1];switch(XPathParser.actionTable[s].charAt(a-1)){case XPathParser.SHIFT:tokenType.push(-a);tokenValue.push(t);state.push(XPathParser.actionTableNumber[s].charCodeAt(a-1)-32);a=types[tokenPos];t=values[tokenPos++];break;case XPathParser.REDUCE:var num=XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32][1];var rhs=[];for(var i=0;i<num;i++){tokenType.pop();rhs.unshift(tokenValue.pop());state.pop()}var s_=state[state.length-1];tokenType.push(XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32][0]);if(this.reduceActions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32]==undefined){tokenValue.push(rhs[0])}else{tokenValue.push(this.reduceActions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32](rhs))}state.push(XPathParser.gotoTable[s_].charCodeAt(XPathParser.productions[XPathParser.actionTableNumber[s].charCodeAt(a-1)-32][0]-2)-33);break;case XPathParser.ACCEPT:return new XPath(tokenValue.pop());default:throw new Error("XPath parse error")}}};XPath.prototype=new Object;XPath.prototype.constructor=XPath;XPath.superclass=Object.prototype;function XPath(e){this.expression=e}XPath.prototype.toString=function(){return this.expression.toString()};function setIfUnset(obj,prop,value){if(!(prop in obj)){obj[prop]=value}}XPath.prototype.evaluate=function(c){c.contextNode=c.expressionContextNode;c.contextSize=1;c.contextPosition=1;if(c.isHtml){setIfUnset(c,"caseInsensitive",true);setIfUnset(c,"allowAnyNamespaceForNoPrefix",true)}setIfUnset(c,"caseInsensitive",false);return this.expression.evaluate(c)};XPath.XML_NAMESPACE_URI="http://www.w3.org/XML/1998/namespace";XPath.XMLNS_NAMESPACE_URI="http://www.w3.org/2000/xmlns/";Expression.prototype=new Object;Expression.prototype.constructor=Expression;Expression.superclass=Object.prototype;function Expression(){}Expression.prototype.init=function(){};Expression.prototype.toString=function(){return"<Expression>"};Expression.prototype.evaluate=function(c){throw new Error("Could not evaluate expression.")};UnaryOperation.prototype=new Expression;UnaryOperation.prototype.constructor=UnaryOperation;UnaryOperation.superclass=Expression.prototype;function UnaryOperation(rhs){if(arguments.length>0){this.init(rhs)}}UnaryOperation.prototype.init=function(rhs){this.rhs=rhs};UnaryMinusOperation.prototype=new UnaryOperation;UnaryMinusOperation.prototype.constructor=UnaryMinusOperation;UnaryMinusOperation.superclass=UnaryOperation.prototype;function UnaryMinusOperation(rhs){if(arguments.length>0){this.init(rhs)}}UnaryMinusOperation.prototype.init=function(rhs){UnaryMinusOperation.superclass.init.call(this,rhs)};UnaryMinusOperation.prototype.evaluate=function(c){return this.rhs.evaluate(c).number().negate()};UnaryMinusOperation.prototype.toString=function(){return"-"+this.rhs.toString()};BinaryOperation.prototype=new Expression;BinaryOperation.prototype.constructor=BinaryOperation;BinaryOperation.superclass=Expression.prototype;function BinaryOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}BinaryOperation.prototype.init=function(lhs,rhs){this.lhs=lhs;this.rhs=rhs};OrOperation.prototype=new BinaryOperation;OrOperation.prototype.constructor=OrOperation;OrOperation.superclass=BinaryOperation.prototype;function OrOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}OrOperation.prototype.init=function(lhs,rhs){OrOperation.superclass.init.call(this,lhs,rhs)};OrOperation.prototype.toString=function(){return"("+this.lhs.toString()+" or "+this.rhs.toString()+")"};OrOperation.prototype.evaluate=function(c){var b=this.lhs.evaluate(c).bool();if(b.booleanValue()){return b}return this.rhs.evaluate(c).bool()};AndOperation.prototype=new BinaryOperation;AndOperation.prototype.constructor=AndOperation;AndOperation.superclass=BinaryOperation.prototype;function AndOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}AndOperation.prototype.init=function(lhs,rhs){AndOperation.superclass.init.call(this,lhs,rhs)};AndOperation.prototype.toString=function(){return"("+this.lhs.toString()+" and "+this.rhs.toString()+")"};AndOperation.prototype.evaluate=function(c){var b=this.lhs.evaluate(c).bool();if(!b.booleanValue()){return b}return this.rhs.evaluate(c).bool()};EqualsOperation.prototype=new BinaryOperation;EqualsOperation.prototype.constructor=EqualsOperation;EqualsOperation.superclass=BinaryOperation.prototype;function EqualsOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}EqualsOperation.prototype.init=function(lhs,rhs){EqualsOperation.superclass.init.call(this,lhs,rhs)};EqualsOperation.prototype.toString=function(){return"("+this.lhs.toString()+" = "+this.rhs.toString()+")"};EqualsOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).equals(this.rhs.evaluate(c))};NotEqualOperation.prototype=new BinaryOperation;NotEqualOperation.prototype.constructor=NotEqualOperation;NotEqualOperation.superclass=BinaryOperation.prototype;function NotEqualOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}NotEqualOperation.prototype.init=function(lhs,rhs){NotEqualOperation.superclass.init.call(this,lhs,rhs)};NotEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" != "+this.rhs.toString()+")"};NotEqualOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).notequal(this.rhs.evaluate(c))};LessThanOperation.prototype=new BinaryOperation;LessThanOperation.prototype.constructor=LessThanOperation;LessThanOperation.superclass=BinaryOperation.prototype;function LessThanOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}LessThanOperation.prototype.init=function(lhs,rhs){LessThanOperation.superclass.init.call(this,lhs,rhs)};LessThanOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).lessthan(this.rhs.evaluate(c))};LessThanOperation.prototype.toString=function(){return"("+this.lhs.toString()+" < "+this.rhs.toString()+")"};GreaterThanOperation.prototype=new BinaryOperation;GreaterThanOperation.prototype.constructor=GreaterThanOperation;GreaterThanOperation.superclass=BinaryOperation.prototype;function GreaterThanOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}GreaterThanOperation.prototype.init=function(lhs,rhs){GreaterThanOperation.superclass.init.call(this,lhs,rhs)};GreaterThanOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).greaterthan(this.rhs.evaluate(c))};GreaterThanOperation.prototype.toString=function(){return"("+this.lhs.toString()+" > "+this.rhs.toString()+")"};LessThanOrEqualOperation.prototype=new BinaryOperation;LessThanOrEqualOperation.prototype.constructor=LessThanOrEqualOperation;LessThanOrEqualOperation.superclass=BinaryOperation.prototype;function LessThanOrEqualOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}LessThanOrEqualOperation.prototype.init=function(lhs,rhs){LessThanOrEqualOperation.superclass.init.call(this,lhs,rhs)};LessThanOrEqualOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).lessthanorequal(this.rhs.evaluate(c))};LessThanOrEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" <= "+this.rhs.toString()+")"};GreaterThanOrEqualOperation.prototype=new BinaryOperation;GreaterThanOrEqualOperation.prototype.constructor=GreaterThanOrEqualOperation;GreaterThanOrEqualOperation.superclass=BinaryOperation.prototype;function GreaterThanOrEqualOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}GreaterThanOrEqualOperation.prototype.init=function(lhs,rhs){GreaterThanOrEqualOperation.superclass.init.call(this,lhs,rhs)};GreaterThanOrEqualOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).greaterthanorequal(this.rhs.evaluate(c))};GreaterThanOrEqualOperation.prototype.toString=function(){return"("+this.lhs.toString()+" >= "+this.rhs.toString()+")"};PlusOperation.prototype=new BinaryOperation;PlusOperation.prototype.constructor=PlusOperation;PlusOperation.superclass=BinaryOperation.prototype;function PlusOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}PlusOperation.prototype.init=function(lhs,rhs){PlusOperation.superclass.init.call(this,lhs,rhs)};PlusOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().plus(this.rhs.evaluate(c).number())};PlusOperation.prototype.toString=function(){return"("+this.lhs.toString()+" + "+this.rhs.toString()+")"};MinusOperation.prototype=new BinaryOperation;MinusOperation.prototype.constructor=MinusOperation;MinusOperation.superclass=BinaryOperation.prototype;function MinusOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}MinusOperation.prototype.init=function(lhs,rhs){MinusOperation.superclass.init.call(this,lhs,rhs)};MinusOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().minus(this.rhs.evaluate(c).number())};MinusOperation.prototype.toString=function(){return"("+this.lhs.toString()+" - "+this.rhs.toString()+")"};MultiplyOperation.prototype=new BinaryOperation;MultiplyOperation.prototype.constructor=MultiplyOperation;MultiplyOperation.superclass=BinaryOperation.prototype;function MultiplyOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}MultiplyOperation.prototype.init=function(lhs,rhs){MultiplyOperation.superclass.init.call(this,lhs,rhs)};MultiplyOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().multiply(this.rhs.evaluate(c).number())};MultiplyOperation.prototype.toString=function(){return"("+this.lhs.toString()+" * "+this.rhs.toString()+")"};DivOperation.prototype=new BinaryOperation;DivOperation.prototype.constructor=DivOperation;DivOperation.superclass=BinaryOperation.prototype;function DivOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}DivOperation.prototype.init=function(lhs,rhs){DivOperation.superclass.init.call(this,lhs,rhs)};DivOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().div(this.rhs.evaluate(c).number())};DivOperation.prototype.toString=function(){return"("+this.lhs.toString()+" div "+this.rhs.toString()+")"};ModOperation.prototype=new BinaryOperation;ModOperation.prototype.constructor=ModOperation;ModOperation.superclass=BinaryOperation.prototype;function ModOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}ModOperation.prototype.init=function(lhs,rhs){ModOperation.superclass.init.call(this,lhs,rhs)};ModOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).number().mod(this.rhs.evaluate(c).number())};ModOperation.prototype.toString=function(){return"("+this.lhs.toString()+" mod "+this.rhs.toString()+")"};BarOperation.prototype=new BinaryOperation;BarOperation.prototype.constructor=BarOperation;BarOperation.superclass=BinaryOperation.prototype;function BarOperation(lhs,rhs){if(arguments.length>0){this.init(lhs,rhs)}}BarOperation.prototype.init=function(lhs,rhs){BarOperation.superclass.init.call(this,lhs,rhs)};BarOperation.prototype.evaluate=function(c){return this.lhs.evaluate(c).nodeset().union(this.rhs.evaluate(c).nodeset())};BarOperation.prototype.toString=function(){return map(toString,[this.lhs,this.rhs]).join(" | ")};PathExpr.prototype=new Expression;PathExpr.prototype.constructor=PathExpr;PathExpr.superclass=Expression.prototype;function PathExpr(filter,filterPreds,locpath){if(arguments.length>0){this.init(filter,filterPreds,locpath)}}PathExpr.prototype.init=function(filter,filterPreds,locpath){PathExpr.superclass.init.call(this);this.filter=filter;this.filterPredicates=filterPreds;this.locationPath=locpath};function findRoot(node){while(node&&node.parentNode){node=node.parentNode}return node}PathExpr.applyPredicates=function(predicates,c,nodes){return reduce(function(inNodes,pred){var ctx=c.extend({contextSize:inNodes.length});return filter(function(node,i){return PathExpr.predicateMatches(pred,ctx.extend({contextNode:node,contextPosition:i+1}))},inNodes)},nodes,predicates)};PathExpr.getRoot=function(xpc,nodes){var firstNode=nodes[0];if(firstNode.nodeType===9){return firstNode}if(xpc.virtualRoot){return xpc.virtualRoot}var ownerDoc=firstNode.ownerDocument;if(ownerDoc){return ownerDoc}var n=firstNode;while(n.parentNode!=null){n=n.parentNode}return n};PathExpr.applyStep=function(step,xpc,node){var self=this;var newNodes=[];xpc.contextNode=node;switch(step.axis){case Step.ANCESTOR:if(xpc.contextNode===xpc.virtualRoot){break}var m;if(xpc.contextNode.nodeType==2){m=PathExpr.getOwnerElement(xpc.contextNode)}else{m=xpc.contextNode.parentNode}while(m!=null){if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}if(m===xpc.virtualRoot){break}m=m.parentNode}break;case Step.ANCESTORORSELF:for(var m=xpc.contextNode;m!=null;m=m.nodeType==2?PathExpr.getOwnerElement(m):m.parentNode){if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}if(m===xpc.virtualRoot){break}}break;case Step.ATTRIBUTE:var nnm=xpc.contextNode.attributes;if(nnm!=null){for(var k=0;k<nnm.length;k++){var m=nnm.item(k);if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}}}break;case Step.CHILD:for(var m=xpc.contextNode.firstChild;m!=null;m=m.nextSibling){if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}}break;case Step.DESCENDANT:var st=[xpc.contextNode.firstChild];while(st.length>0){for(var m=st.pop();m!=null;){if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}if(m.firstChild!=null){st.push(m.nextSibling);m=m.firstChild}else{m=m.nextSibling}}}break;case Step.DESCENDANTORSELF:if(step.nodeTest.matches(xpc.contextNode,xpc)){newNodes.push(xpc.contextNode)}var st=[xpc.contextNode.firstChild];while(st.length>0){for(var m=st.pop();m!=null;){if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}if(m.firstChild!=null){st.push(m.nextSibling);m=m.firstChild}else{m=m.nextSibling}}}break;case Step.FOLLOWING:if(xpc.contextNode===xpc.virtualRoot){break}var st=[];if(xpc.contextNode.firstChild!=null){st.unshift(xpc.contextNode.firstChild)}else{st.unshift(xpc.contextNode.nextSibling)}for(var m=xpc.contextNode.parentNode;m!=null&&m.nodeType!=9&&m!==xpc.virtualRoot;m=m.parentNode){st.unshift(m.nextSibling)}do{for(var m=st.pop();m!=null;){if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}if(m.firstChild!=null){st.push(m.nextSibling);m=m.firstChild}else{m=m.nextSibling}}}while(st.length>0);break;case Step.FOLLOWINGSIBLING:if(xpc.contextNode===xpc.virtualRoot){break}for(var m=xpc.contextNode.nextSibling;m!=null;m=m.nextSibling){if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}}break;case Step.NAMESPACE:var n={};if(xpc.contextNode.nodeType==1){n["xml"]=XPath.XML_NAMESPACE_URI;n["xmlns"]=XPath.XMLNS_NAMESPACE_URI;for(var m=xpc.contextNode;m!=null&&m.nodeType==1;m=m.parentNode){for(var k=0;k<m.attributes.length;k++){var attr=m.attributes.item(k);var nm=String(attr.name);if(nm=="xmlns"){if(n[""]==undefined){n[""]=attr.value}}else if(nm.length>6&&nm.substring(0,6)=="xmlns:"){var pre=nm.substring(6,nm.length);if(n[pre]==undefined){n[pre]=attr.value}}}}for(var pre in n){var nsn=new XPathNamespace(pre,n[pre],xpc.contextNode);if(step.nodeTest.matches(nsn,xpc)){newNodes.push(nsn)}}}break;case Step.PARENT:m=null;if(xpc.contextNode!==xpc.virtualRoot){if(xpc.contextNode.nodeType==2){m=PathExpr.getOwnerElement(xpc.contextNode)}else{m=xpc.contextNode.parentNode}}if(m!=null&&step.nodeTest.matches(m,xpc)){newNodes.push(m)}break;case Step.PRECEDING:var st;if(xpc.virtualRoot!=null){st=[xpc.virtualRoot]}else{st=[findRoot(xpc.contextNode)]}outer:while(st.length>0){for(var m=st.pop();m!=null;){if(m==xpc.contextNode){break outer}if(step.nodeTest.matches(m,xpc)){newNodes.unshift(m)}if(m.firstChild!=null){st.push(m.nextSibling);m=m.firstChild}else{m=m.nextSibling}}}break;case Step.PRECEDINGSIBLING:if(xpc.contextNode===xpc.virtualRoot){break}for(var m=xpc.contextNode.previousSibling;m!=null;m=m.previousSibling){if(step.nodeTest.matches(m,xpc)){newNodes.push(m)}}break;case Step.SELF:if(step.nodeTest.matches(xpc.contextNode,xpc)){newNodes.push(xpc.contextNode)}break;default:}return newNodes};PathExpr.applySteps=function(steps,xpc,nodes){return reduce(function(inNodes,step){return[].concat.apply([],map(function(node){return PathExpr.applyPredicates(step.predicates,xpc,PathExpr.applyStep(step,xpc,node))},inNodes))},nodes,steps)};PathExpr.prototype.applyFilter=function(c,xpc){if(!this.filter){return{nodes:[c.contextNode]}}var ns=this.filter.evaluate(c);if(!Utilities.instance_of(ns,XNodeSet)){if(this.filterPredicates!=null&&this.filterPredicates.length>0||this.locationPath!=null){throw new Error("Path expression filter must evaluate to a nodeset if predicates or location path are used")}return{nonNodes:ns}}return{nodes:PathExpr.applyPredicates(this.filterPredicates||[],xpc,ns.toUnsortedArray())}};PathExpr.applyLocationPath=function(locationPath,xpc,nodes){if(!locationPath){return nodes}var startNodes=locationPath.absolute?[PathExpr.getRoot(xpc,nodes)]:nodes;return PathExpr.applySteps(locationPath.steps,xpc,startNodes)};PathExpr.prototype.evaluate=function(c){var xpc=assign(new XPathContext,c);var filterResult=this.applyFilter(c,xpc);if("nonNodes"in filterResult){return filterResult.nonNodes}var ns=new XNodeSet;ns.addArray(PathExpr.applyLocationPath(this.locationPath,xpc,filterResult.nodes));return ns};PathExpr.predicateMatches=function(pred,c){var res=pred.evaluate(c);return Utilities.instance_of(res,XNumber)?c.contextPosition==res.numberValue():res.booleanValue()};PathExpr.predicateString=compose(wrap("[","]"),toString);PathExpr.predicatesString=compose(join(""),map(PathExpr.predicateString));PathExpr.prototype.toString=function(){if(this.filter!=undefined){var filterStr=toString(this.filter);if(Utilities.instance_of(this.filter,XString)){return wrap("'","'",filterStr)}if(this.filterPredicates!=undefined&&this.filterPredicates.length){return wrap("(",")",filterStr)+PathExpr.predicatesString(this.filterPredicates)}if(this.locationPath!=undefined){return filterStr+(this.locationPath.absolute?"":"/")+toString(this.locationPath)}return filterStr}return toString(this.locationPath)};PathExpr.getOwnerElement=function(n){if(n.ownerElement){return n.ownerElement}try{if(n.selectSingleNode){return n.selectSingleNode("..")}}catch(e){}var doc=n.nodeType==9?n:n.ownerDocument;var elts=doc.getElementsByTagName("*");for(var i=0;i<elts.length;i++){var elt=elts.item(i);var nnm=elt.attributes;for(var j=0;j<nnm.length;j++){var an=nnm.item(j);if(an===n){return elt}}}return null};LocationPath.prototype=new Object;LocationPath.prototype.constructor=LocationPath;LocationPath.superclass=Object.prototype;function LocationPath(abs,steps){if(arguments.length>0){this.init(abs,steps)}}LocationPath.prototype.init=function(abs,steps){this.absolute=abs;this.steps=steps};LocationPath.prototype.toString=function(){return(this.absolute?"/":"")+map(toString,this.steps).join("/")};Step.prototype=new Object;Step.prototype.constructor=Step;Step.superclass=Object.prototype;function Step(axis,nodetest,preds){if(arguments.length>0){this.init(axis,nodetest,preds)}}Step.prototype.init=function(axis,nodetest,preds){this.axis=axis;this.nodeTest=nodetest;this.predicates=preds};Step.prototype.toString=function(){return Step.STEPNAMES[this.axis]+"::"+this.nodeTest.toString()+PathExpr.predicatesString(this.predicates)};Step.ANCESTOR=0;Step.ANCESTORORSELF=1;Step.ATTRIBUTE=2;Step.CHILD=3;Step.DESCENDANT=4;Step.DESCENDANTORSELF=5;Step.FOLLOWING=6;Step.FOLLOWINGSIBLING=7;Step.NAMESPACE=8;Step.PARENT=9;Step.PRECEDING=10;Step.PRECEDINGSIBLING=11;Step.SELF=12;Step.STEPNAMES=reduce(function(acc,x){return acc[x[0]]=x[1],acc},{},[[Step.ANCESTOR,"ancestor"],[Step.ANCESTORORSELF,"ancestor-or-self"],[Step.ATTRIBUTE,"attribute"],[Step.CHILD,"child"],[Step.DESCENDANT,"descendant"],[Step.DESCENDANTORSELF,"descendant-or-self"],[Step.FOLLOWING,"following"],[Step.FOLLOWINGSIBLING,"following-sibling"],[Step.NAMESPACE,"namespace"],[Step.PARENT,"parent"],[Step.PRECEDING,"preceding"],[Step.PRECEDINGSIBLING,"preceding-sibling"],[Step.SELF,"self"]]);NodeTest.prototype=new Object;NodeTest.prototype.constructor=NodeTest;NodeTest.superclass=Object.prototype;function NodeTest(type,value){if(arguments.length>0){this.init(type,value)}}NodeTest.prototype.init=function(type,value){this.type=type;this.value=value};NodeTest.prototype.toString=function(){return"<unknown nodetest type>"};NodeTest.prototype.matches=function(n,xpc){console.warn("unknown node test type")};NodeTest.NAMETESTANY=0;NodeTest.NAMETESTPREFIXANY=1;NodeTest.NAMETESTQNAME=2;NodeTest.COMMENT=3;NodeTest.TEXT=4;NodeTest.PI=5;NodeTest.NODE=6;NodeTest.isNodeType=function(types){return compose(includes(types),prop("nodeType"))};NodeTest.makeNodeTestType=function(type,members,ctor){var newType=ctor||function(){};newType.prototype=new NodeTest(members.type);newType.prototype.constructor=type;for(var key in members){newType.prototype[key]=members[key]}return newType};NodeTest.makeNodeTypeTest=function(type,nodeTypes,stringVal){return new(NodeTest.makeNodeTestType(type,{matches:NodeTest.isNodeType(nodeTypes),toString:always(stringVal)}))};NodeTest.hasPrefix=function(node){return node.prefix||(node.nodeName||node.tagName).indexOf(":")!==-1};NodeTest.isElementOrAttribute=NodeTest.isNodeType([1,2]);NodeTest.nameSpaceMatches=function(prefix,xpc,n){var nNamespace=n.namespaceURI||"";if(!prefix){return!nNamespace||xpc.allowAnyNamespaceForNoPrefix&&!NodeTest.hasPrefix(n)}var ns=xpc.namespaceResolver.getNamespace(prefix,xpc.expressionContextNode);if(ns==null){throw new Error("Cannot resolve QName "+prefix)}return ns===nNamespace};NodeTest.localNameMatches=function(localName,xpc,n){var nLocalName=n.localName||n.nodeName;return xpc.caseInsensitive?localName.toLowerCase()===nLocalName.toLowerCase():localName===nLocalName};NodeTest.NameTestPrefixAny=NodeTest.makeNodeTestType(NodeTest.NAMETESTPREFIXANY,{matches:function(n,xpc){return NodeTest.isElementOrAttribute(n)&&NodeTest.nameSpaceMatches(this.prefix,xpc,n)},toString:function(){return this.prefix+":*"}},function(prefix){this.prefix=prefix});NodeTest.NameTestQName=NodeTest.makeNodeTestType(NodeTest.NAMETESTQNAME,{matches:function(n,xpc){return NodeTest.isNodeType([1,2,XPathNamespace.XPATH_NAMESPACE_NODE])(n)&&NodeTest.nameSpaceMatches(this.prefix,xpc,n)&&NodeTest.localNameMatches(this.localName,xpc,n)},toString:function(){return this.name}},function(name){var nameParts=name.split(":");this.name=name;this.prefix=nameParts.length>1?nameParts[0]:null;this.localName=nameParts[nameParts.length>1?1:0]});NodeTest.PITest=NodeTest.makeNodeTestType(NodeTest.PI,{matches:function(n,xpc){return NodeTest.isNodeType([7])(n)&&(n.target||n.nodeName)===this.name},toString:function(){return wrap('processing-instruction("','")',this.name)}},function(name){this.name=name});NodeTest.nameTestAny=NodeTest.makeNodeTypeTest(NodeTest.NAMETESTANY,[1,2,XPathNamespace.XPATH_NAMESPACE_NODE],"*");NodeTest.textTest=NodeTest.makeNodeTypeTest(NodeTest.TEXT,[3,4],"text()");NodeTest.commentTest=NodeTest.makeNodeTypeTest(NodeTest.COMMENT,[8],"comment()");NodeTest.nodeTest=NodeTest.makeNodeTypeTest(NodeTest.NODE,[1,2,3,4,7,8,9],"node()");NodeTest.anyPiTest=NodeTest.makeNodeTypeTest(NodeTest.PI,[7],"processing-instruction()");VariableReference.prototype=new Expression;VariableReference.prototype.constructor=VariableReference;VariableReference.superclass=Expression.prototype;function VariableReference(v){if(arguments.length>0){this.init(v)}}VariableReference.prototype.init=function(v){this.variable=v};VariableReference.prototype.toString=function(){return"$"+this.variable};VariableReference.prototype.evaluate=function(c){var parts=Utilities.resolveQName(this.variable,c.namespaceResolver,c.contextNode,false);if(parts[0]==null){throw new Error("Cannot resolve QName "+fn)}var result=c.variableResolver.getVariable(parts[1],parts[0]);if(!result){throw XPathException.fromMessage("Undeclared variable: "+this.toString())}return result};FunctionCall.prototype=new Expression;FunctionCall.prototype.constructor=FunctionCall;FunctionCall.superclass=Expression.prototype;function FunctionCall(fn,args){if(arguments.length>0){this.init(fn,args)}}FunctionCall.prototype.init=function(fn,args){this.functionName=fn;this.arguments=args};FunctionCall.prototype.toString=function(){var s=this.functionName+"(";for(var i=0;i<this.arguments.length;i++){if(i>0){s+=", "}s+=this.arguments[i].toString()}return s+")"};FunctionCall.prototype.evaluate=function(c){var f=FunctionResolver.getFunctionFromContext(this.functionName,c);if(!f){throw new Error("Unknown function "+this.functionName)}var a=[c].concat(this.arguments);return f.apply(c.functionResolver.thisArg,a)};var Operators=new Object;Operators.equals=function(l,r){return l.equals(r)};Operators.notequal=function(l,r){return l.notequal(r)};Operators.lessthan=function(l,r){return l.lessthan(r)};Operators.greaterthan=function(l,r){return l.greaterthan(r)};Operators.lessthanorequal=function(l,r){return l.lessthanorequal(r)};Operators.greaterthanorequal=function(l,r){return l.greaterthanorequal(r)};XString.prototype=new Expression;XString.prototype.constructor=XString;XString.superclass=Expression.prototype;function XString(s){if(arguments.length>0){this.init(s)}}XString.prototype.init=function(s){this.str=String(s)};XString.prototype.toString=function(){return this.str};XString.prototype.evaluate=function(c){return this};XString.prototype.string=function(){return this};XString.prototype.number=function(){return new XNumber(this.str)};XString.prototype.bool=function(){return new XBoolean(this.str)};XString.prototype.nodeset=function(){throw new Error("Cannot convert string to nodeset")};XString.prototype.stringValue=function(){return this.str};XString.prototype.numberValue=function(){return this.number().numberValue()};XString.prototype.booleanValue=function(){return this.bool().booleanValue()};XString.prototype.equals=function(r){if(Utilities.instance_of(r,XBoolean)){return this.bool().equals(r)}if(Utilities.instance_of(r,XNumber)){return this.number().equals(r)}if(Utilities.instance_of(r,XNodeSet)){return r.compareWithString(this,Operators.equals)}return new XBoolean(this.str==r.str)};XString.prototype.notequal=function(r){if(Utilities.instance_of(r,XBoolean)){return this.bool().notequal(r)}if(Utilities.instance_of(r,XNumber)){return this.number().notequal(r)}if(Utilities.instance_of(r,XNodeSet)){return r.compareWithString(this,Operators.notequal)}return new XBoolean(this.str!=r.str)};XString.prototype.lessthan=function(r){return this.number().lessthan(r)};XString.prototype.greaterthan=function(r){return this.number().greaterthan(r)};XString.prototype.lessthanorequal=function(r){return this.number().lessthanorequal(r)};XString.prototype.greaterthanorequal=function(r){return this.number().greaterthanorequal(r)};XNumber.prototype=new Expression;XNumber.prototype.constructor=XNumber;XNumber.superclass=Expression.prototype;function XNumber(n){if(arguments.length>0){this.init(n)}}XNumber.prototype.init=function(n){this.num=typeof n==="string"?this.parse(n):Number(n)};XNumber.prototype.numberFormat=/^\s*-?[0-9]*\.?[0-9]+\s*$/;XNumber.prototype.parse=function(s){return this.numberFormat.test(s)?parseFloat(s):Number.NaN};function padSmallNumber(numberStr){var parts=numberStr.split("e-");var base=parts[0].replace(".","");var exponent=Number(parts[1]);for(var i=0;i<exponent-1;i+=1){base="0"+base}return"0."+base}function padLargeNumber(numberStr){var parts=numberStr.split("e");var base=parts[0].replace(".","");var exponent=Number(parts[1]);var zerosToAppend=exponent+1-base.length;for(var i=0;i<zerosToAppend;i+=1){base+="0"}return base}XNumber.prototype.toString=function(){var strValue=this.num.toString();if(strValue.indexOf("e-")!==-1){return padSmallNumber(strValue)}if(strValue.indexOf("e")!==-1){return padLargeNumber(strValue)}return strValue};XNumber.prototype.evaluate=function(c){return this};XNumber.prototype.string=function(){return new XString(this.toString())};XNumber.prototype.number=function(){return this};XNumber.prototype.bool=function(){return new XBoolean(this.num)};XNumber.prototype.nodeset=function(){throw new Error("Cannot convert number to nodeset")};XNumber.prototype.stringValue=function(){return this.string().stringValue()};XNumber.prototype.numberValue=function(){return this.num};XNumber.prototype.booleanValue=function(){return this.bool().booleanValue()};XNumber.prototype.negate=function(){return new XNumber(-this.num)};XNumber.prototype.equals=function(r){if(Utilities.instance_of(r,XBoolean)){return this.bool().equals(r)}if(Utilities.instance_of(r,XString)){return this.equals(r.number())}if(Utilities.instance_of(r,XNodeSet)){return r.compareWithNumber(this,Operators.equals)}return new XBoolean(this.num==r.num)};XNumber.prototype.notequal=function(r){if(Utilities.instance_of(r,XBoolean)){return this.bool().notequal(r)}if(Utilities.instance_of(r,XString)){return this.notequal(r.number())}if(Utilities.instance_of(r,XNodeSet)){return r.compareWithNumber(this,Operators.notequal)}return new XBoolean(this.num!=r.num)};XNumber.prototype.lessthan=function(r){if(Utilities.instance_of(r,XNodeSet)){return r.compareWithNumber(this,Operators.greaterthan)}if(Utilities.instance_of(r,XBoolean)||Utilities.instance_of(r,XString)){return this.lessthan(r.number())}return new XBoolean(this.num<r.num)};XNumber.prototype.greaterthan=function(r){if(Utilities.instance_of(r,XNodeSet)){return r.compareWithNumber(this,Operators.lessthan)}if(Utilities.instance_of(r,XBoolean)||Utilities.instance_of(r,XString)){return this.greaterthan(r.number())}return new XBoolean(this.num>r.num)};XNumber.prototype.lessthanorequal=function(r){if(Utilities.instance_of(r,XNodeSet)){return r.compareWithNumber(this,Operators.greaterthanorequal)}if(Utilities.instance_of(r,XBoolean)||Utilities.instance_of(r,XString)){return this.lessthanorequal(r.number())}return new XBoolean(this.num<=r.num)};XNumber.prototype.greaterthanorequal=function(r){if(Utilities.instance_of(r,XNodeSet)){return r.compareWithNumber(this,Operators.lessthanorequal)}if(Utilities.instance_of(r,XBoolean)||Utilities.instance_of(r,XString)){return this.greaterthanorequal(r.number())}return new XBoolean(this.num>=r.num)};XNumber.prototype.plus=function(r){return new XNumber(this.num+r.num)};XNumber.prototype.minus=function(r){return new XNumber(this.num-r.num)};XNumber.prototype.multiply=function(r){return new XNumber(this.num*r.num)};XNumber.prototype.div=function(r){return new XNumber(this.num/r.num)};XNumber.prototype.mod=function(r){return new XNumber(this.num%r.num)};XBoolean.prototype=new Expression;XBoolean.prototype.constructor=XBoolean;XBoolean.superclass=Expression.prototype;function XBoolean(b){if(arguments.length>0){this.init(b)}}XBoolean.prototype.init=function(b){this.b=Boolean(b)};XBoolean.prototype.toString=function(){return this.b.toString()};XBoolean.prototype.evaluate=function(c){return this};XBoolean.prototype.string=function(){return new XString(this.b)};XBoolean.prototype.number=function(){return new XNumber(this.b)};XBoolean.prototype.bool=function(){return this};XBoolean.prototype.nodeset=function(){throw new Error("Cannot convert boolean to nodeset")};XBoolean.prototype.stringValue=function(){return this.string().stringValue()};XBoolean.prototype.numberValue=function(){return this.number().numberValue()};XBoolean.prototype.booleanValue=function(){return this.b};XBoolean.prototype.not=function(){return new XBoolean(!this.b)};XBoolean.prototype.equals=function(r){if(Utilities.instance_of(r,XString)||Utilities.instance_of(r,XNumber)){return this.equals(r.bool())}if(Utilities.instance_of(r,XNodeSet)){return r.compareWithBoolean(this,Operators.equals)}return new XBoolean(this.b==r.b)};XBoolean.prototype.notequal=function(r){if(Utilities.instance_of(r,XString)||Utilities.instance_of(r,XNumber)){return this.notequal(r.bool())}if(Utilities.instance_of(r,XNodeSet)){return r.compareWithBoolean(this,Operators.notequal)}return new XBoolean(this.b!=r.b)};XBoolean.prototype.lessthan=function(r){return this.number().lessthan(r)};XBoolean.prototype.greaterthan=function(r){return this.number().greaterthan(r)};XBoolean.prototype.lessthanorequal=function(r){return this.number().lessthanorequal(r)};XBoolean.prototype.greaterthanorequal=function(r){return this.number().greaterthanorequal(r)};XBoolean.true_=new XBoolean(true);XBoolean.false_=new XBoolean(false);AVLTree.prototype=new Object;AVLTree.prototype.constructor=AVLTree;AVLTree.superclass=Object.prototype;function AVLTree(n){this.init(n)}AVLTree.prototype.init=function(n){this.left=null;this.right=null;this.node=n;this.depth=1};AVLTree.prototype.balance=function(){var ldepth=this.left==null?0:this.left.depth;var rdepth=this.right==null?0:this.right.depth;if(ldepth>rdepth+1){var lldepth=this.left.left==null?0:this.left.left.depth;var lrdepth=this.left.right==null?0:this.left.right.depth;if(lldepth<lrdepth){this.left.rotateRR()}this.rotateLL()}else if(ldepth+1<rdepth){var rrdepth=this.right.right==null?0:this.right.right.depth;var rldepth=this.right.left==null?0:this.right.left.depth;if(rldepth>rrdepth){this.right.rotateLL()}this.rotateRR()}};AVLTree.prototype.rotateLL=function(){var nodeBefore=this.node;var rightBefore=this.right;this.node=this.left.node;this.right=this.left;this.left=this.left.left;this.right.left=this.right.right;this.right.right=rightBefore;this.right.node=nodeBefore;this.right.updateInNewLocation();this.updateInNewLocation()};AVLTree.prototype.rotateRR=function(){var nodeBefore=this.node;var leftBefore=this.left;this.node=this.right.node;this.left=this.right;this.right=this.right.right;this.left.right=this.left.left;this.left.left=leftBefore;this.left.node=nodeBefore;this.left.updateInNewLocation();this.updateInNewLocation()};AVLTree.prototype.updateInNewLocation=function(){this.getDepthFromChildren()};AVLTree.prototype.getDepthFromChildren=function(){this.depth=this.node==null?0:1;if(this.left!=null){this.depth=this.left.depth+1}if(this.right!=null&&this.depth<=this.right.depth){this.depth=this.right.depth+1}};function nodeOrder(n1,n2){if(n1===n2){return 0}if(n1.compareDocumentPosition){var cpos=n1.compareDocumentPosition(n2);if(cpos&1){return 1}if(cpos&10){return 1}if(cpos&20){return-1}return 0}var d1=0,d2=0;for(var m1=n1;m1!=null;m1=m1.parentNode||m1.ownerElement){d1++}for(var m2=n2;m2!=null;m2=m2.parentNode||m2.ownerElement){d2++}if(d1>d2){while(d1>d2){n1=n1.parentNode||n1.ownerElement;d1--}if(n1===n2){return 1}}else if(d2>d1){while(d2>d1){n2=n2.parentNode||n2.ownerElement;d2--}if(n1===n2){return-1}}var n1Par=n1.parentNode||n1.ownerElement,n2Par=n2.parentNode||n2.ownerElement;while(n1Par!==n2Par){n1=n1Par;n2=n2Par;n1Par=n1.parentNode||n1.ownerElement;n2Par=n2.parentNode||n2.ownerElement}var n1isAttr=Utilities.isAttribute(n1);var n2isAttr=Utilities.isAttribute(n2);if(n1isAttr&&!n2isAttr){return-1}if(!n1isAttr&&n2isAttr){return 1}if(n1Par){var cn=n1isAttr?n1Par.attributes:n1Par.childNodes,len=cn.length;for(var i=0;i<len;i+=1){var n=cn[i];if(n===n1){return-1}if(n===n2){return 1}}}throw new Error("Unexpected: could not determine node order")}AVLTree.prototype.add=function(n){if(n===this.node){return false}var o=nodeOrder(n,this.node);var ret=false;if(o==-1){if(this.left==null){this.left=new AVLTree(n);ret=true}else{ret=this.left.add(n);if(ret){this.balance()}}}else if(o==1){if(this.right==null){this.right=new AVLTree(n);ret=true}else{ret=this.right.add(n);if(ret){this.balance()}}}if(ret){this.getDepthFromChildren()}return ret};XNodeSet.prototype=new Expression;XNodeSet.prototype.constructor=XNodeSet;XNodeSet.superclass=Expression.prototype;function XNodeSet(){this.init()}XNodeSet.prototype.init=function(){this.tree=null;this.nodes=[];this.size=0};XNodeSet.prototype.toString=function(){var p=this.first();if(p==null){return""}return this.stringForNode(p)};XNodeSet.prototype.evaluate=function(c){return this};XNodeSet.prototype.string=function(){return new XString(this.toString())};XNodeSet.prototype.stringValue=function(){return this.toString()};XNodeSet.prototype.number=function(){return new XNumber(this.string())};XNodeSet.prototype.numberValue=function(){return Number(this.string())};XNodeSet.prototype.bool=function(){return new XBoolean(this.booleanValue())};XNodeSet.prototype.booleanValue=function(){return!!this.size};XNodeSet.prototype.nodeset=function(){return this};XNodeSet.prototype.stringForNode=function(n){if(n.nodeType==9||n.nodeType==1||n.nodeType===11){return this.stringForContainerNode(n)}if(n.nodeType===2){return n.value||n.nodeValue}if(n.isNamespaceNode){return n.namespace}return n.nodeValue};XNodeSet.prototype.stringForContainerNode=function(n){var s="";for(var n2=n.firstChild;n2!=null;n2=n2.nextSibling){var nt=n2.nodeType;if(nt===1||nt===3||nt===4||nt===9||nt===11){s+=this.stringForNode(n2)}}return s};XNodeSet.prototype.buildTree=function(){if(!this.tree&&this.nodes.length){this.tree=new AVLTree(this.nodes[0]);for(var i=1;i<this.nodes.length;i+=1){this.tree.add(this.nodes[i])}}return this.tree};XNodeSet.prototype.first=function(){var p=this.buildTree();if(p==null){return null}while(p.left!=null){p=p.left}return p.node};XNodeSet.prototype.add=function(n){for(var i=0;i<this.nodes.length;i+=1){if(n===this.nodes[i]){return}}this.tree=null;this.nodes.push(n);this.size+=1};XNodeSet.prototype.addArray=function(ns){var self=this;forEach(function(x){self.add(x)},ns)};XNodeSet.prototype.toArray=function(){var a=[];this.toArrayRec(this.buildTree(),a);return a};XNodeSet.prototype.toArrayRec=function(t,a){if(t!=null){this.toArrayRec(t.left,a);a.push(t.node);this.toArrayRec(t.right,a)}};XNodeSet.prototype.toUnsortedArray=function(){return this.nodes.slice()};XNodeSet.prototype.compareWithString=function(r,o){var a=this.toUnsortedArray();for(var i=0;i<a.length;i++){var n=a[i];var l=new XString(this.stringForNode(n));var res=o(l,r);if(res.booleanValue()){return res}}return new XBoolean(false)};XNodeSet.prototype.compareWithNumber=function(r,o){var a=this.toUnsortedArray();for(var i=0;i<a.length;i++){var n=a[i];var l=new XNumber(this.stringForNode(n));var res=o(l,r);if(res.booleanValue()){return res}}return new XBoolean(false)};XNodeSet.prototype.compareWithBoolean=function(r,o){return o(this.bool(),r)};XNodeSet.prototype.compareWithNodeSet=function(r,o){var arr=this.toUnsortedArray();var oInvert=function(lop,rop){return o(rop,lop)};for(var i=0;i<arr.length;i++){var l=new XString(this.stringForNode(arr[i]));var res=r.compareWithString(l,oInvert);if(res.booleanValue()){return res}}return new XBoolean(false)};XNodeSet.compareWith=curry(function(o,r){if(Utilities.instance_of(r,XString)){return this.compareWithString(r,o)}if(Utilities.instance_of(r,XNumber)){return this.compareWithNumber(r,o)}if(Utilities.instance_of(r,XBoolean)){return this.compareWithBoolean(r,o)}return this.compareWithNodeSet(r,o)});XNodeSet.prototype.equals=XNodeSet.compareWith(Operators.equals);XNodeSet.prototype.notequal=XNodeSet.compareWith(Operators.notequal);XNodeSet.prototype.lessthan=XNodeSet.compareWith(Operators.lessthan);XNodeSet.prototype.greaterthan=XNodeSet.compareWith(Operators.greaterthan);XNodeSet.prototype.lessthanorequal=XNodeSet.compareWith(Operators.lessthanorequal);XNodeSet.prototype.greaterthanorequal=XNodeSet.compareWith(Operators.greaterthanorequal);XNodeSet.prototype.union=function(r){var ns=new XNodeSet;ns.addArray(this.toUnsortedArray());ns.addArray(r.toUnsortedArray());return ns};XPathNamespace.prototype=new Object;XPathNamespace.prototype.constructor=XPathNamespace;XPathNamespace.superclass=Object.prototype;function XPathNamespace(pre,ns,p){this.isXPathNamespace=true;this.ownerDocument=p.ownerDocument;this.nodeName="#namespace";this.prefix=pre;this.localName=pre;this.namespaceURI=ns;this.nodeValue=ns;this.ownerElement=p;this.nodeType=XPathNamespace.XPATH_NAMESPACE_NODE}XPathNamespace.prototype.toString=function(){return'{ "'+this.prefix+'", "'+this.namespaceURI+'" }'};XPathContext.prototype=new Object;XPathContext.prototype.constructor=XPathContext;XPathContext.superclass=Object.prototype;function XPathContext(vr,nr,fr){this.variableResolver=vr!=null?vr:new VariableResolver;this.namespaceResolver=nr!=null?nr:new NamespaceResolver;this.functionResolver=fr!=null?fr:new FunctionResolver}XPathContext.prototype.extend=function(newProps){return assign(new XPathContext,this,newProps)};VariableResolver.prototype=new Object;VariableResolver.prototype.constructor=VariableResolver;VariableResolver.superclass=Object.prototype;function VariableResolver(){}VariableResolver.prototype.getVariable=function(ln,ns){return null};FunctionResolver.prototype=new Object;FunctionResolver.prototype.constructor=FunctionResolver;FunctionResolver.superclass=Object.prototype;function FunctionResolver(thisArg){this.thisArg=thisArg!=null?thisArg:Functions;this.functions=new Object;this.addStandardFunctions()}FunctionResolver.prototype.addStandardFunctions=function(){this.functions["{}last"]=Functions.last;this.functions["{}position"]=Functions.position;this.functions["{}count"]=Functions.count;this.functions["{}id"]=Functions.id;this.functions["{}local-name"]=Functions.localName;this.functions["{}namespace-uri"]=Functions.namespaceURI;this.functions["{}name"]=Functions.name;this.functions["{}string"]=Functions.string;this.functions["{}concat"]=Functions.concat;this.functions["{}starts-with"]=Functions.startsWith;this.functions["{}contains"]=Functions.contains;this.functions["{}substring-before"]=Functions.substringBefore;this.functions["{}substring-after"]=Functions.substringAfter;this.functions["{}substring"]=Functions.substring;this.functions["{}string-length"]=Functions.stringLength;this.functions["{}normalize-space"]=Functions.normalizeSpace;this.functions["{}translate"]=Functions.translate;this.functions["{}boolean"]=Functions.boolean_;this.functions["{}not"]=Functions.not;this.functions["{}true"]=Functions.true_;this.functions["{}false"]=Functions.false_;this.functions["{}lang"]=Functions.lang;this.functions["{}number"]=Functions.number;this.functions["{}sum"]=Functions.sum;this.functions["{}floor"]=Functions.floor;this.functions["{}ceiling"]=Functions.ceiling;this.functions["{}round"]=Functions.round};FunctionResolver.prototype.addFunction=function(ns,ln,f){this.functions["{"+ns+"}"+ln]=f};FunctionResolver.getFunctionFromContext=function(qName,context){var parts=Utilities.resolveQName(qName,context.namespaceResolver,context.contextNode,false);if(parts[0]===null){throw new Error("Cannot resolve QName "+name)}return context.functionResolver.getFunction(parts[1],parts[0])};FunctionResolver.prototype.getFunction=function(localName,namespace){return this.functions["{"+namespace+"}"+localName]};NamespaceResolver.prototype=new Object;NamespaceResolver.prototype.constructor=NamespaceResolver;NamespaceResolver.superclass=Object.prototype;function NamespaceResolver(){}NamespaceResolver.prototype.getNamespace=function(prefix,n){if(prefix=="xml"){return XPath.XML_NAMESPACE_URI}else if(prefix=="xmlns"){return XPath.XMLNS_NAMESPACE_URI}if(n.nodeType==9){n=n.documentElement}else if(n.nodeType==2){n=PathExpr.getOwnerElement(n)}else if(n.nodeType!=1){n=n.parentNode}while(n!=null&&n.nodeType==1){var nnm=n.attributes;for(var i=0;i<nnm.length;i++){var a=nnm.item(i);var aname=a.name||a.nodeName;if(aname==="xmlns"&&prefix===""||aname==="xmlns:"+prefix){return String(a.value||a.nodeValue)}}n=n.parentNode}return null};var Functions=new Object;Functions.last=function(c){if(arguments.length!=1){throw new Error("Function last expects ()")}return new XNumber(c.contextSize)};Functions.position=function(c){if(arguments.length!=1){throw new Error("Function position expects ()")}return new XNumber(c.contextPosition)};Functions.count=function(){var c=arguments[0];var ns;if(arguments.length!=2||!Utilities.instance_of(ns=arguments[1].evaluate(c),XNodeSet)){throw new Error("Function count expects (node-set)")}return new XNumber(ns.size)};Functions.id=function(){var c=arguments[0];var id;if(arguments.length!=2){throw new Error("Function id expects (object)")}id=arguments[1].evaluate(c);if(Utilities.instance_of(id,XNodeSet)){id=id.toArray().join(" ")}else{id=id.stringValue()}var ids=id.split(/[\x0d\x0a\x09\x20]+/);var count=0;var ns=new XNodeSet;var doc=c.contextNode.nodeType==9?c.contextNode:c.contextNode.ownerDocument;for(var i=0;i<ids.length;i++){var n;if(doc.getElementById){n=doc.getElementById(ids[i])}else{n=Utilities.getElementById(doc,ids[i])}if(n!=null){ns.add(n);count++}}return ns};Functions.localName=function(c,eNode){var n;if(arguments.length==1){n=c.contextNode}else if(arguments.length==2){n=eNode.evaluate(c).first()}else{throw new Error("Function local-name expects (node-set?)")}if(n==null){return new XString("")}return new XString(n.localName||n.baseName||n.target||n.nodeName||"")};Functions.namespaceURI=function(){var c=arguments[0];var n;if(arguments.length==1){n=c.contextNode}else if(arguments.length==2){n=arguments[1].evaluate(c).first()}else{throw new Error("Function namespace-uri expects (node-set?)")}if(n==null){return new XString("")}return new XString(n.namespaceURI)};Functions.name=function(){var c=arguments[0];var n;if(arguments.length==1){n=c.contextNode}else if(arguments.length==2){n=arguments[1].evaluate(c).first()}else{throw new Error("Function name expects (node-set?)")}if(n==null){return new XString("")}if(n.nodeType==1){return new XString(n.nodeName)}else if(n.nodeType==2){return new XString(n.name||n.nodeName)}else if(n.nodeType===7){return new XString(n.target||n.nodeName)}else if(n.localName==null){return new XString("")}else{return new XString(n.localName)}};Functions.string=function(){var c=arguments[0];if(arguments.length==1){return new XString(XNodeSet.prototype.stringForNode(c.contextNode))}else if(arguments.length==2){return arguments[1].evaluate(c).string()}throw new Error("Function string expects (object?)")};Functions.concat=function(c){if(arguments.length<3){throw new Error("Function concat expects (string, string[, string]*)")}var s="";for(var i=1;i<arguments.length;i++){s+=arguments[i].evaluate(c).stringValue()}return new XString(s)};Functions.startsWith=function(){var c=arguments[0];if(arguments.length!=3){throw new Error("Function startsWith expects (string, string)")}var s1=arguments[1].evaluate(c).stringValue();var s2=arguments[2].evaluate(c).stringValue();return new XBoolean(s1.substring(0,s2.length)==s2)};Functions.contains=function(){var c=arguments[0];if(arguments.length!=3){throw new Error("Function contains expects (string, string)")}var s1=arguments[1].evaluate(c).stringValue();var s2=arguments[2].evaluate(c).stringValue();return new XBoolean(s1.indexOf(s2)!==-1)};Functions.substringBefore=function(){var c=arguments[0];if(arguments.length!=3){throw new Error("Function substring-before expects (string, string)")}var s1=arguments[1].evaluate(c).stringValue();var s2=arguments[2].evaluate(c).stringValue();return new XString(s1.substring(0,s1.indexOf(s2)))};Functions.substringAfter=function(){var c=arguments[0];if(arguments.length!=3){throw new Error("Function substring-after expects (string, string)")}var s1=arguments[1].evaluate(c).stringValue();var s2=arguments[2].evaluate(c).stringValue();if(s2.length==0){return new XString(s1)}var i=s1.indexOf(s2);if(i==-1){return new XString("")}return new XString(s1.substring(i+s2.length))};Functions.substring=function(){var c=arguments[0];if(!(arguments.length==3||arguments.length==4)){throw new Error("Function substring expects (string, number, number?)")}var s=arguments[1].evaluate(c).stringValue();var n1=Math.round(arguments[2].evaluate(c).numberValue())-1;var n2=arguments.length==4?n1+Math.round(arguments[3].evaluate(c).numberValue()):undefined;return new XString(s.substring(n1,n2))};Functions.stringLength=function(){var c=arguments[0];var s;if(arguments.length==1){s=XNodeSet.prototype.stringForNode(c.contextNode)}else if(arguments.length==2){s=arguments[1].evaluate(c).stringValue()}else{throw new Error("Function string-length expects (string?)")}return new XNumber(s.length)};Functions.normalizeSpace=function(){var c=arguments[0];var s;if(arguments.length==1){s=XNodeSet.prototype.stringForNode(c.contextNode)}else if(arguments.length==2){s=arguments[1].evaluate(c).stringValue()}else{throw new Error("Function normalize-space expects (string?)")}var i=0;var j=s.length-1;while(Utilities.isSpace(s.charCodeAt(j))){j--}var t="";while(i<=j&&Utilities.isSpace(s.charCodeAt(i))){i++}while(i<=j){if(Utilities.isSpace(s.charCodeAt(i))){t+=" ";while(i<=j&&Utilities.isSpace(s.charCodeAt(i))){i++}}else{t+=s.charAt(i);i++}}return new XString(t)};Functions.translate=function(c,eValue,eFrom,eTo){if(arguments.length!=4){throw new Error("Function translate expects (string, string, string)")}var value=eValue.evaluate(c).stringValue();var from=eFrom.evaluate(c).stringValue();var to=eTo.evaluate(c).stringValue();var cMap=reduce(function(acc,ch,i){if(!(ch in acc)){acc[ch]=i>to.length?"":to[i]}return acc},{},from);var t=join("",map(function(ch){return ch in cMap?cMap[ch]:ch},value));return new XString(t)};Functions.boolean_=function(){var c=arguments[0];if(arguments.length!=2){throw new Error("Function boolean expects (object)")}return arguments[1].evaluate(c).bool()};Functions.not=function(c,eValue){if(arguments.length!=2){throw new Error("Function not expects (object)")}return eValue.evaluate(c).bool().not()};Functions.true_=function(){if(arguments.length!=1){throw new Error("Function true expects ()")}return XBoolean.true_};Functions.false_=function(){if(arguments.length!=1){throw new Error("Function false expects ()")}return XBoolean.false_};Functions.lang=function(){var c=arguments[0];if(arguments.length!=2){throw new Error("Function lang expects (string)")}var lang;for(var n=c.contextNode;n!=null&&n.nodeType!=9;n=n.parentNode){var a=n.getAttributeNS(XPath.XML_NAMESPACE_URI,"lang");if(a!=null){lang=String(a);break}}if(lang==null){return XBoolean.false_}var s=arguments[1].evaluate(c).stringValue();return new XBoolean(lang.substring(0,s.length)==s&&(lang.length==s.length||lang.charAt(s.length)=="-"))};Functions.number=function(){var c=arguments[0];if(!(arguments.length==1||arguments.length==2)){throw new Error("Function number expects (object?)")}if(arguments.length==1){return new XNumber(XNodeSet.prototype.stringForNode(c.contextNode))}return arguments[1].evaluate(c).number()};Functions.sum=function(){var c=arguments[0];var ns;if(arguments.length!=2||!Utilities.instance_of(ns=arguments[1].evaluate(c),XNodeSet)){throw new Error("Function sum expects (node-set)")}ns=ns.toUnsortedArray();var n=0;for(var i=0;i<ns.length;i++){n+=new XNumber(XNodeSet.prototype.stringForNode(ns[i])).numberValue()}return new XNumber(n)};Functions.floor=function(){var c=arguments[0];if(arguments.length!=2){throw new Error("Function floor expects (number)")}return new XNumber(Math.floor(arguments[1].evaluate(c).numberValue()))};Functions.ceiling=function(){var c=arguments[0];if(arguments.length!=2){throw new Error("Function ceiling expects (number)")}return new XNumber(Math.ceil(arguments[1].evaluate(c).numberValue()))};Functions.round=function(){var c=arguments[0];if(arguments.length!=2){throw new Error("Function round expects (number)")}return new XNumber(Math.round(arguments[1].evaluate(c).numberValue()))};var Utilities=new Object;Utilities.isAttribute=function(val){return val&&(val.nodeType===2||val.ownerElement)};Utilities.splitQName=function(qn){var i=qn.indexOf(":");if(i==-1){return[null,qn]}return[qn.substring(0,i),qn.substring(i+1)]};Utilities.resolveQName=function(qn,nr,n,useDefault){var parts=Utilities.splitQName(qn);if(parts[0]!=null){parts[0]=nr.getNamespace(parts[0],n)}else{if(useDefault){parts[0]=nr.getNamespace("",n);if(parts[0]==null){parts[0]=""}}else{parts[0]=""}}return parts};Utilities.isSpace=function(c){return c==9||c==13||c==10||c==32};Utilities.isLetter=function(c){return c>=65&&c<=90||c>=97&&c<=122||c>=192&&c<=214||c>=216&&c<=246||c>=248&&c<=255||c>=256&&c<=305||c>=308&&c<=318||c>=321&&c<=328||c>=330&&c<=382||c>=384&&c<=451||c>=461&&c<=496||c>=500&&c<=501||c>=506&&c<=535||c>=592&&c<=680||c>=699&&c<=705||c==902||c>=904&&c<=906||c==908||c>=910&&c<=929||c>=931&&c<=974||c>=976&&c<=982||c==986||c==988||c==990||c==992||c>=994&&c<=1011||c>=1025&&c<=1036||c>=1038&&c<=1103||c>=1105&&c<=1116||c>=1118&&c<=1153||c>=1168&&c<=1220||c>=1223&&c<=1224||c>=1227&&c<=1228||c>=1232&&c<=1259||c>=1262&&c<=1269||c>=1272&&c<=1273||c>=1329&&c<=1366||c==1369||c>=1377&&c<=1414||c>=1488&&c<=1514||c>=1520&&c<=1522||c>=1569&&c<=1594||c>=1601&&c<=1610||c>=1649&&c<=1719||c>=1722&&c<=1726||c>=1728&&c<=1742||c>=1744&&c<=1747||c==1749||c>=1765&&c<=1766||c>=2309&&c<=2361||c==2365||c>=2392&&c<=2401||c>=2437&&c<=2444||c>=2447&&c<=2448||c>=2451&&c<=2472||c>=2474&&c<=2480||c==2482||c>=2486&&c<=2489||c>=2524&&c<=2525||c>=2527&&c<=2529||c>=2544&&c<=2545||c>=2565&&c<=2570||c>=2575&&c<=2576||c>=2579&&c<=2600||c>=2602&&c<=2608||c>=2610&&c<=2611||c>=2613&&c<=2614||c>=2616&&c<=2617||c>=2649&&c<=2652||c==2654||c>=2674&&c<=2676||c>=2693&&c<=2699||c==2701||c>=2703&&c<=2705||c>=2707&&c<=2728||c>=2730&&c<=2736||c>=2738&&c<=2739||c>=2741&&c<=2745||c==2749||c==2784||c>=2821&&c<=2828||c>=2831&&c<=2832||c>=2835&&c<=2856||c>=2858&&c<=2864||c>=2866&&c<=2867||c>=2870&&c<=2873||c==2877||c>=2908&&c<=2909||c>=2911&&c<=2913||c>=2949&&c<=2954||c>=2958&&c<=2960||c>=2962&&c<=2965||c>=2969&&c<=2970||c==2972||c>=2974&&c<=2975||c>=2979&&c<=2980||c>=2984&&c<=2986||c>=2990&&c<=2997||c>=2999&&c<=3001||c>=3077&&c<=3084||c>=3086&&c<=3088||c>=3090&&c<=3112||c>=3114&&c<=3123||c>=3125&&c<=3129||c>=3168&&c<=3169||c>=3205&&c<=3212||c>=3214&&c<=3216||c>=3218&&c<=3240||c>=3242&&c<=3251||c>=3253&&c<=3257||c==3294||c>=3296&&c<=3297||c>=3333&&c<=3340||c>=3342&&c<=3344||c>=3346&&c<=3368||c>=3370&&c<=3385||c>=3424&&c<=3425||c>=3585&&c<=3630||c==3632||c>=3634&&c<=3635||c>=3648&&c<=3653||c>=3713&&c<=3714||c==3716||c>=3719&&c<=3720||c==3722||c==3725||c>=3732&&c<=3735||c>=3737&&c<=3743||c>=3745&&c<=3747||c==3749||c==3751||c>=3754&&c<=3755||c>=3757&&c<=3758||c==3760||c>=3762&&c<=3763||c==3773||c>=3776&&c<=3780||c>=3904&&c<=3911||c>=3913&&c<=3945||c>=4256&&c<=4293||c>=4304&&c<=4342||c==4352||c>=4354&&c<=4355||c>=4357&&c<=4359||c==4361||c>=4363&&c<=4364||c>=4366&&c<=4370||c==4412||c==4414||c==4416||c==4428||c==4430||c==4432||c>=4436&&c<=4437||c==4441||c>=4447&&c<=4449||c==4451||c==4453||c==4455||c==4457||c>=4461&&c<=4462||c>=4466&&c<=4467||c==4469||c==4510||c==4520||c==4523||c>=4526&&c<=4527||c>=4535&&c<=4536||c==4538||c>=4540&&c<=4546||c==4587||c==4592||c==4601||c>=7680&&c<=7835||c>=7840&&c<=7929||c>=7936&&c<=7957||c>=7960&&c<=7965||c>=7968&&c<=8005||c>=8008&&c<=8013||c>=8016&&c<=8023||c==8025||c==8027||c==8029||c>=8031&&c<=8061||c>=8064&&c<=8116||c>=8118&&c<=8124||c==8126||c>=8130&&c<=8132||c>=8134&&c<=8140||c>=8144&&c<=8147||c>=8150&&c<=8155||c>=8160&&c<=8172||c>=8178&&c<=8180||c>=8182&&c<=8188||c==8486||c>=8490&&c<=8491||c==8494||c>=8576&&c<=8578||c>=12353&&c<=12436||c>=12449&&c<=12538||c>=12549&&c<=12588||c>=44032&&c<=55203||c>=19968&&c<=40869||c==12295||c>=12321&&c<=12329};Utilities.isNCNameChar=function(c){return c>=48&&c<=57||c>=1632&&c<=1641||c>=1776&&c<=1785||c>=2406&&c<=2415||c>=2534&&c<=2543||c>=2662&&c<=2671||c>=2790&&c<=2799||c>=2918&&c<=2927||c>=3047&&c<=3055||c>=3174&&c<=3183||c>=3302&&c<=3311||c>=3430&&c<=3439||c>=3664&&c<=3673||c>=3792&&c<=3801||c>=3872&&c<=3881||c==46||c==45||c==95||Utilities.isLetter(c)||c>=768&&c<=837||c>=864&&c<=865||c>=1155&&c<=1158||c>=1425&&c<=1441||c>=1443&&c<=1465||c>=1467&&c<=1469||c==1471||c>=1473&&c<=1474||c==1476||c>=1611&&c<=1618||c==1648||c>=1750&&c<=1756||c>=1757&&c<=1759||c>=1760&&c<=1764||c>=1767&&c<=1768||c>=1770&&c<=1773||c>=2305&&c<=2307||c==2364||c>=2366&&c<=2380||c==2381||c>=2385&&c<=2388||c>=2402&&c<=2403||c>=2433&&c<=2435||c==2492||c==2494||c==2495||c>=2496&&c<=2500||c>=2503&&c<=2504||c>=2507&&c<=2509||c==2519||c>=2530&&c<=2531||c==2562||c==2620||c==2622||c==2623||c>=2624&&c<=2626||c>=2631&&c<=2632||c>=2635&&c<=2637||c>=2672&&c<=2673||c>=2689&&c<=2691||c==2748||c>=2750&&c<=2757||c>=2759&&c<=2761||c>=2763&&c<=2765||c>=2817&&c<=2819||c==2876||c>=2878&&c<=2883||c>=2887&&c<=2888||c>=2891&&c<=2893||c>=2902&&c<=2903||c>=2946&&c<=2947||c>=3006&&c<=3010||c>=3014&&c<=3016||c>=3018&&c<=3021||c==3031||c>=3073&&c<=3075||c>=3134&&c<=3140||c>=3142&&c<=3144||c>=3146&&c<=3149||c>=3157&&c<=3158||c>=3202&&c<=3203||c>=3262&&c<=3268||c>=3270&&c<=3272||c>=3274&&c<=3277||c>=3285&&c<=3286||c>=3330&&c<=3331||c>=3390&&c<=3395||c>=3398&&c<=3400||c>=3402&&c<=3405||c==3415||c==3633||c>=3636&&c<=3642||c>=3655&&c<=3662||c==3761||c>=3764&&c<=3769||c>=3771&&c<=3772||c>=3784&&c<=3789||c>=3864&&c<=3865||c==3893||c==3895||c==3897||c==3902||c==3903||c>=3953&&c<=3972||c>=3974&&c<=3979||c>=3984&&c<=3989||c==3991||c>=3993&&c<=4013||c>=4017&&c<=4023||c==4025||c>=8400&&c<=8412||c==8417||c>=12330&&c<=12335||c==12441||c==12442||c==183||c==720||c==721||c==903||c==1600||c==3654||c==3782||c==12293||c>=12337&&c<=12341||c>=12445&&c<=12446||c>=12540&&c<=12542};Utilities.coalesceText=function(n){for(var m=n.firstChild;m!=null;m=m.nextSibling){if(m.nodeType==3||m.nodeType==4){var s=m.nodeValue;var first=m;m=m.nextSibling;while(m!=null&&(m.nodeType==3||m.nodeType==4)){s+=m.nodeValue;var del=m;m=m.nextSibling;del.parentNode.removeChild(del)}if(first.nodeType==4){var p=first.parentNode;if(first.nextSibling==null){p.removeChild(first);p.appendChild(p.ownerDocument.createTextNode(s))}else{var next=first.nextSibling;p.removeChild(first);p.insertBefore(p.ownerDocument.createTextNode(s),next)}}else{first.nodeValue=s}if(m==null){break}}else if(m.nodeType==1){Utilities.coalesceText(m)}}};Utilities.instance_of=function(o,c){while(o!=null){if(o.constructor===c){return true}if(o===Object){return false}o=o.constructor.superclass}return false};Utilities.getElementById=function(n,id){if(n.nodeType==1){if(n.getAttribute("id")==id||n.getAttributeNS(null,"id")==id){return n}}for(var m=n.firstChild;m!=null;m=m.nextSibling){var res=Utilities.getElementById(m,id);if(res!=null){return res}}return null};var XPathException=function(){function getMessage(code,exception){var msg=exception?": "+exception.toString():"";switch(code){case XPathException.INVALID_EXPRESSION_ERR:return"Invalid expression"+msg;case XPathException.TYPE_ERR:return"Type error"+msg}return null}function XPathException(code,error,message){var err=Error.call(this,getMessage(code,error)||message);err.code=code;err.exception=error;return err}XPathException.prototype=Object.create(Error.prototype);XPathException.prototype.constructor=XPathException;XPathException.superclass=Error;XPathException.prototype.toString=function(){return this.message};XPathException.fromMessage=function(message,error){return new XPathException(null,error,message)};XPathException.INVALID_EXPRESSION_ERR=51;XPathException.TYPE_ERR=52;return XPathException}();XPathExpression.prototype={};XPathExpression.prototype.constructor=XPathExpression;XPathExpression.superclass=Object.prototype;function XPathExpression(e,r,p){this.xpath=p.parse(e);this.context=new XPathContext;this.context.namespaceResolver=new XPathNSResolverWrapper(r)}XPathExpression.getOwnerDocument=function(n){return n.nodeType===9?n:n.ownerDocument};XPathExpression.detectHtmlDom=function(n){if(!n){return false}var doc=XPathExpression.getOwnerDocument(n);try{return doc.implementation.hasFeature("HTML","2.0")}catch(e){return true}};XPathExpression.prototype.evaluate=function(n,t,res){this.context.expressionContextNode=n;this.context.caseInsensitive=XPathExpression.detectHtmlDom(n);var result=this.xpath.evaluate(this.context);return new XPathResult(result,t)};XPathNSResolverWrapper.prototype={};XPathNSResolverWrapper.prototype.constructor=XPathNSResolverWrapper;XPathNSResolverWrapper.superclass=Object.prototype;function XPathNSResolverWrapper(r){this.xpathNSResolver=r}XPathNSResolverWrapper.prototype.getNamespace=function(prefix,n){if(this.xpathNSResolver==null){return null}return this.xpathNSResolver.lookupNamespaceURI(prefix)};NodeXPathNSResolver.prototype={};NodeXPathNSResolver.prototype.constructor=NodeXPathNSResolver;NodeXPathNSResolver.superclass=Object.prototype;function NodeXPathNSResolver(n){this.node=n;this.namespaceResolver=new NamespaceResolver}NodeXPathNSResolver.prototype.lookupNamespaceURI=function(prefix){return this.namespaceResolver.getNamespace(prefix,this.node)};XPathResult.prototype={};XPathResult.prototype.constructor=XPathResult;XPathResult.superclass=Object.prototype;function XPathResult(v,t){if(t==XPathResult.ANY_TYPE){if(v.constructor===XString){t=XPathResult.STRING_TYPE}else if(v.constructor===XNumber){t=XPathResult.NUMBER_TYPE}else if(v.constructor===XBoolean){t=XPathResult.BOOLEAN_TYPE}else if(v.constructor===XNodeSet){t=XPathResult.UNORDERED_NODE_ITERATOR_TYPE}}this.resultType=t;switch(t){case XPathResult.NUMBER_TYPE:this.numberValue=v.numberValue();return;case XPathResult.STRING_TYPE:this.stringValue=v.stringValue();return;case XPathResult.BOOLEAN_TYPE:this.booleanValue=v.booleanValue();return;case XPathResult.ANY_UNORDERED_NODE_TYPE:case XPathResult.FIRST_ORDERED_NODE_TYPE:if(v.constructor===XNodeSet){this.singleNodeValue=v.first();return}break;case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:case XPathResult.ORDERED_NODE_ITERATOR_TYPE:if(v.constructor===XNodeSet){this.invalidIteratorState=false;this.nodes=v.toArray();this.iteratorIndex=0;return}break;case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:if(v.constructor===XNodeSet){this.nodes=v.toArray();this.snapshotLength=this.nodes.length;return}break}throw new XPathException(XPathException.TYPE_ERR)}XPathResult.prototype.iterateNext=function(){if(this.resultType!=XPathResult.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=XPathResult.ORDERED_NODE_ITERATOR_TYPE){throw new XPathException(XPathException.TYPE_ERR)}return this.nodes[this.iteratorIndex++]};XPathResult.prototype.snapshotItem=function(i){if(this.resultType!=XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=XPathResult.ORDERED_NODE_SNAPSHOT_TYPE){throw new XPathException(XPathException.TYPE_ERR)}return this.nodes[i]};XPathResult.ANY_TYPE=0;XPathResult.NUMBER_TYPE=1;XPathResult.STRING_TYPE=2;XPathResult.BOOLEAN_TYPE=3;XPathResult.UNORDERED_NODE_ITERATOR_TYPE=4;XPathResult.ORDERED_NODE_ITERATOR_TYPE=5;XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE=6;XPathResult.ORDERED_NODE_SNAPSHOT_TYPE=7;XPathResult.ANY_UNORDERED_NODE_TYPE=8;XPathResult.FIRST_ORDERED_NODE_TYPE=9;function installDOM3XPathSupport(doc,p){doc.createExpression=function(e,r){try{return new XPathExpression(e,r,p)}catch(e){throw new XPathException(XPathException.INVALID_EXPRESSION_ERR,e)}};doc.createNSResolver=function(n){return new NodeXPathNSResolver(n)};doc.evaluate=function(e,cn,r,t,res){if(t<0||t>9){throw{code:0,toString:function(){return"Request type not supported"}}}return doc.createExpression(e,r,p).evaluate(cn,t,res)}}try{var shouldInstall=true;try{if(document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)){shouldInstall=false}}catch(e){}if(shouldInstall){installDOM3XPathSupport(document,new XPathParser)}}catch(e){}installDOM3XPathSupport(exports,new XPathParser);(function(){var parser=new XPathParser;var defaultNSResolver=new NamespaceResolver;var defaultFunctionResolver=new FunctionResolver;var defaultVariableResolver=new VariableResolver;function makeNSResolverFromFunction(func){return{getNamespace:function(prefix,node){var ns=func(prefix,node);return ns||defaultNSResolver.getNamespace(prefix,node)}}}function makeNSResolverFromObject(obj){return makeNSResolverFromFunction(obj.getNamespace.bind(obj))}function makeNSResolverFromMap(map){return makeNSResolverFromFunction(function(prefix){return map[prefix]})}function makeNSResolver(resolver){if(resolver&&typeof resolver.getNamespace==="function"){return makeNSResolverFromObject(resolver)}if(typeof resolver==="function"){return makeNSResolverFromFunction(resolver)}if(typeof resolver==="object"){return makeNSResolverFromMap(resolver)}return defaultNSResolver}function convertValue(value){if(value===null||typeof value==="undefined"||value instanceof XString||value instanceof XBoolean||value instanceof XNumber||value instanceof XNodeSet){return value}switch(typeof value){case"string":return new XString(value);case"boolean":return new XBoolean(value);case"number":return new XNumber(value)}var ns=new XNodeSet;ns.addArray([].concat(value));return ns}function makeEvaluator(func){return function(context){var args=Array.prototype.slice.call(arguments,1).map(function(arg){return arg.evaluate(context)});var result=func.apply(this,[].concat(context,args));return convertValue(result)}}function makeFunctionResolverFromFunction(func){return{getFunction:function(name,namespace){var found=func(name,namespace);if(found){return makeEvaluator(found)}return defaultFunctionResolver.getFunction(name,namespace)}}}function makeFunctionResolverFromObject(obj){return makeFunctionResolverFromFunction(obj.getFunction.bind(obj))}function makeFunctionResolverFromMap(map){return makeFunctionResolverFromFunction(function(name){return map[name]})}function makeFunctionResolver(resolver){if(resolver&&typeof resolver.getFunction==="function"){return makeFunctionResolverFromObject(resolver)}if(typeof resolver==="function"){return makeFunctionResolverFromFunction(resolver)}if(typeof resolver==="object"){return makeFunctionResolverFromMap(resolver)}return defaultFunctionResolver}function makeVariableResolverFromFunction(func){return{getVariable:function(name,namespace){var value=func(name,namespace);return convertValue(value)}}}function makeVariableResolver(resolver){if(resolver){if(typeof resolver.getVariable==="function"){return makeVariableResolverFromFunction(resolver.getVariable.bind(resolver))}if(typeof resolver==="function"){return makeVariableResolverFromFunction(resolver)}if(typeof resolver==="object"){return makeVariableResolverFromFunction(function(name){return resolver[name]})}}return defaultVariableResolver}function copyIfPresent(prop,dest,source){if(prop in source){dest[prop]=source[prop]}}function makeContext(options){var context=new XPathContext;if(options){context.namespaceResolver=makeNSResolver(options.namespaces);context.functionResolver=makeFunctionResolver(options.functions);context.variableResolver=makeVariableResolver(options.variables);context.expressionContextNode=options.node;copyIfPresent("allowAnyNamespaceForNoPrefix",context,options);copyIfPresent("isHtml",context,options)}else{context.namespaceResolver=defaultNSResolver}return context}function evaluate(parsedExpression,options){var context=makeContext(options);return parsedExpression.evaluate(context)}var evaluatorPrototype={evaluate:function(options){return evaluate(this.expression,options)},evaluateNumber:function(options){return this.evaluate(options).numberValue()},evaluateString:function(options){return this.evaluate(options).stringValue()},evaluateBoolean:function(options){return this.evaluate(options).booleanValue()},evaluateNodeSet:function(options){return this.evaluate(options).nodeset()},select:function(options){return this.evaluateNodeSet(options).toArray()},select1:function(options){return this.select(options)[0]}};function parse(xpath){var parsed=parser.parse(xpath);return Object.create(evaluatorPrototype,{expression:{value:parsed}})}exports.parse=parse})();exports.XPath=XPath;exports.XPathParser=XPathParser;exports.XPathResult=XPathResult;exports.Step=Step;exports.NodeTest=NodeTest;exports.BarOperation=BarOperation;exports.NamespaceResolver=NamespaceResolver;exports.FunctionResolver=FunctionResolver;exports.VariableResolver=VariableResolver;exports.Utilities=Utilities;exports.XPathContext=XPathContext;exports.XNodeSet=XNodeSet;exports.XBoolean=XBoolean;exports.XString=XString;exports.XNumber=XNumber;exports.select=function(e,doc,single){return exports.selectWithResolver(e,doc,null,single)};exports.useNamespaces=function(mappings){var resolver={mappings:mappings||{},lookupNamespaceURI:function(prefix){return this.mappings[prefix]}};return function(e,doc,single){return exports.selectWithResolver(e,doc,resolver,single)}};exports.selectWithResolver=function(e,doc,resolver,single){var expression=new XPathExpression(e,resolver,new XPathParser);var type=XPathResult.ANY_TYPE;var result=expression.evaluate(doc,type,null);if(result.resultType==XPathResult.STRING_TYPE){result=result.stringValue}else if(result.resultType==XPathResult.NUMBER_TYPE){result=result.numberValue}else if(result.resultType==XPathResult.BOOLEAN_TYPE){result=result.booleanValue}else{result=result.nodes;if(single){result=result[0]}}return result};exports.select1=function(e,doc){return exports.select(e,doc,true)}})(xpath)},{}],577:[function(require,module,exports){var fs=require("fs");var zlib=require("zlib");var fd_slicer=require("fd-slicer");var crc32=require("buffer-crc32");var util=require("util");var EventEmitter=require("events").EventEmitter;var Transform=require("stream").Transform;var PassThrough=require("stream").PassThrough;var Writable=require("stream").Writable;exports.open=open;exports.fromFd=fromFd;exports.fromBuffer=fromBuffer;exports.fromRandomAccessReader=fromRandomAccessReader;exports.dosDateTimeToDate=dosDateTimeToDate;exports.validateFileName=validateFileName;exports.ZipFile=ZipFile;exports.Entry=Entry;exports.RandomAccessReader=RandomAccessReader;function open(path,options,callback){if(typeof options==="function"){callback=options;options=null}if(options==null)options={};if(options.autoClose==null)options.autoClose=true;if(options.lazyEntries==null)options.lazyEntries=false;if(options.decodeStrings==null)options.decodeStrings=true;if(options.validateEntrySizes==null)options.validateEntrySizes=true;if(callback==null)callback=defaultCallback;fs.open(path,"r",function(err,fd){if(err)return callback(err);fromFd(fd,options,function(err,zipfile){if(err)fs.close(fd,defaultCallback);callback(err,zipfile)})})}function fromFd(fd,options,callback){if(typeof options==="function"){callback=options;options=null}if(options==null)options={};if(options.autoClose==null)options.autoClose=false;if(options.lazyEntries==null)options.lazyEntries=false;if(options.decodeStrings==null)options.decodeStrings=true;if(options.validateEntrySizes==null)options.validateEntrySizes=true;if(callback==null)callback=defaultCallback;fs.fstat(fd,function(err,stats){if(err)return callback(err);var reader=fd_slicer.createFromFd(fd,{autoClose:true});fromRandomAccessReader(reader,stats.size,options,callback)})}function fromBuffer(buffer,options,callback){if(typeof options==="function"){callback=options;options=null}if(options==null)options={};options.autoClose=false;if(options.lazyEntries==null)options.lazyEntries=false;if(options.decodeStrings==null)options.decodeStrings=true;if(options.validateEntrySizes==null)options.validateEntrySizes=true;var reader=fd_slicer.createFromBuffer(buffer);fromRandomAccessReader(reader,buffer.length,options,callback)}function fromRandomAccessReader(reader,totalSize,options,callback){if(typeof options==="function"){callback=options;options=null}if(options==null)options={};if(options.autoClose==null)options.autoClose=true;if(options.lazyEntries==null)options.lazyEntries=false;if(options.decodeStrings==null)options.decodeStrings=true;var decodeStrings=!!options.decodeStrings;if(options.validateEntrySizes==null)options.validateEntrySizes=true;if(callback==null)callback=defaultCallback;if(typeof totalSize!=="number")throw new Error("expected totalSize parameter to be a number");if(totalSize>Number.MAX_SAFE_INTEGER){throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.")}reader.ref();var eocdrWithoutCommentSize=22;var maxCommentSize=65535;var bufferSize=Math.min(eocdrWithoutCommentSize+maxCommentSize,totalSize);var buffer=new Buffer(bufferSize);var bufferReadStart=totalSize-buffer.length;readAndAssertNoEof(reader,buffer,0,bufferSize,bufferReadStart,function(err){if(err)return callback(err);for(var i=bufferSize-eocdrWithoutCommentSize;i>=0;i-=1){if(buffer.readUInt32LE(i)!==101010256)continue;var eocdrBuffer=buffer.slice(i);var diskNumber=eocdrBuffer.readUInt16LE(4);if(diskNumber!==0){return callback(new Error("multi-disk zip files are not supported: found disk number: "+diskNumber))}var entryCount=eocdrBuffer.readUInt16LE(10);var centralDirectoryOffset=eocdrBuffer.readUInt32LE(16);var commentLength=eocdrBuffer.readUInt16LE(20);var expectedCommentLength=eocdrBuffer.length-eocdrWithoutCommentSize;if(commentLength!==expectedCommentLength){return callback(new Error("invalid comment length. expected: "+expectedCommentLength+". found: "+commentLength))}var comment=decodeStrings?decodeBuffer(eocdrBuffer,22,eocdrBuffer.length,false):eocdrBuffer.slice(22);if(!(entryCount===65535||centralDirectoryOffset===4294967295)){return callback(null,new ZipFile(reader,centralDirectoryOffset,totalSize,entryCount,comment,options.autoClose,options.lazyEntries,decodeStrings,options.validateEntrySizes))}var zip64EocdlBuffer=new Buffer(20);var zip64EocdlOffset=bufferReadStart+i-zip64EocdlBuffer.length;readAndAssertNoEof(reader,zip64EocdlBuffer,0,zip64EocdlBuffer.length,zip64EocdlOffset,function(err){if(err)return callback(err);if(zip64EocdlBuffer.readUInt32LE(0)!==117853008){return callback(new Error("invalid zip64 end of central directory locator signature"))}var zip64EocdrOffset=readUInt64LE(zip64EocdlBuffer,8);var zip64EocdrBuffer=new Buffer(56);readAndAssertNoEof(reader,zip64EocdrBuffer,0,zip64EocdrBuffer.length,zip64EocdrOffset,function(err){if(err)return callback(err);if(zip64EocdrBuffer.readUInt32LE(0)!==101075792){return callback(new Error("invalid zip64 end of central directory record signature"))}entryCount=readUInt64LE(zip64EocdrBuffer,32);centralDirectoryOffset=readUInt64LE(zip64EocdrBuffer,48);return callback(null,new ZipFile(reader,centralDirectoryOffset,totalSize,entryCount,comment,options.autoClose,options.lazyEntries,decodeStrings,options.validateEntrySizes))})});return}callback(new Error("end of central directory record signature not found"))})}util.inherits(ZipFile,EventEmitter);function ZipFile(reader,centralDirectoryOffset,fileSize,entryCount,comment,autoClose,lazyEntries,decodeStrings,validateEntrySizes){var self=this;EventEmitter.call(self);self.reader=reader;self.reader.on("error",function(err){emitError(self,err)});self.reader.once("close",function(){self.emit("close")});self.readEntryCursor=centralDirectoryOffset;self.fileSize=fileSize;self.entryCount=entryCount;self.comment=comment;self.entriesRead=0;self.autoClose=!!autoClose;self.lazyEntries=!!lazyEntries;self.decodeStrings=!!decodeStrings;self.validateEntrySizes=!!validateEntrySizes;self.isOpen=true;self.emittedError=false;if(!self.lazyEntries)self._readEntry()}ZipFile.prototype.close=function(){if(!this.isOpen)return;this.isOpen=false;this.reader.unref()};function emitErrorAndAutoClose(self,err){if(self.autoClose)self.close();emitError(self,err)}function emitError(self,err){if(self.emittedError)return;self.emittedError=true;self.emit("error",err)}ZipFile.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};ZipFile.prototype._readEntry=function(){var self=this;if(self.entryCount===self.entriesRead){setImmediate(function(){if(self.autoClose)self.close();if(self.emittedError)return;self.emit("end")});return}if(self.emittedError)return;var buffer=new Buffer(46);readAndAssertNoEof(self.reader,buffer,0,buffer.length,self.readEntryCursor,function(err){if(err)return emitErrorAndAutoClose(self,err);if(self.emittedError)return;var entry=new Entry;var signature=buffer.readUInt32LE(0);if(signature!==33639248)return emitErrorAndAutoClose(self,new Error("invalid central directory file header signature: 0x"+signature.toString(16)));entry.versionMadeBy=buffer.readUInt16LE(4);entry.versionNeededToExtract=buffer.readUInt16LE(6);entry.generalPurposeBitFlag=buffer.readUInt16LE(8);entry.compressionMethod=buffer.readUInt16LE(10);entry.lastModFileTime=buffer.readUInt16LE(12);entry.lastModFileDate=buffer.readUInt16LE(14);entry.crc32=buffer.readUInt32LE(16);entry.compressedSize=buffer.readUInt32LE(20);entry.uncompressedSize=buffer.readUInt32LE(24);entry.fileNameLength=buffer.readUInt16LE(28);entry.extraFieldLength=buffer.readUInt16LE(30);entry.fileCommentLength=buffer.readUInt16LE(32);entry.internalFileAttributes=buffer.readUInt16LE(36);entry.externalFileAttributes=buffer.readUInt32LE(38);entry.relativeOffsetOfLocalHeader=buffer.readUInt32LE(42);if(entry.generalPurposeBitFlag&64)return emitErrorAndAutoClose(self,new Error("strong encryption is not supported"));self.readEntryCursor+=46;buffer=new Buffer(entry.fileNameLength+entry.extraFieldLength+entry.fileCommentLength);readAndAssertNoEof(self.reader,buffer,0,buffer.length,self.readEntryCursor,function(err){if(err)return emitErrorAndAutoClose(self,err);if(self.emittedError)return;var isUtf8=(entry.generalPurposeBitFlag&2048)!==0;entry.fileName=self.decodeStrings?decodeBuffer(buffer,0,entry.fileNameLength,isUtf8):buffer.slice(0,entry.fileNameLength);var fileCommentStart=entry.fileNameLength+entry.extraFieldLength;var extraFieldBuffer=buffer.slice(entry.fileNameLength,fileCommentStart);entry.extraFields=[];var i=0;while(i<extraFieldBuffer.length-3){var headerId=extraFieldBuffer.readUInt16LE(i+0);var dataSize=extraFieldBuffer.readUInt16LE(i+2);var dataStart=i+4;var dataEnd=dataStart+dataSize;if(dataEnd>extraFieldBuffer.length)return emitErrorAndAutoClose(self,new Error("extra field length exceeds extra field buffer size"));var dataBuffer=new Buffer(dataSize);extraFieldBuffer.copy(dataBuffer,0,dataStart,dataEnd);entry.extraFields.push({id:headerId,data:dataBuffer});i=dataEnd}entry.fileComment=self.decodeStrings?decodeBuffer(buffer,fileCommentStart,fileCommentStart+entry.fileCommentLength,isUtf8):buffer.slice(fileCommentStart,fileCommentStart+entry.fileCommentLength);entry.comment=entry.fileComment;self.readEntryCursor+=buffer.length;self.entriesRead+=1;if(entry.uncompressedSize===4294967295||entry.compressedSize===4294967295||entry.relativeOffsetOfLocalHeader===4294967295){var zip64EiefBuffer=null;for(var i=0;i<entry.extraFields.length;i++){var extraField=entry.extraFields[i];if(extraField.id===1){zip64EiefBuffer=extraField.data;break}}if(zip64EiefBuffer==null){return emitErrorAndAutoClose(self,new Error("expected zip64 extended information extra field"))}var index=0;if(entry.uncompressedSize===4294967295){if(index+8>zip64EiefBuffer.length){return emitErrorAndAutoClose(self,new Error("zip64 extended information extra field does not include uncompressed size"))}entry.uncompressedSize=readUInt64LE(zip64EiefBuffer,index);index+=8}if(entry.compressedSize===4294967295){if(index+8>zip64EiefBuffer.length){return emitErrorAndAutoClose(self,new Error("zip64 extended information extra field does not include compressed size"))}entry.compressedSize=readUInt64LE(zip64EiefBuffer,index);index+=8}if(entry.relativeOffsetOfLocalHeader===4294967295){if(index+8>zip64EiefBuffer.length){return emitErrorAndAutoClose(self,new Error("zip64 extended information extra field does not include relative header offset"))}entry.relativeOffsetOfLocalHeader=readUInt64LE(zip64EiefBuffer,index);index+=8}}if(self.decodeStrings){for(var i=0;i<entry.extraFields.length;i++){var extraField=entry.extraFields[i];if(extraField.id===28789){if(extraField.data.length<6){continue}if(extraField.data.readUInt8(0)!==1){continue}var oldNameCrc32=extraField.data.readUInt32LE(1);if(crc32.unsigned(buffer.slice(0,entry.fileNameLength))!==oldNameCrc32){continue}entry.fileName=decodeBuffer(extraField.data,5,extraField.data.length,true);break}}}if(self.validateEntrySizes&&entry.compressionMethod===0){var expectedCompressedSize=entry.uncompressedSize;if(entry.isEncrypted()){expectedCompressedSize+=12}if(entry.compressedSize!==expectedCompressedSize){var msg="compressed/uncompressed size mismatch for stored file: "+entry.compressedSize+" != "+entry.uncompressedSize;return emitErrorAndAutoClose(self,new Error(msg))}}if(self.decodeStrings){var errorMessage=validateFileName(entry.fileName);if(errorMessage!=null)return emitErrorAndAutoClose(self,new Error(errorMessage))}self.emit("entry",entry);if(!self.lazyEntries)self._readEntry()})})};ZipFile.prototype.openReadStream=function(entry,options,callback){var self=this;var relativeStart=0;var relativeEnd=entry.compressedSize;if(callback==null){callback=options;options={}}else{if(options.decrypt!=null){if(!entry.isEncrypted()){throw new Error("options.decrypt can only be specified for encrypted entries")}if(options.decrypt!==false)throw new Error("invalid options.decrypt value: "+options.decrypt);if(entry.isCompressed()){if(options.decompress!==false)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}}if(options.decompress!=null){if(!entry.isCompressed()){throw new Error("options.decompress can only be specified for compressed entries")}if(!(options.decompress===false||options.decompress===true)){throw new Error("invalid options.decompress value: "+options.decompress)}}if(options.start!=null||options.end!=null){if(entry.isCompressed()&&options.decompress!==false){throw new Error("start/end range not allowed for compressed entry without options.decompress === false")}if(entry.isEncrypted()&&options.decrypt!==false){throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}}if(options.start!=null){relativeStart=options.start;if(relativeStart<0)throw new Error("options.start < 0");if(relativeStart>entry.compressedSize)throw new Error("options.start > entry.compressedSize")}if(options.end!=null){relativeEnd=options.end;if(relativeEnd<0)throw new Error("options.end < 0");if(relativeEnd>entry.compressedSize)throw new Error("options.end > entry.compressedSize");if(relativeEnd<relativeStart)throw new Error("options.end < options.start")}}if(!self.isOpen)return callback(new Error("closed"));if(entry.isEncrypted()){if(options.decrypt!==false)return callback(new Error("entry is encrypted, and options.decrypt !== false"))}self.reader.ref();var buffer=new Buffer(30);readAndAssertNoEof(self.reader,buffer,0,buffer.length,entry.relativeOffsetOfLocalHeader,function(err){try{if(err)return callback(err);var signature=buffer.readUInt32LE(0);if(signature!==67324752){return callback(new Error("invalid local file header signature: 0x"+signature.toString(16)))}var fileNameLength=buffer.readUInt16LE(26);var extraFieldLength=buffer.readUInt16LE(28);var localFileHeaderEnd=entry.relativeOffsetOfLocalHeader+buffer.length+fileNameLength+extraFieldLength;var decompress;if(entry.compressionMethod===0){decompress=false}else if(entry.compressionMethod===8){decompress=options.decompress!=null?options.decompress:true}else{return callback(new Error("unsupported compression method: "+entry.compressionMethod))}var fileDataStart=localFileHeaderEnd;var fileDataEnd=fileDataStart+entry.compressedSize;if(entry.compressedSize!==0){if(fileDataEnd>self.fileSize){return callback(new Error("file data overflows file bounds: "+fileDataStart+" + "+entry.compressedSize+" > "+self.fileSize))}}var readStream=self.reader.createReadStream({start:fileDataStart+relativeStart,end:fileDataStart+relativeEnd});var endpointStream=readStream;if(decompress){var destroyed=false;var inflateFilter=zlib.createInflateRaw();readStream.on("error",function(err){setImmediate(function(){if(!destroyed)inflateFilter.emit("error",err)})});readStream.pipe(inflateFilter);if(self.validateEntrySizes){endpointStream=new AssertByteCountStream(entry.uncompressedSize);inflateFilter.on("error",function(err){setImmediate(function(){if(!destroyed)endpointStream.emit("error",err)})});inflateFilter.pipe(endpointStream)}else{endpointStream=inflateFilter}endpointStream.destroy=function(){destroyed=true;if(inflateFilter!==endpointStream)inflateFilter.unpipe(endpointStream);readStream.unpipe(inflateFilter);readStream.destroy()}}callback(null,endpointStream)}finally{self.reader.unref()}})};function Entry(){}Entry.prototype.getLastModDate=function(){return dosDateTimeToDate(this.lastModFileDate,this.lastModFileTime)};Entry.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Entry.prototype.isCompressed=function(){return this.compressionMethod===8};function dosDateTimeToDate(date,time){var day=date&31;var month=(date>>5&15)-1;var year=(date>>9&127)+1980;var millisecond=0;var second=(time&31)*2;var minute=time>>5&63;var hour=time>>11&31;return new Date(year,month,day,hour,minute,second,millisecond)}function validateFileName(fileName){if(fileName.indexOf("\\")!==-1){return"invalid characters in fileName: "+fileName}if(/^[a-zA-Z]:/.test(fileName)||/^\//.test(fileName)){return"absolute path: "+fileName}if(fileName.split("/").indexOf("..")!==-1){return"invalid relative path: "+fileName}return null}function readAndAssertNoEof(reader,buffer,offset,length,position,callback){if(length===0){return setImmediate(function(){callback(null,new Buffer(0))})}reader.read(buffer,offset,length,position,function(err,bytesRead){if(err)return callback(err);if(bytesRead<length){return callback(new Error("unexpected EOF"))}callback()})}util.inherits(AssertByteCountStream,Transform);function AssertByteCountStream(byteCount){Transform.call(this);this.actualByteCount=0;this.expectedByteCount=byteCount}AssertByteCountStream.prototype._transform=function(chunk,encoding,cb){this.actualByteCount+=chunk.length;if(this.actualByteCount>this.expectedByteCount){var msg="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return cb(new Error(msg))}cb(null,chunk)};AssertByteCountStream.prototype._flush=function(cb){if(this.actualByteCount<this.expectedByteCount){var msg="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return cb(new Error(msg))}cb()};util.inherits(RandomAccessReader,EventEmitter);function RandomAccessReader(){EventEmitter.call(this);this.refCount=0}RandomAccessReader.prototype.ref=function(){this.refCount+=1};RandomAccessReader.prototype.unref=function(){var self=this;self.refCount-=1;if(self.refCount>0)return;if(self.refCount<0)throw new Error("invalid unref");self.close(onCloseDone);function onCloseDone(err){if(err)return self.emit("error",err);self.emit("close")}};RandomAccessReader.prototype.createReadStream=function(options){var start=options.start;var end=options.end;if(start===end){var emptyStream=new PassThrough;setImmediate(function(){emptyStream.end()});return emptyStream}var stream=this._readStreamForRange(start,end);var destroyed=false;var refUnrefFilter=new RefUnrefFilter(this);stream.on("error",function(err){setImmediate(function(){if(!destroyed)refUnrefFilter.emit("error",err)})});refUnrefFilter.destroy=function(){stream.unpipe(refUnrefFilter);refUnrefFilter.unref();stream.destroy()};var byteCounter=new AssertByteCountStream(end-start);refUnrefFilter.on("error",function(err){setImmediate(function(){if(!destroyed)byteCounter.emit("error",err)})});byteCounter.destroy=function(){destroyed=true;refUnrefFilter.unpipe(byteCounter);refUnrefFilter.destroy()};return stream.pipe(refUnrefFilter).pipe(byteCounter)};RandomAccessReader.prototype._readStreamForRange=function(start,end){throw new Error("not implemented")};RandomAccessReader.prototype.read=function(buffer,offset,length,position,callback){var readStream=this.createReadStream({start:position,end:position+length});var writeStream=new Writable;var written=0;writeStream._write=function(chunk,encoding,cb){chunk.copy(buffer,offset+written,0,chunk.length);written+=chunk.length;cb()};writeStream.on("finish",callback);readStream.on("error",function(error){callback(error)});readStream.pipe(writeStream)};RandomAccessReader.prototype.close=function(callback){setImmediate(callback)};util.inherits(RefUnrefFilter,PassThrough);function RefUnrefFilter(context){PassThrough.call(this);this.context=context;this.context.ref();this.unreffedYet=false}RefUnrefFilter.prototype._flush=function(cb){this.unref();cb()};RefUnrefFilter.prototype.unref=function(cb){if(this.unreffedYet)return;this.unreffedYet=true;this.context.unref()};var cp437="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";function decodeBuffer(buffer,start,end,isUtf8){if(isUtf8){return buffer.toString("utf8",start,end)}else{var result="";for(var i=start;i<end;i++){result+=cp437[buffer[i]]}return result}}function readUInt64LE(buffer,offset){var lower32=buffer.readUInt32LE(offset);var upper32=buffer.readUInt32LE(offset+4);return upper32*4294967296+lower32}function defaultCallback(err){if(err)throw err}},{"buffer-crc32":251,events:undefined,"fd-slicer":303,fs:undefined,stream:undefined,util:undefined,zlib:undefined}]},{},[37]);
//# sourceMappingURL=server-cli.min.js.map