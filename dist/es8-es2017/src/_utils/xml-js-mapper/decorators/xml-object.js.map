{"version":3,"file":"xml-object.js","sourceRoot":"","sources":["../../../../../../src/_utils/xml-js-mapper/decorators/xml-object.ts"],"names":[],"mappings":";;AAAA,oEAA6D;AAG7D,mBAA0B,UAA2B;IACjD,MAAM,CAAC,CAAC,UAAwB,EAAQ,EAAE;QAItC,MAAM,GAAG,GAAG,iCAAa,CAAC,UAAU,CAAC,CAAC;QAEtC,EAAE,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YACb,GAAG,CAAC,UAAU,GAAG,UAAU,CAAC;QAEhC,CAAC;QACD,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;YACnC,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;gBAC/B,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;oBACjB,GAAG,CAAC,CAAC,MAAM,IAAI,IAAI,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;wBAChC,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;4BACtC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gCACnD,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;oCACtB,OAAO,CAAC,UAAU,GAAG,EAAE,CAAC;gCAC5B,CAAC;gCACD,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;4BACpD,CAAC;wBACL,CAAC;oBACL,CAAC;oBACD,EAAE,CAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC,CAAC;wBAC9B,OAAO,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,EAAE,EAAE,EAAE;4BACvC,EAAE,CAAC,CAAC,EAAE,CAAC,eAAe,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC;gCACzC,EAAE,CAAC,YAAY,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;oCAClC,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC;oCACxC,SAAS,CAAC;4BAElB,CAAC;wBACL,CAAC,CAAC,CAAC;oBACP,CAAC;gBACL,CAAC;YACL,CAAC,CAAC,CAAC;QACP,CAAC;IAML,CAAC,CAAC;AACN,CAAC;AA3CD,8BA2CC","sourcesContent":["import { getDefinition } from \"../classes/object-definition\";\r\nimport { FunctionType, IXmlNamespaces } from \"../types\";\r\n\r\nexport function XmlObject(namespaces?: IXmlNamespaces) {\r\n    return (objectType: FunctionType): void => {\r\n\r\n        // console.log(\"########################## XmlObject NS\");\r\n        // console.log(objectType);\r\n        const def = getDefinition(objectType);\r\n        // console.log(def);\r\n        if (namespaces) {\r\n            def.namespaces = namespaces;\r\n            // console.log(namespaces);\r\n        }\r\n        if (def.namespaces && def.properties) {\r\n            def.properties.forEach((propDef) => {\r\n                if (def.namespaces) { // redundant ... TypeScript compile check :(\r\n                    for (const prop in def.namespaces) {\r\n                        if (def.namespaces.hasOwnProperty(prop)) {\r\n                            if (!propDef.namespaces || !propDef.namespaces[prop]) {\r\n                                if (!propDef.namespaces) {\r\n                                    propDef.namespaces = {};\r\n                                }\r\n                                propDef.namespaces[prop] = def.namespaces[prop];\r\n                            }\r\n                        }\r\n                    }\r\n                    if (propDef.xpathSelectorParsed) {\r\n                        propDef.xpathSelectorParsed.forEach((xp) => {\r\n                            if (xp.namespacePrefix && !xp.namespaceUri) {\r\n                                xp.namespaceUri = propDef.namespaces ?\r\n                                    propDef.namespaces[xp.namespacePrefix] :\r\n                                    undefined;\r\n                                // console.log(\"+++ \" + xp.namespaceUri);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        // if (def.properties) {\r\n        //     def.properties.forEach((propDef) => {\r\n        //         console.log(propDef.xpathSelectorParsed);\r\n        //     });\r\n        // }\r\n    };\r\n}\r\n"]}