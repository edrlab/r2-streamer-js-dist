{"version":3,"file":"test-cli.js","sourceRoot":"","sources":["../../../../src/http/test-cli.ts"],"names":[],"mappings":";;AAKA,iCAAiC;AAIjC,wDAA2C;AAI3C,2CAAwC;AACxC,uDAA+C;AAmC/C,MAAM,MAAM,GAAG;;SAEN,CAAC;AACV,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,SAAS,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;AAC9D,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE;IACpC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;CACnB;AACD,MAAM,OAAO,GAAG,MAAM,CAAC,eAAe,CAAC,SAAS,KAAK,OAAO,CAAC;AAC7D,IAAI,OAAO,EAAE;IACT,MAAM,UAAU,GAAG,mBAAG,CAAC,WAAW,CAAQ,MAAM,EAAE,kBAAK,CAAC,CAAC;IACzD,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;CAC3B;KAAM;IACH,MAAM,SAAS,GAAG,mBAAG,CAAC,WAAW,CAAO,MAAM,EAAE,WAAI,CAAC,CAAC;IACtD,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;CAC1B;AAED,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC","sourcesContent":["// tslint:disable:max-line-length\n\n// import { initGlobalConverters_GENERIC, initGlobalConverters_OPDS } from \"@opds/init-globals\";\n\n// npm install xmldom\nimport * as xmldom from \"xmldom\";\n\n// npm install r2-utils-js\n// \"@utils\" is a dist path alias, for example EcmaScript6/ES2015 'node_modules/r2-utils-js/dist/es6-es2015/src/_utils/'\nimport { XML } from \"@utils/xml-js-mapper\";\n\n// npm install r2-opds-js\n// \"@opds\" is a dist path alias, for example EcmaScript6/ES2015 'node_modules/r2-opds-js/dist/es6-es2015/src/opds/'\nimport { OPDS } from \"@opds/opds1/opds\";\nimport { Entry } from \"@opds/opds1/opds-entry\";\n\n// initGlobalConverters_GENERIC();\n// initGlobalConverters_OPDS();\n\n// const xmlStr = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n// <entry xmlns=\"http://www.w3.org/2005/Atom\" xmlns:thr=\"http://purl.org/syndication/thread/1.0\" xmlns:dcterms=\"http://purl.org/dc/terms/\" xmlns:opds=\"http://opds-spec.org/2010/catalog\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:schema=\"http://schema.org/\">\n// <title>The Adventures of Sherlock Holmes</title>\n// <id>http://www.feedbooks.com/book/1421.atom</id>\n// <author>\n// <name>Arthur Conan Doyle</name>\n// <uri>https://catalog.feedbooks.com/publicdomain/browse/en/recent.atom?author_id=1</uri>\n// </author>\n// <published>2007-07-19T13:36:30Z</published>\n// <updated>2018-12-05T12:35:23Z</updated>\n// <dcterms:language>en</dcterms:language>\n// <dcterms:publisher>Feedbooks</dcterms:publisher>\n// <dcterms:issued>1892</dcterms:issued>\n// <summary>The Adventures of Sherlock Holmes is a collection of twelve stories by Sir Arthur Conan Doyle, featuring his famous detective and illustrated by Sidney Paget.\n// These are the first of the Sherlock Holmes short stories, originally published as single stories in the Strand Magazine from July 1891 to June 1892. The book was published in England on October 14, 1892 by George Newnes Ltd and in a US Edition on October 15 by Harper. The initial combined print run was 14,500 copies.</summary>\n// <schema:Series schema:position=\"9\" schema:name=\"Sherlock Holmes\" schema:url=\"/list/1421?serie_id=9\"/>\n// <category label=\"Fiction\" term=\"FBFIC000000\" scheme=\"http://www.feedbooks.com/categories\"/>\n// <category label=\"Mystery &amp; Detective\" term=\"FBFIC022000\" scheme=\"http://www.feedbooks.com/categories\"/>\n// <category label=\"Short Stories\" term=\"FBFIC029000\" scheme=\"http://www.feedbooks.com/categories\"/>\n// <link type=\"text/html\" rel=\"alternate\" title=\"View on Feedbooks\" href=\"http://www.feedbooks.com/book/1421\"/>\n// <link type=\"image/jpeg\" rel=\"http://opds-spec.org/image\" href=\"http://covers.feedbooks.net/book/1421.jpg?size=large\"/>\n// <link type=\"image/jpeg\" rel=\"http://opds-spec.org/image/thumbnail\" href=\"http://covers.feedbooks.net/book/1421.jpg\"/>\n// <content type=\"html\">&lt;p&gt;The Adventures of Sherlock Holmes is a collection of twelve stories by Sir Arthur Conan Doyle, featuring his famous detective and illustrated by Sidney Paget.\n// &lt;br /&gt;These are the first of the Sherlock Holmes short stories, originally published as single stories in the Strand Magazine from July 1891 to June 1892. The book was published in England on October 14, 1892 by George Newnes Ltd and in a US Edition on October 15 by Harper. The initial combined print run was 14,500 copies.&lt;/p&gt;</content>\n// <link type=\"application/atom+xml;type=entry;profile=opds-catalog\" rel=\"self\" href=\"https://catalog.feedbooks.com/book/1421.atom\"/>\n// <link type=\"application/epub+zip\" rel=\"http://opds-spec.org/acquisition\" href=\"http://www.feedbooks.com/book/1421.epub\"/>\n// <link type=\"application/atom+xml;profile=opds-catalog;kind=acquisition\" rel=\"http://www.feedbooks.com/opds/same_series\" title=\"In the same series\" href=\"https://catalog.feedbooks.com/series/9.atom?lang=en\"/>\n// <link type=\"application/atom+xml;profile=opds-catalog;kind=acquisition\" rel=\"http://www.feedbooks.com/opds/same_author\" title=\"More books by Arthur Conan Doyle\" href=\"https://catalog.feedbooks.com/publicdomain/browse/en/recent.atom?author_id=1\"/>\n// </entry>`;\n\nconst xmlStr = `<entry xmlns=\"http://opds-spec.org/2010/catalog\" xmlns:atom=\"http://www.w3.org/2005/Atom\">\n<atom:updated>2000-12-31T23:59:59.999Z</atom:updated>\n</entry>`;\nconst xmlDom = new xmldom.DOMParser().parseFromString(xmlStr);\nif (!xmlDom || !xmlDom.documentElement) {\n    process.exit(1);\n}\nconst isEntry = xmlDom.documentElement.localName === \"entry\";\nif (isEntry) {\n    const opds1Entry = XML.deserialize<Entry>(xmlDom, Entry);\n    console.log(opds1Entry);\n} else {\n    const opds1Feed = XML.deserialize<OPDS>(xmlDom, OPDS);\n    console.log(opds1Feed);\n}\n\nconsole.log(\"DONE.\");\n"]}