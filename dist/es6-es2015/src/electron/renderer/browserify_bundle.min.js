!function e(t,n,o){function r(c,a){if(!n[c]){if(!t[c]){var u="function"==typeof require&&require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[c]={exports:{}};t[c][0].call(s.exports,function(e){var n=t[c][1][e];return r(n||e)},s,s.exports,e,t,n,o)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=e("tslib"),r=e("./querystring");console.log("INDEX"),console.log(window.location),console.log(document.baseURI),console.log(document.URL),window.onerror=(e=>{console.log("Error",e)}),window.addEventListener("DOMContentLoaded",()=>{const e=r.getURLQueryParams().pub;console.log(" (((( publicationJsonUrl )))) "+e);const t=document.createElement("webview");t.addEventListener("dom-ready",()=>{t.openDevTools()}),t.setAttribute("id","webview1"),t.setAttribute("style","width: 100%; height: 400px;box-sizing: border-box; border: 2px solid black"),t.setAttribute("webpreferences","nodeIntegration=0, nodeIntegrationInWorker=0, sandbox=0, contextIsolation=0, webSecurity=1, allowRunningInsecureContent=0"),document.body.appendChild(t);const n=document.createElement("webview");n.addEventListener("dom-ready",()=>{n.openDevTools(),setTimeout(()=>o.__awaiter(this,void 0,void 0,function*(){document.body.setAttribute("style","background-color: silver; margin: 0; padding: 0;");const n=document.querySelector("html > body > h1");if(n){n.setAttribute("style","color: green;");try{yield fetch(e.replace("/pub/","/pub/*-ZWM0ZjJkYmIzYjE0MDA5NTU1MGM5YWZiYmI2OWI1ZDZmZDllODE0YjlkYTgyZmFkMGIzNGU5ZmNiZTU2ZjFjYg==-*"));const n=yield fetch(e);n.ok||console.log("BAD RESPONSE?!"),n.headers.forEach((e,t)=>{console.log(e+" => "+t)});const o=yield n.json();console.log(o),o.spine.forEach(n=>{const o=document.createElement("a"),r=e+"/../"+n.href;o.setAttribute("href",r),o.addEventListener("click",e=>{t.setAttribute("src",r),e.preventDefault()}),o.appendChild(document.createTextNode(n.href)),document.body.appendChild(o),document.body.appendChild(document.createElement("br"))})}catch(e){console.log(e)}}}),5e3)}),n.setAttribute("id","webview2"),n.setAttribute("style","display: inline-flex; visibilityx: hidden; width: 100%; height: 50px; box-sizing: border-box; border: 2px solid magenta"),n.setAttribute("webpreferences","nodeIntegration=0, nodeIntegrationInWorker=0, sandbox=0, contextIsolation=0, webSecurity=1, allowRunningInsecureContent=0"),n.setAttribute("preload","./preload.js"),document.body.appendChild(n);const i=e+"/../";console.log(i),n.setAttribute("src",i)})},{"./querystring":2,tslib:3}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getURLQueryParams=(()=>{const e={};let t=window.location.search;return t&&t.length&&(t=t.substring(1)).split("&").forEach(t=>{const n=t.split("=");n.length>1&&(e[n[0]]=decodeURIComponent(n[1]))}),e})},{}],3:[function(e,t,n){(function(e){var n,o,r,i,c,a,u,l,s,f,d,p,y,b,h,w;!function(n){function o(e,t){return function(n,o){return e[n]=t?t(n,o):o}}var r="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(e){n(o(r,o(e)))}):n("object"==typeof t&&"object"==typeof t.exports?o(r,o(t.exports)):o(r))}(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};n=function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)},o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]]);return n},i=function(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},c=function(e,t){return function(n,o){t(n,o,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,a)}u((o=o.apply(e,t||[])).next())})},l=function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(c=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(c=c.call(i,n[1])).done)return c;switch(i=0,c&&(n=[0,c.value]),n[0]){case 0:case 1:c=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(c=u.trys,!(c=c.length>0&&c[c.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!c||n[1]>c[0]&&n[1]<c[3])){u.label=n[1];break}if(6===n[0]&&u.label<c[1]){u.label=c[1],c=n;break}if(c&&u.label<c[2]){u.label=c[2],u.ops.push(n);break}c[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{r=c=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,c,a,u={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},s=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},f=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return c},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e},y=function(e){return this instanceof y?(this.v=e,this):new y(e)},b=function(e,t,n){function o(e){s[e]&&(l[e]=function(t){return new Promise(function(n,o){f.push([e,t,n,o])>1||r(e,t)})})}function r(e,t){try{i(s[e](t))}catch(e){u(f[0][3],e)}}function i(e){e.value instanceof y?Promise.resolve(e.value.v).then(c,a):u(f[0][2],e)}function c(e){r("next",e)}function a(e){r("throw",e)}function u(e,t){e(t),f.shift(),f.length&&r(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,s=n.apply(e,t||[]),f=[];return l={},o("next"),o("throw"),o("return"),l[Symbol.asyncIterator]=function(){return this},l},h=function(e){function t(t,r){e[t]&&(n[t]=function(n){return(o=!o)?{value:y(e[t](n)),done:"return"===t}:r?r(n):n})}var n,o;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},w=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof f?f(e):e[Symbol.iterator]()},e("__extends",n),e("__assign",o),e("__rest",r),e("__decorate",i),e("__param",c),e("__metadata",a),e("__awaiter",u),e("__generator",l),e("__exportStar",s),e("__values",f),e("__read",d),e("__spread",p),e("__await",y),e("__asyncGenerator",b),e("__asyncDelegator",h),e("__asyncValues",w)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
//# sourceMappingURL=browserify_bundle.min.js.map