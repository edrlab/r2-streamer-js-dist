{"version":3,"file":"test-JSON-Title.js","sourceRoot":"","sources":["../../../test/test-JSON-Title.ts"],"names":[],"mappings":"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","sourcesContent":["import * as path from \"path\";\r\n\r\nimport { Metadata } from \"@models/metadata\";\r\nimport { IStringMap } from \"@models/metadata-multilang\";\r\nimport { OPDSPublicationMetadata } from \"@opds/opds2/opds2-publicationMetadata\";\r\nimport { test } from \"ava\";\r\nimport { JSON as TAJSON } from \"ta-json\";\r\n\r\nimport { setLcpNativePluginPath } from \"@parser/epub/lcp\";\r\nimport { initGlobals } from \"../src/init-globals\";\r\nimport {\r\n    checkType_Object,\r\n    checkType_String,\r\n    inspect,\r\n    logJSON,\r\n} from \"./helpers\";\r\n\r\ninitGlobals();\r\nsetLcpNativePluginPath(path.join(process.cwd(), \"LCP\", \"lcp.node\"));\r\n\r\n// ==========================\r\n\r\nconst titleStr1 = \"str1\";\r\nconst titleStr2 = \"str2\";\r\nconst titleLang1 = \"lang1\";\r\nconst titleLang2 = \"lang2\";\r\nconst titleLangStr1: IStringMap = {};\r\ntitleLangStr1[titleLang1] = titleStr1;\r\ntitleLangStr1[titleLang2] = titleStr2;\r\nconst titleLangStr2: IStringMap = {};\r\ntitleLangStr2[titleLang1] = titleStr2;\r\ntitleLangStr2[titleLang2] = titleStr1;\r\n\r\n// ==========================\r\n\r\ntest(\"JSON SERIALIZE: OPDSPublicationMetadata.Title => string\", (t) => {\r\n\r\n    const md = new OPDSPublicationMetadata();\r\n    md.Title = titleStr1;\r\n    inspect(md);\r\n\r\n    const json = TAJSON.serialize(md);\r\n    logJSON(json);\r\n\r\n    checkType_String(t, json.title);\r\n    t.is(json.title, titleStr1);\r\n});\r\n\r\ntest(\"JSON SERIALIZE: OPDSPublicationMetadata.Title => string-lang\", (t) => {\r\n\r\n    const md = new OPDSPublicationMetadata();\r\n    md.Title = titleLangStr1;\r\n    inspect(md);\r\n\r\n    const json = TAJSON.serialize(md);\r\n    logJSON(json);\r\n\r\n    checkType_Object(t, json.title);\r\n\r\n    checkType_String(t, json.title[titleLang1]);\r\n    t.is(json.title[titleLang1], titleStr1);\r\n\r\n    checkType_String(t, json.title[titleLang2]);\r\n    t.is(json.title[titleLang2], titleStr2);\r\n});\r\n\r\ntest(\"JSON DESERIALIZE: OPDSPublicationMetadata.Title => string\", (t) => {\r\n\r\n    const json: any = {};\r\n    json.title = titleStr1;\r\n    logJSON(json);\r\n\r\n    const md: OPDSPublicationMetadata = TAJSON.deserialize<OPDSPublicationMetadata>(json, OPDSPublicationMetadata);\r\n    inspect(md);\r\n\r\n    checkType_String(t, md.Title);\r\n    t.is(md.Title, titleStr1);\r\n});\r\n\r\ntest(\"JSON DESERIALIZE: OPDSPublicationMetadata.Title => string-lang\", (t) => {\r\n\r\n    const json: any = {};\r\n    json.title = titleLangStr1;\r\n    logJSON(json);\r\n\r\n    const md: OPDSPublicationMetadata = TAJSON.deserialize<OPDSPublicationMetadata>(json, OPDSPublicationMetadata);\r\n    inspect(md);\r\n\r\n    checkType_Object(t, md.Title);\r\n\r\n    checkType_String(t, (md.Title as IStringMap)[titleLang1]);\r\n    t.is((md.Title as IStringMap)[titleLang1], titleStr1);\r\n\r\n    checkType_String(t, (md.Title as IStringMap)[titleLang2]);\r\n    t.is((md.Title as IStringMap)[titleLang2], titleStr2);\r\n});\r\n\r\n// ==========================\r\n\r\ntest(\"JSON SERIALIZE: Metadata.Title => string\", (t) => {\r\n\r\n    const md = new Metadata();\r\n    md.Title = titleStr1;\r\n    inspect(md);\r\n\r\n    const json = TAJSON.serialize(md);\r\n    logJSON(json);\r\n\r\n    checkType_String(t, json.title);\r\n    t.is(json.title, titleStr1);\r\n});\r\n\r\ntest(\"JSON SERIALIZE: Metadata.Title => string-lang\", (t) => {\r\n\r\n    const md = new Metadata();\r\n    md.Title = titleLangStr1;\r\n    inspect(md);\r\n\r\n    const json = TAJSON.serialize(md);\r\n    logJSON(json);\r\n\r\n    checkType_Object(t, json.title);\r\n\r\n    checkType_String(t, json.title[titleLang1]);\r\n    t.is(json.title[titleLang1], titleStr1);\r\n\r\n    checkType_String(t, json.title[titleLang2]);\r\n    t.is(json.title[titleLang2], titleStr2);\r\n});\r\n\r\ntest(\"JSON DESERIALIZE: Metadata.Title => string\", (t) => {\r\n\r\n    const json: any = {};\r\n    json.title = titleStr1;\r\n    logJSON(json);\r\n\r\n    const md: Metadata = TAJSON.deserialize<Metadata>(json, Metadata);\r\n    inspect(md);\r\n\r\n    checkType_String(t, md.Title);\r\n    t.is(md.Title, titleStr1);\r\n});\r\n\r\ntest(\"JSON DESERIALIZE: Metadata.Title => string-lang\", (t) => {\r\n\r\n    const json: any = {};\r\n    json.title = titleLangStr1;\r\n    logJSON(json);\r\n\r\n    const md: Metadata = TAJSON.deserialize<Metadata>(json, Metadata);\r\n    inspect(md);\r\n\r\n    checkType_Object(t, md.Title);\r\n\r\n    checkType_String(t, (md.Title as IStringMap)[titleLang1]);\r\n    t.is((md.Title as IStringMap)[titleLang1], titleStr1);\r\n\r\n    checkType_String(t, (md.Title as IStringMap)[titleLang2]);\r\n    t.is((md.Title as IStringMap)[titleLang2], titleStr2);\r\n});\r\n"]}