{"version":3,"file":"server-opds.js","sourceRoot":"","sources":["../../../../src/http/server-opds.ts"],"names":[],"mappings":"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"}