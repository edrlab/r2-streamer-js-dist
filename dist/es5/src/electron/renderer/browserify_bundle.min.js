!function e(t,n,r){function o(c,a){if(!n[c]){if(!t[c]){var u="function"==typeof require&&require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[c]={exports:{}};t[c][0].call(f.exports,function(e){var n=t[c][1][e];return o(n||e)},f,f.exports,e,t,n,r)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(e,t,n){"use strict";var r=this;Object.defineProperty(n,"__esModule",{value:!0});var o=e("tslib"),i=e("./querystring");console.log("INDEX"),console.log(window.location),console.log(document.baseURI),console.log(document.URL),window.onerror=function(e){console.log("Error",e)},window.addEventListener("DOMContentLoaded",function(){var e=i.getURLQueryParams().pub;console.log(" (((( publicationJsonUrl )))) "+e);var t=document.createElement("webview");t.addEventListener("dom-ready",function(){t.openDevTools()}),t.setAttribute("id","webview1"),t.setAttribute("style","width: 100%; height: 400px;box-sizing: border-box; border: 2px solid black"),t.setAttribute("webpreferences","nodeIntegration=0, nodeIntegrationInWorker=0, sandbox=0, contextIsolation=0, webSecurity=1, allowRunningInsecureContent=0"),document.body.appendChild(t);var n=document.createElement("webview");n.addEventListener("dom-ready",function(){n.openDevTools(),setTimeout(function(){return o.__awaiter(r,void 0,void 0,function(){var n,r,i,c;return o.__generator(this,function(o){switch(o.label){case 0:if(document.body.setAttribute("style","background-color: silver; margin: 0; padding: 0;"),!(n=document.querySelector("html > body > h1")))return[2];n.setAttribute("style","color: green;"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,fetch(e.replace("/pub/","/pub/*-ZWM0ZjJkYmIzYjE0MDA5NTU1MGM5YWZiYmI2OWI1ZDZmZDllODE0YjlkYTgyZmFkMGIzNGU5ZmNiZTU2ZjFjYg==-*"))];case 2:return o.sent(),[4,fetch(e)];case 3:return(r=o.sent()).ok||console.log("BAD RESPONSE?!"),r.headers.forEach(function(e,t){console.log(e+" => "+t)}),[4,r.json()];case 4:return i=o.sent(),console.log(i),i.spine.forEach(function(n){var r=document.createElement("a"),o=e+"/../"+n.href;r.setAttribute("href",o),r.addEventListener("click",function(e){t.setAttribute("src",o),e.preventDefault()}),r.appendChild(document.createTextNode(n.href)),document.body.appendChild(r),document.body.appendChild(document.createElement("br"))}),[3,6];case 5:return c=o.sent(),console.log(c),[3,6];case 6:return[2]}})})},5e3)}),n.setAttribute("id","webview2"),n.setAttribute("style","display: inline-flex; visibilityx: hidden; width: 100%; height: 50px; box-sizing: border-box; border: 2px solid magenta"),n.setAttribute("webpreferences","nodeIntegration=0, nodeIntegrationInWorker=0, sandbox=0, contextIsolation=0, webSecurity=1, allowRunningInsecureContent=0"),n.setAttribute("preload","./preload.js"),document.body.appendChild(n);var c=e+"/../";console.log(c),n.setAttribute("src",c)})},{"./querystring":2,tslib:3}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getURLQueryParams=function(){var e={},t=window.location.search;return t&&t.length&&(t=t.substring(1)).split("&").forEach(function(t){var n=t.split("=");n.length>1&&(e[n[0]]=decodeURIComponent(n[1]))}),e}},{}],3:[function(e,t,n){(function(e){var n,r,o,i,c,a,u,l,f,s,d,p,y,b,h,v;!function(n){function r(e,t){return function(n,r){return e[n]=t?t(n,r):r}}var o="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(e){n(r(o,r(e)))}):n("object"==typeof t&&"object"==typeof t.exports?r(o,r(t.exports)):r(o))}(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};n=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n},i=function(e,t,n,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(c=(i<3?o(c):i>3?o(t,n,c):o(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c},c=function(e,t){return function(n,r){t(n,r,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function c(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(c,a)}u((r=r.apply(e,t||[])).next())})},l=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(c=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(c=c.call(i,n[1])).done)return c;switch(i=0,c&&(n=[0,c.value]),n[0]){case 0:case 1:c=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(c=u.trys,!(c=c.length>0&&c[c.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!c||n[1]>c[0]&&n[1]<c[3])){u.label=n[1];break}if(6===n[0]&&u.label<c[1]){u.label=c[1],c=n;break}if(c&&u.label<c[2]){u.label=c[2],u.ops.push(n);break}c[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=c=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,c,a,u={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},f=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},s=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e},y=function(e){return this instanceof y?(this.v=e,this):new y(e)},b=function(e,t,n){function r(e){f[e]&&(l[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{i(f[e](t))}catch(e){u(s[0][3],e)}}function i(e){e.value instanceof y?Promise.resolve(e.value.v).then(c,a):u(s[0][2],e)}function c(e){o("next",e)}function a(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=n.apply(e,t||[]),s=[];return l={},r("next"),r("throw"),r("return"),l[Symbol.asyncIterator]=function(){return this},l},h=function(e){function t(t,o){e[t]&&(n[t]=function(n){return(r=!r)?{value:y(e[t](n)),done:"return"===t}:o?o(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof s?s(e):e[Symbol.iterator]()},e("__extends",n),e("__assign",r),e("__rest",o),e("__decorate",i),e("__param",c),e("__metadata",a),e("__awaiter",u),e("__generator",l),e("__exportStar",f),e("__values",s),e("__read",d),e("__spread",p),e("__await",y),e("__asyncGenerator",b),e("__asyncDelegator",h),e("__asyncValues",v)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
//# sourceMappingURL=browserify_bundle.min.js.map